<slack>
  <team_domain>clojurians</team_domain>
  <channel_name>clojure</channel_name>
  <start_date>2018-12-31T00:00:02.058422</start_date>
  <end_date>2019-06-07T01:00:01.660771</end_date>
  <message conversation_id="1">
    <ts>2018-12-31T00:12:00.504800</ts>
    <user>Antwan</user>
    <text>I'm looking at laterna now and I'm not quite sure</text>
  </message>
  <message conversation_id="1">
    <ts>2018-12-31T00:12:35.506000</ts>
    <user>Antwan</user>
    <text>Maybe something about the way it displays characters in cells means that a new line wont implicitly move to a cell below?</text>
  </message>
  <message conversation_id="2">
    <ts>2018-12-31T07:27:14.506800</ts>
    <user>Brain</user>
    <text>I'm currently doing some experimentation getting a vscode WebView REPL with REBL like viewing, although it's very prototype and early days currently. Full code editing would require literally throwing out vscode's editor and using a custom one however, since it's quite strict about what you can do within a vanilla text editor.</text>
  </message>
  <message conversation_id="2">
    <ts>2018-12-31T07:29:12.507400</ts>
    <user>Brain</user>
    <text>This is *definitely* a path I feel needs pursuing to it's fullest though, even if it means dropping vscode and building a dedicated electron application.</text>
  </message>
  <message conversation_id="2">
    <ts>2018-12-31T07:30:54.507700</ts>
    <user>Brain</user>
    <text>I never saw the Interlisp version of that, though I've read many times how friendly it was considered to be. The only experience I have with lispms is mid-90's Symbolics machines, are there any emulators, videos, or perhaps surviving documentation that describe it?</text>
  </message>
  <message conversation_id="2">
    <ts>2018-12-31T09:36:37.510300</ts>
    <user>Isa</user>
    <text>I need to convert file to PDF, but:
- things have to be precise to each mm
- input file has to be in format easy to edit by user, PhotoShop, some kind of drawing in web browser, maybe even XML
- if font is too big to fit text into space it needs to decrease font

I don’t any good solution to do it. Generating PDF is a nightmare.
* Unless I want to pay a lot for some extra payment SaaS or libraries</text>
  </message>
  <message conversation_id="2">
    <ts>2018-12-31T09:37:40.511000</ts>
    <user>Isa</user>
    <text>But idea is to make a product from it, so I don’t want to stick with any sick high price licence</text>
  </message>
  <message conversation_id="3">
    <ts>2018-12-31T10:01:34.511400</ts>
    <user>Isa</user>
    <text>especially for label printers</text>
  </message>
  <message conversation_id="4">
    <ts>2018-12-31T11:17:04.513400</ts>
    <user>Jessia</user>
    <text>Depending on how you want to deliver this to users, the cheap-and-cheerful option is to make a printer-friendly HTML page and let users print to PDF (or paper) themselves</text>
  </message>
  <message conversation_id="5">
    <ts>2018-12-31T12:35:59.514100</ts>
    <user>Latonya</user>
    <text>In what way can something be precise to each mm, but also auto-adjust text size?  I don't understand how those two desires can be satisfied at the same time.</text>
  </message>
  <message conversation_id="5">
    <ts>2018-12-31T12:37:52.514200</ts>
    <user>Sheron</user>
    <text>imho it's always a nightmare, even with paid add ons</text>
  </message>
  <message conversation_id="6">
    <ts>2018-12-31T13:24:20.515900</ts>
    <user>Lana</user>
    <text>I feel like I must be missing something… why is it that when I call `keys` on a `sorted-map`, I don’t get a sorted collection? I am trying to implement a simple interval tree, and this gap is a sticking point.</text>
  </message>
  <message conversation_id="6">
    <ts>2018-12-31T13:32:00.516600</ts>
    <user>Rosaline</user>
    <text>what do you mean by a sorted collection?</text>
  </message>
  <message conversation_id="6">
    <ts>2018-12-31T13:32:58.517500</ts>
    <user>Rosaline</user>
    <text>if you mean a seq of the keys in order, I am not sure, but I would be surprised if that is not what you get, so I wonder what makes you think that is not what you are getting</text>
  </message>
  <message conversation_id="6">
    <ts>2018-12-31T13:36:11.518300</ts>
    <user>Rosaline</user>
    <text>```
user=&amp;gt; 
(let [x (shuffle (range 32))]
  (= (sort x)
     (keys (into (sorted-map) (zipmap x x)))))
true
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="7">
    <ts>2018-12-31T13:57:44.518900</ts>
    <user>Antwan</user>
    <text>maybe postscript would be helpful?</text>
  </message>
  <message conversation_id="7">
    <ts>2018-12-31T14:08:06.520100</ts>
    <user>Antwan</user>
    <text>_in general_ what you want to do might be a headache and a half, but it might be possible to hack together something specific</text>
  </message>
  <message conversation_id="7">
    <ts>2018-12-31T14:11:36.521800</ts>
    <user>Antwan</user>
    <text>Like, a brute force way might be (if you are printing only one line on a label) to pick a font size based on a heuristic (12, lets say) and then render a pdf. Run an image of that pdf through handwriting recognition software and see if it reads it correctly</text>
  </message>
  <message conversation_id="7">
    <ts>2018-12-31T14:12:10.522600</ts>
    <user>Antwan</user>
    <text>then just find the largest font size on which you can read everything</text>
  </message>
  <message conversation_id="7">
    <ts>2018-12-31T14:12:49.523100</ts>
    <user>Antwan</user>
    <text>and if there is none then you can send a message back to your users that there is no way for you to do it</text>
  </message>
  <message conversation_id="7">
    <ts>2018-12-31T14:15:21.523500</ts>
    <user>Antwan</user>
    <text>as an upside you can throw "uses machine learning" on whatever your product is</text>
  </message>
  <message conversation_id="7">
    <ts>2018-12-31T14:15:29.523800</ts>
    <user>Antwan</user>
    <text>as a downside there is everything else</text>
  </message>
  <message conversation_id="8">
    <ts>2018-12-31T14:40:38.524100</ts>
    <user>Isa</user>
    <text>I don’t know any way to do it with precision to each 1 mm</text>
  </message>
  <message conversation_id="8">
    <ts>2018-12-31T14:42:03.524300</ts>
    <user>Isa</user>
    <text>Only with Java and even then it is super hard. But with Java code users can’ really give an input as a file</text>
  </message>
  <message conversation_id="8">
    <ts>2018-12-31T14:44:22.524500</ts>
    <user>Isa</user>
    <text>What is the best way in your opinion to convert input (file, XML, etc.) to PDF with precision to 1 mm?</text>
  </message>
  <message conversation_id="8">
    <ts>2018-12-31T15:00:35.525300</ts>
    <user>Lana</user>
    <text>&lt;@Rosaline&gt; I mean something that implements `clojure.lang.Sorted` so you can use `subseq` on it.</text>
  </message>
  <message conversation_id="8">
    <ts>2018-12-31T15:00:57.525800</ts>
    <user>Lana</user>
    <text>They do come back in the expected order, but not implementing the right interfaces to take full advantage of that.</text>
  </message>
  <message conversation_id="8">
    <ts>2018-12-31T15:08:40.526800</ts>
    <user>Lana</user>
    <text>Ah,  but it turns out the map itself does implement sorted, so I can use `subseq` directly on that, which addresses my efficient interval matching quite effectively.</text>
  </message>
  <message conversation_id="8">
    <ts>2018-12-31T15:09:21.527000</ts>
    <user>Lana</user>
    <text>That’s what I was missing. ^_^</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T20:37:38.535700</ts>
    <user>Alix</user>
    <text>I'm confused about when to use what style of namespaced keys. I know how they work, I just don't know what is best from a maintainability standpoint. For example is `:user/email` a good namespaced key? Or should it be namespaced to the company such as `com.company.user/email`? Or perhaps namespaced to the project `com.company.project.user/email` or even a project file namespace such as `com.company.project.spec.user/email`. Should any way be used exclusively, or are there use cases where either style might be used? I'm thinking that `:user/email` still might result in naming collisions if two systems deal with `user` in a different way. I'm hoping to figure out an optimal solution for systems spanning many projects in an organisation.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T20:38:06.536200</ts>
    <user>Alix</user>
    <text>I think I remember a Rich Hickey talk on this but I don't remember which one</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T20:45:49.537000</ts>
    <user>Rosaline</user>
    <text>project level is pretty good, I don't care very much for using the names of code namespaces for keyword namespaces</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T20:46:47.538000</ts>
    <user>Rosaline</user>
    <text>I think a good rule of thumb is to imagine all your data that exists in memory exists in a sql database, the namespaces would be the table names and the names would be the column names</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T20:47:46.538700</ts>
    <user>Rosaline</user>
    <text>and then imagine everyone's data is in the same global table space, and what would you need to name your tables to avoid collisions</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T20:49:47.539400</ts>
    <user>Alix</user>
    <text>When you say everyone's data, are you referring to company level namespace like `com.company.user/email`?</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T20:50:29.540200</ts>
    <user>Rosaline</user>
    <text>that would be one possible solution to that, prefixing all your table names with some string that you "own"</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T20:51:51.541300</ts>
    <user>Rosaline</user>
    <text>another solution would be using uuids, which would work but are not very friendly</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T21:10:37.542500</ts>
    <user>Celestine</user>
    <text>Another factor to consider &lt;@Alix&gt; is how "global" your data is going to be. Is this just a map of data that will exist inside your company? Inside just this project? How unique does the name need to be?</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T21:11:25.543500</ts>
    <user>Celestine</user>
    <text>If you produce it from a library you put out there for everyone to use, it needs to be "more unique" so that it can't conflict with any similar data used by any of the users of your library.</text>
  </message>
  <message conversation_id="10">
    <ts>2018-12-31T21:13:45.544000</ts>
    <user>Madeleine</user>
    <text>I know I've used `::`</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T21:14:03.544500</ts>
    <user>Madeleine</user>
    <text>And the issue was that it coupled our key names with the namespace</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T21:15:42.546500</ts>
    <user>Madeleine</user>
    <text> So I'd say be careful about that</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T21:28:52.556000</ts>
    <user>Alix</user>
    <text>Right so it looks like there is no real convention around this. And I should just go with what makes the most sense given the factors.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T21:34:37.560600</ts>
    <user>Alix</user>
    <text>Some examples:
If I need a db uri for my users db in my company I could namespace like this `:db.users/uri`. I wouldn't want to use `:db/uri` as I might have many databases in my company. I also didn't namespace to the company because this key will be accessed only within the company
And I could use `:user/email` if users in my company are global among all projects. But if my company had two products I would namespace the user attributes accordingly such as `:project1.user/email` &amp;amp; `:project2.user/email` but only if some of the code was shared in any way.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T21:35:02.561000</ts>
    <user>Alix</user>
    <text>That's where my thinking is after considering the feedback</text>
  </message>
  <message conversation_id="11">
    <ts>2018-12-31T22:15:33.566200</ts>
    <user>Otelia</user>
    <text>This issue of keyword namespaces is very confusing to me. What advantage is there to making the keyword completely unique across, for example, the organization? In other words, what harm is there in using :user/email for the email column in two different DBs in an organization? Is the keyword alone really used to determine which table an attribute belongs to?</text>
  </message>
  <message conversation_id="11">
    <ts>2018-12-31T22:19:23.569000</ts>
    <user>Otelia</user>
    <text>Maybe :person/email would be an even better example.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:29:52.575400</ts>
    <user>Alix</user>
    <text>&lt;@Otelia&gt; If there was 2 databases for users (employees, clients) then the business logic for dealing with the two types of users would probably be different. And the data is stored is two different places. To me this because of the 2 datasources, I would think to namespace to two separate namespaces. The namespace gives me the ability to inspect my data and decide if I want to do something with a client or an employee. And I can tell the difference because of the namespace. If there was no difference, then there would be no reason to store client &amp;amp; employee separately or differently (with some technical exceptions such as security). Because they're essentially the same I would namespace them the same. I'm still working all this out but that's my thinking.</text>
  </message>
  <message conversation_id="11">
    <ts>2018-12-31T22:31:17.576700</ts>
    <user>Otelia</user>
    <text>I understand what you're saying. I'm just surprised that there wouldn't always be context available (client vs employee) and that the keyword alone must be unique to get the context.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:35:59.579800</ts>
    <user>Alix</user>
    <text>Yea that's something I've though about also. For example the namespaces seem redundant for this data structure `{:orgs [{:org/employees [{:employee/paychecks [{:paycheck/id 1}]}]}]}` because each level up contains the context. Perhaps the namespace allows you to avoid passing in the context or more information than that is needed. For a paycheck/id=1 instead of giving `{:employee/paychecks [{:paycheck/id 1}`, you just give `{:paycheck/id 1}` and the namespace allows you to determine the context.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:37:19.580600</ts>
    <user>Otelia</user>
    <text>I think you must be right.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:38:32.582300</ts>
    <user>Otelia</user>
    <text>But it would be interesting to know what specific benefits others have found for the unique keywords.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:39:35.583300</ts>
    <user>Alix</user>
    <text>Yea I'd like to know also. I've never written code like and I'd like to know if others how found it practical for production use</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:40:32.584300</ts>
    <user>Alix</user>
    <text>The most practical scenarios I can think of is dynamic spec validation. It could just lookup the spec for all its keys and avoid knowing any context apart from the keys</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:41:12.584700</ts>
    <user>Alix</user>
    <text>I've never done that though so I'm not sure how if at all it would work</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:41:40.585700</ts>
    <user>Alix</user>
    <text>Or even if it's a good idea. I feel like you would want to explicitly specify what spec you're validating against</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:41:44.585800</ts>
    <user>Otelia</user>
    <text>OTOH, a spec for :person/email would probably work for email addresses in all tables.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:43:10.586300</ts>
    <user>Alix</user>
    <text>However you could still do that with unique keys and some mapping.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:45:44.589400</ts>
    <user>Alix</user>
    <text>But your thinking raises another question for me. So far I've assumed that the namespace of keys in a map would be the same. Are there any use cases for them to be different? Perhaps what your suggesting might also be a correct way of doing this. `{:person/id "123" :person/name "Caleb" :employee/number "001"}`</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:46:50.590600</ts>
    <user>Alix</user>
    <text>As long as there would be no way that the information stored in the shared keys would need to be handled differently I would think</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:47:17.590800</ts>
    <user>Otelia</user>
    <text>Yes, I've wondered about that. But I don't have enough experience in Clojure to say. Someone with more experience will probably chime in. I can admit that unique keywords give you the most flexibility for treating them differently, if necessary, just don't know specifically when it's necessary.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:48:02.591400</ts>
    <user>Alix</user>
    <text>Yea I agree. How far is too far. Perhaps there are times when you would use them and times when you wouldn't.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:51:57.594700</ts>
    <user>Celestine</user>
    <text>When you're looking at nested data structures, remember that sometimes you'll just be passing part of it around -- so you don't always have the parental context.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:52:39.595600</ts>
    <user>Celestine</user>
    <text>Qualified keys are designed to "avoid conflicts" and to "uniquely identify an entity in a given context". So they really are about _context_.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:55:43.599100</ts>
    <user>Celestine</user>
    <text>For example, at work, we have a billing subsystem and we generally have all the keys in maps associated with billing qualified with `wsbilling`. The context we need to convey is that "this data all belongs to billing", so the maps within that system tend to have keys like `:wsbilling/member-id`, `:wsbilling/initial-amount` and so on -- unique within the context of billing and the systems that it interacts with.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:57:57.601600</ts>
    <user>Celestine</user>
    <text>Another part of the system deals with multiple "layers" of domain logic so it uses qualifiers that identify the different layers.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:58:00.601900</ts>
    <user>Alix</user>
    <text>Right that makes sense. And expanding upon mixing namespaces in a map as I previously suggested. Looking back on work with datomic, your entities wouldn't contain maps with mixed namespaced keys. They would nest them under a ref.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:58:11.602500</ts>
    <user>Celestine</user>
    <text>Some of these qualifiers match actual namespaces, some don't.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:58:30.603000</ts>
    <user>Alix</user>
    <text>So perhaps the second nesting would be better than mixing namespaces</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T22:58:53.603800</ts>
    <user>Celestine</user>
    <text>The idea is you use whatever qualifiers make sense for your data in your context. Making these "as unique as they need to be".</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:00:00.605200</ts>
    <user>Alix</user>
    <text>&lt;@Celestine&gt; And would the use of qualifiers matching actual namespaces be almost exclusively used for keywords private to the namespace? Are there other reasons you might do this?</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:00:04.605300</ts>
    <user>Celestine</user>
    <text>(which is why there are no specific rules of thumb about this whole thing :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:04:06.608600</ts>
    <user>Alix</user>
    <text>Yea Clojure is very interesting in that regard. It's like the complete opposite of something opinionated like ruby on rails. Everyone sort of does what works for them. It does make it a little difficult if you're new however as its hard to copy what other people do because everyone does it so differently. I imagine it's an experienced developers dream though as they can do everything exactly how they like it.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:04:31.609000</ts>
    <user>Celestine</user>
    <text>It means you need to understand more of the abstractions and concepts, yes.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:09:50.610600</ts>
    <user>Nova</user>
    <text>&lt;@Alix&gt; It's more so that people program with abstractions, and the concrete code that comes out varies</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:10:19.610700</ts>
    <user>Otelia</user>
    <text>Thanks Sean, I see your point about nested data structures. And it is good to know that there is no standard convention.

Another question: If you have both :employee/email and :client/email, don't you sometimes want to treat all emails the same or similarly, and in that case do you use the keyword name to identify it as an email? Just curious if you'd encountered that situation.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:15:56.614300</ts>
    <user>Alix</user>
    <text>&lt;@Nova&gt; That blows my mind a little bit. When deciding on how to implement something I've usually started by figuring out what worked for me in the past or finding out what other people have done. Pretty much just lots of practice. Perhaps to improve myself I should spend some more time reading up on the theory.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:21:20.616700</ts>
    <user>Nova</user>
    <text>&lt;@Alix&gt; It's not so much about theory, as much as it's about understanding 'what needs to happen'</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:21:38.617100</ts>
    <user>Celestine</user>
    <text>&lt;@Otelia&gt; If you've named them `:employee/email` and `:client/email` it'll generally be because you want to be able to tell them apart in a particular context. If you want to do something email-generic, you can pass either value to a function that just takes "an email address" or you can construct a new map containing the bits you might want under more generic names.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:22:12.618400</ts>
    <user>Celestine</user>
    <text>When you get into specs, you also have to consider whether these fields have the same underlying spec or not.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:22:30.619000</ts>
    <user>Nova</user>
    <text>&lt;@Alix&gt; I find that when programming in Lisps, especially clojure, I rarely need to think about writing code. I spend most of my time thinking about architecture or specification. I find this also leads to better applications.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:22:52.619400</ts>
    <user>Celestine</user>
    <text>For example, your spec for `:employee/email` might be a regex that has a fixed `@` domain name part (for your company).</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:24:09.620300</ts>
    <user>Celestine</user>
    <text>&lt;@Alix&gt; Clojure certainly rewards thinking at a higher level of abstraction a lot of the time... and can punish thinking at a lower level sometimes :slightly_smiling_face:</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:25:15.621400</ts>
    <user>Nova</user>
    <text>&lt;@Celestine&gt; I feel like that's a bit unfair, because the flexibility of the language allows you to do far-reaching optimizations with lower-level code changes. Perhaps more accurate to say that Clojure punishes premature optimization more than other languages?</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:30:28.623300</ts>
    <user>Otelia</user>
    <text>My takeaway from this conversation is that I am free to use keyword namespaces for whatever purpose is most suited to my app, which turns the focus back to the app data model. It's a nice freedom. Thanks everyone for the comments and help.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:32:43.623600</ts>
    <user>Alix</user>
    <text>Likewise thank you for the help</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:34:57.624200</ts>
    <user>Celestine</user>
    <text>&lt;@Nova&gt; OK, yeah, that's what I was reaching for really.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:36:31.625800</ts>
    <user>Celestine</user>
    <text>But also if you try to dive in and think about problems the way you might in other languages -- where mutable variables and loops are the basic building blocks -- you'll find Clojure working against you.</text>
  </message>
  <message conversation_id="9">
    <ts>2018-12-31T23:37:09.626600</ts>
    <user>Celestine</user>
    <text>So you often have to step back and think in terms of collections rather than elements, and abstractions rather than implementation, in order to get the "shape" of a Clojure solution.</text>
  </message>
  <message conversation_id="12">
    <ts>2019-01-01T05:15:37.629000</ts>
    <user>Sheron</user>
    <text>wondering which is more intuitive for people to read, dispatching async work in future or async/thread , any opinions ? i don't really care for results that much but i need to dispatch a bunch of i/o bound threads and wait for all of them to finish</text>
  </message>
  <message conversation_id="12">
    <ts>2019-01-01T05:16:09.629500</ts>
    <user>Sheron</user>
    <text>and count of threads is likely to be bigger than core count because i/o has latency :disappointed:</text>
  </message>
  <message conversation_id="12">
    <ts>2019-01-01T05:18:54.630000</ts>
    <user>Sheron</user>
    <text>it appears they both easily scale beyond the count of cores available</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:15:30.635400</ts>
    <user>Stefany</user>
    <text>I am doing some timeseries analytics with clojure, and I have noticed some strange performance issues in loading data. I load timeseries from CSV files (size 500KB each), and I find that slurping data in takes 10ms, and then the CSV parsing takes 100ms (I parse timestamp, and floats). I compared this to incanter csv load (which takes 300ms, so worse). I used taoensso.tufte for performance tracking. I wonder if there are any ideashow to improve performance of such stimple things? If reading from disk takes 10ms, then the parsing should be perhaps another 10ms, but not longer, as disks typically are the bottomleg.  I spend a lot of time just to get simple benchmarks, because I had to remove all the lazyness via "doall".  Any ideas on how to speed Clojure up? Any tricks or recommendations?</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:23:59.636200</ts>
    <user>Sheron</user>
    <text>did you measure the timings before and after jit got kicked in as well ?</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:24:28.636600</ts>
    <user>Stefany</user>
    <text>I assume the Java JIT runs the first time a function is called.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:24:37.637000</ts>
    <user>Stefany</user>
    <text>I ran my performance numbers many times.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:24:42.637300</ts>
    <user>Stefany</user>
    <text>So I dont think this is the culprit.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:25:03.637800</ts>
    <user>Sheron</user>
    <text>they dont get compiled on the first time</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:25:17.638200</ts>
    <user>Sheron</user>
    <text>that number is either in hundreds or thousands before java kicks it's jit into motion</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:25:29.638600</ts>
    <user>Sheron</user>
    <text>but if you had files of 500kb then yes it should have kicked in at some point</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:25:52.639000</ts>
    <user>Sheron</user>
    <text>can you try to isolate the slowness part by excluding parts of parsing ?</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:26:07.639600</ts>
    <user>Sheron</user>
    <text>date parsing does sound a little bit of annoying , so i would try to avoid that at first</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:26:08.639700</ts>
    <user>Stefany</user>
    <text>I now track everything</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:26:27.640300</ts>
    <user>Sheron</user>
    <text>if it turns out to be the slowpoint you'll figure out what to optimize</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:26:29.640500</ts>
    <user>Stefany</user>
    <text>But I still miss about 50% of the total time.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:26:58.640900</ts>
    <user>Sheron</user>
    <text>how many rows do you have in those 500kb ? and how many columns ?</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:28:33.641000</ts>
    <user>Stefany</user>
    <text>None</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:29:08.641800</ts>
    <user>Stefany</user>
    <text>5000 rows, 6 cols</text>
  </message>
  <message conversation_id="14">
    <ts>2019-01-01T08:29:58.642700</ts>
    <user>Matha</user>
    <text>Hi! I am in a bit of a pickle. I would like to use generative testing as part of my test suit and to this end wrote the following test:
```
(deftest generative
  (is (successful? (stest/check `term-&amp;gt;ast))))
```
When running this, however, I get the following error:
```
Exception: java.util.concurrent.ExecutionException: Syntax error compiling at (clojure/test/check/clojure_test.cljc:95:1).
...
```
This only happens if the assertion fails; if it passes everything is fine. Any idea why?</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:30:53.642800</ts>
    <user>Stefany</user>
    <text>sorry, I could not post to this thread my performance snippet.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:31:01.643000</ts>
    <user>Stefany</user>
    <text>What is really bizarre that the slurping is so fast,</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:31:11.643200</ts>
    <user>Stefany</user>
    <text>and the parsing so slow.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:31:27.643400</ts>
    <user>Stefany</user>
    <text>It is order of magnitudes opposite how it should be.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:32:23.643600</ts>
    <user>Stefany</user>
    <text>this is the source</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:39:31.644000</ts>
    <user>Sheron</user>
    <text>i tried this over here</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:39:48.644200</ts>
    <user>Sheron</user>
    <text>generating a csv file with
```
for((i=0; i &amp;lt; 25000; i++)); do echo "`date -Iseconds`,$i.25,\"anytext\""; done &amp;gt; somecsv.csv
```</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:40:37.644400</ts>
    <user>Sheron</user>
    <text>and then tried this code to read the result:
```
(defn do-parsing[]
  (let [data (slurp "somecsv.csv")]
    (last (csv/read-csv data))))

(defn time-parsing []
  (time (do-parsing)))

; (time-parsing)
```</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:41:00.644600</ts>
    <user>Sheron</user>
    <text>indeed seems like feeding it into the read-csv added 200ms of execution time</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:46:47.644800</ts>
    <user>Stefany</user>
    <text>bizarre, isnt it?</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:47:03.645000</ts>
    <user>Stefany</user>
    <text>I thought that perhaps the clojure csv library is somehow not performance optimized,</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:47:08.645200</ts>
    <user>Stefany</user>
    <text>So this is why I tried incanter.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:47:11.645400</ts>
    <user>Stefany</user>
    <text>But incanter is even slower.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:50:33.645600</ts>
    <user>Sheron</user>
    <text>i would rather look for a pure java csv parser and wrap it into something comfy</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:50:49.645800</ts>
    <user>Sheron</user>
    <text>it looks to me that already splitting the lines apart by linebreaks is slower than slurping it from the disk</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:51:37.646000</ts>
    <user>Sheron</user>
    <text>i tried to parallelize the work
```

(defn do-parallel-parsing[]
  (let [data (slurp "somecsv.csv")
        rows (clojure.string/split-lines data)
        parsed-rows (pmap csv/read-csv rows)]
    (last parsed-rows)))

(defn time-parallel-parsing []
  (time (do-parallel-parsing)))

; (time-parallel-parsing)

```</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:51:49.646200</ts>
    <user>Sheron</user>
    <text>and that was a bit faster but still slow by all means :slightly_smiling_face:</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:52:17.646400</ts>
    <user>Sheron</user>
    <text>and had a chance of introducing bugs due to linebreaks within cell values</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:52:40.646600</ts>
    <user>Stefany</user>
    <text>perhaps nobody every uses csv files in clojure</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:52:45.646800</ts>
    <user>Stefany</user>
    <text>so this might be the reason.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:52:57.647000</ts>
    <user>Sheron</user>
    <text>but even the split lines here took the execution time to 50ms already before any csv action</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:53:45.647200</ts>
    <user>Stefany</user>
    <text>line splitting can be a performance cost,</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:53:46.647400</ts>
    <user>Sheron</user>
    <text>people use csv for sure :slightly_smiling_face: but yeah probably they don't go after the milliseconds but have more slowness somewhere else</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:53:48.647600</ts>
    <user>Stefany</user>
    <text>if it is not done correctly.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:54:03.647800</ts>
    <user>Stefany</user>
    <text>because one has to create thousands of sub strings</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:54:07.648000</ts>
    <user>Stefany</user>
    <text>and this is expensive.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:54:26.648200</ts>
    <user>Stefany</user>
    <text>well,</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:54:30.648400</ts>
    <user>Stefany</user>
    <text>my thinking is,</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:54:44.648600</ts>
    <user>Stefany</user>
    <text>that csv parsing should be a fraction of the time it takes to read it from disk.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:54:57.648800</ts>
    <user>Stefany</user>
    <text>I have written a library in c# for .net</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:55:01.649000</ts>
    <user>Stefany</user>
    <text>that had that performance.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:55:08.649200</ts>
    <user>Stefany</user>
    <text>so something is really wrong here.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:55:12.649400</ts>
    <user>Stefany</user>
    <text>But I have no clue what.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:55:38.649600</ts>
    <user>Stefany</user>
    <text>I am too much novice of clojure to find that out.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:58:31.649800</ts>
    <user>Sheron</user>
    <text>i tried to use java's own string splitting .. yes it's in a class of it's own</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:58:54.650000</ts>
    <user>Stefany</user>
    <text>When I wrote my c# csv parser,</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:58:57.650200</ts>
    <user>Sheron</user>
    <text>```

(defn do-parallel-parsing[]
  (let [data (slurp "somecsv.csv")
        rows (into [] (.split data "\n"))
        parsed-rows (pmap csv/read-csv rows)]
    (last parsed-rows)))
```</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:59:03.650400</ts>
    <user>Sheron</user>
    <text>just like that</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:59:05.650600</ts>
    <user>Stefany</user>
    <text>I bascically created my own string class,</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:59:14.650800</ts>
    <user>Sheron</user>
    <text>my example went from 100ms to 50-60 range</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:59:14.651000</ts>
    <user>Stefany</user>
    <text>that allowed you to take sub-strings.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:59:31.651200</ts>
    <user>Stefany</user>
    <text>so I have avoided all the senseless copying of strings.</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:59:34.651400</ts>
    <user>Stefany</user>
    <text>and in the parsing,</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:59:40.651600</ts>
    <user>Sheron</user>
    <text>but now my son is requesting my attention ... good luck  (and yeah. get an efficient java lib for the heavy loading)</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:59:41.651800</ts>
    <user>Stefany</user>
    <text>I wrote my own parser,</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T08:59:50.652000</ts>
    <user>Stefany</user>
    <text>by reading from my own datastructure</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T09:00:04.652200</ts>
    <user>Stefany</user>
    <text>Thanks a lot kulminaator!</text>
  </message>
  <message conversation_id="13">
    <ts>2019-01-01T09:00:14.652400</ts>
    <user>Stefany</user>
    <text>Happy new year!</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T09:52:15.656500</ts>
    <user>Nannette</user>
    <text>I really love Clojure and Clojure REPL is the most productive environment I have ever used. Now I encountered one puzzle with Clojure REPL that I can't figure out how to do it. I needed to create a couple of gen-classes for a Java API I'm using via Clojure/Java interop. Before those gen-classes using Clojure REPL was a breeze. If I wanted to refresh all namespaces in Clojure REPL I just called function
(do (require '[clojure.tools.namespace.repl :refer [refresh]]) (refresh))
... in Clojure REPL. But after implementing those gen-classes I get error: "namespace 'mygenclass' not found after loading 'mygenclass". I was wondering if there is some standard procedure  or best practice with gen-classes I have missed?</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T10:01:04.659600</ts>
    <user>Samual</user>
    <text>&lt;@Nannette&gt; By the way, which REPL are you using? Are you using :gen-class in the ns declaration or a free-standing (gen-class)? Anyway, I do not know c.t.n.repl, but I sometimes see that error message, in Cider, after trying to reload a ns that has errors in it OR trying to reload a ns whose name does not correspond to its filename.</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T10:22:25.661700</ts>
    <user>Nannette</user>
    <text>I'm using Cursive REPL with IntelliJ IDEA. I really love Cursive. I have configured all kinds of hotkeys for IntelliJ/Cursive and using those hotkeys I can jump back and forth between editor and REPL, send S-tokens from editor to REPL etc. I really love it. This refresh issue with gen-class is the only thing that causes a bit of nuisance.</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T10:28:25.662400</ts>
    <user>Nannette</user>
    <text>I'm using :gen-class in the ns declaration. Example in comment thread.</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T10:29:42.662600</ts>
    <user>Nannette</user>
    <text>Example:
(ns simpleserver.util.azuregenclass.session
  (:import (com.microsoft.azure.storage.table TableServiceEntity))
  (:gen-class
    :extends com.microsoft.azure.storage.table.TableServiceEntity
    :constructors {[] []}
    :init init
    :prefix "bean-"
    :state state))

(defn bean-init
  ([]
    ))</text>
  </message>
  <message conversation_id="16">
    <ts>2019-01-01T11:07:37.663100</ts>
    <user>Ellyn</user>
    <text>IIRC, this is related to &lt;https://dev.clojure.org/jira/browse/CLJ-2343&gt;, and would be fixed if that patch was applied</text>
  </message>
  <message conversation_id="16">
    <ts>2019-01-01T11:07:47.663300</ts>
    <user>Ellyn</user>
    <text>Nicola would know for sure</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T12:40:26.663500</ts>
    <user>Sheron</user>
    <text>btw. after giving the jvm a good chance at jit compiling the whole thing i reverted the code pretty much to original</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T12:42:03.663700</ts>
    <user>Sheron</user>
    <text>looks like the repl is just getting into my way here :slightly_smiling_face:</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T12:42:12.663900</ts>
    <user>Sheron</user>
    <text>with code like this
```
(ns silly-csv-parser.core
  (:require [clojure.data.csv :as csv])
  (:gen-class))

(defn do-parsing[]
  (let [data (slurp "somecsv.csv")]
    (last (csv/read-csv data))))

(defn time-parsing [_]
  (time (do-parsing)))

(defn -main
  "I don't do a whole lot ... yet."
  [&amp;amp; args]
  (mapv time-parsing (range 1 25)))
```</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T12:42:30.664100</ts>
    <user>Sheron</user>
    <text>running the (time (do-parsing)) from the repl was always like 200ms</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T12:42:42.664300</ts>
    <user>Sheron</user>
    <text>however ,  lein uberjar and then running that jar was a wastly different result</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T12:43:05.664500</ts>
    <user>Celestine</user>
    <text>That exception comes from `defspec` in `clojure.test.check.clojure-test` -- which doesn't match the code you shared &lt;@Matha&gt;</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T12:43:17.664700</ts>
    <user>Sheron</user>
    <text>```
$ lein uberjar
Compiling silly-csv-parser.core
$ java -jar target/uberjar/silly-csv-parser-0.1.0-SNAPSHOT-standalone.jar 
"Elapsed time: 301.065242 msecs"
"Elapsed time: 66.629456 msecs"
"Elapsed time: 112.770513 msecs"
"Elapsed time: 46.826564 msecs"
"Elapsed time: 54.771694 msecs"
"Elapsed time: 47.163652 msecs"
"Elapsed time: 45.761238 msecs"
"Elapsed time: 46.835782 msecs"
"Elapsed time: 49.504536 msecs"
"Elapsed time: 37.032187 msecs"
"Elapsed time: 37.907508 msecs"
"Elapsed time: 44.113467 msecs"
"Elapsed time: 34.527459 msecs"
"Elapsed time: 34.381777 msecs"
"Elapsed time: 35.217125 msecs"
"Elapsed time: 34.771945 msecs"
"Elapsed time: 40.187299 msecs"
"Elapsed time: 34.952462 msecs"
"Elapsed time: 35.637608 msecs"
"Elapsed time: 34.520076 msecs"
"Elapsed time: 35.482058 msecs"
"Elapsed time: 34.636292 msecs"
"Elapsed time: 35.011732 msecs"
"Elapsed time: 35.886221 msecs"
```</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T12:43:50.664900</ts>
    <user>Sheron</user>
    <text>you can see pretty well where the jit and proper memory management seem to kick in :slightly_smiling_face:</text>
  </message>
  <message conversation_id="15">
    <ts>2019-01-01T12:58:02.665100</ts>
    <user>Nannette</user>
    <text>Ok. Thanks for info. Let's hope that patch will fix this issue some day. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="17">
    <ts>2019-01-01T13:08:29.665300</ts>
    <user>Britteny</user>
    <text>went and upvoted the issue, since I happened to stumble on genclassing lately too</text>
  </message>
  <message conversation_id="17">
    <ts>2019-01-01T13:08:44.665500</ts>
    <user>Britteny</user>
    <text>more upvotes might help :slightly_smiling_face:</text>
  </message>
  <message conversation_id="17">
    <ts>2019-01-01T13:20:02.665700</ts>
    <user>Nannette</user>
    <text>I signed in to Clojure JIRA and upvoted as well. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:12:35.670100</ts>
    <user>Vita</user>
    <text>could anyone provide some pointers on a macro I’m trying to write? I want a function or macro that I can call with a map of let bindings (symbols to values) and then execute some form in the body of that let. I have it working for some cases but not all.</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:13:45.670700</ts>
    <user>Vita</user>
    <text>None</text>
  </message>
  <message conversation_id="19">
    <ts>2019-01-01T14:19:15.671600</ts>
    <user>Rosaline</user>
    <text>you cannot do that in the general case</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:19:45.671900</ts>
    <user>Vita</user>
    <text>really? :disappointed:</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:19:48.672100</ts>
    <user>Rosaline</user>
    <text>yes</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:20:02.672600</ts>
    <user>Rosaline</user>
    <text>you are trying to build a structure at compile time that depends on a value at runtime</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:20:15.672700</ts>
    <user>Matha</user>
    <text>&lt;@Celestine&gt; I am most definitely running `deftest`; I just tried it again after clearing the cache :thinking_face:</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:20:59.673800</ts>
    <user>Vita</user>
    <text>hm is there no way to achieve the same goal? eval some code with different values for particular symbols as supplied by some map?</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:21:04.674100</ts>
    <user>Rosaline</user>
    <text>you're existing implementation is also broken for the case were it "works" because it ends up double evaling</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:21:22.674600</ts>
    <user>Rosaline</user>
    <text>what you are describing is a function</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:21:44.674900</ts>
    <user>Rosaline</user>
    <text>code parameterized by different arguments</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:23:16.676100</ts>
    <user>Vita</user>
    <text>lol. yeah in abstract I guess. in this case I’m taking code as input and want to replace the meaning of some things using data. Should I just be walking the form and making replacements instead of trying to keep the same symbols but assign different values than what they’d otherwise resolve to?</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:23:34.676300</ts>
    <user>Vita</user>
    <text>I guess maybe that’s better</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:23:53.676800</ts>
    <user>Celestine</user>
    <text>What is the rest of the stack trace?</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:26:17.677900</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/ztellman/riddley&gt; is a library that might be helpful (I've never used it, I would be more inclined to write an interpreter for a dsl then to try and transform clojure expressions and call eval on them)</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:26:42.678100</ts>
    <user>Matha</user>
    <text>&lt;@Celestine&gt; &lt;https://gist.github.com/hmaurer/447392ac3ddee94250d26f580f6c7310&gt;</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:28:08.678900</ts>
    <user>Vita</user>
    <text>thanks, I’ll take a look</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:28:51.679000</ts>
    <user>Matha</user>
    <text>perhaps the fact that I am using kaocha as a test runner is the issue :thinking_face:</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T14:29:50.679200</ts>
    <user>Matha</user>
    <text>nah it’s not; I am getting the same error with vanilla `lein test`</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:42:11.679600</ts>
    <user>Celestine</user>
    <text>There is a lot of machinery in that stack trace beyond `clojure.test` and I see you're also using `respeced.test$successful_QMARK_.invokeStatic (test.cljc:104)` which seems to be what is actually leading to the error here...</text>
  </message>
  <message conversation_id="18">
    <ts>2019-01-01T15:46:54.681000</ts>
    <user>Matha</user>
    <text>&lt;@Celestine&gt; problem solved in the end; it was an issue with `lein test` monkey-patching `clojure.test` :face_with_rolling_eyes:</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:47:08.681300</ts>
    <user>Celestine</user>
    <text>Ouch!</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:47:36.682000</ts>
    <user>Celestine</user>
    <text>It's not compatible with `respeced`?</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:48:07.682200</ts>
    <user>Matha</user>
    <text>&lt;@Celestine&gt; &lt;https://dev.clojure.org/jira/browse/TCHECK-113&gt; if you are interested (thanks to &lt;@Clarine&gt; for finding this). The issue is tangential to `respeced`.</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:48:35.682400</ts>
    <user>Matha</user>
    <text>Also `test.check v0.10.0-alpha3` doesn’t seem to have the issue</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:49:05.682600</ts>
    <user>Clarine</user>
    <text>respeced has nothing to do with it, it’s a clojure.test.check + lein issue</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:50:20.682800</ts>
    <user>Matha</user>
    <text>ah yes, tangential wasn’t the right choice of word; I meant they were unrelated :slightly_smiling_face:</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:51:01.683000</ts>
    <user>Clarine</user>
    <text>well, they are related, so I get it. but the problem is really with lein’s monkey patching I guess</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:51:03.683200</ts>
    <user>Celestine</user>
    <text>&lt;@Clarine&gt; Cool. Was just curious when I saw it in the stacktrace -- I hadn't looked at the code.</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:52:35.683400</ts>
    <user>Matha</user>
    <text>&lt;@Clarine&gt; do you use `test.check` v`0.10.0` yourself?</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:52:53.683600</ts>
    <user>Clarine</user>
    <text>no, but I haven’t used lein for testing for a long while</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:53:28.683800</ts>
    <user>Celestine</user>
    <text>Lein's monkey-patching has caused problems with other tooling in the past (and, lately, `~/.lein/profiles.clj` seems to be the bane of every beginner's life).</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:54:03.684000</ts>
    <user>Celestine</user>
    <text>(also haven't used Leiningen for a long time -- switched to Boot three years ago and switched to `clj`/`deps.edn` this year)</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:54:33.684200</ts>
    <user>Clarine</user>
    <text>I’m going along the same path. For work we’re using boot still, but for newer personal projects I tend to choose TADA</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:55:30.684400</ts>
    <user>Celestine</user>
    <text>We were very heavy Boot users until this year. We just started having too many problems with it :disappointed:</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:55:42.684600</ts>
    <user>Clarine</user>
    <text>being able to use git and local deps really makes a difference</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:56:26.684800</ts>
    <user>Clarine</user>
    <text>we don’t have many problems with it at work, so no need to migrate for now.</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T15:59:13.685000</ts>
    <user>Matha</user>
    <text>&lt;@Celestine&gt; I wanted to use Boot but there was a nice template project for Fulcro + shadow-cljs with lein</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T16:07:54.685200</ts>
    <user>Matha</user>
    <text>&lt;@Celestine&gt; what do you use now? deps.edn?</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T16:09:32.685400</ts>
    <user>Celestine</user>
    <text>See 14 minutes ago in this thread :slightly_smiling_face: "(also haven't used Leiningen for a long time -- switched to Boot three years ago and switched to clj/deps.edn this year)"</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T16:09:46.685600</ts>
    <user>Celestine</user>
    <text>So we run tests with Cognitect's `test-runner`</text>
  </message>
  <message conversation_id="20">
    <ts>2019-01-01T16:27:02.685800</ts>
    <user>Clarine</user>
    <text>I use that one also, if I’m not using my own test runner script.</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T20:28:30.687200</ts>
    <user>Ferne</user>
    <text>&lt;@Vita&gt; if you're taking code as input at runtime, I think that's basically the definition of what `eval` is for</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T20:30:26.689500</ts>
    <user>Ferne</user>
    <text>if the code has unbound locals, which I _think_ is what you're describing, I've used a trick to wrap it in a function that takes the named arguments you want to supply

e.g.,
```
(eval `(fn [{:keys [~@some-arg-names]}] ~the-expression-with-unbound-locals))
```</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T20:30:42.689800</ts>
    <user>Ferne</user>
    <text>then you can call that function with a map</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T20:31:33.690000</ts>
    <user>Vita</user>
    <text>ooh</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T20:31:52.690400</ts>
    <user>Vita</user>
    <text>I think that would do the trick. thanks for the idea!</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T20:33:33.691700</ts>
    <user>Vita</user>
    <text>should’ve known I was trying to do too much in one macro + eval instead of just using a function lol</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T21:18:32.691900</ts>
    <user>Vita</user>
    <text>thanks &lt;@Ferne&gt; that allowed me to do what I was trying to.</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T21:21:07.692600</ts>
    <user>Vita</user>
    <text>I’m not actually trying to rebind merge to inc.. just an example. lol</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T21:21:37.692900</ts>
    <user>Vita</user>
    <text>though a “guess what function I replaced your original function with” game sounds fun</text>
  </message>
  <message conversation_id="21">
    <ts>2019-01-01T21:25:23.693200</ts>
    <user>Ferne</user>
    <text>Nice</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:40:18.694400</ts>
    <user>Mariela</user>
    <text>Is there something like &lt;https://github.com/lightyear/sql-logging#options&gt; but for Clojure?

tldr it aides you see if you have costly SQL being emitted, and actually points out the culprit LOC</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:48:28.698500</ts>
    <user>Mariela</user>
    <text>On second thoughts, probably this library wouldn't make _that_ much sense in Clojure, given "magical" ORMs aren't the norm here... so emitted SQL should have no surprises

...but still I can see myself using some simple metrics, e.g. query _x_ took 30ms</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:49:51.699500</ts>
    <user>Celestine</user>
    <text>&lt;@Mariela&gt; I believe there are Java libraries that can act as a proxy for the actual JDBC driver and provide that sort of statistical logging.</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:50:30.699600</ts>
    <user>Mariela</user>
    <text>thanks! will look into it</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:51:20.699800</ts>
    <user>Celestine</user>
    <text>&lt;https://github.com/ttddyy/datasource-proxy&gt;</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:52:24.700100</ts>
    <user>Vita</user>
    <text>&lt;@Mariela&gt; you can always just hook the function yourself too if you can find the place you want to instrument</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:53:21.700400</ts>
    <user>Celestine</user>
    <text>User guide &lt;http://ttddyy.github.io/datasource-proxy/docs/current/user-guide/index.html&gt;</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:54:53.700800</ts>
    <user>Mariela</user>
    <text>Fantastic. TIL :slightly_smiling_face:</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:55:34.701000</ts>
    <user>Mariela</user>
    <text>Handy, thanks! :beers:</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T22:55:45.701200</ts>
    <user>Celestine</user>
    <text>If you have any problems integrating it with `clojure.java.jdbc`, ping me in the &lt;#C1Q164V29|sql&gt; channel and I'll see if I can help.</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T23:03:11.701600</ts>
    <user>Vita</user>
    <text>np! and if you want to see what code led to it you could create an exception and parse the stack trace (or I think later versions of java have mechanisms to reflect on the stack without making exceptions). Obviously this solution has potential issues with laziness or the arguments not containing the info you want, but it’s often a quick easy option for local dev and can be applied to almost any clojure library.</text>
  </message>
  <message conversation_id="22">
    <ts>2019-01-01T23:12:05.701800</ts>
    <user>Mariela</user>
    <text>Got it, good call!</text>
  </message>
  <message conversation_id="23">
    <ts>2019-01-02T02:05:40.702200</ts>
    <user>Stefany</user>
    <text>OMG!</text>
  </message>
  <message conversation_id="23">
    <ts>2019-01-02T02:07:11.702400</ts>
    <user>Stefany</user>
    <text>I thought that the REPL compiles the same way how it would be compiled to a JAR. I don't get it...</text>
  </message>
  <message conversation_id="23">
    <ts>2019-01-02T02:08:05.702600</ts>
    <user>Stefany</user>
    <text>But thank you so much! I honestly would  never have believed that such great differences possibly could exist between repl and jar!! :+1::heart:</text>
  </message>
  <message conversation_id="24">
    <ts>2019-01-02T04:46:39.703800</ts>
    <user>Kristine</user>
    <text>why does `(read-string "07")` return `7`, but `(read-string "08")` throws an exception?</text>
  </message>
  <message conversation_id="24">
    <ts>2019-01-02T04:50:03.704600</ts>
    <user>Tammera</user>
    <text>a leading zero often means that the following number is octal</text>
  </message>
  <message conversation_id="24">
    <ts>2019-01-02T04:50:12.704900</ts>
    <user>Tammera</user>
    <text>8 however, is not a valid literal in octal</text>
  </message>
  <message conversation_id="24">
    <ts>2019-01-02T04:50:44.705300</ts>
    <user>Tammera</user>
    <text>`(read-string "010")` is also 8 (base 10) instead of the 10 (base 10) you would have expected</text>
  </message>
  <message conversation_id="24">
    <ts>2019-01-02T04:52:55.706400</ts>
    <user>Tammera</user>
    <text>WHY they decided to have `0` be the prefix for octal instead of `0o` is beyond me. As the hex/binary prefix is `0x` and `0b` respectively…</text>
  </message>
  <message conversation_id="24">
    <ts>2019-01-02T04:55:33.706900</ts>
    <user>Elizebeth</user>
    <text>Yay Java. I remember that one hitting me way back when I was doing Java for my degree...</text>
  </message>
  <message conversation_id="25">
    <ts>2019-01-02T06:25:36.707200</ts>
    <user>Kristine</user>
    <text>thx</text>
  </message>
  <message conversation_id="26">
    <ts>2019-01-02T11:16:43.711500</ts>
    <user>Celestine</user>
    <text>Because everything dating back to C did it. Technically back to B, C's predecessor. B's predecessor BCPL used # for octal but B used that as an operator. So leading 0 means octal in almost every language out there today. </text>
  </message>
  <message conversation_id="24">
    <ts>2019-01-02T11:17:38.711800</ts>
    <user>Tammera</user>
    <text>Yeah, but, “because language X did it” is not a technically sound argument IMO :wink:</text>
  </message>
  <message conversation_id="26">
    <ts>2019-01-02T11:19:52.714700</ts>
    <user>Celestine</user>
    <text>Octal was much more common back in the day. I worked with octal a lot. Then later "graduated" to hex. So those early conventions were very strong for a generation of programmers, maybe even two generations. And those were the folks that designed and built all the languages we use today. </text>
  </message>
  <message conversation_id="26">
    <ts>2019-01-02T11:22:48.714900</ts>
    <user>Tammera</user>
    <text>Right, it makes sense. But endlessly sticking with the convensions of your predecessors ends up with situations where newer developers wonder why a leading zero changes `read-string` to a base that is hardly used anymore.</text>
  </message>
  <message conversation_id="24">
    <ts>2019-01-02T11:23:21.715100</ts>
    <user>Tammera</user>
    <text>At some point, someone needs to decide that that is crazy, and throw it out of (newer) languages</text>
  </message>
  <message conversation_id="24">
    <ts>2019-01-02T11:28:11.715300</ts>
    <user>Elizebeth</user>
    <text>Was there ever an A?</text>
  </message>
  <message conversation_id="26">
    <ts>2019-01-02T11:31:56.717800</ts>
    <user>Celestine</user>
    <text>BCPL -&amp;gt; B -&amp;gt; C. There could have been a P but instead we got C++ and D. Although we did also get PL/1. Programmers are such wits :upside_down_face:</text>
  </message>
  <message conversation_id="26">
    <ts>2019-01-02T11:34:44.719600</ts>
    <user>Celestine</user>
    <text>Since BCPL was influenced by CPL which in turn was influenced by ALGOL 60, I guess you could say A was ALGOL? :grinning:</text>
  </message>
  <message conversation_id="26">
    <ts>2019-01-02T11:36:11.720900</ts>
    <user>Celestine</user>
    <text>I wonder if I'm the only one here who has programmed in BCPL and ALGOL 60? :confused:</text>
  </message>
  <message conversation_id="26">
    <ts>2019-01-02T11:37:03.721100</ts>
    <user>Elizebeth</user>
    <text>I did C and Java at Uni. Nothing older than that</text>
  </message>
  <message conversation_id="26">
    <ts>2019-01-02T11:45:43.721400</ts>
    <user>Sebrina</user>
    <text>I played with ASM a bit, I think that’s the oldest language I’ve worked with.</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:07:16.722900</ts>
    <user>Tressa</user>
    <text>if i have an input array of strings, and i want to pick those that are also in a predefined set of valid strings, is it better to use `(filter #{"valid1" "valid",,,} input)` or some other way?</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:08:47.723300</ts>
    <user>Tammera</user>
    <text>I think with the set is quite elegant</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:10:07.724500</ts>
    <user>Tammera</user>
    <text>`def` the set of accepted strings somewhere, or make a predicate `is-allowed-string?` I guess</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:10:44.725100</ts>
    <user>Tressa</user>
    <text>yeah that's the plan. i was wondering if for example `set/intersection` would be a better choice?</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:11:54.725300</ts>
    <user>Tammera</user>
    <text>(Fun fact, Rust, which is a relatively young language, chose to adopt `0o` for its octal syntax)</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:12:51.726000</ts>
    <user>Tressa</user>
    <text>the result would need to be all unique too, so i'd need to fit a `distinct` in there</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:13:53.726600</ts>
    <user>Tammera</user>
    <text>intersection would work too if your input is a set</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:14:30.727200</ts>
    <user>Tressa</user>
    <text>it isn't</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:14:34.727300</ts>
    <user>Tammera</user>
    <text>(remember, all set operations are explicitly undefined for non-sets)</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:15:09.728000</ts>
    <user>Tressa</user>
    <text>i'd need to cast the input to set, making me again wonder if that's faster or running `distinct` on it</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:15:34.728300</ts>
    <user>Tammera</user>
    <text>test it ^^</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:15:47.728700</ts>
    <user>Melina</user>
    <text>Benchmark it with criterium</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:15:59.728900</ts>
    <user>Tressa</user>
    <text>timing it now</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:16:38.729500</ts>
    <user>Melina</user>
    <text>Unless performance is a bottleneck, pick the appropriate semantics.</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:16:58.730100</ts>
    <user>Melina</user>
    <text>i.e, if order doesn't matter and you don't care about duplicates</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:17:06.730600</ts>
    <user>Melina</user>
    <text>use clojure.set/intersection</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:17:25.731400</ts>
    <user>Tressa</user>
    <text>in the normal case it isn't (as only 3-4 elements should be in the input), but i'd rather not accidentally create an attack vector</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:17:35.731600</ts>
    <user>Melina</user>
    <text>else (filter #{"input1" "input2" ...} input)</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:20:54.732000</ts>
    <user>Tammera</user>
    <text>`distinct` has an … interesting implementation</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:29:53.732600</ts>
    <user>Tressa</user>
    <text>this is interesting</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:30:26.732800</ts>
    <user>Tressa</user>
    <text>```
user=&amp;gt; (time (-&amp;gt;&amp;gt; input distinct (filter valid)))
"Elapsed time: 0.229339 msecs"

user=&amp;gt; (time (-&amp;gt;&amp;gt; input distinct (filter valid) sort))
"Elapsed time: 0.581802 msecs"

user=&amp;gt; (time (set/intersection valid (set input)))
"Elapsed time: 0.219935 msecs"

user=&amp;gt;   (time (sort (set/intersection valid (set input))))
"Elapsed time: 0.199401 msecs"
```</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:31:11.733800</ts>
    <user>Tressa</user>
    <text>why is sort so slow? the resulting filtered collection in the second case is only 4 elements, why is it taking such a toll?</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:36:20.734400</ts>
    <user>Jasmine</user>
    <text>you have to be careful on some of those - filter is lazy and you aren’t forcing realization</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:36:29.734700</ts>
    <user>Jasmine</user>
    <text>so the first timing isn’t doing the filter at all</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:37:13.735100</ts>
    <user>Jasmine</user>
    <text>all of the other ops here are eager so will force realization</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:37:53.735700</ts>
    <user>Jasmine</user>
    <text>timing a single instance of any of these is also likely meaningless</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:37:55.735800</ts>
    <user>Tressa</user>
    <text>will into serve that purpose?</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:38:11.736200</ts>
    <user>Jasmine</user>
    <text>doall would work</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:38:39.736700</ts>
    <user>Jasmine</user>
    <text>but really you should time 1000s of instances of these ops to compare</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:40:02.736900</ts>
    <user>Jasmine</user>
    <text>like `(dotimes [i 5] (time (dotimes [i 1000] (-&amp;gt;&amp;gt; input distinct (filter valid) sort))))`</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:40:28.737500</ts>
    <user>Jasmine</user>
    <text>the outer loop is 5 trials, the inner loop is 1000 reps per trial</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:40:38.737800</ts>
    <user>Jasmine</user>
    <text>you’ll usually notice it gets faster as the jit warms up</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:40:56.738100</ts>
    <user>Jasmine</user>
    <text>critierium is a fancier version of this</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:42:44.738300</ts>
    <user>Tressa</user>
    <text>i see</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:42:49.738500</ts>
    <user>Tressa</user>
    <text>thanks for the advice!</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:43:43.738800</ts>
    <user>Tressa</user>
    <text>using sets seems to be significantly faster</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:43:51.739200</ts>
    <user>Tressa</user>
    <text>like 3-4 times</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:51:34.739900</ts>
    <user>Tammera</user>
    <text>hah, I did not expect that. I expected converting to a set to be a pricey operation</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:52:08.740300</ts>
    <user>Tressa</user>
    <text>i tried generating the input randomly so the jvm would sweat a little</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:52:58.741000</ts>
    <user>Tressa</user>
    <text>```
user=&amp;gt; (time (dotimes [m 10000] (-&amp;gt;&amp;gt; (input) distinct (filter valid) sort)))
"Elapsed time: 693.849881 msecs"
user=&amp;gt; (time (dotimes [m 10000] (sort (set/intersection valid (set (input))))))
"Elapsed time: 279.379693 msecs"
```
i didn't expect this big a difference</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:54:07.741400</ts>
    <user>Tressa</user>
    <text>moving `distinct` after the `filter` makes it a little faster but still twice as slow</text>
  </message>
  <message conversation_id="28">
    <ts>2019-01-02T12:58:04.741700</ts>
    <user>Shayla</user>
    <text>input being a list?</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T12:58:16.742000</ts>
    <user>Shayla</user>
    <text>try making it a set in the first one, i wonder if that'll speed it up at all</text>
  </message>
  <message conversation_id="28">
    <ts>2019-01-02T13:01:06.742400</ts>
    <user>Tressa</user>
    <text>sure did.</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T13:02:15.743600</ts>
    <user>Tressa</user>
    <text>using `set` instead of `distinct` made it 2-3 times faster</text>
  </message>
  <message conversation_id="28">
    <ts>2019-01-02T13:02:30.743900</ts>
    <user>Shayla</user>
    <text>i suspect using the filter set predicate is using some sort of set-based stuff under the hood that makes comparisons to other sets much faster than comparing against a list</text>
  </message>
  <message conversation_id="28">
    <ts>2019-01-02T13:02:38.744200</ts>
    <user>Shayla</user>
    <text>the only issue is if your input has duplicates</text>
  </message>
  <message conversation_id="28">
    <ts>2019-01-02T13:02:45.744400</ts>
    <user>Shayla</user>
    <text>and you need them for some reason</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T13:03:01.744800</ts>
    <user>Tressa</user>
    <text>no, i need it to be distinct so it's perfect</text>
  </message>
  <message conversation_id="27">
    <ts>2019-01-02T13:04:43.745200</ts>
    <user>Tressa</user>
    <text>```
user=&amp;gt; (time (dotimes [m 10000] (-&amp;gt;&amp;gt; (input) set (filter valid) sort)))
"Elapsed time: 272.51252 msecs"
user=&amp;gt; (time (dotimes [m 10000] (-&amp;gt;&amp;gt; (input) set (set/intersection valid) sort)))
"Elapsed time: 271.146103 msecs"
```
basically no difference</text>
  </message>
  <message conversation_id="28">
    <ts>2019-01-02T13:25:05.746100</ts>
    <user>Celestine</user>
    <text>&lt;@Tressa&gt; Just FYI, `(time (dotimes ..))` doesn't always give you accurate benchmarks -- check out criterium for a better approach.</text>
  </message>
  <message conversation_id="29">
    <ts>2019-01-02T13:25:36.746700</ts>
    <user>Celestine</user>
    <text>(uh-oh, is Alex going to correct me?)</text>
  </message>
  <message conversation_id="29">
    <ts>2019-01-02T13:26:01.747200</ts>
    <user>Jasmine</user>
    <text>with a big enough N and enough sample points, dotimes is sufficient, imo</text>
  </message>
  <message conversation_id="29">
    <ts>2019-01-02T13:31:12.747300</ts>
    <user>Latonya</user>
    <text>So obviously people are not "endlessly" sticking with conventions of predecessors?</text>
  </message>
  <message conversation_id="29">
    <ts>2019-01-02T13:34:03.747500</ts>
    <user>Celestine</user>
    <text>Using `0o`, `0b`, `0x` as prefixes is certainly more consistent.</text>
  </message>
  <message conversation_id="30">
    <ts>2019-01-02T15:04:45.748200</ts>
    <user>Tammera</user>
    <text>Haha, you are right andy. I actually made my statement before looking up whether newer gen languages would have adapted. As often, Rust serves as a positive surprise</text>
  </message>
  <message conversation_id="30">
    <ts>2019-01-02T15:13:28.748400</ts>
    <user>Tammera</user>
    <text>Swift also goes for `0o` whereas Go goes for the traditional `0`. Interesting</text>
  </message>
  <message conversation_id="30">
    <ts>2019-01-02T18:13:57.751300</ts>
    <user>Samual</user>
    <text>And criterium is the agreed definition of "a big enough N and enough sample points" !</text>
  </message>
  <message conversation_id="30">
    <ts>2019-01-02T18:15:49.751700</ts>
    <user>Dann</user>
    <text>the fact that it loudly warns you if JIT is turned off is also a bonus</text>
  </message>
  <message conversation_id="31">
    <ts>2019-01-02T18:19:35.752500</ts>
    <user>Jasmine</user>
    <text>I find the benefit of NOT using criterium is that you can see when the jit is sufficiently warm when the sample stabilize</text>
  </message>
  <message conversation_id="30">
    <ts>2019-01-02T18:19:53.753200</ts>
    <user>Jasmine</user>
    <text>generally this is much faster than using criterium</text>
  </message>
  <message conversation_id="30">
    <ts>2019-01-02T18:20:17.753600</ts>
    <user>Jasmine</user>
    <text>I also don’t find that usually the gc stuff in criterium is worth much</text>
  </message>
  <message conversation_id="30">
    <ts>2019-01-02T18:20:31.754000</ts>
    <user>Jasmine</user>
    <text>and if you don’t use leiningen you never run into the jit thing :)</text>
  </message>
  <message conversation_id="32">
    <ts>2019-01-02T21:01:50.756600</ts>
    <user>Kirby</user>
    <text>Does anyone know of a good way to "sandbox" the loading of namespaces?
I'm trying to find a way to load and evaluate a namespace from an external source without interfering with the bindings in my current Clojure process' instance of the same namespace.</text>
  </message>
  <message conversation_id="32">
    <ts>2019-01-02T21:58:57.757300</ts>
    <user>Celestine</user>
    <text>&lt;@Kirby&gt; Perhaps look at the `clojail` project?</text>
  </message>
  <message conversation_id="32">
    <ts>2019-01-02T21:59:37.757900</ts>
    <user>Celestine</user>
    <text>That will also make it safe to load and run that code (or at least _safer_) since it's coming from an external source...</text>
  </message>
  <message conversation_id="30">
    <ts>2019-01-02T23:35:58.758100</ts>
    <user>Vita</user>
    <text>I made this a while ago for that purpose: &lt;https://github.com/RutledgePaulV/clj-embed&gt; I keep meaning to come back and update it a bit. If you end up using it let me know and I’ll bring it up to date and cut a new release</text>
  </message>
  <message conversation_id="33">
    <ts>2019-01-03T02:25:21.758900</ts>
    <user>Latonya</user>
    <text>There is a mranderson library that can create a "shadowed" version of a namespace, meaning renamed.  I have not used it myself, but I know some other libraries have used it: &lt;https://github.com/benedekfazekas/mranderson&gt;</text>
  </message>
  <message conversation_id="34">
    <ts>2019-01-03T04:12:54.759500</ts>
    <user>Amada</user>
    <text>Does anyone have an example of deploying a clojure library to clojars from gitlab-ci?</text>
  </message>
  <message conversation_id="34">
    <ts>2019-01-03T04:15:16.759700</ts>
    <user>Elizebeth</user>
    <text>Is leading `0o` used for anything *else*? It would be nice if we could see older languages adopting that pattern too. At least then if `0o` and `0` both represented octal people could start writing code where it was clearer that a number was intended to be octal</text>
  </message>
  <message conversation_id="34">
    <ts>2019-01-03T04:22:48.760200</ts>
    <user>Tammera</user>
    <text>I would say that alternatives in syntax are actually worse than having inconsistent, but only one, syntax</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T05:51:14.760400</ts>
    <user>Bernard</user>
    <text>in for answer</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:27:04.762200</ts>
    <user>Stasia</user>
    <text>;</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:27:52.763000</ts>
    <user>Queen</user>
    <text>Is there any syntax that will help me include a specific key/val in a map depending on clojure/clojurescript target?
I know of `#?(:clj)`, but usable inside a map form</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:28:31.763500</ts>
    <user>Queen</user>
    <text>I can wrap the whole thing in assoc of course, but still</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:28:54.763900</ts>
    <user>Jasmine</user>
    <text>can you use the splicing reader conditional?</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:29:19.764300</ts>
    <user>Jasmine</user>
    <text>I guess not</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:30:25.765200</ts>
    <user>Jasmine</user>
    <text>could use a cond-&amp;gt; whose test is a reader conditional</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:31:26.766200</ts>
    <user>Jasmine</user>
    <text>`(cond-&amp;gt; { … } #?(:clj true :cljs false) (assoc :clj-only :foo))`</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:34:12.767400</ts>
    <user>Queen</user>
    <text>&lt;@Jasmine&gt; Thanks, splicing reader was what I was looking for.</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:34:37.767600</ts>
    <user>Becki</user>
    <text>did the splicing reader work for you?</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:34:49.767900</ts>
    <user>Queen</user>
    <text>and for map</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:35:12.768100</ts>
    <user>Queen</user>
    <text>`{#?@(:clj [:key :val])}`</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:38:24.768700</ts>
    <user>Jasmine</user>
    <text>I’m a little surprised that works but I guess it makes sense</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:39:42.769100</ts>
    <user>Queen</user>
    <text>A happy accident?</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:39:54.769500</ts>
    <user>Jasmine</user>
    <text>it wouldn’t surprise me if that gives trouble to other tools with their own lexers</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:39:57.769700</ts>
    <user>Tammera</user>
    <text>Interesting syntax tho, `#?@(...)`</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:40:19.770200</ts>
    <user>Jasmine</user>
    <text>as it looks like a map with an odd number of elements until it’s read</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:41:17.770600</ts>
    <user>Becki</user>
    <text>would that break edn reading of a file with those forms?</text>
  </message>
  <message conversation_id="35">
    <ts>2019-01-03T09:41:59.770900</ts>
    <user>Jasmine</user>
    <text>edn doesn’t have reader conditionals</text>
  </message>
  <message conversation_id="36">
    <ts>2019-01-03T11:34:11.772400</ts>
    <user>Xochitl</user>
    <text>Does anyone know how to configure the built-in MacOS firewall to permanently accept incoming connections? I've added the version of java to the firewall but I'm stick stuck clicking "allow" each time I restart the server.</text>
  </message>
  <message conversation_id="37">
    <ts>2019-01-03T13:04:12.772800</ts>
    <user>Kirby</user>
    <text>Thanks guys!  I had seen mranderson from where refactor-nrepl uses it to deal with this problem, but that solution seems a little more finicky than I was hoping for.
clj-embed looks cool!  The classloader solution-route was what I was hoping to find examples for.</text>
  </message>
  <message conversation_id="37">
    <ts>2019-01-03T13:08:50.773000</ts>
    <user>Kirby</user>
    <text>In the short term, I think I will forgo the namespace isolation requirement in my project, in order to focus on exercising the other aspects of the project.  Later, I'll plan on attempting to incorporate clj-embed. So no hurry &lt;@Vita&gt;, but thank you.</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:16:30.774900</ts>
    <user>Hassie</user>
    <text>Is there any way to determine in custom macro whether passed symbol is macro or function?</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:20:32.775100</ts>
    <user>Hassie</user>
    <text>my test is `(:macro (meta (var loop)))`</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:21:03.775500</ts>
    <user>Hassie</user>
    <text>of course this doesn't work here
```
(defmacro is-macro? [sym]
  (let [m? (:macro (meta (var sym)))]
    `~m?))
```</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:21:25.775900</ts>
    <user>Hassie</user>
    <text>is there any way to resolve `sym` within a macro?</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:24:39.776200</ts>
    <user>Fredda</user>
    <text>`resolve`?</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:25:29.776800</ts>
    <user>Otelia</user>
    <text>(Note that you can't resolve vars in Clojurescript macros.)</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:25:50.777100</ts>
    <user>Hassie</user>
    <text>it's in Clojure</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:27:18.777700</ts>
    <user>Hassie</user>
    <text>works! thanks a lot</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:27:44.778300</ts>
    <user>Becki</user>
    <text>just for curiosity can you explain why you need to know?</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:28:47.778400</ts>
    <user>Fredda</user>
    <text>Except at compile-time, depending on... things</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:30:06.779400</ts>
    <user>Fredda</user>
    <text>I banged on this until it worked. It might not work in all situations though &lt;https://github.com/johnmn3/dispacio/blob/master/src/dispacio/alpha/core.cljc#L156&gt;</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:32:53.782200</ts>
    <user>Otelia</user>
    <text>Interesting, thanks!! Earlier I couldn't figure out a way to do it, and just found a way to avoid the need for it, but I'll hang on to this for future reference.</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:33:29.783100</ts>
    <user>Hassie</user>
    <text>I have math functions and some of them are expressed as macros (java calls) and some of them are clj functions. I want to wrap such macros into functions (and avoid wrapping functions) to generate rest of the code.</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:34:26.783900</ts>
    <user>Fredda</user>
    <text>It doesn't work in most ways, you're right. There's just certain situations where you can get it to work.</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:34:39.784200</ts>
    <user>Hassie</user>
    <text>so my macro checks symbol and generated function or leave symbol unwrapped ```(if (:macro (meta (resolve f))) `(fn [v#] (~f v#)) f)``` which is used in final generated code</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:34:52.784300</ts>
    <user>Fredda</user>
    <text>And I don't understand the interplay well enough to explain when it does or doesn't. But it works there :slightly_smiling_face:</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:35:11.784600</ts>
    <user>Otelia</user>
    <text>Could come in handy.</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:36:39.785600</ts>
    <user>Dann</user>
    <text>one possible gotcha is if you get a function literal instead of a symbol bound to an fn</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:37:19.786500</ts>
    <user>Dann</user>
    <text>"cannot embed object in bytecode" is the error message IIRC</text>
  </message>
  <message conversation_id="38">
    <ts>2019-01-03T13:38:31.787400</ts>
    <user>Hassie</user>
    <text>fortunately I operate on symbols here, it's a private macro and should be ok in my case</text>
  </message>
  <message conversation_id="39">
    <ts>2019-01-03T16:17:21.788300</ts>
    <user>Antwan</user>
    <text>None</text>
  </message>
  <message conversation_id="39">
    <ts>2019-01-03T16:17:29.788800</ts>
    <user>Antwan</user>
    <text>got some... fun recursion</text>
  </message>
  <message conversation_id="39">
    <ts>2019-01-03T16:22:45.789300</ts>
    <user>Dann</user>
    <text>Why recur with objs in one tail, and sorted-objs in another, when both are the same value?</text>
  </message>
  <message conversation_id="39">
    <ts>2019-01-03T16:23:23.789500</ts>
    <user>Dann</user>
    <text>oh I see, there's a path where you want to use sorted-objs, even as objs got rebound, I get it now</text>
  </message>
  <message conversation_id="39">
    <ts>2019-01-03T16:38:59.789700</ts>
    <user>Antwan</user>
    <text>yeah, the fact that it is confusing is my reason for posting</text>
  </message>
  <message conversation_id="39">
    <ts>2019-01-03T16:39:28.789900</ts>
    <user>Antwan</user>
    <text>had a hope someone would have insight on how to simplify it</text>
  </message>
  <message conversation_id="39">
    <ts>2019-01-03T16:41:03.790100</ts>
    <user>Dann</user>
    <text>maybe there's a way to turn the path that recurs with `rest` into a normal reduce, and the one that recurs with sorted-objs into a recur on the enclosing fn?</text>
  </message>
  <message conversation_id="39">
    <ts>2019-01-03T16:41:09.790300</ts>
    <user>Dann</user>
    <text>just a thought</text>
  </message>
  <message conversation_id="40">
    <ts>2019-01-03T17:08:08.792700</ts>
    <user>My</user>
    <text>Weird request, but working on a perf improvement to something and want to provide a realistic benchmark on public data. Tried randomly generating data, but issue is time is dominated by things that are artifacts of random data you wouldn't see in practice (for instance, all keywords are distinct and very long). I don't want to try to generate "realsitic data since that seems bad and want to know if someone has some large public batch of EDN data laying around that might be 'representative' of real-world data, or even better something someone's used to benchmark before</text>
  </message>
  <message conversation_id="40">
    <ts>2019-01-03T17:08:46.792900</ts>
    <user>Lura</user>
    <text>mbrainz?</text>
  </message>
  <message conversation_id="41">
    <ts>2019-01-04T02:26:54.795400</ts>
    <user>Mariela</user>
    <text>Is there something like &lt;https://github.com/NoRedInk/rspec-retry&gt; for clojure.test?</text>
  </message>
  <message conversation_id="41">
    <ts>2019-01-04T02:31:52.795600</ts>
    <user>Stasia</user>
    <text>To refresh specific tests, or refresh in general?</text>
  </message>
  <message conversation_id="41">
    <ts>2019-01-04T02:35:59.795800</ts>
    <user>Mariela</user>
    <text>To re-run a test that is failing, operating under the assumption that the test is flaky</text>
  </message>
  <message conversation_id="42">
    <ts>2019-01-04T03:23:39.796200</ts>
    <user>Stasia</user>
    <text>Ah, none that I'm aware of then</text>
  </message>
  <message conversation_id="43">
    <ts>2019-01-04T05:54:09.797000</ts>
    <user>Wanita</user>
    <text>how to get a hash of a data structure in Clojure?</text>
  </message>
  <message conversation_id="43">
    <ts>2019-01-04T05:54:54.797600</ts>
    <user>Sherril</user>
    <text>`(hash datastructure)`</text>
  </message>
  <message conversation_id="44">
    <ts>2019-01-04T06:41:21.799100</ts>
    <user>Hassie</user>
    <text>reminds me my question from yesterday: how to resolve a symbol in a macro? answer: `(resolve s)`</text>
  </message>
  <message conversation_id="41">
    <ts>2019-01-04T08:03:39.799500</ts>
    <user>Shayla</user>
    <text>test-refresh?</text>
  </message>
  <message conversation_id="42">
    <ts>2019-01-04T08:11:38.799700</ts>
    <user>Mariela</user>
    <text>have used it in the past. I don't recall that it re-reruns failed tests speculatively</text>
  </message>
  <message conversation_id="42">
    <ts>2019-01-04T08:13:04.799900</ts>
    <user>Shayla</user>
    <text>&amp;gt; Runs previously failing tests first, giving you feedback even quicker.</text>
  </message>
  <message conversation_id="42">
    <ts>2019-01-04T08:13:16.800100</ts>
    <user>Shayla</user>
    <text>oh speculatively, yeah i don't know about that</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T09:15:48.801300</ts>
    <user>Harmony</user>
    <text>Hello! I'm new here, I posted this message in &lt;#C053AK3F9|beginners&gt; but I think it's not the best place... here it goes:
We are working on a project were Datomic is being used. We want to analyze de data using ML alorightms (we are data analyst). The thing is we don't event know where to start from!! Could someone point me in any direction?</text>
  </message>
  <message conversation_id="42">
    <ts>2019-01-04T09:21:29.802700</ts>
    <user>Fredda</user>
    <text>&lt;@Harmony&gt; in addition to the official datomic docs, this might be helpful summary &lt;http://tonsky.me/blog/unofficial-guide-to-datomic-internals/&gt;</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T09:24:14.804000</ts>
    <user>Fredda</user>
    <text>It's basically a stream of datoms, which you can just use like data however you want</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T09:24:30.804300</ts>
    <user>Harmony</user>
    <text>thx John, I'll check it now :slightly_smiling_face: I'm sure I'll find interesting things there</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T09:27:44.804900</ts>
    <user>Fredda</user>
    <text>Slice up history using `as-of` and `since` &lt;https://docs.datomic.com/on-prem/filters.html&gt;</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T09:28:36.805600</ts>
    <user>Fredda</user>
    <text>There's more convo about it over in &lt;#C03RZMDSH|datomic&gt; def ask around in there too</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T09:47:19.806200</ts>
    <user>Stasia</user>
    <text>&lt;@Harmony&gt; are you already familiar with datalog?</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T09:47:44.806300</ts>
    <user>Stasia</user>
    <text>If you aren't: &lt;http://www.learndatalogtoday.org/&gt;</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T09:47:49.806500</ts>
    <user>Stasia</user>
    <text>(uses Datomic)</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T09:55:16.807300</ts>
    <user>Harmony</user>
    <text>I've read the documentation about it, but I haven't use it. So I wouldnt say Iam "familiar"</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T10:15:28.807800</ts>
    <user>Harmony</user>
    <text>anyway,my question was more related to arquitecture</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T10:15:58.808300</ts>
    <user>Harmony</user>
    <text>for example, can I somehow connect Spark to Datomic?</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T11:02:56.808700</ts>
    <user>Harmony</user>
    <text>thx &lt;@Stasia&gt;</text>
  </message>
  <message conversation_id="46">
    <ts>2019-01-04T11:05:20.810000</ts>
    <user>Colin</user>
    <text>`defrecord` can't catch closure? ```(let [x 3] (defrecord Foo [] IFoo (foo [this] x)))```</text>
  </message>
  <message conversation_id="45">
    <ts>2019-01-04T11:06:21.810100</ts>
    <user>Harmony</user>
    <text>I've seen that there's a way to connect python to datomic with the pydatomic library, which access datomic DBMS via the REST API</text>
  </message>
  <message conversation_id="46">
    <ts>2019-01-04T11:07:48.810600</ts>
    <user>Jasmine</user>
    <text>no</text>
  </message>
  <message conversation_id="46">
    <ts>2019-01-04T11:09:28.811200</ts>
    <user>Jasmine</user>
    <text>`reify` can be used to create instances of an interface that close over state</text>
  </message>
  <message conversation_id="47">
    <ts>2019-01-04T11:44:28.813800</ts>
    <user>Sebrina</user>
    <text>Is there a way to run a clojure -main from outside the project dir like?
```cd ~/Projects
clj --dir ~/Projects/find-git-files -m find-git-files.cmdline ./```</text>
  </message>
  <message conversation_id="47">
    <ts>2019-01-04T11:50:17.814400</ts>
    <user>Yen</user>
    <text>is there a native way to deploy an `uberjar` with `lein` ? I am trying to do this using a CI Server with `lein` installed on it.</text>
  </message>
  <message conversation_id="47">
    <ts>2019-01-04T11:54:52.815400</ts>
    <user>Sebrina</user>
    <text>I think I figured it out, I can use the -Sdeps flag pointing to the repo to include it in the classpath</text>
  </message>
  <message conversation_id="47">
    <ts>2019-01-04T12:00:15.816100</ts>
    <user>Sebrina</user>
    <text>```clj -Sdeps "{:deps {find-git-remotes {:local/root \"./find-git-remotes\"}}}" -m find-git-remotes``` seems to be working but I’m curious if there’s a cleaner way to do that.</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:29:22.816700</ts>
    <user>Romona</user>
    <text>Struggling with lein's uberjar feature, I'm confused why we're not making this not easier for people</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:32:24.818900</ts>
    <user>Romona</user>
    <text>Here's my summary:

- most of the time AOT compilation is not desirable
- ns-level forms are executed during AOT compilation, which is confusing
- the only reason why most people use AOT is to set the entry point for the uberjar so that you can `java -jar uberjar.jar` instead of the - often superior - `java -cp uberjar.jar -m foo.main`</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:34:57.821200</ts>
    <user>Romona</user>
    <text>The whole situation confuses people:

- people don't understand how gen-class works or why it's necessary
- leiningen warns and unnecessarily suggests that you should set `:aot :all` - which doesn't seem like a good default to me
- if you specify `:aot [foo.main]` explicitly, that works but due to a bug in lein it compiles the ns twice if you also set `:main foo.main` &lt;https://github.com/technomancy/leiningen/issues/2521&gt;</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:35:52.822300</ts>
    <user>Romona</user>
    <text>Really all you want is to generate a class that does the equivalent of these two lines: &lt;https://github.com/pesterhazy/lein-aot-example/blob/master/src/foo/main.clj#L7-L8&gt;</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:36:53.823100</ts>
    <user>Romona</user>
    <text>AIUI most projects will be better off doing that than AOT'ing everything</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:38:18.824500</ts>
    <user>Romona</user>
    <text>... given that the Clojure compiler is very fast, it doesn't blur the line between compile time and run time and other issues with AOT'ing</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:38:38.824800</ts>
    <user>Romona</user>
    <text>Is there something I'm missing here?</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:38:46.824900</ts>
    <user>Yen</user>
    <text>Can you deploy an uberjar with `lein deploy` ?</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:41:07.826100</ts>
    <user>Jasmine</user>
    <text>you shouldn’t, at least not in public repos</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:41:14.826200</ts>
    <user>Meagan</user>
    <text>I think there's also a perception that AOT helps with startup time</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:47:23.827500</ts>
    <user>Romona</user>
    <text>&lt;@Meagan&gt; I mean it'll be faster because the compile step isn't needed but is there any advantage to aot'ing other than that?</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:47:53.827600</ts>
    <user>Meagan</user>
    <text> ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:52:23.828100</ts>
    <user>Marlyn</user>
    <text>if you’re deploying an application: AOT is fine. library: don’t AOT</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:52:51.828700</ts>
    <user>Marlyn</user>
    <text>yes, it helps with startup time significantly</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T12:54:19.829200</ts>
    <user>Marlyn</user>
    <text>&lt;https://clojure.org/reference/compilation&gt;
is the bible on it, not whatever lein says</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:00:53.829800</ts>
    <user>Romona</user>
    <text>&lt;@Marlyn&gt; that distinction between lib and app code is useful, thanks</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:01:48.830200</ts>
    <user>Marlyn</user>
    <text>lein uberjar generally does _both_ `tar` and AOT</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:02:34.830700</ts>
    <user>Romona</user>
    <text>by default `lein uberjar` doesn't aot, unless you specify `:main` or `:aot` AFAIK</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:05:38.832300</ts>
    <user>Sebrina</user>
    <text>Wrote this tiny cli tool to update git remotes in all of my projects. However, since I need to write to the file I’m reading I have to read all the lines of each config file into a seq, process them, then write to the file, move to next file. Is there a way to make that more efficient so I don’t need to load an entire config into memory at once like in line #23?</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:06:50.833100</ts>
    <user>Romona</user>
    <text>&lt;@Marlyn&gt; also thanks for providing the link to the justification for aot'ing. Part of the problem is that leiningen is undocumented, except for the sample project.clj</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:09:29.834300</ts>
    <user>Romona</user>
    <text>a better default for lein, I think, would be to do the moral equivalent of `lein run` in the uberjar</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:10:11.835100</ts>
    <user>Romona</user>
    <text>then users would be able to enable aot'ing as necessary, irrespective of whether they're building an uberjar or not</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:10:33.835600</ts>
    <user>Romona</user>
    <text>as it is, lein unnecessarily complects aot'ing and creating uberjars</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:12:16.835900</ts>
    <user>Rosaline</user>
    <text>that is not true</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:13:29.836300</ts>
    <user>Rosaline</user>
    <text>ugh</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:13:42.836800</ts>
    <user>Rosaline</user>
    <text>it is, that must have changed at some point</text>
  </message>
  <message conversation_id="48">
    <ts>2019-01-04T13:14:07.837000</ts>
    <user>Rosaline</user>
    <text>ugh, five years ago</text>
  </message>
  <message conversation_id="49">
    <ts>2019-01-04T13:36:03.837500</ts>
    <user>Sebrina</user>
    <text>Oops! Too much context. Boiled the question down and asked in beginners channel where it more likely belongs :slightly_smiling_face:</text>
  </message>
  <message conversation_id="49">
    <ts>2019-01-04T13:41:05.838200</ts>
    <user>Yen</user>
    <text>I figured out how to deploy an uberjar `lein do uberjar, deploy [release-repo] [identifer] [version] path/to/uberjar, deploy [release-repo]`</text>
  </message>
  <message conversation_id="49">
    <ts>2019-01-04T13:42:36.839100</ts>
    <user>Dann</user>
    <text>&lt;@Yen&gt; does the last step do anything?</text>
  </message>
  <message conversation_id="49">
    <ts>2019-01-04T13:42:59.839600</ts>
    <user>Dann</user>
    <text>is that if you want to deploy both a jar and an uberjar?</text>
  </message>
  <message conversation_id="49">
    <ts>2019-01-04T13:43:33.840200</ts>
    <user>Yen</user>
    <text>&lt;@Dann&gt;, Yeah I should have specified that. I wanted to deploy both a jar and an uberjar. I knew how to deploy a jar but not an uberjar.</text>
  </message>
  <message conversation_id="50">
    <ts>2019-01-04T14:24:44.840600</ts>
    <user>Stasia</user>
    <text>&lt;@Harmony&gt; the REST API is legacy now, see &lt;https://docs.datomic.com/on-prem/rest.html&gt; , it's replaced by the Client API</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:09:51.842400</ts>
    <user>Tammera</user>
    <text>hmm I noticed that pulling in git dependencies from a deps.edn is not possible when pulling over ssh with an ed25519 keypair. I know thats a limitation of the JGit library (&lt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=520927&gt;), but shouldn’t that be something that is worth documenting in tools.gitlib’s readme?</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:10:32.842600</ts>
    <user>Tammera</user>
    <text>Or is there some workaround I am missing</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:16:34.843100</ts>
    <user>Marlyn</user>
    <text>it’s annoying but make sure you use an ssh agent &lt;@Tammera&gt;</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:16:45.843400</ts>
    <user>Marlyn</user>
    <text>export SSH_AUTH_SOCK=…path to your agent socket</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:17:52.844200</ts>
    <user>Marlyn</user>
    <text>you also may have to modify entries within .ssh/config — specifically remove IdentityFile and let your ssh-agent be smart about it</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:24:12.845700</ts>
    <user>Tammera</user>
    <text>Right, but only the ed25519 public key is known to GH right.</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:38:14.847500</ts>
    <user>Tammera</user>
    <text>Hmm maybe I have multiple issues at the same time :’), eyeballing &lt;https://dev.clojure.org/jira/browse/TDEPS-91&gt;</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:38:23.847800</ts>
    <user>Jasmine</user>
    <text>yes, that’s a separate issue</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:39:47.848400</ts>
    <user>Jasmine</user>
    <text>I believe it’s probably something you can get around by editing your ~/.ssh/known_hosts, but certainly not the best</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:40:21.849000</ts>
    <user>Jasmine</user>
    <text>I’d like to make the switch to just using git but I need to strategize how to best do that without breaking lots of people</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:41:03.849300</ts>
    <user>Tammera</user>
    <text>right, because that would need git to be explicitly installed right</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:41:48.849800</ts>
    <user>Tammera</user>
    <text>as in the C binaries + all other git fluff</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T15:58:06.850500</ts>
    <user>Celestine</user>
    <text>&lt;@Jasmine&gt; Maybe attempt to shell out to `git` and fallback to jgit if that fails?</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T16:24:25.851600</ts>
    <user>Jasmine</user>
    <text>well I’m thinking that we would maybe initially ship with support for both and have some way for user to override</text>
  </message>
  <message conversation_id="51">
    <ts>2019-01-04T16:24:57.852200</ts>
    <user>Jasmine</user>
    <text>but default logic would probably be git falling back to jgit (as I’d like to eventually remove jgit entirely)</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T16:56:51.853800</ts>
    <user>Venice</user>
    <text>Hey, all. I'm using deps.edn and building my project on Gitlab. It takes ages because it pulls the clojars deps everytime. How can I find out where on the filesystem those deps end up so that I can cache them?</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T16:57:06.854300</ts>
    <user>Venice</user>
    <text>I was expecting it to be ~/.m2, but that seems not to be the case...</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:00:15.855400</ts>
    <user>Rosaline</user>
    <text>are all your dependencies maven artifacts? those should all end up in m2</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:00:57.855900</ts>
    <user>Rosaline</user>
    <text>any git dependencies will be in ~/.gitlibs</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:02:13.857700</ts>
    <user>Rosaline</user>
    <text>but if you are downloading stuff from clojars, then it should end up in ~/.m2 then I would double check your build environment, you building in a container or something and getting a fresh ~/.m2 everytime, etc</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:03:31.858000</ts>
    <user>Venice</user>
    <text>Cheers, will dig more.</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:18:58.858800</ts>
    <user>Clarine</user>
    <text>&lt;@Venice&gt; it seems that `.m2` is the location they use by default: &lt;https://gitlab.com/gitlab-org/gitlab-ce/blob/master/lib/gitlab/ci/templates/Maven.gitlab-ci.yml&gt; and caching the dir `.m2/repository` should work</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:21:24.860400</ts>
    <user>Venice</user>
    <text>&lt;@Clarine&gt; Thanks, I've actually seen that before, it didn't seem to work for me.</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:22:10.861200</ts>
    <user>Venice</user>
    <text>I'll just do a find and bruteforce my way to finding out where they are.</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:24:42.862200</ts>
    <user>Karena</user>
    <text>no need to brute force.
write the output of find to a file. Then run find again after into a different file.
then do:
`vim -d file1 file2` to see the difference between the two :slightly_smiling_face:</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:25:22.862600</ts>
    <user>Venice</user>
    <text>Yea, well, that's really what I mean by bruteforce.</text>
  </message>
  <message conversation_id="53">
    <ts>2019-01-04T17:25:32.862700</ts>
    <user>Lashawn</user>
    <text>Is this a bug?</text>
  </message>
  <message conversation_id="53">
    <ts>2019-01-04T17:27:33.864200</ts>
    <user>Rosaline</user>
    <text>no</text>
  </message>
  <message conversation_id="53">
    <ts>2019-01-04T17:28:08.864700</ts>
    <user>Rosaline</user>
    <text>type returns a instance of java.lang.Class</text>
  </message>
  <message conversation_id="53">
    <ts>2019-01-04T17:29:10.865800</ts>
    <user>Rosaline</user>
    <text>clojure.lang.Keyword is a symbol (that evaluates to a java.lang.Class object) and case test-constants are not evaluated</text>
  </message>
  <message conversation_id="53">
    <ts>2019-01-04T17:29:21.866100</ts>
    <user>Karena</user>
    <text>`case` only works with compile time literals. Try `condp =` instead</text>
  </message>
  <message conversation_id="53">
    <ts>2019-01-04T17:29:23.866300</ts>
    <user>Karena</user>
    <text>&lt;https://puredanger.github.io/tech.puredanger.com/2010/05/30/learning-clojure-15-case/&gt;</text>
  </message>
  <message conversation_id="53">
    <ts>2019-01-04T17:29:41.866600</ts>
    <user>Lashawn</user>
    <text>thank you very much:)</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:33:36.867000</ts>
    <user>Clarine</user>
    <text>&lt;@Venice&gt; you can also run `clojure -Spath`</text>
  </message>
  <message conversation_id="52">
    <ts>2019-01-04T17:58:38.867200</ts>
    <user>Venice</user>
    <text>&lt;@Clarine&gt; perfect!</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:23:30.868600</ts>
    <user>Tonya</user>
    <text>When writing websites, is it recommended to stick to standard HTML? Writing with a DSL such as Hiccup seems powerful, but I'm wondering about how I should handle CSS/Javascript then.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:32:54.869100</ts>
    <user>Gilda</user>
    <text>For css you might try &lt;https://github.com/noprompt/garden&gt; if you are looking for a DSL similar to hiccup.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:39:00.869500</ts>
    <user>Gilda</user>
    <text>Additionally because hiccup emits HTML, you can just write plain css or js to accompany it and link those resources as you would normally. Otherwise, &lt;#C0FQERS0H|garden&gt; and &lt;#C03S1L9DN|clojurescript&gt; are the likely recommendations you will see if you plan on using hiccup to serve templated HTML.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:43:59.869700</ts>
    <user>Tonya</user>
    <text>That makes sense.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:44:31.869900</ts>
    <user>Tonya</user>
    <text>&lt;@Gilda&gt; is it kosher to have both clojurescript + clojure in same project? I'm using ring + compojure for the backend.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:44:38.870100</ts>
    <user>Tonya</user>
    <text>Thanks for help btw.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:49:23.870300</ts>
    <user>Gilda</user>
    <text>It's perfectly alright to have both clojure and clojurescript in the same project. In fact, clojure supports reader conditionals &lt;https://clojure.org/guides/reader_conditionals&gt; to maximize code sharing between the two. Many fullstack applications have a considerable amount of code written in .cljc files in order to facilitate this.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:50:50.870500</ts>
    <user>Gilda</user>
    <text>If you are using leiningen you might take a look at &lt;https://github.com/emezeske/lein-cljsbuild&gt; for getting started.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:51:55.870800</ts>
    <user>Tonya</user>
    <text>Will lein-cljsbuild work with lein-repl?</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:52:13.871000</ts>
    <user>Tonya</user>
    <text>Currently I run lein repl :headless and then connect with cider in emacs.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T18:52:31.871200</ts>
    <user>Tonya</user>
    <text>To reset the state of the webserver I run (mount/start)</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:04:52.871400</ts>
    <user>Dimple</user>
    <text>&lt;@Tonya&gt; I created CHP because it is better to use hiccup instead of HTML &lt;https://bitbucket.org/sonwh98/chp/src/master/&gt;</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:20:30.872200</ts>
    <user>Samual</user>
    <text>&lt;@Karena&gt; &lt;@Rosaline&gt; case is different in Clojure and ClojureScript. Clojure case does not evaluate the stanza handles. CLJS does.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:20:58.872700</ts>
    <user>Rosaline</user>
    <text>cljs also doesn't have clojure.lang.Keyword</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:21:06.873000</ts>
    <user>Samual</user>
    <text>oh</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:21:17.873400</ts>
    <user>Samual</user>
    <text>well the trivia is the point</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:22:39.874900</ts>
    <user>Rosaline</user>
    <text>case is like the millionth place where clojure and cljs diverge, and if you complain about someone will popup and say "oh, its just an edge case"</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:24:18.875400</ts>
    <user>Rosaline</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJS-2102&gt;</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:24:47.875600</ts>
    <user>Rosaline</user>
    <text>"As discussed in that thread we're not re-breaking a thing we broke 2 years ago. It's simply not that important and far too late."</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:26:27.876200</ts>
    <user>Samual</user>
    <text>Hey that Jira issue has a link to a Google Group thread that I started!</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:27:05.876600</ts>
    <user>Samual</user>
    <text>Anyway opinions differ as to whether Clojure's case is the broken one.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:27:42.877100</ts>
    <user>Rosaline</user>
    <text>that is nonsense</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:31:34.878900</ts>
    <user>Rosaline</user>
    <text>clojure's case behaves the way it does because it has to. case provides constant time dispatch, in order to compute the jump table it has to have the values on hand, which in the general case means they have to be unevaluated constants</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:45:22.879500</ts>
    <user>Milford</user>
    <text>ClojureScript’s `case` is constant-time as well.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:47:40.879800</ts>
    <user>Milford</user>
    <text>(For most uses.)</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:56:28.880300</ts>
    <user>Rosaline</user>
    <text>hilariously the non-constant time cases are the cases where its semantics match clojure's, if I recall</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:58:26.880700</ts>
    <user>Rosaline</user>
    <text>oh right, that is exactly what the ticket I linked is for</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T19:58:50.881300</ts>
    <user>Rosaline</user>
    <text>the cond fallback the clojurescript macro uses treats symbols differently then the constant time dispatch part</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:02:43.884300</ts>
    <user>Milford</user>
    <text>Yeah, there’s also the unfortunate handling of const vars &lt;http://blog.fikesfarm.com/posts/2015-06-15-clojurescript-case-constants.html&gt;</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:03:13.884700</ts>
    <user>Rosaline</user>
    <text>basically clojurescript's case was implemented by someone who didn't entirely understand case, and now it is enshrined forever as an asterisk on any discussion of clojurescript / clojure portability</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:07:50.886100</ts>
    <user>Milford</user>
    <text>Right. A similar thing happened with `binding` (the parallel aspect) but that was fixed.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:11:54.888600</ts>
    <user>Milford</user>
    <text>It feels like we are down to this hastening only once or twice a year now (where a mistaken difference is discovered and a decision needs to be taken on whether to fix it).</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:12:42.890100</ts>
    <user>Milford</user>
    <text>Another recent one sitting there is the handling of empty regex s, but those differ anyway</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:15:08.892100</ts>
    <user>Rosaline</user>
    <text>I just remember arguing with dnolen on irc way back because he insisted that clojurescript just be referred to as clojure, and clearly there are differences enough that the distinction must be made</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:17:44.894600</ts>
    <user>Milford</user>
    <text>Hah, yeah. The same concept arises with self-hosted ClojureScript. Ideally you could just pretend it is the same language, but perhaps it is another (albeit close) dialect</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:18:21.894900</ts>
    <user>Rosaline</user>
    <text>clojure, clojure', clojure'', ...</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:18:56.895200</ts>
    <user>Milford</user>
    <text>Yep. Three targets.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:19:16.895600</ts>
    <user>Milford</user>
    <text>0h forgot about CLR</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:21:01.895900</ts>
    <user>Dann</user>
    <text>CLR is the most compatible with the JVM version</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:24:08.896700</ts>
    <user>Becki</user>
    <text>who works on that version these days?</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:24:58.896900</ts>
    <user>Dann</user>
    <text>&lt;https://github.com/clojure/clojure-clr/graphs/contributors&gt;</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:25:07.897100</ts>
    <user>Dann</user>
    <text>David Miller</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:27:20.899800</ts>
    <user>Dann</user>
    <text>if CLR wasn't a microsoft project and there was a tool like lein for clojure-clr, I bet Clojure-CLR would see a lot more use</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:27:21.900000</ts>
    <user>Becki</user>
    <text>wow. that is a ton of work. and largely thankless i suppose</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:27:27.900200</ts>
    <user>Milford</user>
    <text>I thought I read somewhere that, back in the day, you would upgrade from one version of Lisp to another by running your source through some Lisp designed to translate :)</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:28:19.902100</ts>
    <user>Dann</user>
    <text>&lt;@Becki&gt; from what I gather the similarities between CLR / JVM and C# / Java mean it's not as bad as you might think</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:28:26.902500</ts>
    <user>Milford</user>
    <text>You could have like Swift 1, Swift 2, Swift 3, or whatever it is up to now</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:28:32.902700</ts>
    <user>Becki</user>
    <text>i like everything about C# except how tied to windows it was when i used it. winforms, etc, visual studio, etc</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:28:44.903200</ts>
    <user>Becki</user>
    <text>haven't followed along with the core stuff.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:29:00.903800</ts>
    <user>Rosaline</user>
    <text>there is a very interesting paper somewhere about doing that with sbcl</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:29:03.904100</ts>
    <user>Dann</user>
    <text>mono is usable, but I think MS' reputation still holds CLR back</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:29:27.904600</ts>
    <user>Rosaline</user>
    <text>it is kind of tricky to think about and do in a clean away</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:30:00.905900</ts>
    <user>Rosaline</user>
    <text>because it is very easy to confuse the source and the target language when you are using the same language and are generating an in memory image to dump to disk</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:30:19.906600</ts>
    <user>Milford</user>
    <text>Well we could have a spec for Clojure, confirm the code, and then unform it to a spec for Clojure2</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:30:36.907200</ts>
    <user>Milford</user>
    <text>Gah</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:30:37.907400</ts>
    <user>Becki</user>
    <text>doesn't elm kinda do this when they do compiler upgrades? you can run something over your code to get the mechanical stuff</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:30:41.907500</ts>
    <user>Rosaline</user>
    <text>&lt;https://pdfs.semanticscholar.org/98bf/0466dcb0712d2082a7b02d8773bb744ea626.pdf&gt; "SBCL: a Sanely-Bootstrappable Common Lisp"</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:31:26.908100</ts>
    <user>Milford</user>
    <text>Oh wow :open_mouth: gotta read that </text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:31:30.908200</ts>
    <user>Becki</user>
    <text>just downloaded that. thanks!</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:34:27.910400</ts>
    <user>Madeleine</user>
    <text>I mean, porting Clojure to other platforms is tricky both because Clojure leaves some semantics up to Java, adopts some weirdnesses because of Java, and also lacks a formal spec or a cross target test suite.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:39:25.911300</ts>
    <user>Milford</user>
    <text>Maybe it is a bit like Unix / C, with just the right amount of looseness at the bottom to let it spread easily.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:40:24.911900</ts>
    <user>Milford</user>
    <text>In 2026 we will be coding to the CLOJIX standard.</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:46:16.912300</ts>
    <user>Rosaline</user>
    <text>just don't forget to run ./configure before you build</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:46:52.912800</ts>
    <user>Dann</user>
    <text>and google how the hell to run autotools and then run them before running configure</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:48:03.913600</ts>
    <user>Becki</user>
    <text>that paper describes kinda self hosted cljs right? it grabs a js environment, feeds it enough info to become a cljs environment and then compiles the cljs compiler?</text>
  </message>
  <message conversation_id="54">
    <ts>2019-01-04T20:49:06.913800</ts>
    <user>Rosaline</user>
    <text>no</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T04:49:28.914800</ts>
    <user>Maynard</user>
    <text>Can anyone here point me to any documentation on the meaning of ::keys for destructuring?</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T04:49:36.915100</ts>
    <user>Maynard</user>
    <text>Notice the second colon.</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T04:51:35.916000</ts>
    <user>Maynard</user>
    <text>I am reading code that uses this and I don't understand how it works.</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T05:04:36.917200</ts>
    <user>Ellyn</user>
    <text>&lt;@Maynard&gt; that is called a “namespaced keyword”: &lt;https://clojure.org/reference/reader#_literals&gt;</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T05:05:01.917900</ts>
    <user>Ellyn</user>
    <text>basically, `::foo` expands to `:the-namespace-your-are-in/foo`</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T05:05:09.918100</ts>
    <user>Maynard</user>
    <text>Ok, I know the difference now via some experimentation. I just thought it weird I could not find any documentation. I did find this: &lt;https://clojureverse.org/t/poll-destructuring-namespaced-keywords/1388/5&gt;</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T05:05:33.918500</ts>
    <user>Maynard</user>
    <text>Thanks &lt;@Ellyn&gt;</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T05:05:54.919000</ts>
    <user>Ellyn</user>
    <text>official docs on it are here: &lt;https://clojure.org/guides/destructuring#_namespaced_keywords&gt;</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T05:06:44.919600</ts>
    <user>Maynard</user>
    <text>though that page still doesn't mention "::keys"</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T05:07:22.920300</ts>
    <user>Maynard</user>
    <text>The meaning is sort of obvious I guess once you try it out.</text>
  </message>
  <message conversation_id="55">
    <ts>2019-01-05T05:07:29.920500</ts>
    <user>Clarine</user>
    <text>so `(pop [])` errors, but `(peek [])` and `(pop nil)` just work… what’s the reasoning behind that?</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:27:24.924400</ts>
    <user>Kristine</user>
    <text>hello friends,

Question about concurrency: if i have two http requests (ring) coming in, in quick succession, I want to make sure that the first one can do some work, and block the second request for a little bit, and after the first request is done, the other can continue (it’s ok if the 2nd one takes a few milliseconds longer to succeed)

How should I go about this? I started out with a global `atom`, for simplicity let’s say it’s a boolean `busy?` which is `true` when it’s busy, and `false` otherwise

but how to ‘wait’ for the atom? I could of course make a spinning loop but that feels very dirty.

Which construct from clojure would be suitable?</text>
  </message>
  <message conversation_id="57">
    <ts>2019-01-05T05:31:05.924800</ts>
    <user>Clarine</user>
    <text>why not make one endpoint for it, that synchronizes the work?</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:32:06.925400</ts>
    <user>Kristine</user>
    <text>more context: I am integrating with an oauth2 API, which requires me to refresh access tokens</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:32:15.925700</ts>
    <user>Kristine</user>
    <text>the refreshing is done in a ring middleware</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:32:37.926300</ts>
    <user>Kristine</user>
    <text>but if two calls to this api follow each other up quite quickly (which could happen) for the same user</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:32:57.926700</ts>
    <user>Kristine</user>
    <text>and the first one is busy refreshing the token via a HTTP POST  call to the external API</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:33:18.927100</ts>
    <user>Kristine</user>
    <text>then the second one will fail because the external api says: ‘you are using an outdated token’</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:33:56.927900</ts>
    <user>Venice</user>
    <text>I think you're setting yourself up for a world of hurt trying to block that.</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:34:16.928700</ts>
    <user>Clarine</user>
    <text>you could use `locking` if the user’s token is refreshing</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:34:27.929000</ts>
    <user>Kristine</user>
    <text>aah thanks</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:34:30.929200</ts>
    <user>Clarine</user>
    <text>but I’m not sure if that’s a good idea</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:34:34.929300</ts>
    <user>Kristine</user>
    <text>&lt;@Venice&gt; why so?</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:34:55.930000</ts>
    <user>Venice</user>
    <text>I'd say just let them receive the 401 and do the refresh dance.</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:35:12.930700</ts>
    <user>Clarine</user>
    <text>it would be better to make it idempotent. so a second refresh just gets you the same token as the first refresh</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:35:41.931400</ts>
    <user>Clarine</user>
    <text>you could make a local atom keeping the tokens and return the same token if it’s still valid</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:35:47.931600</ts>
    <user>Kristine</user>
    <text>ah yea so move the problem to my clojurescript client</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:36:30.932500</ts>
    <user>Clarine</user>
    <text>I mean, cache the tokens server side. the refresh function goes through the cache</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:38:18.934400</ts>
    <user>Venice</user>
    <text>Yea, basically, catch the "invalid token" message at the clojurescript, do the dance to refresh it with the refresh token, then continue with whatever it was the client was actually requesting.</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:39:02.935000</ts>
    <user>Kristine</user>
    <text>ah yeah ok</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:39:22.935400</ts>
    <user>Venice</user>
    <text>Avoid trying to do clever things with locking though, I bet it's a total minefield.</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:39:28.935600</ts>
    <user>Kristine</user>
    <text>yeah</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:39:39.936000</ts>
    <user>Clarine</user>
    <text>I agree</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:40:25.936900</ts>
    <user>Kristine</user>
    <text>one idea i also have, come to think of it, is to just retry. catch the refresh token outdated exception server-side, re-look in the database (which has a new token in a very short while) and retry</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:40:34.937200</ts>
    <user>Kristine</user>
    <text>ok but i can work from here</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:41:01.937900</ts>
    <user>Kristine</user>
    <text>thanks, i hoped there was some construct that did this for me, so that I came to check here.</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:41:02.938100</ts>
    <user>Kristine</user>
    <text>thanks</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:41:50.938400</ts>
    <user>Venice</user>
    <text>I'm assuming you know about &lt;https://github.com/funcool/buddy&gt; ?</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:42:14.938700</ts>
    <user>Kristine</user>
    <text>yeah</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:42:58.939400</ts>
    <user>Kristine</user>
    <text>how would that help? i ’m integrating with an external api here that i don’t control</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:43:49.941000</ts>
    <user>Kristine</user>
    <text>but i just realize the simple solution is staring me in the face:
- catch the ‘outdated token’ refresh action, and just proceed; there must ’ve been a previous request which done that</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:44:06.941700</ts>
    <user>Clarine</user>
    <text>&lt;@Kristine&gt; I have a similar construct with futures. I’m getting some data from a future and keep those futures in an atom. It doesn’t matter if the future is already realized or still running. If there is already a future, I just wait for that one. If there isn’t one, I create one.</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:44:17.941900</ts>
    <user>Kristine</user>
    <text>ah yeah</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:44:39.942200</ts>
    <user>Clarine</user>
    <text>if the future is not valid anymore, I remove or cancel it</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:44:43.942400</ts>
    <user>Kristine</user>
    <text>yeah</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:44:49.942700</ts>
    <user>Kristine</user>
    <text>gotcha</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:56:18.943000</ts>
    <user>Kristine</user>
    <text>Decided to ‘keep it simple’. If the refresh failed due to outdated token (ie. race condition), wait 200ms, assume by now the new tokens are stored in the database by the previous request, re-fetch those (they should be valid anyway, since validity is 10minutes), and proceed the handler.</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T05:57:13.944100</ts>
    <user>Kristine</user>
    <text>the only thing is the thread/sleep… but at least it’s very clear what’s happening. Not sure if this gives lots of problem when i have a gazillion concurrent users doing things like this, but I’ll come back here when that happens :wink:</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T06:05:44.945000</ts>
    <user>Kristine</user>
    <text>as an aside: again realizing the middleware pattern is awesome. the business logic ring handlers are now simplified so much.</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T07:39:20.947400</ts>
    <user>Ellyn</user>
    <text>here’s a non-blocking way to do it: a function called `is-about-to-expire` and an atom `is-updating`, then in your request have something like this:
```
(if (and (is-about-to-expire token) (compare-and-set! is-updating false true))
  (try
    (swap! token-atom (get-new-token)))
    (finally
      (reset! is-updating false)))
```</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T07:40:04.948200</ts>
    <user>Ellyn</user>
    <text>that means the first thread that sees that the token is about to expire will fetch a new one, but since the old one hasn’t expired yet everyone can keep making requests</text>
  </message>
  <message conversation_id="58">
    <ts>2019-01-05T07:40:35.948900</ts>
    <user>Ellyn</user>
    <text>when the refresh has happened, the old token is atomically replaced with the new one</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T07:48:15.950700</ts>
    <user>Alix</user>
    <text>What does a la carte mean? Im having trouble trying to find a good definition on google.</text>
  </message>
  <message conversation_id="56">
    <ts>2019-01-05T07:51:02.951800</ts>
    <user>Ellyn</user>
    <text>it’s a restaurant term, it means that you can pick and choose what dishes you want instead of getting a pre-composed menu</text>
  </message>
  <message conversation_id="59">
    <ts>2019-01-05T08:07:52.952500</ts>
    <user>Magdalene</user>
    <text>How do deftest and spec differ?</text>
  </message>
  <message conversation_id="60">
    <ts>2019-01-05T10:18:09.955900</ts>
    <user>Tim</user>
    <text>Does anybody know if there are performance improvements or other good or bad side effects in moving from openjdk 8 to 11?</text>
  </message>
  <message conversation_id="61">
    <ts>2019-01-05T11:11:43.959800</ts>
    <user>Roslyn</user>
    <text>Hi! I'm doing a library that provides optional functionality that depends on `clojure.core.cache`. But since this is optional functionality, I don't want to introduce dependency on `core.cache`, and thinking how can I make this dependency a "soft" one. Initially I tried using own protocol similar to `core.cache` and extend it to `core.cache`'s one if it exists like that:</text>
  </message>
  <message conversation_id="61">
    <ts>2019-01-05T11:11:52.960100</ts>
    <user>Roslyn</user>
    <text>```
(when (try
        (require 'clojure.core.cache)
        true
        (catch Exception _
          false))
  (extend-protocol Cache
    (:on-interface clojure.core.cache/CacheProtocol)
    (lookup [this k]
      (clojure.core.cache/lookup this k))
    (has? [this k]
      (clojure.core.cache/has? this k))
    (hit [this k]
      (clojure.core.cache/hit this k))
    (miss [this k v]
      (clojure.core.cache/miss this k v))
    (evict [this k]
      (clojure.core.cache/evict this k))))
```</text>
  </message>
  <message conversation_id="61">
    <ts>2019-01-05T11:13:27.960900</ts>
    <user>Roslyn</user>
    <text>But I think this solution sucks, because I can't extend protocol to another protocol, only to interfaces</text>
  </message>
  <message conversation_id="61">
    <ts>2019-01-05T11:18:28.961900</ts>
    <user>Roslyn</user>
    <text>I just realized I can check if supplied cache satisfies `clojure.core.cache/CacheProtocol` and wrap it with my cache</text>
  </message>
  <message conversation_id="61">
    <ts>2019-01-05T11:25:02.962100</ts>
    <user>Simonne</user>
    <text>&lt;@Roslyn&gt; &lt;https://github.com/clojure/spec.alpha/blob/master/src/main/clojure/clojure/spec/gen/alpha.clj#L17&gt;</text>
  </message>
  <message conversation_id="61">
    <ts>2019-01-05T11:27:01.963000</ts>
    <user>Simonne</user>
    <text>You can optionally run some code, depending on whether you’re able to load `clojure.core.cache`</text>
  </message>
  <message conversation_id="61">
    <ts>2019-01-05T11:38:35.963400</ts>
    <user>Roslyn</user>
    <text>Yeah, I decided to do it like that:
```
(def core-cache-protocol
  (try
    @(requiring-resolve 'clojure.core.cache/CacheProtocol)
    (catch Exception _
      nil)))

(defn -&amp;gt;cache [x]
  (if (and core-cache-protocol (satisfies? core-cache-protocol x))
    (let [core-cache-lookup @(resolve 'clojure.core.cache/lookup)
          core-cache-has? (resolve 'clojure.core.cache/has?)
          core-cache-hit (resolve 'clojure.core.cache/hit)
          core-cache-miss (resolve 'clojure.core.cache/miss)
          core-cache-evict (resolve 'clojure.core.cache/evict)]
      (reify Cache
        (lookup [_ k] (core-cache-lookup x k))
        (has? [_ k] (core-cache-has? x k))
        (hit [_ k] (core-cache-hit x k))
        (miss [_ k v] (core-cache-miss x k v))
        (evict [_ k] (core-cache-evict x k))))
    x))
```</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T12:47:27.965800</ts>
    <user>Doreatha</user>
    <text>I want do serve files from the file system, like with `python -m SimpleHTTPServer`, but from inside a clojure process. I think saw a tweet the other day about a(n old, "done") library for this, but I can't seem to find it. Does anyone know which library I'm talking about?</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:28:07.970400</ts>
    <user>Isa</user>
    <text>How to run `sh` in Clojure to run `wkhtmltopdf` with input stream and output stream if possible? I want to do in from in-memory data instead of files.</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:28:34.970800</ts>
    <user>Isa</user>
    <text>So as inputs I will have long HTML / js / css code and as output PDF file.</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:38:41.971200</ts>
    <user>Simonne</user>
    <text>&lt;@Doreatha&gt; Maybe this will help: &lt;https://github.com/ring-clojure/ring/wiki/Static-Resources&gt;</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:39:06.971600</ts>
    <user>Simonne</user>
    <text>If you know what ring is and how to use it.</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:39:55.972200</ts>
    <user>Simonne</user>
    <text>If not, it’s good to learn. Ring is the standard clj http api.</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:49:08.972600</ts>
    <user>Isa</user>
    <text>ok I think the only one way is to use `-` instead of file name for output. Then I will have output in `:out`.</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:52:10.974900</ts>
    <user>Doreatha</user>
    <text>Thanks, I think it was &lt;https://github.com/tailrecursion/lein-simpleton&gt; that I saw. As it turns out it's not exactly what I wanted, but it looks easy enough to just use ring directly.</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:52:58.975100</ts>
    <user>Isa</user>
    <text>so I have to figure out how to make input from memory. Probably with `:in` but this will be long input string.</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:57:41.975400</ts>
    <user>Isa</user>
    <text>hmm looks like it is pretty easy, string is fine</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T13:57:59.975600</ts>
    <user>Isa</user>
    <text>```
(sh "wkhtmltopdf" "-B" "0" "-L" "0" "-R" "0" "-T" "0" "--page-height" "58mm" "--page-width" "43mm" "--disable-smart-shrinking" "-" "foo.pdf"
      :in (slurp "resources/index.html"))
```</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T14:03:58.975800</ts>
    <user>Isa</user>
    <text>Does it have size limit?</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T14:45:26.977400</ts>
    <user>Isa</user>
    <text>&lt;https://github.com/cognitect-labs/test-runner&gt; - this library for tests is be default included to `clj` template for new project. Does it have option to watch and test again after each change? Or should I use something else?</text>
  </message>
  <message conversation_id="62">
    <ts>2019-01-05T15:00:57.978700</ts>
    <user>Isa</user>
    <text>Did somebody read from bardcode reader devices and can share experience how to do it in Clojure / Java?</text>
  </message>
  <message conversation_id="63">
    <ts>2019-01-06T05:38:30.993100</ts>
    <user>Wanita</user>
    <text>I have working code where I get hash code of data structures with (hash data-structure) but it works in small amount of them. When I have few millions of data structures it will start giving me duplicate hashes (clash). How to get something more unique when structure of data structure is unknown?</text>
  </message>
  <message conversation_id="63">
    <ts>2019-01-06T06:19:26.994500</ts>
    <user>Yee</user>
    <text>&lt;@Wanita&gt; hash returns a 32 bit int, so the birthday problem means you'll start to get conflicts regardless</text>
  </message>
  <message conversation_id="63">
    <ts>2019-01-06T06:20:06.995800</ts>
    <user>Yee</user>
    <text>You might want to look in to something like sha or md5</text>
  </message>
  <message conversation_id="63">
    <ts>2019-01-06T06:20:40.996800</ts>
    <user>Yee</user>
    <text>Or design your data structures to work even with hash conflicts, which is what clj itself does </text>
  </message>
  <message conversation_id="64">
    <ts>2019-01-06T06:37:45.997300</ts>
    <user>Clarine</user>
    <text>how do I get pprint to print this with the leading quote?
```
(def x '[foo bar])
(pprint x)
=&amp;gt; [foo bar]
```</text>
  </message>
  <message conversation_id="64">
    <ts>2019-01-06T06:43:53.998100</ts>
    <user>Clarine</user>
    <text>`(pprint (list 'quote x))` seems to work</text>
  </message>
  <message conversation_id="65">
    <ts>2019-01-06T06:50:11.998200</ts>
    <user>Harmony</user>
    <text>I've seen that PyDatomic uses the Rest API</text>
  </message>
  <message conversation_id="65">
    <ts>2019-01-06T06:50:28.998400</ts>
    <user>Harmony</user>
    <text>not the client api</text>
  </message>
  <message conversation_id="65">
    <ts>2019-01-06T06:50:54.998600</ts>
    <user>Harmony</user>
    <text>I think that's the only way to connect Python with datomic</text>
  </message>
  <message conversation_id="65">
    <ts>2019-01-06T06:50:57.998800</ts>
    <user>Harmony</user>
    <text>isn't it?</text>
  </message>
  <message conversation_id="66">
    <ts>2019-01-06T09:42:17.999000</ts>
    <user>Stasia</user>
    <text>Yeah, unfortunately :neutral_face: hopefully it continues to work well enough</text>
  </message>
  <message conversation_id="65">
    <ts>2019-01-06T10:00:52.999200</ts>
    <user>Harmony</user>
    <text>haha</text>
  </message>
  <message conversation_id="65">
    <ts>2019-01-06T10:00:57.999400</ts>
    <user>Harmony</user>
    <text>that's not a bad news</text>
  </message>
  <message conversation_id="65">
    <ts>2019-01-06T10:01:08.999600</ts>
    <user>Harmony</user>
    <text>thx for your help greywolve</text>
  </message>
  <message conversation_id="67">
    <ts>2019-01-06T10:41:47.001100</ts>
    <user>Milford</user>
    <text>&lt;@Clarine&gt; Not sure if it is an idiom, but I often see the sequence
```
`'~
```
used in macros. It looks a bit like line noise, but perhaps it is an idiom.
So for that example
```
(pprint `'~x)
```</text>
  </message>
  <message conversation_id="67">
    <ts>2019-01-06T10:42:41.001500</ts>
    <user>Clarine</user>
    <text>cool. I have used it in macros yeah</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:36:40.006600</ts>
    <user>Cody</user>
    <text>Hey everyone, I have a problem with leiningen, reloaded.repl, Cursive and/or CLJC. I have defined some protocols in .cljc files which are used from clj/s. In an open REPL from Cursive, most of the time when using `reloaded.repl/reset(-all)`, it doesn't pick up my changes at all. If I do a "manual" `clojure.tools.namespace/refresh(-all)`, my changes are picked up but all the protocol implementations won't satisfy their respective (newly modified) protocols anymore, so I get exceptions from somewhere near `clojure.core/-cache-protocol-fn`. I need to fully restart the REPL for everything to be picked up again. Is there a way to remedy this, or workarounds? Has anybody encountered this? (my google searches haven't turned up much)</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:38:05.007800</ts>
    <user>Cody</user>
    <text>(My workflow is roughly equivalent of what using chestnut involves)</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:40:48.008100</ts>
    <user>Meagan</user>
    <text>this sounds relevant: &lt;https://lambdaisland.com/blog/2018-02-09-reloading-woes&gt;
&amp;gt; when you use tools.namespace to reload your code, it effectively creates completely new and separate versions of functions, records, multimethods, vars, even namespace objects, and any state that is left around from before the reload might still be referencing the old ones</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:44:08.009000</ts>
    <user>Meagan</user>
    <text>I personally don’t use tools.namespace, but I know that re-evaluating things like multimethods is tricky</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:44:18.009300</ts>
    <user>Meagan</user>
    <text>I wonder if records/types that implement protocols is the same</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:45:09.009700</ts>
    <user>Meagan</user>
    <text>have you had any success simply re-evaluating the namespace you’re trying to refresh?</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:47:37.010500</ts>
    <user>Cody</user>
    <text>Well, sort of. It sends me on a wild goose chase through my namespaces, totally arbitrary and non-deterministic</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:48:25.011400</ts>
    <user>Cody</user>
    <text>Sooner or later it sometimes works, but not so often that restarting the whole thing isn't much easier and faster</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:48:42.011800</ts>
    <user>Cody</user>
    <text>Multimethods work fine, by the way</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:49:22.012800</ts>
    <user>Cody</user>
    <text>I have lots of `defrecords` implementing various protocols, and those very often "loose" their implementations in this way</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:49:49.013800</ts>
    <user>Meagan</user>
    <text>well, specifically, I always run into an issue where you can’t re-evaluate the `(defmulti &amp;lt;dispatch&amp;gt;)` part. re-evaluating the cases works fine :slightly_smiling_face:</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:49:50.013900</ts>
    <user>Cody</user>
    <text>which is a bummer since I quite like the architecture so far, but without proper refreshes in the REPL it's very frustrating</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:50:13.014200</ts>
    <user>Cody</user>
    <text>ah you're right, I know that one too ^^</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:51:00.015000</ts>
    <user>Cody</user>
    <text>Maybe it's reloaded.repl's alter-var-root! that does something funky?</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:51:06.015200</ts>
    <user>Meagan</user>
    <text>so, question: if you create a new instance of the new `defrecord` impl, do you see the correct behavior?</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:51:08.015400</ts>
    <user>Meagan</user>
    <text>after a reload</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:52:04.015800</ts>
    <user>Meagan</user>
    <text>(I’m also assuming that you’re interacting with this at a REPL to some extent)</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:52:48.016500</ts>
    <user>Cody</user>
    <text>iirc yes, if I switch to the respective namespace and manually instantiate the record, it satisfies the protocol</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:53:18.016700</ts>
    <user>Cody</user>
    <text>but let me check real quick</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:53:56.017500</ts>
    <user>Cody</user>
    <text>(most of the records are instantiated via an integrant like multimethod mechanism)</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:54:26.017900</ts>
    <user>Meagan</user>
    <text>so it sounds like what’s happening is that your `defrecord` is being picked up correctly, but your application is still referring to instances of the old implementations</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:56:53.018800</ts>
    <user>Meagan</user>
    <text>I haven’t use integrant, I typically use mount because I’m lazy. but I assume there is a way to stop/start your system with new instances of your records, which would solve the problem you’re encountering I think?</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:57:59.019500</ts>
    <user>Cody</user>
    <text>i'm not using integrant, but the core of the IoC mechanism is a multimethod that's basically integrant's init-key</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T13:59:03.020400</ts>
    <user>Cody</user>
    <text>i'll look into the REPL utilities to see if there's something that keeps around stuff</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:00:56.022700</ts>
    <user>Cody</user>
    <text>I'd be surprised though since afaik there's one aliases and stuff. reloaded.repl uses alter-var-root! and component/suspendable, so in a reset, it'll call Lifecycle/stop. All the records in question are re-instantiated on start and discarded on stop. But there could be a bug there as well I suppose.</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:01:05.023000</ts>
    <user>Cody</user>
    <text>there's only aliases*</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:01:25.023300</ts>
    <user>Meagan</user>
    <text>hm. oh, so you’re using component?</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:01:38.023600</ts>
    <user>Cody</user>
    <text>yes, but only "behind the scenes"</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:02:25.024400</ts>
    <user>Cody</user>
    <text>and really only for repl convience. all components wrap a subsystem which consists of the actual parts of the application</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:02:59.025100</ts>
    <user>Cody</user>
    <text>the wrapper components discard the subsystem on stop and create a fresh one through the IoC mechanism on start</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:03:18.025500</ts>
    <user>Cody</user>
    <text>which is why this protocol issue puzzles me</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:04:13.026200</ts>
    <user>Cody</user>
    <text>reloaded.repl's reset does stop, refresh, start, so in theory the subsystems should be created after the tools.namespace refresh</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:04:28.026500</ts>
    <user>Cody</user>
    <text>and with the new implementations</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:05:02.027200</ts>
    <user>Cody</user>
    <text>but maybe that's the crux, a combination of cljc processing and protocol/multimethod reloading</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:05:18.027600</ts>
    <user>Cody</user>
    <text>or protocol reloading and multimethod instantiation, rather</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:07:42.029200</ts>
    <user>Cody</user>
    <text>the reason I suspect something very messy is that very rarely everything breaks completely, even after a REPL restart, and I have to `lein clean` before any of it will work again :sweat_smile:</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:08:05.029600</ts>
    <user>Meagan</user>
    <text>hm yeah this all sounds very complex</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:08:58.030600</ts>
    <user>Meagan</user>
    <text>FWIW I don’t use reloaded.repl at all. I use mount and re-evaluate the var or namespace I’m in as I develop. Occasionally, if necessary, I call `(mount/stop) (mount/start)`</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:09:45.031300</ts>
    <user>Meagan</user>
    <text>but I also have never used records and rarely use protocols :stuck_out_tongue: so take my advice with a grain of salt!</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:11:01.032300</ts>
    <user>Cody</user>
    <text>we considered mount but decided on component+reloaded, since they seemed to be made for record/protocol stuff</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:11:38.033000</ts>
    <user>Cody</user>
    <text>and it works quite beautifully, too, except the actual reloading :smile:</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:13:42.034700</ts>
    <user>Cody</user>
    <text>Well, I'll try reproducing this in a minimal test project i think. Maybe it really is something with the code. Otherwise maybe I can try using an atom for REPL development and completely scrap everything on restart, to rule out reloaded</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:14:14.035200</ts>
    <user>Isa</user>
    <text>Who can share experience about &lt;https://github.com/onyx-platform/onyx&gt; ? Do you feel it is right solution for PDF processing when fast response for query by API is needed?</text>
  </message>
  <message conversation_id="68">
    <ts>2019-01-06T14:15:42.036000</ts>
    <user>Reiko</user>
    <text>I remember seeing a comparison table of Clojure web libraries/frameworks. I can't seem to find it now. Anyone have the link?</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:21:14.036400</ts>
    <user>Reiko</user>
    <text>It showed which ones use macros and which ones are data driven</text>
  </message>
  <message conversation_id="70">
    <ts>2019-01-06T14:35:25.036800</ts>
    <user>Aubrey</user>
    <text>I think you might mean this &lt;https://github.com/juxt/bidi/blob/master/README.md&gt;</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:39:46.037500</ts>
    <user>Reiko</user>
    <text>Yes, that was it, thanks. Forgot it was just comparing routing specifically though.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:40:40.038200</ts>
    <user>Reiko</user>
    <text>I'm contemplating bidi + yada, but not quite sure the practical differences between the libraries</text>
  </message>
  <message conversation_id="70">
    <ts>2019-01-06T14:44:47.038500</ts>
    <user>Isa</user>
    <text>From what I see yada use bidi under the hood</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:45:40.039000</ts>
    <user>Isa</user>
    <text>I don’t know this library but it looks like it is bidi + ring glue</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:45:58.039200</ts>
    <user>Isa</user>
    <text>&lt;@Reiko&gt; ^</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:46:31.039800</ts>
    <user>Reiko</user>
    <text>That could be. They are both from JUXT and is stated as sister libraries</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:47:01.040000</ts>
    <user>Reiko</user>
    <text>It is an alternative to ring though</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:53:07.040200</ts>
    <user>Reiko</user>
    <text>"A yada handler is an instance of the yada.handler/Handler record. Since this record satisfies clojure.lang.IFn, yada handlers behave just like normal Ring handlers and can be used wherever you might use a Ring handler. "</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:54:53.041200</ts>
    <user>Britteny</user>
    <text>there's this one too &lt;https://github.com/metosin/reitit&gt; </text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:55:06.041600</ts>
    <user>Reiko</user>
    <text>Yeah, looking at that too</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:55:09.041800</ts>
    <user>Meagan</user>
    <text>yeah. I think you would use something like: ring (http abstraction) + jetty (web server) + bidi (routing) + yada (resources)</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:55:29.042200</ts>
    <user>Reiko</user>
    <text>No, yada provides the http server and is an alternative to ring</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:55:34.042400</ts>
    <user>Reiko</user>
    <text>It uses Aleph</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T14:55:47.042700</ts>
    <user>Meagan</user>
    <text>:thinking_face: my mistake. must have misread the docs</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T15:48:24.043300</ts>
    <user>Sixta</user>
    <text>&lt;@Reiko&gt; if you have any questions about bidi/yada, there is a subset of us specifically in &lt;#C0CFGN25D|juxt&gt;</text>
  </message>
  <message conversation_id="71">
    <ts>2019-01-06T16:02:55.046600</ts>
    <user>Sixta</user>
    <text>Fwiw, it isn't outside the realm of possibilities for yada to work with other web servers, but yada is currently coupled to the async extensions that Aleph adds. We haven't had a need to extend yada to other web servers, so it hasn't happened, and in the mean time, we have added conveniences for starting yada. </text>
  </message>
  <message conversation_id="72">
    <ts>2019-01-06T16:10:36.048100</ts>
    <user>Aubrey</user>
    <text>I can also recommend pedestal. Different aims than yada, still a good candidate. </text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T16:35:35.048800</ts>
    <user>Reiko</user>
    <text>Thanks for the recommendations</text>
  </message>
  <message conversation_id="72">
    <ts>2019-01-06T18:15:58.056900</ts>
    <user>Fredda</user>
    <text>I try to avoid the life cycle (mount/component) stuff unless absolutely necessary</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T18:25:42.057000</ts>
    <user>Reiko</user>
    <text>Can you elaborate?</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T18:28:56.057200</ts>
    <user>Fredda</user>
    <text>I guess certain extremely complex webservers can benefit from it. But it seems like lots of templates include the structure just in case you need it. Which usually isn't a huge deal, since it doesn't usually get too much in the way even when you don't need it. But then it's just one extra piece of unnecessary complexity.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T18:31:11.057400</ts>
    <user>Fredda</user>
    <text>And in my experience, it's quite easy for projects to evolve and reloading to become broken with life cycles, unless teams maintain good discipline</text>
  </message>
  <message conversation_id="73">
    <ts>2019-01-06T18:46:57.057600</ts>
    <user>Samual</user>
    <text>"Component" itself is an outline of the necessary discipline, no?</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T18:56:20.057800</ts>
    <user>Fredda</user>
    <text>It is. And I guess I'm glad the abstraction has some standard. I just think it's over used</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:03:49.058800</ts>
    <user>Celestine</user>
    <text>&lt;@Fredda&gt; What would you recommend for managing resources that have a start/stop lifecycle then, given that you need to be able to retain a live REPL experience (with _some_ level of code reloading).</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:11:10.064400</ts>
    <user>Fredda</user>
    <text>&lt;@Celestine&gt; some component like thing, sure. But do all web services really have such complex runtime life cycle interdependent resources? I guess it depends on how you archetect your services. `defonce` is often good enough for simple things imo.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:11:36.064500</ts>
    <user>Samual</user>
    <text>Ran across this from H L Ship of Walmart Labs &lt;https://medium.com/@hlship/tips-and-tricks-for-component-d00832abcdfa&gt;</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:11:43.064800</ts>
    <user>Samual</user>
    <text>definitely an enterprise use case</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:11:55.065000</ts>
    <user>Samual</user>
    <text>as opposed to small team</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:13:25.066200</ts>
    <user>Samual</user>
    <text>There is also "reloaded.repl" to go with Component, looks very labor-saving</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:13:26.066300</ts>
    <user>Celestine</user>
    <text>Database connections, caching layer, environment/configuration setup, tons of other stuff benefits from the start/stop lifecycle</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:14:14.067800</ts>
    <user>Celestine</user>
    <text>I haven't found I need to actually refresh namespaces and there are enough gotchas with full reloading that I avoid it.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:14:20.068000</ts>
    <user>Samual</user>
    <text>Also if you use Component as dependency injection then it looks like it would let you have several alternative setups or build a mini-system somewhat a la carte</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:14:20.068100</ts>
    <user>Fredda</user>
    <text>Yeah, large enterprise services</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:14:42.068500</ts>
    <user>Samual</user>
    <text>uh oh gotchas?</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:15:26.069100</ts>
    <user>Celestine</user>
    <text>Component's DI allows you to easily swap in "mocks" for testing, yes.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:16:07.069500</ts>
    <user>Samual</user>
    <text>&lt;@Celestine&gt; You encountered glitches with full reloading?</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:17:44.070800</ts>
    <user>Celestine</user>
    <text>I see a lot of people running into problems with it, yes. I've also seen a lot of people who've set up ProtoREPL for Atom using Jason's opinionated guide run into refreshing problems -- and I recommend they *uncheck* those three options in ProtoREPL.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:18:52.072100</ts>
    <user>Fredda</user>
    <text>If you have all those things, and you have complex runtime dependencies between them, sure. And it's nice that there's a common abstraction for that.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:18:53.072300</ts>
    <user>Celestine</user>
    <text>It seems like it often blows away things in namespaces that they don't expect and they run into errors relating to that which they don't understand (and have to restart their REPL anyway).</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:22:28.075000</ts>
    <user>Samual</user>
    <text>hm yes everything you've done in the 'user ns is gone.. but as long as the reload-all is preceded by component/stop and followed by component/start, the big picture should be ok!</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:23:04.075500</ts>
    <user>Samual</user>
    <text>OTOH it reloads from disk. So if you draft work in namespaces and do not save it, I guess it's lost</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:32:09.077900</ts>
    <user>Celestine</user>
    <text>&lt;@Samual&gt; I tend to work a lot against the REPL by evaluating top-level s-expr's without saving files. I use `comment` blocks for code that I'm using for exploration and tests -- also evaluated directly as s-expr's into the REPL without saving. I have component start/stop calls in comments too, but mostly I start the system and eval code live into it for hours as I develop.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:33:26.079900</ts>
    <user>Celestine</user>
    <text>I don't tend to have a workflow these days where I need to do full reloads -- and even when I need a bit more brute force that just loading a single file into the REPL, a `(require … :reload-all)` is sufficient.</text>
  </message>
  <message conversation_id="74">
    <ts>2019-01-06T19:33:38.080200</ts>
    <user>Antwan</user>
    <text>(not to interject, but what are the pro/cons of component vs the defstate stuff in mount)</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:34:31.081300</ts>
    <user>Celestine</user>
    <text>&lt;@Antwan&gt; My feeling is that defstate in mount is still global state and should be avoided. I like component's ability to have multiple distinct instances live in my REPL at the same time.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:35:31.082200</ts>
    <user>Meagan</user>
    <text>what I like about mount is that it allows me to write my code mostly like I would expect if I _wasn’t_ use mount, e.g. vars referring to other vars in namespaces</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:36:14.083200</ts>
    <user>Meagan</user>
    <text>it’s more on the _easy_ side of the simple vs. easy continuum</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:36:24.083700</ts>
    <user>Meagan</user>
    <text>but you do lose some power, like &lt;@Celestine&gt; said</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:36:30.083900</ts>
    <user>Celestine</user>
    <text>I like my functions to rely solely on their parameters (and other functions) -- so if they're doing DB stuff, they should be passed the `db-spec` (or something that contains it).</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:37:06.084600</ts>
    <user>Celestine</user>
    <text>When we got started with Clojure at work back in 2011, we didn't start with Component... and we're still regretting that...</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:37:30.085500</ts>
    <user>Celestine</user>
    <text>We've worked very hard to adopt Component and to refactor code to remove the global state that we had to start with.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:37:45.085900</ts>
    <user>Meagan</user>
    <text>sure. and you can still do that in mount. mount states are just vars</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:37:47.086000</ts>
    <user>Celestine</user>
    <text>So I'm *very* strongly against global shared state these days because of that experience.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:37:57.086300</ts>
    <user>Celestine</user>
    <text>Vars are global shared state.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:38:09.086500</ts>
    <user>Meagan</user>
    <text>right. I see what you’re saying</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:38:56.087300</ts>
    <user>Antwan</user>
    <text>maybe a tangent for offtopic, but what were the kinds of issues you ran into?</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:40:54.089200</ts>
    <user>Meagan</user>
    <text>typically the way I end up writing my applications, is that different namespaces might declare different states. those states get introduced into my application at various entrypoints, and are passed around from that point on.

I find that mount pretty much solves the _reloading_ part of my issues, e.g. being in a dirty REPL and wanted to start/stop some resource that things are referring to.

it doesn’t really help you at all with architecting your application, since it allows you to be as strict or loose with how you reference those global states as you want</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:42:23.089900</ts>
    <user>Meagan</user>
    <text>the upside is much less ceremony. but I haven’t been burned too badly yet, so I’m willing to pay that cost for now :wink:</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:47:56.091200</ts>
    <user>Celestine</user>
    <text>There's no "One True Way" in Clojure so you can use whatever approach suits you best -- but that also means there's not much guidance and nothing very opinionated, which can be hard when you're getting started. And no frameworks adds to that.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:51:20.092700</ts>
    <user>Celestine</user>
    <text>We've changed our approach a lot over the years -- and in our suite of apps, some of them are built very differently to other, based on who built the core of it and at what point in our usage it got started. We have about seven and a half years of code now, and over 86K lines of Clojure so there's quite a bit of variety in there.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T19:59:03.092900</ts>
    <user>Reiko</user>
    <text>I guess I'm not exactly sure what your statement was responding to.</text>
  </message>
  <message conversation_id="75">
    <ts>2019-01-06T20:03:53.093100</ts>
    <user>Fredda</user>
    <text>My statement?</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:06:19.093300</ts>
    <user>Fredda</user>
    <text>I was just airing a general complaint, sorry. Your use case may be entirely appropriate.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:11:53.093500</ts>
    <user>Reiko</user>
    <text>I'm just not familiar with mount or component and didn't see it mentioned above it so I was just confused by that. If I knew them I might agree with your complaint.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:15:13.093700</ts>
    <user>Reiko</user>
    <text>From a cursory glance of them, it sounds to me like it's another example of OOP mentality trying to claw back in to our functional paradise. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:15:40.093900</ts>
    <user>Fredda</user>
    <text>I guess I was reading some backlog in another channel... And I accidentally responded in this channel... Lol</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:16:02.094100</ts>
    <user>Reiko</user>
    <text>No worries. It ended up having a relation indirectly after all</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:16:03.094300</ts>
    <user>Fredda</user>
    <text>Now I can't find it :grin:</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:27:50.095100</ts>
    <user>Samual</user>
    <text>Installed Atom + Chlorine.  No idea how to use it.  Tried "chlorine connect clojure socket repl" command, put in the port number, it said it worked.  But</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:27:54.095300</ts>
    <user>Samual</user>
    <text>how do I evaluate a form?</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:28:43.096200</ts>
    <user>Celestine</user>
    <text>&lt;@Samual&gt; Unless you have key bindings, you'll have to do everything through the command palette.</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:28:56.096600</ts>
    <user>Celestine</user>
    <text>Happy to share my config in the &lt;#CF02KPG4U|chlorine&gt; channel</text>
  </message>
  <message conversation_id="69">
    <ts>2019-01-06T20:29:23.097200</ts>
    <user>Celestine</user>
    <text>The console pane is output-only at the moment. The expectation is that you will eval code from your editor pane into the REPL.</text>
  </message>
  <message conversation_id="76">
    <ts>2019-01-06T21:16:18.097800</ts>
    <user>Felix</user>
    <text>Is there a port of &lt;https://common-lisp.net/project/mcclim/&gt; to Clojure anywhere?</text>
  </message>
  <message conversation_id="77">
    <ts>2019-01-06T21:41:07.098500</ts>
    <user>Annamaria</user>
    <text>Since I love writing templates in Hiccup, I got around to creating a template for clojure built sites on netlify:

&lt;https://github.com/minikomi/simple-static&gt;

Hiccup, cljs, garden for css.</text>
  </message>
  <message conversation_id="77">
    <ts>2019-01-06T21:58:15.098800</ts>
    <user>Colette</user>
    <text>cider-send-ns-form-to-repl and cider-send-ns-form-to-repl-focus</text>
  </message>
  <message conversation_id="77">
    <ts>2019-01-06T21:58:26.099000</ts>
    <user>Colette</user>
    <text>a bit late but :slightly_smiling_face:</text>
  </message>
  <message conversation_id="78">
    <ts>2019-01-06T22:35:47.099300</ts>
    <user>Abby</user>
    <text>Thanks for that! I've used it before to learn :slightly_smiling_face:</text>
  </message>
  <message conversation_id="79">
    <ts>2019-01-06T22:36:22.099500</ts>
    <user>Annamaria</user>
    <text>no problem, just a basic thing you can build on.</text>
  </message>
  <message conversation_id="79">
    <ts>2019-01-06T22:38:20.099700</ts>
    <user>Abby</user>
    <text>And since I also love to write templates in Hiccup, it really saddens me that there seems to be very little effort from the community to attract simple front end developers. I've struggled a lot to find good material to ease entrance, both for me and for friends I would like to experience Hiccup/Garden.</text>
  </message>
  <message conversation_id="80">
    <ts>2019-01-07T00:38:21.105000</ts>
    <user>Alix</user>
    <text>What's a good way to provide context/metadata to my transducers? My transformation relies on some collection specific config data.
- Lexical scoped variable would mean I only need to provide it once however I would need to pass it to all the inner function calls.
- I could merge it into each element however then I would be duplicating this config data. This might be inefficient as this config data contains a collection itself and I would be repeating that collection for each element in my data.
- I could also do something with metadata too?
- Maybe I could provide a function to each element which when called returns the config data?</text>
  </message>
  <message conversation_id="81">
    <ts>2019-01-07T01:05:03.105400</ts>
    <user>Rosaline</user>
    <text>merge it in</text>
  </message>
  <message conversation_id="81">
    <ts>2019-01-07T01:05:36.106200</ts>
    <user>Rosaline</user>
    <text>in memory it is a pointer to the same data, not separate copies of the data</text>
  </message>
  <message conversation_id="81">
    <ts>2019-01-07T01:36:15.106900</ts>
    <user>Alix</user>
    <text>&lt;@Rosaline&gt; Ah right. That would work great then as the merge is the simplest to implement. Thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:17:05.108200</ts>
    <user>Ivana</user>
    <text>Like this? ```(clojure.pprint/pprint ''[foo bar])
'[foo bar]```</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:17:41.108400</ts>
    <user>Clarine</user>
    <text>can you do that with the x instead of the double quoted vector?</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:20:25.108600</ts>
    <user>Ivana</user>
    <text>Maybe not. Is it for edn data or for something else?</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:20:47.108800</ts>
    <user>Clarine</user>
    <text>code generation, but I already have a solution, you’ll see it if you read on :slightly_smiling_face:</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:23:13.109200</ts>
    <user>Ivana</user>
    <text>Or indeed ```user=&amp;gt; (defmacro quoted [x] `(quote (quote ~x)))
#'user/quoted
user=&amp;gt; (def x (quoted [foo bar]))
#'user/x
user=&amp;gt; (clojure.pprint/pprint (quoted [foo bar]))
'[foo bar]```</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:23:32.109500</ts>
    <user>Ivana</user>
    <text>cool, i'm curious</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:24:03.109700</ts>
    <user>Clarine</user>
    <text>I did it like this: `(list 'quote all-syms-clj)`</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:24:16.110100</ts>
    <user>Clarine</user>
    <text>anyone got a tip how I can get highlighted clojure code in keynote?</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:24:35.110200</ts>
    <user>Ivana</user>
    <text>nice</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:41:06.111300</ts>
    <user>Min</user>
    <text>if you use emacs you can just emit html for it via htmlize-region (it will generate all the css that matches your theme/colors) and paste it there somehow (I did that with google presentations not keynote but I guess html might be supported) -&amp;gt; &lt;https://melpa.org/#/htmlize&gt;</text>
  </message>
  <message conversation_id="83">
    <ts>2019-01-07T04:43:42.111400</ts>
    <user>Chanelle</user>
    <text>as an option copy somewhere online with syntax highlight and copy back - keynote might use the colors.</text>
  </message>
  <message conversation_id="83">
    <ts>2019-01-07T04:49:36.111800</ts>
    <user>Katherina</user>
    <text>I use &lt;http://pygments.org/demo/&gt; with the Clojure option and copy back the code which comes with the colors. Supports multiple highlight styles too</text>
  </message>
  <message conversation_id="83">
    <ts>2019-01-07T04:49:51.112000</ts>
    <user>Tammera</user>
    <text>yeah, I copy code of GitHub, and manually fix newlines</text>
  </message>
  <message conversation_id="83">
    <ts>2019-01-07T04:53:36.112300</ts>
    <user>Clarine</user>
    <text>thanks</text>
  </message>
  <message conversation_id="82">
    <ts>2019-01-07T04:56:43.112600</ts>
    <user>Clarine</user>
    <text>&lt;@Min&gt; cool, that works for me</text>
  </message>
  <message conversation_id="84">
    <ts>2019-01-07T09:08:47.114400</ts>
    <user>Antwan</user>
    <text>&lt;@Felix&gt; I've never heard of that library, how does it function?</text>
  </message>
  <message conversation_id="84">
    <ts>2019-01-07T09:09:10.115100</ts>
    <user>Antwan</user>
    <text>(if it's cool enough I need a side project regardless)</text>
  </message>
  <message conversation_id="83">
    <ts>2019-01-07T09:42:15.115600</ts>
    <user>Shayla</user>
    <text>looks like it's a gui toolkit/framework: "McCLIM is a FOSS implementation of the Common Lisp Interface Manager specification, a powerful toolkit for writing GUIs in Common Lisp."</text>
  </message>
  <message conversation_id="83">
    <ts>2019-01-07T09:44:54.116700</ts>
    <user>Evonne</user>
    <text>I’m guessing that compiles down to machine code, as opposed to something like seesaw, that hooks into Java Swing &lt;https://github.com/daveray/seesaw&gt;</text>
  </message>
  <message conversation_id="83">
    <ts>2019-01-07T09:45:55.117000</ts>
    <user>Evonne</user>
    <text>(See also: &lt;https://github.com/fn-fx/fn-fx&gt;)</text>
  </message>
  <message conversation_id="83">
    <ts>2019-01-07T09:53:21.117600</ts>
    <user>Evonne</user>
    <text>I used to be very interested in native GUIs, but lately, you know, the web app is just right there…</text>
  </message>
  <message conversation_id="84">
    <ts>2019-01-07T10:08:17.118700</ts>
    <user>Antwan</user>
    <text>I think for customer facing stuff that makes sense, but I've had acquaintances whose job it was to make a tiny internal tool that needed to have a gui</text>
  </message>
  <message conversation_id="84">
    <ts>2019-01-07T10:09:02.119100</ts>
    <user>Antwan</user>
    <text>god rest their souls</text>
  </message>
  <message conversation_id="84">
    <ts>2019-01-07T10:09:11.119300</ts>
    <user>Antwan</user>
    <text>they chose swing</text>
  </message>
  <message conversation_id="84">
    <ts>2019-01-07T10:09:21.119500</ts>
    <user>Antwan</user>
    <text>so seesaw looks cool</text>
  </message>
  <message conversation_id="84">
    <ts>2019-01-07T10:25:58.119600</ts>
    <user>Gilda</user>
    <text>&lt;@Tonya&gt; You have a couple of options. One is to just use the built-in support ala &lt;https://github.com/emezeske/lein-cljsbuild/blob/1.1.7/doc/REPL.md&gt;. Another is to use middleware and launch a clojurescript repl from your main repl via something like &lt;https://github.com/nrepl/piggieback&gt;.</text>
  </message>
  <message conversation_id="84">
    <ts>2019-01-07T11:32:33.121200</ts>
    <user>Felix</user>
    <text>&lt;@Antwan&gt;: not sure, never used McClim. The manual looked impressive, so I was hoping someone had ported it over to Clojure so I could test it.</text>
  </message>
  <message conversation_id="85">
    <ts>2019-01-07T12:03:43.124100</ts>
    <user>Jasmine</user>
    <text>If you took the Clojure survey, and marked “Reference docs” as a priority for making improvements, I would be interested to learn more. 1) do you mean something other than the docs at &lt;https://clojure.org/reference/*&gt;. 2) do you think existing docs should be improved or new things added. And then I’m interested in learning if there are specific things (if so, an issue at &lt;https://github.com/clojure/clojure-site/issues&gt; would be best) or if this is something else.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:50:24.129100</ts>
    <user>Somer</user>
    <text>I am attempting to read a serialized function from an `ObjectInputStream`. This code is running in a Java Class and looks like this: `IFn f = (IFn) in.readObject();`. I am getting an exception pointing to that line:
```
Caused by: java.io.IOException: java.lang.ClassNotFoundException: compute.connector.serialize$myfn
```
I'm guessing this has to do with Clojure's classloader? Do I need to switch the classloader for the thread calling `readObject`?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:51:31.129700</ts>
    <user>Somer</user>
    <text>Right before that line, I require the namespace: `require.invoke(Clojure.read(namespace));`.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:51:59.130200</ts>
    <user>Somer</user>
    <text>Actually, the code looks almost identical to this: &lt;https://github.com/gorillalabs/sparkling/blob/b6e93ca6005a86b3d67bfae646db5e26d145dc68/src/java/sparkling/serialization/Utils.java#L33-L58&gt;</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:52:48.131000</ts>
    <user>Dann</user>
    <text>don't IFn instances created via eg. fn get randomized automatic names that don't persist across restarts?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:53:16.131600</ts>
    <user>Dann</user>
    <text>or are you using something like deftype to get something that implements IFn but has a predictable name?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:54:26.132600</ts>
    <user>Rosaline</user>
    <text>defn results in a fn with the same classname</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:54:29.132700</ts>
    <user>Somer</user>
    <text>For this first cut I'm defining `myfn` as:
```
(defn myfn
    [x]
    (inc x))```
It's only run once so _I think_ its name would be the same?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:55:05.133200</ts>
    <user>Rosaline</user>
    <text>yes, you'll have to use the compiler's classloader</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:55:31.133700</ts>
    <user>Rosaline</user>
    <text>I would strongly recommend against that</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:55:41.134000</ts>
    <user>Rosaline</user>
    <text>why not serialize the var?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:55:54.134300</ts>
    <user>Rosaline</user>
    <text>serializing fn objects is gross</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:56:48.135600</ts>
    <user>Rosaline</user>
    <text>if you serialize the var, you can still do the namespace require trick with the namespace for the var, then deref the var to get the value, no classloader stuff required</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:57:13.136200</ts>
    <user>Somer</user>
    <text>Hmm. I'm not sure. Ultimately it may need to serialize an anonymous function :grimacing:</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:57:25.136600</ts>
    <user>Dann</user>
    <text>then you run into what I was saying</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:57:34.137100</ts>
    <user>Rosaline</user>
    <text>or don't even bother to deref the var, because vars implement ifn</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:57:38.137300</ts>
    <user>Dann</user>
    <text>the name is auto-generated gibberish that changes on reload</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:57:51.137700</ts>
    <user>Rosaline</user>
    <text>don't put yourself in a situation of needing to serialize anonymous functions</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T13:58:38.138500</ts>
    <user>Somer</user>
    <text>I'm not sure if it can be avoided. The anonymous function is calculated through an expensive ML-esque process.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:00:54.140000</ts>
    <user>Somer</user>
    <text>I've seen this &lt;https://github.com/technomancy/serializable-fn&gt; but that seems kinda gross to me. Perhaps less gross than serializing an anonymous function?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:01:52.140700</ts>
    <user>Dann</user>
    <text>it's the only technique that will reliably work correctly across restarts / vms though</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:02:32.141000</ts>
    <user>Becki</user>
    <text>that docstring on that macro is so nice lol</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:02:42.141300</ts>
    <user>Becki</user>
    <text>```
(defmacro ^{:doc (str (:doc (meta #'clojure.core/fn))
                      "\n\n  Oh, but it also allows serialization!!!111eleven")}
```</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:04:01.142400</ts>
    <user>Somer</user>
    <text>&amp;gt; it's the only technique that will reliably work correctly across restarts / vms though
How come?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:04:43.142600</ts>
    <user>Somer</user>
    <text>Why?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:13:06.143400</ts>
    <user>Dann</user>
    <text>because anonymous function names are auto-generated</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:13:23.143700</ts>
    <user>Somer</user>
    <text>If you could get them to be statically generated, would it work?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:14:02.144300</ts>
    <user>Dann</user>
    <text>hmm - actually, maybe having a predictable name isn't needed for object deserialization? honestly I don't know</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:16:33.146000</ts>
    <user>Rosaline</user>
    <text>it is</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:16:57.146600</ts>
    <user>Rosaline</user>
    <text>the object is an instance of some class</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:17:05.146800</ts>
    <user>Rosaline</user>
    <text>and the class needs to be defined</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:17:39.147300</ts>
    <user>Dann</user>
    <text>I guess you could serialize the class itself with the instance...</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:19:12.148000</ts>
    <user>Rosaline</user>
    <text>just don't paint yourself in to the corner of serializing closures</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:20:14.149100</ts>
    <user>Rosaline</user>
    <text>and like, you are already shipping the clojure code around (otherwise you wouldn't be able to require the namespace)</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:20:44.149800</ts>
    <user>Rosaline</user>
    <text>so just get what you need from there instead of going through java object serialization</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:22:26.150700</ts>
    <user>Rosaline</user>
    <text>so you use some weird process to generate your code, instead of generating a code object and using java serialization, have it generate a form, stick that form in a file with a def, require the file, grab the var</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:23:31.151400</ts>
    <user>Somer</user>
    <text>Yeah that path seems to have less friction. Curious, have you gone down the serialization path before and hit problems?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:25:45.152900</ts>
    <user>Rosaline</user>
    <text>not really, I can't tell you the last time I've used java serialization, I was present at the seajure meetup were serializable-fn was written, and I have spent a little bit of time thinking about shipping functions around in a distributed systems setting</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:27:28.153500</ts>
    <user>Somer</user>
    <text>I see. Is storing the form as a string still the best approach you've seen?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:28:38.154600</ts>
    <user>Fredda</user>
    <text>If you absolutely need it, I prefer to define objects so they print with enough info so that the object can be reconstructed on the other side, as defined by some object reader.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:30:47.156500</ts>
    <user>Fredda</user>
    <text>But that won't be easy for arbitrary closures</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:33:01.157900</ts>
    <user>Somer</user>
    <text>In an ideal world, storing the data to construct the function would be great. In our case, the data used to create these functions can have thousands of different complex properties. It would be a large undertaking to model that data, and we'd like to push that off for the time being.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:37:20.158100</ts>
    <user>Rosaline</user>
    <text>I don't mean a string</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:37:57.158800</ts>
    <user>Rosaline</user>
    <text>I mean, like, generate a file that contains (def f (fn [...] ...))</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:38:13.159100</ts>
    <user>Rosaline</user>
    <text>then load that file</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:38:45.159800</ts>
    <user>Somer</user>
    <text>That’s not much different than a string, right?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:39:04.160000</ts>
    <user>Rosaline</user>
    <text>it depends</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:39:35.160600</ts>
    <user>Rosaline</user>
    <text>if you have a namespace and load the file via require then multiple loads won't result in new code generation</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:39:45.160900</ts>
    <user>Rosaline</user>
    <text>the naive approach of sending a string around and evaling it will</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:40:05.161200</ts>
    <user>Somer</user>
    <text>What’s the downside to new code generation?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:40:26.161900</ts>
    <user>Rosaline</user>
    <text>it won't be hot</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:41:02.162600</ts>
    <user>Fredda</user>
    <text>Some fns also want to close over local state, which won't work very well when you've stringified your form, unless you're careful</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:41:43.162900</ts>
    <user>Rosaline</user>
    <text>any form of serialization has that problem</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:41:50.163100</ts>
    <user>Fredda</user>
    <text>right</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:42:23.163700</ts>
    <user>Fredda</user>
    <text>that's true</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:43:06.164500</ts>
    <user>Somer</user>
    <text>Doesn’t the serializable-fn handle locals?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:43:21.164800</ts>
    <user>Rosaline</user>
    <text>it handles them as best it can</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:43:45.165400</ts>
    <user>Rosaline</user>
    <text>(which in my opinion is not very well)</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:44:52.166700</ts>
    <user>Rosaline</user>
    <text>the problem with serializing arbitrary object graphs from memory (which closure serialization is) is pointer identity is not preserved</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:46:22.167700</ts>
    <user>Rosaline</user>
    <text>vars are sort of like pointers where the identity is preserved</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:48:22.169100</ts>
    <user>Somer</user>
    <text>Not sure I totally understand. Is that a performance trade off or a different behavior than originally expected?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:48:38.169600</ts>
    <user>Rosaline</user>
    <text>both in the case of mutable objects</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:48:50.170300</ts>
    <user>Rosaline</user>
    <text>the first in the case of immutable values</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:49:18.170700</ts>
    <user>Fredda</user>
    <text>What if `serializable-fn` is closing over another closure?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:49:40.171000</ts>
    <user>Fredda</user>
    <text>May only work with data</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:49:55.171500</ts>
    <user>Rosaline</user>
    <text>or a ref, or an atom, or some random java object</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:50:01.171700</ts>
    <user>Fredda</user>
    <text>right</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:50:25.171900</ts>
    <user>Fredda</user>
    <text>lot's of gotchas</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:56:28.174800</ts>
    <user>Somer</user>
    <text>I suppose that’s the trade off I’d be making with taking approach. &lt;@Rosaline&gt; you said you spend some time thinking of this. Was this the best solution you found?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:58:00.175600</ts>
    <user>Rosaline</user>
    <text>there isn't a good general solution, so you should solve your specific problem</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:58:25.176200</ts>
    <user>Rosaline</user>
    <text>your specific problem is you have some clojure code you want to distribute</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:58:39.176600</ts>
    <user>Rosaline</user>
    <text>the best way to distribute clojure code is as code</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:58:56.176900</ts>
    <user>Rosaline</user>
    <text>(not serializing java objects from memory)</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T14:59:50.178200</ts>
    <user>Rosaline</user>
    <text>there is some tool that people use for deploying clojure functions as aws lambdas, you might check that out (I forget the name)</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:00:32.178700</ts>
    <user>Rosaline</user>
    <text>I have trouble believing it works well</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:01:22.180100</ts>
    <user>Marceline</user>
    <text>Here is a naive question. I would like to refer a java enum member: java.awt.Desktop.Action.BROWSE. I tried various different forms, yet none works.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:02:31.182400</ts>
    <user>Rosaline</user>
    <text>java.awt.Desktop$Action/BROWSE</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:02:34.182700</ts>
    <user>Dann</user>
    <text>for the first thing, the object owning it is Desktop$Action - that's how inner classes work</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:02:46.183300</ts>
    <user>Marceline</user>
    <text>For instance, (. java.awt.Desktop.Action BROWSE), (java.awt.Desktop.Action/BROWSE)...</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:03:07.184100</ts>
    <user>Somer</user>
    <text>That’s a great breakdown of the problem. Thank you guys for your input! Going to investigate the serializable-fn approach to see if it will cover the entirety of my problem. </text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:03:14.184400</ts>
    <user>Dann</user>
    <text>inner classes are fictional, what actually exists is a class with a $ in the middle of the name</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:03:33.184600</ts>
    <user>Marceline</user>
    <text>&lt;@Rosaline&gt; thanks! Let me try it.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:03:37.184900</ts>
    <user>Dann</user>
    <text>also the parens are allowed, but not needed</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:03:46.185200</ts>
    <user>Marceline</user>
    <text>Seems it is not in the document -- I did read it, :slightly_smiling_face:</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:05:05.186000</ts>
    <user>Dann</user>
    <text>&lt;@Marceline&gt; documented where? The official docs mention how to access an enum and how to access an inner class, but for this case you need to know both</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:06:58.186700</ts>
    <user>Dann</user>
    <text>oh maybe they don't directly mention enums...</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:07:20.187100</ts>
    <user>Marceline</user>
    <text>&lt;@Dann&gt; I was reading: &lt;https://clojure.org/reference/java_interop&gt;.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:07:42.187900</ts>
    <user>Marceline</user>
    <text>I found it now -- it refers to the $ syntax at one place -- I missed it.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:07:55.188300</ts>
    <user>Dann</user>
    <text>yeah, I remember things that clearly aren't covered there - it doesn't mention the thing about inner classes and doesn't show using enums either</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:08:15.188700</ts>
    <user>Dann</user>
    <text>oh, $ is under "nested" not "inner"</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:08:26.189000</ts>
    <user>Rosaline</user>
    <text>enum values are static field on the enum class</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:08:33.189200</ts>
    <user>Rosaline</user>
    <text>it definitely mentions static fields</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:09:07.189800</ts>
    <user>Dann</user>
    <text>yeah, I guess there's a few things you need to know about the JVM internals before all those docs are clear</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:09:41.190400</ts>
    <user>Rosaline</user>
    <text>that isn't really even jvm internals, "enums" exist as a java language contstruct</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:10:13.190900</ts>
    <user>Dann</user>
    <text>and they are defined in-language to be equivialent to static fields on an object?</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:12:47.191200</ts>
    <user>Rosaline</user>
    <text>that is what the compiler turns them in to</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:15:03.192200</ts>
    <user>Dann</user>
    <text>right, what I'm saying is that there's a piece of information about the internals, that isn't derived from the language ~spec~ docs, needed to understand how to access an enum</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:16:58.194100</ts>
    <user>Marceline</user>
    <text>The official java doc annotate the nested class Action as: java.awt.Desktop.Action -- so java uses . to refer to nested class. Yet clojure uses $.</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:18:52.194400</ts>
    <user>Dann</user>
    <text>right - but the clojure docs actually describe that discrepency</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:19:19.195000</ts>
    <user>Dann</user>
    <text>what I was getting at is enums, which are indirectly described (you need to know it's implemented as static fields on a class)</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T15:27:55.196600</ts>
    <user>Jasmine</user>
    <text>If only there was a way to register these issues for update</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:28:50.196700</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/clojure/clojure-site/issues&gt;</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:39:33.197300</ts>
    <user>Marceline</user>
    <text>&lt;@Jasmine&gt; I will register an issue about this one later today. thanks!</text>
  </message>
  <message conversation_id="86">
    <ts>2019-01-07T15:41:43.197600</ts>
    <user>Jasmine</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:26:00.199200</ts>
    <user>Tammera</user>
    <text>&lt;@Jasmine&gt; Looking at some of the documentation I sometimes find myself puzzled at what is actually suggested. Take for example &lt;https://clojuredocs.org/clojure.core/reduce-kv&gt;, it tells me that it takes a function with three positions, an `f`/`init`/`coll` and that it applies f to `init`, `k1`, `v1`, and applies `f` to that result, `k2` and `v2`… etc.

This particular case tells me “how” and “what”, but forgets to tell “why”. It is actually, as a beginner in Clojure, surprisingly difficult to quickly find functions that I need due to these highly dense detailed pieces of documentation that “forget” to tell the higher picture.

Certainly written with great intention, and all information is there, but not usually in a very “yes this is what I want”/“no I don’t want this” kinda way. If that makes any sense?</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:28:13.200400</ts>
    <user>Jasmine</user>
    <text>That is pretty much by design. The docstrings are not intended to teach you the language, the idioms, etc of the language. They are meant to be concise statements about what each function does.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:30:38.201800</ts>
    <user>Jasmine</user>
    <text>We don’t really have any intention to change that (and in fact, making these much longer and more explanatory would also increase code size and degrade classloading and startup time)</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:31:26.203000</ts>
    <user>Jasmine</user>
    <text>However, it is perfectly reasonable to combine docstrings with ancillary material that is useful to one or more audiences into a documentation site that would be better for those audiences</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:32:06.203900</ts>
    <user>Tammera</user>
    <text>yeah ofc, they are pretty printed docstrings, I get that. I am merely saying that, as a beginner, that is often the only thing I have, and dumps quite a bit information on my “newbie” mind.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:32:11.204000</ts>
    <user>Jasmine</user>
    <text>&lt;http://clojuredocs.org/&gt; is such a site - it combines the docstrings with examples, links, etc</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:36:37.206600</ts>
    <user>Jasmine</user>
    <text>some efforts that have been made in adding supplementary docstring material but it’s a big effort and one that’s hard to do well</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:37:32.207800</ts>
    <user>Jasmine</user>
    <text>maybe some day we will spend more time on this in the core team, but other things seem more pressing at the moment</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:38:11.208900</ts>
    <user>Jasmine</user>
    <text>there is a lot of intro Clojure material available in a variety of forms and I’d say all of them are a better way to learn the “why” parts than reading docstrings</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:38:13.209000</ts>
    <user>Tammera</user>
    <text>Right, link was actually to clojuredocs ^^. Its hard to pinpoint, I’d admit that, but it feels currently that there is a great detailed explanation but no higher level overview. I am merely pointing out what I recently notices was holding me back a bit in terms of documentation. Please take it as no offense</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:38:41.209300</ts>
    <user>Jasmine</user>
    <text>none taken! :)</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:38:54.209600</ts>
    <user>Jasmine</user>
    <text>you are hardly the first to make such an observation :)</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:45:31.211100</ts>
    <user>Tammera</user>
    <text>haha ofcourse, and I will certainly not be the last. Its easy saying that “clojure documentation is x”, but “why I think its x”, thats such a different question.</text>
  </message>
  <message conversation_id="88">
    <ts>2019-01-07T16:55:25.213000</ts>
    <user>Celestine</user>
    <text>&lt;@Tammera&gt; I'm curious as to what would have helped you here (specifically)? Were you just looking over all the various core functions thinking "Hmm, I wonder when I would use that?" or did you start from a problem, thinking "Hmm, what core function would solve this problem?"</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T16:56:58.213800</ts>
    <user>Celestine</user>
    <text>Are the examples of `reduce-kv` on the &lt;http://clojuredocs.org|clojuredocs.org&gt; page not explaining a "why" here?</text>
  </message>
  <message conversation_id="88">
    <ts>2019-01-07T16:57:16.214100</ts>
    <user>Reiko</user>
    <text>&lt;@Tammera&gt; You may find this helpful: &lt;https://clojure.org/api/cheatsheet&gt;</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:00:24.216200</ts>
    <user>Celestine</user>
    <text>I haven't read this but it may be a good resource for this sort of question &lt;https://www.manning.com/books/clojure-the-essential-reference&gt; (anyone have any input on it?)</text>
  </message>
  <message conversation_id="88">
    <ts>2019-01-07T17:00:40.217000</ts>
    <user>Becki</user>
    <text>There's also &lt;https://www.conj.io/&gt; which i really like. It has examples which often include more of what you want. IE, if you look up defprotocol you're probably gonna want to glance at extend-type or extend-protocol</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:00:46.217300</ts>
    <user>Reiko</user>
    <text>I understand where you're coming from. From my perspective, it's hard to answer the "why" because answering that is entirely context dependent.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:02:10.219000</ts>
    <user>Becki</user>
    <text>i browse it from CIDER `(C-c C-d r)` and just saw that it hotlinks to crossclj to find usages. that's pretty cool</text>
  </message>
  <message conversation_id="88">
    <ts>2019-01-07T17:04:33.221300</ts>
    <user>Tammera</user>
    <text>&lt;@Celestine&gt; in this particular case I stumbled upon it because a coworker was using it. I think the “problem” of the examples here is that there is no base case. The first example is more complex than it should have been, and most other examples feel more esoteric than valid usecases of the particular function. If this particular page just had a very simple `(reduce-kv (fn [memo k v]) ...) init coll)` I would already have been helped tremendously in _quickly_ finding out what it is about. (Also, it was just some example of a page that I remembered took me longer to “parse” than it should have imo, don’t assign too much value to the example ^^)</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:09:27.223700</ts>
    <user>Celestine</user>
    <text>Ah, reading code and finding an unknown function and thinking "Hmm, why have they used this function?" … yeah, I can see that use case... and you're pretty much going to be at the mercy of whatever examples (and comments) folks have added to &lt;http://clojuredocs.org|clojuredocs.org&gt; at that point. At least more examples/comments can be added by the community so now maybe someone here can go add something that would have helped you... or you could add something that would help future you's coming along and hitting the same question/use case.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:11:31.224900</ts>
    <user>Tammera</user>
    <text>Right, I knew that was coming, it is a community resource after all. Ofcourse I want to contribute, but I was just taking this as an example of something that “hindered” me as a newbie.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:14:00.226700</ts>
    <user>Reiko</user>
    <text>Do you have any prior experience with the functional paradigm?</text>
  </message>
  <message conversation_id="88">
    <ts>2019-01-07T17:14:19.227200</ts>
    <user>Tammera</user>
    <text>yes, have programmed in Haskell before</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:14:34.227400</ts>
    <user>Celestine</user>
    <text>No worries. There are lots of gaps and rough edges in the public Clojure documentation sphere, unfortunately, and precious few people who have the time/energy to contribute so we all owe them a huge amount of thanks for what we've got so far. None of that helps folks today who hit something that is not well-covered in the docs tho'... :disappointed:</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:15:30.228200</ts>
    <user>Celestine</user>
    <text>I wish I had more time to spend on docs and tutorials but I'm really not very good at writing that sort of stuff...</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:16:06.228700</ts>
    <user>Becki</user>
    <text>we should get the Rust guy who just quit Mozilla. His dream job is Alex's job i think</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:16:23.229000</ts>
    <user>Becki</user>
    <text>(not to replace Alex but to work alongside him :)</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:16:48.229100</ts>
    <user>Reiko</user>
    <text>I thought this last example on clojuredocs was helpful as it is so basic it is showing another way of updating a map.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:17:08.229400</ts>
    <user>Becki</user>
    <text>Steve Klabnik is who i was thinking of</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:17:39.230000</ts>
    <user>Dann</user>
    <text>it's basically merge but restricted to two args</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:17:45.230100</ts>
    <user>Tammera</user>
    <text>o.O did he quit mozilla</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:17:49.230300</ts>
    <user>Tammera</user>
    <text>what a loss for the Rust community</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:18:28.231100</ts>
    <user>Dann</user>
    <text>also `(reduce-kv assoc m e)` does the same thing (though admittedly less clear what it's doing)</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:18:31.231200</ts>
    <user>Becki</user>
    <text>yes. dan luu tweeted about it. and its got some interesting thoughts in it. he was the _lowest_ paid member of his team</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:18:49.231500</ts>
    <user>Tammera</user>
    <text>have a link by any chance, Rust is one of those languages I follow with great interest but with lack of time to invest</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:19:39.231800</ts>
    <user>Becki</user>
    <text>good thread on it with link to steve's blog: &lt;https://twitter.com/danluu/status/1082321431109795840&gt;</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:20:58.233900</ts>
    <user>Diamond</user>
    <text>It’ll have different behavior if you give it vectors. :smile:</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:22:04.234100</ts>
    <user>Reiko</user>
    <text>"Reduces an associative collection."</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:25:02.235800</ts>
    <user>Dann</user>
    <text>merge only works on vectors accidentally</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:25:06.236100</ts>
    <user>Arnoldo</user>
    <text>This won't help your general issue of better examples, but for this particular question: &lt;https://stackoverflow.com/questions/48732579/when-to-use-reduce-kv-over-reduce-in-clojure&gt;</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:25:19.236500</ts>
    <user>Dann</user>
    <text>or do you mean this works better on vectors than merge does?</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:25:27.237000</ts>
    <user>Tammera</user>
    <text>Haha, I know what it does _now_, its not a hard function, its just hard to parse from the *current* example[s] (or their order), that it really isn’t.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:26:40.237700</ts>
    <user>Arnoldo</user>
    <text>Personally I've never had an issue with just destructing the map entries using normal reduce, but then I wasn't considering the performance</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:27:01.237800</ts>
    <user>Tammera</user>
    <text>really sad</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:29:12.238000</ts>
    <user>Tammera</user>
    <text>I kinda hope he finds a new home for his Rust work. That language really shows great potential and needs someone like him as much as any other new language.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:31:34.238500</ts>
    <user>Reiko</user>
    <text>What's the current preferred libraries for making HTTP requests from an API server?</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:35:38.238700</ts>
    <user>Becki</user>
    <text>i would be quite happy to see him at Cognitect :slightly_smiling_face:</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:37:41.238900</ts>
    <user>Tammera</user>
    <text>haha also, but I kinda also want Rust to succeed</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:42:28.239600</ts>
    <user>Celestine</user>
    <text>&lt;@Reiko&gt; we use both `clj-http` and `http-kit` (client).</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:42:57.240300</ts>
    <user>Celestine</user>
    <text>The latter is nice and simple and async by default. The former is comprehensive with a lot more knobs and dials.</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T17:43:01.240500</ts>
    <user>Reiko</user>
    <text>Are there any practical differences between them?</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T17:43:50.241200</ts>
    <user>Celestine</user>
    <text>(does my second line answer that or do you want more specifics?)</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T17:44:24.242000</ts>
    <user>Reiko</user>
    <text>More details would be helpful to weigh them</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:44:58.243100</ts>
    <user>Reiko</user>
    <text>My current use case does not require fancy tweaking so I'm more looking at performance, size, http compliance, etc</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T17:47:07.245100</ts>
    <user>Celestine</user>
    <text>I guess it depends on what you need it for. `clj-http` brings in a lot of dependencies (which can be a problem in itself) but it is extremely configurable and has built-in support for a number of over-the-wire protocols and coercions. We've also run into problems with its handling of multipart form POSTs with image files and a few APIs that we needed to interact with (something odd about how it was handling headers I think) and we've switched those to use `http-kit` instead.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:47:58.246400</ts>
    <user>Reiko</user>
    <text>I would prefer fewer dependencies as it is only a small project</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:48:09.246600</ts>
    <user>Celestine</user>
    <text>Going forward, I think we'll use `http-kit`'s client library more and more (and `clj-http` less) because we really don't need all the bells and whistles that `clj-http` offers -- and we like the simple, async-by-default approach of `http-kit`.</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T17:48:24.246900</ts>
    <user>Reiko</user>
    <text>That seems in line with my thinking, thanks</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T17:48:32.247200</ts>
    <user>Celestine</user>
    <text>But `clj-http` has been the "gold standard" in Clojure for a long time... :slightly_smiling_face:</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:48:40.247400</ts>
    <user>Fredda</user>
    <text>def check out &lt;https://github.com/schmee/java-http-clj&gt;</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:49:06.247800</ts>
    <user>Fredda</user>
    <text>I haven't tried it out yet but I've been meaning to</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:50:05.248100</ts>
    <user>Tammera</user>
    <text>dependency on Java 11 tho</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T17:50:13.248300</ts>
    <user>Tammera</user>
    <text>that may be a dealbreaker?</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:50:28.248700</ts>
    <user>Reiko</user>
    <text>I hope not. Not for me for sure</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:50:48.249100</ts>
    <user>Reiko</user>
    <text>Only if you have an environment that requires a previous version</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T17:51:18.249500</ts>
    <user>Tammera</user>
    <text>right, I know people who are reluctant to upgrade because of licensing concerns and therefore stay on 8</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T18:04:44.250100</ts>
    <user>Celestine</user>
    <text>(if folks are concerned about licensing, they should upgrade to OpenJDK11 -- from somewhere like AdoptJDK :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T18:05:07.250600</ts>
    <user>Celestine</user>
    <text>Staying on (Oracle) JDK 8 means no more updates unless you pay.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T18:05:15.250800</ts>
    <user>Tammera</user>
    <text>OpenJDK 11 has 6 months of support, no?</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T18:05:30.251100</ts>
    <user>Celestine</user>
    <text>OpenJDK _from Oracle_ has only six months.</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T18:05:38.251600</ts>
    <user>Tammera</user>
    <text>right, ofcourse</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T18:05:44.251800</ts>
    <user>Celestine</user>
    <text>Other OpenJDK providers are offering longer support periods.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T18:08:06.252700</ts>
    <user>Reiko</user>
    <text>Isn't the idea that it shouldn't be a big deal moving forward? Just upgrade to 12 when it comes out?</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T18:08:35.253800</ts>
    <user>Reiko</user>
    <text>I thought I remember that being a design goal of the new structure</text>
  </message>
  <message conversation_id="89">
    <ts>2019-01-07T18:08:39.254000</ts>
    <user>Celestine</user>
    <text>Depends whether you want long term support and/or are willing to pay Oracle money...</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T18:09:01.254700</ts>
    <user>Celestine</user>
    <text>(and this should probably go to &lt;#C1AC4BU2K|java&gt; before we suck too much air out of &lt;#C03S1KBA2|clojure&gt; about it)</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T18:09:02.254900</ts>
    <user>Tammera</user>
    <text>Yeah, they are on a faster release schedule, I can see how people were concerned the first time they read “6-months of support or upgrade”.</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T18:09:20.255300</ts>
    <user>Reiko</user>
    <text>Personally, I avoid any software that is coupled to a specific version of Java</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T18:09:40.255800</ts>
    <user>Tammera</user>
    <text>Right also I am heading off, I managed to break my sleep schedule enough as is. Was a pleasure discussing ^^</text>
  </message>
  <message conversation_id="87">
    <ts>2019-01-07T19:51:28.256900</ts>
    <user>Diamond</user>
    <text>I was making a joke.</text>
  </message>
  <message conversation_id="90">
    <ts>2019-01-07T19:51:55.257400</ts>
    <user>Dorla</user>
    <text>Is there a way to know whether an object satisfies a protocol that's been extended via metadata? `clojure.core/satisfies?` doesn't seem to work?
```
  (defprotocol IFoo
    :extend-via-metadata true
    (foo [this]))

  (def x (with-meta {} {`foo (fn [x] :foo)}))
  (foo x)
  ;; :foo
  (satisfies? IFoo x)
  ;; false
```</text>
  </message>
  <message conversation_id="91">
    <ts>2019-01-07T19:57:12.257600</ts>
    <user>Diamond</user>
    <text>The use of the word “work” in the context of using `merge` with vectors is quite charitable. I’ve never been in a situation where upon finding that a bug due to a mistaken use of `merge` with vectors was considered “working” nor have I ever been in a situation where anyone recommended `merge` as a substitute for `conj`.</text>
  </message>
  <message conversation_id="90">
    <ts>2019-01-07T20:00:32.259100</ts>
    <user>Celestine</user>
    <text>You can query whether the metadata on a given object has entries for the protocol functions you might want to call -- but it would make `satisfies?` a pretty slow function if it had to walk all the metadata to look for all the protocol functions declared for a given protocol...</text>
  </message>
  <message conversation_id="90">
    <ts>2019-01-07T20:00:58.259700</ts>
    <user>Celestine</user>
    <text>...and you might only provide one or two of the functions (the ones you actually know will be called) rather than all of them.</text>
  </message>
  <message conversation_id="90">
    <ts>2019-01-07T20:01:40.260600</ts>
    <user>Celestine</user>
    <text>If `IFoo` had two functions, `foo` and `bar`, and you had an object whose metadata defined just `foo`, does it satisfy `IFoo` or not?</text>
  </message>
  <message conversation_id="90">
    <ts>2019-01-07T20:02:12.260800</ts>
    <user>Celestine</user>
    <text>^ &lt;@Dorla&gt;</text>
  </message>
  <message conversation_id="91">
    <ts>2019-01-07T20:11:51.265300</ts>
    <user>Samual</user>
    <text>&lt;@Reiko&gt; for an API server that is both a server and a client, Zach Tellman's aleph looks excellent.  It's built on Netty so it does all sides of networking.  It's also built on Z.T.'s rip-snorting "manifold" async library.  So your non-blocking code that says "in response to this api request, go ask &lt;http://bla&gt; for something and when it comes back filter it and return it to the end user" looks perfectly procedural and natural.</text>
  </message>
  <message conversation_id="90">
    <ts>2019-01-07T20:12:16.265600</ts>
    <user>Dorla</user>
    <text>That's a good point. I don't care about performance in this case so it would have been nice if there was a function in core that made a `satisfies?` in the metadata. It's quite easy for me to add (contains? (meta x) `foo) in this case.</text>
  </message>
  <message conversation_id="90">
    <ts>2019-01-07T20:13:34.266800</ts>
    <user>Dorla</user>
    <text>As for the second point when an object has just defined one of the functions in `IFoo`, I'd expect `satisfies?` to work like it does on other object who hasn't implemented the protocol fully:
```
  (defprotocol IFoo
    (foo [this])
    (bar [this]))

  (satisfies? IFoo (reify IFoo (foo [this] :foo))) ;; true
```</text>
  </message>
  <message conversation_id="90">
    <ts>2019-01-07T20:14:30.267200</ts>
    <user>Dorla</user>
    <text>Thanks &lt;@Celestine&gt; as always :slightly_smiling_face:</text>
  </message>
  <message conversation_id="92">
    <ts>2019-01-07T20:30:29.268900</ts>
    <user>Dann</user>
    <text>haha OK</text>
  </message>
  <message conversation_id="90">
    <ts>2019-01-07T20:34:16.270600</ts>
    <user>Celestine</user>
    <text>I guess the check for protocols that can be extended via metadata needs to be ```(if (or (satisfies? IFoo x) (contains? (meta x) `foo)) (foo x) (throw (ex-info "Don't know how to foo this!" {:x x})))```</text>
  </message>
  <message conversation_id="92">
    <ts>2019-01-07T20:34:52.271200</ts>
    <user>Celestine</user>
    <text>(or just let it blow up depending on what you need to do in the non-`foo`-implementing case)</text>
  </message>
  <message conversation_id="93">
    <ts>2019-01-07T20:48:44.271900</ts>
    <user>Reiko</user>
    <text>I'm running yada on the frontend, which uses aleph. The backend API is separate so I'm using java-http-clj on that end</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:21:22.274800</ts>
    <user>Loria</user>
    <text>Why isn't there an equivalent `peek!` function for transient vectors in the standard library?</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:21:42.275200</ts>
    <user>Loria</user>
    <text>Say I have a reducing function where each step depends on the previous result and the intermediate steps are all internal
```
(reduce
 (fn [acc val]
   (let [prev (peek acc)]
     (conj acc (... prev val))))
 [:init]
 coll)
```</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:22:35.276000</ts>
    <user>Loria</user>
    <text>It would be nice to easily turn it into a transient version
```
(persistent!
 (reduce
  (fn [acc val]
    (let [prev (peek! acc)]
      (conj! acc (... prev val))))
  (transient [:init])
  coll))
```</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:24:00.276800</ts>
    <user>Loria</user>
    <text>The only thing I could find was a 8 year old SO post &lt;https://stackoverflow.com/questions/3207298/why-is-there-no-peek-function-for-clojure-transient-vectors&gt;</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:27:36.278500</ts>
    <user>Loria</user>
    <text>Is the above code un-idiomatic in some way? I just started learning about transients but I imagine this isn't a rare use case for them.</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:34:00.279400</ts>
    <user>Celestine</user>
    <text>Since a transient vector is both Counted and Indexed, I think the following should be O(1): `(defn peek! [t] (nth t (dec (count t)) nil))`</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:35:49.280600</ts>
    <user>Celestine</user>
    <text>Not quite as fast as having it built-in but probably good enough if you're going to get enough of a performance boost from switching from persistent to transient vectors in a `reduce` like that...</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:39:00.281200</ts>
    <user>Jasmine</user>
    <text>`peek` is a read op. seems like it should just work on a transient vector, probably just an oversight</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:40:19.281600</ts>
    <user>Jasmine</user>
    <text>can’t say I’ve ever seen this mentioned before, but feel free to file a jira</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:46:33.282000</ts>
    <user>Marlon</user>
    <text>Where can I find information on how defprotocol's :on-interface directive works?</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:48:02.282300</ts>
    <user>Jasmine</user>
    <text>that’s not a public feature of defprotocol</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:48:33.282500</ts>
    <user>Jasmine</user>
    <text>so I don’t know of any info on it</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:59:35.283100</ts>
    <user>Marlon</user>
    <text>Alright. I've just seen references in some of Rich's comments pointing towards it in the case someone had a particular use case, and I wanted to know more about it.</text>
  </message>
  <message conversation_id="94">
    <ts>2019-01-07T23:59:53.283300</ts>
    <user>Marlon</user>
    <text>Most notably here: &lt;https://groups.google.com/forum/#!msg/clojure/pZFl8gj1lMs/qVfIjQ4jDDMJ&gt;</text>
  </message>
  <message conversation_id="95">
    <ts>2019-01-08T00:27:14.283400</ts>
    <user>Loria</user>
    <text>Thanks, I filed one at &lt;https://dev.clojure.org/jira/browse/CLJ-2464&gt; - it's my first time using JIRA so I'm not sure if it's done properly.</text>
  </message>
  <message conversation_id="96">
    <ts>2019-01-08T00:34:28.286500</ts>
    <user>Mariela</user>
    <text>Is there something like the following for clojure.test (ideally not incurring in the banana-jungle problem; I don't want to change frameworks)

`expect { ... }.to change { ... }.from(1).to(2)`

that's ruby rspec in case in case it rings a bell. Else: `{ ... }` represents code blocks (which in clj would be fns, or macro bodies)

I actually implemented `expect-change` in clj a couple jobs ago, can't access the source unfortunately</text>
  </message>
  <message conversation_id="96">
    <ts>2019-01-08T01:42:53.287600</ts>
    <user>Celestine</user>
    <text>&lt;@Mariela&gt; sounds like you want `expectations/clojure-test` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="96">
    <ts>2019-01-08T01:43:37.288200</ts>
    <user>Celestine</user>
    <text>&lt;https://github.com/clojure-expectations/clojure-test&gt; -- it provides an "expect" style syntax on top of `clojure.test` (so all your existing tooling continues to work).</text>
  </message>
  <message conversation_id="96">
    <ts>2019-01-08T01:44:42.289300</ts>
    <user>Celestine</user>
    <text>It's not as expressive as rspec… I believe there was actually a "port" of rspec to Clojure years ago but I don't think it is maintained now.</text>
  </message>
  <message conversation_id="96">
    <ts>2019-01-08T01:46:26.290700</ts>
    <user>Celestine</user>
    <text>Although I'm not sure what `expect-change` would be in Clojure given the general lack of side-effect-y stuff...?</text>
  </message>
  <message conversation_id="96">
    <ts>2019-01-08T01:58:29.293900</ts>
    <user>Mariela</user>
    <text>hmmm interesting! nice job on the library, I appreciate the bridging of both worlds

I was familiar with Expectations, perhaps I don't like that a lot of stuff seems to rely on positional arguments, so occasionally typos might mean false positives/negatives

&amp;gt; `expect-change` would be in Clojure given the general lack of side-effect-y stuff...?

I'd agree with you for unit testing, but for "controller" tests (in Rails lingo) where I assert that hitting API endpoint causes side-effect _x_, the technique becomes more useful.</text>
  </message>
  <message conversation_id="96">
    <ts>2019-01-08T02:01:01.294900</ts>
    <user>Mariela</user>
    <text>As a random thought, a macro-based impl would rock:

`(expect (inc!) :to-change @foo :from 2 :to 3)`

Here, `(inc!)` and `@foo` are evaluated in a careful, specific order</text>
  </message>
  <message conversation_id="96">
    <ts>2019-01-08T02:54:04.296300</ts>
    <user>Celestine</user>
    <text>```(deftest side-effect-y
  (expect 2 @foo)
  (inc!)
  (expect 3 @foo))``` :rolling_on_the_floor_laughing:</text>
  </message>
  <message conversation_id="96">
    <ts>2019-01-08T02:57:39.296700</ts>
    <user>Mariela</user>
    <text>yeah... doesn't meet my standards :stuck_out_tongue_winking_eye: BDD-y guy here</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:14:48.297300</ts>
    <user>Tressa</user>
    <text>is there a way to globally mock out a function during tests?</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:15:03.297600</ts>
    <user>Tressa</user>
    <text>like with-redefs except global</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:15:31.298000</ts>
    <user>Ivana</user>
    <text>&lt;@Jasmine&gt; I think I marked this one too. For Clojure as a language the reference docs are pretty complete, as well as for it's core libraries (well done). However, what I think is missing is references on acknowledged Clojure design patterns. E.g. patterns like Component might not be unique to Clojure, but are very relevant for building Clojure applications. Without this knowledge and knowing who is authoritative, it is hard for someone new to know where to start and people will have to reinvent those patterns or wait to be pointed to them by their peers. If they are lucky they are coming from a language where similar patterns existed, if not, good luck.

IMO the same is even more true for the Clojurescript environment, but there I wouldn't even know what the reference patterns are. Is it om.next, something else? Is there even an acknowledged pattern?</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:16:13.299000</ts>
    <user>Tressa</user>
    <text>i'd want to mock a helper function from a dependency that's irrelevant during tests without having to with-redefs every single time</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:17:31.300000</ts>
    <user>Ivana</user>
    <text>I like to build it in the design of my application. Having dummy implementations for those dependencies, acting similar to the mocked dependency</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:19:01.300200</ts>
    <user>Tressa</user>
    <text>actually it's in the dependency of a dependency and mocking that out feels like more trouble than just with-redefsing every test</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:21:15.300400</ts>
    <user>Ivana</user>
    <text>I thought you were after an alternative testing way, but if it's about globally overriding the function. ```(alter-var-root #'the-ns/the-function (constantly (fn [&amp;amp; args] "whatever"))``` Works too</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:21:30.300600</ts>
    <user>Ivana</user>
    <text>Be sure to not put it in production :slightly_smiling_face:</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:40:01.300900</ts>
    <user>Tressa</user>
    <text>oooooh that's just the kind of thing i was considering</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T04:40:07.301100</ts>
    <user>Tressa</user>
    <text>be right back trying it out</text>
  </message>
  <message conversation_id="98">
    <ts>2019-01-08T04:42:35.301300</ts>
    <user>Mariela</user>
    <text>are you using Component/Integrant? A nice approach would be to define per-environment components</text>
  </message>
  <message conversation_id="98">
    <ts>2019-01-08T04:46:23.301500</ts>
    <user>Tressa</user>
    <text>yup just what needed! thanks a lot!</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T06:35:20.302100</ts>
    <user>Epifania</user>
    <text>Thanks for linking that, super helpful that I wish I found before! Seems to lack a printable version, current one seems to take around ~10 pages</text>
  </message>
  <message conversation_id="99">
    <ts>2019-01-08T07:17:33.303800</ts>
    <user>Fidelia</user>
    <text>what are your opinions on websocket libraries (vs. non-libraries)?

I used sente for a side project and had quite some trouble getting started, many concepts to understand and quite opinionated. There’s also the possibility of just hooking into http-kit directly. Anything I’ve missed, what do you prefer?</text>
  </message>
  <message conversation_id="97">
    <ts>2019-01-08T08:18:38.304000</ts>
    <user>Jasmine</user>
    <text>Yep, thanks</text>
  </message>
  <message conversation_id="100">
    <ts>2019-01-08T08:20:47.306800</ts>
    <user>Jasmine</user>
    <text>I hear ya. Doing this with a few web pages is generally hard. I sensed the same gap and spent two years co-writing Clojure Applied to try to fill it. It’s doubly hard in ClojureScript because things in contact with JS change at a much faster rate even.</text>
  </message>
  <message conversation_id="100">
    <ts>2019-01-08T08:30:49.307000</ts>
    <user>Ivana</user>
    <text>I guess a book is a more appropriate format indeed. I see that your book is mentioned in this list &lt;https://clojure.org/community/books&gt; So that's a start.  An idea for improvement would be if this list is more prominent as a follow up resource and grouped by type of problem or level (your book would be under "patterns", "advanced")? Maybe even community votes. Just thinking out loud here</text>
  </message>
  <message conversation_id="100">
    <ts>2019-01-08T08:33:00.307300</ts>
    <user>Ivana</user>
    <text>I would then also add links between topics on the website and the books (e.g. &lt;https://clojure.org/reference/transducers&gt; would have links to books that have a significant part about transducers)</text>
  </message>
  <message conversation_id="99">
    <ts>2019-01-08T09:15:09.307500</ts>
    <user>Jasmine</user>
    <text>We would prefer on the main site to avoid “recommending” things, especially since those of us working on the site overlap with the authors of some of the books</text>
  </message>
  <message conversation_id="99">
    <ts>2019-01-08T09:17:09.307700</ts>
    <user>Jasmine</user>
    <text>categorization would be ok, but I think it’s difficult to categorize things fairly (this has all the problems of categorizing stuff anywhere else)</text>
  </message>
  <message conversation_id="100">
    <ts>2019-01-08T09:50:50.308700</ts>
    <user>Shayla</user>
    <text>Steve is a powerhouse and the Rust community will be worse-off without him. Any community that he joins will benefit greatly.</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:19:05.310200</ts>
    <user>Nova</user>
    <text>I have a simple deps.edn, and when I run clj the java process just hangs. What would be the first step to debugging this beyond making sure the dependency exists?

```
{:deps {org.clojure/clojure {:mvn/version "1.10.0"}
org.openjfx/javafx-fxml     {:mvn/version "11.0.1"}
```</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:19:40.310800</ts>
    <user>Marlyn</user>
    <text>upgrade your tools.deps, there was a bug previously</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:19:51.311100</ts>
    <user>Marlyn</user>
    <text>er, your clojure tool</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:20:15.311300</ts>
    <user>Nova</user>
    <text>&lt;@Marlyn&gt; thanks</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:20:29.311900</ts>
    <user>Nova</user>
    <text>would explain why perfectly working code didn't work on a different computer</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:20:39.312100</ts>
    <user>Marlyn</user>
    <text>it’s actually tools.deps doing an infinite loop 100% cpu</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:20:54.312600</ts>
    <user>Ivana</user>
    <text>I see what you mean. As a last suggestion, maybe the main site could only link to a separate site not controlled by the same people of the main site to avoid this potential conflict of interest. I'm guessing you have considered many options already</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:21:29.313400</ts>
    <user>Marlyn</user>
    <text>&lt;@Nova&gt; you’re doing that for REBL?</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:21:56.314000</ts>
    <user>Nova</user>
    <text>&lt;@Marlyn&gt; yes, I was copying a rebl config to a different system</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:22:09.314400</ts>
    <user>Nova</user>
    <text>I'm aware the deps I pasted aren't the full reqs</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:22:21.314800</ts>
    <user>Nova</user>
    <text>it's just the minimum that cause the java process to hang</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:22:27.315000</ts>
    <user>Marlyn</user>
    <text>we have a fix for that now:
&lt;https://github.com/cognitect-labs/REBL-distro/issues/10#issuecomment-451173909&gt;</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:22:40.315300</ts>
    <user>Nova</user>
    <text>&lt;@Marlyn&gt; yes, that's what I'm using</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:56:35.315900</ts>
    <user>Jasmine</user>
    <text>yeah, definitely make sure you’re using latest clj (now 1.10.0.411)</text>
  </message>
  <message conversation_id="101">
    <ts>2019-01-08T10:58:22.316000</ts>
    <user>Jasmine</user>
    <text>if such a thing existed, would be happy to link to it :)</text>
  </message>
  <message conversation_id="102">
    <ts>2019-01-08T11:50:13.317100</ts>
    <user>Setsuko</user>
    <text>is there an alternative to doing `(merge-with (fn [x y] (or x y)) {:a nil} {:a "val"})` without having to create an anonymous function?</text>
  </message>
  <message conversation_id="102">
    <ts>2019-01-08T11:54:08.318000</ts>
    <user>Jasmine</user>
    <text>isn’t that just `(merge-with or ...)`</text>
  </message>
  <message conversation_id="102">
    <ts>2019-01-08T11:54:18.318200</ts>
    <user>Jasmine</user>
    <text>oh, macro</text>
  </message>
  <message conversation_id="102">
    <ts>2019-01-08T11:54:58.319100</ts>
    <user>Becki</user>
    <text>Any chance you can inhibit nils in your map to begin with?</text>
  </message>
  <message conversation_id="102">
    <ts>2019-01-08T11:55:45.319600</ts>
    <user>Jasmine</user>
    <text>I can’t think of an alternative that’s clearer (other than to avoid having nils in the first place)</text>
  </message>
  <message conversation_id="102">
    <ts>2019-01-08T12:00:17.320300</ts>
    <user>Lemuel</user>
    <text>`#(or %1 %2)` seems less noisy in this case, but I haven't got anything better</text>
  </message>
  <message conversation_id="103">
    <ts>2019-01-08T12:02:43.321000</ts>
    <user>Loria</user>
    <text>`(fn [&amp;amp; vs] (some identity vs))` for the variadic case?</text>
  </message>
  <message conversation_id="102">
    <ts>2019-01-08T12:03:09.321400</ts>
    <user>Loria</user>
    <text>`#(some identity %&amp;amp;)`</text>
  </message>
  <message conversation_id="103">
    <ts>2019-01-08T12:16:25.322100</ts>
    <user>Wanita</user>
    <text>Who could advice good material on integration testing on Clojure please?</text>
  </message>
  <message conversation_id="104">
    <ts>2019-01-08T12:34:22.323300</ts>
    <user>Onita</user>
    <text>hey guys, tearing my hair out over this error i’m getting … some dependency load is failing with `ExceptionInInitializerError`. this only happens when i run the program on our aws deployment. everything works fine locally. anyone seen this sort of thing before?</text>
  </message>
  <message conversation_id="103">
    <ts>2019-01-08T12:35:10.324100</ts>
    <user>Onita</user>
    <text>i’m sure the lack of deployment details probably isn’t very helpful, but any place to even start looking would be appreciated</text>
  </message>
  <message conversation_id="103">
    <ts>2019-01-08T12:37:24.325000</ts>
    <user>Onita</user>
    <text>the print statements i put in all of the dependencies all appear in the logs, so it looks like they’re all getting compiled, oddly enough</text>
  </message>
  <message conversation_id="103">
    <ts>2019-01-08T12:37:37.325300</ts>
    <user>Onita</user>
    <text>it’s just the encompassing `require` that seems to be failing somehow</text>
  </message>
  <message conversation_id="104">
    <ts>2019-01-08T12:49:06.325600</ts>
    <user>Rosaline</user>
    <text>are you aot compiling? or are any of your deps aot compiled?</text>
  </message>
  <message conversation_id="104">
    <ts>2019-01-08T12:52:32.326100</ts>
    <user>Rosaline</user>
    <text>what build tool/dependency manager/classpath builder are you using?</text>
  </message>
  <message conversation_id="105">
    <ts>2019-01-08T13:16:33.328500</ts>
    <user>Harry</user>
    <text>Not sure where to report this, but seems that Clojure 1.9 is missing from &lt;https://clojure.org/community/downloads_older&gt; ?
Spotted because &lt;https://clojure.org/community/downloads&gt; currently lists Clojure 1.10, but other page only goes up to 1.8.
If someone points me in the right direction I can raise a PR (.patch?) on this later, but if it's easy to fix now then go ahead</text>
  </message>
  <message conversation_id="105">
    <ts>2019-01-08T13:18:09.328600</ts>
    <user>Setsuko</user>
    <text>gotcha, thank you</text>
  </message>
  <message conversation_id="105">
    <ts>2019-01-08T13:19:34.329200</ts>
    <user>Jasmine</user>
    <text>that’s my bad, I’ll fix! Thanks for the catch…</text>
  </message>
  <message conversation_id="104">
    <ts>2019-01-08T14:42:58.329700</ts>
    <user>Latonya</user>
    <text>There are several PDF variations that print on 2 pages, if the text isn't too small for you to read, including a US letter color version at the "Download PDF version" near the top of the page.  Some other variants available within a couple of clicks through the "Source repo" link next to that.</text>
  </message>
  <message conversation_id="105">
    <ts>2019-01-08T14:54:40.330300</ts>
    <user>Jasmine</user>
    <text>If you haven’t completed the 2019 Clojure survey, now’s a great time - takes about 5 minutes. &lt;https://www.surveymonkey.com/r/clojure2019&gt;</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T15:00:59.331500</ts>
    <user>Jasmine</user>
    <text>I wasn’t sure what to expect with Java usage in the survey but the early results are … interesting</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T15:12:27.332100</ts>
    <user>Michale</user>
    <text>Care to share what’s interesting? :smile:</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T15:17:49.332900</ts>
    <user>Jasmine</user>
    <text>oh, just wasn’t sure how people are rolling with the whole Java 9/10/11 and LTS release schedule</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T15:18:08.333400</ts>
    <user>Jasmine</user>
    <text>I’ll refrain from details till we get through the whole survey period</text>
  </message>
  <message conversation_id="107">
    <ts>2019-01-08T15:32:30.333500</ts>
    <user>Ivana</user>
    <text>What do you think about a site that mines review data on "clojure" books via Amazon?  Would you consider that to be objective enough? The referral money for the links on the site could go back to the community (or for sponsoring the development of the site itself)</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T16:04:50.333700</ts>
    <user>Jasmine</user>
    <text>sounds like a fun project :)</text>
  </message>
  <message conversation_id="107">
    <ts>2019-01-08T18:51:59.334000</ts>
    <user>Mariela</user>
    <text>&lt;https://github.com/igrishaev/etaoin&gt; works quite nicely for me.</text>
  </message>
  <message conversation_id="108">
    <ts>2019-01-08T20:07:19.334600</ts>
    <user>Shonda</user>
    <text>Haha... "Common household products that can kill you instantly. More at 11" :joy:

Captured our interest for sure.</text>
  </message>
  <message conversation_id="108">
    <ts>2019-01-08T21:52:37.334800</ts>
    <user>Reiko</user>
    <text>Getting a maven error for that version string.</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:15:35.335000</ts>
    <user>Jasmine</user>
    <text>that’s not a Maven artifact</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:16:16.335200</ts>
    <user>Jasmine</user>
    <text>that’s the clj version (for the Mac brew installer or in the linux scripts at &lt;https://clojure.org/guides/getting_started&gt;)</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:16:56.335400</ts>
    <user>Reiko</user>
    <text>So the 1.10.0 artifact pulls the latest?</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:17:31.335600</ts>
    <user>Jasmine</user>
    <text>they are separate things</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:17:54.335800</ts>
    <user>Jasmine</user>
    <text>you need clojure (Maven artifact org.clojure/clojure, version 1.10.0)</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:18:21.336000</ts>
    <user>Jasmine</user>
    <text>and the clj tool (version 1.10.0.411), which you can install with the instructions on the link above</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:18:58.336200</ts>
    <user>Reiko</user>
    <text>I misread what you were saying. I'm unfamiliar with the clj tool</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:20:00.336400</ts>
    <user>Jasmine</user>
    <text>What are you trying to do?</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:20:40.336600</ts>
    <user>Jasmine</user>
    <text>This thread started with a question about how to use the `clj` tool for REBL with Java 11 and Clojure 1.10</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:21:53.336900</ts>
    <user>Reiko</user>
    <text>I just wanted to make sure I was on the latest version. I misread what you were talking about is all.</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:22:13.337100</ts>
    <user>Jasmine</user>
    <text>ok.  1.10.0 is the newest version of Clojure :)</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:23:22.337600</ts>
    <user>Reiko</user>
    <text>I am on Arch Linux and just install the `clojure` package. Now I'm just mainly curious if it is the latest version since it just prints out the Clojure version and not the version of the tool itself.</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:26:05.337800</ts>
    <user>Reiko</user>
    <text>Looks like it is on 1.10.0.408</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:46:04.338000</ts>
    <user>Jasmine</user>
    <text>I’m not sure what the Arch package is or who makes it, but that sounds like the clj tool. You should be able to type `clj` at the terminal to get a repl.</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:46:22.338200</ts>
    <user>Jasmine</user>
    <text>the version of `clj` is actually independent from the version of Clojure you use</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:46:41.338400</ts>
    <user>Jasmine</user>
    <text>any version of clj can use any version of the Clojure language</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:46:53.338600</ts>
    <user>Reiko</user>
    <text>&lt;https://www.archlinux.org/packages/community/any/clojure/&gt;</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:47:32.338800</ts>
    <user>Reiko</user>
    <text>I understand they are two different things so we're good on that</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:47:55.339000</ts>
    <user>Jasmine</user>
    <text>yeah, that’s just a variant of the linux installers listed at &lt;https://clojure.org/guides/getting_started&gt;</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:48:17.339200</ts>
    <user>Reiko</user>
    <text>Right and - usr/share/clojure/libexec/clojure-tools-1.10.0.408.jar</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:48:25.339400</ts>
    <user>Reiko</user>
    <text>So it's slightly behind</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:48:49.339600</ts>
    <user>Jasmine</user>
    <text>yeah, just one fairly esoteric bugfix in 411 vs 408 so you are highly unlikely to care</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-08T22:50:06.339800</ts>
    <user>Reiko</user>
    <text>Exactly</text>
  </message>
  <message conversation_id="109">
    <ts>2019-01-09T04:09:03.340200</ts>
    <user>Bernardo</user>
    <text>Still stuck in Java 7 Land at work... and
&lt;https://github.com/yetibot/yetibot/issues/804&gt;</text>
  </message>
  <message conversation_id="106">
    <ts>2019-01-09T04:35:31.340600</ts>
    <user>Epifania</user>
    <text>ah, indeed there is a PDF version! Missed that. Thanks a lot!</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:12:55.342300</ts>
    <user>Isa</user>
    <text>Did something change about Clojure memory consumption? Hello worlds still consume 256 MB? I am asking in the context of making N instances in environment like kubernetes. Small services can consume very fast too much memory.</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:18:33.342800</ts>
    <user>Tammera</user>
    <text>does it consume or request 256m of memory</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:21:52.344700</ts>
    <user>Tammera</user>
    <text>right, starting a repl here indeed has a initial heap size of 256 of which only 27 is in use. You could probably use the default memory flags of the JVM to change that</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:22:05.345000</ts>
    <user>Isa</user>
    <text>I was trying it a few years ago and my conclusion was Clojure wrapper for Java takes around 256 MB. I have no idea how it looks today.</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:32:43.346400</ts>
    <user>Tammera</user>
    <text>(I checked with VisualVM, the (initial) heapsize is indeed 256, but its not all used, you could probably further restrict that to 64)</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:34:08.347500</ts>
    <user>Tammera</user>
    <text>You seem to be able to pass `:jvm-opts` in your leiningen project file (similarly for `deps.edn`), but the exact correct flags for the JVM are beyond me for now.  Check the usual JVM resources</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:36:30.348100</ts>
    <user>Isa</user>
    <text>So how many MB are “lost” only to run Clojure app?</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:37:03.348600</ts>
    <user>Isa</user>
    <text>I feel confuse how it will behave in practice after such cut of memory</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:54:07.349700</ts>
    <user>Octavia</user>
    <text>JVM will use more memory than it requires by default. If you want to see how low you can go with memory, you have to limit the memory that is available to the jvm. For example by passing this `-Xmx64m`</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:55:55.349900</ts>
    <user>Octavia</user>
    <text>also, keep in mind that java 8 cannot determine the memory limits of a container reliably (it will in stead take the memory limit of  the host).</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:56:03.350100</ts>
    <user>Isa</user>
    <text>but then wouldn’t clojure app have bad performance or other downside?</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:56:12.350300</ts>
    <user>Octavia</user>
    <text>You can get past that with -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:56:24.350500</ts>
    <user>Octavia</user>
    <text>that is what you have to figure out</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:57:03.350700</ts>
    <user>Octavia</user>
    <text>all I wanted to say is that JVM will take more memory that strictly needed by default</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:57:04.350900</ts>
    <user>Isa</user>
    <text>heh ok thx :wink: Just curious what is people experience about memory consumption for services in clouds</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:57:24.351100</ts>
    <user>Octavia</user>
    <text>do you use java8?</text>
  </message>
  <message conversation_id="110">
    <ts>2019-01-09T05:57:44.351300</ts>
    <user>Isa</user>
    <text>now I use 11</text>
  </message>
  <message conversation_id="111">
    <ts>2019-01-09T06:19:17.352300</ts>
    <user>Patti</user>
    <text>If you wanted to write as many bytes as possible per second to a file on the file system on clojure-jvm, how would you do it?</text>
  </message>
  <message conversation_id="111">
    <ts>2019-01-09T06:21:49.352700</ts>
    <user>Isa</user>
    <text>too general question, but mainly I will buy fast hard drive :wink:</text>
  </message>
  <message conversation_id="112">
    <ts>2019-01-09T07:06:24.354800</ts>
    <user>Patti</user>
    <text>Let me specify then: Would you recommend any specific programmatic route? I've tried out &lt;http://clojure.java.io/output-stream|clojure.java.io/output-stream&gt; but it's not anywhere close what I get out of dd.</text>
  </message>
  <message conversation_id="112">
    <ts>2019-01-09T07:11:44.358100</ts>
    <user>Isa</user>
    <text>I never did performance research for such case. I don’t feel competent to answer. From general point of view I will try to read stream from memory if possible, if know size before save create X MB empty file and write to it (not really sure how and if it performance better, but I think it should), if you can use `dd` use it instead clojure library.</text>
  </message>
  <message conversation_id="112">
    <ts>2019-01-09T07:13:22.359200</ts>
    <user>Isa</user>
    <text>Maybe use bash input stream instead? But it shouldn’t be the case. I guess it is something about `dd` copy whole blocks which is something different than stream.</text>
  </message>
  <message conversation_id="112">
    <ts>2019-01-09T07:45:18.359600</ts>
    <user>Patti</user>
    <text>I'll probably look at java.nio next.</text>
  </message>
  <message conversation_id="113">
    <ts>2019-01-09T08:21:30.361100</ts>
    <user>Melynda</user>
    <text>How would I get the var from my function or macro argument? `(defmacro b [f] (var f))` throws `CompilerException java.lang.RuntimeException: Unable to resolve var: f in this context, compiling:(null:1:17)` and `defn` has the exact same behaviour.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T08:48:39.361900</ts>
    <user>Epifania</user>
    <text>Anyone know of any recent libraries similar to `pallet` and/or `re-ops`? Interested in managing infrastructure from Clojure directly</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T08:53:28.362000</ts>
    <user>Iva</user>
    <text>This is interesting. Looks like the symbol needs to resolve to a var at compile time not runtime.
Something like this works: ```(defmacro b [f] `(var ~f)) (b x)``` given that x is already a defined var.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T08:56:10.362300</ts>
    <user>Iva</user>
    <text>Both `defn` and `defmacro` are calling `var` special form during evaluation of a `defn` or `defmacro` definition (unless it is quoted).</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T08:57:16.362600</ts>
    <user>Iva</user>
    <text>This makes sense because vars represent identities that must not change even though the value that is pointed at by them may change at runtime.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T08:59:06.362900</ts>
    <user>Iva</user>
    <text>&lt;@Xiomara&gt; can probably give a better or more accurate explanation here.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:01:25.364300</ts>
    <user>Isa</user>
    <text>I don’t but I have this feeling I shouldn’t use Clojure as tool for DevOps. I was trying in the past, but… I had bad experience. Just  because of such solutions are not enough popular to be well supported and integrated.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:01:37.364600</ts>
    <user>Isa</user>
    <text>Better to learn good DevOps tool</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:01:40.364800</ts>
    <user>Isa</user>
    <text>IMO</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:05:59.367000</ts>
    <user>Isa</user>
    <text>Unfortunately I have this impression all open source cicd tools are just bad :slightly_smiling_face: &lt;https://concourse-ci.org&gt; is open source and very interesting solution - unfortunately it is doing a little to slow progress while paid competitors are much faster. &lt;https://codefresh.io&gt; and &lt;https://circleci.com&gt; are good paid alternative IMO if you have budget.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:07:15.368300</ts>
    <user>Isa</user>
    <text>&lt;@Epifania&gt; but doing this in Clojure is a bad idea, because of the reasons which I mentioned above - just my opinion</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:09:04.370300</ts>
    <user>Epifania</user>
    <text>&lt;@Isa&gt; yes, so I'm not interested in ci/cd really, but just to manage instances from different cloud hosters. I personally already know Terraform for managing infra, but this project is a bit different. In the end, the UI I'm building is backed by a Clojure application, that app should be able to create/destroy cloud instances for the user, so can't really ask them to just learn Terraform instead :slightly_smiling_face:</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:09:06.370400</ts>
    <user>Isa</user>
    <text>oh and gitlab cicd</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:10:29.371400</ts>
    <user>Epifania</user>
    <text>probably will end up with some common interface, then wrappers around existing cloud libs to support that interface in the end. Seems easy enough but wanted to avoid writing it from scratch</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:10:46.371800</ts>
    <user>Isa</user>
    <text>hmm I don’t know details to try help</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:11:06.372100</ts>
    <user>Isa</user>
    <text>It looks like you have some kind of not standard needs</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:12:08.373000</ts>
    <user>Epifania</user>
    <text>eh, actually quite simple. Just need to be able to create/destroy/stat(get metrics) from hosts. `pallet` looked really nice for exactly this but seems outdated. If interested, here is the project described: &lt;https://github.com/ipfs-shipyard/cube&gt;</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:13:37.374400</ts>
    <user>Isa</user>
    <text>I remember there was a library for Clojure to create pipelines in Clojure code. But what it does was draw UI. But I don’t remember the name and can’t find it in google.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:13:43.374600</ts>
    <user>Isa</user>
    <text>If it help in any way (from UI perspective)</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:14:46.375100</ts>
    <user>Isa</user>
    <text>&lt;https://github.com/flosell/lambdacd&gt; this one, but it doesn’t look like it is well supported</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:15:22.375500</ts>
    <user>Isa</user>
    <text>But idea was nice :slightly_smiling_face:</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:17:58.376200</ts>
    <user>Isa</user>
    <text>&lt;@Epifania&gt; as alternative maybe you can use kubernetes do deploy / destroy etc. ?</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:18:15.376500</ts>
    <user>Isa</user>
    <text>then you can use the same way for all cloud providers</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:18:47.377300</ts>
    <user>Epifania</user>
    <text>&lt;@Isa&gt; thanks, but kubernetes is the wrong abstraction, still need to create the kubernetes cluster somehow, and that's the missing piece I'm out after right now</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:19:29.378000</ts>
    <user>Isa</user>
    <text>ok so as another alternative you can run bash commands. Most of the popular providers let manage instances by bash commands</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:31:15.378600</ts>
    <user>Epifania</user>
    <text>&lt;@Isa&gt; well, bash is a horrible language. I'll probably end up going the route described in &lt;https://clojurians.slack.com/archives/C03S1KBA2/p1547043029371400&gt; (with http APIs)</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:32:50.379100</ts>
    <user>Isa</user>
    <text>You can run bash commands from Clojure. You don’t have to write bash scripts</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:37:04.380000</ts>
    <user>Epifania</user>
    <text>&lt;@Isa&gt; you mean with `clojure.java.shell`? In the end the bash commands you talk about end up doing http requests, so can just do the requests directly from clojure instead...</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:38:53.380600</ts>
    <user>Isa</user>
    <text>yes, but it could be easier than interop and update, just saying an alternative</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:42:09.383100</ts>
    <user>Toby</user>
    <text>&lt;@Epifania&gt; if you're serious about functional programming and linux, there's Nixos &lt;https://nixos.org/&gt;</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:42:59.385300</ts>
    <user>Epifania</user>
    <text>&lt;@Toby&gt; yeah, I looked at nixos (specifically nixops) before. Didn't find anything that would concretely help me, but I did get some useful ideas from reading and understanding it</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:43:02.385400</ts>
    <user>Isa</user>
    <text>&lt;@Toby&gt; Interesting, what is the real difference in practice</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:43:42.386600</ts>
    <user>Epifania</user>
    <text>nixpkg is basically a immutable package manager, which is super useful (especially for work machines). Do an upgrade and something broke? Just rollback the entire system to the previous version and stuff is working again. nixos is a operating system using nixpkgs and the immutable ideas</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:44:18.387900</ts>
    <user>Isa</user>
    <text>Hmm but considering for everything I use Docker images</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:45:10.388900</ts>
    <user>Epifania</user>
    <text>&lt;@Isa&gt; nixops is for the instance setup itself, not the application runtime you run on the instance.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:45:40.389600</ts>
    <user>Epifania</user>
    <text>to run your images, you need a host + docker daemon somewhere. Nixops would help you operate that host + daemon</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:45:45.389800</ts>
    <user>Isa</user>
    <text>I mean with docker images there is no issues about rollback / update</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:46:12.390200</ts>
    <user>Isa</user>
    <text>Just thinking if NixOS can has benefits for me</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:49:27.392100</ts>
    <user>Toby</user>
    <text>&lt;@Isa&gt; nixpkgs can be used for building package ie your own app, due to its immutability even your app is reproducible (except database and file system)</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:50:03.392700</ts>
    <user>Toby</user>
    <text>anyway, it's a lot to learn, so you may consider cost vs benefit</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:50:58.393400</ts>
    <user>Isa</user>
    <text>Well in this case I am thinking about it more in the sense to be early adopter :wink: Just curious what they did, but probably you are right.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:54:05.393900</ts>
    <user>Epifania</user>
    <text>personally I hope nix (the package manager) takes over the world. Seems to be the only package manager who does things correctly.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:54:52.394100</ts>
    <user>Toby</user>
    <text>the same here :slightly_smiling_face:</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:56:04.394500</ts>
    <user>Isa</user>
    <text>True, but I am afraid it is good for developers, not for common people :wink:</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:56:36.394800</ts>
    <user>Epifania</user>
    <text>eh, common people don't use package managers anyways :slightly_smiling_face:</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T09:56:56.395100</ts>
    <user>Isa</user>
    <text>that is why it doesn’t matter for most of the people making it hard to became popular :wink:</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T10:34:13.395300</ts>
    <user>Reiko</user>
    <text>I wouldn't compare performance to dd.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T10:42:27.397600</ts>
    <user>Patti</user>
    <text>Surely it can be popular within certain populations. As long as we are speaking package managers it makes sense to speak of popularity with users of package managers.</text>
  </message>
  <message conversation_id="114">
    <ts>2019-01-09T11:00:59.397700</ts>
    <user>Xiomara</user>
    <text>`var` is a special form - it expects a symbol literal that corresponds with a var.</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T11:59:22.398800</ts>
    <user>Isa</user>
    <text>&lt;@Reiko&gt; did you finish research about &lt;https://github.com/juxt/yada&gt; ? I am wonder if it is worth to switch to use it</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:00:07.399000</ts>
    <user>Reiko</user>
    <text>Yeah, I'm using it right now. My site is super basic, but it's been a really nice experience and the amount of code I had to write was tiny</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:00:42.399300</ts>
    <user>Isa</user>
    <text>Is it public repo?</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:00:58.399500</ts>
    <user>Reiko</user>
    <text>My site? No</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:01:25.399700</ts>
    <user>Isa</user>
    <text>How did you find out this repo exist?</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:02:17.399900</ts>
    <user>Reiko</user>
    <text>What?</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:03:31.400100</ts>
    <user>Isa</user>
    <text>How did you get info about &lt;https://github.com/juxt/yada&gt; ?</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:04:17.400800</ts>
    <user>Vicente</user>
    <text>I have a question. How can I get arglist from `fn`
``` clojure
(defn func1
  ([a])
  ([a b]))

(:arglists (meta (var func1)))
;;=&amp;gt; ([a] [a b])


(def func2 (fn
             ([a] (inc a))
             ([a b] (+ a b))))

(????? func2)
;; =&amp;gt; ([a] [a b])
```</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:04:27.400900</ts>
    <user>Isa</user>
    <text>Asking because maybe I should start read some blog or something, because I miss that info</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:05:06.401200</ts>
    <user>Harris</user>
    <text>you can't</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:05:24.401500</ts>
    <user>Vicente</user>
    <text>even using reflection?</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:07:02.402100</ts>
    <user>Harris</user>
    <text>you could reflect on the class backing that anonymous function and look for the `invoke` methods, and you'd get the arg numbers</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:07:05.402300</ts>
    <user>Harris</user>
    <text>but blargh</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:07:12.402500</ts>
    <user>Harris</user>
    <text>why do you need this?</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:08:18.403000</ts>
    <user>Vicente</user>
    <text>I want to call that function, using map.
(do-someting func1 {:a 1 :stuck_out_tongue: 2})</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:08:30.403300</ts>
    <user>Vicente</user>
    <text>```
(do-someting func1 {:a 1 :b 2})
```</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:09:55.403400</ts>
    <user>Reiko</user>
    <text>Oh. I saw it in my research of popular libraries for creating an API server. It was mentioned in multiple places so I just read the docs at &lt;https://juxt.pro/yada/manual/index.html&gt;</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:11:34.403800</ts>
    <user>Rosaline</user>
    <text>&lt;https://gist.github.com/hiredman/71b71e4e07e7666fe1b9def9a476c765#file-lrun-clj-L11-L13&gt;</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:12:15.404100</ts>
    <user>Reiko</user>
    <text>Slack is kinda weird about triple backticks. To actually get Clojure syntax highlighting you need to add a code snippet with the '+' button.</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:12:24.404500</ts>
    <user>Becki</user>
    <text>the doc-string for `sort-by` doesn't mention that it is stable but I thought i remember hearing this? Am i mistaken?</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:25:18.405500</ts>
    <user>Tonya</user>
    <text>&lt;https://clojuredocs.org/clojure.core/sort-by&gt;</text>
  </message>
  <message conversation_id="116">
    <ts>2019-01-09T12:25:29.405900</ts>
    <user>Tonya</user>
    <text>"Guaranteed to be stable"</text>
  </message>
  <message conversation_id="116">
    <ts>2019-01-09T12:25:33.406100</ts>
    <user>Tonya</user>
    <text>&lt;@Becki&gt;</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:25:53.406400</ts>
    <user>Becki</user>
    <text>thanks. wanted to make sure i wasn't just going on rumor</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:26:18.406800</ts>
    <user>Becki</user>
    <text>oh. i'm in cljs. and that is conspicuously absent from the docstring</text>
  </message>
  <message conversation_id="116">
    <ts>2019-01-09T12:30:59.407300</ts>
    <user>Jasmine</user>
    <text>that was added in clojure at some point a couple releases ago, maybe corresponding needs to be verified and added in cljs</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:31:41.408000</ts>
    <user>Becki</user>
    <text>yeah. just put in &lt;#C07UQ678E|cljs-dev&gt;. It's a comment from Stu Halloway from 8 years  ago that it is stable but the doc string purposefully doesn't promise it</text>
  </message>
  <message conversation_id="117">
    <ts>2019-01-09T12:45:44.408600</ts>
    <user>Reiko</user>
    <text>Why not? Is it stable or not?</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:47:18.408900</ts>
    <user>Becki</user>
    <text>it's stable _right now_. But this is asking if cljs will promise this for all future versions essentially</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:47:57.409100</ts>
    <user>Reiko</user>
    <text>So i'd think that would be the better documentation than being ambiguous</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:51:07.409400</ts>
    <user>Becki</user>
    <text>it's not ambiguous i suppose. it doesn't promise stability even though it has it. it just seems like this is something that it can promise though is all</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:55:55.409600</ts>
    <user>Reiko</user>
    <text>It's ambiguous by not stating. I'm suggesting it state exactly what you said - currently stable, but not guaranteed in future versions</text>
  </message>
  <message conversation_id="115">
    <ts>2019-01-09T12:56:37.409800</ts>
    <user>Reiko</user>
    <text>Then update the documentation if that changes...</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:07:28.410300</ts>
    <user>Isa</user>
    <text>&lt;https://github.com/juxt/edge&gt; this could be interesting place with best practices</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:07:54.410700</ts>
    <user>Isa</user>
    <text>at least examples :slightly_smiling_face:</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:11:13.410900</ts>
    <user>Celestine</user>
    <text>If the docstring is updated, it should be to just add "Not guaranteed to be stable" -- saying it's stable _now but might change in the future_ isn't useful, IMO.</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:12:34.411100</ts>
    <user>Celestine</user>
    <text>If a docstring says "property X is true but might change", folks can't rely on property X remaining true so either they rely on it today (and might have their code broken in subtle/unexpected ways) or they explicitly don't rely on it at all (even tho' it may never actually change).</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:13:15.411300</ts>
    <user>Celestine</user>
    <text>It's better to either explicitly guarantee property X or explicitly not guarantee it.</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:13:32.411500</ts>
    <user>Becki</user>
    <text>agreed. although i'm hoping that the 8 years of stable sort means it will just be acknowledged as a promise. But sean that's a very good comment you should leave on the ticket. Mark it as not guaranteed stable or guaranteed stable to remove confusion?</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:16:48.411700</ts>
    <user>Celestine</user>
    <text>What ticket?</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:17:01.411900</ts>
    <user>Becki</user>
    <text>Just ran to lunch. New cljs one</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:21:12.412100</ts>
    <user>Becki</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJS-3035&gt;</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T13:46:44.412800</ts>
    <user>Harriet</user>
    <text>hey peeps, any advice which library to use with Spark ?</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:47:17.413200</ts>
    <user>Harriet</user>
    <text>both flambo and sparkling haven't done any commits the last 6+ months..</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:48:54.413400</ts>
    <user>Celestine</user>
    <text>Comment added :slightly_smiling_face:</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T13:57:52.413600</ts>
    <user>Becki</user>
    <text>appreciate your experience and sharing it :slightly_smiling_face:</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:01:04.413800</ts>
    <user>Reiko</user>
    <text>I don't agree with that as "not guaranteed to be stable" is ambiguous. It is not stating that is or isn't stable, which was Dan's original question. If the documentation were to state that it is "Stable, but not guaranteed" now it's not ambiguous.</text>
  </message>
  <message conversation_id="118">
    <ts>2019-01-09T14:02:14.414000</ts>
    <user>Becki</user>
    <text>all i'm looking for is what i can bank on for the future. if it is reasonable to promise stability I'm good. If there is no commitment to stability I need to find another solution regardless of current behavior</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:03:03.414200</ts>
    <user>Reiko</user>
    <text>I think it would be helpful if we had an explanation on why it may not be stable in the future</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:03:21.414400</ts>
    <user>Celestine</user>
    <text>I'm answering this as someone who spent nearly a decade working on ANSI/ISO standards committees. Saying "Stable, but not guaranteed" is not useful. Saying "Not guaranteed to be stable" provides more useful information.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:04:15.414600</ts>
    <user>Celestine</user>
    <text>(because it makes it clear that the stability of the current implementation is just an implementation detail and not part of the contract)</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:04:44.414800</ts>
    <user>Reiko</user>
    <text>Please explain to me how something that is ambiguous is more useful than something that is not ambiguous</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:06:12.415000</ts>
    <user>Reiko</user>
    <text>The documentation should reflect the current behavior. If that behavior changes then the documentation should change with it. If it is stable now, then it should state that it is stable. If it becomes unstable then the documentation should change with that.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:07:14.415200</ts>
    <user>Reiko</user>
    <text>Behavior in software changes. I don't subscribe to the idea that the documentation should try to predict the future.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:09:17.415400</ts>
    <user>Celestine</user>
    <text>Stability of a sort is either part of the contract or part of the implementation. You need to know whether it is part of the contract. Either it is intended to be stable or it is not. That is true across Clojure's APIs in general -- if the implementation happens to provide "more" than the docstring, what's in the docstring is all you can rely on.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:09:56.415600</ts>
    <user>Celestine</user>
    <text>In this case, the docstring provides no guidance (although it _does not guarantee stability_ today so it's actually just fine as it is).</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:10:00.415800</ts>
    <user>Reiko</user>
    <text>That may or may not be meaningful. Clojure libraries have a tendency to be completed for their stated objective(s) and haven't needed to change anything since then.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:11:11.416000</ts>
    <user>Celestine</user>
    <text>If a Clojure docstring provides a guarantee, that is considered when changes are made in the future -- because the core team have a principle of not breaking guaranteed behavior.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:11:52.416200</ts>
    <user>Celestine</user>
    <text>If the docstring provides no guarantee, behavior _can_ change without needing to update the documentation (since the behavior was never guaranteed).</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:12:36.416400</ts>
    <user>Celestine</user>
    <text>It's a courtesy for the docstring to be explicit about not guaranteeing a specific behavior. That's kind of Clojure's basic position on a lot of things.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:21:29.416800</ts>
    <user>Harriet</user>
    <text>I am aware of that. However in this specific case Spark is already at 2.4 and the libs are in 2.1</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:21:48.417000</ts>
    <user>Reiko</user>
    <text>&lt;https://clojurians.slack.com/archives/C03S1KBA2/p1547055059407300&gt;</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:27:21.417900</ts>
    <user>Reiko</user>
    <text>Documentation of goog.array/stableSort:
"Sorts the specified array into ascending order in a stable way. If no opt_compareFn is specified, elements are compared using goog.array.defaultCompare, which compares the elements using the built in &amp;lt; and &amp;gt; operators. This will produce the expected behavior for homogeneous arrays of String(s) and Number(s)."</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:28:04.418500</ts>
    <user>Tammera</user>
    <text>huh, googles impl of stableSort is actually quite interesting. Expected an actual stable sort algorithm, but instead they change the comparator to also take index into account.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:31:05.419600</ts>
    <user>Tammera</user>
    <text>So it gains `2n` extra time complexity for looping the array twice to add/remove indices, and `n` memory for the array of value/index pairs that is actually sorted</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:31:12.419700</ts>
    <user>Celestine</user>
    <text>Right, and if the decision is to _guarantee a stable sort_ -- as the Clojure docstring does -- then updating the (ClojureScript) docstring to make that same guarantee _about current *and* future behavior_ would be the correct thing to do.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:31:51.419900</ts>
    <user>Celestine</user>
    <text>You're missing my point that if there is no intended guarantee of that behavior, then the current docstring is accurate: it _makes no guarantee_ about stability.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:32:47.420200</ts>
    <user>Celestine</user>
    <text>Clojure's docstrings are generally very careful about what they do and don't guarantee. If they guarantee something, it is a contract that can be relied on and will not break in the future (because Rich says breakage is bad).</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:33:21.420400</ts>
    <user>Celestine</user>
    <text>If a docstring does not guarantee a specific behavior, then that behavior can change (because it wasn't part of the contract).</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:33:37.420600</ts>
    <user>Celestine</user>
    <text>Does that make what I'm saying clearer?</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:36:17.420800</ts>
    <user>Tammera</user>
    <text>(Maybe put it like this, that it _uses_ stable sort is an implementation detail, it could as well use quicksort, which is not stable, but that wouldn’t matter as the stability is not required by the contract between caller (you calling sort) and the callee (cljs’s sort))</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:42:36.421300</ts>
    <user>Becki</user>
    <text>that's an interesting find &lt;@Tammera&gt;</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:44:19.422500</ts>
    <user>Tammera</user>
    <text>I guess that calling into v8s default sort algorithm is so much faster, that implementing a stability guarantee in javascript is more performant than implementing a complete stable sort alg.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:46:57.423700</ts>
    <user>Tammera</user>
    <text>Or; it was easiest. But I am not yet prepared to accept that google engineers take shortcuts too.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:47:00.423900</ts>
    <user>Becki</user>
    <text>yes. it's using the built in sort on arr which probably changes algo depending on size.  i've heard of quick sorts bottoming out into insertion sort at small n, etc</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:47:28.424600</ts>
    <user>Becki</user>
    <text>(not saying that is what is happening here but could be the reason not to duplicate that kind of stuff)</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:47:32.424700</ts>
    <user>Tammera</user>
    <text>yeah, lists of less than 10 are actually instertion-sorted</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:51:25.424800</ts>
    <user>Tammera</user>
    <text>Okay, I was quite wrong: &lt;https://v8.dev/blog/array-sort&gt;</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:51:35.425100</ts>
    <user>Tammera</user>
    <text>Sorting in javascript is a complete can of worms</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:54:20.425300</ts>
    <user>Reiko</user>
    <text>I've understood what you're saying this whole time; I just don't agree with it. I don't believe my point is being understood, which is that the Clojure version is guaranteed stable and there is no reason that can't be true of the ClojureScript version as the function it is using is guaranteed to be stable. The goog.array library could disappear off of the face of the Earth and we'd still be fine because we could recreate the implementation as it is open source and relies only on essential JS operations that aren't going to change. The fact the CLJS code hasn't changed in 8 years should be a testament to that.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:57:05.425500</ts>
    <user>Reiko</user>
    <text>Just O(n) extra: "Runtime: Same as Array.prototype.sort, plus an additional O(n) overhead of copying the array twice."</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T14:58:27.425700</ts>
    <user>Tammera</user>
    <text>right, `O(n)` and `O(2n)` are the same complexity class: `O(n)`, it really loops over the array twice</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T15:00:48.425900</ts>
    <user>Celestine</user>
    <text>You're still missing the point: the question isn't how it is implemented but _whether the intent of the design_ is for a stable sort or not on cljs.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T15:09:16.426100</ts>
    <user>Celestine</user>
    <text>If David Nolen (or whoever can make that decision) says "Yeah, we intended it to guarantee stability" then there's no question: the docstring should be updated to reflect that design intention as a guarantee -- and any future implementation changes should reflect that. If he/they say "Nope, we are not guaranteeing that for cljs" then the current docstring is correct, but I think it would be a courtesy to update the docstring to reflect that stability is (explicitly) not guaranteed.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T15:14:59.426300</ts>
    <user>Reiko</user>
    <text>Please stop accusing me of missing the point when I've stated I just don't agree with what you're saying. I just referred to that indirectly in my above message. Obviously we still need to check with the powers that be what their intentions are. I stated that, _objectively_, there isn't any reason it couldn't be guaranteed given the expected and current functionality. I am not speaking for the powers that be as that is not my place.</text>
  </message>
  <message conversation_id="119">
    <ts>2019-01-09T15:17:10.426600</ts>
    <user>Reiko</user>
    <text>That being said it also begs the question as the implementation that has survived 8 years uses an, _explicitly_, stable sort function so I would think it should be pretty clear what the intention was when that code was written as they could have used any other sort function, but deliberately chose that one.</text>
  </message>
  <message conversation_id="120">
    <ts>2019-01-09T15:31:27.429100</ts>
    <user>Marcelle</user>
    <text>Hi all! I've built a small tool (based on `rewrite-clj`) that allows to search for a certain values in Clojure files (like `grep`)

Idea is that one can try it from command line in seconds (no need to install): &lt;https://github.com/andrewboltachev/fo0001#clojure-value-finder-like-grep&gt;

Not sure if alternatives exist. Feedback appreciated :slightly_smiling_face:</text>
  </message>
  <message conversation_id="120">
    <ts>2019-01-09T15:37:49.429400</ts>
    <user>Jasmine</user>
    <text>&lt;https://twitter.com/djleeds/status/1082838230662348800&gt;</text>
  </message>
  <message conversation_id="120">
    <ts>2019-01-09T15:37:58.429800</ts>
    <user>Jasmine</user>
    <text>someone go make that for Clojure! :)</text>
  </message>
  <message conversation_id="120">
    <ts>2019-01-09T15:47:27.430300</ts>
    <user>Tammera</user>
    <text>It does exist for java streams: &lt;https://plugins.jetbrains.com/plugin/9696-java-stream-debugger&gt;</text>
  </message>
  <message conversation_id="121">
    <ts>2019-01-09T16:37:36.430800</ts>
    <user>Gilberto</user>
    <text>cc &lt;@Alison&gt; :slightly_smiling_face:</text>
  </message>
  <message conversation_id="122">
    <ts>2019-01-09T16:44:27.431300</ts>
    <user>Alison</user>
    <text>Not for Clojure yet, but it’s on some list I have somewhere.</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:26:28.433500</ts>
    <user>Aleshia</user>
    <text>Anybody around?</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:26:43.434300</ts>
    <user>Mandy</user>
    <text>Can someone ban this guy (Tariq Nasheed)</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:26:49.434900</ts>
    <user>Tabitha</user>
    <text>lol 3...2...1...</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:26:54.435900</ts>
    <user>Klara</user>
    <text>yeah, it’s annoying</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:27:00.436800</ts>
    <user>Aleshia</user>
    <text>Admins know about it</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:27:02.436900</ts>
    <user>Alessandra</user>
    <text>this guy being &lt;@Celinda&gt;</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:27:31.437700</ts>
    <user>Marlyn</user>
    <text>I thought at-everyone is disabled</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:27:54.438000</ts>
    <user>Becki</user>
    <text>yeah i was surprised sa well</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:28:57.439300</ts>
    <user>Sanjuanita</user>
    <text>Stop!</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:29:00.439400</ts>
    <user>Willetta</user>
    <text>dude!!!!! dont do that!</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:29:24.440400</ts>
    <user>Marcell</user>
    <text>Last time this happened, they were impersonating an existing user, too.</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:29:39.440700</ts>
    <user>Klara</user>
    <text>whoa</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:29:42.441200</ts>
    <user>Celinda</user>
    <text>racists</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:29:45.441500</ts>
    <user>Onita</user>
    <text>that has to be the most confusing meme i’ve ever seen</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:29:47.441600</ts>
    <user>Klara</user>
    <text>I didn’t type that</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:29:50.441700</ts>
    <user>Celinda</user>
    <text>white supremacist slack</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:30:11.442200</ts>
    <user>Pam</user>
    <text>how do you block someone?</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:30:12.442300</ts>
    <user>Marcell</user>
    <text>just like that</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:30:20.442900</ts>
    <user>Marcell</user>
    <text>UFA3W5N4U is the account that posted</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:30:57.443600</ts>
    <user>Marcell</user>
    <text>The spammers probably found a way to bypass it</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:31:40.444800</ts>
    <user>Marcell</user>
    <text>Given they already have robust impersonation utilities.</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:31:41.445000</ts>
    <user>Jasmine</user>
    <text>fyi, /collapse can be used to collapse all media in the room</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:31:49.445200</ts>
    <user>Angla</user>
    <text>maybe this the catalyst for the clojure community moving on from slack?</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:31:56.445400</ts>
    <user>Marlyn</user>
    <text>and btw: do not download any attachments posted</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:32:39.446200</ts>
    <user>Sebrina</user>
    <text>Perhaps that’s how they’ve been able to impersonate?</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:34:20.446500</ts>
    <user>Klara</user>
    <text>funky</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:37:04.449300</ts>
    <user>Marcell</user>
    <text>Turn off inline image display in your preferences, too; it's not often needed in this slack, and better safe than sorry</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:38:06.450200</ts>
    <user>Willetta</user>
    <text>Preferences &amp;gt; Messeges &amp;amp; Media</text>
  </message>
  <message conversation_id="124">
    <ts>2019-01-09T17:44:56.452700</ts>
    <user>Sebrina</user>
    <text>:sweat:</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T17:46:41.454100</ts>
    <user>Celestine</user>
    <text>User deactivated. We're working on deleting the messages wherever they got posted. Feel free to post in &lt;#C04V84U7G|slack-help&gt; with links to ones we haven't gotten to yet. And, yes, these bots are able to get around the restrictions that Slack lets us put in place to prevent non-admins using @ everyone/channel/here...</text>
  </message>
  <message conversation_id="125">
    <ts>2019-01-09T17:55:58.454900</ts>
    <user>Nadia</user>
    <text>yeesh, client-side permissions enforcement?</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T18:00:53.455100</ts>
    <user>Hattie</user>
    <text>Huh, the above comments from "Tariq" are interesting. That makes it seem like either a) it was a human troll rather than a bot, or b) the bot watches for its (impersonated) name and then says the stuff above. Bit more sophisticated than I expected.</text>
  </message>
  <message conversation_id="124">
    <ts>2019-01-09T18:05:20.456600</ts>
    <user>Celestine</user>
    <text>Confirmed via an article one of the other members here sent me (thank you &lt;@Sebrina&gt;!). You can hack the permission client-side in JS and then spam with immunity it seems. Slack have known about it for two and a half years and confirmed a year and a half ago that they won't fix it. Sigh.</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T18:06:07.457700</ts>
    <user>Becki</user>
    <text>Also if you remap caps lock to control the caps lock button still makes the text box take focus rather than copying :disappointed:</text>
  </message>
  <message conversation_id="124">
    <ts>2019-01-09T18:06:10.457900</ts>
    <user>Celestine</user>
    <text>Probably the only thing we can do at this point is to change the auto-inviter to require moderation somehow.</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T18:09:33.458400</ts>
    <user>Marcell</user>
    <text>It's definitely a human at the wheel, there were direct back-and-forths in the original attack as well</text>
  </message>
  <message conversation_id="123">
    <ts>2019-01-09T19:49:42.460300</ts>
    <user>Charlette</user>
    <text>that sounds like a rabbithole</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-09T20:01:31.462000</ts>
    <user>Larissa</user>
    <text>Hello all, I´ve got this from result `#object[java.util.Optional 0x5c2aa319 Optional[2019-01-09T23:01-02:00[America/Sao_Paulo]]]`, what is that?</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-09T20:02:06.462400</ts>
    <user>Larissa</user>
    <text>is that any way to convert to `ZonedDateTime`?</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-09T20:02:48.462800</ts>
    <user>Dann</user>
    <text>it has a `.get` method &lt;https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html&gt;</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-09T20:03:25.463500</ts>
    <user>Dann</user>
    <text>in general, if you get an object that isn't familiar (especially a java.* object) the javadoc is going to be your best bet</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-09T20:04:46.464100</ts>
    <user>Dann</user>
    <text>you might also want to use one of the methods there to do some default action of it's empty, rather than throwing an exception as get will</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-09T20:05:41.464400</ts>
    <user>Larissa</user>
    <text>oh, I got it, thanks</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-09T20:06:10.464700</ts>
    <user>Larissa</user>
    <text>`.get` did the job</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-09T20:06:39.465000</ts>
    <user>Dann</user>
    <text>some examples of playing with it in a repl: ```(ins)user=&amp;gt; (java.util.Optional/of 1)
#object[java.util.Optional 0x319bc845 "Optional[1]"]
(ins)user=&amp;gt; (.get *1)
1
(ins)user=&amp;gt; (java.util.Optional/of nil)
NullPointerException   java.util.Objects.requireNonNull (Objects.java:203)
(ins)user=&amp;gt; (java.util.Optional/ofNullable nil)
#object[java.util.Optional 0xe84a8e1 "Optional.empty"]
(cmd)user=&amp;gt; (.get *1)
NoSuchElementException No value present  java.util.Optional.get (Optional.java:135)
```</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-09T20:07:52.465300</ts>
    <user>Dann</user>
    <text>using a default value instead of throwing: ```
cmd)user=&amp;gt; (java.util.Optional/ofNullable nil)
#object[java.util.Optional 0xe84a8e1 "Optional.empty"]
(ins)user=&amp;gt; (.orElse *1 0)
0
(ins)user=&amp;gt; (java.util.Optional/of 1)
#object[java.util.Optional 0x23d1e5d0 "Optional[1]"]
(cmd)user=&amp;gt; (.orElse *1 0)
1```</text>
  </message>
  <message conversation_id="127">
    <ts>2019-01-10T01:59:44.465800</ts>
    <user>Iva</user>
    <text>&lt;@Melynda&gt; I am interested in knowing the exact use case here. What are you trying to accomplish with a macro like that?</text>
  </message>
  <message conversation_id="126">
    <ts>2019-01-10T02:34:51.466000</ts>
    <user>Karren</user>
    <text>not that fancy but debux works for me in those cases: &lt;https://github.com/philoskim/debux#81-dbg-inside-dbgn-or-vice-versa&gt;</text>
  </message>
  <message conversation_id="128">
    <ts>2019-01-10T02:47:03.466300</ts>
    <user>Reiko</user>
    <text>Got everything working now with yada. Final code is nice and small.</text>
  </message>
  <message conversation_id="127">
    <ts>2019-01-10T06:56:40.467600</ts>
    <user>Melynda</user>
    <text>&lt;@Iva&gt; That macro is an MWE. The end goal is to retrieve specs with `s/get-spec`, which requires a var as argument. I was wondering how to get that var.</text>
  </message>
  <message conversation_id="128">
    <ts>2019-01-10T08:32:25.468800</ts>
    <user>Ivana</user>
    <text>I see an exotic regression between clojure 1.8 and newer versions. From 1.9 onwards this is now invalidated by clojure spec ```
(let [f (fn [] "hi")]
  (eval `(defn foo [] (~f))))``` In older versions this was possible</text>
  </message>
  <message conversation_id="128">
    <ts>2019-01-10T08:33:08.469200</ts>
    <user>Ivana</user>
    <text>Is this a bug or a feature? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="128">
    <ts>2019-01-10T08:33:45.469500</ts>
    <user>Harris</user>
    <text>the problem has got nothing to do with the fn</text>
  </message>
  <message conversation_id="128">
    <ts>2019-01-10T08:33:55.469800</ts>
    <user>Harris</user>
    <text>your `foo` is namespace qualified</text>
  </message>
  <message conversation_id="128">
    <ts>2019-01-10T08:34:00.470000</ts>
    <user>Harris</user>
    <text>should be `(defn ~'foo`</text>
  </message>
  <message conversation_id="128">
    <ts>2019-01-10T08:34:15.470400</ts>
    <user>Ivana</user>
    <text>ah sharp</text>
  </message>
  <message conversation_id="128">
    <ts>2019-01-10T08:34:19.470500</ts>
    <user>Harris</user>
    <text>and the fact that it's rejected by spec now is indeed a feature</text>
  </message>
  <message conversation_id="128">
    <ts>2019-01-10T08:35:00.470900</ts>
    <user>Ivana</user>
    <text>Thanks, sorry for the noise</text>
  </message>
  <message conversation_id="129">
    <ts>2019-01-10T11:07:19.472400</ts>
    <user>Zada</user>
    <text>Is there a channel on the slack for telling people that hey, I just published a library on Clojars in case anyone is looking for something similar?</text>
  </message>
  <message conversation_id="129">
    <ts>2019-01-10T11:08:22.472700</ts>
    <user>Hilary</user>
    <text>&lt;#C06MAR553|announcements&gt;</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:48:18.473400</ts>
    <user>Clarine</user>
    <text>is there a way to fully qualify symbols in a data structure that’s not a literal? e.g.:
``` 
(qualify (clojure.edn/read-string  "{str #{:clj :cljs}}" ))
```</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:51:54.473800</ts>
    <user>Harris</user>
    <text>what is the result you want out of that?</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:52:05.474100</ts>
    <user>Clarine</user>
    <text>`{clojure.core/str ....}`</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:52:16.474400</ts>
    <user>Harris</user>
    <text>you can use `clojure.tools.reader/syntax-quote`</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:53:04.474800</ts>
    <user>Harris</user>
    <text>although you probably want the function equivalent</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:53:09.475200</ts>
    <user>Fredda</user>
    <text>perhaps in conjunction with this &lt;https://stackoverflow.com/a/43722784/10667553&gt;</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:53:16.475600</ts>
    <user>Harris</user>
    <text>&lt;https://github.com/clojure/tools.reader/blob/master/src/main/clojure/clojure/tools/reader.clj#L1005-L1006&gt;</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:53:31.475900</ts>
    <user>Marlyn</user>
    <text>&lt;@Clarine&gt; &lt;@Harris&gt; &lt;https://github.com/clojure/spec-alpha2/blob/639767ebe1491536ec7404d8b478628ecfe9200b/src/main/clojure/clojure/spec_alpha2.clj#L315-L326&gt;</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:54:04.476600</ts>
    <user>Marlyn</user>
    <text>`explicate` is a great word &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:54:04.476700</ts>
    <user>Harris</user>
    <text>that won't respect quoting</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:54:13.477000</ts>
    <user>Harris</user>
    <text>but if you don't care it's fine</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:55:25.477300</ts>
    <user>Harris</user>
    <text>if you're using edn you probably don't anyway</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:55:32.477500</ts>
    <user>Clarine</user>
    <text>yeah, I’m reading from EDN</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T11:59:50.478000</ts>
    <user>Clarine</user>
    <text>full example for those interested:
``` 
(defn- explicate-1 [a-ns form]
  (walk/postwalk
   #(cond
      (keyword? %) %
      (symbol? %) (or (-&amp;gt;&amp;gt; % (ns-resolve a-ns) symbol) %)
      :else %)
   form))

(comment
  (explicate-1 'clojure.core (clojure.edn/read-string "{str #{:clj :cljs}}"))
  ;; =&amp;gt; #:clojure.core{str #{:clj :cljs}}
  )
```</text>
  </message>
  <message conversation_id="130">
    <ts>2019-01-10T12:05:39.478800</ts>
    <user>Clarine</user>
    <text>thanks all</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:00:41.481200</ts>
    <user>Sharika</user>
    <text>Hey all, can anyone suggest how I can twist `clj-http's` arm into sending such as request
```
curl -i -XPOST -H "Content-Type:application/octet-stream" -H "Authorization: Bearer blah" --data-binary "@/Users/me/Downloads/an-image.png" &lt;https://upload.contentful.com/spaces/space-id/uploads&gt;
```
I've tried
```
{:body         (IOUtils/toByteArray (io/input-stream "Users/me/Downloads/an-image.png")
``` but get a 404 from the server</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:01:33.482000</ts>
    <user>Rosaline</user>
    <text>and what was the rest of your clj-http call?</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:01:46.482300</ts>
    <user>Dann</user>
    <text>are you sure you're hitting the right endpoint with the right http method?</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:02:16.483200</ts>
    <user>Dann</user>
    <text>also I'd be surprised if clj-http couldn't just use an input-stream directly</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:02:25.483500</ts>
    <user>Rosaline</user>
    <text>404 seems unlikely to be the result of the body content</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:02:41.483900</ts>
    <user>Sharika</user>
    <text>Yeah, I believe so, I've tried the same ensuring same url with IntelliJ's http client without specifying the actual binary data, and again receive a 404, so I believe that's the servers behaviour.</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:02:53.484300</ts>
    <user>Sharika</user>
    <text>Full request coming after I've stripped secrets :wink:</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:03:20.484800</ts>
    <user>Dann</user>
    <text>are you sure you're doing a POST?</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:03:46.485000</ts>
    <user>Sharika</user>
    <text>```(-&amp;gt;&amp;gt; (client/post
       (str
         "&lt;https://upload.contentful.com/&gt;"
         (System/getenv "CONTENTFUL_SPACE_ID")
         "/uploads")
       {:body         (IOUtils/toByteArray (io/input-stream "/Users/will/Downloads/BP TUM Pictures PNG/TUM1 001K.png"))
        :headers      {"Authorization"             (str "Bearer " (System/getenv "CONTENTFUL_MANAGEMENT_KEY"))}
        :content-type "application/octet-stream"}))```</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:03:55.485200</ts>
    <user>Sharika</user>
    <text>Yeah, definitely a post.</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:04:30.485700</ts>
    <user>Tamisha</user>
    <text>&lt;@Sharika&gt; did you tried using the `input-stream` directly? (remove the `IOUtils/toByteArray`)</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:05:20.486600</ts>
    <user>Sharika</user>
    <text>Nope, still 404.</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:05:31.486900</ts>
    <user>Nathanael</user>
    <text>&lt;@Sharika&gt; you might need a `.trim` on the thing you get from `getenv`, i've had that problem before</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:05:37.487000</ts>
    <user>Sharika</user>
    <text>```(-&amp;gt;&amp;gt; (client/post
       (str
         "&lt;https://upload.contentful.com/&gt;"
         (System/getenv "CONTENTFUL_SPACE_ID")
         "/uploads")
       {:body         (io/input-stream "/Users/will/Downloads/BPTUMPicturesPNG/TUM1001K.png")
        :headers      {"Authorization"             (str "Bearer " (System/getenv "CONTENTFUL_MANAGEMENT_KEY"))}
        :content-type "application/octet-stream"}))```</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:06:05.487300</ts>
    <user>Sharika</user>
    <text>Input-stream seems okay ```(io/input-stream "/Users/will/Downloads/BPTUMPicturesPNG/TUM1001K.png")
=&amp;gt; #object[java.io.BufferedInputStream 0x36e4cf6f "java.io.BufferedInputStream@36e4cf6f"]
```</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:07:35.488500</ts>
    <user>Dann</user>
    <text>what about directly using the string instead of creating it using getenv (for now) - or at least verifying that CONTENTFUL_SPACE_ID is space-id</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:08:27.489500</ts>
    <user>Sharika</user>
    <text>Um... removing the `--data-binary` param from `curl` command returns 400, not 404, so it definitely seems to be something wrong with my clojure code, and not server weird 404s when no file is uploaded :thinking_face:</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:08:34.489800</ts>
    <user>Sharika</user>
    <text>Will do :white_check_mark:</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:08:34.489900</ts>
    <user>Fredda</user>
    <text>`spaces` is not in the url, while it is in the curl command?</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:09:00.490200</ts>
    <user>Dann</user>
    <text>yeah -that would likely explain it</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:09:29.490600</ts>
    <user>Dann</user>
    <text>unless CONTENTFUL_SPACE_ID was `spaces/space-id` of course</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:09:41.490800</ts>
    <user>Fredda</user>
    <text>true</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:09:56.491000</ts>
    <user>Dann</user>
    <text>this is why people hate strings</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:11:27.491500</ts>
    <user>Sharika</user>
    <text>Haha, yeah! that will be it! Thank you rubber ducks!</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:11:47.491900</ts>
    <user>Sharika</user>
    <text>Yeah, that works!</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:11:48.492000</ts>
    <user>Dann</user>
    <text>:duck:</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:11:52.492200</ts>
    <user>Sharika</user>
    <text>Haha</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:12:25.493300</ts>
    <user>Sharika</user>
    <text>It's funny when you're learning new tech, libraries, etc, how you assume failures are down to your lack of knowledge about that thing, rather than the basics!</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:12:46.493600</ts>
    <user>Dann</user>
    <text>there's a clj-http-fake lib, that is useful for separating this kind of issue from server misbehavior &lt;https://github.com/myfreeweb/clj-http-fake&gt;</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:13:05.494300</ts>
    <user>Sharika</user>
    <text>Oh, and thanks for suggesting removing commons; it's great to remove dependencies!</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:13:06.494400</ts>
    <user>Fredda</user>
    <text>It never stops happening :wink:</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:13:20.494800</ts>
    <user>Fredda</user>
    <text>(for me, at least)</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:13:39.495400</ts>
    <user>Sharika</user>
    <text>It certainly hasn't for me either, in my 20 years commercial programming!</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:13:59.495600</ts>
    <user>Fredda</user>
    <text>aye</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:16:47.496300</ts>
    <user>Marilee</user>
    <text>how does macroexpansion interact with laziness? For instance do I need a `doall` around the `for` here?
```
(defmacro defstyle
  [style-id &amp;amp; styles]
  `(defstyle* ~style-id
     ~@(for [style styles]
         (walk/postwalk (fn [node]
                          (if (map? node)
                            (prefix node)
                            node))
style))))
```</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:18:00.496700</ts>
    <user>Dann</user>
    <text>the compiler is eager, so you shouldn't need doall</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:18:13.497000</ts>
    <user>Marilee</user>
    <text>great, thanks!</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:19:26.497300</ts>
    <user>Dann</user>
    <text>this all depends on what defstyle* does of course - some forms aren't eager of consuming their arguments...</text>
  </message>
  <message conversation_id="131">
    <ts>2019-01-10T14:20:06.497500</ts>
    <user>Dann</user>
    <text>but the absence or presence of doall wouldn't change this</text>
  </message>
  <message conversation_id="132">
    <ts>2019-01-10T14:39:54.497700</ts>
    <user>Brain</user>
    <text>Not that I'm aware of. But if you find or start a project like that, I'd be happy to contribute!</text>
  </message>
  <message conversation_id="133">
    <ts>2019-01-10T14:57:11.499000</ts>
    <user>Scotty</user>
    <text>Has anyone tried to write Kafka Streams code in Clojure? I have googled a few libraries, but haven't found any reports of what works and what does not in reality.</text>
  </message>
  <message conversation_id="133">
    <ts>2019-01-10T15:07:59.499100</ts>
    <user>Sebrina</user>
    <text>Dunno if this helps but this one was posted to the Clojure reddit a few weeks ago: &lt;https://www.reddit.com/r/Clojure/comments/aa12wz/ziggurat_a_stream_processing_framework_to_build/&gt;</text>
  </message>
  <message conversation_id="133">
    <ts>2019-01-10T15:14:36.499800</ts>
    <user>Clarine</user>
    <text>interesting. I subconsciously used this as a feature in a test for months now…
``` 
user=&amp;gt; (str/includes? {:a 1} "1")
true
```</text>
  </message>
  <message conversation_id="133">
    <ts>2019-01-10T15:14:41.499900</ts>
    <user>Scotty</user>
    <text>Thanks, I'll have a look.</text>
  </message>
  <message conversation_id="133">
    <ts>2019-01-10T15:17:23.500400</ts>
    <user>Hilary</user>
    <text>hmm yeah it toStrings the input `(.contains (.toString s) substr)`</text>
  </message>
  <message conversation_id="133">
    <ts>2019-01-10T15:17:50.500700</ts>
    <user>Hilary</user>
    <text>looks like several of the clojure.string predicates do the same</text>
  </message>
  <message conversation_id="133">
    <ts>2019-01-10T15:18:28.501300</ts>
    <user>Marlyn</user>
    <text>it’s because they assume the interface CharSequence as an input, not Object AFIAK</text>
  </message>
  <message conversation_id="134">
    <ts>2019-01-10T15:54:21.501800</ts>
    <user>Dann</user>
    <text>my company open sourced our kafka-streams library recently, &lt;https://github.com/FundingCircle/jackdaw&gt;</text>
  </message>
  <message conversation_id="134">
    <ts>2019-01-10T15:55:46.502300</ts>
    <user>Clarine</user>
    <text>yeah, it worked accidentally. I changed the code now :wink:</text>
  </message>
  <message conversation_id="134">
    <ts>2019-01-10T16:31:16.502700</ts>
    <user>Jasmine</user>
    <text>if only that worked in real life</text>
  </message>
  <message conversation_id="134">
    <ts>2019-01-10T16:31:28.503100</ts>
    <user>Jasmine</user>
    <text>“I put a chainsaw in my toaster and it accidentally came out as toast”</text>
  </message>
  <message conversation_id="134">
    <ts>2019-01-10T16:36:09.505300</ts>
    <user>Rossie</user>
    <text>Instaparse question: I have an existing yacc/lex grammar; I assume the yacc one is the least strenuous to port over (there's no embedded code besides `yyerror`), I'd like to use this with instaparse which takes EBNFs -- any chance someone has done something like that and has a converter laying around? I feel like as soon as I'm writign a file called yacc.cfg and lex.y I have taken a wrong turn</text>
  </message>
  <message conversation_id="134">
    <ts>2019-01-10T16:36:57.505500</ts>
    <user>Rossie</user>
    <text>&lt;https://github.com/jrester/EBNF.cr&gt; claims to do this but doesn't work.</text>
  </message>
  <message conversation_id="134">
    <ts>2019-01-10T16:37:28.506000</ts>
    <user>Rossie</user>
    <text>(the endgame here is being able to parse C headerifles and automagically generating the right Clojure bindings)</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:08:08.507100</ts>
    <user>Rosaline</user>
    <text>you might try using, uh, I forget, that tool that generates jni bindings, and then relective over the java to generate the clojure</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:11:25.508600</ts>
    <user>Rosaline</user>
    <text>is that tool really just javah?</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:11:48.508800</ts>
    <user>Rosaline</user>
    <text>(it is not)</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:12:43.509100</ts>
    <user>Rosaline</user>
    <text>swig is what I am thinking of</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:16:28.509800</ts>
    <user>Becki</user>
    <text>I just checked `(doc eduction)` and `(source eduction)` and their doc strings differ. I didn't think this was possible?</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:17:16.510000</ts>
    <user>Rosaline</user>
    <text>it is</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:17:39.510600</ts>
    <user>Becki</user>
    <text>Well the arg lists i suppose is different to be more precise</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:17:50.510900</ts>
    <user>Rosaline</user>
    <text>for example, whatever tooling you use might override doc</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:18:36.511100</ts>
    <user>Rosaline</user>
    <text>which arglists?</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:18:50.511700</ts>
    <user>Becki</user>
    <text>```
  {:arglists '([xform* coll])
   :added "1.7"}
  [&amp;amp; xforms]
```</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:19:01.512200</ts>
    <user>Rosaline</user>
    <text>and what does doc say?</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:19:04.512400</ts>
    <user>Becki</user>
    <text>```
user&amp;gt; (doc eduction)
-------------------------
clojure.core/eduction
([xform* coll])
```</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:19:09.512800</ts>
    <user>Julienne</user>
    <text>Which lib is better for clojure selenium? &lt;https://github.com/komcrad/webdriver&gt; or &lt;https://github.com/igrishaev/etaoin&gt; or other</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:19:09.512900</ts>
    <user>Rosaline</user>
    <text>that matches</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:19:28.513700</ts>
    <user>Becki</user>
    <text>the arg list in the source is
```
  [&amp;amp; xforms]
  (Eduction. (apply comp (butlast xforms)) (last xforms)))
```</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:19:43.514100</ts>
    <user>Rosaline</user>
    <text>the definition includes custom metadata that overrides the arglist form</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:19:45.514200</ts>
    <user>Jasmine</user>
    <text>the arglists meta overrides</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:20:09.514800</ts>
    <user>Rosaline</user>
    <text>`:arglists '([xform* coll])`</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:20:15.515100</ts>
    <user>Becki</user>
    <text>ok. threw me for a loop when i went to check the source.</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:20:24.515400</ts>
    <user>Jasmine</user>
    <text>the override is trying to convey something impossible to say in the actual arg list</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:20:31.515600</ts>
    <user>Jasmine</user>
    <text>which is a leading vararg</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:21:16.515900</ts>
    <user>Becki</user>
    <text>i see. thank you</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:47:39.517700</ts>
    <user>Celestine</user>
    <text>(side note: `:arglists` can confuse tooling that tries to use that information to check source code -- such as Eastwood -- since the `:argslists` metadata doesn't have to represent a valid actual call)</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:48:58.518800</ts>
    <user>Diamond</user>
    <text>&lt;@Celestine&gt; it can also help it. :slightly_smiling_face: ```(defmulti ^{:arglists '([a-map])} do-thing :key)```</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:52:13.519600</ts>
    <user>Celestine</user>
    <text>Eastwood can't check `defmulti` calls without a hint? I didn't know that.</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:53:49.520900</ts>
    <user>Diamond</user>
    <text>`defmulti` can’t attach `:arglists` meta to the var because there’s no general way to derive it from the dispatch-fn.</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:54:21.521900</ts>
    <user>Somer</user>
    <text>Will calling `count` on a vector of lazy seqs realize the lazy seqs?</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:54:31.522100</ts>
    <user>Diamond</user>
    <text>No.</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:55:48.522800</ts>
    <user>Somer</user>
    <text>Thought so. This result was confusing:
```
(let [xs [(iterate (fn [x]
                     (inc x)) 0)
          (iterate (fn [x]
                     (inc x)) 0)]]
  (map realized? xs))
=&amp;gt; (true true)
```
Guessing `realized?` must be talking about something else here?</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:58:58.523300</ts>
    <user>Dann</user>
    <text>yeah - I wouldn't trust realized? for lazy inputs - it's reliable for `delay` or `promise` objects</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T17:59:50.523900</ts>
    <user>Dann</user>
    <text>I tested by adding println inside those function bodies - not even the first element is being produced</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T18:05:02.524100</ts>
    <user>Dann</user>
    <text>&lt;@Somer&gt; - I had to play with this more - it seems like it kind of works but not for the head of the collection(?) ```(cmd)user=&amp;gt; (def l (iterate println nil))
#'user/l
(cmd)user=&amp;gt; (realized? l)
true
(cmd)user=&amp;gt; (realized? (rest l))
false
(ins)user=&amp;gt; (realized? (nthrest l 2))
nil
false
(cmd)user=&amp;gt; (realized? (rest l))
true
```</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T18:05:49.524300</ts>
    <user>Dann</user>
    <text>that nil after calling nthrest shows one element being realized</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T18:06:51.524500</ts>
    <user>Somer</user>
    <text>Perhaps because the first element is passed explicitly to `iterate`?</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T18:07:22.524700</ts>
    <user>Dann</user>
    <text>oh! I'll try another thing to test that</text>
  </message>
  <message conversation_id="135">
    <ts>2019-01-10T18:08:29.524900</ts>
    <user>Dann</user>
    <text>yeah - you figured it out ```(ins)user=&amp;gt; (def l (repeatedly #(println :realized)))
#'user/l
(ins)user=&amp;gt; (realized? l)
false
(cmd)user=&amp;gt; (realized? (rest l))
:realized
false
(cmd)user=&amp;gt; (realized? (rest l))
false
(cmd)user=&amp;gt; (realized? (nthrest l 2))
:realized
false
(cmd)user=&amp;gt; (realized? (rest l))
true
```</text>
  </message>
  <message conversation_id="136">
    <ts>2019-01-10T21:34:47.530100</ts>
    <user>Milford</user>
    <text>Yeah, the first value in a lazy sequence generated by `iterate` has been “produced”, and thus the sequence vacuously satisfies `realized?`</text>
  </message>
  <message conversation_id="136">
    <ts>2019-01-11T04:12:33.531900</ts>
    <user>Shanel</user>
    <text>&lt;http://www.learndatalogtoday.org/&gt;</text>
  </message>
  <message conversation_id="136">
    <ts>2019-01-11T04:12:44.532100</ts>
    <user>Shanel</user>
    <text>&lt;https://vvvvalvalval.github.io/posts/2016-07-24-datomic-web-app-a-practical-guide.html&gt;</text>
  </message>
  <message conversation_id="137">
    <ts>2019-01-11T06:12:23.533900</ts>
    <user>Isa</user>
    <text>`((:close foo))` - how to write instead something like `(-&amp;gt; (:close foo) ())`. I want to make it more readable, but I confused myself :slightly_smiling_face:</text>
  </message>
  <message conversation_id="137">
    <ts>2019-01-11T06:14:01.534300</ts>
    <user>Isa</user>
    <text>hmm or maybe `((:close foo))` is ok</text>
  </message>
  <message conversation_id="137">
    <ts>2019-01-11T06:19:53.535700</ts>
    <user>Chanelle</user>
    <text>would this look more readable ? `(invoke (:close foo))`?</text>
  </message>
  <message conversation_id="137">
    <ts>2019-01-11T06:28:25.537400</ts>
    <user>Epifania</user>
    <text>&lt;@Isa&gt; maybe something like this?
```
(def foo {:bar #(println "nice")})
((-&amp;gt; foo (:bar)))
```</text>
  </message>
  <message conversation_id="137">
    <ts>2019-01-11T06:29:52.538400</ts>
    <user>Epifania</user>
    <text>I tend to not use `-&amp;gt;` unless it's more nested, one level usually just do `((:bar foo))` directly, but not sure that's idomatic</text>
  </message>
  <message conversation_id="137">
    <ts>2019-01-11T06:30:03.538600</ts>
    <user>Isa</user>
    <text>well after rethinking `((:close foo))` is good</text>
  </message>
  <message conversation_id="137">
    <ts>2019-01-11T06:30:52.539000</ts>
    <user>Isa</user>
    <text>It is more readable than I thought :slightly_smiling_face:</text>
  </message>
  <message conversation_id="138">
    <ts>2019-01-11T07:01:04.541900</ts>
    <user>Luciano</user>
    <text>hey all, I started using defmulti/defmethod. Is it intended that you can't use Destructuring with Keyword-arguments in defmethod?</text>
  </message>
  <message conversation_id="138">
    <ts>2019-01-11T07:25:27.542200</ts>
    <user>Nikki</user>
    <text>dispatch function (:type) is applied to three arguments. You should either rewrite youy dispatch function for it to be ready to accept vavarg or get rid of vararg and accept just one map</text>
  </message>
  <message conversation_id="138">
    <ts>2019-01-11T07:36:08.542400</ts>
    <user>Luciano</user>
    <text>oh, didn't know that the dispatch-fn will be applied to every arg and not only the first.. Thanks. :+1: I'll use only one map</text>
  </message>
  <message conversation_id="139">
    <ts>2019-01-11T08:48:07.542900</ts>
    <user>Vernia</user>
    <text>You could do
```
(let [{:keys [close]} foo]
  (close))
```</text>
  </message>
  <message conversation_id="140">
    <ts>2019-01-11T09:58:41.544600</ts>
    <user>Ashlea</user>
    <text>```
Clojure 1.10.0
user=&amp;gt; (take 2 [])
()
user=&amp;gt; (take-last 2 [])
nil
```

Is it likely that a patch would be accepted to modify `take-last` to return an empty seq when given an empty seq?</text>
  </message>
  <message conversation_id="140">
    <ts>2019-01-11T10:01:34.544800</ts>
    <user>Jasmine</user>
    <text>no</text>
  </message>
  <message conversation_id="140">
    <ts>2019-01-11T10:02:25.545100</ts>
    <user>Ashlea</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="140">
    <ts>2019-01-11T10:03:21.545600</ts>
    <user>Jasmine</user>
    <text>in general, I would expect any code that uses the result of either of these to work in either case</text>
  </message>
  <message conversation_id="140">
    <ts>2019-01-11T10:04:45.546100</ts>
    <user>Jasmine</user>
    <text>expectation for sequence functions should be that take something seqable and return something seqable</text>
  </message>
  <message conversation_id="141">
    <ts>2019-01-11T10:23:56.547900</ts>
    <user>Virgil</user>
    <text>with Spec, if I have `(s/def my-map (s/keys :req [a b]))` where `a` &amp;amp; `b` are `(s/coll-of something)`, how can I say I want `a` &amp;amp; `b` to have the same length ?</text>
  </message>
  <message conversation_id="141">
    <ts>2019-01-11T10:26:17.549500</ts>
    <user>Virgil</user>
    <text>(not using `:count` - I don't care how long they are, only that they're the same length)</text>
  </message>
  <message conversation_id="141">
    <ts>2019-01-11T10:31:12.550000</ts>
    <user>Jasmine</user>
    <text>write a function that checks that and s/and it to your spec</text>
  </message>
  <message conversation_id="141">
    <ts>2019-01-11T11:35:54.550600</ts>
    <user>Virgil</user>
    <text>&lt;@Jasmine&gt; much easier than I thought! thankyou</text>
  </message>
  <message conversation_id="141">
    <ts>2019-01-11T11:39:56.551300</ts>
    <user>Jasmine</user>
    <text>you can pretty much write a predicate to check any arbitrary property of data and all predicates are specs</text>
  </message>
  <message conversation_id="141">
    <ts>2019-01-11T11:51:05.551700</ts>
    <user>Virgil</user>
    <text>it's a while since I used Spec, it's all coming back now</text>
  </message>
  <message conversation_id="142">
    <ts>2019-01-11T12:41:43.552900</ts>
    <user>Tammera</user>
    <text>Hijacking a question here, can you specify in an `fspec` what the side-effects of a function may be.  That would basically entail doing something _before_ the fn runs, and _after_.</text>
  </message>
  <message conversation_id="142">
    <ts>2019-01-11T12:42:47.553800</ts>
    <user>Tammera</user>
    <text>For example, I have a `swap-vals!` kinda thing for redis, I would very much like to assert that the first result you get is the state _prior_ to the function being ran.</text>
  </message>
  <message conversation_id="142">
    <ts>2019-01-11T12:45:06.554400</ts>
    <user>Meagan</user>
    <text>:thinking_face:  :thinking_face:  :thinking_face:  well... nothing stops you from doing effects in your predicates</text>
  </message>
  <message conversation_id="142">
    <ts>2019-01-11T12:45:19.554700</ts>
    <user>Meagan</user>
    <text>my first instinct is: oh god no</text>
  </message>
  <message conversation_id="142">
    <ts>2019-01-11T12:45:47.555300</ts>
    <user>Meagan</user>
    <text>but, maybe fine? I wouldn't reach out to your redis instance each time the fn is called</text>
  </message>
  <message conversation_id="142">
    <ts>2019-01-11T12:46:07.555700</ts>
    <user>Tammera</user>
    <text>Right, its an obvious development-only kinda deal right</text>
  </message>
  <message conversation_id="142">
    <ts>2019-01-11T12:47:48.557100</ts>
    <user>Meagan</user>
    <text>maybe you could have a custom instrumentation that swaps an atom with the before state, then compares in the `:ret`</text>
  </message>
  <message conversation_id="142">
    <ts>2019-01-11T12:47:55.557300</ts>
    <user>Tammera</user>
    <text>Its just that I don’t think you have a hook that is ran _before_ the function is called</text>
  </message>
  <message conversation_id="142">
    <ts>2019-01-11T12:49:23.558000</ts>
    <user>Tammera</user>
    <text>(this is obviously more a code-golfing thing than actually useful, please don’t hate me)</text>
  </message>
  <message conversation_id="143">
    <ts>2019-01-11T13:47:17.560200</ts>
    <user>Clarine</user>
    <text>How do I invite a bot to a channel that logs conversations to &lt;https://clojurians-log.clojureverse.org/&gt;</text>
  </message>
  <message conversation_id="143">
    <ts>2019-01-11T13:50:38.560800</ts>
    <user>Celestine</user>
    <text>Invite &lt;@Mi&gt; to your channel</text>
  </message>
  <message conversation_id="143">
    <ts>2019-01-11T13:53:04.561700</ts>
    <user>Tamie</user>
    <text>there is a web page somewhere that lists api's to third party clojure libraries...help?</text>
  </message>
  <message conversation_id="143">
    <ts>2019-01-11T13:53:54.562100</ts>
    <user>Tamie</user>
    <text>&lt;http://cljdoc.org|cljdoc.org&gt;  &amp;lt;-- found it :slightly_smiling_face:</text>
  </message>
  <message conversation_id="143">
    <ts>2019-01-11T13:54:19.562600</ts>
    <user>Celestine</user>
    <text>Also &lt;https://crossclj.info/&gt; if you're searching for libraries to solve a specific task.</text>
  </message>
  <message conversation_id="143">
    <ts>2019-01-11T14:06:23.563000</ts>
    <user>Tamie</user>
    <text>Thanks Sean, I'll add that to my notes too :slightly_smiling_face:!</text>
  </message>
  <message conversation_id="144">
    <ts>2019-01-11T14:47:49.563300</ts>
    <user>Clarine</user>
    <text>&lt;@Celestine&gt; thanks</text>
  </message>
  <message conversation_id="145">
    <ts>2019-01-11T15:21:31.563400</ts>
    <user>Reiko</user>
    <text>Why complicate this? It's calling the function that is returned by the `:close` key. It's perfectly fine the way it is.</text>
  </message>
  <message conversation_id="145">
    <ts>2019-01-11T15:22:03.563600</ts>
    <user>Reiko</user>
    <text>Ah, nvm. Didn't see the text that followed.</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:44:52.565100</ts>
    <user>Fairy</user>
    <text>i've got a pretty lengthy bash command i'd like to execute in clojure. Is there any way i can just execute the full command with all its arguments as a single string?</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:48:06.566300</ts>
    <user>Dann</user>
    <text>sure, via `(clojure.java.shell/sh "/bin/bash" "-c" cmd)` for example</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:48:25.566800</ts>
    <user>Dann</user>
    <text>you can do a similar trick with ProcessBuilder if you  need more flexibility about how the command runs</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:48:54.567300</ts>
    <user>Dann</user>
    <text>shell/sh itself doesn't invoke the OS shell - for one thing that's not portable</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:54:21.568100</ts>
    <user>Dann</user>
    <text>&lt;@Fairy&gt; ```ins)user=&amp;gt; (.start (ProcessBuilder. (into-array ["/bin/bash" "-c" "ls"])))
#object[java.lang.UNIXProcess 0x2a8d39c4 "java.lang.UNIXProcess@2a8d39c4"]
(ins)user=&amp;gt; (slurp (.getInputStream *1))
"CHANGELOG.md\nDockerfile\nREADME.md\nTAGS\nbin\ndashboards\ndeploy\ndev-resources\ndoc\ndoc-updates.otl\ndocker\ndocker-compose.yml\neastwood-config.clj\nprofiles.clj\nproject.clj\nresources\nsrc\ntarget\ntest\n"```  ```(ins)user=&amp;gt; (require 'clojure.java.shell)
nil
(ins)user=&amp;gt; (clojure.java.shell/sh "/bin/bash" "-c" "ls")
{:exit 0, :out "CHANGELOG.md\nDockerfile\nREADME.md\nTAGS\nbin\ndashboards\ndeploy\ndev-resources\ndoc\ndoc-updates.otl\ndocker\ndocker-compose.yml\neastwood-config.clj\nprofiles.clj\nproject.clj\nresources\nsrc\ntarget\ntest\n", :err ""}
```</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:56:53.569700</ts>
    <user>Fairy</user>
    <text>ok my issue is parsing out the arguments into an array like that. I tried using conch. And i'm trying to use ffmpeg.
this command returns a non-zero exit code at the first step but also returns the info i want, but conch just hangs up at the first error
```ffmpeg -i /Volumes/Video 1/DRUM_2018-12-19-15-00-54_597.mov 2&amp;gt;&amp;amp;1 | grep Duration | cut -d ' ' -f 4 | sed s/,//```</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:57:13.570100</ts>
    <user>Dann</user>
    <text>yeah, just use ProcessBuilder instead of conch</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:57:42.570600</ts>
    <user>Dann</user>
    <text>you need to explicitly call bash or sh to get things like `|`</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:57:57.571000</ts>
    <user>Dann</user>
    <text>those aren't execution features, they are shell features, so you need to start a shell</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T19:58:28.571600</ts>
    <user>Dann</user>
    <text>(so maybe conch is still OK for you, as long as you start a shell - I found ProcessBuilder much easier to use in anger)</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:00:31.572200</ts>
    <user>Fairy</user>
    <text>haha... so like
```
(def output (.start (ProcessBuilder. (into-array ["/bin/bash" "-c"  "ffmpeg -i /Volumes/Video 1/DRUM_2018-12-19-15-00-54_597.mov 2&amp;gt;&amp;amp;1 | grep Duration | cut -d ' ' -f 4 | sed s/,//"]))))
```</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:01:06.573000</ts>
    <user>Dann</user>
    <text>yeah, but that's more than output - it is a `Process` object that lets you read stdout, stderr, send to stdin, etc.</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:01:50.573900</ts>
    <user>Dann</user>
    <text>in my experience for interactive commands like ffmpeg if I want to send it input lines mid execution etc. Process directly instead of conch was easier</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:02:51.574100</ts>
    <user>Fairy</user>
    <text>wow much easier! Thanks!</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:03:00.574300</ts>
    <user>Dann</user>
    <text>glad I could help</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:04:16.575300</ts>
    <user>Dann</user>
    <text>also, once you have an InputStream you are free to parse each line of input from the process with your own parser if sed and cut aren't "cutting it", so to speak</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:04:31.575600</ts>
    <user>Dann</user>
    <text>but if sed and cut work, no need to reinvent that</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:11:52.576100</ts>
    <user>Lieselotte</user>
    <text>Anybody know how to use missing? with a reverse lookup? Is this supposed to work?
`[(missing? $ ?l :account/_licenses)]`

Also, is there a reason why I can't use 2 missing? statements in an or?
`(or [(missing? $ ?a :account/licenses)] [(missing? $ ?a :account/email)])` (edited)
Error `CompilerException java.lang.RuntimeException: Unable to resolve symbol: $ in this context`</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:12:33.576700</ts>
    <user>Dann</user>
    <text>what is "missing?"</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:13:03.577400</ts>
    <user>Fairy</user>
    <text>you mean that for the &lt;#C03RZMDSH|datomic&gt;  channel "?</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:13:29.577900</ts>
    <user>Dann</user>
    <text>oh, if it's datomic the who vector should be quoted right?</text>
  </message>
  <message conversation_id="146">
    <ts>2019-01-11T20:14:25.578200</ts>
    <user>Fairy</user>
    <text>yeah... needs to be quoted</text>
  </message>
  <message conversation_id="147">
    <ts>2019-01-11T20:23:28.579800</ts>
    <user>Lieselotte</user>
    <text>There's more exposure here... but I will politely retreat back to &lt;#C03RZMDSH|datomic&gt; if someone protests me posting here.</text>
  </message>
  <message conversation_id="148">
    <ts>2019-01-11T23:34:08.581500</ts>
    <user>Gillian</user>
    <text>Something I discovered today is that YourKit works really well with Clojure in an IntelliJ setup (doesn’t interfere with Cursive).</text>
  </message>
  <message conversation_id="148">
    <ts>2019-01-11T23:34:23.581800</ts>
    <user>Gillian</user>
    <text>For profiling Clojure code!</text>
  </message>
  <message conversation_id="148">
    <ts>2019-01-11T23:35:17.582000</ts>
    <user>Gillian</user>
    <text>I was reading this earlier: &lt;http://yellerapp.com/posts/2014-05-21-tuning-clojure-an-experience-report.html&gt;</text>
  </message>
  <message conversation_id="148">
    <ts>2019-01-11T23:36:35.582700</ts>
    <user>Gillian</user>
    <text>Figuring out what Java class names correspond to which parts of your Clojure code is kind of difficult though. But otherwise really helpful once you figure out what’s what.</text>
  </message>
  <message conversation_id="149">
    <ts>2019-01-12T04:00:08.585300</ts>
    <user>Jessia</user>
    <text>What’s the best way to interop with Java methods that require a java.util.function? I know it can be done with reify but it is a bit verbose. </text>
  </message>
  <message conversation_id="150">
    <ts>2019-01-12T06:29:54.586000</ts>
    <user>Sixta</user>
    <text>There's a library around which provides a macro for that. </text>
  </message>
  <message conversation_id="151">
    <ts>2019-01-12T07:05:52.588900</ts>
    <user>Dawna</user>
    <text>Hi, I have a question about quil library. How to I call individual functions in the REPL, e.g. quil.core/random? Most quil function can only be run inside sketch functions  (I think because of state handling). Is the any way to _grab_ the current state in the repl and execute code?</text>
  </message>
  <message conversation_id="150">
    <ts>2019-01-12T07:33:52.589400</ts>
    <user>Kermit</user>
    <text>You'll have better luck asking in the dedicated &lt;#C0FM7N1SM|quil&gt; channel</text>
  </message>
  <message conversation_id="151">
    <ts>2019-01-12T08:25:59.589600</ts>
    <user>Dawna</user>
    <text>Thanks. didn't know of it</text>
  </message>
  <message conversation_id="152">
    <ts>2019-01-13T06:48:51.595600</ts>
    <user>Brain</user>
    <text>I've just kludged the powershell scripts in &lt;https://dev.clojure.org/jira/browse/INST-15&gt; (and adding the jvm-file and main-file arguments in), and appear to have a working clojure-cli under windows. Has anyone else tried this, and run into further problems down the line?</text>
  </message>
  <message conversation_id="153">
    <ts>2019-01-13T08:42:38.597600</ts>
    <user>Jasmine</user>
    <text>There’s a branch in brew-install with a more up to date version of those</text>
  </message>
  <message conversation_id="153">
    <ts>2019-01-13T08:44:24.597800</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/clojure/brew-install/tree/windows-port&gt;</text>
  </message>
  <message conversation_id="153">
    <ts>2019-01-13T08:45:35.598600</ts>
    <user>Jasmine</user>
    <text>Although they are lagging a few of the latest changes </text>
  </message>
  <message conversation_id="152">
    <ts>2019-01-13T09:26:05.599100</ts>
    <user>Brain</user>
    <text>I was wondering where those where hiding, thanks!</text>
  </message>
  <message conversation_id="154">
    <ts>2019-01-13T11:37:39.601900</ts>
    <user>Isa</user>
    <text>What is your best stack for authentication and authorization? What do you use?
- &lt;https://github.com/funcool/buddy&gt; ?
- With GraphQL or you prefer REST for authentication and GraphQL for authorization with queries?
- OAuth2?
- REST API for authentication by POST? Return HTTP 200? JSON input / output?

My concerns:
- I want to have GraphQL, but not sure if authentication should be separated as REST API.
- authentication should return token to use with authorization with GraphQL
- Users will be able to generate extra tokens for integrations like in GitHub

I confused myself about the way how to solve it. In other words I am asking about your best way how to do it with full details about libraries, methods, concepts, choices :slightly_smiling_face:</text>
  </message>
  <message conversation_id="154">
    <ts>2019-01-13T11:40:13.602500</ts>
    <user>Elaine</user>
    <text>&lt;@Isa&gt; &lt;#C68M60S4F|fulcro&gt; recomends this csrf. I liked it after I met. You generate a token and deliver it on HTML. Then the application send it on body or headers.
&lt;https://stuarth.github.io/clojure/csrf-pedestal/&gt;</text>
  </message>
  <message conversation_id="154">
    <ts>2019-01-13T11:42:15.603900</ts>
    <user>Elaine</user>
    <text>It use sessions/cookies. Somehow (pedestal handles it. I dont know how) if the browser do a `F5`, then it deliver the same token.</text>
  </message>
  <message conversation_id="154">
    <ts>2019-01-13T11:46:20.605700</ts>
    <user>Isa</user>
    <text>Thank for that article. That will be for sure something which I will have to do too. For now I confused myself on level of thinking about authentication query / response / library vs my code.</text>
  </message>
  <message conversation_id="154">
    <ts>2019-01-13T11:55:33.605900</ts>
    <user>Elaine</user>
    <text>&lt;https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dataset#Examples&gt;
:wink:</text>
  </message>
  <message conversation_id="154">
    <ts>2019-01-13T11:58:35.606200</ts>
    <user>Isa</user>
    <text>I am talking about BE side mainly now, not FE. Not how to send data by JS, but for example if it should be separate REST API only for auth by POST, accept JSON (not?) and return JSON (not?) by HTTP 200. Or GraphQL, because I want to have it anyway probably.</text>
  </message>
  <message conversation_id="154">
    <ts>2019-01-13T12:06:38.606500</ts>
    <user>Isa</user>
    <text>Hmm my `buddy` can be what I am looking for</text>
  </message>
  <message conversation_id="154">
    <ts>2019-01-13T14:02:44.607200</ts>
    <user>Sheron</user>
    <text>you can also secure rest api's via jwt</text>
  </message>
  <message conversation_id="155">
    <ts>2019-01-13T14:33:39.607800</ts>
    <user>Darcel</user>
    <text>Is there a way to install dependency from github with a specific sha using leiningen?</text>
  </message>
  <message conversation_id="155">
    <ts>2019-01-13T14:36:03.608800</ts>
    <user>Cira</user>
    <text>```
    (case (type x)
      org.jsoup.nodes.Document x
```
I want to dispatch based on the type/class of a thing but this doesn't work as I expected. Do I have to use `if`? Or is there some other construct for this?</text>
  </message>
  <message conversation_id="155">
    <ts>2019-01-13T14:36:29.608900</ts>
    <user>Tammera</user>
    <text>I know that a `deps.edn` can specify that, and I know of integration tools between the two</text>
  </message>
  <message conversation_id="155">
    <ts>2019-01-13T14:36:59.609100</ts>
    <user>Tammera</user>
    <text>but that may be a bit of a wonky solution</text>
  </message>
  <message conversation_id="155">
    <ts>2019-01-13T14:37:48.609400</ts>
    <user>Cira</user>
    <text>I guess a class doesn't count as a literal/constant?</text>
  </message>
  <message conversation_id="155">
    <ts>2019-01-13T14:37:56.609600</ts>
    <user>Becki</user>
    <text>you could try &lt;https://github.com/reifyhealth/lein-git-down&gt;</text>
  </message>
  <message conversation_id="155">
    <ts>2019-01-13T14:44:30.610500</ts>
    <user>Yong</user>
    <text>Can’t you define a protocol for this?</text>
  </message>
  <message conversation_id="155">
    <ts>2019-01-13T14:48:33.610700</ts>
    <user>Cira</user>
    <text>Right, that should work, good idea :+1:</text>
  </message>
  <message conversation_id="156">
    <ts>2019-01-13T16:53:18.611000</ts>
    <user>Isa</user>
    <text>use `deps.edn`, if you really want to have lein use &lt;https://github.com/RickMoynihan/lein-tools-deps&gt;</text>
  </message>
  <message conversation_id="156">
    <ts>2019-01-13T17:06:15.613200</ts>
    <user>Darcel</user>
    <text>Thank you &lt;@Isa&gt;! Since i just wanted to explore hot module reloading with tools.deps.alpha I will definetely stick to deps.edn. </text>
  </message>
  <message conversation_id="156">
    <ts>2019-01-13T17:09:09.616300</ts>
    <user>Darcel</user>
    <text>Btw, may I DM you &lt;@Isa&gt;? I’m seeking for remote job in PL so if you would like to give me some tips then I would be more than grateful.</text>
  </message>
  <message conversation_id="156">
    <ts>2019-01-13T17:10:40.616600</ts>
    <user>Isa</user>
    <text>sure, I will answer tomorrow. I am going sleep now :slightly_smiling_face:</text>
  </message>
  <message conversation_id="156">
    <ts>2019-01-13T17:10:46.616800</ts>
    <user>Isa</user>
    <text>See you!</text>
  </message>
  <message conversation_id="156">
    <ts>2019-01-13T17:14:45.617800</ts>
    <user>Darcel</user>
    <text>Have a deep sleep! :zzz: See you!</text>
  </message>
  <message conversation_id="157">
    <ts>2019-01-13T22:07:15.618400</ts>
    <user>Jasmine</user>
    <text>Classes are not constants</text>
  </message>
  <message conversation_id="157">
    <ts>2019-01-13T22:07:38.619000</ts>
    <user>Jasmine</user>
    <text>condp with = is a good match for this though</text>
  </message>
  <message conversation_id="158">
    <ts>2019-01-13T22:54:45.619500</ts>
    <user>Gene</user>
    <text>I'm getting this when I run 'clj' on a fresh linux install.
```cp: cannot stat 'PREFIX/example-deps.edn': No such file or directory```</text>
  </message>
  <message conversation_id="158">
    <ts>2019-01-13T23:13:34.620000</ts>
    <user>Gene</user>
    <text>ok so I found in old slack logs its to do with a botched clojure install</text>
  </message>
  <message conversation_id="158">
    <ts>2019-01-13T23:14:32.621000</ts>
    <user>Gene</user>
    <text>I can't get it installed though. If I remove the install from linuxbrew then it gives me. bash: `/home/linuxbrew/.linuxbrew/bin/clj: No such file or directory` but if I use brew I get the other error.</text>
  </message>
  <message conversation_id="159">
    <ts>2019-01-13T23:24:57.621200</ts>
    <user>Reiko</user>
    <text>Is there not a clojure package in your distro's package manger?</text>
  </message>
  <message conversation_id="160">
    <ts>2019-01-14T00:13:59.622700</ts>
    <user>Alease</user>
    <text>are there core functions/macros that do something similar to this ones I've made
```(defmacro anon-proxy
  [draw-fn]
  `(fn [&amp;amp; ~'args]
     (apply ~draw-fn ~'args)))

(defmacro map-keyed
  {:style/indent :defn}
  [&amp;amp; args]
  `(-&amp;gt;&amp;gt; (list ~@args)
        (interleave (map keyword '(~@args)))
        (apply hash-map)))
```</text>
  </message>
  <message conversation_id="160">
    <ts>2019-01-14T00:15:30.624000</ts>
    <user>Alease</user>
    <text>the first is for live coding with some libraries since you have to have function that calls the one you'll be re-deffing</text>
  </message>
  <message conversation_id="160">
    <ts>2019-01-14T00:16:42.625200</ts>
    <user>Alease</user>
    <text>the second is to just get a key/value from a collection of symbols that are in scope.</text>
  </message>
  <message conversation_id="158">
    <ts>2019-01-14T02:16:20.625600</ts>
    <user>Gene</user>
    <text>I managed to fix it. I completely removed linuxbrew and followed instructions on Linux install on Clojure website</text>
  </message>
  <message conversation_id="160">
    <ts>2019-01-14T02:26:09.625800</ts>
    <user>Reiko</user>
    <text>Glad to hear, but that may not be necessary if your distro has a package for it. The method on the website is manual updating</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T02:51:50.626100</ts>
    <user>Frederick</user>
    <text>&lt;https://stackoverflow.com/questions/54177410/calling-special-form-set-in-a-clojure-macro&gt;</text>
  </message>
  <message conversation_id="162">
    <ts>2019-01-14T09:02:14.627700</ts>
    <user>Jasmine</user>
    <text>vars can be invoked and when done, will invoke the function they hold. so I think they already serve this purpose and on the caller side if you just invoked the var, you could change the var binding as much as you want.</text>
  </message>
  <message conversation_id="162">
    <ts>2019-01-14T09:09:57.632100</ts>
    <user>Scotty</user>
    <text>Is there a _generic-ish_ way to transform stateful systems in functional ones? Namely, I have a server serving a complicated stateful protocol (Wayland to be precise), and would like to read some guide or a war story of turning these webs-of-mutating-objects into something more manageable.</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:37:46.633700</ts>
    <user>Arturo</user>
    <text>I’m having some fun with the cognitect AWS library, specifically with the KMS functions.. is there a good place to ask questions around this..?</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:38:00.634000</ts>
    <user>Arturo</user>
    <text>the hash aws channel here seems dead :disappointed:</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:38:26.634400</ts>
    <user>Arturo</user>
    <text>`{"__type" "InvalidCiphertextException", :cognitect.anomalies/category :cognitect.anomalies/incorrect}` &amp;lt; trying to find out what this means</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:39:26.635200</ts>
    <user>Arturo</user>
    <text>the `:Decrypt` docs say  `:CiphertextBlob blob`</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:39:34.635600</ts>
    <user>Arturo</user>
    <text>but doesn’t really elaborate what blob is</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:39:55.636200</ts>
    <user>Arturo</user>
    <text>i’ve tried byte array, buffered input stream, string..</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:40:51.636800</ts>
    <user>Arturo</user>
    <text>the ciphertextblob output from encrypt is a bufferedinputstream</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:42:59.637600</ts>
    <user>Marlyn</user>
    <text>&lt;@Arturo&gt; have you enabled validation?</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:43:13.637800</ts>
    <user>Arturo</user>
    <text>no</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:43:29.638200</ts>
    <user>Arturo</user>
    <text>that sounds like it might be helpful</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:43:57.638400</ts>
    <user>Arturo</user>
    <text>how do I do that..?</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:44:08.638700</ts>
    <user>Arturo</user>
    <text>there’s nothing about validation in the readme</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:50:13.639300</ts>
    <user>Arturo</user>
    <text>`(aws/validate-requests some-client true)`?</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:50:40.639600</ts>
    <user>Marlyn</user>
    <text>yup</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:51:35.640000</ts>
    <user>Arturo</user>
    <text>thanks</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:51:49.640300</ts>
    <user>Arturo</user>
    <text>that really should be in the docs.. think they’d take a PR?</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:53:04.641600</ts>
    <user>Leah</user>
    <text>is there ways people work around the fact that strings and other primitives don’t implement IMeta? For a similar use case as REBL I’d like to allow different viewers for data and I’d like this to work for strings and numbers as well…</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T09:55:08.641700</ts>
    <user>Marlyn</user>
    <text>PRs not accepted, but file an issue please</text>
  </message>
  <message conversation_id="161">
    <ts>2019-01-14T10:09:22.641900</ts>
    <user>Sheree</user>
    <text>this info gave me enough to check the Java SDK API docs:

&lt;https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/kms/model/DecryptRequest.html#setCiphertextBlob-java.nio.ByteBuffer-&gt;

and it looks like it takes a `java.nio.ByteBuffer`</text>
  </message>
  <message conversation_id="163">
    <ts>2019-01-14T10:22:56.642900</ts>
    <user>Isa</user>
    <text>```
{:status 200,
 :headers {"Content-Type" "application/json; charset=utf-8", "Vary" "Accept", "Content-Length" "44"},
 :body #object[java.io.BufferedInputStream 0x109943d3 "java.io.BufferedInputStream@109943d3"]}
```

How do you show maps with objects like in this example, but converted to the value (string) I need it for developing purpose</text>
  </message>
  <message conversation_id="163">
    <ts>2019-01-14T10:27:44.643300</ts>
    <user>Arturo</user>
    <text>`slurp` it?</text>
  </message>
  <message conversation_id="163">
    <ts>2019-01-14T10:28:43.644900</ts>
    <user>Isa</user>
    <text>But I don’t want to do it on `:body`. I would like to have `fn` like `(show-me-values m)`. Perhaps such function doesn’t exist :slightly_smiling_face:</text>
  </message>
  <message conversation_id="163">
    <ts>2019-01-14T10:29:01.645400</ts>
    <user>Isa</user>
    <text>But maybe it exists, so I am asking :slightly_smiling_face:</text>
  </message>
  <message conversation_id="163">
    <ts>2019-01-14T10:29:08.645600</ts>
    <user>Arturo</user>
    <text>not afaik!</text>
  </message>
  <message conversation_id="163">
    <ts>2019-01-14T10:29:11.645800</ts>
    <user>Arturo</user>
    <text>:slightly_smiling_face:</text>
  </message>
  <message conversation_id="164">
    <ts>2019-01-14T11:36:44.646300</ts>
    <user>Isa</user>
    <text>What `buddy` exactly add on top of `ring` `sessions`? &lt;http://funcool.github.io/buddy-auth/latest/#session&gt; ? It doesn’t look like it is adding something special, but maybe I miss something.

Asking in different way: I need to make sessions based on DB, I am thinking about &lt;https://github.com/clojusc/ring-redis-session&gt; . Does it make sense to glue it in some way with `buddy`?</text>
  </message>
  <message conversation_id="164">
    <ts>2019-01-14T11:39:45.646700</ts>
    <user>Arturo</user>
    <text>I used amazonica for now but when i go back to this, will try it out</text>
  </message>
  <message conversation_id="164">
    <ts>2019-01-14T11:40:25.646900</ts>
    <user>Arturo</user>
    <text>it’s all pretty obscure, a couple of helper functions here would be really welcome</text>
  </message>
  <message conversation_id="164">
    <ts>2019-01-14T11:44:59.647500</ts>
    <user>Epifania</user>
    <text>&lt;@Isa&gt; aren't `ring sessions` just for authentication? Buddy seems to give you authorization too</text>
  </message>
  <message conversation_id="164">
    <ts>2019-01-14T11:45:46.648300</ts>
    <user>Isa</user>
    <text>Maybe. I am not sure what exactly buddy add. I didn’t use it before.</text>
  </message>
  <message conversation_id="164">
    <ts>2019-01-14T11:46:31.648800</ts>
    <user>Isa</user>
    <text>But I see in buddy doc Authentication with sessions</text>
  </message>
  <message conversation_id="164">
    <ts>2019-01-14T11:46:55.649400</ts>
    <user>Isa</user>
    <text>But there is no info what exactly is the point of using it</text>
  </message>
  <message conversation_id="164">
    <ts>2019-01-14T11:50:02.650000</ts>
    <user>Isa</user>
    <text>I am trying to figure out if `buddy` is something for me or not. What I can use from there.</text>
  </message>
  <message conversation_id="164">
    <ts>2019-01-14T11:55:44.650600</ts>
    <user>Isa</user>
    <text>I don’t see too much benefits while I am using `liberator`, but maybe I miss something. Am I miss something?</text>
  </message>
  <message conversation_id="165">
    <ts>2019-01-14T13:21:42.651500</ts>
    <user>Fairy</user>
    <text>any advice on how to parse this string (read-string "09")...  It's an invalid number, was gonna maybe strip zero's but if there's anything less complicated, i'd love to know :slightly_smiling_face:
```java.lang.NumberFormatException: Invalid number: 09```</text>
  </message>
  <message conversation_id="165">
    <ts>2019-01-14T13:23:01.652300</ts>
    <user>Rosaline</user>
    <text>```
user=&amp;gt; (Long/parseLong "09" 10)
9
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="165">
    <ts>2019-01-14T13:24:06.653000</ts>
    <user>Rosaline</user>
    <text>using read-string to turn a string in to a number is using a missile to swat a fly</text>
  </message>
  <message conversation_id="165">
    <ts>2019-01-14T13:25:07.653200</ts>
    <user>Elaine</user>
    <text>`read-string` is not safe
`(read-string "#=(prn :code-injection)")`
Prefer `edn/read-string`
But sure, to parse a number, you can use `Long` or `(bigdec "09")`</text>
  </message>
  <message conversation_id="165">
    <ts>2019-01-14T13:25:08.653400</ts>
    <user>Fairy</user>
    <text>lol</text>
  </message>
  <message conversation_id="165">
    <ts>2019-01-14T13:25:27.653600</ts>
    <user>Fairy</user>
    <text>thanks &lt;@Rosaline&gt;!</text>
  </message>
  <message conversation_id="165">
    <ts>2019-01-14T13:25:38.653900</ts>
    <user>Vita</user>
    <text>also read-string has security implications if it’s user input</text>
  </message>
  <message conversation_id="165">
    <ts>2019-01-14T13:25:45.654300</ts>
    <user>Vita</user>
    <text>`(read-string "#=(slurp \"/etc/passwd\")")`</text>
  </message>
  <message conversation_id="165">
    <ts>2019-01-14T13:34:50.655100</ts>
    <user>Fairy</user>
    <text>cool good to know !</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T13:49:57.656600</ts>
    <user>Isa</user>
    <text>What do you use for sessions in *clouds* with solution like kubernetes? `redis` to store sessions? `sessionAffinity`? I think the best solution is `redis`, but maybe I am in mistake :slightly_smiling_face: What do you use to store sessions and why?</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T13:53:01.658200</ts>
    <user>Fairy</user>
    <text>I've used Redis for session stores all the way back to my Ruby on Rails days, so I just use the same thing in clojure apps.</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T13:54:42.659800</ts>
    <user>Fairy</user>
    <text>But... my new app uses a datomic db. So I could probably just use that. But I'm also using redis for a message queue, so, why not... If it ain't broke.</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T13:55:09.660400</ts>
    <user>Isa</user>
    <text>redis is probably faster for session purpose - my guess</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T13:55:25.660700</ts>
    <user>Fairy</user>
    <text>Also I guess redis is nice too for expiring sessions.</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T13:56:26.661700</ts>
    <user>Isa</user>
    <text>Cool you can use Datomic. It is a little expensive :wink:</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T13:56:47.662000</ts>
    <user>Fairy</user>
    <text>yeah... i presume redis is faster. But then again, I'm storing a session key and a user id value, and then looking the user up in datomic anyways.</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T14:04:27.662300</ts>
    <user>Isa</user>
    <text>hmm make sense</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T14:04:46.662600</ts>
    <user>Isa</user>
    <text>but the point is you have a token for session</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T14:08:33.664000</ts>
    <user>Meagan</user>
    <text>&lt;@Fairy&gt; for temporary session-state type things, redis would be a better fit than datomic</text>
  </message>
  <message conversation_id="166">
    <ts>2019-01-14T14:09:57.665300</ts>
    <user>Meagan</user>
    <text>datomic is best used as a system of record. for sessions that you want to throw away after 30 mins or whatever, you're going to end up growing your database very quickly and probably don't need a lot of what datomic brings to the table (at the cost of increased overhead)</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:33:05.670300</ts>
    <user>Antione</user>
    <text>Best way to implement `first-and-only`, which checks that there is only one item in coll, and throws otherwise?

```
(first-and-only [1]) =&amp;gt; 1
(first-and-only []) =&amp;gt; Exception
(first-and-only [1 2 3]) =&amp;gt; Exception
(first-and-only nil) =&amp;gt; Exception
(first-and-only 1) =&amp;gt; Exception
(first-and-only [nil]) =&amp;gt; nil
(first-and-only [nil nil]) =&amp;gt; Exception
```</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:34:16.671300</ts>
    <user>Antione</user>
    <text>```
(defn first-and-only [x]
  (if (coll? x)
    (if (and (seq x)
             (next x)
             (first x))
      (throw (Exception. "too many"))
      (first x))
    (throw (Exception. "not a coll"))))
```
is close, but for instance, wouldn't catch the scenario where the `next` element is `nil`</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:35:28.671700</ts>
    <user>Gillian</user>
    <text>Can’t you just count and see if it has 1 item in it?</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:36:23.672300</ts>
    <user>Antione</user>
    <text>i don't want to `count` if i can avoid it</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:36:29.672500</ts>
    <user>Gillian</user>
    <text>why not?</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:36:39.672900</ts>
    <user>Antione</user>
    <text>if it contains 1029438294839248392 elements, i don't want to count all of them</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:37:33.673300</ts>
    <user>Gillian</user>
    <text>ah that’s fair</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:37:58.674200</ts>
    <user>Jasmine</user>
    <text>There’s `bounded-count`</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:38:06.674400</ts>
    <user>Antione</user>
    <text>there's a way to do this. i've written this maybe 4 times, but i forget the solution</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:38:19.674800</ts>
    <user>Antione</user>
    <text>ah, never used bounded-count, but that's cool!</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:48:24.675300</ts>
    <user>Antione</user>
    <text>```
(defn first-and-only [x]
  (if (coll? x)
    (let [bc (bounded-count 1 x)]
      (condp = bc
        0 (throw (Exception. "not enough"))
        1 (first x)
        (throw (Exception. "too many")) ))
    (throw (Exception. "not a collection"))))
```

bleep bloop</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T18:56:29.676000</ts>
    <user>Elaine</user>
    <text>&lt;@Antione&gt; solutin with &lt;#C0FVDQLQ5|specter&gt;
```
(select-one! ALL [1])
;; =&amp;gt; 1
;; This thows with a 'good' error
(select-one! ALL [])
(select-one! ALL (range))
(select-one! ALL [1 2])
```</text>
  </message>
  <message conversation_id="168">
    <ts>2019-01-14T18:57:03.676700</ts>
    <user>Becki</user>
    <text>If the bounded count throws the right error you might just be able to use and bounded count = 1 and then first</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T19:20:56.677300</ts>
    <user>Antione</user>
    <text>&lt;@Becki&gt; good point</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T19:22:00.678200</ts>
    <user>Antione</user>
    <text>&lt;@Becki&gt; mm, it does not throw</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T19:22:41.678900</ts>
    <user>Antione</user>
    <text>it handles the "potentially giant unrealized sequence" scenario</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T19:23:23.679700</ts>
    <user>Becki</user>
    <text>I meant on a non collection it should throw. It seems like you want exceptions here. </text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T19:23:50.680000</ts>
    <user>Antione</user>
    <text>ahhh</text>
  </message>
  <message conversation_id="167">
    <ts>2019-01-14T19:24:39.681200</ts>
    <user>Becki</user>
    <text>And then you just throw if the bounded count is not exactly 1</text>
  </message>
  <message conversation_id="169">
    <ts>2019-01-14T22:57:26.682100</ts>
    <user>Donny</user>
    <text>read-string cannot recognize a decimal number headed with 0, but it recognizes "00" - "07", why? they're considered as octal ones</text>
  </message>
  <message conversation_id="170">
    <ts>2019-01-15T00:22:46.682500</ts>
    <user>Diamond</user>
    <text>`case`</text>
  </message>
  <message conversation_id="171">
    <ts>2019-01-15T06:22:16.684900</ts>
    <user>Aubrey</user>
    <text>&amp;gt; As some of you probably know, Christophe Grand has joined nREPL’s team and is working on bringing some amazing features from unrepl to nREPL:

&amp;gt; The ability to upgrade a plain socket REPL to nREPL.
&amp;gt; Sideloading - allowing clients to act as network classloaders.
&amp;gt; A rich value printer with collection elision.
&amp;gt; (Extremely) Exciting times ahead! I cannot thank Christophe enough for the amazing work he has been doing on nREPL recently! People like him are the heart and soul of the Clojure community and the reason why I love being part of it!</text>
  </message>
  <message conversation_id="171">
    <ts>2019-01-15T06:22:24.685200</ts>
    <user>Aubrey</user>
    <text>Wow, this is very exciting news</text>
  </message>
  <message conversation_id="171">
    <ts>2019-01-15T06:22:30.685400</ts>
    <user>Aubrey</user>
    <text>(from &lt;https://metaredux.com/posts/2019/01/15/cider-oslo.html&gt;)</text>
  </message>
  <message conversation_id="172">
    <ts>2019-01-15T06:54:15.686500</ts>
    <user>Clarine</user>
    <text>Is there a JSON library which lets you only read what you need from a JSON string, to save performance? Like what you would do when writing your own JSON deserializer for a type in e.g. Java or Haskell.</text>
  </message>
  <message conversation_id="173">
    <ts>2019-01-15T07:21:11.687600</ts>
    <user>Epifania</user>
    <text>is there any way I can hook into `ring.middleware.reload` when it's actually doing a reload? Would like to perform some custom task when it's reloaded (specially restart a task that runs every X seconds)</text>
  </message>
  <message conversation_id="173">
    <ts>2019-01-15T07:21:52.688000</ts>
    <user>Epifania</user>
    <text>looking for something similar to `on-js-reload` from figwheel, which lets you run code when the code has changed</text>
  </message>
  <message conversation_id="174">
    <ts>2019-01-15T07:41:25.690900</ts>
    <user>Isa</user>
    <text>Ring reload event only if ns which you point to is reloaded. I have dev/user.clj which is wrapper app on core app with extra middleware. You can add to this ns restart task code.</text>
  </message>
  <message conversation_id="174">
    <ts>2019-01-15T07:42:12.691600</ts>
    <user>Isa</user>
    <text>I am writing from phone. Sorry if too general </text>
  </message>
  <message conversation_id="173">
    <ts>2019-01-15T08:31:22.692100</ts>
    <user>Epifania</user>
    <text>ah, right, so basically just split things up more. Makes sense. Thanks &lt;@Isa&gt;</text>
  </message>
  <message conversation_id="175">
    <ts>2019-01-15T08:54:49.692800</ts>
    <user>Marisha</user>
    <text>Hi all. Does anyone have any tips on how to deal with clojure metadata on the Java side?</text>
  </message>
  <message conversation_id="175">
    <ts>2019-01-15T08:55:42.693900</ts>
    <user>Marisha</user>
    <text>I have some data with my own metadata attached which I need to pass on to Java code. How do people normally deal with this?</text>
  </message>
  <message conversation_id="176">
    <ts>2019-01-15T10:51:01.695200</ts>
    <user>Maximina</user>
    <text>Is there a way to to (str #inst "2018-10-15T14:45:07.000000000-00:00") without the time being converted to my time zone?</text>
  </message>
  <message conversation_id="176">
    <ts>2019-01-15T10:53:59.695900</ts>
    <user>Jasmine</user>
    <text>Yes, you really need to look into java time stamp formatting </text>
  </message>
  <message conversation_id="176">
    <ts>2019-01-15T10:54:31.696800</ts>
    <user>Jasmine</user>
    <text>Clojure really relies on the jdk for all that stuff</text>
  </message>
  <message conversation_id="176">
    <ts>2019-01-15T10:55:26.697100</ts>
    <user>Maximina</user>
    <text>Will do, thanks</text>
  </message>
  <message conversation_id="176">
    <ts>2019-01-15T10:59:05.697700</ts>
    <user>Maximina</user>
    <text>Answer to my question: use SimpleDateFormat</text>
  </message>
  <message conversation_id="177">
    <ts>2019-01-15T12:19:50.698500</ts>
    <user>Dann</user>
    <text>the metadata is accessible via a method on the Object it's attached to, but you can just use `meta` via `Clojure.var` ```IFn meta = Clojure.var("clojure.core", "meta");
meta.invoke(o);```</text>
  </message>
  <message conversation_id="177">
    <ts>2019-01-15T12:22:24.698800</ts>
    <user>Dann</user>
    <text>if you cast the object to `IFn`, java should let you call the `meta` method ```o.meta();```, but I think the meta function is more reliable as an entrypoint</text>
  </message>
  <message conversation_id="177">
    <ts>2019-01-15T12:24:01.699000</ts>
    <user>Dann</user>
    <text>But maybe I misunderstood? Are you doing this from Clojure and just want to know how to pass the metadata?</text>
  </message>
  <message conversation_id="178">
    <ts>2019-01-15T15:30:16.700900</ts>
    <user>Isa</user>
    <text>Is it possible to read session value with &lt;https://github.com/xeqi/peridot&gt; ? I am doing this now in that way:
```
(-&amp;gt;&amp;gt; (get-in mock [:cookie-jar "localhost" "ring-session" :value])
               (get @mem)
               :uuid
               (some?))
```

But it would be nice to use come kind of ring reader from session instead.</text>
  </message>
  <message conversation_id="179">
    <ts>2019-01-15T22:14:47.704900</ts>
    <user>Lexie</user>
    <text>Hi all! Extreme noob to Clojure here. Cider aside.. which dev environment is most suited for beginner Counterclockwise/ Cursive ? Any links on how to setup a dev environment ?</text>
  </message>
  <message conversation_id="180">
    <ts>2019-01-16T00:15:23.705300</ts>
    <user>Meagan</user>
    <text>I would suggest Cursive or VS Code + Calva</text>
  </message>
  <message conversation_id="180">
    <ts>2019-01-16T00:15:43.705900</ts>
    <user>Meagan</user>
    <text>Counterclockwise hasn’t seen much love in the past years and so getting support for issues you run into might be difficult</text>
  </message>
  <message conversation_id="180">
    <ts>2019-01-16T00:24:52.706400</ts>
    <user>Jasmine</user>
    <text>CCW is no longer developed and I don’t think works on newer versions of Java/Clojure</text>
  </message>
  <message conversation_id="178">
    <ts>2019-01-16T01:03:18.707600</ts>
    <user>Isa</user>
    <text>If you use emacs, use Cider. If Intellij use Cursive. If none, use Cursive, because Intellij is easier than emacs. You don’t want to learn hard editor + Clojure at the same time.</text>
  </message>
  <message conversation_id="178">
    <ts>2019-01-16T01:05:20.708400</ts>
    <user>Isa</user>
    <text>*harder editor doesn’t mean better. It is different depend on your preference.</text>
  </message>
  <message conversation_id="178">
    <ts>2019-01-16T01:06:25.709500</ts>
    <user>Isa</user>
    <text>I would love to see stable and extended Clojure plugin for Visual Studio Code. But today you can choose only between emacs + cider / Intellij = Cursive I guess.</text>
  </message>
  <message conversation_id="178">
    <ts>2019-01-16T01:07:57.710000</ts>
    <user>Isa</user>
    <text>`brew install leiningen clojure` and you are ready to go :slightly_smiling_face:</text>
  </message>
  <message conversation_id="178">
    <ts>2019-01-16T01:08:40.710300</ts>
    <user>Isa</user>
    <text>`clojure` is `clj` command</text>
  </message>
  <message conversation_id="178">
    <ts>2019-01-16T01:22:34.712500</ts>
    <user>Celestine</user>
    <text>If you already use Atom, look at Chlorine or ProtoREPL. If you already use VS Code, use Calva. The main thing you want for learning Clojure is an integration between your editor and a REPL, so you can just hit a key combo and evaluate a form, a top-level form, or the entire file into that REPL — without typing into the REPL. All of those are sufficient.</text>
  </message>
  <message conversation_id="181">
    <ts>2019-01-16T01:23:15.713100</ts>
    <user>Celestine</user>
    <text>(and if you use vim, look at fireplace? I’m not familiar with the vim/Clojure ecosystem, sorry)</text>
  </message>
  <message conversation_id="178">
    <ts>2019-01-16T01:24:06.713600</ts>
    <user>Celestine</user>
    <text>For beginners, not having to struggle with the basics of an editor is a big help :slightly_smiling_face:</text>
  </message>
  <message conversation_id="182">
    <ts>2019-01-16T05:05:19.714100</ts>
    <user>Marisha</user>
    <text>Hey! Thanks</text>
  </message>
  <message conversation_id="182">
    <ts>2019-01-16T05:06:39.714300</ts>
    <user>Marisha</user>
    <text>Yes, I'm doing it from Clojure, but the data needs to go through some Java and back.
So I'm thinking what's the best way of doing that.</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:39:00.717300</ts>
    <user>Raelene</user>
    <text>A macro question:
```
(defmacro transact!
  ""
  [&amp;amp; body] 
  `(jdbc/with-db-transaction [conn# db]
     ~@(map (fn [transaction]
              `(jdbc/execute! conn# ~(honeysql/format transaction)))
            body)))

&amp;gt; (macroexpand-1 '(transact!
                                    (-&amp;gt; (insert-into :foo)
                                        (values [{:id (java.util.UUID/randomUUID)}]))))
=&amp;gt;
(clojure.java.jdbc/with-db-transaction
 [conn__27812__auto__ db-adapter.sqlite/db]
 (clojure.java.jdbc/execute!
  conn__27811__auto__
  (honeysql.core/format
   (-&amp;gt;
    (insert-into :foo)
    (values [{:id (java.util.UUID/randomUUID)}])))))
```
The inner `conn#`, expanded, is a different one than the outer `conn#`. How to make the `conn#`s the same symbol?</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:42:49.718700</ts>
    <user>Karena</user>
    <text>&lt;@Raelene&gt; it has to do with the two layers of quoting</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:43:22.719400</ts>
    <user>Karena</user>
    <text>try removing the quote on `(jdbc/execute! ...)`</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:44:24.720000</ts>
    <user>Karena</user>
    <text>```
(defmacro foo
  [&amp;amp; body]
  `(let [conn# ~body]
     (prn conn#)))
;; conn# is the same 

(defmacro foo
  [&amp;amp; body]
  `(let [conn# ~body]
     `(prn conn#)))
;; conn# is different
```</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:48:57.722200</ts>
    <user>Raelene</user>
    <text>Yep, it is the layering but removing the quoting does not work in this case. Because the `map` is evaluated, it tries to evaluate `conn#` at compile time which is not possible.</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:53:35.724700</ts>
    <user>Lemuel</user>
    <text>&lt;@Raelene&gt; I would make the macro ```(jdbc/with-db-transaction [conn# db] (doto conn# ~@(map (fn [transaction] `(jdbc/execute! ~(honeysql/format transaction))))))``` &amp;lt;-- admittedly just avoids the problem</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:54:16.725200</ts>
    <user>Becki</user>
    <text>can you use a let binding in the macro to capture `conn#` and then use that common binding in both quoted forms?</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:56:29.726100</ts>
    <user>Becki</user>
    <text>an example: &lt;https://github.com/ztellman/manifold/blob/master/src/manifold/deferred.clj#L309-L325&gt;</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:58:09.726900</ts>
    <user>Raelene</user>
    <text>&lt;@Becki&gt; Great, this seems to be the solution around this multi-layer-macro problem.</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:58:23.727600</ts>
    <user>Becki</user>
    <text>i think ztellman solves this problem as well in ridley with a way to unify gensyms across quote boundaries like this</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T09:58:24.727700</ts>
    <user>Raelene</user>
    <text>&lt;@Lemuel&gt; Thanks, this works too, great.</text>
  </message>
  <message conversation_id="183">
    <ts>2019-01-16T10:00:29.728700</ts>
    <user>Becki</user>
    <text>&lt;@Raelene&gt; read this section of zach's Potemkin library: &lt;https://github.com/ztellman/potemkin#unify-gensyms&gt;   (not advocating use necessarily. not advocating use but he for sure has thought of a great many problems)</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T10:10:38.730500</ts>
    <user>Loria</user>
    <text>Is there any way to collect the statistics from a `criterium` benchmark? Trying to determine the time complexity of an algorithm by running it against different inptus</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T10:51:52.732900</ts>
    <user>Raelene</user>
    <text>&lt;@Loria&gt; not sure what you mean by statistics, but if you referring to the outputs of e.g. `bench`, run it against all your inputs inside `with-out-str` and transform/write the resulting string somewhere.</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T11:01:31.733400</ts>
    <user>Loria</user>
    <text>oh.. I suppose that's one way to do it</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T11:02:20.734200</ts>
    <user>Loria</user>
    <text>Strange to have to write a parser when surely those values are around as actual numbers somewhere? I tried searching through the documentation but couldn't find anything</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T11:14:25.736000</ts>
    <user>Raelene</user>
    <text>&lt;@Loria&gt; Yep, thats stupid :slightly_smiling_face: `criterium.core/benchmark` returns the result as data &lt;http://hugoduncan.org/criterium/0.4/api/criterium.core.html#var-benchmark&gt;</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T11:19:48.736700</ts>
    <user>Loria</user>
    <text>thanks, that's exactly what I needed!</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T11:22:45.737000</ts>
    <user>Loria</user>
    <text>```
(def timing-results
  (doall
   (for [n [5 10 15 20]]
     (criterium/quick-benchmark
      (fib n) nil))))

(map #(get-in % [:mean 0]) timing-results)
;; =&amp;gt;
;; (6.82956017409221E-7
;;  8.839126734896198E-6
;;  1.0012795602974459E-4
;;  0.0010987932789473685)
```</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T11:24:19.738200</ts>
    <user>Loria</user>
    <text>now to write a function which will look at that and estimate if it's O(n), O(n^2), O(n! log (n)) , etc.:thinking_face:</text>
  </message>
  <message conversation_id="185">
    <ts>2019-01-16T11:31:22.739300</ts>
    <user>Tammera</user>
    <text>That is probably more tricky than you would expect. I wouldn’t be surprised if there are mathematicians who spend their lives on that.</text>
  </message>
  <message conversation_id="185">
    <ts>2019-01-16T11:41:30.742100</ts>
    <user>Raelene</user>
    <text>Yep, especially since you will see things in the curve, that are due to the machine, not the ideal algorithm. E.g. jumps when certain chunk sizes are passed etc. Mathematicians usually don't care about such things.</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T12:08:22.746100</ts>
    <user>Loria</user>
    <text>Yeah, I don't need it to be very rigorous, just using this as a way of getting my head around the performance characteristics of `core.logic` programs - which seem really hard to reason about and blow up exponentially in unexpected ways.</text>
  </message>
  <message conversation_id="184">
    <ts>2019-01-16T12:11:13.748700</ts>
    <user>Loria</user>
    <text>I ended up just hacking together something in Python notebook which plots out the points and the regression lines for `logn n, nlogn, n^2 , 2^n`, then eyeball which curve fits best :sweat_smile:</text>
  </message>
  <message conversation_id="186">
    <ts>2019-01-16T13:15:02.749300</ts>
    <user>Dann</user>
    <text>the `meta` function retrieves the metadata, then you can use it with the java methods in whatever way makes sense</text>
  </message>
  <message conversation_id="186">
    <ts>2019-01-16T13:18:52.749500</ts>
    <user>Dann</user>
    <text>and if you need to round-trip, you can use with-meta to attach the metadata to a new data structure if needed - but this only works with Clojure things (vars, functions, persistent collections, symbols etc.)</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:13:05.750800</ts>
    <user>Tabitha</user>
    <text>why would I be getting an error about manifest type when depending on a git source?
```
             cider/piggieback                {:git/url "&lt;https://github.com/dpsutton/piggieback.git&gt;"
                                              :sha "fd99b9e3cfd2069a2484ba9e75dcd1bb04b78ed8"}
```

```
Error building classpath. Manifest type not detected when finding deps for cider/piggieback in coordinate {:git/url "&lt;https://github.com/dpsutton/piggieback.git&gt;", :sha "fd99b9e3cfd2069a2484ba9e75dcd1bb04b78ed8"}
```</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:16:57.751900</ts>
    <user>Jasmine</user>
    <text>tools.deps is trying to determine the transitive dependencies for piggieback, but is not finding a manifest it understands (deps.edn or pom.xml)</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:17:19.752300</ts>
    <user>Jasmine</user>
    <text>currently tools.deps doesn’t know how to read lein project.clj files</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:18:29.752800</ts>
    <user>Jasmine</user>
    <text>one option is to forcibly declare it as a deps.edn project (it then treats a missing deps.edn as no transitive deps)</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:19:21.753300</ts>
    <user>Jasmine</user>
    <text>you can do this by adding `:deps/manifest :deps` to your coordinate</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:20:06.753600</ts>
    <user>Becki</user>
    <text>i can run `lein pom` and push that to the remote too, can't i?</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:20:42.753800</ts>
    <user>Jasmine</user>
    <text>you could</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:20:58.754000</ts>
    <user>Jasmine</user>
    <text>make sure you move your sha then</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:23:10.754100</ts>
    <user>Becki</user>
    <text>use 0ab53c69a12812b6eb4000862f12447b4874a949</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:23:21.754300</ts>
    <user>Becki</user>
    <text>made a branch based on that change with a pom file added</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:23:58.754700</ts>
    <user>Tabitha</user>
    <text>gotcha, awesome, thanks!</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:24:09.754800</ts>
    <user>Tabitha</user>
    <text>nice</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:28:36.755000</ts>
    <user>Tabitha</user>
    <text>seems like we're not quite there yet,

but at this point I'm creating extra work for you, so I'll just pull it down and see if it works with a local dependency</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:29:24.755400</ts>
    <user>Tabitha</user>
    <text>None</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:31:20.755600</ts>
    <user>Becki</user>
    <text>try c4fbfdadb28a0d3c8700901677ab104d59ddbc27</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:31:35.755800</ts>
    <user>Tabitha</user>
    <text>trying...</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:32:11.756000</ts>
    <user>Becki</user>
    <text>one more:</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:32:11.756200</ts>
    <user>Becki</user>
    <text>403142e5017628ce447aebf2e4c0c82d482488c3</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:32:13.756400</ts>
    <user>Tabitha</user>
    <text>same error</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:32:17.756600</ts>
    <user>Tabitha</user>
    <text>trying...</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:32:24.756800</ts>
    <user>Becki</user>
    <text>the pom had an issue with a dep on tools.nrepl</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:33:14.757100</ts>
    <user>Tabitha</user>
    <text>{:git/url "&lt;https://github.com/dpsutton/piggieback.git&gt;"  :sha "403142e5017628ce447aebf2e4c0c82d482488c3"}

same error with that</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:34:30.757700</ts>
    <user>Jasmine</user>
    <text>the generated pom just isn’t including your source files</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:36:05.759000</ts>
    <user>Jasmine</user>
    <text>you could just use a deps.edn file like:
```
{:deps
 {org.clojure/clojure {:mvn/version "1.8.0"}
  org.clojure/clojurescript {:mvn/version "1.9.946"}
  nrepl {:mvn/version "0.4.5"}}}```</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:36:34.759500</ts>
    <user>Jasmine</user>
    <text>probably don’t even need nrepl there</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:36:53.759900</ts>
    <user>Jasmine</user>
    <text>oh, maybe you do, not sure</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:36:56.760100</ts>
    <user>Becki</user>
    <text>assumes src dir without explicitly putting that? I think it was lacking dirs from the lein generated pom due to profiles</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:37:13.760600</ts>
    <user>Tabitha</user>
    <text>the nrepl is for working with intellij</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:37:14.760700</ts>
    <user>Jasmine</user>
    <text>by default it uses `src` as the source directory</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:37:27.761300</ts>
    <user>Jasmine</user>
    <text>but you could add `:paths ["src"]` to be explicit</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:37:31.761500</ts>
    <user>Becki</user>
    <text>ok. that's what i thought. just making sure i didn't end up with the same problem</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:37:55.761600</ts>
    <user>Becki</user>
    <text>one more:</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:37:56.761800</ts>
    <user>Becki</user>
    <text>7bbe53ed38dfd79c3e9375d875d8c755a143a4b0</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:38:01.762000</ts>
    <user>Tabitha</user>
    <text>on it</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:38:02.762200</ts>
    <user>Becki</user>
    <text>this switches to deps.edn</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:38:05.762400</ts>
    <user>Becki</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:38:57.762600</ts>
    <user>Tabitha</user>
    <text>SUCCESS!</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:39:18.763000</ts>
    <user>Tabitha</user>
    <text>ill play with it for a bit and make sure nothing is weird</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:39:29.763600</ts>
    <user>Becki</user>
    <text>thanks for the help &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:39:43.764100</ts>
    <user>Jasmine</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:42:54.765200</ts>
    <user>Jerome</user>
    <text>If I’m using `doto`, is there a clearer way to call `doseq` inside of it instead of wrapping an anonymous function in a function literal? If I want to use `doto` right now I have to do this -
```
(doto (Ctor.)
 (#(doseq [[a b] c]
     (.aMethod % a b))))
```</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:43:24.765500</ts>
    <user>Tabitha</user>
    <text>yessss this is so great.  feels so good to be able to do this again</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:44:26.766200</ts>
    <user>Jerome</user>
    <text>Leaning towards just doing this because I think it reads better -
```
(let [obj (Ctor.)]
  (do
    (doseq [[a b] c]
      (.aMethod obj a b))
    obj))
```</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:45:47.767100</ts>
    <user>Tabitha</user>
    <text>ah, the old doodooseq</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:46:33.768000</ts>
    <user>Rosaline</user>
    <text>`(reduce #(doto %1 (.aMethod (first %2) (second %2))) obj c)`</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:47:32.769200</ts>
    <user>Rosaline</user>
    <text>that is assuming c isn't static, if c is a known value, I would write some code to generate the method calls and just paste them in</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:50:19.771000</ts>
    <user>Tabitha</user>
    <text>```
(dorun (map (comp (partial apply .aMethod)
                       (juxt (constantly obj) first second))  c))
```</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:50:29.771300</ts>
    <user>Tabitha</user>
    <text>lol, I have no idea what those values are</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:52:33.772200</ts>
    <user>Tabitha</user>
    <text>there we go</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:54:00.773300</ts>
    <user>Dann</user>
    <text>as a small thing, you can replace `(dorun (map ...))` with `(run! ...)`</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:54:00.773400</ts>
    <user>Jerome</user>
    <text>Feel like that’s going to generate reflection warnings?</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:54:39.774100</ts>
    <user>Jerome</user>
    <text>Our project fails compilation if there are any reflection warnings, but I’ve never tried `apply .someJavaMethod`</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:55:01.774300</ts>
    <user>Dann</user>
    <text>that simply doesn't work</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:55:01.774400</ts>
    <user>Tabitha</user>
    <text>great tip!  i didnt know that!</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:55:19.774800</ts>
    <user>Tabitha</user>
    <text>hahaha</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:55:28.775300</ts>
    <user>Jerome</user>
    <text>Yeahh seemed dubious haha</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:55:39.775700</ts>
    <user>Tabitha</user>
    <text>sorry!  i diidnt test my solution at all :joy:</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:55:40.775800</ts>
    <user>Jerome</user>
    <text>Also people on my team would hate me for that</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:55:48.776000</ts>
    <user>Hilary</user>
    <text>&lt;https://github.com/clojure/clojure/blob/28b87d53909774af28f9f9ba6dfa2d4b94194a57/src/jvm/clojure/lang/AFn.java#L143&gt;</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:56:19.776600</ts>
    <user>Hilary</user>
    <text>`apply` relies on :point_up:</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:56:31.776700</ts>
    <user>Dann</user>
    <text>let already has an implicit do in the body btw, so using do there is redundant</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:57:02.777200</ts>
    <user>Dann</user>
    <text>not only that, but .someJavaMethod isn't a thing we can put on the stack</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:57:26.777800</ts>
    <user>Dann</user>
    <text>. is an interop form, on compilation it generates code to (optionally reflect) and invoke a method</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T14:57:41.778400</ts>
    <user>Dann</user>
    <text>it doesn't point to any real thing that you can use as an arg or put in a collection</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T14:58:17.779100</ts>
    <user>Jerome</user>
    <text>Yeah that makes sense, and this isn’t even a static method</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T15:03:54.779500</ts>
    <user>Tabitha</user>
    <text>alright everyone, I hate my idea too</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T15:05:40.780300</ts>
    <user>Dann</user>
    <text>you can succinctly make a function that calls a method via memfn: `(memfn someJavaMethod)` - this is first class, can be used with apply or map etc.</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:09:18.782000</ts>
    <user>Jasmine</user>
    <text>But will reflect</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:09:40.782400</ts>
    <user>Noemi</user>
    <text>when I load open the project I'm interactively developing in emacs/cider, I have to open all the clj files that contain functions I call in my main 'runner' file and eval them to avoid class not found errors... what am I doing wrong?</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:10:34.783000</ts>
    <user>Jerome</user>
    <text>Oh interesting, didn’t know about `memfn`</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T15:11:13.783600</ts>
    <user>Becki</user>
    <text>&lt;@Noemi&gt; did you load the main runner file? `cider-load-buffer` (C-c C-k) by default</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:11:28.784200</ts>
    <user>Becki</user>
    <text>if it has a valid ns form with deps it should pull all of that in as normal</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:12:08.785000</ts>
    <user>Noemi</user>
    <text>I did load the main runner file with C-c C-k without incident but still having to go load all the namespaces mentioned.</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:12:23.785300</ts>
    <user>Noemi</user>
    <text>using lein repl, and cider-connect, if it matters.</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:12:41.785700</ts>
    <user>Dann</user>
    <text>you need to require the namespaces that your runner accesses</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:12:50.786200</ts>
    <user>Becki</user>
    <text>and are you in the namespace of the main runner?</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T15:12:54.786400</ts>
    <user>Dann</user>
    <text>that should either error (if they can't be found) or guarantee they are loaded</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:13:23.787100</ts>
    <user>Noemi</user>
    <text>I believe I did those things, but I'll do it all from scratch to double check everything; stand by (and thanks!).</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T15:13:53.787200</ts>
    <user>Dann</user>
    <text>as long as you access the function from the main runner properly, there's no need to be in that ns</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:15:00.787400</ts>
    <user>Becki</user>
    <text>i'm wondering if there is some confusion that those deps required by the main runner are "visible" in that namespace but not visible from the current ns. Its hard to tell if this is a bug or users error</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:16:40.787900</ts>
    <user>Tabitha</user>
    <text>oh yeah +1 about memfn, thats neat!</text>
  </message>
  <message conversation_id="188">
    <ts>2019-01-16T15:17:02.788300</ts>
    <user>Tabitha</user>
    <text>&lt;@Dann&gt; you've really made it worth my while to hang out here today!</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T15:26:01.789500</ts>
    <user>Noemi</user>
    <text>&lt;@Becki&gt; &lt;@Dann&gt; lesson learned, and never forgotten. I was missing the parent directory in src with the project name; my clj files were directly in src for some reason; everything evaluates now.</text>
  </message>
  <message conversation_id="189">
    <ts>2019-01-16T16:05:43.790800</ts>
    <user>Nguyet</user>
    <text>`(map #(foo % baz) bars)` vs `(map foo bars (repeat baz))`</text>
  </message>
  <message conversation_id="187">
    <ts>2019-01-16T16:10:11.791000</ts>
    <user>Becki</user>
    <text>the former for me</text>
  </message>
  <message conversation_id="190">
    <ts>2019-01-16T18:24:54.791800</ts>
    <user>Reiko</user>
    <text>I'd recommend Cursive. It's been the most complete environment for me and gets solid updates. Other environments I've been left in a broken state when the developer(s) of the tool get upset that something changed in core and they leave instead of fixing it. I can't deal with that instability.</text>
  </message>
  <message conversation_id="190">
    <ts>2019-01-16T18:27:46.792400</ts>
    <user>Reiko</user>
    <text>I don't know about Chlorine, but I know ProtoRepl doesn't really support ClojureScript. If the person is only writing Clojure then it works well.</text>
  </message>
  <message conversation_id="190">
    <ts>2019-01-16T18:30:41.793500</ts>
    <user>Reiko</user>
    <text>PSA: Slack supports syntax highlighting for Clojure(Script) if you use the code snippet function over the code blocks. Makes your code easier to read here!</text>
  </message>
  <message conversation_id="191">
    <ts>2019-01-16T18:45:15.793700</ts>
    <user>Celestine</user>
    <text>My understanding is that Chlorine is great if you're using `shadow-cljs` but not other ClojureScript build/dev tools. Since Chlorine is written in cljs and uses `shadow-cljs` and that's how it is developed (using itself).</text>
  </message>
  <message conversation_id="192">
    <ts>2019-01-16T18:47:05.794200</ts>
    <user>Jerome</user>
    <text>```
(map fn coll)
```</text>
  </message>
  <message conversation_id="192">
    <ts>2019-01-16T18:47:09.794400</ts>
    <user>Jerome</user>
    <text>Hmm</text>
  </message>
  <message conversation_id="192">
    <ts>2019-01-16T18:47:14.794700</ts>
    <user>Jerome</user>
    <text>Not the same as GitHub’s</text>
  </message>
  <message conversation_id="192">
    <ts>2019-01-16T18:48:43.795300</ts>
    <user>Jerome</user>
    <text>Oh you mean by clicking the “+” icon</text>
  </message>
  <message conversation_id="192">
    <ts>2019-01-16T18:48:48.795500</ts>
    <user>Jerome</user>
    <text>Yeah but that’s a pain</text>
  </message>
  <message conversation_id="192">
    <ts>2019-01-16T18:49:10.795800</ts>
    <user>Jerome</user>
    <text>At least for small things</text>
  </message>
  <message conversation_id="192">
    <ts>2019-01-16T18:49:31.796500</ts>
    <user>Jerome</user>
    <text>Yeah I wanted it to work that way too &lt;@Dann&gt;</text>
  </message>
  <message conversation_id="193">
    <ts>2019-01-16T19:28:40.796700</ts>
    <user>Reiko</user>
    <text>It's actually less work than typing out the backticks...and it's also a pain to read a bunch of lisp code with no syntax highlighting, especially when someone is asking for help on it.</text>
  </message>
  <message conversation_id="193">
    <ts>2019-01-16T19:31:04.796900</ts>
    <user>Reiko</user>
    <text>Naturally, for a single line of code that wouldn't be necessary.</text>
  </message>
  <message conversation_id="193">
    <ts>2019-01-16T19:34:01.797100</ts>
    <user>Lexie</user>
    <text>absolutely &lt;@Reiko&gt;</text>
  </message>
  <message conversation_id="193">
    <ts>2019-01-16T19:34:53.797400</ts>
    <user>Reiko</user>
    <text>Well that's good to know. I use shadow-cljs myself, but the issue is if I need to use some other tool for whatever reason then now I have to change my entire development environment over a tool being switched out. That's disruptive.</text>
  </message>
  <message conversation_id="193">
    <ts>2019-01-16T19:36:04.797700</ts>
    <user>Lexie</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="193">
    <ts>2019-01-16T19:38:52.797900</ts>
    <user>Celestine</user>
    <text>Go open an issue on the Chlorine repo then :slightly_smiling_face:</text>
  </message>
  <message conversation_id="193">
    <ts>2019-01-16T19:39:57.798100</ts>
    <user>Celestine</user>
    <text>I'm pretty sure the maintainer is very open to supporting a broader set of cljs workflows. He seems very receptive and helpful in the &lt;#CF02KPG4U|chlorine&gt; channel.</text>
  </message>
  <message conversation_id="193">
    <ts>2019-01-16T19:46:41.798300</ts>
    <user>Reiko</user>
    <text>That's great, but the reality is that it only supports one tool and thus creates this situation. I'm sure I'm not the first to address such a concern. If that changes in the future I'd be happy to check it out.</text>
  </message>
  <message conversation_id="194">
    <ts>2019-01-16T20:38:47.801200</ts>
    <user>Mireille</user>
    <text>Could someone explain this result? I thought that the value of an atom is always fully realized (not lazy), so I would expect the `pr-str` to take much less time.
```=&amp;gt; (let [a (atom (take 10 (repeatedly #(Thread/sleep 1000))))]
    (time (pr-str @a)))
"Elapsed time: 10043.797237 msecs"
```</text>
  </message>
  <message conversation_id="194">
    <ts>2019-01-16T20:42:40.802100</ts>
    <user>Celestine</user>
    <text>You're deref'ing the atom to get its value -- which is a lazy seq -- and then you're printing it to a string which is realizing the value.</text>
  </message>
  <message conversation_id="194">
    <ts>2019-01-16T20:43:29.803000</ts>
    <user>Celestine</user>
    <text>So the 10 seconds is the time it takes `pr-str` to realize the `take 10` -- the deref `@a` would have been near-instantaneous.</text>
  </message>
  <message conversation_id="194">
    <ts>2019-01-16T20:44:12.803200</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (let [a (atom (take 10 (repeatedly #(Thread/sleep 1000))))]
         (time @a))
"Elapsed time: 0.007343 msecs"
```</text>
  </message>
  <message conversation_id="194">
    <ts>2019-01-16T20:45:17.804000</ts>
    <user>Celestine</user>
    <text>An atom can contain anything -- it's just a container, and it doesn't "do" anything to its contents.</text>
  </message>
  <message conversation_id="194">
    <ts>2019-01-16T20:45:26.804300</ts>
    <user>Celestine</user>
    <text>^ &lt;@Mireille&gt; does that help?</text>
  </message>
  <message conversation_id="195">
    <ts>2019-01-16T23:28:34.805500</ts>
    <user>Jasmine</user>
    <text>well, it should only contain immutable values since the swap! function can be applied more than once in the case of concurrent updates</text>
  </message>
  <message conversation_id="194">
    <ts>2019-01-16T23:53:58.806700</ts>
    <user>Mireille</user>
    <text>&lt;@Celestine&gt; I see, so if I want the value to be realized before any derefs, I'd need to do that explicitly, like wrap the computation with `doall`. thanks for the insight</text>
  </message>
  <message conversation_id="194">
    <ts>2019-01-16T23:57:24.807300</ts>
    <user>Celestine</user>
    <text>Yes, the same applies to laziness vs eagerness anywhere in Clojure really.</text>
  </message>
  <message conversation_id="195">
    <ts>2019-01-17T02:39:11.809800</ts>
    <user>Sebrina</user>
    <text>I’m thinking of writing a boot task for replacing shortcodes in a markdown file using user-defined functions that return hiccup. Based on other libs I think there should be a `defshortcode` macro for defining them. How are those handled in other libs? Does it update an atom with a map of properties and a function body?</text>
  </message>
  <message conversation_id="195">
    <ts>2019-01-17T02:39:36.810300</ts>
    <user>Sebrina</user>
    <text>I think data wise it’s important to know the defined shortcodes up front</text>
  </message>
  <message conversation_id="196">
    <ts>2019-01-17T05:45:00.812500</ts>
    <user>Donny</user>
    <text>is there any way to run some simple fns inside a clojure jar on android with a much faster startup speed?</text>
  </message>
  <message conversation_id="196">
    <ts>2019-01-17T05:57:36.813200</ts>
    <user>Epifania</user>
    <text>how are people dealing with communication between components in `stuartsierra/component`?</text>
  </message>
  <message conversation_id="197">
    <ts>2019-01-17T06:28:20.813500</ts>
    <user>Melina</user>
    <text>Two components can communicate by one of them depending on another and using it. Do you have some other communication in mind?</text>
  </message>
  <message conversation_id="198">
    <ts>2019-01-17T07:02:49.813700</ts>
    <user>Epifania</user>
    <text>Well, I might misunderstand something regarding the usage of component... So let's say I have a DB and Web components. The Web component depends on the DB one to do responses with values from the DB. But if I want to change the DB from Web, the state is within DB and cannot be changed from Web.</text>
  </message>
  <message conversation_id="198">
    <ts>2019-01-17T07:05:53.813900</ts>
    <user>Epifania</user>
    <text>right now I'm just doing the DB as a simple map that get's stored/load to/from disk. Seemingly, I need to implement this as global state together with the DB component, but then I'm relying on global state...</text>
  </message>
  <message conversation_id="198">
    <ts>2019-01-17T07:46:50.814100</ts>
    <user>Clarine</user>
    <text>The web component has a refererence to the db component, so it can read and write to the DB. I don’t understand your problem.</text>
  </message>
  <message conversation_id="198">
    <ts>2019-01-17T07:47:13.814300</ts>
    <user>Clarine</user>
    <text>A DB is one huge global mutable variable, so that seems OK</text>
  </message>
  <message conversation_id="198">
    <ts>2019-01-17T07:47:40.814500</ts>
    <user>Clarine</user>
    <text>you can model the DB with an atom that has a map in it</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:35:00.818000</ts>
    <user>Oscar</user>
    <text>started trying out spec after having used schema and core.typed. one thing I noticed, compared to core.typed, spec’ing records is kind of laborious and overly verbose. is this something spec proper would ever address (even if just a macro) or should every one fend for themselves and write their own macros? I suppose there’s a third option which is the core team wants to discourage the use of records and/or their use with spec?</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:36:21.818200</ts>
    <user>Jasmine</user>
    <text>kind of a latent question</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:36:54.818600</ts>
    <user>Jasmine</user>
    <text>you can spec them as maps with s/keys and :req-un</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:37:07.819100</ts>
    <user>Jasmine</user>
    <text>there are some ideas we have in spec 2 that might apply better but TBD</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:38:34.820400</ts>
    <user>Oscar</user>
    <text>yep, I have, and it’s gross. =P we wrote a macro to fix that, but curious if the need to write such a macro indicates we’re using Clojure in a way not intended by the core team</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:39:37.821000</ts>
    <user>Oscar</user>
    <text>(or if it’s just because spec is alpha)</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:39:48.821300</ts>
    <user>Jasmine</user>
    <text>nah, just have never resolved what to do about records</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:40:10.821800</ts>
    <user>Jasmine</user>
    <text>spec is centered around the idea of semantics associated with (qualified) attributes</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:40:42.822500</ts>
    <user>Jasmine</user>
    <text>records sit in a weird place with that as the attributes are unqualified but records types themselves are qualified</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:41:53.823600</ts>
    <user>Jasmine</user>
    <text>we’ve kicked around a bunch of ideas but never got something we liked</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:42:06.823700</ts>
    <user>Oscar</user>
    <text>yeah, exactly part of the pain I was feeling with registering specs for record fields</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:44:03.825500</ts>
    <user>Oscar</user>
    <text>ok, thanks for the info. wanted to make sure I wasn’t missing anything about the design or philosophy of spec</text>
  </message>
  <message conversation_id="199">
    <ts>2019-01-17T11:50:17.825700</ts>
    <user>Jasmine</user>
    <text>nope, just some unfinished business</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T12:34:07.827500</ts>
    <user>Zenaida</user>
    <text>Hi guys, I am in doubt about what is the better way to solve the following problem.

Scenario:
Base: `{:response [{:users [{:id 1} {:id 2}]} {:users [{:id 3} {:id 4}]}]}`
Path to: `[:response :users]`
Replace with: `[[{:id 1, :name "Rafa"} {:id 2, :name "Ana"}]`
                           `[{:id 3, :name "Jonas"} {:id 2, :name "Leo"}]]`

Expected:  `[{:users [{:id 1, :name "Rafa"} {:id 2, :name "Ana"}]}`
                       `{:users [{:id 3, :name "Jonas"} {:id 2, :name "Leo"}]}]`



I am thinking about recursion but I would like to know if there is a better way (using something like clojure.walk). Any thoughts?</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T12:40:07.827900</ts>
    <user>Ellyn</user>
    <text>what does the data structure containing the `:name`s look like?</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T12:46:08.828800</ts>
    <user>Lane</user>
    <text>&lt;@Zenaida&gt; It looks like you want to join on the `:id` attribute. See &lt;https://clojuredocs.org/clojure.set/join&gt;</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T12:46:30.828900</ts>
    <user>Zenaida</user>
    <text>Sorry, I was not clear in my problem... It is not a fixed structure. It's like this: Given a base, path and "Replace with data", return base replaced with data</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T12:52:08.829100</ts>
    <user>Zenaida</user>
    <text>Nice! Thank you very much. But Can I use it lists that have maps and lists... ?</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T12:52:14.829300</ts>
    <user>Ellyn</user>
    <text>ahh, then you can use `assoc-in`! &lt;https://clojuredocs.org/clojure.core/assoc-in&gt;</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T12:52:41.829500</ts>
    <user>Ellyn</user>
    <text>i.e `(assoc-in original-data [:response :users] new-data)`</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T12:58:31.829700</ts>
    <user>Zenaida</user>
    <text>The problem with using assoc-in is that the path don`t know if  some key, like :users, is a list or not.</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T13:07:10.830000</ts>
    <user>Ellyn</user>
    <text>okay, now I see what you mean. is this part of a larger example? otherwise it might be easier to wrap the new data structure in `:users`:
```
(def new (mapv #(hash-map :users %) new-data))
```
and then `(assoc old-data :response new)`</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T13:09:15.830200</ts>
    <user>Ellyn</user>
    <text>is `:id` unique?</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T13:12:36.830400</ts>
    <user>Zenaida</user>
    <text>:id is just a key... Could be anything and could not exist. I am trying now to manipulate the path. So, using the previous example, generate something like: [:response 0 :users] and [:response 1 :users]</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T13:13:32.830600</ts>
    <user>Ellyn</user>
    <text>I highly recommend Specter for things like this: &lt;https://github.com/nathanmarz/specter/&gt;</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T13:13:46.830800</ts>
    <user>Ellyn</user>
    <text>here’s an example:
```
user=&amp;gt; m
{1 {:id 1, :name "Rafa"},
 2 {:id 2, :name "Ana"},
 3 {:id 3, :name "Jonas"},
 4 {:id 4, :name "Leo"}}

user=&amp;gt; base
{:response [{:users [{:id 1} {:id 2}]} {:users [{:id 3} {:id 4}]}]}

user=&amp;gt; (transform [:response ALL :users ALL] #(get m (:id %)) base)
{:response [{:users [{:id 1, :name "Rafa"} {:id 2, :name "Ana"}]}
            {:users [{:id 3, :name "Jonas"} {:id 4, :name "Leo"}]}]}```</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T13:15:08.831000</ts>
    <user>Ellyn</user>
    <text>basically, for problems like this the details matter: exactly what the input is, what the data you want to place there instead etc. determines what the best approach is</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T13:15:55.831200</ts>
    <user>Ellyn</user>
    <text>but for the general problem of “replace something in a nested data structure with something else” Specter is IMO the way to go :slightly_smiling_face:</text>
  </message>
  <message conversation_id="200">
    <ts>2019-01-17T13:18:08.831500</ts>
    <user>Zenaida</user>
    <text>Nice! Thank you! I will give it a shot =D</text>
  </message>
  <message conversation_id="201">
    <ts>2019-01-17T14:30:49.832300</ts>
    <user>Vita</user>
    <text>`(clojure.walk/postwalk-replace (into {} (juxt #(select-keys % [:id]) identity) replacements) base)`</text>
  </message>
  <message conversation_id="202">
    <ts>2019-01-17T15:41:02.832800</ts>
    <user>Lane</user>
    <text>You can definitely look at specter but to modify nested data structures in clojure using the "core library" you also have zippers. It takes a bit of playing around to get used to them (if you're not already) but once you know them you will be able to apply them in many scenarios.</text>
  </message>
  <message conversation_id="203">
    <ts>2019-01-17T16:08:40.834600</ts>
    <user>Clarine</user>
    <text>The changelogs of Clojure only go back to 1.3. I want to know if I remember this correctly: binding was allowed to rebind any var instead of only dynamic vars in the early versions of Clojure. Later on you could only do that with dynamic vars. with-redefs was introduced for rebinding the root values of vars e.g. for testing. Was that related to the change to binding?</text>
  </message>
  <message conversation_id="201">
    <ts>2019-01-17T16:12:04.835000</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/clojure/clojure/commit/178d8c42609d899208e745b76b89297c4287c078&gt;</text>
  </message>
  <message conversation_id="201">
    <ts>2019-01-17T16:12:08.835200</ts>
    <user>Jasmine</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-665&gt;</text>
  </message>
  <message conversation_id="201">
    <ts>2019-01-17T16:12:23.835400</ts>
    <user>Jasmine</user>
    <text>&lt;http://clojure-log.n01se.net/date/2010-10-29.html#09:11&gt;</text>
  </message>
  <message conversation_id="201">
    <ts>2019-01-17T16:13:08.835600</ts>
    <user>Jasmine</user>
    <text>by which I’d say, yes</text>
  </message>
  <message conversation_id="201">
    <ts>2019-01-17T16:13:29.835800</ts>
    <user>Clarine</user>
    <text>cool</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:36:16.839100</ts>
    <user>Freddie</user>
    <text>is there a nice idiomatic way to take a vector of maps `[{:a 1 :b 2} {:c 3 :d 4}]` and turn it into a map based off some key in  the vec’s map? `{1 {:a 1 :b 2} 3 {:c 3 :d 4} ...`?</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:36:31.839400</ts>
    <user>Freddie</user>
    <text>obviously a reduce would work, but it feels icky</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:37:14.840100</ts>
    <user>Freddie</user>
    <text>`(reduce #(assoc %1 (:the-key %2) %2) {} the-vec)`</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:37:28.840500</ts>
    <user>Freddie</user>
    <text>(now i see that the above is confusing, assume each map entry in the vector has _the same_ keys)</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:38:27.841200</ts>
    <user>Becki</user>
    <text>`(into {} (map (juxt :a identity)) coll)`</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:38:34.841400</ts>
    <user>Rosaline</user>
    <text>group-by</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:39:03.841700</ts>
    <user>Freddie</user>
    <text>! `group-by` is exactly it, thanks &lt;@Rosaline&gt;</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:40:13.842300</ts>
    <user>Clarine</user>
    <text>well, it seems you assume that the vector of maps has a unique value for the same key in each map?</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:40:18.842400</ts>
    <user>Freddie</user>
    <text>interesting … seems weird to juxt with an identity, but necessary because of how into works I assume? takes [k v] pairs</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:40:30.842800</ts>
    <user>Freddie</user>
    <text>yes, i do — which fits for this particular dataset</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:40:43.843300</ts>
    <user>Freddie</user>
    <text>good heads-up thinking though</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:40:53.843600</ts>
    <user>Clarine</user>
    <text>so then it’s slightly different than group-by. we have a function called index-by for that, I can look it up</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:41:32.843800</ts>
    <user>Clarine</user>
    <text>``` 
(defn index-by
  "Returns a map which indexes values by the result of calling kfn
  with given value."
  ([kfn values]
   (index-by kfn values nil))
  ([kfn values flat?]
   (tzipmap (map kfn values) values flat?)))
```</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:41:51.844200</ts>
    <user>Becki</user>
    <text>yes you want a sequence of [(:a thing) thing] as your key value pairs which will go into the map</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:41:53.844400</ts>
    <user>Clarine</user>
    <text>(where `tzipmap` is a transient-based version of `zipmap`)</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:42:56.845100</ts>
    <user>Becki</user>
    <text>i think the `(into {} (map (juxt :a identity)) coll)` will use transients for free because of into</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:43:42.845900</ts>
    <user>Clarine</user>
    <text>could be, this code probably stems from before transducers ,etc.</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:44:15.846600</ts>
    <user>Dann</user>
    <text>there's the similar `clojure.set/index` as well - allows multiple relations to index and multiple matches for each value of the index</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:44:50.847000</ts>
    <user>Dann</user>
    <text>```egret.run=&amp;gt; (clojure.set/index [{:a 0 :b 1} {:a 1 :b 1}] [:a])
{{:a 0} #{{:a 0, :b 1}}, {:a 1} #{{:a 1, :b 1}}}
```</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:45:16.847500</ts>
    <user>Freddie</user>
    <text>i love `clojure.set`, i use it almost everywhere</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:45:31.847900</ts>
    <user>Freddie</user>
    <text>its so much easier for me to think about data as just sets and joins/unions/etc</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:46:48.848300</ts>
    <user>Clarine</user>
    <text>this finds `group-by`  as the closest built-in thing:
&lt;https://re-find.it/?args=%5B%7B%3Aa%201%7D%20%7B%3Aa%202%7D%5D%20%3Aa&amp;amp;ret=%7B1%20%7B%3Aa%201%7D%202%20%7B%3Aa%202%7D%7D&amp;amp;more=true&gt;</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:47:20.848600</ts>
    <user>Freddie</user>
    <text>woah. that’s a great idea for a tool…</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:48:17.848800</ts>
    <user>Freddie</user>
    <text>where has this been all my life</text>
  </message>
  <message conversation_id="204">
    <ts>2019-01-17T17:50:12.849300</ts>
    <user>Clarine</user>
    <text>set/index comes up first when you use `[{:a 1} {:a 2}] [:a]` as the args.</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:09:18.849800</ts>
    <user>Eduardo</user>
    <text>I’m spinning up some old projects with `lein repl` and getting this error:</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:09:21.850000</ts>
    <user>Eduardo</user>
    <text>```No such var: nrepl.transport/uri-scheme```</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:09:47.850400</ts>
    <user>Eduardo</user>
    <text>I have lein 2.8.3, clojure 1.8.0</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:09:58.850800</ts>
    <user>Eduardo</user>
    <text>I clearly have something out of sync somewhere</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:10:00.850900</ts>
    <user>Becki</user>
    <text>downgrade to lein 2.8.1 and try</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:10:10.851300</ts>
    <user>Becki</user>
    <text>`yes | lein upgrade 2.8.1`</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:10:45.852200</ts>
    <user>Dann</user>
    <text>yeah - lein changed nrepl versions with a recent release, and that could break old projects if they or their middleware relied on the way nrepl used to work</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:10:51.852400</ts>
    <user>Clarine</user>
    <text>maybe you have some incompatible nrepl in your profiles.clj?</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:11:20.853000</ts>
    <user>Dann</user>
    <text>it could break all your projects if your profiles.clj pulled in a middleware for the old nrepl</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:11:35.853400</ts>
    <user>Eduardo</user>
    <text>Yes, I was hoping to use an older project to do some cider hacking. And it’s complaining about middleware as well. I feel a bit lost, lol.</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:11:41.853600</ts>
    <user>Eduardo</user>
    <text>Everything used to just work</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:11:51.854000</ts>
    <user>Eduardo</user>
    <text>I’m sure the new stuff is great, of course :wink:</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:12:07.854400</ts>
    <user>Dann</user>
    <text>well, the CIDER maintainer also maintains nrepl, so they should at least evolve together now</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:12:20.854700</ts>
    <user>Eduardo</user>
    <text>ok, I have a repl… that’s good…. now let’s try cider….</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:13:23.855400</ts>
    <user>Eduardo</user>
    <text>Hmm. So for CIDER… can I upgrade the deps and the latest CIDER while keeping lein at 2.8.1?</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:14:25.856300</ts>
    <user>Becki</user>
    <text>no unfortunately. CIDER was straddling both tools.nrepl and nrepl/nrepl through 0.19 but the most recent 0.20 dropped tools.nrepl support. now the entire application needs to be newer nrepl throughout</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:15:24.856700</ts>
    <user>Eduardo</user>
    <text>So… if I want to make the leap… is there an upgrade guide?</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:16:05.857100</ts>
    <user>Becki</user>
    <text>we can chat in &lt;#C0617A8PQ|cider&gt; but just check your deps for tools.nrepl.</text>
  </message>
  <message conversation_id="205">
    <ts>2019-01-17T18:16:31.857400</ts>
    <user>Eduardo</user>
    <text>Cool, thanks!</text>
  </message>
  <message conversation_id="206">
    <ts>2019-01-17T19:25:10.858900</ts>
    <user>Rosalba</user>
    <text>any recommendations for sending email from clojure? I was looking at postal but wanted to check if there was anything else I should consider</text>
  </message>
  <message conversation_id="207">
    <ts>2019-01-18T04:06:14.862800</ts>
    <user>Murray</user>
    <text>hi folks, I want some help, recently sometimes I can't ssh my server that run a clojure application(the only one). the error is `shell request failed on channel 0`, after some searching, I think it may because somewhere is leaking process? I'm not sure how to investigate further. any suggestion will be very helpful. thanks!</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:30:55.863700</ts>
    <user>Morton</user>
    <text>Hello - where can I get help on using the Clojure CLI? It's not picking up the location of `.m2/repository` properly and I'm not sure why...</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:32:03.864600</ts>
    <user>Morton</user>
    <text>It's trying to access `/var/empty/.m2/repository/` instead of `$HOME/.m2/repository`</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:35:03.865500</ts>
    <user>Clarine</user>
    <text>&lt;@Morton&gt; try inspecting your environment variables, if they set some alternative location for m2?</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:36:08.865900</ts>
    <user>Morton</user>
    <text>There are 0 env vars, this is building inside a nix environment</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:36:25.866300</ts>
    <user>Morton</user>
    <text>Is there an env var that clojure looks at for the location of m2?</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:37:19.866800</ts>
    <user>Clarine</user>
    <text>is there a settings.xml in .m2 maybe?</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:37:37.867100</ts>
    <user>Donny</user>
    <text>env of system could be redirected by `export M2_REPO=`</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:39:35.869000</ts>
    <user>Donny</user>
    <text>and if you use lein, the key [:local-repo :repositories] in the profiles.clj also could redirect to other folders</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:39:53.869600</ts>
    <user>Clarine</user>
    <text>If I google on var/empty nix maven I find some stuff. maybe it’s the home dir location in the nix shell that’s set to /var/empty</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:42:08.870800</ts>
    <user>Morton</user>
    <text>```
HOME=$PWD
export M2_REPO=$HOME/.m2
clojure -A:test
```
Still has the clojure cli go toward `/var/empty/.m2`

and `HOME` is set to a proper non `/var/empty/` location :confused:</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:45:13.871600</ts>
    <user>Clarine</user>
    <text>is `M2_REPO` a thing?
You could try this: &lt;https://maven.apache.org/guides/mini/guide-configuring-maven.html&gt;

Configuring your Local Repository
The location of your local repository can be changed in your user configuration. The default value is
``` 
${user.home}/.m2/repository/.

&amp;lt;settings&amp;gt;
  ...
  &amp;lt;localRepository&amp;gt;/path/to/local/repo/&amp;lt;/localRepository&amp;gt;
  ...
&amp;lt;/settings&amp;gt;
```</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:45:44.872200</ts>
    <user>Morton</user>
    <text>yeup, it doesn't pick it up - placed the settings file in both `$HOME/.m2` and `$HOME/.m2/repository` just to be safe</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:45:56.872500</ts>
    <user>Morton</user>
    <text>if I introduce syntax errors in the XML, it complains</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:46:03.872800</ts>
    <user>Morton</user>
    <text>but doesn't obey the local repo setting</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:47:08.873000</ts>
    <user>Clarine</user>
    <text>maybe try: &lt;https://stackoverflow.com/questions/1261215/maven-command-to-determine-which-settings-xml-file-maven-is-using&gt;</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:52:05.874400</ts>
    <user>Morton</user>
    <text>Already when doing `mvn -X help:effective-settings` it's not able to populate due to trying to go against `/var/empty`</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:52:18.874700</ts>
    <user>Morton</user>
    <text>so that's at least one positive, it's not a clojure specific thing :slightly_smiling_face:</text>
  </message>
  <message conversation_id="208">
    <ts>2019-01-18T05:52:23.874900</ts>
    <user>Morton</user>
    <text>ty for the halp!</text>
  </message>
  <message conversation_id="209">
    <ts>2019-01-18T08:30:25.877100</ts>
    <user>Jasmine</user>
    <text>clj uses the Java system property user.home to build the maven repo location</text>
  </message>
  <message conversation_id="209">
    <ts>2019-01-18T08:31:00.877800</ts>
    <user>Jasmine</user>
    <text>I’m not sure how that would be off but that’s likely why</text>
  </message>
  <message conversation_id="209">
    <ts>2019-01-18T08:32:01.879100</ts>
    <user>Jasmine</user>
    <text>You can hardcode in your deps.edn though with :mvn/local-repo attribute at the root</text>
  </message>
  <message conversation_id="209">
    <ts>2019-01-18T08:32:19.879500</ts>
    <user>Jasmine</user>
    <text>If that lets you move forward</text>
  </message>
  <message conversation_id="209">
    <ts>2019-01-18T08:32:35.879700</ts>
    <user>Clarine</user>
    <text>&lt;@Morton&gt; ^</text>
  </message>
  <message conversation_id="210">
    <ts>2019-01-18T09:45:55.883800</ts>
    <user>Morton</user>
    <text>We ended up being able to globally set the user.home property and now everything is gucci</text>
  </message>
  <message conversation_id="210">
    <ts>2019-01-18T09:46:01.884000</ts>
    <user>Morton</user>
    <text>thanks for the help folks :wave:</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:28:33.885300</ts>
    <user>Matha</user>
    <text>Hi! Quick request for advice: what would you say is the most “modern”/“well maintained” way of working with a Postgres database in Clojure? HugSQL? Something else? (I lean towards a raw SQL approach over ORM)</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:30:13.885500</ts>
    <user>Neil</user>
    <text>I don’t know about “well maintained”, but I forked yesql some years ago and am actively using it in production &lt;https://github.com/tatut/jeesql&gt;</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:31:05.886500</ts>
    <user>Celestine</user>
    <text>If you want your SQL external to your code, use HugSQL. If you want a DSL to builds SQL, use HoneySQL. With both of those, use `org.clojure/java.jdbc`.</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:31:21.886800</ts>
    <user>Evonne</user>
    <text>I personally like hugsql, but I think different people have different preferences. Seems like a variety of solid choices available.</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:31:22.887000</ts>
    <user>Neil</user>
    <text>Also &lt;https://github.com/tatut/specql&gt;, but that’s not “raw SQL”</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:31:41.887500</ts>
    <user>Celestine</user>
    <text>(if you just want raw SQL strings in your code, you don't need anything beyond the latter)</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:32:01.887900</ts>
    <user>Matha</user>
    <text>Thanks! Do you use HugSQL or HoneySQL yourself? I’m not quite sure which approach to go for</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:32:39.888100</ts>
    <user>Celestine</user>
    <text>We use HoneySQL extensively (and I took over as maintainer recently).</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:33:16.888300</ts>
    <user>Celestine</user>
    <text>My former colleague, Fumiko Hanreich, gave a talk at Clojure/West about our use of HoneySQL (in 2012? 2013? I'll get you the link).</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:33:31.888500</ts>
    <user>Matha</user>
    <text>&lt;@Neil&gt; thanks! I’ll check it out</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:33:44.888700</ts>
    <user>Clarine</user>
    <text>&lt;@Matha&gt; I’m loving HugSQL. yesql is dead to me :wink:</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:33:50.888900</ts>
    <user>Celestine</user>
    <text>I like my SQL in my code where I can see it alongside the code that uses it which is why I don't use HugSQL.</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:33:59.889100</ts>
    <user>Celestine</user>
    <text>Some people love that separation tho'...</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:34:10.889400</ts>
    <user>Matha</user>
    <text>&lt;@Celestine&gt; thanks! I might use HoneySQL then. My use case is fairly basic, but I don’t want it to get in the way of using some postgres-specific features</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:34:20.889600</ts>
    <user>Matha</user>
    <text>(and I don’t want it to be too smart; just build the queries I expect it to build)</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:34:58.889800</ts>
    <user>Celestine</user>
    <text>&lt;https://www.youtube.com/watch?v=alkcjyhesjI&gt; -- 30 minute talk from 2015 (I was off by several years)</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:35:51.890100</ts>
    <user>Celestine</user>
    <text>There's a Postgres-specific extension project for HoneySQL you might want then.</text>
  </message>
  <message conversation_id="211">
    <ts>2019-01-18T11:36:18.890300</ts>
    <user>Celestine</user>
    <text>&lt;https://github.com/nilenso/honeysql-postgres&gt;</text>
  </message>
  <message conversation_id="212">
    <ts>2019-01-18T15:57:38.892600</ts>
    <user>Rheba</user>
    <text>Is there a tool to generate a visual graph of my clojure dependencies, a la &lt;https://github.com/pahen/madge&gt;</text>
  </message>
  <message conversation_id="212">
    <ts>2019-01-18T15:57:51.893000</ts>
    <user>Rheba</user>
    <text>Actually, I know there is, it just escapes me atm.</text>
  </message>
  <message conversation_id="212">
    <ts>2019-01-18T16:01:44.893600</ts>
    <user>Clarine</user>
    <text>&lt;@Rheba&gt; I believe &lt;@Clemente&gt; had something like that: &lt;https://github.com/walmartlabs/vizdeps&gt;</text>
  </message>
  <message conversation_id="212">
    <ts>2019-01-18T16:02:19.894200</ts>
    <user>Rheba</user>
    <text>I’m sorry, I said dependencies, implying libraries, but I meant namespaces.</text>
  </message>
  <message conversation_id="212">
    <ts>2019-01-18T16:03:28.895200</ts>
    <user>Clarine</user>
    <text>oh that. maybe &lt;https://github.com/hilverd/lein-ns-dep-graph&gt;?</text>
  </message>
  <message conversation_id="212">
    <ts>2019-01-18T16:03:48.895600</ts>
    <user>Clarine</user>
    <text>I’m good at googling :stuck_out_tongue:</text>
  </message>
  <message conversation_id="212">
    <ts>2019-01-18T16:05:13.896300</ts>
    <user>Clarine</user>
    <text>I think I’ve used it in the distant past</text>
  </message>
  <message conversation_id="212">
    <ts>2019-01-18T16:05:14.896400</ts>
    <user>Rheba</user>
    <text>Awesome! Thanks. Because there’s a Lein plug in for everything!</text>
  </message>
  <message conversation_id="213">
    <ts>2019-01-18T16:19:56.897300</ts>
    <user>Dann</user>
    <text>also, making a graph of references between namespaces and using it to generate a graphiz input is a fun weekend hack</text>
  </message>
  <message conversation_id="214">
    <ts>2019-01-18T16:32:03.897800</ts>
    <user>Tammera</user>
    <text>GraphViz is a very easy format to generate in general</text>
  </message>
  <message conversation_id="215">
    <ts>2019-01-18T16:50:29.899900</ts>
    <user>Maximina</user>
    <text>Anyone knows where I can read or have any tips regarding polling and clustering. Lets say I make an api call and create something. I get an ID back and there is another endpoint which I must call every 6 minutes to poll for a status. If  I have node A and B and B goes down while executing the polling I want node A to take over. Afaik one can use a MQ for this.</text>
  </message>
  <message conversation_id="213">
    <ts>2019-01-18T16:53:25.900700</ts>
    <user>Dann</user>
    <text>yeah - clojure on its own isn't opinionated about IPC, you can use the same libs you would with Java, or in most cases the same lib you would use with NodeJS or Ruby</text>
  </message>
  <message conversation_id="215">
    <ts>2019-01-18T16:56:11.901100</ts>
    <user>Rosaline</user>
    <text>I would like at something like aws step functions</text>
  </message>
  <message conversation_id="215">
    <ts>2019-01-18T16:59:32.903700</ts>
    <user>Rosaline</user>
    <text>in general what you'll want to do is have some kind of shared(between A and B) transactional store, represent the polling as a simple fsm, and keep the state in the store</text>
  </message>
  <message conversation_id="215">
    <ts>2019-01-18T17:00:24.904500</ts>
    <user>Fredda</user>
    <text>And a watchdog service running health checks on the nodes you want watched</text>
  </message>
  <message conversation_id="215">
    <ts>2019-01-18T17:01:37.905600</ts>
    <user>Rosaline</user>
    <text>the simplest case would be to, instead of having fail over between A and B, having A and B running concurrently(which is why the transactional store), which would avoid the need for some kind of watchdog and failover check</text>
  </message>
  <message conversation_id="215">
    <ts>2019-01-18T17:05:03.908600</ts>
    <user>Maximina</user>
    <text>I will have a look at the :point_up: thanks.
I will have one node A. When I get more traffic I will pop up another node,  and another... and when the traffic goes down I will kill them.</text>
  </message>
  <message conversation_id="215">
    <ts>2019-01-18T17:07:09.909100</ts>
    <user>Rosaline</user>
    <text>if you are on aws, I would look at directly using step functions &lt;https://docs.aws.amazon.com/step-functions/latest/dg/sample-project-job-poller.html&gt;</text>
  </message>
  <message conversation_id="216">
    <ts>2019-01-19T02:42:22.909800</ts>
    <user>Toby</user>
    <text>&lt;@Matha&gt; have you looked at Walkable? &lt;https://walkable.gitlab.io/&gt;</text>
  </message>
  <message conversation_id="217">
    <ts>2019-01-19T08:04:57.911100</ts>
    <user>Clarine</user>
    <text>anyone got a quick example how to postwalk an edn file using clj-rewrite? I simply want to replace a few keywords by postwalking it, but the README doesn’t have a good example of this</text>
  </message>
  <message conversation_id="217">
    <ts>2019-01-19T08:05:16.911500</ts>
    <user>Clarine</user>
    <text>I want to preserve whitespace and comments, therefore normal clojure postwalk doesn’t suffice</text>
  </message>
  <message conversation_id="217">
    <ts>2019-01-19T08:16:59.911900</ts>
    <user>Clarine</user>
    <text>I vaguely remember &lt;@Korey&gt; sending me a snippet of this a while ago</text>
  </message>
  <message conversation_id="218">
    <ts>2019-01-19T08:52:37.913600</ts>
    <user>Ellyn</user>
    <text>is anyone aware of a persistent data structure library for Java that is adapted for primitives, like a persistent vector that is based on `int[]`? i.e something like FastUtil or Agrona but persistent. Does such a thing even make sense?</text>
  </message>
  <message conversation_id="218">
    <ts>2019-01-19T09:02:21.914400</ts>
    <user>Shaneka</user>
    <text>&lt;@Ellyn&gt; I think bifurcan has those. You’ll hardly find anything better &lt;https://github.com/lacuna/bifurcan&gt;</text>
  </message>
  <message conversation_id="218">
    <ts>2019-01-19T09:20:01.915800</ts>
    <user>Ellyn</user>
    <text>Bifurcan has an `IntMap`, but it implements `ISortedMap&amp;lt;java.lang.Long,V&amp;gt;` so it still uses boxed longs, not primitives :confused:</text>
  </message>
  <message conversation_id="218">
    <ts>2019-01-19T09:54:33.916300</ts>
    <user>Clarine</user>
    <text>&lt;@Ellyn&gt; Clojure has them: `(conj (vector-of :int) 1)`</text>
  </message>
  <message conversation_id="218">
    <ts>2019-01-19T09:58:45.916700</ts>
    <user>Ellyn</user>
    <text>hah, in 5 years of Clojure I’ve never seen those! :smile:</text>
  </message>
  <message conversation_id="219">
    <ts>2019-01-19T10:20:39.917300</ts>
    <user>Peter</user>
    <text>they’re useful for java interop </text>
  </message>
  <message conversation_id="219">
    <ts>2019-01-19T10:20:54.917800</ts>
    <user>Peter</user>
    <text>array-of is equally useful </text>
  </message>
  <message conversation_id="220">
    <ts>2019-01-19T11:10:12.918800</ts>
    <user>Jasmine</user>
    <text>note that while vector-of helps with primitive storage, boxing will still happen on access</text>
  </message>
  <message conversation_id="220">
    <ts>2019-01-19T11:11:00.919400</ts>
    <user>Jasmine</user>
    <text>as it’s going through the same Clojure interfaces that take objects</text>
  </message>
  <message conversation_id="220">
    <ts>2019-01-19T11:11:39.920200</ts>
    <user>Jasmine</user>
    <text>that’s not necessarily true for arrays - with care you can avoid boxing in most uses of arrays</text>
  </message>
  <message conversation_id="221">
    <ts>2019-01-19T13:14:40.923400</ts>
    <user>Isaura</user>
    <text>hello, how can I push a repo using tool.deps to clojars?</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-19T13:22:37.923900</ts>
    <user>Bree</user>
    <text>I wrote about this just today: &lt;https://cjohansen.no/tools-deps-figwheel-main-devcards-emacs/&gt;</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-19T13:22:54.924500</ts>
    <user>Bree</user>
    <text>It focuses on clojurescript, but should work for Clojure too</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-19T13:23:07.925000</ts>
    <user>Bree</user>
    <text>Scroll down to the part about publishing </text>
  </message>
  <message conversation_id="221">
    <ts>2019-01-19T13:24:51.925500</ts>
    <user>Isaura</user>
    <text>&lt;@Bree&gt; this is great, thank you!</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-19T13:27:51.925700</ts>
    <user>Bree</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="223">
    <ts>2019-01-20T01:17:07.927400</ts>
    <user>Burl</user>
    <text>Is there a way to parametrize namespaces or dependencies? I am at the moment fiddeling around this to make code optionally core.async compatible, but leave it synchronous on the JVM.</text>
  </message>
  <message conversation_id="223">
    <ts>2019-01-20T01:47:14.928200</ts>
    <user>Celestine</user>
    <text>So cljs and clj do different things &lt;@Burl&gt;? That sounds like reader conditionals. &lt;https://clojure.org/guides/reader_conditionals&gt;</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T02:26:13.930200</ts>
    <user>Burl</user>
    <text>I am heavily making use of reader conditionals, but this is about macro-expanding code differently depending on backend settings. Basically you can use core.async on both JVM and JS, but sync code on the JVM.</text>
  </message>
  <message conversation_id="224">
    <ts>2019-01-20T06:34:09.931200</ts>
    <user>Sixta</user>
    <text>&lt;https://juxt.pro/blog/posts/pack-maven.html&gt; I also wrote this :slightly_smiling_face:</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T10:35:23.932000</ts>
    <user>Verla</user>
    <text>Hi all.... I ama but stuck on this one...</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T10:35:38.932500</ts>
    <user>Verla</user>
    <text>this works for me: `(apply conj #{1 2 3} '(4 5 6 ))` as expected...</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T10:36:29.933200</ts>
    <user>Verla</user>
    <text>but when the set is in an atom I can't do this `(swap! atom-with-a-set-in-it apply conj '(4 5 6))`</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T10:37:27.933800</ts>
    <user>Verla</user>
    <text>the I get an error: `Wrong number of args (4) passed to: PersistentHashSet`</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T10:41:17.935800</ts>
    <user>Isela</user>
    <text>Try `(swap! atom-with-a-set (partial apply conj) ‘(4 5 6))`</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T10:42:22.937400</ts>
    <user>Verla</user>
    <text>yes, that looks good... but why the partial as well?</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T10:43:01.938000</ts>
    <user>Isela</user>
    <text>What you have ends up being `(apply a-set conj '(4 5 6))`</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T10:46:22.940800</ts>
    <user>Isela</user>
    <text>`(partial apply conj)` returns a function that is is passed the set as its first parameter and your `(4 5 6)` as its second parameter </text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-20T10:48:59.941200</ts>
    <user>Verla</user>
    <text>makes sense. thank you &lt;@Isela&gt;</text>
  </message>
  <message conversation_id="225">
    <ts>2019-01-20T14:36:10.942700</ts>
    <user>Fredda</user>
    <text>There's a hacky way I parameterize namespaces in CLJS here: &lt;https://clojurians-log.clojureverse.org/cljs-dev/2019-01-08/1546981037.172600&gt; It CLJ it might be a little more straightforward for namespaces, though not sure about the dependency part.</text>
  </message>
  <message conversation_id="226">
    <ts>2019-01-21T00:31:32.945900</ts>
    <user>Christal</user>
    <text>hey has anybody worked with postal? I can't quite figure out how to set mime content-id header for the attachment (or whether it's possible at all)?</text>
  </message>
  <message conversation_id="222">
    <ts>2019-01-21T00:35:31.947100</ts>
    <user>Christal</user>
    <text>oops. should have gone through the source right away (:content-id for the same mime part map works)</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:05:59.948500</ts>
    <user>Kerstin</user>
    <text>Hi, is this a bug in clojure spec?
```
(require [clojure.spec.alpha :as s])
(s/def ::foobar keyword?)
(s/def ::bugged keyword?)
(s/def ::form1 (s/keys :req [::foobar]))
(s/def ::form2 (s/keys :req [::bugged]))
(s/explain ::form1 {::foobar :d})
(s/explain ::form1 {::foobar :d ::bugged nil})
```
The second `(s/explain)` fails.</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:11:39.949800</ts>
    <user>Latonya</user>
    <text>Others can answer more authoritatively than I can, but I believe this is expected behavior.  `::form1` only requires `::foobar`, and it allows other key/value pairs to be present as well.  _If_ one of those other keys that is present has a spec, then its value must satisfy that spec.</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:12:43.950400</ts>
    <user>Latonya</user>
    <text>If one of those other keys that is present does not have a spec, then its value is not checked to see what it is.</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:17:56.951500</ts>
    <user>Kerstin</user>
    <text>Hmm, I saw this paragraph in the docs, for `s/keys`
```
In addition, the values of *all* namespace-qualified keys will be validated
(and possibly destructured) by any registered specs. Note: there is
no support for inline value specification, by design.
```</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:18:30.952300</ts>
    <user>Kerstin</user>
    <text>So there's no way to prevent `::bugged` from being checked right?</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:21:28.953200</ts>
    <user>Latonya</user>
    <text>I guess a question would be, if the only valid kind of value to associate with the key ::bugged is  a keyword, then why do you hope for no error to occur when you give that key a value nil?</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:23:30.954000</ts>
    <user>Latonya</user>
    <text>And if nil _is_ a valid value to associate with the keyword ::bugged, then maybe you want to change the spec for ::bugged to allow nil</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:23:43.954400</ts>
    <user>Tammera</user>
    <text>Well, I could imagine that you sometimes don’t care about what is in `::bugged`</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:23:54.954700</ts>
    <user>Tammera</user>
    <text>You know, after some form of transform that you would make a stronger guarantee</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:24:58.955300</ts>
    <user>Latonya</user>
    <text>Spec certainly lends itself well to doing that by calling the pre-transform and the post-transform things by different keys.</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:25:16.955600</ts>
    <user>Latonya</user>
    <text>but not sure if that conflicts with other goals you may have.</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:29:32.956000</ts>
    <user>Tammera</user>
    <text>Yeah, I was merely stating why I would maybe want to have such an option</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:31:17.957400</ts>
    <user>Tammera</user>
    <text>I don’t think its good or bad about spec to expect each key to have a single (canonical/always applying) spec, its just surprising ^^</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:32:40.958900</ts>
    <user>Kerstin</user>
    <text>Yes, this is something that was surprising to me, and took me a while to figure out if this was a bug with my code, `spec`, or of my understanding with spec</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:33:53.959300</ts>
    <user>Kerstin</user>
    <text>On the other hand, unqualified keywords works the opposite</text>
  </message>
  <message conversation_id="227">
    <ts>2019-01-21T02:34:52.959900</ts>
    <user>Kerstin</user>
    <text>```
(s/def ::form1 (s/keys :req-un [::foobar]))
(s/explain ::form1 {:foobar :d :bugged nil}) ;; Success!
(s/def ::form2 (s/keys :req [::foobar]))
(s/explain ::form2 {::foobar :d ::bugged nil}) ;; fails
```</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:21:07.961000</ts>
    <user>Bryce</user>
    <text>How do you guys exit the clojure repl from `clj` or `clojure` ?</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:21:45.961200</ts>
    <user>Johnson</user>
    <text>ctrl+d</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:22:59.961800</ts>
    <user>Bryce</user>
    <text>Me too, but I thought I was doing something hacky.
[Edit]
Thanks</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:33:32.964200</ts>
    <user>Bryce</user>
    <text>Trying to understand aliases invoked via `clojure` or `clj` could someone please explain what this most likely means `clojure -A:dev:build:dev/rebel`.

I see `dev` and `build` are aliases that should be in `deps.edn` but I don't quite get it.</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:38:00.966100</ts>
    <user>Johnson</user>
    <text>aliases let you selectively add functionality/dependencies. so you just basically combine several aliases to get to the result you want</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:40:50.967400</ts>
    <user>Bryce</user>
    <text>&lt;@Johnson&gt; and the `dev/rebel` that's also an alias in the `deps.edn`?</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:41:35.967600</ts>
    <user>Johnson</user>
    <text>yes thats just a namespaced keyword</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:41:45.967800</ts>
    <user>Johnson</user>
    <text>but deps can be "inherited" from system configs</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:41:59.968000</ts>
    <user>Johnson</user>
    <text>so you can also define an alias in `~/.clojure/deps.edn`</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T05:42:19.968200</ts>
    <user>Johnson</user>
    <text>if you want something that is generic and not specific to a project</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T06:10:43.968400</ts>
    <user>Bryce</user>
    <text>&lt;@Johnson&gt; So in this case there's likely a `deps.edn` file along the lines of:
```
{:aliases 
  {:dev/rebel ...}}
```

right?</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T06:11:01.968600</ts>
    <user>Johnson</user>
    <text>yes</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T06:11:28.968800</ts>
    <user>Johnson</user>
    <text>probably this &lt;https://github.com/bhauman/rebel-readline#quick-try&gt;</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T06:13:51.969500</ts>
    <user>Bryce</user>
    <text>Yes it's that, rebel. Okay, let me state the larger issue. I'm trying to get  familiar with this tool edge but to understand it I think I need to figure out yada. Docs on both are however out of sync with the repo.</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T06:14:39.969700</ts>
    <user>Bryce</user>
    <text>If one tries to follow &lt;https://juxt.pro/yada/manual/index.html#_build_run&gt; you'll see the edge repo has no app dir</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T06:14:43.970000</ts>
    <user>Bryce</user>
    <text>&lt;https://github.com/juxt/edge&gt;</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T06:15:30.970900</ts>
    <user>Isa</user>
    <text>&lt;@Tammera&gt; if you don’t care, then `:opt` instead of `:req` or define spec which let `::bugged` be `nil`</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T06:17:04.971000</ts>
    <user>Johnson</user>
    <text>probably got reorgnized. maybe that is the `main` dir now?</text>
  </message>
  <message conversation_id="228">
    <ts>2019-01-21T06:29:18.971200</ts>
    <user>Bryce</user>
    <text>Ya but docs didn't update. Thanks I get it.</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:06:59.972800</ts>
    <user>Kellee</user>
    <text>I have a protocol which defines the function `last`. how do I refer this function without replacing `clojure.core/last`?</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:27:40.976000</ts>
    <user>Jasmine</user>
    <text>Either fully qualify with the namespace where the protocol is defined or alias that namespace and refer to it via the alias</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:29:03.976500</ts>
    <user>Clarine</user>
    <text>&lt;@Kellee&gt; you can also use :refer-clojure to exclude last from core and then refer to clojure.core/last when you need it.</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:29:29.976800</ts>
    <user>Clarine</user>
    <text>but that can become confusing, since last is probably used often</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:36:40.977800</ts>
    <user>Clarine</user>
    <text>Is there a variation of `or` in which the first non-nil value (e.g. false) is returned?</text>
  </message>
  <message conversation_id="230">
    <ts>2019-01-21T08:55:36.978000</ts>
    <user>Jasmine</user>
    <text>`some` is close to that</text>
  </message>
  <message conversation_id="230">
    <ts>2019-01-21T08:55:38.978100</ts>
    <user>Gilberto</user>
    <text>`#(first (drop-while nil? %))`

Bind it to a suitable name and there's your function.</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:56:29.978800</ts>
    <user>Clarine</user>
    <text>yeah, I know how to write a function for it, that wasn’t my question :slightly_smiling_face: the difference between a function and a macro like or is that or short-circuits. of course I could also write my own or.</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:57:14.979800</ts>
    <user>Clarine</user>
    <text>yeah, or `(first (filter some? ...))`, but I wanted to avoid first filter :wink:</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:57:31.980200</ts>
    <user>Gilberto</user>
    <text>I can't think of a way of implementing this with `some` without an `if` expression inside off the back of my head - but if anyone can I'd love to hear it!</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:58:54.980400</ts>
    <user>Gilberto</user>
    <text>I'm quite certain this will do the same, `drop-while` will yield a lazy seq which will be realized by `first` so it should stop the moment you get an actual head of your seq back.</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:59:40.981100</ts>
    <user>Kellee</user>
    <text>okay, so there's no way to somehow say that the protocol just extends `last` to include this new datatype?</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T08:59:51.981500</ts>
    <user>Clarine</user>
    <text>yeah, but then you should first create a lazy-seq of things you already don’t want to evaluate.
e.g.:
`(or 1 (throw (Exception. "no")))`</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:00:31.982200</ts>
    <user>Kellee</user>
    <text>I'm trying to use `name.stadig.deque` to get deques, but for some reason it has separate a function for `last`</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:00:48.982500</ts>
    <user>Sharleen</user>
    <text>what about `(some (complement nil?) ...)`</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:01:18.982700</ts>
    <user>Clarine</user>
    <text>```
user=&amp;gt; (some (complement nil?) [false])
true
```</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:01:28.983000</ts>
    <user>Sharleen</user>
    <text>ups :smiley:</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:02:31.983700</ts>
    <user>Clarine</user>
    <text>&lt;@Kellee&gt; you can try `(:refer-clojure :exclude [last])` in your ns form</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:02:46.983800</ts>
    <user>Chanelle</user>
    <text>(some identity …)
should work</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:02:57.984000</ts>
    <user>Clarine</user>
    <text>nope, same problem :stuck_out_tongue_winking_eye:</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:03:08.984200</ts>
    <user>Chanelle</user>
    <text>ugh, right</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:04:55.985400</ts>
    <user>Kellee</user>
    <text>&lt;@Clarine&gt; sorry if I'm being unclear, I would want to use `clojure.core/last` as well. I guess I should've phrased the question as "can I implement `last` for more types in clojure jvm?"</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:05:19.986000</ts>
    <user>Kellee</user>
    <text>I remember reading that some it wasn't possible with some protocols in clojure jvm, but it is in clojurescript or something like that</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:05:36.986300</ts>
    <user>Clarine</user>
    <text>last is a sequence function. if you implement ISeq that should just work out of the box</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:06:00.986800</ts>
    <user>Kellee</user>
    <text>oh, huh. I wonder why the deque defines its own interface then</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:06:05.987100</ts>
    <user>Clarine</user>
    <text>but you cannot extend-type ISeq, because it’s not a protocol</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:06:05.987200</ts>
    <user>Kellee</user>
    <text>I'll try changing that then :slightly_smiling_face:</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:06:34.987700</ts>
    <user>Kellee</user>
    <text>is ISeq different from Sequable?</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:06:42.988000</ts>
    <user>Jasmine</user>
    <text>yes</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:07:03.988800</ts>
    <user>Clarine</user>
    <text>ISeq has first, next and rest. Seqable has a seq function that tells how to turn something into a seq</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:07:15.989000</ts>
    <user>Jasmine</user>
    <text>An ISeq is a sequence. Seqable is something that can return a sequence when asked (via `seq`)</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:07:36.989400</ts>
    <user>Jasmine</user>
    <text>&lt;http://insideclojure.org/2015/01/02/sequences/&gt; may be helpful</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:07:36.989500</ts>
    <user>Kellee</user>
    <text>ah okay</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:08:45.990100</ts>
    <user>Kellee</user>
    <text>hmm, I think I understand why they define their own `last`</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:09:08.990400</ts>
    <user>Kellee</user>
    <text>```
  (last [this]
    (array-last (if (and (zero? (alength suffix))
                         (identical? empty-deque child)
                         (identical? empty-deque substack))
                  prefix
                  suffix)))
```</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:09:55.991300</ts>
    <user>Kellee</user>
    <text>so I guess I should just qualify that last. it's just kind of sad that it's conceptually the same `last` as `clojure.core/last`</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:12:27.991900</ts>
    <user>Kellee</user>
    <text>eit seems that `clojure.core/last` works on the deque as well. maybe their own `last` is faster or something</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:12:35.992200</ts>
    <user>Kellee</user>
    <text>it seems to use a mutable array internally</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:14:09.992500</ts>
    <user>Kellee</user>
    <text>thanks for the help :slightly_smiling_face:</text>
  </message>
  <message conversation_id="229">
    <ts>2019-01-21T09:14:43.993000</ts>
    <user>Kellee</user>
    <text>and thanks for the link &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="231">
    <ts>2019-01-21T09:21:38.993100</ts>
    <user>Shanell</user>
    <text>```
(defn some-nil [coll]
  (when-let [s (seq coll)]
    (if (some? (first s))
      (first s)
      (recur (next s)))))
=&amp;gt; #'dev/some-nil
(some-nil [nil false true]) 
=&amp;gt; false
```
?</text>
  </message>
  <message conversation_id="231">
    <ts>2019-01-21T09:22:00.993300</ts>
    <user>Shanell</user>
    <text>derived from the source of `some`</text>
  </message>
  <message conversation_id="232">
    <ts>2019-01-21T10:08:49.995000</ts>
    <user>Aubrey</user>
    <text>I’m using `clojure.tools.namespace.repl/refresh` but it seems my `:after` symbol is not called. I’m not sure why. Should it be in the user namespace or can it live anywhere?</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:01:02.000100</ts>
    <user>Breana</user>
    <text>Can I assume that the `clojure.core/hash` of too clojure sets are always equal if the sets are equal by value? I have a use case where I'd like to store the hash in a database in order to find a set by its hash. Can too different values have the same hash with this implementation?</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:03:17.000400</ts>
    <user>Rosaline</user>
    <text>yes</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:03:35.000700</ts>
    <user>Rosaline</user>
    <text>that is a hash collision</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:05:45.001800</ts>
    <user>Latonya</user>
    <text>There are far more possible sets than there are 32-bit hash values, so there must be collisions.  And in practice if you start generating similar random sets, e.g. of integer values, you can find such collisions without a lot of trouble.</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:08:40.003400</ts>
    <user>Latonya</user>
    <text>Maybe more detail than you care to know, but there are non-Clojure Java sets that have inconsistent hash values, even though they are `=` to Clojure sets.  If you restrict your attention to Clojure sets of Clojure values, you should avoid those oddities.</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:09:38.004300</ts>
    <user>Min</user>
    <text>depends on what's in the set too, no guarantee that hashCode is stable accross process executions in theory</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:09:57.004800</ts>
    <user>Latonya</user>
    <text>Article containing even more details, if you are interested: &lt;https://clojure.org/guides/equality&gt;</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:11:57.007200</ts>
    <user>Latonya</user>
    <text>Certainly in Clojure, most hashes of Clojure values changed from pre-Clojure-1.6 to Clojure 1.6-and-later, but pretty stable except for that change.  But sure, the hash function could change again in a future Clojure version, or perhaps because of changes in Java hash functions on some values that Clojure calls out to (I don't recall implementation details well enough to know whether Clojure even uses any Java hash code any more, for Clojure values).</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:12:41.007900</ts>
    <user>Min</user>
    <text>a set could contain some java instance of Foo with an unstable hashcode in theory</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:13:07.008700</ts>
    <user>Min</user>
    <text>unstable across process executions I mean</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:13:17.009300</ts>
    <user>Latonya</user>
    <text>Sure, that falls outside of my qualification of "Clojure values" that I slipped in above :slightly_smiling_face:</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:16:59.012500</ts>
    <user>Min</user>
    <text>all in all relying on `hash` sounds like a bad idea imho</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:17:43.013100</ts>
    <user>Min</user>
    <text>but that's just me</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:18:28.014100</ts>
    <user>Harris</user>
    <text>```Whenever it is invoked on the same object more than once during an execution of a Java application, the hashCode method must consistently return the same integer, provided no information used in equals comparisons on the object is modified. This integer need not remain consistent from one execution of an application to another execution of the same application. ```</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:18:34.014500</ts>
    <user>Harris</user>
    <text>from the javadoc</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:18:41.014800</ts>
    <user>Harris</user>
    <text>so an unstable hashcode is illegal</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:18:44.014900</ts>
    <user>Reiko</user>
    <text>Whatever happened with that hash function that was discovered that had a very small amount of collisions?</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:19:00.015500</ts>
    <user>Min</user>
    <text>ah? is that something that changed? I recall reading the opposite</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:19:21.016400</ts>
    <user>Latonya</user>
    <text>&lt;@Reiko&gt; Do you mean the hash function that Clojure used before Clojure 1.6?  It was replaced.</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:19:36.017200</ts>
    <user>Min</user>
    <text>also is that true for execution in runtime from vendor A to vendor B?</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:19:49.017900</ts>
    <user>Harris</user>
    <text>&lt;@Min&gt; notice the difference between "during an execution" and "need not remain consistent from one execution to another"</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:19:53.018200</ts>
    <user>Harris</user>
    <text>maybe that's what you were talking about?</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:20:01.018400</ts>
    <user>Min</user>
    <text>I need to read this again :stuck_out_tongue:</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:20:09.018600</ts>
    <user>Reiko</user>
    <text>No, I remember a hash function that was discovered by some person a few years back that promised very few collisions, but I haven't seen use of it</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:20:16.019000</ts>
    <user>Harris</user>
    <text>no</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:20:27.019800</ts>
    <user>Min</user>
    <text>oh yeah that's what I meant</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:21:00.021800</ts>
    <user>Harris</user>
    <text>gotcha then you were correct</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:21:09.022400</ts>
    <user>Harris</user>
    <text>sorry for the noise :)</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:21:14.022900</ts>
    <user>Min</user>
    <text>no worries</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:21:24.023300</ts>
    <user>Breana</user>
    <text>They are going to contain UUIDs (so `java.util.UUID` instances on the JVM), but since the UUIDs are identifying users (or other resources) they are going to repeat a lot since the database contains far less records than the set of 32-bit values.
Thanks you all for the quick answer, and thank you for the article. I shall read it.
Do you know any function/library providing non-colliding hashes (or very low probability, mathematically speaking)? Or an alternative clean way to create a unique identity?</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:21:35.023600</ts>
    <user>Latonya</user>
    <text>&lt;@Breana&gt; We may be talking all around your question, without solving your problem here.  Depending on how long this database will last, relying on someone else's hash function implementation may be a bad idea, since it may change more quickly than the lifetime of your database.</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:21:53.024400</ts>
    <user>Min</user>
    <text>replikativ has something like that I think</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:22:01.024800</ts>
    <user>Latonya</user>
    <text>Unless you have an implementation of the hash function that you have source code to that you believe to be stable for longer than your database.</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:22:12.025200</ts>
    <user>Min</user>
    <text>but it has other tradeoffs</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:22:22.025500</ts>
    <user>Rosaline</user>
    <text>because a hash is a summary they contain fewer bits of information then exist in the value being hashed, collisions will always be at least theoretically possible</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:23:02.026300</ts>
    <user>Min</user>
    <text>&lt;https://github.com/replikativ/hasch&gt;</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:23:03.026500</ts>
    <user>Rosaline</user>
    <text>you can construct a perfect hash, but you need to know the set of values a head of time</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:23:21.026900</ts>
    <user>Reiko</user>
    <text>This is getting to be a lot of discussion on this topic. Can you guys please start a thread to keep track?</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:24:03.027700</ts>
    <user>Breana</user>
    <text>Sorry about that, thank you for the reminder</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:24:31.028500</ts>
    <user>Rosaline</user>
    <text>I've been there wanting to use a set as a key in some database and trying to come up with some scalar value which maps to the set, and there is no satisfying way to do it</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:25:07.029000</ts>
    <user>Rosaline</user>
    <text>a hash is not great, maybe a bloom filter gets closer, but still has issues</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:25:42.029400</ts>
    <user>Breana</user>
    <text>If there is no perfect solution, an acceptable solution might be way enough.</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:26:12.029700</ts>
    <user>Breana</user>
    <text>If a bloom filter can at least reduce my search space by an order of magnitude I'd be happy with it.</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:26:23.029900</ts>
    <user>Latonya</user>
    <text>If the set elements are UUIDs or other things with a total order that you can sort them on, would sorting the set elements and using a string representation of that sorted order work?</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:28:03.030600</ts>
    <user>Breana</user>
    <text>It would work I guess, but the string might get huge… If I do it this way I need to find out what will be the maximum set size, and I don't know that yet</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:39:25.031000</ts>
    <user>Breana</user>
    <text>Let's think of it pragmatically:
If I hash the sets, I might get collisions.
But even if I get some collisions the probability is still small, so it might be acceptable. But if the hash changes because the implementation changed, I'll get into trouble.
So I'll have to find a way to hash a set that won't change over time/machine/process/version.
A string might do it, but might get huge. A bloom filter might produce some false positives, but it might be acceptable anyway. I don't know how to persist a bloom filter yet though.

You all gave me a lot to think about, and I think I might take the time to refine my requirements and constraints before asking other questions :slightly_smiling_face:

Thank you very much!</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:42:10.031200</ts>
    <user>Latonya</user>
    <text>The string I mentioned would never have collisions, but yes might get too large.</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T12:43:49.031400</ts>
    <user>Latonya</user>
    <text>Even if you had a hash function that didn't have collisions, and had a small result, were you planning on storing the full set in the database, in any form at all?  If so, what technique were you planning to use?  Perhaps storing its elements across different database entries?</text>
  </message>
  <message conversation_id="234">
    <ts>2019-01-21T12:46:12.031600</ts>
    <user>Latonya</user>
    <text>crypto hashes like SHA / MD5 / etc. promise (or strongly hope) very few collisions, but tend to be a little more expensive to calculate than non-cryptographically-strong ones.  Do you recall whether the one you heard of was intended to be cryptographically strong?</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T13:09:47.031900</ts>
    <user>Breana</user>
    <text>I'm using a SQL relational database, and the current use case is to store users and groups of users. So I have a `Group (id)` table, a `User (id)` table and `UserGroup (group_id, user_id)` join table. I want to find as fast as possible a group having an exact set of user. Not a subset nor a superset. SQL got set operations, but  don't provide a way to compute set equality in one operation. And with this table design I have to perform a `GROUP BY group_id HAVING count(*) = &amp;lt;size of the user set&amp;gt;`, thus iterating with a nested loop at most over all groups.
So I was thinking that hashing the set and storing the hash would gave me direct access…</text>
  </message>
  <message conversation_id="235">
    <ts>2019-01-21T13:33:38.034000</ts>
    <user>Aubrey</user>
    <text>Bumping a previous question — how should I debug a `tools.namespace.repl.refresh` invocation not calling my `:after` function? I’m calling it like this: ` (c.t.n.r/refresh :after 'nosco.dev/go)` — where `nosco.dev/go` is a no-args function as instructed. The refresh works (I see a bunch of refreshed namespaces printed out) but the function is not called (nor do I see any exception).</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T14:42:36.034200</ts>
    <user>Latonya</user>
    <text>If you are willing to iterate over all groups that have the same hash, then a decent hash function can help significantly reduce the number of sets you would need to check in a slower way for precise membership equality, often down to 1 candidate, but even if occasionally down to several, would be much faster than checking all with say, the same number of elements.</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T14:58:02.034800</ts>
    <user>Josh</user>
    <text>&lt;@Breana&gt; sort the set and reduce with the v5 uuid constructor fn - that will give you a stable, deterministic hash of your set, with as low a probability of collision as the nsa’s best crypto engineers of the 1990s could devise</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T14:59:21.035100</ts>
    <user>Breana</user>
    <text>Thank you! Will look into it</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T15:05:33.035300</ts>
    <user>Josh</user>
    <text>i'm currently happily using clj-uuid for a V5 implementation: &lt;https://github.com/danlentz/clj-uuid#namespaced-v3v5-identifiers&gt;</text>
  </message>
  <message conversation_id="233">
    <ts>2019-01-21T15:16:43.035700</ts>
    <user>Breana</user>
    <text>It looks a lot like what `replikative/hasch` (posted by mpenet) is doing with `(uuid5 (edn-hash &amp;lt;value&amp;gt;))` for this use case</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:24:25.036100</ts>
    <user>Reiko</user>
    <text>Found it - Buzhash.</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:24:38.036500</ts>
    <user>Sheron</user>
    <text>hitting an interesting java interop issue at last that i'm having trouble solving :slightly_smiling_face:</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:24:58.036900</ts>
    <user>Josh</user>
    <text>oh, i hadn't seen `edn-hash` before - yes, that's similar, although perhaps more general (in that it's designed to do all the hard work of distinguishing your general edn structure before feeding it to a hash fn)</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:26:20.038500</ts>
    <user>Sheron</user>
    <text>if you were to declare a java function that expects a biconsumer string-string lambda you would declare it as
public void foo (BiConsumer&amp;lt;String, String&amp;gt; aLambda) { ....  aLambda.accept("a-string", "another-string"); .... }  , something like this ... and whenever other java code tries to invoke it then javac is smart enough to check if that lambda is actually capable of consuming the string string argument pairs</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:26:54.039200</ts>
    <user>Sheron</user>
    <text>but if i expose a function from clojure ... how do i achieve the same typehint so that java invokers would be aware of the bi-consumer expected ?</text>
  </message>
  <message conversation_id="237">
    <ts>2019-01-21T15:46:18.039500</ts>
    <user>Rosaline</user>
    <text>you can't</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:47:16.040600</ts>
    <user>Sheron</user>
    <text>so i need at leat to write pure java interfaces for the "hinting layer"</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:53:44.041300</ts>
    <user>Sheron</user>
    <text>a bit sad :disappointed:</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:54:27.042100</ts>
    <user>Nella</user>
    <text>you could write something that reifies the interface that you need without it being too hateful</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:54:39.042500</ts>
    <user>Nella</user>
    <text>consider voting for &lt;https://dev.clojure.org/jira/browse/CLJ-2365&gt;</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:57:04.043400</ts>
    <user>Rosaline</user>
    <text>you are thinking of the reverse</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:57:35.044400</ts>
    <user>Sheron</user>
    <text>yes i figured the same,  reify is in the opposite direction of my issue :slightly_smiling_face:</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:57:44.044600</ts>
    <user>Marlyn</user>
    <text>Because of type erasure in the JVM there's no way to ensure</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:57:53.044900</ts>
    <user>Marlyn</user>
    <text>"don't pass it non-strings"</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:58:21.046600</ts>
    <user>Rosaline</user>
    <text>my guess is it is more a question of providing intellisense</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:58:51.047200</ts>
    <user>Sheron</user>
    <text>it's not about runtime checks :slightly_smiling_face: , it's about making life easier for coworker who invokes my clojure function from java</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:59:23.047900</ts>
    <user>Sheron</user>
    <text>so that he wouldn't feed my code a biconsumer that expects an elephant and a teapot as argument types</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T15:59:52.048400</ts>
    <user>Rosaline</user>
    <text>but that is just dynamic typing right?</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:00:47.049200</ts>
    <user>Rosaline</user>
    <text>clojure is a dynamic language, no getting around it</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:02:27.050400</ts>
    <user>Sheron</user>
    <text>well it does look kind of weird that i can  say  (defn foo [^String a-string] .... )  but not  (defn foo [^java.util.List&amp;lt;String&amp;gt; many-strings] ...)  ...</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:02:48.051000</ts>
    <user>Sheron</user>
    <text>but as said, i'm not married to the biconsumer interface, so i can declare my own, more restrictive, it will have to do</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:03:14.051600</ts>
    <user>Marlyn</user>
    <text>type erasure happens in the jvm</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:03:30.052000</ts>
    <user>Rosaline</user>
    <text>nah, it happens in the java compiler</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:03:36.052200</ts>
    <user>Marlyn</user>
    <text>^, true</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:03:49.053100</ts>
    <user>Rosaline</user>
    <text>java the language has generics</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:03:50.053200</ts>
    <user>Marlyn</user>
    <text>Also, ^String doesn't actually mean the parameter is a string</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:03:56.053600</ts>
    <user>Rosaline</user>
    <text>the jvm doesn't</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:04:12.054100</ts>
    <user>Marlyn</user>
    <text>clojure will still make the function signature Object, and do local casts to string where necessary</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:04:19.054400</ts>
    <user>Rosaline</user>
    <text>type hints are not type declarations</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:04:22.054600</ts>
    <user>Marlyn</user>
    <text>^</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:05:18.055400</ts>
    <user>Rosaline</user>
    <text>&lt;https://clojurians.slack.com/archives/C03S1KBA2/p1548104447049200&gt;</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:08:35.055700</ts>
    <user>Sheron</user>
    <text>i understand that part</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:09:14.056600</ts>
    <user>Sheron</user>
    <text>i'm not trying to alter that part either :slightly_smiling_face: ... all i need to do is to define type hints for people invoking the code from java ... so that their intellij could be helpful for them when invoking my code</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:09:34.056900</ts>
    <user>Rosaline</user>
    <text>there are huge issues with that as well</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:10:03.058300</ts>
    <user>Rosaline</user>
    <text>the classes etc created by clojure may not be visible until you load the clojure code</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:10:13.058700</ts>
    <user>Sheron</user>
    <text>well the gen-class part etc. i already solved</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:10:50.059900</ts>
    <user>Sheron</user>
    <text>so i'm generating a nice jar file that has nicely callable functions ... just wanted the parameter types to be more precise</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:10:58.060400</ts>
    <user>Nella</user>
    <text>you could create the interface in a java file and then implement the interface in clojure</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:11:11.061000</ts>
    <user>Sheron</user>
    <text>instead of just java.util.List :slightly_smiling_face:</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:11:19.061400</ts>
    <user>Rosaline</user>
    <text>and stop aot compiling your clojure code</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:11:37.062000</ts>
    <user>Rosaline</user>
    <text>(after you write a stub with whatever types in java)</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:14:50.063500</ts>
    <user>Rosaline</user>
    <text>use &lt;https://clojure.github.io/clojure/javadoc/clojure/java/api/package-summary.html&gt; to invoke clojure from your java</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:15:58.064300</ts>
    <user>Sheron</user>
    <text>gen-class with :methods and matching   -some-method is cleaner when you look from the java side</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:16:05.064700</ts>
    <user>Sheron</user>
    <text>they won't even know it's clojure they are invoking</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:16:22.065200</ts>
    <user>Rosaline</user>
    <text>sure, I mean, you write a facade in java and invoke clojure like that</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:16:29.065500</ts>
    <user>Sheron</user>
    <text>i'm not struggling with invoking itself :slightly_smiling_face:</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:16:44.066200</ts>
    <user>Rosaline</user>
    <text>expose your java facade then with whatever types you want</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:16:50.066400</ts>
    <user>Sheron</user>
    <text>was just struggling with the generic part which while being a mimic (since the compiler throws it all away in the end) , is helpful at dev time</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:18:07.067400</ts>
    <user>Sheron</user>
    <text>at least helpful in the way their intellij will draw a bold red line around the elephant and teapot</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:23:24.069800</ts>
    <user>Rosaline</user>
    <text>I am an old foe of clojure's aot compilation (I've seen it cause real head scratchers) so I am generally of the opinion that the design that leaves it out is best, in this case writing some facade in java (so it gets intellisense and types, maybe even javadocs), and having it call clojure via clojure.java.api seems best</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:24:24.071600</ts>
    <user>Celestine</user>
    <text>I agree with &lt;@Rosaline&gt; that if you want IntelliJ to provide type hints, you're going to have to write a facade in Java and then call into Clojure behind the scenes. The Java API that Clojure exposes is really nice -- we rely very heavily on it in production and have done for years to integrate Clojure into our legacy apps.</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:24:37.071900</ts>
    <user>Sheron</user>
    <text>well this piece of code has just one entry point (calling one singe function) and what follows is a bunch of clojure all the way</text>
  </message>
  <message conversation_id="238">
    <ts>2019-01-21T16:30:15.075000</ts>
    <user>Lee</user>
    <text>Is type hinting loses effect at function boundaries?
In the code below I would expect that no reflection is needed, but lein check says it does:
Reflection warning, core.clj:26:43 - reference to field getDisplayLanguage can't be resolved.
Why? Please explain type hinting rules. (I've read &lt;https://clojure.org/reference/java_interop#typehints&gt; and googled this, but can't see why it is working as it does in this case.)
(ns core
  (:import [java.util Locale Locale$Builder]))

(defn get-default
  ^Locale
  []
  (let [l (Locale/getDefault)]
    ;; local usage of the result of a static method:
    ;; no type hint is needed to avoid reflection:
    (println "gd" (.getDisplayLanguage l))
    l))

(defn getd2
  []
  (let [l (get-default)]
    ;; local usage of the result of a type hinted return value of an fn:
    ;; no new type hint is needed to avoid reflection:
    (println "gd2" (.getDisplayLanguage l))
    l))

(defn -main
  [&amp;amp; _]
  (let [l (getd2)]
    ;; indirect usage of the result of a type hinted return value of an fn:
    ;; type hint is ineffective, reflection is used
    (println "Hello, type hinting World!" (.getDisplayLanguage l))))</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:30:30.075200</ts>
    <user>Rosaline</user>
    <text>yes</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:30:51.075600</ts>
    <user>Rosaline</user>
    <text>type hinting is purely local to function boundaries</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:32:31.077200</ts>
    <user>Rosaline</user>
    <text>type hints are not type declarations, type hints are not propagated</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:32:55.077600</ts>
    <user>Rosaline</user>
    <text>there is nothing like a type inference algorithm going on behind the scenes</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:33:35.078200</ts>
    <user>Rosaline</user>
    <text>it is helpful to consider clojure in the context of being dynamic and code reload and things being redfined</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:34:20.079300</ts>
    <user>Rosaline</user>
    <text>it is not safe to conclude getd2 will always return a whatever because the current definition defines it as returning a whatever</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:34:20.079400</ts>
    <user>Sheron</user>
    <text>was a small surprise to me too at some point that clojure typehints dont enforce anything really</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:35:12.080300</ts>
    <user>Sheron</user>
    <text>i was passing through a completely wrong type and the machine happily hummed along :angel:</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T16:35:18.080600</ts>
    <user>Rosaline</user>
    <text>type hints are just that, hints to the compiler when dealing with interop, if you don't do interop they do nothing</text>
  </message>
  <message conversation_id="239">
    <ts>2019-01-21T17:15:58.083000</ts>
    <user>Jasmine</user>
    <text>(except long and primitive double type hints)</text>
  </message>
  <message conversation_id="239">
    <ts>2019-01-21T17:17:01.083300</ts>
    <user>Lee</user>
    <text>Thanks for the info. Then &lt;https://clojure.org/reference/java_interop#typehints&gt; is quite misleading for me, stating that "Once a type hint has been placed on an identifier or expression, the compiler will try to resolve any calls to methods thereupon at compile time. In addition, the compiler will track the use of any return values and infer types for their use and so on, so very few hints are needed to get a fully compile-time resolved series of calls." Now I think this could be used to deduce the behavior you describe above: "Type hints are metadata tags placed on symbols or expressions that are consumed by the compiler."</text>
  </message>
  <message conversation_id="240">
    <ts>2019-01-21T17:31:17.084500</ts>
    <user>Rosaline</user>
    <text>the docs on the page are maybe correct if you add a modifier like "within a function" somewhere</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T18:00:41.086300</ts>
    <user>Celestine</user>
    <text>It's probably worth mentioning that Clojure's "unit of compilation" is a single top-level form -- so when `getd2` is compiled, it has no type hint attached to indicate what it might return, and when `-main` is compiled that definition of `getd2` with no true hint is what it sees being used.</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T18:02:56.088400</ts>
    <user>Celestine</user>
    <text>It would be incorrect in a lot of cases for Clojure to automatically tag the return type of a function based on whatever it deduces the type of the last expression in its body to be (which would be the only way the type deduced for `l` inside `getd2` to be propagated _out_ of the function).</text>
  </message>
  <message conversation_id="236">
    <ts>2019-01-21T18:03:27.088600</ts>
    <user>Celestine</user>
    <text>Does that help &lt;@Lee&gt;?</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:48:26.089800</ts>
    <user>Matha</user>
    <text>Hi! Quick question: how can I add a CSS class to an element based on a condition in Hiccup? I tried `[:div.foo {:class (if error "has-error")}]` but it sets `(if error "has-error")` as the class of the element :thinking_face:  &lt;@Angila&gt;</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:50:59.090200</ts>
    <user>Angila</user>
    <text>&lt;@Matha&gt; How are you using it?</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:51:04.090400</ts>
    <user>Angila</user>
    <text>```
user=&amp;gt; (use 'hiccup2.core)
nil
user=&amp;gt; (def error true)
#'user/error
user=&amp;gt; (str (html [:div.foo {:class (if error "has-error")}]))
"&amp;lt;div class=\"foo has-error\"&amp;gt;&amp;lt;/div&amp;gt;"
user=&amp;gt; (def error false)
#'user/error
user=&amp;gt; (str (html [:div.foo {:class (if error "has-error")}]))
"&amp;lt;div class=\"foo\"&amp;gt;&amp;lt;/div&amp;gt;"
```</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:52:19.090900</ts>
    <user>Angila</user>
    <text>It sounds like you're accidentally quoting your code.</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:53:14.091500</ts>
    <user>Matha</user>
    <text>&lt;@Angila&gt; I was not quoting it I think, but i was on `v1.0.5` of Hiccup; perhaps that explains it? Trying v2 now :slightly_smiling_face: Thanks for the prompt reply</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:55:26.092000</ts>
    <user>Angila</user>
    <text>It might have been an issue fixed since then.</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:57:04.092100</ts>
    <user>Matha</user>
    <text>I just tried it on v2; doesn’t seem to make a difference. Here is how I am using it: &lt;https://gist.github.com/hmaurer/5d52b8a5edb625b00e175b9a7404f904#file-render-fn-clj-L50&gt;</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:57:51.092300</ts>
    <user>Matha</user>
    <text>and in the REPL:
```
user=&amp;gt; (use 'hiccup2.core)
nil
user=&amp;gt; (def error true)
#'user/error
user=&amp;gt; (str (html [:div.foo {:class (if error "has-error")}]))
"&amp;lt;div class=\"foo if error has-error\"&amp;gt;&amp;lt;/div&amp;gt;"
```</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:58:24.092500</ts>
    <user>Matha</user>
    <text>```
hiccup                       {:mvn/version "2.0.0-alpha1"}
```</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T19:59:24.092700</ts>
    <user>Angila</user>
    <text>Ah, it's been fixed in master but not been released.</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:00:34.092900</ts>
    <user>Matha</user>
    <text>&lt;@Angila&gt; ah; I will just point my dependency to master then. Thanks! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:01:02.093100</ts>
    <user>Angila</user>
    <text>Not sure you can without a deps.edn in the repo?</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:01:08.093300</ts>
    <user>Angila</user>
    <text>I'll release a 2.0.0-alpha2</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:01:38.093500</ts>
    <user>Matha</user>
    <text>Ah I don’t know, first time using deps.edn. I just tried and you are right, I can’t :face_with_rolling_eyes:</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:01:40.093700</ts>
    <user>Matha</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:02:57.093900</ts>
    <user>Celestine</user>
    <text>Given there are no transitive dependencies, you _can_ use it from GitHub with `deps.edn` -- you have to specify the manifest type as `:deps` and it will silently ignore the lack of a `deps.edn` file in the repo.</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:03:27.094100</ts>
    <user>Angila</user>
    <text>Ah, today I learned something :slightly_smiling_face:</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:05:20.094300</ts>
    <user>Celestine</user>
    <text>```clj -Sdeps '{:deps {hiccup {:git/url "&lt;https://github.com/weavejester/hiccup&gt;" :sha "8021043ae0eb64d1a31d87c0fa6071f44bc1c7f3" :deps/manifest :deps}}}'```</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:05:52.094500</ts>
    <user>Matha</user>
    <text>&lt;@Celestine&gt; ah, TIL as well. Thanks!</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:06:13.094700</ts>
    <user>Angila</user>
    <text>2.0.0-alpha2 has just been uploaded to Clojars anyway, so you can do it either way.</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:08:06.094900</ts>
    <user>Matha</user>
    <text>&lt;@Angila&gt; Brilliant; just updated the deps; it fixed my issues. Thank you :slightly_smiling_face: (for live support at 1am)</text>
  </message>
  <message conversation_id="241">
    <ts>2019-01-21T20:08:39.095100</ts>
    <user>Angila</user>
    <text>No problemo</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:21:21.097800</ts>
    <user>Gillian</user>
    <text>Is there anyway, using clojure.zip to replace a node with two new nodes?

```(let [btree [45 [10] [57]]
      root-loc (zip/zipper vector? rest
                           (fn [[x _ _] children]
                             (vec (cons x children)))
                           btree)]
  (-&amp;gt; root-loc
      zip/down ;[10]
      (replace-with [11] [12]) ; instead of zip/replace
      zip/root))
;=&amp;gt; [45 [11] [12] [57]]```


Using `zip/replace` I can only swap out in this example `[10]` with `[[11] [12]]`, which is not what I want because I don't want to add depth.</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:24:17.098700</ts>
    <user>Gillian</user>
    <text>I can't really see any other way around this besides going up and replacing the children in the parent node.</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:37:09.099500</ts>
    <user>Gillian</user>
    <text>I see I could replace and possibly insert left or right, will try that next.</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:39:45.101300</ts>
    <user>Rosaline</user>
    <text>the way a zipper works, you can think of replace as a mapping operation, you are a particular node, an you map (constantly replacement-value) over the value of that node, what you are talking about would be mapcat</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:41:24.103200</ts>
    <user>Rosaline</user>
    <text>in theory maybe possible, but there are kind of edge cases, like if are visiting node N, and you replace it with nodes N1 and N2, which are node are now visiting? you can make a choice, but there is no single "right" answer there</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:41:55.103900</ts>
    <user>Gillian</user>
    <text>Yeah maybe my particular case warrants a new replace with function, like you said no right answer</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:42:00.104100</ts>
    <user>Gillian</user>
    <text>I really want to split a node in two</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:42:36.105200</ts>
    <user>Gillian</user>
    <text>I don't really care which node i'm visiting because i zip the tree right after</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:42:40.105400</ts>
    <user>Rosaline</user>
    <text>I think you have to do it from the parent</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:42:47.105600</ts>
    <user>Gillian</user>
    <text>Combining zip/replace with insert-right works... since i don't really care if it goes left or right in my case:
```(defn replace-with
  [loc node1 node2]
    (let [[x {r :r :as path}] loc]
      (with-meta [node1 (assoc path :r (cons node2 r) :changed? true)] (meta loc))))```</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:42:55.106100</ts>
    <user>Gillian</user>
    <text>This seems to work</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:42:57.106200</ts>
    <user>Rosaline</user>
    <text>I mean, if you don't want to dig in to the internals of zippers and figure out how to mapcat</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:43:50.106700</ts>
    <user>Gillian</user>
    <text>These are the originals:
```(defn insert-right
  [loc item]
    (let [[node {r :r :as path}] loc]
      (if (nil? path)
        (throw (new Exception "Insert at top"))
        (with-meta [node (assoc path :r (cons item r) :changed? true)] (meta loc)))))

(defn replace
  [loc node]
    (let [[_ path] loc]
      (with-meta [node (assoc path :changed? true)] (meta loc))))```</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:43:51.106800</ts>
    <user>Rosaline</user>
    <text>(which I guess you did)</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:44:26.107400</ts>
    <user>Gillian</user>
    <text>I was just hoping I maybe missed something but it helped talking to you lol</text>
  </message>
  <message conversation_id="242">
    <ts>2019-01-21T20:46:01.108000</ts>
    <user>Gillian</user>
    <text>The only reason I didn't want to do it from the parent is because I did not want to go through at worst n many children to find and replace it with two new children</text>
  </message>
  <message conversation_id="243">
    <ts>2019-01-22T04:02:55.109600</ts>
    <user>Raina</user>
    <text>What is the easiest way to achieve the following: I want to split the sequence after the element for which a predicate is true.</text>
  </message>
  <message conversation_id="243">
    <ts>2019-01-22T04:05:46.110100</ts>
    <user>Houston</user>
    <text>you can use split-with</text>
  </message>
  <message conversation_id="243">
    <ts>2019-01-22T04:06:32.110500</ts>
    <user>Raina</user>
    <text>split with will split before the element</text>
  </message>
  <message conversation_id="243">
    <ts>2019-01-22T04:06:34.110700</ts>
    <user>Raina</user>
    <text>not after</text>
  </message>
  <message conversation_id="243">
    <ts>2019-01-22T04:09:16.112100</ts>
    <user>Raina</user>
    <text>Like suppose you have `[1 11 8 -3 9 33]` and you want `[1 11 8 -3]` and `[9 33]`, based on predicate `neg?`.</text>
  </message>
  <message conversation_id="243">
    <ts>2019-01-22T04:12:05.112200</ts>
    <user>Arlen</user>
    <text>Maybe combine split-with with (partition 2 1 ...)</text>
  </message>
  <message conversation_id="243">
    <ts>2019-01-22T04:40:41.112800</ts>
    <user>Houston</user>
    <text>Something like (map #(apply concat %1) (partition-all 2  (partition-by neg? [1 11 8 -3 9 33 -5 6 7])))</text>
  </message>
  <message conversation_id="243">
    <ts>2019-01-22T04:49:07.113000</ts>
    <user>Raina</user>
    <text>yes that's what I ended up with</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:14:20.115800</ts>
    <user>Kandra</user>
    <text>I'm facing a very weird problem with `require`. For some reason, when I'm saying `(require my-ns-var :refresh)` the changes are *not* applied to that namespace. I'm pretty confident my logic is solid but I'm just missing some intricate detail about `require` here. Just for reference: this is about reloading changed Garden CSS declarations within my REPL</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:14:59.116400</ts>
    <user>Kandra</user>
    <text>Problem manifests itself when I have structure main style-ns / page style-ns / component style-ns &amp;lt;- change to last one</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:15:31.117000</ts>
    <user>Kandra</user>
    <text>I'm requiring the files in correct order, meaning that I first require namespaces which have no dependencies and from there I progress towards the main style-ns</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:15:51.117300</ts>
    <user>Kandra</user>
    <text>But for some strange reason those changes are not applied</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:16:37.117800</ts>
    <user>Kandra</user>
    <text>If however I go and reload those namespace manually within REPL in that same order the changes are applied</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:21:20.118100</ts>
    <user>Jasmine</user>
    <text>:refresh is not a thing - you want :reload</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:21:36.118400</ts>
    <user>Kandra</user>
    <text>Ah sorry about that. Using :reload</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:22:03.118800</ts>
    <user>Kandra</user>
    <text>So as much as I would have hoped that would have been my problem but alas it isn't :disappointed:</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:22:09.119000</ts>
    <user>Jasmine</user>
    <text>:)</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:23:07.119500</ts>
    <user>Jasmine</user>
    <text>you could also try :reload-all (which also reloads dependent namespaces)</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:23:24.120200</ts>
    <user>Kandra</user>
    <text>Yeah, tried that. Only thing that changes is the CSS compilation time since requiring takes more time. No help</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:23:49.120900</ts>
    <user>Kandra</user>
    <text>I'm just using normal Clojure vars here, nothing special really</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:24:09.121500</ts>
    <user>Jasmine</user>
    <text>I don’t know anything about garden, but state has to live somewhere, typically in a var, so I’d investigate where Garden state is getting cached</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:24:13.121700</ts>
    <user>Kandra</user>
    <text>`def`s referring to other `def`s</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:24:34.122100</ts>
    <user>Kandra</user>
    <text>Garden just takes a bunch of Clojure data structures in and spits out a string of CSS</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:24:57.122600</ts>
    <user>Kandra</user>
    <text>I've debugged this so far that the actual data structures do not update</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:25:11.122900</ts>
    <user>Kandra</user>
    <text>So the bug happens way before Garden steps into play</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:25:56.123300</ts>
    <user>Kandra</user>
    <text>But apparently I'm not missing something special require magic here that I should be aware of</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:27:07.123500</ts>
    <user>Jasmine</user>
    <text>not much other magic to know</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:27:35.124100</ts>
    <user>Kandra</user>
    <text>Yeah. I actually also tried to use `remove-ns` before requiring but that proved to cause all kinds of nasty problems</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:28:40.124800</ts>
    <user>Jasmine</user>
    <text>other places where state hides in the runtime are in multimethods (dispatch table) and protocols</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:29:09.125300</ts>
    <user>Kandra</user>
    <text>I'm wondering if I'm hitting garbage collection somehow</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:29:28.125900</ts>
    <user>Kandra</user>
    <text>Meaning, my old vars are left dangling and old references are still there for some reason</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:29:35.126000</ts>
    <user>Jasmine</user>
    <text>doubt it</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:30:01.126400</ts>
    <user>Kandra</user>
    <text>It's really strange since if I go and reload all namespace in order manually it works</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:30:07.126600</ts>
    <user>Kandra</user>
    <text>But not if I do the same via require</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:30:36.126900</ts>
    <user>Kandra</user>
    <text>(manually meaning via Cursive "load namespace")</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:32:32.127800</ts>
    <user>Kandra</user>
    <text>Ahem... Ok. Got it working.</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:32:42.128100</ts>
    <user>Kandra</user>
    <text>Now using :reload-all</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:32:43.128300</ts>
    <user>Kandra</user>
    <text>AND</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:32:46.128500</ts>
    <user>Kandra</user>
    <text>I restarted my REPL...</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:33:04.128700</ts>
    <user>Kandra</user>
    <text>Still confused what caused all this</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:33:15.129000</ts>
    <user>Kandra</user>
    <text>I had tried restarting my REPL previously</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:33:50.129400</ts>
    <user>Kandra</user>
    <text>I really need to dig in deeper into this at some point but I've wasted too much time already</text>
  </message>
  <message conversation_id="244">
    <ts>2019-01-22T09:33:59.129700</ts>
    <user>Kandra</user>
    <text>Thanks for ideas!</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T10:25:55.130300</ts>
    <user>Gigi</user>
    <text>Hi! I’ve encountered an issue when a protocol is reloaded causing the implementing objects to no longer `satisfies?` the protocol.

Example:
```
(defprotocol A (foo [_]))
(def a (reify A (foo [_])))

(prn (satisfies? A a))        ;; =&amp;gt; true
(defprotocol A (foo [_]))
(prn (satisfies? A a))        ;; =&amp;gt; false
```

Is there any way to specify that the protocol object should not be recreated when reloading namespaces? Sort of like `defonce` does</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T10:25:58.130400</ts>
    <user>Karena</user>
    <text>looks like something that &lt;https://clojuredocs.org/clojure.core/split-with&gt; could be useful for</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T10:38:18.130900</ts>
    <user>Jasmine</user>
    <text>In short, no</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T10:42:38.131400</ts>
    <user>Clarine</user>
    <text>but you can wrap it in a defonce:
```
(defonce do-once (defprotocol ...))
```</text>
  </message>
  <message conversation_id="246">
    <ts>2019-01-22T11:26:42.135700</ts>
    <user>Gigi</user>
    <text>Thanks for your answers :slightly_smiling_face: It looks like this wasn't the cause of the problem after all, the protocol is only loaded once. The object that implements the protocol is loaded twice – why that would break things is very mysterious :man-shrugging: _edit: &amp;lt;--- I now realize this doesn't make that much sense in the context of my example, sorry :sweat_smile:_</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:05:53.137300</ts>
    <user>Rosaline</user>
    <text>my guess would be you are aot compiling and somewhere you are importing the class created by a defrecord without requiring the namespace that defines it, so the import is loading the old aot compiled version</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:16:27.139000</ts>
    <user>Gigi</user>
    <text>I think you are onto something with regards to aot. I will post the minimum code that breaks `lein uberjar` in thread.</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:16:50.139100</ts>
    <user>Gigi</user>
    <text>```
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; In protocol namespace
(ns protocol)

(defprotocol A
  (foo [_]))


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; In implementation namespace
(ns implementation
  (:require [protocol :as proto]))

(def a
  (reify proto/A
    (foo [_] ":)")))

(println "I get printed twice!")
(assert (satisfies? proto/A a) "I fail the second time")                        


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; In our core namespace
(ns core
  (:require [implementation]))
```</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:17:42.139300</ts>
    <user>Gigi</user>
    <text>But this works fine in a fresh project though, so it must be something that's configured in my company's project</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:18:28.139500</ts>
    <user>Rosaline</user>
    <text>what are you doing when it fails? running tests?</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:18:39.139700</ts>
    <user>Gigi</user>
    <text>Running `lein uberjar` (compiling)</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:19:42.140000</ts>
    <user>Rosaline</user>
    <text>if you see that printed twice, I would look for a require with :reload or :reload-all</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:23:57.140200</ts>
    <user>Gigi</user>
    <text>There are no `:reload`s or `:reload-all`s in our project</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:26:19.140400</ts>
    <user>Gigi</user>
    <text>Using `defonce` instead of `def` fixes it:
```
(defonce a
  (reify proto/A
    (foo [_] ":)")))
```</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:27:07.140600</ts>
    <user>Rosaline</user>
    <text>it gets rid of the symptom, but there is still something wrong somewhere</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:27:46.140800</ts>
    <user>Rosaline</user>
    <text>when was the last time you ran lein clean?</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:29:03.141100</ts>
    <user>Gigi</user>
    <text>Unsure, but this happens when building the app on AWS as well. I'll try to do a `lein clean` before `uberjar` locally just in case
_update: same error_</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:32:33.141600</ts>
    <user>Rosaline</user>
    <text>do you have a user.clj or some plugin or something that loads your code?</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:36:06.141800</ts>
    <user>Gigi</user>
    <text>We do have `user.clj` and we use `ring.middleware.reload/wrap-reload`, but these should only be enabled in dev</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:36:52.142000</ts>
    <user>Rosaline</user>
    <text>I bet one of those is the issue</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:37:31.142200</ts>
    <user>Rosaline</user>
    <text>aot compilation *must* load the code, so if you load it first, then ask it to be compiled you will end up loading it twice (which breaks things)</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:41:47.142400</ts>
    <user>Gigi</user>
    <text>That makes a lot of sense. Thanks :slightly_smiling_face: I will have to look more into this tomorrow as it is getting late.</text>
  </message>
  <message conversation_id="245">
    <ts>2019-01-22T12:42:17.142600</ts>
    <user>Gigi</user>
    <text>I have a good feeling about looking into the aot stuff, thanks again!</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T15:34:35.143400</ts>
    <user>Bart</user>
    <text>hm. is there some kind of practical difference between `seq` and `lazyseq` that i'm missing?</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T15:34:59.143900</ts>
    <user>Bart</user>
    <text>sorry, `lazy-seq`. to me it looks like they're basically equivalent</text>
  </message>
  <message conversation_id="248">
    <ts>2019-01-22T15:43:49.144300</ts>
    <user>Becki</user>
    <text>they aren't similar much at all. check out the examples on &lt;https://www.conj.io/store/v1/org.clojure/clojure/1.9.0/clj/clojure.core/lazy-seq&gt;</text>
  </message>
  <message conversation_id="248">
    <ts>2019-01-22T16:03:19.145400</ts>
    <user>Rosaline</user>
    <text>seq is for consuming seqs from things that are seq'able, lazy-seq is for constructing lazy seqs recursively</text>
  </message>
  <message conversation_id="248">
    <ts>2019-01-22T16:18:33.145800</ts>
    <user>Lee</user>
    <text>Thanks for your explanation, it helps!
(Honestly, I thought that type inference is capable of determining the correct type in many cases, e.g. in the case of getd2's return type, and Clojure does it IF it is "hinted" to do so: I thought that once I type hinted something, Clojure respects the explicit intention and avoids reflection in all cases where it can, based on the hint I gave. I understood the &lt;http://clojure.org|clojure.org&gt; reference (linked previously) in this way too. After the answers I got here I tend to suspect that Rich H. doesn't want to encourage the usage of type hinting, so limits its capabilities.)</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T16:29:03.146000</ts>
    <user>Celestine</user>
    <text>Yeah, real world Clojure can get a lot done without type hints -- if you're not worried about the performance of reflection, you almost _never_ need type hints. If you decide to worry about performance due to reflection, it's still most often surprising just how few type hints you really need -- and they tend to be very localized, which I really appreciate.</text>
  </message>
  <message conversation_id="249">
    <ts>2019-01-22T16:36:45.146200</ts>
    <user>Lee</user>
    <text>I agree, I never needed type hints, I "decided to worry about it" :)) just because I am working on a free sw whose usage I don't want to hinder by possible performance bottle necks. I found also that very few type hints were enough to eliminate all reflections -- just I didn't understand why exactly those type hints are needed / why exactly there... And the reference doc didn't help me here.</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T18:56:25.148200</ts>
    <user>Alix</user>
    <text>Do any libraries exist where I can do collection transformations like (map, filter, reverse, rest, ect) but it keeps the type of collection</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T18:57:15.149000</ts>
    <user>Alix</user>
    <text>I know about `mapv` and `filterv` but more would be awesome.</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T18:57:37.149300</ts>
    <user>Becki</user>
    <text>that sounds like one of the core tenants of specter</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T18:57:55.149600</ts>
    <user>Becki</user>
    <text>&lt;https://github.com/nathanmarz/specter&gt;</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T18:59:19.150800</ts>
    <user>Alix</user>
    <text>I was thinking more of a library with heaps of sequence functions that would instead return vectors for example.</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T18:59:44.151700</ts>
    <user>Dann</user>
    <text>for clojure's built in datatypes other than seq, you can use `(into (empty coll) (filter f) coll)` etc.</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:00:16.152300</ts>
    <user>Dann</user>
    <text>or if you just want to pick a specific result type: `(into [] (map f) coll)` etc.</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:01:20.152900</ts>
    <user>Alix</user>
    <text>&lt;@Dann&gt; I've also been using `vec` quite a bit.</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:01:44.154000</ts>
    <user>Dann</user>
    <text>the difference here is into doesn't need to build a lazy-seq, as it uses the transducing arity of the collection functions</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:02:11.154900</ts>
    <user>Dann</user>
    <text>and it can use `#{}` or `clojure.lang.PersistentQueue/EMPTY` or `{}` instead of `[]`</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:02:17.155000</ts>
    <user>Rosaline</user>
    <text>why do you need vectors?</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:02:37.155600</ts>
    <user>Alix</user>
    <text>A have dynamic tabular data</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:03:02.156600</ts>
    <user>Alix</user>
    <text>I don't know how many rows or columns I might have</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:03:14.157100</ts>
    <user>Alix</user>
    <text>So I'm accessing cells in this data by x and y index</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:04:13.158100</ts>
    <user>Rosaline</user>
    <text>in broad strokes, lazy seqs can to some extent amortize the cost of traversals by being lazy so maybe you do a bunch of mapping opperations and only force them at the end, if you always concretely constructing vectors you lose that</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:04:47.158800</ts>
    <user>Alix</user>
    <text>So I should probably just convert to vec in the final step?</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:04:58.159400</ts>
    <user>Alix</user>
    <text>Or can I avoid vectors entirely here?</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:05:03.159800</ts>
    <user>Dann</user>
    <text>it depends on the operations you are doing</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:05:04.159900</ts>
    <user>Rosaline</user>
    <text>hard to say</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:05:53.161100</ts>
    <user>Rosaline</user>
    <text>I might look at another representation too, maybe `{[x y] data}`, depending on what operations you are doing</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:06:30.161700</ts>
    <user>Rosaline</user>
    <text>if you can describe your transformations as a transducer you pass to into, that is even better than lazy seqs</text>
  </message>
  <message conversation_id="250">
    <ts>2019-01-22T19:09:52.164300</ts>
    <user>Matha</user>
    <text>Hello! Quick q: is there a nice way in clojure to do a few `if-let` / `if` / `let` in a row (nested), but have them all branch out to the same fallback? For example when signing in a user you might want to fetch a user account (`if-let`), then check the password, etc, but if at any point the condition fails you want to branch out to some error message</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:10:58.165100</ts>
    <user>Celestine</user>
    <text>&lt;@Matha&gt; If none of the "success" expressions can produce `nil`, you can always wrap the whole in `(or ... (my-fall-back))`</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:11:20.165500</ts>
    <user>Celestine</user>
    <text>(and use `when`/`when-let`)</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:12:44.166600</ts>
    <user>Celestine</user>
    <text>Also, I'd say that if you have a long enough chain of conditionals, you probably need to refactor it into smaller functions anyway (which then become a bit easier to chain together with `or` :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:12:54.166900</ts>
    <user>Celestine</user>
    <text>(or threading or whatever)</text>
  </message>
  <message conversation_id="247">
    <ts>2019-01-22T19:23:00.167700</ts>
    <user>Yoko</user>
    <text>&lt;@Matha&gt; hi. try these two different macros</text>
  </message>
  <message conversation_id="250">
    <ts>2019-01-22T19:23:12.167900</ts>
    <user>Yoko</user>
    <text>None</text>
  </message>
  <message conversation_id="251">
    <ts>2019-01-22T20:31:50.169000</ts>
    <user>Matha</user>
    <text>Thank you!</text>
  </message>
  <message conversation_id="252">
    <ts>2019-01-22T21:07:15.169800</ts>
    <user>Belle</user>
    <text>Can someone help me decipher one of the new clojure error messages? It’s this: ```{:type clojure.lang.Compiler$CompilerException
   :message Syntax error compiling at (plus_one_api/server.clj:38:1).
   :data #:clojure.error{:phase :compile-syntax-check, :line 38, :column 1, :source plus_one_api/server.clj}
   :at [clojure.lang.Compiler load Compiler.java 7647]}
  {:type java.lang.ClassNotFoundException
   :message clojure.spec
   :at [java.net.URLClassLoader findClass URLClassLoader.java 466]}]
 :trace```</text>
  </message>
  <message conversation_id="252">
    <ts>2019-01-22T21:07:53.170600</ts>
    <user>Belle</user>
    <text>Does this mean that `clojure.spec` is missing? I looked at line 38 in server.clj, and it is a comment. Not a spec related comment</text>
  </message>
  <message conversation_id="252">
    <ts>2019-01-22T21:08:20.170900</ts>
    <user>Diamond</user>
    <text>You might have a look at a library I’ve been working on which has pattern matcher designed to make this sort of thing easier to read without sacrificing (much) performance :point_right: &lt;https://github.com/noprompt/meander&gt;
```
(require '[meander.match.alpha :as r.match])

(defn find-password [data]
  (r.match/find data
    ;; Only binds ?password if data contains a :user key which points
    ;; to a map that has a :password key points to a string.
    {:user {:password (pred string? ?password)}}
    [:okay ?password]

    ?_
    [:nope]))

(find-password {:user {:password "password"}})
;; =&amp;gt; 
[:okay "password"]

(find-password {:user {:password :wrong}})
;; =&amp;gt; 
[:nope]

(find-password {:user {}})
;; =&amp;gt; 
[:nope]

(find-password {})
;; =&amp;gt; 
[:nope]
```</text>
  </message>
  <message conversation_id="252">
    <ts>2019-01-22T21:08:29.171400</ts>
    <user>Belle</user>
    <text>This is a brand new Vase application</text>
  </message>
  <message conversation_id="252">
    <ts>2019-01-22T21:10:57.172200</ts>
    <user>Diamond</user>
    <text>Sorry! I just Spectered the channel and didn’t mean to. :sob:</text>
  </message>
  <message conversation_id="252">
    <ts>2019-01-22T21:11:12.172500</ts>
    <user>Diamond</user>
    <text>Err, jQueried it.</text>
  </message>
  <message conversation_id="252">
    <ts>2019-01-22T21:11:54.173100</ts>
    <user>Diamond</user>
    <text>Please don’t send me hate mail. :laughing:</text>
  </message>
  <message conversation_id="253">
    <ts>2019-01-22T22:21:36.173300</ts>
    <user>Otelia</user>
    <text>meander looks really awesome, i intend to find some time to try it soon</text>
  </message>
  <message conversation_id="253">
    <ts>2019-01-22T22:25:53.175000</ts>
    <user>Latonya</user>
    <text>&lt;@Belle&gt; Is there any mention of the Java class java.net.URLClassLoader and/or the method findClass in that file?  If so, note that findClass is a method, not a class.  If there is an import statement that contains "java.net.URLClassLoader findClass", perhaps it should be changed to "&lt;http://java.net|java.net&gt; URLClassLoader"</text>
  </message>
  <message conversation_id="253">
    <ts>2019-01-22T22:26:50.175600</ts>
    <user>Latonya</user>
    <text>The exception is a ClassNotFoundException, and since findClass is a method name, not a class name, that led to my questions above.</text>
  </message>
  <message conversation_id="254">
    <ts>2019-01-22T23:51:07.176000</ts>
    <user>Anisha</user>
    <text>hello, i am using kafka consumer in clojure and i keep seeing tons of these logs printed to screen:

 `DEBUG org.apache.kafka.clients.consumer.internals.ConsumerCoordinator - Group some-group committed offset 8 for partition test-0`
there are thousands of these, any one know how to turn them off?</text>
  </message>
  <message conversation_id="254">
    <ts>2019-01-22T23:52:00.176900</ts>
    <user>Anisha</user>
    <text>settings i've tried:

`log4j.properties` in `resources` folder
```log4j.rootLogger=INFO
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=[%d] %p %m (%c)%n

log4j.logger.org.apache.kafka.streams=WARN
log4j.additivity.org.apache.kafka.streams=false```

also
```(set-logger! :level :warn
             :additivity false
             :pattern "%p - %m%n"
             :filter (constantly true))```</text>
  </message>
  <message conversation_id="254">
    <ts>2019-01-22T23:55:03.177500</ts>
    <user>Anisha</user>
    <text>i was able to solve this by adding a logback.xml file to my project</text>
  </message>
  <message conversation_id="255">
    <ts>2019-01-23T00:18:06.177700</ts>
    <user>Belle</user>
    <text>Nothing I found. Did clojure.spec exist under a different name at some point? Is this a version issue?</text>
  </message>
  <message conversation_id="253">
    <ts>2019-01-23T00:43:39.178200</ts>
    <user>Latonya</user>
    <text>I do not see any mention of clojure.spec, or anything that I know to be related to clojure.spec, in the error messages you sent.  What makes you believe it has something to do with clojure.spec?</text>
  </message>
  <message conversation_id="256">
    <ts>2019-01-23T08:46:28.186200</ts>
    <user>Leatha</user>
    <text>This might be stupid question but is there a way to process huge binary files/streams lazily? or partially ? or in chunks? and to save those parts/chunks to a file until stream is empty?

I need to save big binary data to a file system without realizing whole stream in memory/heap.

What i imagine is i have a reference to big input stream in java which i will use in clojure code as input stream which will take lets say
50mb &amp;gt; save to file
take another 50 &amp;gt; save to file
do this until stream is empty

i am doing this `(&lt;http://clojure.java.io/copy|clojure.java.io/copy&gt; input (java.io.FileOutputStream. (.getAbsolutePath tmp-file)))` but i am not sure if it's what i am looking for</text>
  </message>
  <message conversation_id="256">
    <ts>2019-01-23T08:56:29.186800</ts>
    <user>Jasmine</user>
    <text>the Java channel APIs are probably the most efficient way to do stuff like this - I’d just google up the best way to do it in Java, and then do the same via interop</text>
  </message>
  <message conversation_id="257">
    <ts>2019-01-23T09:51:26.187400</ts>
    <user>Cherise</user>
    <text>Does not short-circuit</text>
  </message>
  <message conversation_id="257">
    <ts>2019-01-23T09:52:15.187600</ts>
    <user>Cherise</user>
    <text>```
user=&amp;gt; (some-nil [nil false (throw (Exception. "no"))])
Exception no  user/eval149 (NO_SOURCE_FILE:7)
```</text>
  </message>
  <message conversation_id="258">
    <ts>2019-01-23T10:22:23.188300</ts>
    <user>Sixta</user>
    <text>I think it copy does what you want, in 2mb chunks. It's pretty efficient. </text>
  </message>
  <message conversation_id="257">
    <ts>2019-01-23T10:31:02.188500</ts>
    <user>Cherise</user>
    <text>What problem are you trying to solve that you need this type of logical operator?</text>
  </message>
  <message conversation_id="257">
    <ts>2019-01-23T10:33:15.188800</ts>
    <user>Clarine</user>
    <text>Suppose you’re reading a configuration option where false is a valid option. Then you could have:
`(or* (read-from-env …) (read-from-java-opts …) (read-from-file …) (throw. (Exception. "no option provided")))`
It’s no problem to write this macro myself, but I already solved it another way</text>
  </message>
  <message conversation_id="257">
    <ts>2019-01-23T10:34:19.189000</ts>
    <user>Cherise</user>
    <text>Ah I see</text>
  </message>
  <message conversation_id="259">
    <ts>2019-01-23T11:40:30.190100</ts>
    <user>Matha</user>
    <text>By the way, was this feature simply not supported in v1? (1.0.5). (dynamic classes)</text>
  </message>
  <message conversation_id="260">
    <ts>2019-01-23T11:59:57.191000</ts>
    <user>Clarine</user>
    <text>Could the persistent data structures in Clojure be made as performant in idiomatic Clojure instead of Java?</text>
  </message>
  <message conversation_id="257">
    <ts>2019-01-23T12:04:57.191300</ts>
    <user>Rosaline</user>
    <text>&lt;https://mobile.twitter.com/datomic_team/status/1088117920918577153&gt;</text>
  </message>
  <message conversation_id="260">
    <ts>2019-01-23T12:06:44.191700</ts>
    <user>Clarine</user>
    <text>yeah, that’s why I’m wondering :slightly_smiling_face:</text>
  </message>
  <message conversation_id="260">
    <ts>2019-01-23T12:14:58.193100</ts>
    <user>Clarine</user>
    <text>why does pop throw for empty collections, but not for an empty queue?</text>
  </message>
  <message conversation_id="260">
    <ts>2019-01-23T12:17:17.193300</ts>
    <user>Clarine</user>
    <text>&lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/PersistentQueue.java#L106&gt;</text>
  </message>
  <message conversation_id="261">
    <ts>2019-01-23T12:42:44.194300</ts>
    <user>Matha</user>
    <text>&lt;@Angila&gt; ^</text>
  </message>
  <message conversation_id="261">
    <ts>2019-01-23T12:54:08.196200</ts>
    <user>Darci</user>
    <text>Hmmm, don't see a more specific channel, so asking here. Has anyone used bidi &lt;https://github.com/juxt/bidi&gt; with http-kit? The claim is it is compatible with http-kit, but not sure how to use it via `http-kit/run-server`</text>
  </message>
  <message conversation_id="262">
    <ts>2019-01-23T13:02:14.196700</ts>
    <user>Ashlea</user>
    <text>&lt;@Darci&gt; might be worth posting in &lt;#C0CFGN25D|juxt&gt;</text>
  </message>
  <message conversation_id="263">
    <ts>2019-01-23T13:14:50.198000</ts>
    <user>Brain</user>
    <text>Does anyone know how to correctly escape arguments to `lein` under windows powershell? I've tried variously `lein update-in :dependencies conj "[nrepl \``"0.5.3\``"]" -- repl`` and `lein update-in :dependencies conj '[nrepl "0.5.3"]' -- repl`, but the first just prints the help banner and the latter blows up in the lisp reader claiming 0.5.3 isn't a valid number :slightly_smiling_face:</text>
  </message>
  <message conversation_id="263">
    <ts>2019-01-23T13:18:57.199100</ts>
    <user>Brain</user>
    <text>also I apparently can't escape backticks in slack markdown correctly, so that is compounding the issue...</text>
  </message>
  <message conversation_id="264">
    <ts>2019-01-23T13:23:12.200200</ts>
    <user>Becki</user>
    <text>if you have emacs and cider, you could jack in in a project and then check the `*Messages*` buffer which will have the lein invocation that CIDER uses. it has some escaped arguments there.</text>
  </message>
  <message conversation_id="263">
    <ts>2019-01-23T13:23:46.200900</ts>
    <user>Brain</user>
    <text>yeah, looked at that already, but it appears that cider is invoking it some other way, to complicate matters :S</text>
  </message>
  <message conversation_id="263">
    <ts>2019-01-23T13:24:19.202100</ts>
    <user>Brain</user>
    <text>unfortunately I want to invoke lein from powershell, rather than from cmd.exe, which I (think) is approximately what is happening.  Either way, cider prints `:dependencies conj ^"[nrepl \^"0.5.3\^"]^"` which is definitely not right</text>
  </message>
  <message conversation_id="263">
    <ts>2019-01-23T13:28:33.202300</ts>
    <user>Angila</user>
    <text>No, looks like it was a bug that was only recently fixed. Specifically it's only an issue if you use the dot-notation *and* supply another class that's calculated dynamically.</text>
  </message>
  <message conversation_id="263">
    <ts>2019-01-23T13:37:42.202500</ts>
    <user>Fredda</user>
    <text>I believe Rich has intimated in the past that it could be done, but the payoff wasn't clear. FWIW, I believe CLJS's data structures are within an order of magnitude performance of CLJ's and they're implemented in CLJS. Not sure if the performance difference is between js's vm and JVM, or between CLJS and CLJ though.</text>
  </message>
  <message conversation_id="263">
    <ts>2019-01-23T13:49:59.202700</ts>
    <user>Clarine</user>
    <text>good point</text>
  </message>
  <message conversation_id="265">
    <ts>2019-01-23T13:58:07.202900</ts>
    <user>Matha</user>
    <text>&lt;@Angila&gt; ah, I see, thank you!</text>
  </message>
  <message conversation_id="266">
    <ts>2019-01-23T14:54:20.204300</ts>
    <user>Brain</user>
    <text>It seems the batch file works differently and can be sanely escaped. I suspect also that is why emacs works, since it isn't powershell aware iiuc.</text>
  </message>
  <message conversation_id="267">
    <ts>2019-01-23T15:04:55.205100</ts>
    <user>Darci</user>
    <text>Thanks - you were correct, answer given there</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:06:25.205400</ts>
    <user>Leah</user>
    <text>we should port clojurescript to graal/truffle and find out</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:07:12.205700</ts>
    <user>Clarine</user>
    <text>well, since the code in clojurescript is “pure” clojure, it shouldn’t be too hard to port it to .cljc, so you can run them in the JVM</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:12:09.205900</ts>
    <user>Leah</user>
    <text>:thinking_face:</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:20:30.206100</ts>
    <user>Leah</user>
    <text>can you recommend a resource about how clojurescript bootstraps itself?</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:21:24.206300</ts>
    <user>Clarine</user>
    <text>I don’t know that much about it. Personally I would start reading the source code.</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:22:58.206500</ts>
    <user>Leah</user>
    <text>yeah, I'm doing that, still can't comprehend how little js there is in the repo, just a handful of boostrap files in &lt;https://github.com/clojure/clojurescript/tree/master/src/main/cljs/cljs&gt;</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:27:25.206900</ts>
    <user>Clarine</user>
    <text>here is some emit code: &lt;https://github.com/clojure/clojurescript/blob/master/src/main/clojure/cljs/compiler.cljc#L512&gt;</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:27:51.207200</ts>
    <user>Leah</user>
    <text>i see, that's all happening in &lt;https://github.com/clojure/clojurescript/blob/master/src/main/cljs/cljs/core.cljs&gt;</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:28:24.207700</ts>
    <user>Leah</user>
    <text>the `js*` calls i mean</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:29:00.207900</ts>
    <user>Clarine</user>
    <text>I was wrong about that probably</text>
  </message>
  <message conversation_id="268">
    <ts>2019-01-23T15:31:45.208200</ts>
    <user>Leah</user>
    <text>but the emit link is helpful.  I had searched for this without success a few times, thanks!</text>
  </message>
  <message conversation_id="269">
    <ts>2019-01-23T16:12:47.208400</ts>
    <user>Fredda</user>
    <text>Well, cljs's persistent data structures are built on js's arrays, which are pretty semantically close to java's imo. So it shouldn't be too hard to port them over</text>
  </message>
  <message conversation_id="270">
    <ts>2019-01-23T19:07:12.209500</ts>
    <user>Jina</user>
    <text>`(take 100 (sort-by :timestamp &amp;gt; @nf-chat-messages))` what am i doing wrong to get a null pointer exception o.o</text>
  </message>
  <message conversation_id="270">
    <ts>2019-01-23T19:11:32.210100</ts>
    <user>Celestine</user>
    <text>&lt;@Jina&gt; sounds like `:timestamp` is missing from one of those messages…</text>
  </message>
  <message conversation_id="270">
    <ts>2019-01-23T19:12:55.210900</ts>
    <user>Celestine</user>
    <text>try `(every? :timestamp @nf-chat-messages)` and see whether it’s truthy — I bet it’s not.</text>
  </message>
  <message conversation_id="271">
    <ts>2019-01-23T22:31:23.213300</ts>
    <user>Ronald</user>
    <text>Hi all,

By my understanding of &lt;https://clojure.org/reference/reader&gt;, `.1` should not be a valid identifier, since it is not an available symbol ("Symbols beginning or ending with '.' are reserved by Clojure"). And yet in my REPL:

```
user=&amp;gt; .1

CompilerException java.lang.RuntimeException: Unable to resolve symbol: .1 in this context, compiling:(null:0:0) 
user=&amp;gt; (def .1 0)
#'user/.1
user=&amp;gt; .1
0
```</text>
  </message>
  <message conversation_id="271">
    <ts>2019-01-23T22:32:06.213900</ts>
    <user>Ronald</user>
    <text>Am I misunderstanding the description of a symbol?</text>
  </message>
  <message conversation_id="271">
    <ts>2019-01-23T22:49:15.214600</ts>
    <user>Rosaline</user>
    <text>"reserved" means you shouldn't use them, it doesn't mean clojure always cares if you do</text>
  </message>
  <message conversation_id="272">
    <ts>2019-01-23T23:05:42.214800</ts>
    <user>Jasmine</user>
    <text>in this case, I definitely would not</text>
  </message>
  <message conversation_id="271">
    <ts>2019-01-23T23:20:19.215900</ts>
    <user>Ronald</user>
    <text>Ah I see, I interpreted "reserved" as "invalid as an identifier", but that makes sense. Thanks!</text>
  </message>
  <message conversation_id="271">
    <ts>2019-01-23T23:21:40.216600</ts>
    <user>Ronald</user>
    <text>And yes, I wouldn't define `.1` as anything unless you're in a Clojure obfuscation competition :sweat_smile:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:25:13.217500</ts>
    <user>Diamond</user>
    <text>Seems like the ~language~ wording could just be improved to say exactly what &lt;@Rosaline&gt; is said and leave no interpretation  up to the reader.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:28:11.220000</ts>
    <user>Celestine</user>
    <text>&lt;@Diamond&gt; It’s common for languages to define a set of “reserved by &amp;lt;the language&amp;gt;” symbols — without giving more meaning than that.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:28:23.220500</ts>
    <user>Celestine</user>
    <text>Java does it, C/C++ both do it…</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:28:54.221200</ts>
    <user>Diamond</user>
    <text>But in those cases the symbols are reserved because they’re keywords.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:29:57.222400</ts>
    <user>Diamond</user>
    <text>The real reason why you *shouldn’t* define a symbol that leads with a dot in Clojure has everything to do with the how the reader reads list forms that have a symbol which leads with a dot.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:29:59.222700</ts>
    <user>Diamond</user>
    <text>```
(def .a (fn [] 1))

.a
;; =&amp;gt; 
#function[scratch/-DOT-a]

(.a)
;; Malformed member expression, expecting (.member target ...)
```</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:31:03.223800</ts>
    <user>Celestine</user>
    <text>No, in many languages, certain characters in certain positions are “reserved” — and may or may not work, and may change their meaning in the future.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:32:36.225400</ts>
    <user>Diamond</user>
    <text>Okay, sure, I’ll buy that. JavaScript is like that. But my point is regardless of who’s saying it, it’s still unclear.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:33:04.226200</ts>
    <user>Celestine</user>
    <text>It’s got a very specific meaning in language definitions tho’…</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:33:17.226700</ts>
    <user>Diamond</user>
    <text>No.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:33:39.227800</ts>
    <user>Celestine</user>
    <text>It’s like in Standards, where unspecified/undefined/implementation-defined terms are used.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:33:47.228100</ts>
    <user>Diamond</user>
    <text>The fact we’re having this discussion proves there’s a misunderstanding and that the language is not clear because it can be misinterpreted.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:33:48.228200</ts>
    <user>Celestine</user>
    <text>(and shall/should/may/must)</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:34:13.228700</ts>
    <user>Diamond</user>
    <text>Right. But! In those cases the terms are defined up front.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:34:28.229100</ts>
    <user>Diamond</user>
    <text>And they’re defined up front for that very reason.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:35:07.230000</ts>
    <user>Celestine</user>
    <text>Well, Clojure doesn’t have a “standard”, even tho’ it uses common standard words in its description.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:35:22.230200</ts>
    <user>Diamond</user>
    <text>Ha!</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:35:53.230900</ts>
    <user>Diamond</user>
    <text>There’s a big difference between well defined and, well, defined.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:35:55.231100</ts>
    <user>Diamond</user>
    <text>:slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:36:06.231400</ts>
    <user>Celestine</user>
    <text>“Well, actually” :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:36:09.231600</ts>
    <user>Diamond</user>
    <text>:smile:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:37:31.233200</ts>
    <user>Diamond</user>
    <text>It doesn’t seem like defining terms up front would be a bad idea though. It’s useful.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:37:51.234000</ts>
    <user>Celestine</user>
    <text>True, Clojure could add a Glossary… if it doesn’t already have one…</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:38:04.234300</ts>
    <user>Diamond</user>
    <text>It’s a problem in software engineering in general.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:38:48.234900</ts>
    <user>Diamond</user>
    <text>Having to be clear is no fun. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:41:23.236600</ts>
    <user>Celestine</user>
    <text>Having spent eight years on the ANSI C++ Standards Committee, I can assure you that “being clear” can seem overrated :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:41:26.236700</ts>
    <user>Diamond</user>
    <text>Back to the case with the reader though; it would be helpful to explain _why_ it’s reserved.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:41:54.237800</ts>
    <user>Celestine</user>
    <text>All it could say is “reserved for future use”…</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:42:02.238100</ts>
    <user>Diamond</user>
    <text>Or, at least, in that context, what “reserved” means.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:42:02.238200</ts>
    <user>Diamond</user>
    <text>The example I provided above is a good illustration.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:42:05.238300</ts>
    <user>Celestine</user>
    <text>That’s what “reserved” means.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:42:22.238900</ts>
    <user>Celestine</user>
    <text>It may work now, it may not. Even if it works now, it may not work in the future.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:42:36.239400</ts>
    <user>Diamond</user>
    <text>I’m sure it has it’s drawback but we shouldn’t throw the baby out with the bath water.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:42:56.240300</ts>
    <user>Celestine</user>
    <text>It may partially work (as the `.1` examples above show) or not at all or it may launch missiles :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:42:56.240400</ts>
    <user>Diamond</user>
    <text>Specs and clear language are really useful.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:43:35.241100</ts>
    <user>Celestine</user>
    <text>Would you be happier if it said “symbols beginning or ending with `.` have undefined behavior”?</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:44:04.241700</ts>
    <user>Diamond</user>
    <text>No. Because that would be lying. It has precisely defined behavior.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:44:33.242300</ts>
    <user>Diamond</user>
    <text>It’s precisely defined in the reader.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:45:10.243700</ts>
    <user>Celestine</user>
    <text>I don’t know that you could accurately write down the situations under which `.a` would behave in every possible way tho’…</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:45:35.244500</ts>
    <user>Celestine</user>
    <text>(and I don’t know that such a description would be _useful_ even if it were accurate)</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:46:10.245600</ts>
    <user>Diamond</user>
    <text>Well, I suppose, if Rich decided that it’d be worth checking if the symbol can be resolved before treating it as a method call… we could say something along the lines of “this is it’s definition now”.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:46:32.246200</ts>
    <user>Celestine</user>
    <text>And the problem with writing it down is that then if the behavior changes accidentally in some situation in the future, the description may no longer be accurate — whereas “reserved” imparts no specific meaning and _would not be rendered inaccurate_ by such changes.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:47:27.247600</ts>
    <user>Celestine</user>
    <text>Clojure has a long history of only specifying partial behaviors — and leaving implicitly undefined a lot of behavior. In order to allow the implementation to change/improve and only be bound by the explicitly defined partial behaviors.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:48:33.249600</ts>
    <user>Celestine</user>
    <text>`clojure.set` is the classic example — the functions are defined for inputs that are sets. If you give them non-sets, you still get results, but they’re not specified by the docstrings — and could change whenever the implementation gets improved.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:49:08.250300</ts>
    <user>Celestine</user>
    <text>There are extremely good reasons in language design — and language specification — for _not specifying the behavior_ of a certain set of constructs.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:49:42.250900</ts>
    <user>Diamond</user>
    <text>I’m not sure if that’s a good argument. Maybe I’m reading this wrong but are you suggesting deliberate usage of vague language?</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:50:10.251900</ts>
    <user>Celestine</user>
    <text>No, I’m saying _undefined_ or _unspecified_ behavior is a valuable — and extremely common — part of language specification.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:50:25.252300</ts>
    <user>Celestine</user>
    <text>Those are _not_ “vague” terms.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:52:47.254800</ts>
    <user>Diamond</user>
    <text>Eh, I mean you could say that but in this case I don’t think there’s a lot of room for symbols that lead with a dot to do much else besides be resolved to vars.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:53:13.255300</ts>
    <user>Diamond</user>
    <text>I do think it’s better than “reserved”, however, I’ll give you that.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T00:58:07.258700</ts>
    <user>Diamond</user>
    <text>Regarding intentional partial behavior, I think it’s fine _up to_ not being open about it. That `clojure.set` does not tell someone up front that, hey, if you give me non-map stuff I can’t promise you it’s gonna work, is borderline dishonest.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:00:10.260600</ts>
    <user>Celestine</user>
    <text>I think we’re just going to disagree.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:00:45.261800</ts>
    <user>Diamond</user>
    <text>I’m not sure we’re in disagreement. I’m agreeing with you that “undefined” is superior to “reserved”.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:01:06.262500</ts>
    <user>Celestine</user>
    <text>For me, with a lot of background in language design and specification, what the Clojure reader page says about `.a` / `a.` etc is perfectly clear and reasonable.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:01:17.262900</ts>
    <user>Celestine</user>
    <text>The same goes for `clojure.set`.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:01:27.263300</ts>
    <user>Celestine</user>
    <text>It defines the behavior for specific inputs.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:01:38.263800</ts>
    <user>Celestine</user>
    <text>It therefore does not define the behavior for other inputs.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:01:57.264400</ts>
    <user>Diamond</user>
    <text>Sean, I have a lot of experience with language design and specification as well.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:03:02.265800</ts>
    <user>Diamond</user>
    <text>But, Sean, there’s no disclaimer on the namespace that says “GIGO for non-maps”.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:03:14.266100</ts>
    <user>Celestine</user>
    <text>There does not need to be.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:03:20.266400</ts>
    <user>Diamond</user>
    <text>And that’s the problem.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:03:31.266900</ts>
    <user>Diamond</user>
    <text>Many people think there should be such a disclaimer</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:03:43.267300</ts>
    <user>Celestine</user>
    <text>Many people are wrong :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:03:52.267600</ts>
    <user>Diamond</user>
    <text>I’ve been working with Clojure personally and professional for nearly 6 years and I’m one of those people.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:04:15.268300</ts>
    <user>Diamond</user>
    <text>I’ve seen people burned by that, by `merge`, and countless other so-call “GIGO” functions,</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:04:25.268700</ts>
    <user>Diamond</user>
    <text>it’s punishment.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:04:42.269200</ts>
    <user>Celestine</user>
    <text>This is why I said we’re just going to disagree.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:05:23.270700</ts>
    <user>Celestine</user>
    <text>If the docstring says “Given A, the function does B / produces C” then you cannot expect any given behavior if you give it “non-A” as input.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:05:23.270800</ts>
    <user>Diamond</user>
    <text>What are you disagreeing with?</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:06:21.272500</ts>
    <user>Celestine</user>
    <text>Now, if you give it A and you don’t get C, then that’s a bug. But if you give it X and get C, that’s should not be unexpected.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:06:36.273000</ts>
    <user>Celestine</user>
    <text>If you give it X and get Y, that should not be unexpected either.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:07:38.274200</ts>
    <user>Diamond</user>
    <text>It’s still not clear to me why omitting the fact the functions _will_ accept non-set input and have undefined behavior.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:07:58.274600</ts>
    <user>Diamond</user>
    <text>We both agree that’s useful language, no?</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:08:27.275500</ts>
    <user>Celestine</user>
    <text>It’s superfluous. If the behavior is (only) defined for set input _then it is implicitly not defined for non-set input_.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:09:31.278100</ts>
    <user>Celestine</user>
    <text>Given that Rich and several other Clojure/core folks seem to abide by that line of thinking — and it’s common across many language definitions (both ANSI and otherwise) — I’m not sure why folks think the docstring will (or indeed should) change…?</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:10:12.279600</ts>
    <user>Celestine</user>
    <text>Rich, in particular, is against over-specification — he’s said as much many times in his talks.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:10:29.280000</ts>
    <user>Wai</user>
    <text>This is fascinating. Is there a longer text anywhere on the design choice to have easily accessible undefined behaviors to such an extent in the language?</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:10:30.280100</ts>
    <user>Diamond</user>
    <text>Well you can’t be Clojure/core if you disagree with Rich.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:11:12.281700</ts>
    <user>Celestine</user>
    <text>(I’m certainly not Clojure/core but given my background I tend to agree with him on a lot of stuff — not _everything_ but a lot :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:12:02.282700</ts>
    <user>Diamond</user>
    <text>And it’s not “over-specification” it’s just being clear about what you’re leaving operations on unexpected inputs undefined.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:13:41.284600</ts>
    <user>Diamond</user>
    <text>You can still do the whole GIGO thing while sparing everyone that’s ever used and will use Clojure the cost of having that WTF? conversation that inevitably crops up when “weird stuff” happens like `merge`ing two vectors.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:14:16.285100</ts>
    <user>Celestine</user>
    <text>Like I say, we’re just going to disagree on this. I think it’s perfectly clear.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:14:51.285800</ts>
    <user>Celestine</user>
    <text>&lt;@Wai&gt; I had hoped it might be referenced here &lt;https://gist.github.com/reborg/dc8b0c96c397a56668905e2767fd697f&gt; but it seems not (at least, not yet).</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:16:16.287100</ts>
    <user>Celestine</user>
    <text>Perhaps this should be added to &lt;https://clojure.org/guides/faq&gt; somewhere? But I bet people would still complain that the _docstrings_ didn’t also include that same text… :neutral_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:16:18.287300</ts>
    <user>Diamond</user>
    <text>It’s par for the course for folks like me who have a differing view than that of Clojure/core et all to be marginalized.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:17:10.288800</ts>
    <user>Diamond</user>
    <text>We’re entitled!</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:17:10.288900</ts>
    <user>Celestine</user>
    <text>You’re not being marginalized. We’re just disagreeing.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:18:08.289900</ts>
    <user>Diamond</user>
    <text>I’m fairly sure that if I submitted a patch to `clojure.set` which added to the docstring a disclaimer about undefined behavior for non-inputs it’d be given a pass.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:18:17.290200</ts>
    <user>Diamond</user>
    <text>Could be speculating though.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:18:25.290500</ts>
    <user>Celestine</user>
    <text>Correct. Because Rich has explained his stance on that several times.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:18:45.291100</ts>
    <user>Celestine</user>
    <text>He is under no obligation to accept every patch nor even explain why he won’t.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:18:54.291600</ts>
    <user>Diamond</user>
    <text>Well, yeah, it’s his language.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:18:59.292000</ts>
    <user>Celestine</user>
    <text>In that particular case, he has explained _repeatedly_ why he won’t.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:19:51.294700</ts>
    <user>Celestine</user>
    <text>I’ve asked for stuff in the past and he’s shot me down too. I don’t feel marginalized. I just accept he and I have different viewpoints on some things.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:19:52.294900</ts>
    <user>Diamond</user>
    <text>It doesn’t seem like a reason though. Like, there’s nothing, literally nothing wrong with explaining that `clojure.set` has undefined behavior in the docstring. Zero.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:20:20.296300</ts>
    <user>Celestine</user>
    <text>I’ve explained above why adding that sort of stuff is pointless (from the project’s p.o.v.).</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:20:26.296600</ts>
    <user>Celestine</user>
    <text>You just don’t agree.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:20:58.297600</ts>
    <user>Celestine</user>
    <text>And that’s fine. We don’t all have to agree. But sometimes we need to _accept_ that folks don’t agree.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:21:07.297900</ts>
    <user>Diamond</user>
    <text>I don’t because I’ve been a party to so much buggy Clojure code and long debugging sessions.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:21:40.298900</ts>
    <user>Diamond</user>
    <text>If it was a one of thing that happened once in a while, I’d be more likely to agree with you.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:22:39.301000</ts>
    <user>Celestine</user>
    <text>I’ve had Clojure in production for almost eight years now. I’ve hardly ever run across “buggy Clojure code” in Clojure itself, nor much in most libraries to be honest. Bugs in _my_ code, sure. And very few _long_ debugging sessions. But, yeah, sometimes I chase my tail for longer than I’d like — because I did something wrong.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:23:05.301700</ts>
    <user>Celestine</user>
    <text>We’ve run prerelease builds of Clojure in production nearly all that time, from an alpha of 1.3 up to date.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:24:21.303600</ts>
    <user>Diamond</user>
    <text>Well, Sean, that’s a nice anecdote and I’m happy for you but at virtually every company I’ve worked at that’s used Clojure I’ve seen the issues that people bring up.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:25:57.305300</ts>
    <user>Diamond</user>
    <text>The stance to not put in a disclaimer because “it’s pointless” is void of any kind of compassion. But, again, we’re not entitled to compassion.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:28:00.306800</ts>
    <user>Diamond</user>
    <text>I remember having similar discussions about the horrible error messages years ago and being effectively told that it was _my_ problem.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:34:15.311900</ts>
    <user>Diamond</user>
    <text>We’re getting better error messages now so maybe, given a few more years, we might see some willingness to at least hear out these people (like me) who’d like to see some more transparency in the docstrings.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:34:45.312400</ts>
    <user>Colette</user>
    <text>idk, it’s pretty standard with ‘undocumented’ undefined behaviour. c++ comes to mind as notorious for this. you document your domains and co-domains, not everything that’s unsupported. Adding a docstring just add noise. For examples and other info refer to some 3rd party resource. Like &lt;http://clojuredocs.org|clojuredocs.org&gt; for example</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:36:23.313600</ts>
    <user>Diamond</user>
    <text>So this phrase “it’s standard” seems like it’s a synonym for “that’s tradition”.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:36:43.314400</ts>
    <user>Diamond</user>
    <text>Kinda like bad error messages. They’ve always sucked and they’re gonna stay that way.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:36:43.314500</ts>
    <user>Celestine</user>
    <text>Well, in C++’s case, it’s literally “Standard” — as in ANSI/ISO :slightly_smiling_face:</text>
  </message>
  <message conversation_id="274">
    <ts>2019-01-24T01:37:03.314900</ts>
    <user>Colette</user>
    <text>well there are plenty of good reasons why it’s standard</text>
  </message>
  <message conversation_id="274">
    <ts>2019-01-24T01:37:09.315400</ts>
    <user>Colette</user>
    <text>checking inputs cost cycles for one</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:37:23.315900</ts>
    <user>Diamond</user>
    <text>Yeah, I’m not saying there should be checks.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:37:44.316400</ts>
    <user>Diamond</user>
    <text>I said the GIGO (garbage in garbage out) is fine.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:38:03.317300</ts>
    <user>Diamond</user>
    <text>I’m on board with domain/codomain as well.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:38:27.318300</ts>
    <user>Celestine</user>
    <text>OK, here’s a question then ```clojure.core/+
([] [x] [x y] [x y &amp;amp; more])
  Returns the sum of nums. (+) returns 0. Does not auto-promote
  longs, will throw on overflow. See also: +'
``` The docstring does not define the behavior of `(+ 'a :b "c")` — do you think it should?</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:38:58.318900</ts>
    <user>Diamond</user>
    <text>That thing throws if you give it anything other than numbers.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:39:10.319300</ts>
    <user>Diamond</user>
    <text>So, right there, you’re analogy is missing the point.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:39:17.319800</ts>
    <user>Celestine</user>
    <text>The docstring does not say that.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:39:24.320200</ts>
    <user>Diamond</user>
    <text>Set will take non-set inputs and _not_ throw.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:39:33.320600</ts>
    <user>Celestine</user>
    <text>It could do _anything_ if you give it non-numbers.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:39:42.320800</ts>
    <user>Diamond</user>
    <text>:neutral_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:40:42.321200</ts>
    <user>Celestine</user>
    <text>That is _exactly_ my point.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:41:11.322000</ts>
    <user>Celestine</user>
    <text>You “know” that giving `+` anything but numbers will throw an exception — but it doesn’t say that.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:41:39.323000</ts>
    <user>Celestine</user>
    <text>It could quite happily give you any result — or spin off into infinity — and still satisfy its docstring.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:41:43.323200</ts>
    <user>Diamond</user>
    <text>No, no, no. That is *not* analogous.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:41:57.323600</ts>
    <user>Celestine</user>
    <text>Again then, we’re going to disagree.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:42:08.323900</ts>
    <user>Diamond</user>
    <text>`clojure.core/merge` and `clojure.set/union` would be good analogies.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:42:34.324500</ts>
    <user>Diamond</user>
    <text>Both will accept inputs that have undefined behavior for their outputs and not throw.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:42:53.325200</ts>
    <user>Diamond</user>
    <text>`+` on the other can surely receive invalid inputs but will throw given them.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:43:14.325900</ts>
    <user>Celestine</user>
    <text>But their docstrings do not specify the behavior for non-maps / non-sets. That’s exactly the same as `+` not specifying the behavior for non-nums.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:44:00.326800</ts>
    <user>Diamond</user>
    <text>My point is that because they do not throw, those functions _should_ explain they have undefined behavior for unexpected input types.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:44:14.327300</ts>
    <user>Diamond</user>
    <text>`+` doesn’t need to because it will throw.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:44:29.328100</ts>
    <user>Diamond</user>
    <text>The error will tell you that you did something wrong.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:44:41.328600</ts>
    <user>Colette</user>
    <text>why would you not assume everything has undefined behaviour for unexpected input?</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:44:46.328800</ts>
    <user>Celestine</user>
    <text>Exactly.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:45:17.329400</ts>
    <user>Celestine</user>
    <text>```(! 1374)-&amp;gt; node
&amp;gt; 1 + "s"
'1s'
&amp;gt; 1 + []
'1'
&amp;gt; [] + {}
'[object Object]'
&amp;gt; 
``` I don’t even know where to begin to explain that…</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:45:47.330200</ts>
    <user>Diamond</user>
    <text>Well, most people would assume the function would throw for bad input but that’s not “the way” for the reasons Sean mentioned above.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:46:20.331600</ts>
    <user>Celestine</user>
    <text>“most people would assume the function would throw for bad input” — disagree.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:46:25.332100</ts>
    <user>Celestine</user>
    <text>Anecdotal at best.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:46:28.332300</ts>
    <user>Colette</user>
    <text>&lt;@Celestine&gt; now try `{} + []`</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:47:03.334200</ts>
    <user>Celestine</user>
    <text>&lt;@Colette&gt; Yeah, I know… JavaScript has a lot of weird behavior :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:47:05.334600</ts>
    <user>Colette</user>
    <text>your examples make sense, that one does not</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:47:16.335300</ts>
    <user>Diamond</user>
    <text>It also has a spec that tells you about it too.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:47:17.335400</ts>
    <user>Celestine</user>
    <text>(for the curious `{} + []` produces `0`)</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:47:31.335600</ts>
    <user>Diamond</user>
    <text>jsfuck ftw! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:48:46.336400</ts>
    <user>Celestine</user>
    <text>&lt;https://www.ecma-international.org/ecma-262/9.0/index.html#sec-addition-operator-plus&gt;</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:49:41.337300</ts>
    <user>Diamond</user>
    <text>Yep. Tells you _exactly_ what it’s gonna do.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:50:15.338400</ts>
    <user>Celestine</user>
    <text>And you think that would be better than Clojure’s docstring for `+`? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:50:32.339100</ts>
    <user>Diamond</user>
    <text>Ah but, damn, if they had just decide not to do that they could have reserved the right to do whatever they wanted!</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:51:58.341600</ts>
    <user>Celestine</user>
    <text>To be honest, reading that ECMA spec for `+`, I’m not sure it says what should happen when either operand is neither a number or a string.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:52:15.342400</ts>
    <user>Celestine</user>
    <text>It’s pretty clear about num + num and str + str tho’…</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:52:57.343800</ts>
    <user>Colette</user>
    <text>well `[]` is analogous to empty string</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:53:14.344800</ts>
    <user>Colette</user>
    <text>so `1 + '' == '1'`</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:53:21.345100</ts>
    <user>Celestine</user>
    <text>(in particular, it doesn’t give any indication that swapping the left and right args gives different behavior)</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:54:02.346300</ts>
    <user>Colette</user>
    <text>and `{}` cant evaluate to a number, so it’s cast to it’s string representation which is ‘[Object object]’</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:55:01.348200</ts>
    <user>Wai</user>
    <text>Hmm. Undefined behavior is undefined by definition, ie the doc string definition. It is not immediately obvious why that information is kept as programmatically unactionable text. Had it been structured the reader/compiler/runtime could have used the same information (“-flagtomakeundefinedcallsthrowexceptions”). Is it a strength to keep the knowledge of what is undefined as docstrings (that are practically required reading).</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:56:34.350800</ts>
    <user>Celestine</user>
    <text>&lt;@Colette&gt; The spec says GetValue -&amp;gt; ToPrimitive on both args and if either are strings at that point, then convert both to strings and concatenate them. Else if neither primitive type is string, convert them both to numbers and add them.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:56:45.351200</ts>
    <user>Wai</user>
    <text>Really fascinated by the topic, reading your discussion with interest. Thanks for the thoughtful (and patient) explanations :grinning:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:58:36.352200</ts>
    <user>Celestine</user>
    <text>…and ToNumber {} is well-defined (bizarrely) in 7.1.3</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:58:45.352400</ts>
    <user>Colette</user>
    <text>yeah but that does not explain the difference between `{} + []` and `[] + {}`</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:59:05.352900</ts>
    <user>Diamond</user>
    <text>I’ll rephrase my previous remark about “most people”’s expectation to throw as “many people”. Editing that now would be… weird.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T01:59:33.353300</ts>
    <user>Colette</user>
    <text>it must mean that the left argument is evaluated first</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:00:01.354000</ts>
    <user>Diamond</user>
    <text>I’d also accept a clojure spec for `clojure.set` functions and `clojure.core/merge`.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:00:37.354900</ts>
    <user>Colette</user>
    <text>gotta go to bed it’s late here :disappointed: goodnight</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:00:57.355300</ts>
    <user>Diamond</user>
    <text>:wave:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:00:59.355400</ts>
    <user>Celestine</user>
    <text>It seems to be down to the difference between `ToNumber []` and `ToNumber {}` — but right now I am not convinced the spec actually defines the result and so we’re back in unspecified behavior territory (which was my point).</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:02:29.357000</ts>
    <user>Celestine</user>
    <text>Yeah, my partner’s already gone to bed so I should probably join them…</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:02:47.357700</ts>
    <user>Wai</user>
    <text>(I’m just about trying to get kids off to school :sweat_smile:)</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:02:55.358000</ts>
    <user>Diamond</user>
    <text>Fun having this discussion with you &lt;@Celestine&gt;! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:03:35.359000</ts>
    <user>Celestine</user>
    <text>Heh, I’m always up for discussions about language semantics and standards etc — it’s what I’ve been doing on and off since the early 80's :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:04:03.359600</ts>
    <user>Diamond</user>
    <text>Maybe one day I’ll be in your shoes saying what you’re saying.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:04:18.359900</ts>
    <user>Diamond</user>
    <text>Ha!</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:04:35.360500</ts>
    <user>Celestine</user>
    <text>Then we’d have nothing to “argue” about :slightly_smiling_face:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:04:52.360900</ts>
    <user>Diamond</user>
    <text>I secretly hope not because that’ll mean we’re still telling computers what to do with text. :sob:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:05:20.362100</ts>
    <user>Tammera</user>
    <text>meh, rather have computers be told what to do with text than with speech</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:05:27.362500</ts>
    <user>Celestine</user>
    <text>Could be worse. Could be switches, setting 0's and 1's… I remember doing that in the early 80's! Argh!</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:05:43.363100</ts>
    <user>Tammera</user>
    <text>I am pretty sure I will never be comfortable talking to my computer and the thing actually talking back :’)</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:05:56.363400</ts>
    <user>Diamond</user>
    <text>I’m going to be sad when I teach my son about the terminal. “Son, this thing’s been around since before I was born.”</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:06:36.364700</ts>
    <user>Diamond</user>
    <text>&lt;@Tammera&gt; I regifted an Echo Dot because it’s just too creepy for me.</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:07:08.365400</ts>
    <user>Tammera</user>
    <text>Yeah, yelling at my computer because my code is crap is one direction only</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:07:16.365600</ts>
    <user>Celestine</user>
    <text>&lt;@Tammera&gt; I must confess that I’m only very slowly getting used to talking to my phone… I still resort to thumb typing, even when just telling it stuff would be faster/easier!</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:08:25.366000</ts>
    <user>Celestine</user>
    <text>:wave::skin-tone-2: :night_with_stars: :sleeping:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:08:30.366200</ts>
    <user>Tammera</user>
    <text>Good night!</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:08:34.366400</ts>
    <user>Diamond</user>
    <text>:wave:</text>
  </message>
  <message conversation_id="273">
    <ts>2019-01-24T02:08:50.366900</ts>
    <user>Tammera</user>
    <text>while here in mainland Europe, its just starting to become light :’)</text>
  </message>
  <message conversation_id="275">
    <ts>2019-01-24T03:39:58.368100</ts>
    <user>Bree</user>
    <text>is there a way to permanently disable the namespace printing behavior? e.g. set `*print-namespace-maps*` to `false` for the whole process</text>
  </message>
  <message conversation_id="275">
    <ts>2019-01-24T03:40:38.368900</ts>
    <user>Bree</user>
    <text>specifically I'm trying to avoid this feature in kaocha test runs, and using `set!` just gives me `"Can't set! *print-namespace-maps* from non-binding thread"`</text>
  </message>
  <message conversation_id="275">
    <ts>2019-01-24T04:11:42.370100</ts>
    <user>Bree</user>
    <text>to answer my own question, I ended up creating my own `testing` macro that generates a call to `clojure.test/testing` that wraps the body in a `binding`. `alter-var-root` didn't seem to work either</text>
  </message>
  <message conversation_id="275">
    <ts>2019-01-24T07:28:31.371800</ts>
    <user>Doreatha</user>
    <text>&lt;@Bree&gt;  You could redefine `print-method` somewhere &lt;https://stackoverflow.com/a/53714036/3680995&gt;</text>
  </message>
  <message conversation_id="275">
    <ts>2019-01-24T07:29:46.372100</ts>
    <user>Bree</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="276">
    <ts>2019-01-24T10:35:41.374000</ts>
    <user>Meagan</user>
    <text>is anyone using cognitect’s aws-api library?</text>
  </message>
  <message conversation_id="276">
    <ts>2019-01-24T10:36:05.374700</ts>
    <user>Meagan</user>
    <text>I’m wondering how I’m supposed to clean up / maintain my AWS client after I have created it</text>
  </message>
  <message conversation_id="276">
    <ts>2019-01-24T10:38:27.375700</ts>
    <user>Meagan</user>
    <text>ex I found that just doing
```
(def s3 (aws/client {:api :s3}))
```
apparently creates some sort of long-lived connection that dies after awhile. so my service was working just fine after a deploy, but would eventually stop working :confused:</text>
  </message>
  <message conversation_id="276">
    <ts>2019-01-24T10:40:41.376700</ts>
    <user>Meagan</user>
    <text>I could just create a new client every invocation, but I’m now afraid of creating too many of these clients if they do in fact create a connection that hangs around</text>
  </message>
  <message conversation_id="276">
    <ts>2019-01-24T10:41:41.377300</ts>
    <user>Meagan</user>
    <text>there doesn’t seem to be any public way of stopping a client after use, either. There’s a `stop` function in the `cognitect.aws.client` namespace, but that’s documented as `"Impl, don't call directly."`</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:11:06.377500</ts>
    <user>Latonya</user>
    <text>Some unofficial places where these things are expanded on a bit: &lt;http://ClojureDocs.org|ClojureDocs.org&gt; has examples of things that can go wrong if you give non-set args to clojure.set functions, warning about  them in English</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:11:47.377700</ts>
    <user>Latonya</user>
    <text>This 3rd party library &lt;https://github.com/jafingerhut/funjible&gt; will throw exceptions if you pass non-set args to clojure.set functions, and has been designed as a fairly easy drop-in replacement for clojure.set functions.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:13:14.378000</ts>
    <user>Latonya</user>
    <text>&lt;@Clarine&gt; is working on specs for many Clojure functions, including those in clojure.set, over which there are quite a few fine points on what types they should be spec'd to accept: &lt;https://github.com/borkdude/speculative&gt;  as for example on this issue: &lt;https://github.com/borkdude/speculative/issues/161&gt;</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:13:52.378400</ts>
    <user>Latonya</user>
    <text>I realize that these do not touch on your questions about official doc strings.  There are Clojure JIRA issues about clojure.set functions that are open, and some closed.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:15:15.378600</ts>
    <user>Clarine</user>
    <text>There’s also an issue with a proposal to coerce to sets in set functions.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:16:20.378800</ts>
    <user>Latonya</user>
    <text>There are a few very vocal people working on things like this.  11 downloads over 7 years for funjible library, so how much do people really care?  On average, it seems not a lot.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:16:28.379000</ts>
    <user>Clarine</user>
    <text>For fun, here are some examples of 4clojure functions that rely on set functions doing the right thing with their input. I changed them to conform with the specs.
&lt;https://github.com/borkdude/coal-mine/commit/5c9a009dc326b0ab598a419777e71a04ab000ccd&gt;</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:17:58.379200</ts>
    <user>Latonya</user>
    <text>Those were solutions written by people using 4clojure to solve its problems, or code that was used to implement the 4clojure site?  I am guessing the former.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:18:18.379400</ts>
    <user>Clarine</user>
    <text>The former, yes. And they work for their problem input and output</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:18:33.379600</ts>
    <user>Clarine</user>
    <text>But we use this to verify the specs in speculative, so I’m fixing it to not see the same errors every time</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:47:50.381200</ts>
    <user>Diamond</user>
    <text>The small number of funjible downloads alone can’t be used to infer how much people care. For example, I care about the issue yet this is the first time I’ve heard about funjible.

Today is also the first time I’ve heard about speculative; I’m interested. :slightly_smiling_face:

&lt;@Latonya&gt; I noticed you’ve submitted a patch to add some `fdef`s for `clojure.set`. It looks like there’s some potential to get it merged. It would be great to see that happen.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:48:49.382000</ts>
    <user>Clarine</user>
    <text>Clojure set fdefs are already in speculative</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:49:00.382500</ts>
    <user>Clarine</user>
    <text>(Typing from mobile )</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:53:26.382700</ts>
    <user>Diamond</user>
    <text>&lt;@Clarine&gt; Yes, I noticed that. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T11:53:38.382900</ts>
    <user>Diamond</user>
    <text>(Not that you were typing from mobile.)</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:06:15.383500</ts>
    <user>Clarine</user>
    <text>oh, you did not mean a patch for speculative but clojure.core?</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:06:50.383700</ts>
    <user>Diamond</user>
    <text>&lt;@Clarine&gt; Yeah. Rereading my reply I can see the ambiguity.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:29:43.383900</ts>
    <user>Latonya</user>
    <text>I am sharing this info with you &lt;@Diamond&gt; since you seem to be one of the few who care :slightly_smiling_face:</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:30:06.384100</ts>
    <user>Clarine</user>
    <text>A cult within a cult</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:30:14.384300</ts>
    <user>Diamond</user>
    <text>It’s appreciated, for sure. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:31:03.384500</ts>
    <user>Latonya</user>
    <text>I could advertise the existence of funjible once per month, even if it doesn't change, but I think the Clojure Google group and/or announcements channel on Slack would quickly get tired of the repetition.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:31:43.384700</ts>
    <user>Latonya</user>
    <text>The existence of popular libraries with lots of common use cases are advertised by those other than their authors :slightly_smiling_face:</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:32:28.384900</ts>
    <user>Clarine</user>
    <text>it’s surprising how infrequently I’ve been bitten by the current behavior of clojure.set</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:32:59.385200</ts>
    <user>Clarine</user>
    <text>given the examples of what could go wrong</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:33:30.385400</ts>
    <user>Diamond</user>
    <text>Once you’re burned you don’t forget.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:34:57.385800</ts>
    <user>Diamond</user>
    <text>Like `merge`. A few weeks ago I helped debug a situation where `(merge-with merge ,,,)` caused a bug that took, let’s just say, a non-zero amount of time to get to the bottom of.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:35:23.386000</ts>
    <user>Clarine</user>
    <text>speculative chooses to only allow maps as args of merge.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:35:43.386200</ts>
    <user>Clarine</user>
    <text>don’t know if that issue had to do with that</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:38:17.386400</ts>
    <user>Diamond</user>
    <text>That aligns with my intuitions and I think others’ as well. I’ve never heard anyone say they wanted to use `merge` as a substitute for `conj`.</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:38:40.386600</ts>
    <user>Clarine</user>
    <text>that’s what I see a lot in the 4clojure solutions I test speculative with. merge -&amp;gt; conj</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:40:31.386800</ts>
    <user>Clarine</user>
    <text>it isn’t based on intuition though. first we had associative? but if you look closely at the implementation, a `{}` is substituted for a non-truthy first argument</text>
  </message>
  <message conversation_id="277">
    <ts>2019-01-24T12:43:50.387000</ts>
    <user>Diamond</user>
    <text>I realize it’s not based on intuition. What I meant was that people I’ve worked with intuitively expect `merge` to work with maps alone and that, one way or another, for an exception to occur in other circumstances.</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T12:48:44.387500</ts>
    <user>Marlyn</user>
    <text>&lt;@Meagan&gt; I couldn't reproduce that</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T12:48:52.387800</ts>
    <user>Marlyn</user>
    <text>what do you mean by "long-lived connection"?</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T12:49:00.388100</ts>
    <user>Marlyn</user>
    <text>do you see an open socket?</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T12:51:07.388200</ts>
    <user>Diamond</user>
    <text>Vectors are `associative?` :smile:</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:08:54.388400</ts>
    <user>Latonya</user>
    <text>I agree that many people would wish an exception to be thrown in situations where you call a function with arguments it is not designed to do something reasonable with, and I am sympathetic with such wishes.  That doesn't mean Clojure core implementation is going to change to align with those wishes.  The options we have, that I know about, anyway, are what I've mentioned above: alternate docs, spec, and things like funjible.  That and perhaps performance measurements of approaches like funjible takes, on serious code bases, that may (or may not) convince Clojure core folks that the costs of the extra checks are acceptable.</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:11:56.389100</ts>
    <user>Meagan</user>
    <text>I’m honestly not sure. all I know is that my Datomic Ions can’t connect to S3 after a few hours unless I redeploy</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:12:12.389500</ts>
    <user>Meagan</user>
    <text>it’s hard for me to tell what is actually happening. I got some advice in &lt;#C03RZMDSH|datomic&gt;</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:12:18.389700</ts>
    <user>Rosaline</user>
    <text>sounds like security credentials expiring</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:12:31.390000</ts>
    <user>Meagan</user>
    <text>:point_up: that makes more sense!</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:14:01.391600</ts>
    <user>Rosaline</user>
    <text>depending on how things are deployed and where you are getting credentials from aws, automatically rotates them after some time period (I think most libraries automatically roll over on to the new ones)</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:16:52.392000</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/cognitect-labs/aws-api/blob/master/src/cognitect/aws/credentials.clj#L53&gt; looks like aws-api has some kind of support for that too</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:20:04.392600</ts>
    <user>Matha</user>
    <text>Is there a shorter/nicer way to check if a map has no non-nil keys than `(empty? (into {} (filter x)))`?</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:24:23.394100</ts>
    <user>Clarine</user>
    <text>E.g. &lt;https://dev.clojure.org/jira/browse/CLJ-2433&gt;</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:25:18.394800</ts>
    <user>Becki</user>
    <text>`(every? (comp some? val) {:a :b :c nil})`</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:25:24.395100</ts>
    <user>Dann</user>
    <text>`(empty? (filter some? (vals x))` for non-nil values</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:25:58.395400</ts>
    <user>Matha</user>
    <text>ty!</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:26:21.396400</ts>
    <user>Nadia</user>
    <text>hmm</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:28:59.397800</ts>
    <user>Nadia</user>
    <text>“has no non-nil keys” — so check that every value is nil? `(every? nil? (vals my-map))`</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:29:45.398200</ts>
    <user>Clarine</user>
    <text>if you want to check the keys, you need `keys` :wink:</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:30:09.398800</ts>
    <user>Dann</user>
    <text>for that you just need `(not= [nil] (keys m))`</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:30:18.399000</ts>
    <user>Nadia</user>
    <text>heh yeah</text>
  </message>
  <message conversation_id="278">
    <ts>2019-01-24T13:37:14.399500</ts>
    <user>Matha</user>
    <text>&lt;@Nadia&gt; ah yes that’s what I meant; `(every? nil? (vals my-map))` is neat !</text>
  </message>
  <message conversation_id="279">
    <ts>2019-01-24T13:46:41.399700</ts>
    <user>Ciara</user>
    <text>added an integration to this channel: &lt;https://clojurians.slack.com/services/BEUS0MAUS|outgoing-webhook&gt;</text>
  </message>
  <message conversation_id="280">
    <ts>2019-01-24T14:40:22.401800</ts>
    <user>Sharee</user>
    <text>Anybody using the Cognitect AWS library with CloudSearch (the cloudsearchdomain service specifically)? You have to supply an endpoint somewhere, but I can’t figure out how. In the JS library, it is part of the constructor - &lt;https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/CloudSearchDomain.html#constructor-property&gt;. So I would expect it to be sent in the `aws/client` call.</text>
  </message>
  <message conversation_id="280">
    <ts>2019-01-24T14:44:23.403500</ts>
    <user>Marlyn</user>
    <text>We have a plan for tackling custom endpoints &lt;@Sharee&gt; . I don't believe it's possible right now.</text>
  </message>
  <message conversation_id="280">
    <ts>2019-01-24T14:46:23.404100</ts>
    <user>Sharee</user>
    <text>Thanks. I’ll go back to the old way and keep my eye out for updates.</text>
  </message>
  <message conversation_id="279">
    <ts>2019-01-24T15:09:24.404200</ts>
    <user>Ciara</user>
    <text>disabled an integration in this channel: &lt;https://clojurians.slack.com/services/BEUS0MAUS|outgoing-webhook&gt;</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:33:59.405800</ts>
    <user>Tammera</user>
    <text>There is no such thing as strengthening your  specs, right. Lets say that I have a map with `::some-ns/a` `::some-ns/b` and `::some-ns/c` keys that _all_ functions promise to be `int?`, but _some_ promise to be `pos-int?`</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:37:09.406200</ts>
    <user>Tammera</user>
    <text>(obvious simplified example)</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:38:32.406800</ts>
    <user>Tammera</user>
    <text>I basically want to say something like, this function adheres to the weak contract (`int?`), but as an added bonus, also to this stronger one (`pos-int?`) ^^</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:40:16.407300</ts>
    <user>Fredda</user>
    <text>doesn't `int?` give you the added bonus of `pos-int?`?</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:43:21.409400</ts>
    <user>Tammera</user>
    <text>sorry? I don’t quite understand, `-5` is `int?` but not `pos-int?`. So I would spec something like this right: `(s/def ::some-ns/a int?)` with `(s/def ::some-ns/my-map (s/keys [::some-ns/a]))`. Now I appear to have no way to write a spec for the stronger guarantee for the _same namespaced key_.</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:43:56.409600</ts>
    <user>Rosaline</user>
    <text>you shouldn't do that</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:44:17.410300</ts>
    <user>Rosaline</user>
    <text>it sounds like you want to add context</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:44:20.410500</ts>
    <user>Tammera</user>
    <text>why tho, I am promising you strictly more, I am still adhering to the weaker contract</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:44:44.411000</ts>
    <user>Rosaline</user>
    <text>say "oh, in this context this key is X, and this context the key is Y"</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:45:13.411600</ts>
    <user>Rosaline</user>
    <text>spec removes context, it is all global</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:45:31.412000</ts>
    <user>Rosaline</user>
    <text>the point of spec is to be able to say "for all maps, with this key, the key means X"</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:45:43.412500</ts>
    <user>Rosaline</user>
    <text>so if you want it to mean Y, add a new key to your map and spec it to be Y</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:46:31.413700</ts>
    <user>Rosaline</user>
    <text>if you want to say "this key is X and Y" s/and</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:46:48.414100</ts>
    <user>Tammera</user>
    <text>yeah, but Y implies X in this case. Every `pos-int?` is also an `int?`.</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:47:13.414700</ts>
    <user>Rosaline</user>
    <text>then just say "this key is X"</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:47:41.415400</ts>
    <user>Fredda</user>
    <text>said another way, you want to merge two specs and be allowed to choose the weaker or stronger one?</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:47:58.415900</ts>
    <user>Rosaline</user>
    <text>the issue isn't actually anything to do about "stronger" whatever</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:48:12.416500</ts>
    <user>Rosaline</user>
    <text>the issue is you are trying to define the same key to different meanings in different contexts</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:48:24.417000</ts>
    <user>Jasmine</user>
    <text>you can s/and in stronger criteria in some contexts</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:48:32.417400</ts>
    <user>Rosaline</user>
    <text>in one context you want it to mean int? but in another context you want pos-int?</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:48:40.417700</ts>
    <user>Jasmine</user>
    <text>but it’s admittedly pretty annoying to do so under s/keys</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:48:42.417800</ts>
    <user>Tammera</user>
    <text>its for function contracts</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:49:02.418600</ts>
    <user>Tammera</user>
    <text>I have some functions that have stronger guarantees than strictly required by the “global” map spec, so to say</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:49:04.418700</ts>
    <user>Jasmine</user>
    <text>you could make a loose contract and a strict contract and combine with s/merge (then it has to satisfy both)</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:49:26.419300</ts>
    <user>Jasmine</user>
    <text>but to some degree this is the kind of thing the select stuff will add in spec 2</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:49:31.419600</ts>
    <user>Rosaline</user>
    <text>you can't do that for the same key though</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:49:33.419700</ts>
    <user>Jasmine</user>
    <text>that Rich talked about in his keynote</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:49:42.420100</ts>
    <user>Tammera</user>
    <text>yeah I watched it, was a bit afraid of that</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:49:54.420300</ts>
    <user>Tammera</user>
    <text>or --- not :’). Because you guys are obviously thinking about it ^^</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:52:13.420900</ts>
    <user>Rosaline</user>
    <text>you can always and on arbitrary predicates that are not s/keys based, that can do whatever</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:52:44.421600</ts>
    <user>Fredda</user>
    <text>that's true</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:52:51.421800</ts>
    <user>Rosaline</user>
    <text>(s/and (s/keys ...) #(pos-int? (get % :foo)))</text>
  </message>
  <message conversation_id="281">
    <ts>2019-01-24T16:53:08.422200</ts>
    <user>Tammera</user>
    <text>yeah, I ended up doing that, but I wondered whether there was a better way</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:35:33.426000</ts>
    <user>Isa</user>
    <text>Can you recommend articles to read about security in the context of integration to third party systems? The best related with Clojure solutions. I mean there is a SaaS, which needs to fetch data from many other systems (auth for this systems is mostly e-mail + password by API and there is no read only). The question is how to secure this things from hacking. I would like to read about good articles about solutions to secure third party systems authentication data.</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:44:25.426500</ts>
    <user>Lenore</user>
    <text>&lt;https://github.com/funcool/buddy&gt;   &lt;https://www.owasp.org/index.php/Authentication_Cheat_Sheet&gt;</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:49:18.426900</ts>
    <user>Isa</user>
    <text>I think the main issue is about store this data in DB</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:51:19.428600</ts>
    <user>Lenore</user>
    <text>so database security best practices? and consider disk encryption (encrypted vols on aws, bare metal SED SSDs, ..)</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:51:25.428800</ts>
    <user>Isa</user>
    <text>Hmm is there any way to outsource this responsibility? Integration with google password storage or similar magic? :wink:</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:51:32.429000</ts>
    <user>Lenore</user>
    <text>auth0?</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:52:03.429700</ts>
    <user>Isa</user>
    <text>only if third party system has it, but we are talking about systems, which have e-mail + password to auth</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:52:05.429800</ts>
    <user>Rosaline</user>
    <text>sounds kind of like &lt;https://github.com/hashicorp/vault&gt;</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:53:29.430800</ts>
    <user>Isa</user>
    <text>hmm I was using vault for DevOps. Does it work without any issue for storing third party auth in Saas for users?</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:54:08.431500</ts>
    <user>Rosaline</user>
    <text>no idea, I've never used it, it just sounds kind of like what you are describing, a store designed for storing secrets</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:54:34.431900</ts>
    <user>Isa</user>
    <text>yes, it can be on of choice maybe</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:56:04.432300</ts>
    <user>Isa</user>
    <text>&lt;https://cloud.google.com/kms/&gt; alternative from google</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:57:08.433400</ts>
    <user>Isa</user>
    <text>thanks, Clojure community always make me more creative :slightly_smiling_face: People who think by `(` `)` :wink:</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T17:59:50.433800</ts>
    <user>Lenore</user>
    <text>is that their cloud HSM?</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T18:01:19.434400</ts>
    <user>Isa</user>
    <text>&lt;https://cloud.google.com/hsm/&gt; I see google has something like that, but I am not familiar with that technology. It is also interesting.</text>
  </message>
  <message conversation_id="282">
    <ts>2019-01-24T18:05:21.435200</ts>
    <user>Isa</user>
    <text>Thanks. I am going to sleep. Good night :slightly_smiling_face:</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:50:50.436300</ts>
    <user>Madeleine</user>
    <text>QUESTION: How do you compile only gen-classes ? Like I don't even want to compile the namespace which has the :gen-class in it, but I only want the Java .classes defined by gen-class to be compiled? Using pure Clojure, not with lein.</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:51:24.436800</ts>
    <user>Rosaline</user>
    <text>you can't</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:51:58.437300</ts>
    <user>Madeleine</user>
    <text>I see, so gen-class are kinda infectious then</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:52:09.437800</ts>
    <user>Madeleine</user>
    <text>You quickly devolve into basically full AOT</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:52:14.438100</ts>
    <user>Madeleine</user>
    <text>since compile is transitive</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:52:21.438300</ts>
    <user>Rosaline</user>
    <text>there are things you can do</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:52:56.439100</ts>
    <user>Rosaline</user>
    <text>have your namespace with the gen-class require other code at runtime instead of when it is loaded</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:53:30.439500</ts>
    <user>Madeleine</user>
    <text>Hum</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:53:44.439800</ts>
    <user>Madeleine</user>
    <text>Like by putting a call to `require` inside a function?</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:53:49.440100</ts>
    <user>Rosaline</user>
    <text>yes</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:53:52.440300</ts>
    <user>Madeleine</user>
    <text>instead of using ns ?</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:54:05.440700</ts>
    <user>Rosaline</user>
    <text>then you will have to manually resolve any vars you want to use</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:54:30.441200</ts>
    <user>Rosaline</user>
    <text>I mean, you still use ns, you just leave out calls to require</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:55:03.441400</ts>
    <user>Madeleine</user>
    <text>Right</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:55:14.441600</ts>
    <user>Madeleine</user>
    <text>Ya, that's a bit annoying</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:55:28.441900</ts>
    <user>Madeleine</user>
    <text>But thanks for the answer</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:56:26.442400</ts>
    <user>Dann</user>
    <text>example of a java app that uses ~this~ a related approach (written so I could use the jsvc app launcher without using gen-class) &lt;https://github.com/noisesmith/clj-jsvc-adapter/blob/master/src/java/org/noisesmith/Cljsvc.java&gt;</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:57:48.443100</ts>
    <user>Madeleine</user>
    <text>That seems different, you're just avoiding gen-class altogether here, and creating your own Java wrapper no?</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:58:18.443800</ts>
    <user>Dann</user>
    <text>right, but it's doing the same thing: require at runtime, then calling functions that should be made available by the required code</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T19:58:52.444500</ts>
    <user>Dann</user>
    <text>you can do the same thing from an ns that uses gen-class (I started out with that, but with that level of java interop writing a java file was cleaner)</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T20:01:00.445600</ts>
    <user>Madeleine</user>
    <text>It seems more complicated from Clojure, because then you need to have a flag which on compile does not cause things to be required, but does so otherwise</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T20:01:19.446000</ts>
    <user>Madeleine</user>
    <text>Where as in Java it is done from static initialization when the class is used</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T20:01:48.446300</ts>
    <user>Madeleine</user>
    <text>Though I guess the gen-class init could do it</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T20:02:01.446600</ts>
    <user>Madeleine</user>
    <text>And then it would be similar to what you're doing I guess</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T20:03:36.447800</ts>
    <user>Rosaline</user>
    <text>the thing is, clojure is live, so compiling the code has the same effects as loading it (because compiling subsequent code made depend on those effects)</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T20:04:38.448900</ts>
    <user>Rosaline</user>
    <text>another thing you can do is just generate the bytecode for the class you want without dealing with the clojure compiler at all</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T20:08:58.450000</ts>
    <user>Dann</user>
    <text>&lt;@Madeleine&gt; the clojure version of that code looked like:
```(ns foo.bar)

(defn -main [&amp;amp; args]
 (require 'baz.quux)
 ((resolve 'baz.quux/-main) args))```</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T20:09:41.450800</ts>
    <user>Dann</user>
    <text>you can add gen-class to that, and it won't load baz.quux while compiling, this is directly analogous to what the java code is doing (just much less idiomatic)</text>
  </message>
  <message conversation_id="283">
    <ts>2019-01-24T21:47:06.451600</ts>
    <user>Madeleine</user>
    <text>Still could be problematic, if that namespace is also used from Clojure though</text>
  </message>
  <message conversation_id="284">
    <ts>2019-01-24T21:50:19.453900</ts>
    <user>Madeleine</user>
    <text>Which is why I was thinking something more like:

```
(ns foo.bar)

(when-not *hypothetical-compiling-flag*
  (require '[baz.quux]))
```</text>
  </message>
  <message conversation_id="284">
    <ts>2019-01-25T00:05:57.454800</ts>
    <user>Becki</user>
    <text>wow i've never seen `with-precision` before from core</text>
  </message>
  <message conversation_id="284">
    <ts>2019-01-25T03:51:47.455500</ts>
    <user>Clarine</user>
    <text>what’s a good name or an option for a map transformation that’s not recursive? `no-recurse?` We already had a version that did recursion by default.</text>
  </message>
  <message conversation_id="285">
    <ts>2019-01-25T03:58:32.455600</ts>
    <user>Chanelle</user>
    <text>what about `linear`?</text>
  </message>
  <message conversation_id="286">
    <ts>2019-01-25T04:13:48.456300</ts>
    <user>Renetta</user>
    <text>Hi guys, is there any way to format code in .clj files with pprint?</text>
  </message>
  <message conversation_id="287">
    <ts>2019-01-25T04:54:24.456700</ts>
    <user>Peter</user>
    <text>i would stick with `recurse?` without the `no-` because it's not necessary</text>
  </message>
  <message conversation_id="287">
    <ts>2019-01-25T04:54:31.456900</ts>
    <user>Peter</user>
    <text>other than that, it seems like an appropriate name</text>
  </message>
  <message conversation_id="287">
    <ts>2019-01-25T04:55:13.457100</ts>
    <user>Clarine</user>
    <text>well, we have a convention that options should take nil or false as the default, so I have to invent a name for non-recursive. I’ll probably go with that</text>
  </message>
  <message conversation_id="287">
    <ts>2019-01-25T04:55:36.457300</ts>
    <user>Peter</user>
    <text>in that case, just stick with `no-recurse?`</text>
  </message>
  <message conversation_id="287">
    <ts>2019-01-25T04:55:38.457500</ts>
    <user>Clarine</user>
    <text>leaving out the option is the same as passing the option with false or nil</text>
  </message>
  <message conversation_id="287">
    <ts>2019-01-25T04:55:43.457700</ts>
    <user>Clarine</user>
    <text>yeah</text>
  </message>
  <message conversation_id="288">
    <ts>2019-01-25T05:48:19.458700</ts>
    <user>Raina</user>
    <text>Is there a string length function I can use both in clj and cljs? I can use count, but count is slow and generates ton of garbage</text>
  </message>
  <message conversation_id="287">
    <ts>2019-01-25T05:52:30.459400</ts>
    <user>Clarine</user>
    <text>&lt;@Raina&gt; this seems to work:
```
(defn str-length [s] #?(:clj (.length ^String s) :cljs (.-length s)))
```</text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T06:02:06.459800</ts>
    <user>Raina</user>
    <text>well obviously I can write my own :smile:</text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T06:02:26.460200</ts>
    <user>Raina</user>
    <text>I was hoping for an official solution and I'm shocked that clojure.string namespace doesn't have one</text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T06:02:42.460700</ts>
    <user>Raina</user>
    <text>hell even substring exists in clojure.core</text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T07:09:15.461100</ts>
    <user>Otelia</user>
    <text>`count` works for both &lt;@Raina&gt;</text>
  </message>
  <message conversation_id="290">
    <ts>2019-01-25T07:10:20.461400</ts>
    <user>Retha</user>
    <text>Why do you think that `count` is slow? And what garbage?</text>
  </message>
  <message conversation_id="291">
    <ts>2019-01-25T07:12:27.463500</ts>
    <user>Twanda</user>
    <text>Hi everyone, I'd like to get compiler warnings when a variable masks another one

So, for example in this case:
```
(let [[name] ["yay"]]
  name)
```
=&amp;gt; warning: name already refers to clojure.core/name

anyone know if there is a way to turn that on, or if there is an open issue for this? If there is I haven't found via googling. thanks</text>
  </message>
  <message conversation_id="291">
    <ts>2019-01-25T07:22:57.465900</ts>
    <user>Clarine</user>
    <text>not that I know. joker (a linter) also doesn’t warn about this, but I think it could be a useful feature for it</text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T07:23:47.466700</ts>
    <user>Raina</user>
    <text>&lt;@Otelia&gt; As explained, count isn't appropriate because it's slow and generates garbage</text>
  </message>
  <message conversation_id="291">
    <ts>2019-01-25T07:25:44.467500</ts>
    <user>Twanda</user>
    <text>&lt;@Clarine&gt; thanks, linters are probably the place to start investigating if it's not in the compiler</text>
  </message>
  <message conversation_id="292">
    <ts>2019-01-25T07:49:35.467900</ts>
    <user>Sixta</user>
    <text>I actually quite like being able to shadow </text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T07:52:58.468000</ts>
    <user>Otelia</user>
    <text>&lt;@Raina&gt;, you may be thinking of the implementation of count for sequences.</text>
  </message>
  <message conversation_id="291">
    <ts>2019-01-25T07:53:54.468300</ts>
    <user>Clarine</user>
    <text>that’s why linters have config :slightly_smiling_face:</text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T07:55:35.469600</ts>
    <user>Otelia</user>
    <text>What would be useful to me is an option to only warn about shadowing clojure.core symbols, as in the example.</text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T07:57:18.469800</ts>
    <user>Raina</user>
    <text>I've improved performance a lot in some of my libraries by replacing count with explicit .length calls</text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T07:59:12.470000</ts>
    <user>Raina</user>
    <text>Looking at the newest 1.10 code of count, directly invoking .length saves about 4 if sentences</text>
  </message>
  <message conversation_id="289">
    <ts>2019-01-25T07:59:40.470300</ts>
    <user>Retha</user>
    <text>I’d say that this only makes sense when you have a real bottle neck.</text>
  </message>
  <message conversation_id="293">
    <ts>2019-01-25T08:18:48.470900</ts>
    <user>Henry</user>
    <text>This linter warns about (some cases of) shadowing: &lt;https://github.com/jonase/eastwood&gt;</text>
  </message>
  <message conversation_id="294">
    <ts>2019-01-25T08:52:15.472500</ts>
    <user>Silvia</user>
    <text>Hi. I have an error with my simple module: &lt;https://pastebin.com/bBy8htnT&gt;  error: Exception in thread "async-dispatch-88" java.lang.NullPointerException  can anyone tell me why? I've spend on this some time and I really don't know why.</text>
  </message>
  <message conversation_id="293">
    <ts>2019-01-25T09:39:56.473900</ts>
    <user>Henry</user>
    <text>You should check the full stack trace using `(clojure.repl/pst)`, but I can see a couple things wrong with that code. When you're using blocking `&amp;lt;!!` you shouldn't wrap those in go blocks. Also by putting the "store" in a global def you're defeating the purpose of mount/defstate.</text>
  </message>
  <message conversation_id="295">
    <ts>2019-01-25T10:57:46.474900</ts>
    <user>Jessia</user>
    <text>Am I right in thinking libraries shouldn't include `org.clojure/clojure` as a dependency? Since it's just going to be provided by the application anyway?</text>
  </message>
  <message conversation_id="295">
    <ts>2019-01-25T10:58:44.475300</ts>
    <user>Clarine</user>
    <text>a lot of libraries do it, it can be overriden by the consuming project</text>
  </message>
  <message conversation_id="295">
    <ts>2019-01-25T10:59:18.475600</ts>
    <user>Clarine</user>
    <text>unless you’re making a cljs only lib or a Java-facing AOT-compiled lib, it doesn’t matter I guess</text>
  </message>
  <message conversation_id="295">
    <ts>2019-01-25T11:00:29.476300</ts>
    <user>Clarine</user>
    <text>or maybe it does when your lib forces a newer version of clojure than the lib consumer wants to user? hmm. not sure how that is resolved</text>
  </message>
  <message conversation_id="295">
    <ts>2019-01-25T11:01:56.476900</ts>
    <user>Jessia</user>
    <text>Thanks &lt;@Clarine&gt;</text>
  </message>
  <message conversation_id="296">
    <ts>2019-01-25T11:54:49.478700</ts>
    <user>Hilary</user>
    <text>I've also wondered how this works when multiple dependencies declare dependencies on diff versions of Clojure</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:26:54.481900</ts>
    <user>Antione</user>
    <text>In the past, I've usually set the default uncaught exception handler at the top of a -main entrypoint for an application. I am ring uberjar'ing. Will setting the default uncaught exception handler at the top of, say, `server.clj` (the location of the ring handler) accomplish same?</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:27:37.482500</ts>
    <user>Antione</user>
    <text>```
(ns server)
(Thread/setDefaultUncaughtExceptionHandler
 (reify Thread$UncaughtExceptionHandler
   (uncaughtException [_ thread e]
     (log/error e "Uncaught exception on" (.getName thread)))))
(def handler ...)
```</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:35:53.483100</ts>
    <user>Dann</user>
    <text>it's a mutable slot on an object, you can set it in any place at any time</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:36:23.483500</ts>
    <user>Dann</user>
    <text>top level side effects are run when the ns is loaded (even when using aot)</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:37:37.484500</ts>
    <user>Melissia</user>
    <text>Can I define a mutation over an ident, instead of declaring all the way walking through the tree?</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:40:54.484800</ts>
    <user>Dann</user>
    <text>by ident do you mean symbol or keyword? that's what `clojure.core/ident?` checks for, but if that's what you mean your question confuses me</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:42:16.485300</ts>
    <user>Dann</user>
    <text>do you mean a nested update as in `update-in` or `assoc-in` as opposed to a programmatic operation like `clojure.walk/post-walk` ?</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:51:26.487900</ts>
    <user>Melissia</user>
    <text>I mean, if I have a normalized table :people/people-list   and inside it    :person/by-id
Can I use a mutation directly for [:person/by-id 1] or do I have to go into [:people/people-list :my-list :person/by-id 1]</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:53:31.489200</ts>
    <user>Meagan</user>
    <text>&lt;@Melissia&gt; your use of the word “mutation” is confusing. If you are asking how to use `update-in` / `assoc-in` with a map, then yes you’ll have to put the full path</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:53:57.489800</ts>
    <user>Meagan</user>
    <text>you could come up with your own function that uses clojure.walk to do what you mean, though. Again, assuming you’re using a map</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:55:14.490400</ts>
    <user>Melissia</user>
    <text>Oh, I messed up, I thought I was in the fulcro's slack. I'm sorry</text>
  </message>
  <message conversation_id="298">
    <ts>2019-01-25T12:55:27.490600</ts>
    <user>Meagan</user>
    <text>:smile:</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:55:42.491000</ts>
    <user>Melissia</user>
    <text>Thanks &lt;@Dann&gt; and &lt;@Meagan&gt; anyway</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T12:57:38.491800</ts>
    <user>Somer</user>
    <text>In 1.10, is there a way to extend a map to be `Closeable` via metadata?</text>
  </message>
  <message conversation_id="298">
    <ts>2019-01-25T12:59:23.492500</ts>
    <user>Meagan</user>
    <text>is that `java.io.Closeable`? I think that’s an interface, not a protocol</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:00:09.493300</ts>
    <user>Somer</user>
    <text>Yes. And I suppose a better question would've been: can you extend via metadata with an interface.</text>
  </message>
  <message conversation_id="298">
    <ts>2019-01-25T13:00:20.493500</ts>
    <user>Somer</user>
    <text>Sounds like no :slightly_smiling_face:</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:01:19.494300</ts>
    <user>Dann</user>
    <text>metadata is a clojure thing - you can check metadata via java by using the clojure IMeta api (or using the Clojure api to call clojure.core/meta) but this isn't something you should expect normal java code to be doing, ever</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:01:33.494800</ts>
    <user>Dann</user>
    <text>and it's definitely not something that exists on the level of the Closable interface</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:01:48.495200</ts>
    <user>Dann</user>
    <text>you can use `defrecord` to make a hash-map that is also Closable</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:02:13.495800</ts>
    <user>Somer</user>
    <text>I ended up doing that.</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:02:27.496300</ts>
    <user>Meagan</user>
    <text>I think there was a proposal to implement Closeable as a protocol</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:02:44.496700</ts>
    <user>Somer</user>
    <text>That would be convenient. It's nice to be able to `with-open` things.</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:02:51.496900</ts>
    <user>Meagan</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-308&gt;</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:05:23.497900</ts>
    <user>Dann</user>
    <text>that's a change to with-open so it can use things that aren't directly java.io.Closable, it doesn't change or extend Closable itself</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:06:29.498700</ts>
    <user>Dann</user>
    <text>what's the motivation for not using java.io.Closable - wanting to extend some class from outside the implementation?</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:14:00.499300</ts>
    <user>Somer</user>
    <text>I have an API that returns a map and I wanted to use `with-open` in my tests to ensure that parts in that map are closed when the test finishes.</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:17:04.500900</ts>
    <user>Dann</user>
    <text>but then you'd be extending closable to map?</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:17:18.501200</ts>
    <user>Meagan</user>
    <text>I think that’s why he wanted to do it via metadata</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:17:45.501800</ts>
    <user>Dann</user>
    <text>you can implement protocols just via metadata?</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:17:59.502200</ts>
    <user>Somer</user>
    <text>Right. Wrapping in a record is fine. Just seemed cleaner if it was possible to do it via metadata.</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:18:11.502500</ts>
    <user>Dann</user>
    <text>ahh, a new 1.10 feature</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:18:23.502800</ts>
    <user>Meagan</user>
    <text>yep! it’s super cool</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:18:39.503400</ts>
    <user>Elaine</user>
    <text>Why we can't vote closed issues?
&lt;https://dev.clojure.org/jira/browse/CLJ-1623&gt;</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:18:41.503600</ts>
    <user>Dann</user>
    <text>so you could make a new IClosable and a new with-open</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:18:59.504200</ts>
    <user>Dann</user>
    <text>or you could pass the relevant vals to the current with-open (it allows N closables)</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:20:05.505200</ts>
    <user>Somer</user>
    <text>I suppose. This works for now - not critical. Was just trying to use a new 1.10 feature really :slightly_smiling_face:</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:20:27.505600</ts>
    <user>Dann</user>
    <text>yeah, extending via metadata is opt-in on a per-protocol basis, interesting</text>
  </message>
  <message conversation_id="297">
    <ts>2019-01-25T13:25:02.505800</ts>
    <user>Meagan</user>
    <text>I think that was for performance reasons</text>
  </message>
  <message conversation_id="299">
    <ts>2019-01-25T13:42:30.506100</ts>
    <user>Latonya</user>
    <text>Probably part of the way JIRA works, either by default, or perhaps by custom configuration of this instance, but I don't know which.</text>
  </message>
  <message conversation_id="299">
    <ts>2019-01-25T13:43:03.506300</ts>
    <user>Latonya</user>
    <text>Given the conversation on that issue, I would not hold high hopes that it would be implemented in core even if it got a thousand votes.</text>
  </message>
  <message conversation_id="299">
    <ts>2019-01-25T13:43:37.506500</ts>
    <user>Latonya</user>
    <text>Votes get attention to an issue sooner, they don't necessarily change the decision made once it has been considered.</text>
  </message>
  <message conversation_id="299">
    <ts>2019-01-25T13:46:46.506700</ts>
    <user>Latonya</user>
    <text>My suggestion would be making your own variant of the function that works as you wish, and use that.  Given the interest in it by some others, I wouldn't be surprised if Specter can do it, or medley, or one of handful of other utility libraries.</text>
  </message>
  <message conversation_id="300">
    <ts>2019-01-25T13:58:28.506900</ts>
    <user>Elaine</user>
    <text>I published a patch on Twitter then everyone can fix your codebase. :sweat_smile: </text>
  </message>
  <message conversation_id="299">
    <ts>2019-01-25T16:06:49.507400</ts>
    <user>Latonya</user>
    <text>Anyone can patch their own copies of Clojure all they wish, of course.  Not nearly as convenient as having it in a place where it can be used without a patch.</text>
  </message>
  <message conversation_id="300">
    <ts>2019-01-25T17:50:48.508300</ts>
    <user>Brain</user>
    <text>&lt;@Elaine&gt; Just refer your update-in and exclude clojure's version. The current behaviour has been useful to me tracking down bugs that would otherwise subtlely succeed but mysteriously trash everything :) (consider, returning a dynamically generated path vs or nil for the second argument)</text>
  </message>
  <message conversation_id="300">
    <ts>2019-01-25T17:53:03.508500</ts>
    <user>Brain</user>
    <text>Your semantics are equally valid of course, but clojure is extremely amenable to hacking, and guardrails are nice in general imo. Particularly in a dynamic language like a lisp.</text>
  </message>
  <message conversation_id="301">
    <ts>2019-01-25T17:58:35.509000</ts>
    <user>Madeleine</user>
    <text>I think you can still comment though?</text>
  </message>
  <message conversation_id="301">
    <ts>2019-01-25T18:16:05.509400</ts>
    <user>Otelia</user>
    <text>This is perhaps a different issue, but `get-in` does seem inconsistent and I wonder if the fact that it returns the entire map when [] is passed is intentional or it just happens to do that. There is no way to tell from the doc, since it just says "ks is a sequence of keys" and doesn't say whether it can be an empty sequence.</text>
  </message>
  <message conversation_id="301">
    <ts>2019-01-25T18:17:37.509700</ts>
    <user>Otelia</user>
    <text>Oops, I meant `get-in` not `get`, fixed.</text>
  </message>
  <message conversation_id="301">
    <ts>2019-01-25T18:21:22.509900</ts>
    <user>Otelia</user>
    <text>My guess is that the behavior with an empty sequence is accidental and the doc should probably say "ks is a non-empty sequence of keys".</text>
  </message>
  <message conversation_id="300">
    <ts>2019-01-25T18:46:55.510300</ts>
    <user>Brain</user>
    <text>'Fixing' that asymmetry might break a lot of existing code. :grinning:</text>
  </message>
  <message conversation_id="300">
    <ts>2019-01-25T18:48:45.510600</ts>
    <user>Brain</user>
    <text>That's not to say clojure 2 might not fix this sort of thing, but pretty much everything in 1.x is backwards compatible for practical reasons.</text>
  </message>
  <message conversation_id="300">
    <ts>2019-01-25T18:50:21.510800</ts>
    <user>Brain</user>
    <text>The docstring change would be really helpful though. </text>
  </message>
  <message conversation_id="300">
    <ts>2019-01-25T18:53:12.511100</ts>
    <user>Brain</user>
    <text>&lt;https://www.conj.io/store/v1/org.clojure/clojure/1.9.0/clj/clojure.core/update-in&gt; grimoire reports the correct signature though. Not a computer atm, but wonder if that is how it is defn'd</text>
  </message>
  <message conversation_id="302">
    <ts>2019-01-25T23:23:52.512300</ts>
    <user>Antione</user>
    <text>&lt;@Dann&gt; thanks for your answer earlier.</text>
  </message>
  <message conversation_id="303">
    <ts>2019-01-26T04:52:28.512700</ts>
    <user>Bridget</user>
    <text>I'm building a Clojure wrapper for a Java library and I'm wondering how I should add a dependency on that library from my wrapper. The thing is the Java library depends on a Java Agent JAR of the same version to provide the implementation through instrumentation. The library's public api is likely to stay the same, so my wrapper should work with any version of the library, but a specific library version can work with only specific version of the java agent.

What are the possible approaches here? Adding direct dependency to the Java library from my wrapper would work as long as the user goes with the same Java Agent version, but would likely break in the future when new agent versions are released. Of course, then users could exclude the library dependency and provide their own. Or I could release a new version of the wrapper for every library/agent version, but this might prove to be too much maintenance work.

Currently I'm thinking of going with adding the library dependency as 'provided', i.e. when including a dependency to my wrapper, users would also need to download the Java Agent (anyway required) and then add another dependency to the library. Any other ideas - preferably ones that don't require a ton of maintenance?</text>
  </message>
  <message conversation_id="303">
    <ts>2019-01-26T05:07:10.513200</ts>
    <user>Celestine</user>
    <text>&lt;@Bridget&gt; Sounds like New Relic?</text>
  </message>
  <message conversation_id="303">
    <ts>2019-01-26T05:08:10.514200</ts>
    <user>Celestine</user>
    <text>We have a wrapper for that internally, and we assume the caller provides both the library and the agent and keeps them in sync. I think that's really the only sane approach here.</text>
  </message>
  <message conversation_id="303">
    <ts>2019-01-26T05:28:10.514900</ts>
    <user>Bridget</user>
    <text>It's actually Elastic APM. Yeah, I guess it's the sanest approach to have the user provide both.</text>
  </message>
  <message conversation_id="303">
    <ts>2019-01-26T05:29:25.516200</ts>
    <user>Bridget</user>
    <text>Btw,  have you noticed this New Relic Clojure wrapper: &lt;https://github.com/Yleisradio/new-reliquary&gt;</text>
  </message>
  <message conversation_id="304">
    <ts>2019-01-26T05:39:50.518300</ts>
    <user>Luci</user>
    <text>Can someone help me find the docs for sorted maps please?

The docs at &lt;https://clojure.org/reference/data_structures&gt; mention them, and say that they “are, well, sorted”. 

I want to know how they are sorted - by key, value, insertion order, etc. 

</text>
  </message>
  <message conversation_id="303">
    <ts>2019-01-26T05:48:23.518800</ts>
    <user>Bridget</user>
    <text>Afaik you can supply your own comparator. See &lt;https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/sorted-map&gt; and &lt;https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/sorted-map-by&gt;</text>
  </message>
  <message conversation_id="303">
    <ts>2019-01-26T05:49:49.519100</ts>
    <user>Bridget</user>
    <text>&lt;https://clojuredocs.org/clojure.core/sorted-map-by&gt;</text>
  </message>
  <message conversation_id="304">
    <ts>2019-01-26T05:54:16.521200</ts>
    <user>Luci</user>
    <text>I think the flatland ordered meal does what I need (I want to maintain insertion order). But my question is about the docs - I don’t see any mention of how a map is sorted if no comparator is supplied. </text>
  </message>
  <message conversation_id="304">
    <ts>2019-01-26T05:54:53.521600</ts>
    <user>Luci</user>
    <text>Nor mention of what the comparator should return. Or what args are passed to the comparator. </text>
  </message>
  <message conversation_id="304">
    <ts>2019-01-26T06:07:35.523600</ts>
    <user>Bridget</user>
    <text>I think it's ascending order by key by default. The args are `a` and `b` - i.e. the objects to compare.</text>
  </message>
  <message conversation_id="304">
    <ts>2019-01-26T06:08:08.524700</ts>
    <user>Elaine</user>
    <text>&lt;@Luci&gt; comparator is a java concept. It returns -1, 0 or 1.
To keep insertion order, you should use a specific lib called "orders"</text>
  </message>
  <message conversation_id="304">
    <ts>2019-01-26T06:08:43.525500</ts>
    <user>Elaine</user>
    <text>&lt;https://github.com/clj-commons/ordered&gt;</text>
  </message>
  <message conversation_id="304">
    <ts>2019-01-26T06:09:05.526000</ts>
    <user>Luci</user>
    <text>Thanks for the help. To be clear though, I’m wondering if there are docs on this.</text>
  </message>
  <message conversation_id="304">
    <ts>2019-01-26T06:10:27.526600</ts>
    <user>Bridget</user>
    <text>I can't find anything comprehensive. :disappointed: There's this: &lt;https://clojure.org/guides/learn/hashed_colls#_sorted_maps&gt; which gives tiny bit insight on the default comparator at least.</text>
  </message>
  <message conversation_id="305">
    <ts>2019-01-26T08:35:09.528500</ts>
    <user>Luigi</user>
    <text>Anyone have any examples of idiomatic Clojure libraries that wrap external APIs?</text>
  </message>
  <message conversation_id="306">
    <ts>2019-01-26T08:48:32.529100</ts>
    <user>Luci</user>
    <text>The new cognitect AWS wrapper?</text>
  </message>
  <message conversation_id="305">
    <ts>2019-01-26T12:02:40.531900</ts>
    <user>Xiao</user>
    <text>Can anyone suggest a way to take screenshots of a webpage in clojure/java? I'm looking for the simplest solution possible, preferably with no extra dependencies.</text>
  </message>
  <message conversation_id="305">
    <ts>2019-01-26T12:06:31.532500</ts>
    <user>Epifania</user>
    <text>&lt;@Xiao&gt; I think the JavaFX WebView has a `takeSnapshot` or `snapshot` function you can use</text>
  </message>
  <message conversation_id="305">
    <ts>2019-01-26T12:07:25.532600</ts>
    <user>Johnathon</user>
    <text>not exactly what you're asking for, but is clojurescript a possibility? &lt;https://github.com/niklasvh/html2canvas&gt;</text>
  </message>
  <message conversation_id="305">
    <ts>2019-01-26T12:09:11.532900</ts>
    <user>Xiao</user>
    <text>I've tried that with poor results (compared to how things actually look in a real browser).</text>
  </message>
  <message conversation_id="305">
    <ts>2019-01-26T12:09:29.533400</ts>
    <user>Xiao</user>
    <text>Thanks, I'll take a look at that :+1:</text>
  </message>
  <message conversation_id="307">
    <ts>2019-01-26T13:14:47.533600</ts>
    <user>Latonya</user>
    <text>Clojure's default comparator, if you do not supply one explicitly, is `clojure.core/compare`</text>
  </message>
  <message conversation_id="307">
    <ts>2019-01-26T13:15:06.533800</ts>
    <user>Latonya</user>
    <text>There is the output of `(doc compare)` that describes it briefly.</text>
  </message>
  <message conversation_id="307">
    <ts>2019-01-26T13:21:17.534000</ts>
    <user>Latonya</user>
    <text>I haven't yet found any explicit lines in doc strings saying that, but in brief checking of source code it appears to be true.</text>
  </message>
  <message conversation_id="307">
    <ts>2019-01-26T14:02:27.534400</ts>
    <user>Latonya</user>
    <text>I have written something a few years back, but not published in a well-known place, necessarily: &lt;https://github.com/jafingerhut/thalia/blob/master/doc/project-docs/en_US/clojure.core/1.6.0/clojure.core/compare.md&gt;</text>
  </message>
  <message conversation_id="307">
    <ts>2019-01-26T14:02:45.534700</ts>
    <user>Latonya</user>
    <text>I am considering copying that to &lt;http://ClojureDocs.org|ClojureDocs.org&gt; page on the behavior of clojure.core/compare</text>
  </message>
  <message conversation_id="308">
    <ts>2019-01-26T14:37:21.538700</ts>
    <user>Bridget</user>
    <text>&lt;@Xiao&gt; If you're open to using external paid service, I would recommend url2png. It works pretty well and has some nice features, such as it allowing you to include custom css file just for screenshotting purposes. For a DIY solution, I'd probably go with something like headless chrome to get as close to desktop/mobile rendering as possible.</text>
  </message>
  <message conversation_id="308">
    <ts>2019-01-26T15:08:53.538800</ts>
    <user>Min</user>
    <text>If you're open to using an external service &lt;http://urlbox.io|urlbox.io&gt; is quite good. We've snapshoted pages with some crazy js/svg and all sorts of constraints (timers etc) with it</text>
  </message>
  <message conversation_id="309">
    <ts>2019-01-26T17:54:59.539500</ts>
    <user>Celestine</user>
    <text>I had not. Thank you. It doesn't look as sophisticated as to what we're already doing (we have tracing via annotations, a bunch of metrics stuff, support for the New Relic Agent and periodic probe/reporting, middleware, and transactions).</text>
  </message>
  <message conversation_id="309">
    <ts>2019-01-26T17:55:47.539700</ts>
    <user>Celestine</user>
    <text>Maybe at some point I'll extract ours as an open source project...</text>
  </message>
  <message conversation_id="310">
    <ts>2019-01-26T19:14:18.540400</ts>
    <user>Meagan</user>
    <text>is it possible to tell clojure.walk/postwalk not to descend into maps, only vectors?</text>
  </message>
  <message conversation_id="310">
    <ts>2019-01-26T19:20:10.541400</ts>
    <user>Latonya</user>
    <text>Not that I can think of.  You can copy and modify the source of clojure.walk/walk pretty easily, if you want.</text>
  </message>
  <message conversation_id="310">
    <ts>2019-01-26T19:21:00.542100</ts>
    <user>Henry</user>
    <text>Or use `tree-seq`, that one gives more flexibility &lt;https://clojuredocs.org/clojure.core/tree-seq&gt;</text>
  </message>
  <message conversation_id="310">
    <ts>2019-01-26T19:26:03.542200</ts>
    <user>Meagan</user>
    <text>I think I’ll just call my function recursively and hope that no one passes me a huge vector ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="310">
    <ts>2019-01-26T19:28:56.542600</ts>
    <user>Meagan</user>
    <text>oh, that’s pretty much what clojure.walk does anyway</text>
  </message>
  <message conversation_id="310">
    <ts>2019-01-26T19:29:06.543000</ts>
    <user>Meagan</user>
    <text>I thought it had something fancy that was preventing the stack from growing</text>
  </message>
  <message conversation_id="311">
    <ts>2019-01-26T21:43:54.543800</ts>
    <user>Latonya</user>
    <text>clojure.walk/walk should work for arbitrarily large collections without blowing the stack.  It should only grow the stack when there is more nesting in the collection given.</text>
  </message>
  <message conversation_id="310">
    <ts>2019-01-27T00:19:46.544300</ts>
    <user>Meagan</user>
    <text>i’m walking a hiccup-like structure, e.g.:
```
[:server/http {:port 8000 :join? false}
           [:router
            [:db/conn [:config]]]
           [:foo
            [:db/conn [:config]]]]
```</text>
  </message>
  <message conversation_id="311">
    <ts>2019-01-27T01:19:59.546600</ts>
    <user>Latonya</user>
    <text>Maybe not all, but most code that deals with nested structures - reading, printing, processing - will typically cause a number of levels of function calls that is proportional to the level of nesting of the data.  20 levels deep of nesting isn't going to blow the Java call stack.  1000 probably won't either.  If you've got 20,000 levels of nesting in your data, you will probably start blowing at least the default Java stack depth limits.</text>
  </message>
  <message conversation_id="311">
    <ts>2019-01-27T01:21:04.547300</ts>
    <user>Latonya</user>
    <text>I am not aware of any reasons to have such deep nesting of data, except for artificially generated test cases that attempt to determine where the call stack depth limit is.</text>
  </message>
  <message conversation_id="311">
    <ts>2019-01-27T04:41:00.547700</ts>
    <user>Latonya</user>
    <text>I should have pointed you here first -- it does explicitly document that `compare` is the default comparator, and has some notes on its behavior: &lt;https://clojure.org/guides/comparators&gt;</text>
  </message>
  <message conversation_id="312">
    <ts>2019-01-27T09:25:13.547900</ts>
    <user>Bridget</user>
    <text>That'd be cool :slightly_smiling_face: Yeah, it's not very sophisticated, but works for basic needs.</text>
  </message>
  <message conversation_id="313">
    <ts>2019-01-27T09:44:55.550300</ts>
    <user>Jalisa</user>
    <text>How do I return an error code from my `foo.bar/-main` function, when starting it using `clojure -m foo.bar`? Just returning the error code does not work. Program always terminates with error code `0`.</text>
  </message>
  <message conversation_id="312">
    <ts>2019-01-27T09:47:00.550800</ts>
    <user>Clarine</user>
    <text>(System/exit 127)</text>
  </message>
  <message conversation_id="314">
    <ts>2019-01-27T13:49:24.551800</ts>
    <user>Meagan</user>
    <text>I have a devtool that I want to allow people to easily install into their Clojure projects</text>
  </message>
  <message conversation_id="314">
    <ts>2019-01-27T13:49:35.551900</ts>
    <user>Meagan</user>
    <text>atm, it relies on websockets to communicate with a web UI</text>
  </message>
  <message conversation_id="314">
    <ts>2019-01-27T13:50:36.552700</ts>
    <user>Meagan</user>
    <text>I’m worried that installing the dependencies for and starting a webserver on behalf of a user is really invasive</text>
  </message>
  <message conversation_id="315">
    <ts>2019-01-27T14:48:16.553800</ts>
    <user>Latonya</user>
    <text>Continuing with my hopefully brief obsession, I have just updated the sorted-map entry on &lt;http://ClojureDocs.org|ClojureDocs.org&gt; to make the answers to some of your questions hopefully quick to answer: &lt;http://clojuredocs.org/clojure.core/sorted-map&gt;</text>
  </message>
  <message conversation_id="314">
    <ts>2019-01-27T15:12:33.555800</ts>
    <user>Aubrey</user>
    <text>&lt;@Meagan&gt; no other way around it, I guess. Unless you expose the WebSocket API as a core.async channel and allow people to override the WebSocket implementation with their own server.</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:37:03.556200</ts>
    <user>Rosaline</user>
    <text>I mean, surely it is isn't a huge stretch to go from websockets to just sockets?</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:37:47.556900</ts>
    <user>Rosaline</user>
    <text>and that is just part of the jre</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:48:49.557300</ts>
    <user>Sixta</user>
    <text>Figwheel does it :) </text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:49:54.557700</ts>
    <user>Meagan</user>
    <text>hmm, well a browser page can’t talk _just sockets_</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:50:59.558200</ts>
    <user>Meagan</user>
    <text>most people don’t run figwheel in the same process as their server-side app</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:52:00.559700</ts>
    <user>Sixta</user>
    <text>I've always seen it done that way fwiw, at least in dev. </text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:52:45.561100</ts>
    <user>Meagan</user>
    <text>really? that seems strange. I guess I haven’t used figwheel in awhile, so maybe I’m missing some context</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:52:56.561500</ts>
    <user>Sixta</user>
    <text>However, I have wished that figwheel could be used without its server, so a _callback_ based API would be wonderful.</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:53:15.562100</ts>
    <user>Sixta</user>
    <text>All our projects at work, and also Edge work that way. </text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:54:04.562800</ts>
    <user>Sixta</user>
    <text>Most people won't mind you starting a Web server, and you can separate the API so it is easy to upgrade. </text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:54:34.563000</ts>
    <user>Meagan</user>
    <text>what do you mean by callback-based?</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:56:50.564000</ts>
    <user>Meagan</user>
    <text>I think it would be nice, if the user already has a webserver running, to provide a way to serve the devtool through that instead of starting it’s own server</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:56:58.564300</ts>
    <user>Meagan</user>
    <text>but i’m not sure how to do that generally</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T15:59:04.564700</ts>
    <user>Tammera</user>
    <text>how would it know that that is the case?</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T16:00:51.566900</ts>
    <user>Samual</user>
    <text>I like to run a web app with its own, you know, lein repl thing, and start lein figwheel in another terminal; so the l.f. terminal listens to port 3349 and the l.r. terminal listens to port 8088 or whatever the website is.  Amazingly it hangs together.  The js made by figwheel apparently has the 3349 baked in, and learns dynamically the origin of the page that embedded it (ie 8088)</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T16:02:35.567000</ts>
    <user>Tammera</user>
    <text>I guess you would want to mount your dev tool into the running webserver.  That would mean having a companion lib per “possible webserver” plus one for apps that don’t have any</text>
  </message>
  <message conversation_id="316">
    <ts>2019-01-27T16:02:50.567200</ts>
    <user>Tammera</user>
    <text>Like, `my-dev-tool-pedestal`</text>
  </message>
  <message conversation_id="317">
    <ts>2019-01-27T16:52:16.569100</ts>
    <user>Samual</user>
    <text>Is this the appropriate forum to ask about VS Code?  Or maybe Calva, I don't know whose fault it is.  When the point is adjacent to a paren or bracket or brace, the point is invisible. The two brackets are *outlined* and the point is apparently blended in with one edge of one bracket.  Hard to guess which.</text>
  </message>
  <message conversation_id="317">
    <ts>2019-01-27T16:53:52.569300</ts>
    <user>Samual</user>
    <text>Is cursor obviousness configurable?</text>
  </message>
  <message conversation_id="317">
    <ts>2019-01-27T16:56:27.569900</ts>
    <user>Meagan</user>
    <text>&lt;@Samual&gt; try &lt;#CBE668G4R|calva-dev&gt;</text>
  </message>
  <message conversation_id="317">
    <ts>2019-01-27T17:00:26.570000</ts>
    <user>Sixta</user>
    <text>Your java thread will run a callback which will  write to whatever transport I use (websocket, sse, core.async, long polling, whatever). Same  thing on the frontend for responding to messages  that come in </text>
  </message>
  <message conversation_id="317">
    <ts>2019-01-27T17:21:55.570200</ts>
    <user>Samual</user>
    <text>Aha, editor.cursorWidth. Changing it from 0 to 4 makes it easy enough to see.</text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T00:55:10.571000</ts>
    <user>Meagan</user>
    <text>anyone know why
```
(binding [*provided* (merge provided args)]
          (map (bound-fn [x] (walk! x)) children))
```
works, but
```
(binding [*provided* (merge provided args)]
          (map walk! x children))
```
loses the `*provided*` binding?</text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T00:59:31.572500</ts>
    <user>Tammera</user>
    <text>Huh, don’t you mean `(map #(walk! %) children)` in the second case?</text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T01:14:27.573100</ts>
    <user>Meagan</user>
    <text>oops, had a typo. I meant `(map walk! children)`</text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T01:31:03.574700</ts>
    <user>Tammera</user>
    <text>Right, I had a case of ‘early morning’ and forgot about passing unary fns directly</text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T01:33:08.576100</ts>
    <user>Tammera</user>
    <text>With the chance of sounding stupid: could it be because your map returns a lazy sequence and therefore the binding is lost when it is realized </text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T01:43:45.576300</ts>
    <user>Meagan</user>
    <text>:thinking_face: I wouldn’t expect it to, but maybe</text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T01:44:24.576600</ts>
    <user>Meagan</user>
    <text>`clojure.lang.PersistentVector$ChunkedSeq`</text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T01:45:41.577000</ts>
    <user>Meagan</user>
    <text>hrmph. I changed it back to `(map walk! children)` and it works</text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T02:00:08.577400</ts>
    <user>Tammera</user>
    <text>haha, sometimes you have those problems</text>
  </message>
  <message conversation_id="319">
    <ts>2019-01-28T03:23:10.578900</ts>
    <user>Deena</user>
    <text>Is there a way to define a function or variable that belongs to another NS?

```
(defn another-ns/foo [x] 3)
(defn another-ns/bar 5)
```

```
2. Unhandled clojure.lang.Compiler$CompilerException
   Error compiling src/---.clj at (14:1)
   #:clojure.error{:phase :macro-syntax-check,
                   :line 14,
                   :column 1,
                   :source ---
                   :symbol clojure.core/defn}

1. Caused by clojure.lang.ExceptionInfo
   Call to clojure.core/defn did not conform to spec.
   #:clojure.spec.alpha{:problems
                        [{:path [:fn-name],
                          :pred clojure.core/simple-symbol?,
                          :val another-ns/foo,
                          :via
                          [:clojure.core.specs.alpha/defn-args
                           :clojure.core.specs.alpha/defn-args],
                          :in [0]}],
                        :spec
                        #object[clojure.spec.alpha$regex_spec_impl$reify__2509 0x32a67584 "clojure.spec.alpha$regex_spec_impl$reify__2509@32a67584"],
                        :value (another-ns/foo [x] 3),
                        :args (another-ns/foo [x] 3)}
```</text>
  </message>
  <message conversation_id="318">
    <ts>2019-01-28T03:27:42.581700</ts>
    <user>Deena</user>
    <text>I'm trying to use the `clj-ipfs-api` (&lt;https://github.com/keorn/clj-ipfs-api&gt;) but I cannot load any NS that refers to its functions without having an IPFS daemon running. Ideally, those functions would just fail if I tried to call them without the daemon running, but I get exceptions because the vars haven't even been defined.

My workaround is to check if the functions have been defined (using `resolve`) and replace them with a dummy function (that throws if called) if they're missing.</text>
  </message>
  <message conversation_id="320">
    <ts>2019-01-28T03:41:54.583100</ts>
    <user>Mitch</user>
    <text>Hi, IntellijIdea and Cursive users, how do you make Idea to recognise HugSQL functions?</text>
  </message>
  <message conversation_id="319">
    <ts>2019-01-28T05:46:14.583800</ts>
    <user>Elaine</user>
    <text>you can ask in &lt;#C0744GXCJ|cursive&gt; or &lt;#C1Q164V29|sql&gt; channel.</text>
  </message>
  <message conversation_id="321">
    <ts>2019-01-28T05:49:33.584000</ts>
    <user>Samual</user>
    <text>in-ns before the def ?</text>
  </message>
  <message conversation_id="319">
    <ts>2019-01-28T05:50:41.584200</ts>
    <user>Samual</user>
    <text>but beware that if the proper file for the ns is eventually loaded, the ns won't be strictly new so iirc it won't implicitly refer-clojure.</text>
  </message>
  <message conversation_id="322">
    <ts>2019-01-28T05:58:16.585700</ts>
    <user>Marisela</user>
    <text>Hi, I have a hex string that looks like `01031000BB014727DB00000064009600C823C5` that I need to decode in to something human readable. Whats the best way of going about this? The first three bytes are meaningless but after that I need to read 2 bytes at a time?</text>
  </message>
  <message conversation_id="322">
    <ts>2019-01-28T05:59:10.586800</ts>
    <user>Marisela</user>
    <text>I thought Buffy may have helped out but can't work out how to pass the whole string in.</text>
  </message>
  <message conversation_id="319">
    <ts>2019-01-28T06:07:59.588500</ts>
    <user>Bart</user>
    <text>anybody got a quick and easy way of writing a file sent through a http/POST to file?</text>
  </message>
  <message conversation_id="322">
    <ts>2019-01-28T06:08:25.589000</ts>
    <user>Bart</user>
    <text>to disk, rather</text>
  </message>
  <message conversation_id="319">
    <ts>2019-01-28T06:09:17.590000</ts>
    <user>Bart</user>
    <text>i'm not quite sure what to use, if there's a convenient clojure library for it, or if I should just go straight to `FileOutputStream`</text>
  </message>
  <message conversation_id="319">
    <ts>2019-01-28T06:12:59.591100</ts>
    <user>Bart</user>
    <text>Ring seems to not be happy about that approach though; `java.lang.IllegalArgumentException: No implementation of method: :write-body-to-stream of protocol: #&amp;amp;apos;ring.core.protocols/StreamableResponseBody found for class: java.io.FileOutputStream`</text>
  </message>
  <message conversation_id="323">
    <ts>2019-01-28T06:44:57.591400</ts>
    <user>Elaine</user>
    <text>```
(-&amp;gt;&amp;gt; (.getBytes "01031000BB014727DB00000064009600C823C5")
     (drop 3) ;; The first three bytes are meaningless
     (partition 2) ;; I need to read 2 bytes at a time
     (map (partial byte-array 2)) ;; Turn (1 2) back to byte[]
     (map slurp)) ;; turn byte pair into string again 
```</text>
  </message>
  <message conversation_id="323">
    <ts>2019-01-28T06:54:25.591600</ts>
    <user>Elaine</user>
    <text>Using transducers (performatic)
```
(into []
      (comp (drop 3)                                        ;; The first three bytes are meaningless
            (partition-all 2)                               ;; I need to read 2 bytes at a time
            (map (partial byte-array 2))                    ;; Turn (1 2) back to byte[]
            (map slurp))                                    ;; turn byte pair into string again
      (.getBytes "01031000BB014727DB00000064009600C823C5"))
```</text>
  </message>
  <message conversation_id="324">
    <ts>2019-01-28T07:24:05.592300</ts>
    <user>Marisela</user>
    <text>Nice one! thank you</text>
  </message>
  <message conversation_id="323">
    <ts>2019-01-28T07:39:47.592500</ts>
    <user>Elaine</user>
    <text>share the final form :slightly_smiling_face:</text>
  </message>
  <message conversation_id="319">
    <ts>2019-01-28T08:49:38.592800</ts>
    <user>Vita</user>
    <text>this *is* something that happens. Lazy sequences might be realized outside of the scope of the binding. &lt;https://cemerick.com/2009/11/03/be-mindful-of-clojures-binding/&gt;</text>
  </message>
  <message conversation_id="325">
    <ts>2019-01-28T10:04:02.594500</ts>
    <user>Sixta</user>
    <text>Is there an abstraction where something like `take` &amp;amp; `drop` would avoid computation? I'm guessing it would utilize custom versions of `take`/`drop`, although maybe txors can do this? I'm thinking about computationally heavy pagination.</text>
  </message>
  <message conversation_id="326">
    <ts>2019-01-28T10:27:44.595800</ts>
    <user>Lorita</user>
    <text>Hi, can someone confirm or deny, that gen-class generated code can't put java annotations on generated class methods?</text>
  </message>
  <message conversation_id="326">
    <ts>2019-01-28T10:29:20.596900</ts>
    <user>Lorita</user>
    <text>I am utterly unable to find exampl exactly for gen-class... and not the methods which are new, but just well... extending abstract class, and dropping annotation on the abstract method implemetnation... I know it's possible for deftype (I think)</text>
  </message>
  <message conversation_id="326">
    <ts>2019-01-28T10:32:09.597000</ts>
    <user>Roselle</user>
    <text>Would this help? &lt;https://stackoverflow.com/a/16114606/7182237&gt;</text>
  </message>
  <message conversation_id="326">
    <ts>2019-01-28T10:34:46.597300</ts>
    <user>Lorita</user>
    <text>No this is how to attach to the methods you are bringing as new, but if you have methods which are, for example, alerady in super class (like abstract method) and then you try to write the function and attach the annotation, it does not work...
Or should I also declare methods in the gen-class itself... I think you only do when you define new onews</text>
  </message>
  <message conversation_id="326">
    <ts>2019-01-28T10:36:26.597500</ts>
    <user>Lorita</user>
    <text>I have java abstract class, which I try to extend, and there is abstract method "call" in that class, which I try to implement and add the annotation, in bytecode I see the method, but not the annotation</text>
  </message>
  <message conversation_id="326">
    <ts>2019-01-28T10:57:19.597700</ts>
    <user>Lorita</user>
    <text>yea according to doc, the clojure will override all the public methods of super class, when extending, but it somehow clears and ignores all the annotations I put on the extendable abstract method</text>
  </message>
  <message conversation_id="327">
    <ts>2019-01-28T11:17:36.600400</ts>
    <user>Charlette</user>
    <text>hey people, anyone know where I can find more details about the mechanics behind the error handler function optionally attached to agents? Specifically, is it dispatched in the same thread as the `send` which was responsible for the failing call, so that IO should be avoided in that case (or `send-off` used in cases where the error handler has to do IO)? And is the return value from the error used at all?</text>
  </message>
  <message conversation_id="327">
    <ts>2019-01-28T11:23:49.600600</ts>
    <user>Charlette</user>
    <text>Hmm, Clojure Programming suggests it's not handled in the dispatch thread, so IO should be fine :slightly_smiling_face:</text>
  </message>
  <message conversation_id="327">
    <ts>2019-01-28T11:27:13.600800</ts>
    <user>Jasmine</user>
    <text>It’s handled in the agent execution thread, not in the thread calling `send` / `send-off`. If doing I/O, I would use `send-off`. The return value is not used.</text>
  </message>
  <message conversation_id="327">
    <ts>2019-01-28T12:01:53.602100</ts>
    <user>Charlette</user>
    <text>thanks &lt;@Jasmine&gt;!</text>
  </message>
  <message conversation_id="328">
    <ts>2019-01-28T12:28:54.608600</ts>
    <user>Andrew</user>
    <text>hey, don't know whether I'm in the right place for this:
i want to make some improvements to &lt;http://4clojure.com|4clojure.com&gt; but i think it lacks an active maintainer.
improvements i think of atm would be
• clean up issues/PRs on github
• oauth-login (afaik there would already be a PR that needs some love or rewrite, dunno yet)
• maybe a small face lift using cljs/reframe? i mainly think of this as an exercise for myself xD but i'd like to accomplish some goals like improvements on "top users"/"follow" page/features (performance-wise)
• mabye some browser-editor improvements
to name some of the starters</text>
  </message>
  <message conversation_id="328">
    <ts>2019-01-28T12:29:57.609800</ts>
    <user>Andrew</user>
    <text>so my question is, who i need to contact to become maintainer and how i qualify to become the next warden of &lt;http://4clojure.com|4clojure.com&gt; :slightly_smiling_face:</text>
  </message>
  <message conversation_id="328">
    <ts>2019-01-28T12:32:27.611000</ts>
    <user>Clarine</user>
    <text>&lt;@Andrew&gt; I don’t know the current maintainer, but I would also be interested in these improvments. I would also like to add better error messages through the use of speculative instrumentation (can be turned on and off). For browser editor improvements CodeMirror + parinfer could be used.</text>
  </message>
  <message conversation_id="328">
    <ts>2019-01-28T12:43:02.613500</ts>
    <user>Andrew</user>
    <text>if @danielwithmusic is right amalloy still has ownership. will look into possibilites to reach him and/or any1 on the contributors list tonight.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:01:50.613900</ts>
    <user>Adela</user>
    <text>isn't there a typo?
```
(doc clojure.set/rename-keys)
-------------------------
clojure.set/rename-keys
([map kmap])
  Returns the map with the keys in kmap renamed to the vals in kmap
```</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:03:21.614400</ts>
    <user>Dann</user>
    <text>if kmap is `{:a :b}` it renames keys of kmap (:a) to vals of kmap (:b)</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:03:44.614600</ts>
    <user>Dann</user>
    <text>it's awkward, but correct</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:05:53.616600</ts>
    <user>Dann</user>
    <text>"if a key in m is also a key in kmap, it is replaced by the corresponding val in kmap" is a potentially clearer way to say that(?)</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:06:29.617400</ts>
    <user>Adela</user>
    <text>I would expect "Returns the map with the keys in `map` renamed to the vals in `kmap`"</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:06:42.617800</ts>
    <user>Dann</user>
    <text>no, because keys that aren't in kmap are not touched</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:07:01.618300</ts>
    <user>Dorothea</user>
    <text>I think the tricky issue is tying the keys from `map` and the keys from `kmap` together, and what happens when they match.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:07:44.618900</ts>
    <user>Dorothea</user>
    <text>I like your definition above &lt;@Dann&gt; more than the docstring, which tripped me up when I was first figuring out how to use it.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:09:26.620100</ts>
    <user>Adela</user>
    <text>examples from &lt;https://clojuredocs.org/clojure.set/rename-keys&gt; prove that my understanding is correct, but I'm confused by description</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:11:42.621000</ts>
    <user>Ashlea</user>
    <text>&lt;@Adela&gt; You’re correct, that appears to be a typo</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:12:00.621300</ts>
    <user>Ashlea</user>
    <text>Oh shoot, no sorry</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:12:03.621500</ts>
    <user>Ashlea</user>
    <text>That’s not a typo</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:12:51.622300</ts>
    <user>Ashlea</user>
    <text>haha, it took me a couple of reads to understand the docstring</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:18:41.623900</ts>
    <user>Dorothea</user>
    <text>Running that top example in a `clj` repl doesn't replicate that behavior.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:19:03.624200</ts>
    <user>Dorothea</user>
    <text>```
user=&amp;gt; (set/rename-keys {:a 1} {:a :new-a :b :new-b})
{:new-a 1}
```</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:19:05.624300</ts>
    <user>Adela</user>
    <text>btw, where's `clojure.data/diff`?</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:19:20.624500</ts>
    <user>Dann</user>
    <text>it comes with clojure</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:20:04.624600</ts>
    <user>Dann</user>
    <text>you are missing the :b key in the input map</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:20:52.625400</ts>
    <user>Becki</user>
    <text>`(require '[clojure.data :as diff])`</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:20:53.625500</ts>
    <user>Adela</user>
    <text>`doc` returns `nil` to me</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:21:14.625900</ts>
    <user>Dann</user>
    <text>did you require its namespace?</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:21:47.626000</ts>
    <user>Dorothea</user>
    <text>Sorry, the behavior I was pointing out was that keys in `kmap` that aren't in `map` result in no behavior; there was an example on clojuredocs that showed an old behavior where the returned map would contain `:new-b nil` as a k/v pair.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:22:00.626200</ts>
    <user>Dorothea</user>
    <text>That being said, upon rereading this thread I'm not sure if anyone was confused about that.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:22:18.626800</ts>
    <user>Becki</user>
    <text>also in the examples that was a bug in clojure 1.1 and fixed in 1.2.1 ti thought i read</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:22:28.627300</ts>
    <user>Adela</user>
    <text>```
Execution error (FileNotFoundException) at user/eval1484 (form-init8507139964286056300.clj:1).
Could not locate diff__init.class, diff.clj or diff.cljc on classpath.
```
sorry, I'm noob</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:22:36.627900</ts>
    <user>Adela</user>
    <text>thx Dan, it worked</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:23:04.628700</ts>
    <user>Dorothea</user>
    <text>Yep! I just like to verify those statements myself...</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:23:33.629500</ts>
    <user>Dorothea</user>
    <text>(too much time working front-line support, perhaps...)</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:23:40.629900</ts>
    <user>Adela</user>
    <text>oh, just noticed I'm in the wrong channel</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T16:23:44.630100</ts>
    <user>Adela</user>
    <text>sorry</text>
  </message>
  <message conversation_id="330">
    <ts>2019-01-28T18:10:16.631600</ts>
    <user>Rosalba</user>
    <text>in postgres, column names can't have hyphens (unless you escape them). I'm using hugsql and I'd like to create some middleware to convert snake_case keys to kebab-case for every query, has anybody done this already?</text>
  </message>
  <message conversation_id="330">
    <ts>2019-01-28T18:26:31.645900</ts>
    <user>Sebrina</user>
    <text>There’s an exploit in Slack that allows you to change permissions and post as random user ids from the client side. Occasionally a troll comes in and uses it to post as random people and start something.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:27:19.648500</ts>
    <user>Bart</user>
    <text>that's a pretty serious exploit</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:27:39.649200</ts>
    <user>Sebrina</user>
    <text>Yes, yes it is. They disclosed the issue but apparently refuse to fix it.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:30:24.654300</ts>
    <user>Becki</user>
    <text>`/collapse`</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:36:15.667900</ts>
    <user>Bao</user>
    <text>that's cute</text>
  </message>
  <message conversation_id="330">
    <ts>2019-01-28T18:37:56.671000</ts>
    <user>Mohamed</user>
    <text>&lt;@Diamond&gt; the admins have disabled that, the troll was using a well known exploit in slack</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:38:09.671400</ts>
    <user>Mohamed</user>
    <text>slack is very aware of it, and has not fixed it</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:38:21.671700</ts>
    <user>Diamond</user>
    <text>This is the same exploit described previously?</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:38:27.671900</ts>
    <user>Mohamed</user>
    <text>probably</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:38:47.672900</ts>
    <user>Diamond</user>
    <text>I wonder what the rationale is for not fixing it.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:39:02.674100</ts>
    <user>Mohamed</user>
    <text>:man-shrugging:</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:39:06.674600</ts>
    <user>Celestine</user>
    <text>Stop discussing this here. Go to &lt;#C0CB40N8K|community-development&gt; for that discussion please.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:39:13.675100</ts>
    <user>Mohamed</user>
    <text>sorry</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:39:36.676300</ts>
    <user>Celestine</user>
    <text>Do not engage the trolls. Do not discuss it in regular channels. It just makes the noise worse.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:51:19.687100</ts>
    <user>Evonne</user>
    <text>&lt;#C03S1L9DN|clojurescript&gt; has also been hit</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:53:04.687300</ts>
    <user>Celestine</user>
    <text>Thanks. I'll join there and clean up.</text>
  </message>
  <message conversation_id="329">
    <ts>2019-01-28T18:59:46.687600</ts>
    <user>Sebrina</user>
    <text>Oops sorry :sweat:</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:14:12.688500</ts>
    <user>Meagan</user>
    <text>does anyone have an example of a system (a la component/integrant/mount) whose resources _have_ to be stopped in order?</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:14:26.688700</ts>
    <user>Meagan</user>
    <text>even just some hypothetical cases would help</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:20:59.690400</ts>
    <user>Dann</user>
    <text>&lt;@Meagan&gt; hypothetical: using zookeeper for service discovery / leader election, you need to withdraw from any roles your instance took on, and do any zk bookkeeping, before shutting down your zookeeper component that manages your connection to the service</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:21:38.691200</ts>
    <user>Dann</user>
    <text>(of course if it's properly designed the failure case should handle that already, but you might be able to do something simpler if a node explicitly and gracefully leaves)</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:23:43.693200</ts>
    <user>Meagan</user>
    <text>nice! does that match what I’m talking about though? I mean that if component `A` depends on `B`:
```
start:
A -&amp;gt; B
```
`B` must be started before `A`. I’m wondering how often it’s important that `B` also be _stopped_ before `A`</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:24:29.694500</ts>
    <user>Meagan</user>
    <text>in this case, are you saying that you have two components (e.g. one for service discovery, one for the component itself)?</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:24:33.694600</ts>
    <user>Dann</user>
    <text>oh! - I thought you meant "in order" as in "opposite from starting order" which is how it's done...</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:25:11.695300</ts>
    <user>Meagan</user>
    <text>I guess? I actually haven’t used component in a while and it never mattered in my cases.</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:25:30.696000</ts>
    <user>Meagan</user>
    <text>if I just stop things in random order, what goes wrong? :stuck_out_tongue:</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:25:32.696200</ts>
    <user>Dann</user>
    <text>&lt;@Meagan&gt; in my example the hypothetical service isn't the only usage of zookeeper, so the zk component is shared by 2 or more components</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:26:23.697300</ts>
    <user>Dann</user>
    <text>sometimes shutdown of B requires usage of A</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:26:25.697600</ts>
    <user>Meagan</user>
    <text>OK, so you’d probably want to withdraw before you shut down the rest of your system so you don’t get incoming requests during your shutdown</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:26:36.698000</ts>
    <user>Meagan</user>
    <text>ah good point</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:26:46.698300</ts>
    <user>Dann</user>
    <text>if there's any tidying up needed - of course we usually try to build things so worst case we don't leave state dangling</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:28:14.699600</ts>
    <user>Dann</user>
    <text>another hypothetical: there's a lock file on a filesystem where two programs run (eg. an editor), you'd want to shut down the part of your app that wants to write the file before shutting down the part that does file locking and directory watching</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:28:44.700100</ts>
    <user>Dann</user>
    <text>and on startup you want to open the part that watches and locks files before the part that wants to write them</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:29:17.700300</ts>
    <user>Meagan</user>
    <text>this is great!</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:30:11.700900</ts>
    <user>Dann</user>
    <text>often we avoid this by not splitting concerns, but in a focused enough file management oriented app, I can imagine separate components</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:31:21.701400</ts>
    <user>Rosaline</user>
    <text>clean stopping is often more important during development then in production</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:31:51.702400</ts>
    <user>Rosaline</user>
    <text>so you can stop the app, and leave things in a good state were you can start it again without restarting the jvm</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:32:04.703000</ts>
    <user>Dann</user>
    <text>oh, and a much more common / obvious example than the others: imagine if your http server was still running and handling requests, but your db access handler was shutting down</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:32:35.703500</ts>
    <user>Meagan</user>
    <text>I think that’s the example I’ve been running with so far, and I don’t really care that much</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:33:01.704300</ts>
    <user>Dann</user>
    <text>I guess a spurious 500 error isn't hard to handle</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:33:10.704500</ts>
    <user>Meagan</user>
    <text>I am thinking about this mainly for a dev POV like &lt;@Rosaline&gt; said though</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:33:45.705000</ts>
    <user>Meagan</user>
    <text>so e.g. the file locking example was great, I hadn’t thought about things like that</text>
  </message>
  <message conversation_id="331">
    <ts>2019-01-28T20:34:08.705200</ts>
    <user>Meagan</user>
    <text>not everything is a web app :stuck_out_tongue:</text>
  </message>
  <message conversation_id="332">
    <ts>2019-01-28T23:36:32.707300</ts>
    <user>Chiquita</user>
    <text>Hi everyone, I'm new to clojure and clojure.test so can anyone tell me how to write test cases for any project.</text>
  </message>
  <message conversation_id="332">
    <ts>2019-01-28T23:47:16.707600</ts>
    <user>Patty</user>
    <text>&lt;@Chiquita&gt; you can start here &lt;https://clojure.github.io/clojure/clojure.test-api.html&gt;</text>
  </message>
  <message conversation_id="332">
    <ts>2019-01-28T23:52:52.710400</ts>
    <user>Chiquita</user>
    <text>Hey &lt;@Patty&gt;, Its like I have read that link and I've created a project in which I wrote a simple test and after running cider and using C-c C-t p, it is saying that "Running test in all namespaces" in minibuffer but it is not showing the output.</text>
  </message>
  <message conversation_id="332">
    <ts>2019-01-28T23:53:23.710800</ts>
    <user>Chiquita</user>
    <text>(ns testcase.core
  (:require [clojure.test            :refer :all]
            [ring.adapter.jetty      :as jetty]
            [ring.middleware.reload  :refer [wrap-reload]]
            [compojure.core          :refer [defroutes GET]]
            [compojure.route         :refer [not-found resources]]
   ))

(deftest addition
  (is (= 3 (+ 1 1)))
  (is (= 4 (+ 2 2))))
(defn -main
  "A simple project to runtest case"
  [port-number]
  (jetty/run-jetty (wrap-reload #'addition)
        {:port (Integer. port-number)})</text>
  </message>
  <message conversation_id="332">
    <ts>2019-01-29T00:25:08.711600</ts>
    <user>Patty</user>
    <text>&lt;@Chiquita&gt; that is happening because you have this in src namespace and not test namespace from the looks of things.</text>
  </message>
  <message conversation_id="332">
    <ts>2019-01-29T00:25:41.712000</ts>
    <user>Chiquita</user>
    <text>Okay thanks.</text>
  </message>
  <message conversation_id="332">
    <ts>2019-01-29T00:32:00.712200</ts>
    <user>Celestine</user>
    <text>You'll find the &lt;#C053AK3F9|beginners&gt; channel very helpful -- people there have opted in to helping folks who are new to Clojure &lt;@Chiquita&gt;</text>
  </message>
  <message conversation_id="332">
    <ts>2019-01-29T00:35:42.712400</ts>
    <user>Chiquita</user>
    <text>Thanks &lt;@Celestine&gt; for the suggestion.</text>
  </message>
  <message conversation_id="333">
    <ts>2019-01-29T07:26:38.714400</ts>
    <user>Kristyn</user>
    <text>Shouldn't &lt;https://github.com/edn-format/edn/wiki/Implementations&gt; also mention Clojure's built-in &lt;https://clojure.github.io/clojure/clojure.edn-api.html&gt;? For anyone trying to use EDN format from Clojure, it'd be really nice to get a pointer which one should use. According to &lt;https://groups.google.com/forum/#!topic/clojure/d61ImK2VCag&gt; the built-in is just fine.</text>
  </message>
  <message conversation_id="334">
    <ts>2019-01-29T08:26:38.715000</ts>
    <user>Jasmine</user>
    <text>Feel free to add it </text>
  </message>
  <message conversation_id="335">
    <ts>2019-01-29T10:28:55.717200</ts>
    <user>Danna</user>
    <text>I have a repl with refs to datomic entities defined.
Periodically I wish to refresh these to include recent novelty.
A macro approach could look like
``` (defmacro refresh-datomic-entity-as-macro
  "redefine ent-sym to latest version of entity"
  [ent-sym datomic-conn]
  `(def ~ent-sym
     (d/entity (d/db ~datomic-conn) ~(:db/id (deref (resolve ent-sym))))))
```
but  realised that I could alternatively write the function
```
(defn refresh-datomic-entity-as-fn
  [ent-var datomic-conn]
  (.alterRoot ent-var (fn [e] (d/entity (d/db datomic-conn) (:db/id e))) '()))
```

normally I would _always_ choose a function over a macro
but perhaps not if that required the interop call to `clojure.lang.Var/alterRoot`

How would you choose between them??
are they equivalently awful?</text>
  </message>
  <message conversation_id="335">
    <ts>2019-01-29T10:50:51.718600</ts>
    <user>Celestine</user>
    <text>As opposed to `alter-var-root`? &lt;@Danna&gt; </text>
  </message>
  <message conversation_id="335">
    <ts>2019-01-29T10:53:41.718900</ts>
    <user>Danna</user>
    <text>:ahem: hadn't spotted that function</text>
  </message>
  <message conversation_id="335">
    <ts>2019-01-29T10:55:48.719100</ts>
    <user>Danna</user>
    <text>thankyou</text>
  </message>
  <message conversation_id="335">
    <ts>2019-01-29T10:57:05.719300</ts>
    <user>Danna</user>
    <text>haha
I've never written a macro that I've ended up keeping</text>
  </message>
  <message conversation_id="336">
    <ts>2019-01-29T11:11:05.722300</ts>
    <user>Meagan</user>
    <text>I just want to profess the ridiculous feeling of joy and power I have when using Clojure. 200 lines to achieve what in my other proficient languages would be 2,000. I know it’s not a real measuring stick, but every once and awhile I come up for fresh air and look at some of the stuff people are doing, and realize how much more approachable Clojure code bases are. Thank you Rich/Stu/Alex/et. al.!</text>
  </message>
  <message conversation_id="336">
    <ts>2019-01-29T11:13:37.723000</ts>
    <user>Clarine</user>
    <text>What are your other proficient languages?</text>
  </message>
  <message conversation_id="336">
    <ts>2019-01-29T11:15:19.723300</ts>
    <user>Meagan</user>
    <text>JS, Java, ReasonML/OCaml. in that order :slightly_smiling_face:</text>
  </message>
  <message conversation_id="336">
    <ts>2019-01-29T11:15:41.723700</ts>
    <user>Jasmine</user>
    <text>tell your friends :)</text>
  </message>
  <message conversation_id="336">
    <ts>2019-01-29T11:16:06.723900</ts>
    <user>Clarine</user>
    <text>I’m curious about your findings about Clojure vs OCaml</text>
  </message>
  <message conversation_id="336">
    <ts>2019-01-29T11:16:37.724500</ts>
    <user>Meagan</user>
    <text>well, I “made” everyone at work switch to it :stuck_out_tongue: doing my duty</text>
  </message>
  <message conversation_id="336">
    <ts>2019-01-29T11:19:30.725100</ts>
    <user>Meagan</user>
    <text>I could probably write a long post about it :smile: one of bigger reasons, honestly, was that we started rewriting our systems at work last year and needed something to standardize on. Clojure was just a better bet back then. Still is</text>
  </message>
  <message conversation_id="336">
    <ts>2019-01-29T11:19:52.725300</ts>
    <user>Meagan</user>
    <text>IMO Clojure(Script) is the best “blue collar” language out there</text>
  </message>
  <message conversation_id="336">
    <ts>2019-01-29T11:20:03.725500</ts>
    <user>Clarine</user>
    <text>I’d be interested in the longer blog post. For now, thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:40:33.727400</ts>
    <user>Salina</user>
    <text>it already happened a few times that we change something, everything works in the REPL and running tests, but then eventually you run the Uberjar generated and it blows up</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:41:14.729000</ts>
    <user>Salina</user>
    <text>is normally related to silly things like `slurp` of files not in `resources`, and similar, but it would be nice to find out earlier on</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:41:59.730500</ts>
    <user>Salina</user>
    <text>one way for example could be to run the uberjar generated for a few seconds and do an HTTP call to see if it started up correctly, has anyone done something like that?</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:44:54.731300</ts>
    <user>Hilary</user>
    <text>I came from an OCaml-ish language (F#) to Clojure and wrote something about the transition here &lt;https://blog.taylorwood.io/2017/09/15/year-behind.html&gt;
I also feel ridiculously empowered when writing Clojure. I did C#/Java/C++ for ~15 years before learning functional programming FWIW</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:45:57.733100</ts>
    <user>Gillian</user>
    <text>i told a friend about clojure and he told me it sounded like i was in a cult</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:46:10.733400</ts>
    <user>Wai</user>
    <text>Blue collar probably doesn’t translate across cultures/regions with any precision. I’d be interested in the longer motivation? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="338">
    <ts>2019-01-29T11:48:05.734600</ts>
    <user>Clarine</user>
    <text>&lt;@Wai&gt; I interpret that as the daily work of an average programmer</text>
  </message>
  <message conversation_id="338">
    <ts>2019-01-29T11:49:01.734800</ts>
    <user>Clarine</user>
    <text>&lt;@Hilary&gt; thanks, I already read that one and enjoyed it</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:50:49.735200</ts>
    <user>Meagan</user>
    <text>it’s always useful to test things in a release-like environment before deploying. We use docker at work to do that</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:51:46.735600</ts>
    <user>Meagan</user>
    <text>it’s also pretty standard practice to have health checks once deployed</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:52:42.736400</ts>
    <user>Sonny</user>
    <text>Weird. I told my friend about a cult I joined and he told me it sounded like being a clojure developer.</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T11:58:32.736800</ts>
    <user>Sonny</user>
    <text>&lt;@Meagan&gt; Absolutely love the, "blue collar" programming language metaphor, while I understand the response about it not translating it made deep and intuitive sense to me immediately and will now be stolen. Bravo.</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:00:45.737000</ts>
    <user>Celestine</user>
    <text>I've probably taken about a dozen languages to production -- and I've learned another dozen while doing that (and I came out of university fluent in about another dozen before that) -- and Clojure feels, for me, the most fun and productive of any language I've ever used.</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:01:10.737200</ts>
    <user>Celestine</user>
    <text>I didn't know `.alterRoot` existed so that's TIL :slightly_smiling_face:</text>
  </message>
  <message conversation_id="339">
    <ts>2019-01-29T12:01:40.737400</ts>
    <user>Clarine</user>
    <text>&lt;https://twitter.com/borkdude/status/933699150453051394&gt;</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:01:46.737700</ts>
    <user>Salina</user>
    <text>we also use docker</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:02:04.738100</ts>
    <user>Salina</user>
    <text>so I can run something on the docker image</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:02:27.738300</ts>
    <user>Salina</user>
    <text>was just wondering how to run for example jetty for a few seconds until it's up to try to do a HTTP call</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:02:30.738500</ts>
    <user>Meagan</user>
    <text>I can’t take credit for the analogy! I definitely stole it from somewhere :stuck_out_tongue:</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:02:56.738700</ts>
    <user>Salina</user>
    <text>and we also have health checks, however when there are these issues marathon can't even deploy the changes, and it just loops forever</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:04:23.738900</ts>
    <user>Meagan</user>
    <text>are you asking how to do this as an automated test in CI?</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:04:33.739300</ts>
    <user>Salina</user>
    <text>yes</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:05:21.739500</ts>
    <user>Salina</user>
    <text>just wanted to know if I was the only one with this problem, and others solved it</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:06:06.739900</ts>
    <user>Clarine</user>
    <text>&lt;https://twitter.com/borkdude/status/819248075948625920&gt;</text>
  </message>
  <message conversation_id="337">
    <ts>2019-01-29T12:09:23.740800</ts>
    <user>Salina</user>
    <text>writing Clojure with Emacs is a double cult then :smile:</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:39:41.745000</ts>
    <user>Evonne</user>
    <text>All the best cults write clojure.</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:41:49.746700</ts>
    <user>Emery</user>
    <text>Hi, has anyone used com.taoensso/carmine with Redisgraph? I can successfully `(car/PING)` my running Redisgraph Docker container, and I see four graph commands listed when I run `(wcar* (car/command))`. But, when I try e.g. `(wcar* (car/graph.QUERY "social" "CREATE (:person {name: 'roi', age: 33, gender: 'male', status: 'married'})"))`, it tells me `No such var: car/graph.QUERY`. Haven’t used carmine or Redis much previously, but wanted to have a go.</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:50:30.748100</ts>
    <user>Vinnie</user>
    <text>:wave: any known lib/utils that given a string:
1. tell me if it's a valid uri
2. tell me if that uri refers to an image of any kind :question:</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:54:39.748200</ts>
    <user>Vinnie</user>
    <text>maybe a combination of &lt;https://github.com/cemerick/url&gt; for 1 and &lt;https://github.com/michaelklishin/pantomime&gt; for 2 :thinking_face:</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:56:27.749500</ts>
    <user>Sonny</user>
    <text>You can use the URI class constructor in the JDK to check for validity. It will throw an exception if it invalid (assuming you mean structurally valid, as opposed to the resource it points to actually existing).</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:57:45.751000</ts>
    <user>Sonny</user>
    <text>Number 2 sounds hard though. &lt;http://myserver.com/pictures/myface&gt; is a valid URI. You'd have to do a HEAD at minimum to see what's there though.</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:58:09.751400</ts>
    <user>Vinnie</user>
    <text>yep, makes sense. thanks for the suggestions</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:58:34.751800</ts>
    <user>Sonny</user>
    <text>np :slightly_smiling_face: I also could be wrong, it has been known to happen.</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:58:56.752300</ts>
    <user>Vinnie</user>
    <text>&lt;https://github.com/michaelklishin/pantomime#detecting-mime-type&gt; looks pretty good. planning to test it out on some edge cases</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:59:00.752600</ts>
    <user>Dann</user>
    <text>a warning about java.net.URI: simply creating one will talk to the network</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:59:07.752900</ts>
    <user>Vinnie</user>
    <text>yep</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:59:25.753600</ts>
    <user>Sonny</user>
    <text>Oh yes, I vaguely remember that now. The JDK is bags of fun.</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:59:32.753800</ts>
    <user>Dann</user>
    <text>or maybe it's equality checks - but what I definitely remember is strange unexpected network interactions</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T12:59:48.754100</ts>
    <user>Vinnie</user>
    <text>i remember it too :slightly_smiling_face:
do you even side effect?</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T13:20:06.755500</ts>
    <user>Ashlea</user>
    <text>&lt;@Dann&gt; do you know where that’s documented? I knew that was the case for `java.net.InetAddress`, but `URI` is surprising :S</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T13:22:31.756300</ts>
    <user>Dann</user>
    <text>&lt;@Ashlea&gt; thanks for making me double check: URL has this behavior, URI is safe(!)
&amp;gt; Equality, hashing, and comparison are defined strictly in terms of the character content of the instance. In other words, a URI instance is little more than a structured string that supports the syntactic, scheme-independent operations of comparison, normalization, resolution, and relativization.
&lt;https://docs.oracle.com/javase/7/docs/api/java/net/URI.html&gt;</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T13:22:45.756600</ts>
    <user>Ashlea</user>
    <text>:relieved:</text>
  </message>
  <message conversation_id="340">
    <ts>2019-01-29T13:23:31.757500</ts>
    <user>Dann</user>
    <text>I is only four letters away from L, and looks very similar in most fonts, which is my excuse for my faulty memory</text>
  </message>
  <message conversation_id="341">
    <ts>2019-01-29T15:30:26.759100</ts>
    <user>Zenia</user>
    <text>&lt;@Evonne&gt; gives a whole new meaning when you see someone joined &lt;#C03S1KBA2|clojure&gt; .....</text>
  </message>
  <message conversation_id="342">
    <ts>2019-01-29T15:47:15.759800</ts>
    <user>Jasmine</user>
    <text>to join, just send me a check for $1000. riches will ensue.</text>
  </message>
  <message conversation_id="341">
    <ts>2019-01-29T16:03:10.760900</ts>
    <user>Evonne</user>
    <text>Haven’t even sent in the money yet, and Riches are already ensuing.</text>
  </message>
  <message conversation_id="342">
    <ts>2019-01-29T16:03:39.761100</ts>
    <user>Gillian</user>
    <text>shut up and take my money</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T16:42:18.763500</ts>
    <user>Sixta</user>
    <text>Is there a caching system where if the result is not available, then the old one is used until it is? Eg for a variable time api</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T16:45:17.765500</ts>
    <user>Sixta</user>
    <text>Core.cache doesn't seem to have something like this. I feel like I could try something with a futures and deref, but state gets a little complicated, and utilizing someone else's state management seems reasonable.</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T16:49:03.766600</ts>
    <user>Jasmine</user>
    <text>if the result is “not available”, then how can there be an “old one”?</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T16:49:32.767100</ts>
    <user>Jasmine</user>
    <text>sounds like maybe what you want is a map + a way to trigger a background refresh ?</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T16:50:00.767500</ts>
    <user>Jasmine</user>
    <text>I’m not sure I would call that a cache</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T16:53:56.767800</ts>
    <user>Darcel</user>
    <text>Is there a plan of releasing the new version of tools.deps.alpha with ’add-lib function? It’s needed to add hotload-dependency functionality to clj-refactor., because otherwise I’m unable to add the tools.deps.alpha using it’s hash.</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T16:57:08.769800</ts>
    <user>Sixta</user>
    <text>&lt;@Jasmine&gt; you're right, I think an atom &amp;amp; a thread is probably good here. My only slight problem is eviction.</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T16:59:58.772000</ts>
    <user>Becki</user>
    <text>core.cache has a protocol. one of the functions is `evict`. maybe you could look at the LRU there and modify it so that evict did not evict but refresh?</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:00:14.772200</ts>
    <user>Clarine</user>
    <text>&lt;@Sixta&gt; I have exactly this problem and solved it with an atom with a map of futures. I need a value for every user of the system. Each user has a future, either running or ready. I do a background refresh, so I don’t throw away the future that’s already done while the new one is running.</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:02:56.773600</ts>
    <user>Clarine</user>
    <text>The problem is that futures don’t have a way to say: on-ready, put yourself in this map and swap out the other future. So I’m dereferencing it in the background, with a timeout. When done (or the timeout expires), I swap the old value.</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:03:18.774000</ts>
    <user>Jasmine</user>
    <text>it needs some more work before it gets added, which is likely not going to happen soon</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:03:18.774200</ts>
    <user>Clarine</user>
    <text>I’m looking into manifold to see if there’s a better way for that last part.</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:03:32.774300</ts>
    <user>Jasmine</user>
    <text>so, no there is no plan currently</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:04:39.775400</ts>
    <user>Vinnie</user>
    <text>&amp;gt; if the result is not available, then the old one is used until it is
i seem to build or want this in every lang or system i work on :joy:</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:04:46.775500</ts>
    <user>Jasmine</user>
    <text>you could give the future the atom and then have it do the swap?</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:05:32.776100</ts>
    <user>Jasmine</user>
    <text>I don’t know the Guava lib well enough to know off-hand if this is covered, but it has a ton of cache variants and the code is very high quality</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:05:58.776600</ts>
    <user>Clarine</user>
    <text>&lt;@Jasmine&gt; then I would need a way for the future to refer to itself</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:06:07.776800</ts>
    <user>Jasmine</user>
    <text>why?</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:06:30.777400</ts>
    <user>Jasmine</user>
    <text>it’s waiting for something - when it’s done waiting, do the work</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:07:00.777800</ts>
    <user>Clarine</user>
    <text>because I store the futures, not the resulting values. if there’s already a future running (and not cancelled), I wait for that one. I could store the resulting values separately in another atom of course, but I still need the state of those futures.</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:16:36.780100</ts>
    <user>Dann</user>
    <text>&lt;@Clarine&gt; a future is effectively a Thread plus try/catch/finally that delivers to a promise</text>
  </message>
  <message conversation_id="344">
    <ts>2019-01-29T17:17:05.780700</ts>
    <user>Dann</user>
    <text>you could make a new version that lets the code in that Thread access the promise directly</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:17:39.781300</ts>
    <user>Dann</user>
    <text>of course a clojure future also does some special var binding boilerplate, but it's a relatively small chunk of code</text>
  </message>
  <message conversation_id="344">
    <ts>2019-01-29T17:18:58.781800</ts>
    <user>Darcel</user>
    <text>May I please take the code from add-lib branch and create a package out of it? At least for some time until the feature lands to tools.deps.alpha</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:21:05.783200</ts>
    <user>Clarine</user>
    <text>&lt;@Dann&gt; so instead of storing the futures, I would store the promises?</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:21:41.783800</ts>
    <user>Dann</user>
    <text>yeah, which I think have the semantics you want - they are deliver-once, and you can tell if they've been delivered too</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:22:02.784400</ts>
    <user>Dann</user>
    <text>maybe you want a pair of promises - one for the thread itself (has this work started) and another for the result (has it completed / what did it return)</text>
  </message>
  <message conversation_id="344">
    <ts>2019-01-29T17:22:41.785300</ts>
    <user>Dann</user>
    <text>I'm a huge fan of delay and promise, you could also use atoms for what they do, but they have the extra guarantee that they never mutate once realized, a one time switch</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:24:54.786200</ts>
    <user>Clarine</user>
    <text>I’ll think about it some more, thanks for the idea.</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:27:08.787000</ts>
    <user>Rosaline</user>
    <text>a pair of promises is almost always a way to get race conditions</text>
  </message>
  <message conversation_id="343">
    <ts>2019-01-29T17:27:31.787600</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/walmartlabs/lacinia/commit/62da37cd04353884a0a9d024402c3d2b80b3306d#diff-614737af318144d5501e3b4cf8abac02&gt;</text>
  </message>
  <message conversation_id="345">
    <ts>2019-01-29T17:53:11.788500</ts>
    <user>Jasmine</user>
    <text>It’s open source… just retain the license and copyright</text>
  </message>
  <message conversation_id="345">
    <ts>2019-01-29T17:54:52.788700</ts>
    <user>Jasmine</user>
    <text>that is, yes :)</text>
  </message>
  <message conversation_id="346">
    <ts>2019-01-29T23:27:43.790700</ts>
    <user>Donetta</user>
    <text>Is there a good way to convert a qualified map into an unqualified one?</text>
  </message>
  <message conversation_id="346">
    <ts>2019-01-29T23:28:22.791300</ts>
    <user>Donetta</user>
    <text>Like, if I want to get some sample data via gen/sample or gen/generate and work on qualified specs, but turn that output into plain unqualified maps?</text>
  </message>
  <message conversation_id="346">
    <ts>2019-01-29T23:30:15.791500</ts>
    <user>Donetta</user>
    <text>None</text>
  </message>
  <message conversation_id="345">
    <ts>2019-01-29T23:43:12.792000</ts>
    <user>Fredda</user>
    <text>None</text>
  </message>
  <message conversation_id="346">
    <ts>2019-01-29T23:48:48.793500</ts>
    <user>Celestine</user>
    <text>If you know you have a flat map, with no nesting, `(reduce-kv (fn [m k v] (assoc m (keyword (name k)) v)) {} my-map)` will probably do. Never mind, just realized you explicitly asked about a nested hash map. But there's an argument for not nesting maps like that...</text>
  </message>
  <message conversation_id="346">
    <ts>2019-01-29T23:50:39.794400</ts>
    <user>Becki</user>
    <text>beware that you can introduce collisions if you have something like `{:database/id 4 :somethingelse/id 6}`</text>
  </message>
  <message conversation_id="345">
    <ts>2019-01-29T23:50:59.794700</ts>
    <user>Celestine</user>
    <text>(indeed)</text>
  </message>
  <message conversation_id="345">
    <ts>2019-01-29T23:58:05.795300</ts>
    <user>Fredda</user>
    <text>yeah, that should probably go in the doc string</text>
  </message>
  <message conversation_id="345">
    <ts>2019-01-30T00:00:17.796600</ts>
    <user>Becki</user>
    <text>also, be aware of keywords in values. `{errors/ui [:error/missing-payer]}` should that become `{ui [:missing-payer]}` or `{ui [:error/missing-payer]}`</text>
  </message>
  <message conversation_id="347">
    <ts>2019-01-30T00:04:36.797600</ts>
    <user>Meagan</user>
    <text>how offended do people feel about the idea of composing server-side “components” (a la component/integrant/mount states) using hiccup?</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T01:51:22.802500</ts>
    <user>Jonah</user>
    <text>Hi, I have a question about `defmulti` and `defmethod` in different namespaces. It seems that if you use `defmethod` in a separate namespace from `defmulti` then something in your app has to require this namespace, so `defmethod` actually runs. Is this true? And if yes, is there a best practice to avoid circular dependency in this case? Can't find the answer in docs or somewhere else...</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:02:20.804100</ts>
    <user>Tammera</user>
    <text>Yeah I believe all ns’es that define `defmethod`s for a `defmulti` must be `require`d for the branches of the multi to be available</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:07:23.807200</ts>
    <user>Jonah</user>
    <text>It does work when you require "branch-namespaces" but you can't require them from the namespace where `defmulti` is, due to a circular dependency. Requiring them elsewhere creates an implicit dependency that will eventually break with some changes.</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:07:39.807500</ts>
    <user>Jonah</user>
    <text>Kinda puzzled how to overcome this.</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:08:53.808600</ts>
    <user>Tammera</user>
    <text>Right, why do you want to use the `defmethod` that you are dynamically extending in the namespace that you are defining it in</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:08:58.808800</ts>
    <user>Tammera</user>
    <text>could you maybe resolve that</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:11:28.810900</ts>
    <user>Jonah</user>
    <text>I have few text formats that I serialize/deserialize to the filesystem. They aren't all defined at this point and will evolve as an application evolves. So, my idea was to define multimethod for every operation and implement it for each format in the separate namespace.</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:13:14.812200</ts>
    <user>Tammera</user>
    <text>right, I am not challenging the use of a multimethod. What I think what could resolve your circular dependency is moving the _definition_ of the multimethod away from its _use_.</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:15:33.813500</ts>
    <user>Jonah</user>
    <text>Yes, but then namespace where I _use_ the multimethod has to require both the definition and the implementation namespaces?</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:16:01.813800</ts>
    <user>Jonah</user>
    <text>or am I missing something?</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:16:49.814800</ts>
    <user>Becki</user>
    <text>i don't think that's actually true. the namespace needs to require the `defmulti` ns but it does not need to require the ns where the `defmethod` is defined. That namespace has to have been required already, but not necessarily here.</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:17:02.815100</ts>
    <user>Tammera</user>
    <text>^right, that is true, thanks for that clarification</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:17:42.815700</ts>
    <user>Becki</user>
    <text>so you could require all of the implementing namespaces in your start up and be assured that they are all ready to go</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:19:57.817500</ts>
    <user>Jonah</user>
    <text>that will solve the problem, I'm just concerned that later someone can remove this "require" because they won't be explicitly used in startup namespace.</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:20:20.818000</ts>
    <user>Jonah</user>
    <text>That what I meant by implicit dependency.</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:20:50.818900</ts>
    <user>Tammera</user>
    <text>Also, I think my suggestion would work, I would have a ns `use` that depends on the namespace `define` + all namespaces `extend`, where each `extend` namespace depends on `define`. I don’t think there is a circular dependency there, but I am lacking some paper to draw it out ^^</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:21:02.819200</ts>
    <user>Jonah</user>
    <text>If there is no better way, I can live with this solution of course.</text>
  </message>
  <message conversation_id="348">
    <ts>2019-01-30T02:24:00.820000</ts>
    <user>Jonah</user>
    <text>Yes, that will work. Thanks, &lt;@Tammera&gt; and &lt;@Becki&gt;</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:50:56.820600</ts>
    <user>Cecil</user>
    <text>hey i have a question about `letfn`</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:51:34.821600</ts>
    <user>Cecil</user>
    <text>as i search around, i knew that `letfn` is for use of function that is not defined yet. (something like mutual recursion)</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:51:59.822200</ts>
    <user>Cecil</user>
    <text>but, if i try mutual recursion with `let`, it perfectly works!</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:52:15.822800</ts>
    <user>Cecil</user>
    <text>why does this work?</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:52:37.823200</ts>
    <user>Cecil</user>
    <text>```
  (let [odd? (fn [n]
               (if (zero? n)
                 false
                 (even? (- n 1))))
        even? (fn [n]
                (if (zero? n)
                  true
                  (odd? (- n 1))))]
    (odd? 5))
```</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:53:54.825500</ts>
    <user>Cecil</user>
    <text>so if `letfn` supports ahead-of-defintion use of function and `let` doesn't that code shouldn't work</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:54:04.825800</ts>
    <user>Diamond</user>
    <text>Cause the first `even?` is `clojure.core/even?`.</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:54:56.827300</ts>
    <user>Cecil</user>
    <text>ahh</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:55:01.827600</ts>
    <user>Cecil</user>
    <text>i got it</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:55:11.827900</ts>
    <user>Diamond</user>
    <text>Call the bindings f and g and it will :bomb:</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:56:08.829000</ts>
    <user>Cecil</user>
    <text>thanks</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:56:54.830000</ts>
    <user>Cecil</user>
    <text>btw, then `letfn` doesn't use existing function if there is definition in it?</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:57:47.830600</ts>
    <user>Diamond</user>
    <text>Only one way to find out. :smile:</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:58:45.831000</ts>
    <user>Diamond</user>
    <text>Night! :sleeping:</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T03:59:27.831400</ts>
    <user>Cecil</user>
    <text>gonna play with repl :slightly_smiling_face:</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T04:01:01.831900</ts>
    <user>Cecil</user>
    <text>yup it ignores existing function</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T04:01:06.832100</ts>
    <user>Cecil</user>
    <text>```
(letfn
          [(odd? [x] (even? x))
           (even? [x] true)]
        (odd? 5))
;= true
```</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T04:01:54.832500</ts>
    <user>Cecil</user>
    <text>it has weird naming but nvm</text>
  </message>
  <message conversation_id="350">
    <ts>2019-01-30T05:15:35.837300</ts>
    <user>Jalisa</user>
    <text>Hi. I am looking for an elegant way to construct a map based on multiple conditions. This is what I have: ```(defn build-foo []
  (let [m {}
        m (if cond-1?
            (merge m {:foo 1 :bar 2})
            m)
        m (if cond-2?
            (merge m {:x 1 :y 2})
            m)]
        ;; continue with cond-3 ... cond-n
    m))```</text>
  </message>
  <message conversation_id="350">
    <ts>2019-01-30T05:17:44.837700</ts>
    <user>Tammera</user>
    <text>(use three backticks to format code spanning multiple lines)</text>
  </message>
  <message conversation_id="350">
    <ts>2019-01-30T05:18:55.838300</ts>
    <user>Harris</user>
    <text>`(merge m (when cond1? {:foo 1 :bar 2}) (when cond-2? {:x 1 :y 2}))`</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T05:31:51.839100</ts>
    <user>Min</user>
    <text>`(cond-&amp;gt; m (foo? x) (assoc ....) (bar? y) (assoc ..))` or `(cond-&amp;gt; m (foo? x) (conj ....) (bar? y) (conj ..))`</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T05:32:59.839800</ts>
    <user>Min</user>
    <text>imho merging with (only) 2 args is quite often a smell, especially when you are sure the first arg is a map (non nil)</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T05:54:27.842000</ts>
    <user>Epifania</user>
    <text>Hm, so it seems `clojure.trace/trace-ns` doesn't accept a namespace as a string. I currently have a list of namespaces in a list with strings. I would like to pass them to `trace-ns` inside a `doseq`, but always get "No namespace: n found" (`n` is the name of my variable, seems `trace-ns` doesn't read the value of the var but instead the symbol itself)</text>
  </message>
  <message conversation_id="349">
    <ts>2019-01-30T05:56:37.842500</ts>
    <user>Epifania</user>
    <text>Guessing I'm looking for the opposite version of `ns-name`</text>
  </message>
  <message conversation_id="351">
    <ts>2019-01-30T08:00:51.842900</ts>
    <user>Cherise</user>
    <text>```
user=&amp;gt; (find-ns (symbol "user"))
#object[clojure.lang.Namespace 0x386f0da3 "user"]
user=&amp;gt; *ns*
#object[clojure.lang.Namespace 0x386f0da3 "user"]
```</text>
  </message>
  <message conversation_id="351">
    <ts>2019-01-30T08:01:26.843100</ts>
    <user>Epifania</user>
    <text>Many thanks. Will try it out in a bit and report back</text>
  </message>
  <message conversation_id="351">
    <ts>2019-01-30T08:03:32.843400</ts>
    <user>Cherise</user>
    <text>So it probably works when you map `symbol` over your list of strings

`(map symbol namespaces)`</text>
  </message>
  <message conversation_id="352">
    <ts>2019-01-30T08:28:00.844900</ts>
    <user>Deloise</user>
    <text>hi folks, I have a clojure project that has been packaged with `lein jar`, how do I run it? :smile: I've only ever used `lein uberjar`</text>
  </message>
  <message conversation_id="352">
    <ts>2019-01-30T08:47:08.847900</ts>
    <user>Jasmine</user>
    <text>are you running it with lein or separately? if the former, lein run probably does the right thing. if the latter, you need to include the jar and all transitive dependency jars on the java classpath, then run the main class. `java -cp my.jar:foo.jar:bar.jar my.mainns`</text>
  </message>
  <message conversation_id="352">
    <ts>2019-01-30T08:56:57.850400</ts>
    <user>Deloise</user>
    <text>I am using lein. Does `lein run` use java classes in `:java-source-paths`? I was thinking the instruction to use `lein jar` (from the creator of the project) was to also include a separate java class.</text>
  </message>
  <message conversation_id="352">
    <ts>2019-01-30T09:00:13.851900</ts>
    <user>Jasmine</user>
    <text>I think lein run includes the class output target dir in its path and Clojure will use the classes if it finds them (before the .clj)</text>
  </message>
  <message conversation_id="352">
    <ts>2019-01-30T09:00:28.852100</ts>
    <user>Jasmine</user>
    <text>oh, sorry you asked about java classes</text>
  </message>
  <message conversation_id="352">
    <ts>2019-01-30T09:00:48.852600</ts>
    <user>Jasmine</user>
    <text>I would expect it to only find java classes in the target output, not in java source paths</text>
  </message>
  <message conversation_id="352">
    <ts>2019-01-30T09:01:20.853400</ts>
    <user>Deloise</user>
    <text>I've managed to get the project running with `lein repl`</text>
  </message>
  <message conversation_id="352">
    <ts>2019-01-30T09:01:25.853600</ts>
    <user>Jasmine</user>
    <text>(but don’t take my word for it, that’s just my expectation)</text>
  </message>
  <message conversation_id="353">
    <ts>2019-01-30T11:29:07.855100</ts>
    <user>Nova</user>
    <text>I have a vector of hash-maps that I wish to namespace qualify, and I'm curious about how to do this idiomatically (`(map #(reduce-kv ...))`?), and why the first example here does not work:

```
(reduce-kv #(assoc %1 #:ns{%2 %3}) {}  {:k "v"}) ;; =&amp;gt; CompilerException java.lang.RuntimeException: No such namespace: ns etc..

(reduce-kv #(assoc %1 :ns/%2 %3) {}  {:k "v"}) ;; =&amp;gt; #:ns{:%2 "v"}

(reduce-kv #(assoc %1 (keyword "ns" (name %2)) %3) {}  {:k "v"}) ;; =&amp;gt; #:ns{:k "v"}
```</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T11:51:47.856300</ts>
    <user>Jasmine</user>
    <text>the #:ns{} syntax is a literal map syntax. that is, it’s not a property of the map, it’s just a syntactic alternative when writing literal maps.</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T11:52:21.856800</ts>
    <user>Jasmine</user>
    <text>similarly, :ns/%2 is a keyword whose name is literally %2</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T11:52:30.857100</ts>
    <user>Jasmine</user>
    <text>both of these are things happening at read time, with no eval</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T11:52:58.857400</ts>
    <user>Jasmine</user>
    <text>the last one seems like a fine solution</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T11:54:32.858700</ts>
    <user>Jasmine</user>
    <text>there are some common utility functions (often called `map-keys` or `map-vals`) that apply a function to all of the keys or vals of a map and that might be an easier way to think about it. You can find those functions in many of the utility libs (medley, useful, etc)</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T11:55:28.859300</ts>
    <user>Jasmine</user>
    <text>something like `(map-keys {:k "v"} #(keyword "ns" (name %)))`</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T11:56:04.859500</ts>
    <user>Nova</user>
    <text>excellent, thank you</text>
  </message>
  <message conversation_id="355">
    <ts>2019-01-30T12:22:42.862500</ts>
    <user>Arline</user>
    <text>Is there any way to get a list of loadable classes on the classpath easily without relying on a library like `compliment`? The code in `compliment` is surprisingly complicated and this feels like something that the JVM should be able to do natively via the Classloader interfaces or something?</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T12:27:41.863100</ts>
    <user>Jasmine</user>
    <text>classloaders generally don’t have a notion of what *can* be loaded, just what has been loaded</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T12:29:11.863900</ts>
    <user>Jasmine</user>
    <text>the classloader interface intentionally abstracts the notion of “where classes come from” and they could come over the network where there is no way to enumerate them all</text>
  </message>
  <message conversation_id="354">
    <ts>2019-01-30T12:29:23.864200</ts>
    <user>Jasmine</user>
    <text>or out of a database (I did one of those once)</text>
  </message>
  <message conversation_id="356">
    <ts>2019-01-30T13:20:54.864700</ts>
    <user>Cherise</user>
    <text>E.g., &lt;https://weavejester.github.io/medley/medley.core.html&gt;</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:24:26.867600</ts>
    <user>Floria</user>
    <text>Hi all. I have a problem in my application. Some sort of classloader memory leak. I see that amount of classes is constantly increasing and heap dump is dominated by entries like `clojure.core$eval100009` with no instances. How can I figureout what is generating this classes?</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:29:14.868000</ts>
    <user>Rosaline</user>
    <text>you are calling eval in a tight loop somewhere</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:31:41.868300</ts>
    <user>Floria</user>
    <text>Well I guess I do :slightly_smiling_face:</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:32:26.869300</ts>
    <user>Floria</user>
    <text>but not explicitly apparenlty. My code have only one call to eval and it is not in any sort of tight loop...</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:33:01.870500</ts>
    <user>Floria</user>
    <text>that is why I ask "how to figureout what is generating those"</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:33:06.870700</ts>
    <user>Rosaline</user>
    <text>you are running that code over and over again more often then you think you are</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:33:53.871500</ts>
    <user>Floria</user>
    <text>I doubt that this is in my code, but I'll double check...</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:35:02.873000</ts>
    <user>Dann</user>
    <text>I would drop any library that uses eval outside some sort of start-up DI type scenario, runtime eval is a code smell</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:35:41.873500</ts>
    <user>Floria</user>
    <text>This is easier said then done :slightly_smiling_face: how to detect which library?</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:36:21.874600</ts>
    <user>Dann</user>
    <text>you can (for debugging / local purposes only) replace clojure.core/eval with a function that logs stats about usage (including stack trace) then calls the real eval</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:36:34.874900</ts>
    <user>Rosaline</user>
    <text>libraries are basically garbage, so just get rid of them all</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:36:37.875200</ts>
    <user>Dann</user>
    <text>haha</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:37:26.875600</ts>
    <user>Floria</user>
    <text>nice advice, cant follow unfortunately :slightly_smiling_face:</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:38:09.876600</ts>
    <user>Rosaline</user>
    <text>just start naming off the libraries you use until we yell bingo</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:38:11.876700</ts>
    <user>Dann</user>
    <text>regarding _how_ to replace eval with logging version, `alter-var-root` is pretty straightforward to use</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:39:32.877900</ts>
    <user>Floria</user>
    <text>What if this eval is binded inside some function? Will alter-var-root help?</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:40:02.878700</ts>
    <user>Rosaline</user>
    <text>but seriously, I would look at your own use of eval</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:40:08.878900</ts>
    <user>Dann</user>
    <text>yes, functions compile to code that looks up vars - the gotcha is if eval was provided as an arg to a first class function - which is rare</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:40:44.879500</ts>
    <user>Dann</user>
    <text>agreed with &lt;@Rosaline&gt; and logging eval usage would expose that this is the issue as well</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:41:57.880400</ts>
    <user>Floria</user>
    <text>I doublechecked my usage of eval - it only happen once during initial app compilation</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:42:08.880600</ts>
    <user>Jasmine</user>
    <text>and a caveat that Clojure core itself is direct linked compiled so calls within core won’t see changes from alter-var-root</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:42:51.880900</ts>
    <user>Dann</user>
    <text>```(ins)user=&amp;gt; (alter-var-root #'eval (fn [v] (fn [&amp;amp; args] (println "calling eval on" (pr-str args)) (apply v args))))
#object[user$eval151$fn__152$fn__153 0x158a3b2e "user$eval151$fn__152$fn__153@158a3b2e"]
(ins)user=&amp;gt; (eval '(+ 1 1))
calling eval on ((+ 1 1))
2
```</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:43:26.881800</ts>
    <user>Dann</user>
    <text>&lt;@Jasmine&gt; true but I think we can trust that clojure.core isn't using eval in a sloppy way</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:43:53.882300</ts>
    <user>Floria</user>
    <text>&lt;@Dann&gt; let me try that</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:44:01.882500</ts>
    <user>Rosaline</user>
    <text>I dunno, maybe he is using the socket repl as an rpc</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:44:06.882700</ts>
    <user>Jasmine</user>
    <text>Java profilers can also help you with stuff like this (YourKit, JProfiler, etc)</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:44:29.882900</ts>
    <user>Floria</user>
    <text>Got it!</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:49:20.884400</ts>
    <user>Floria</user>
    <text>I found what is causing my issue. Thanks &lt;@Dann&gt;. Now have to think how to avoid that. Btw culprit is dynamic sql generator from yesql</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:50:42.885400</ts>
    <user>Dann</user>
    <text>I would be surprised if whatever yesql is doing couldn't be replaced by a higher order function rather than using eval, I'm disappointed to hear it's doing things that way</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:51:47.886600</ts>
    <user>Dann</user>
    <text>also, hugsql is newer and supposedly addresses some design issues from yesql</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:51:56.886800</ts>
    <user>Dann</user>
    <text>(but works similarly)</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:53:29.888800</ts>
    <user>Dann</user>
    <text>even yesql's readme mentions hugsql and the fact that hugsql is actively maintained unlike yesql</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T13:55:37.890900</ts>
    <user>Floria</user>
    <text>Well, problem is little bit deeper than yesql. I attached template engine (comb) to yesql that give me dynamic sql generation (yesql can't do that out of the box) and this lib is actually main culprit. I like this feature a lot, though I need to use it more carefully because of this problem... Hugsql is way too much rewrite for me, maybe I'll consider this later</text>
  </message>
  <message conversation_id="358">
    <ts>2019-01-30T14:36:40.892300</ts>
    <user>Arline</user>
    <text>&lt;@Jasmine&gt; Ah that's interesting. I guess that's why `compliment` has all the code it has for finding jars and class directories and such and just lists them?</text>
  </message>
  <message conversation_id="357">
    <ts>2019-01-30T15:38:28.893900</ts>
    <user>Georgine</user>
    <text>I spent way too much time getting lumo working on an older server without testing the clojure command to run scripts. It doesn't even take a second, and I can use all the java libs... Slow start-up time is barely noticeable if you aren't using lein and not too many deps.</text>
  </message>
  <message conversation_id="359">
    <ts>2019-01-30T22:01:43.895400</ts>
    <user>Donetta</user>
    <text>is there an existing library for converting a swagger.json file or json schema file into spec definitions?  I know spec-tools supports spec to both formats, but I'm more interested in the opposite direction</text>
  </message>
  <message conversation_id="360">
    <ts>2019-01-31T04:47:05.896900</ts>
    <user>Alia</user>
    <text>Hello, does anyone know of a way to decode php laravel sessions in clojure?</text>
  </message>
  <message conversation_id="360">
    <ts>2019-01-31T04:54:22.897700</ts>
    <user>Brent</user>
    <text>FYI I couldn't find any documentation (outside of the clojuresque api docs :)) on how to use prepl so I wrote some &lt;https://blog.jakubholy.net/how-to-use-clojure-1.10-prepl/&gt;</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T06:28:52.898000</ts>
    <user>Toby</user>
    <text>maybe walkable? &lt;http://walkable.gitlab.io/&gt;</text>
  </message>
  <message conversation_id="362">
    <ts>2019-01-31T09:17:33.898900</ts>
    <user>Zenaida</user>
    <text>Hi folks! My current task is to profile a Clojure app (with Aleph and core.async) and after googling for some time it seems that is not an easy task like in Golang... I need some metrics like "how many goroutines are running", memory, and cpu. Does anyone know a way to get these metrics?</text>
  </message>
  <message conversation_id="362">
    <ts>2019-01-31T10:00:25.901600</ts>
    <user>Henry</user>
    <text>&lt;@Zenaida&gt; I don't know about any tools to get stats for core.async specifically, but for memory and CPU profiling there's the usual JVM tools like &lt;https://visualvm.github.io/&gt;</text>
  </message>
  <message conversation_id="362">
    <ts>2019-01-31T10:48:41.902600</ts>
    <user>Sherril</user>
    <text>&lt;@Zenaida&gt; also aleph exposes metrics of its thread-pool</text>
  </message>
  <message conversation_id="362">
    <ts>2019-01-31T11:01:06.902800</ts>
    <user>Zenaida</user>
    <text>Thanks! I will search for that now</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:32:39.904400</ts>
    <user>Clarine</user>
    <text>ehm, I used metadata on a fn like this:
```
(defn ^String foo ([] "") ([a] (str a)))
(set! *warn-on-reflection* true)
user=&amp;gt; (.length (foo))
0
```
Apparently that works too, although I can’t find it in the docs like this.</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:33:22.904700</ts>
    <user>Jasmine</user>
    <text>you’re putting it on the var there, not the fn</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:33:42.905000</ts>
    <user>Clarine</user>
    <text>why don’t I get a reflection warning then?</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:33:52.905300</ts>
    <user>Jasmine</user>
    <text>because it’s using the var meta</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:33:59.905500</ts>
    <user>Jasmine</user>
    <text>it’s not reflecting</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:34:11.905900</ts>
    <user>Harris</user>
    <text>non primitive return type hints work on the var too</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:34:17.906100</ts>
    <user>Clarine</user>
    <text>so this is cool, unless you use direct linking?</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:34:55.906600</ts>
    <user>Jasmine</user>
    <text>your use of “too” above seems like there is some prior conversation this is in reference to, but I haven’t read that</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:35:10.907000</ts>
    <user>Jasmine</user>
    <text>just mentioning that in case there is context I should be aware of</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:35:29.907400</ts>
    <user>Clarine</user>
    <text>AFAIK there isn’t a prior conversation about this</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:35:57.907900</ts>
    <user>Jasmine</user>
    <text>so “too” above implies there is something else that works, but not sure what that is</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:36:14.908700</ts>
    <user>Harris</user>
    <text>I was referring to type hints on the argvec</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:36:27.909200</ts>
    <user>Clarine</user>
    <text>to summarize, should I change my type hint, or does this work correctly?</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:36:29.909300</ts>
    <user>Jasmine</user>
    <text>not your “too”, &lt;@Clarine&gt;’s “too”</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:36:32.909500</ts>
    <user>Harris</user>
    <text>ah :)</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:36:42.909900</ts>
    <user>Harris</user>
    <text>we need name qualified words in english</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:36:49.910300</ts>
    <user>Harris</user>
    <text>borkdude/too</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:37:03.910700</ts>
    <user>Clarine</user>
    <text>oooh, sorry :slightly_smiling_face: I mean instead of putting the return type hint on each arity</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:37:14.911000</ts>
    <user>Harris</user>
    <text>it works, I hate it</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:37:27.911500</ts>
    <user>Harris</user>
    <text>it's fine as is, but it makes me sad</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:37:32.911700</ts>
    <user>Jasmine</user>
    <text>yeah, it works, but I agree with bronsa that putting it on the ret type is better</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:37:43.912000</ts>
    <user>Clarine</user>
    <text>so I need to repeat the type hint for each arity?</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:37:51.912300</ts>
    <user>Clarine</user>
    <text>and why you sad?</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:37:51.912400</ts>
    <user>Jasmine</user>
    <text>yes</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:37:59.912900</ts>
    <user>Jasmine</user>
    <text>not every arity has to have the same return type</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:38:13.913500</ts>
    <user>Clarine</user>
    <text>no problem, I’ll do it, just want to know why</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:38:19.913700</ts>
    <user>Jasmine</user>
    <text>(not that I would recommend having different return types)</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:38:39.914300</ts>
    <user>Harris</user>
    <text>it's just a matter of consistency, tagging return types on the argvec is guaranteed to work with any legal type hint and Do The Right Thing</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:38:51.914900</ts>
    <user>Harris</user>
    <text>there is a string of cases where tagging return types on the var doesn't do what you want, silently</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:38:53.915000</ts>
    <user>Jasmine</user>
    <text>I think it’s also the tightest scoping to your intent</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:38:58.915200</ts>
    <user>Harris</user>
    <text>yup</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:39:37.915700</ts>
    <user>Clarine</user>
    <text>ok - thanks `{::keys [:bronsa/too :alexmiller/too]}`</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:43:09.916100</ts>
    <user>Jasmine</user>
    <text>Syntax error macroexpanding clojure.core/let at (REPL:1:1).</text>
  </message>
  <message conversation_id="363">
    <ts>2019-01-31T11:50:53.916700</ts>
    <user>Harris</user>
    <text>who said that's code, it's just data bruh</text>
  </message>
  <message conversation_id="361">
    <ts>2019-01-31T11:56:42.917000</ts>
    <user>Clarine</user>
    <text>it’s tha core specz yo: &lt;https://dev.clojure.org/jira/browse/CLJ-2473&gt;</text>
  </message>
  <message conversation_id="364">
    <ts>2019-01-31T13:03:42.918100</ts>
    <user>Melania</user>
    <text>how can I `spit :append` below whatever text already exists in a file?</text>
  </message>
  <message conversation_id="364">
    <ts>2019-01-31T13:07:50.918300</ts>
    <user>Fae</user>
    <text>&lt;@Melania&gt; &lt;https://clojuredocs.org/clojure.core/spit#example-542692c7c026201cdc326975&gt;</text>
  </message>
  <message conversation_id="364">
    <ts>2019-01-31T13:08:24.918600</ts>
    <user>Melania</user>
    <text>&lt;@Fae&gt; thanks, interesting</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:29:28.919600</ts>
    <user>Arnoldo</user>
    <text>Anybody aware of a walk-through describing how reagent components that deref an atom register themselves as watching that atom?</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:33:02.920300</ts>
    <user>Dann</user>
    <text>&lt;@Arnoldo&gt; my memory is that r/atom deref itself does the registration, since the deref happens inside the component data literal</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:33:24.920700</ts>
    <user>Dann</user>
    <text>but I haven't touched reagent in ~year</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:34:40.921000</ts>
    <user>Dann</user>
    <text>&lt;@Arnoldo&gt; the magic is all here &lt;https://github.com/reagent-project/reagent/blob/master/src/reagent/ratom.cljs#L43&gt;</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:35:25.921700</ts>
    <user>Dann</user>
    <text>I think this is the line that literally answers your question: when you deref an ratom, your context is captured as a watcher &lt;https://github.com/reagent-project/reagent/blob/master/src/reagent/ratom.cljs#L145&gt;</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:36:43.922300</ts>
    <user>Dann</user>
    <text>or, more precisely: no walkthrough that I know of, but the code isn't that hard to read</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:40:18.922700</ts>
    <user>Arnoldo</user>
    <text>&lt;@Dann&gt; thanks... yeah you're right I shouldn't be lazy and just read the source</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:42:25.923200</ts>
    <user>Dann</user>
    <text>well, hopefully at least knowing the precise place the behavior is defined is a good start</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:42:48.923700</ts>
    <user>Dann</user>
    <text>I could imagine it eg. being part of the mounting code or the component loading code</text>
  </message>
  <message conversation_id="365">
    <ts>2019-01-31T13:42:49.923800</ts>
    <user>Arnoldo</user>
    <text>definitely saved me some trouble, appreciate it</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:33:06.926800</ts>
    <user>Isa</user>
    <text>&lt;https://github.com/seancorfield/depstar&gt;
&lt;https://github.com/juxt/pack.alpha&gt;
&lt;https://github.com/luchiniatwork/cambada&gt;

I found 3 uberjar maker for deps.edn with `clj`. Do we need 3 as community? I always like simplicity about Clojure tools and making choices. Which one is recommended?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:33:34.927000</ts>
    <user>Clarine</user>
    <text>if you want simplicity, make no uberjar :stuck_out_tongue_winking_eye:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:34:58.927500</ts>
    <user>Isa</user>
    <text>What then? I want it for Docker image, so I don’t want to share source code</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:35:22.927800</ts>
    <user>Clarine</user>
    <text>just mount the source code?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:35:57.928600</ts>
    <user>Isa</user>
    <text>&amp;gt; I want it for Docker image, so I don’t want to share source code
:wink:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:36:00.928800</ts>
    <user>Clarine</user>
    <text>oh you DON’T want to share the source code</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:36:05.929100</ts>
    <user>Clarine</user>
    <text>sorry :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:36:22.929900</ts>
    <user>Clarine</user>
    <text>so you want to AOT it and publish without the .clj files?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:36:24.930000</ts>
    <user>Isa</user>
    <text>no problem :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:36:34.930300</ts>
    <user>Isa</user>
    <text>yes</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:37:02.931200</ts>
    <user>Rosaline</user>
    <text>I believe most of that tooling just zips up the source code and calls it a jar</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:37:11.931400</ts>
    <user>Isa</user>
    <text>It was working perfect with lein, but I am moving with all new stuff to deps.edn</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:37:28.931700</ts>
    <user>Isa</user>
    <text>hmm</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:37:35.932000</ts>
    <user>Clarine</user>
    <text>I’m still using lein to deploy for some projects, next to clj, I guess you could use both</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:38:37.933200</ts>
    <user>Rosaline</user>
    <text>the clj tooling has been explicitly called "not a build tool" over and over again, and aot compiling seems like a clear cut build step (of course so does building jars)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:39:35.934400</ts>
    <user>Rosaline</user>
    <text>the pack.alpha has some suggestions for adding aot compilation on top of it, but it seems pretty adhoc</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:40:23.935300</ts>
    <user>Isa</user>
    <text>Hmm I can use lein only to build jar from deps.edn, but I feel strange about that.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:41:15.936400</ts>
    <user>Rosaline</user>
    <text>cambada actually defaults to aot compiling everything because it larger looks it is for building graal-native stuff, which requires aot</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:41:44.936900</ts>
    <user>Becki</user>
    <text>no worries about that. there's a lein plugin to gather deps from deps.edn so you can just use lein for build tooling and deps.edn for what you use it for now.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:42:08.937600</ts>
    <user>Isa</user>
    <text>&lt;@Becki&gt; sure I know that plugin</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:42:47.938700</ts>
    <user>Rosaline</user>
    <text>it just seems like, if you have some weird corner case (building aot jars) and it is well served with lein, why make the change to clj?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:43:35.940100</ts>
    <user>Isa</user>
    <text>I like clj more than lein :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:43:37.940300</ts>
    <user>Becki</user>
    <text>i understand lein and deps.edn use subtly different dependency resolution so i'm not sure that your built artifact is guaranteed to reflect what you developed. Need to find out what that plugin does, if it resolves everything in the way tools.deps.alpha would do (and i suspect this is what it does)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:44:15.940900</ts>
    <user>Isa</user>
    <text>And clj solve other corner cases easy like git dependency or local folder dependency</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:44:35.941700</ts>
    <user>Celestine</user>
    <text>Why, specifically, do you not want a JAR containing `.clj` source files? That's how we package everything for production deployment at work.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:44:47.942200</ts>
    <user>Epifania</user>
    <text>distributing paid binaries?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:45:06.943200</ts>
    <user>Epifania</user>
    <text>(I'm not doing that so no idea really, just guessing)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:45:15.943700</ts>
    <user>Clarine</user>
    <text>like Datomic</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:45:17.944000</ts>
    <user>Celestine</user>
    <text>(we use my fork of `depstar` to build uberjars from source, and run them with `java -cp path/to/the.jar clojure.main -m entry.point ...` in production)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:45:24.944200</ts>
    <user>Rosaline</user>
    <text>but you have to ask yourself, what are you trying to protect against</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:45:35.944700</ts>
    <user>Isa</user>
    <text>for example security reasons and not free software</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:45:42.945000</ts>
    <user>Rosaline</user>
    <text>like, jvm bytecode is super high level and easy to decompile anyway</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:45:54.945400</ts>
    <user>Celestine</user>
    <text>Folks can always ... yeah, what &lt;@Rosaline&gt; said...</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:46:12.946300</ts>
    <user>Becki</user>
    <text>bronsa built a pretty good decompiler from class files to clj in addition to the classfile -&amp;gt; java decompilers</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:46:40.947300</ts>
    <user>Isa</user>
    <text>sure, but decompile Clojure is probably much more difficult to debug, than Clojure code</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:46:46.947600</ts>
    <user>Celestine</user>
    <text>There's no security provided by AOT compiling Clojure code.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:46:52.947800</ts>
    <user>Celestine</user>
    <text>(or compiling Java code)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:47:17.948500</ts>
    <user>Rosaline</user>
    <text>&lt;https://www.youtube.com/watch?v=2SGFeegEt9E&gt;</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:47:21.948700</ts>
    <user>Isa</user>
    <text>I know, just sharing source of the code sounds risky for me and second reason: not all code is for free :wink:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:47:43.949100</ts>
    <user>Clarine</user>
    <text>&lt;@Isa&gt; with who are you doing to share it?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:48:26.950100</ts>
    <user>Rosaline</user>
    <text>but, I mean, plenty of not free code is distributed everyday, right? that is what a license agreement is for</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:48:30.950500</ts>
    <user>Isa</user>
    <text>I don’t want to go deep into security topic, that was not the point of my question :stuck_out_tongue:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:48:42.951000</ts>
    <user>Celestine</user>
    <text>Software licensing is ... yeah, dammit, what &lt;@Rosaline&gt; said! (again)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:48:48.951200</ts>
    <user>Rosaline</user>
    <text>I dunno, I mean it is standard industry practice and whatever, but it is so silly</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:49:23.951700</ts>
    <user>Rosaline</user>
    <text>&lt;https://www.microsoft.com/en-us/sharedsource/&gt;</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:49:30.952100</ts>
    <user>Isa</user>
    <text>then you could make everything public :wink: For example source code of bank systems.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:49:50.953200</ts>
    <user>Isa</user>
    <text>So I can agree only partially with you</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:49:50.953300</ts>
    <user>Rosaline</user>
    <text>the idea that not giving out the source code is some kind of barrier is silly</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:50:15.953900</ts>
    <user>Rosaline</user>
    <text>banks absolutely should be able to publish their source code</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:50:26.954400</ts>
    <user>Rosaline</user>
    <text>why not?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:50:32.954800</ts>
    <user>Jasmine</user>
    <text>next thing, you’ll want the source code for voting machines</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:50:36.954900</ts>
    <user>Dann</user>
    <text>I'm sure somebody out there has a Classloader implementation that loads encrypted resources based on a key that needs to be present at runtime, I bet it's a pain to actually use though</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:50:49.955600</ts>
    <user>Rosaline</user>
    <text>linux is insecure because its source code is publicly available</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:50:54.955800</ts>
    <user>Rosaline</user>
    <text>qed</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:51:11.956300</ts>
    <user>Isa</user>
    <text>I am afraid if bank will publish they source code many people will lose they money :wink:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:51:26.957000</ts>
    <user>Jasmine</user>
    <text>don’t tell anyone, but banks use a lot of open source software</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:51:29.957200</ts>
    <user>Rosaline</user>
    <text>&lt;@Dann&gt; which is a key distribution problem not a source code problem</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:52:00.958400</ts>
    <user>Rosaline</user>
    <text>&lt;@Isa&gt; that is based on a deeply flawed understanding of the basis of computer security</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:52:02.958500</ts>
    <user>Dann</user>
    <text>worse than that, they use fundamentally insecure things like FTP</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:52:11.958900</ts>
    <user>Dann</user>
    <text>they use legal means to fix the ensuing problems</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:52:57.959600</ts>
    <user>Marlyn</user>
    <text>this is a neat idea</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:53:26.960300</ts>
    <user>Isa</user>
    <text>that is why we have distributions like `alpine`</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:53:28.960500</ts>
    <user>Rosaline</user>
    <text>if you look at crypto these days, no one wants to use a crypto system that relies on the implementation being secret, only on the keys being secret, they want everyone to know the implementation</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:53:53.960600</ts>
    <user>Rosaline</user>
    <text>what does that even mean?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:54:30.961200</ts>
    <user>Isa</user>
    <text>&lt;https://alpinelinux.org&gt;</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:55:06.961600</ts>
    <user>Rosaline</user>
    <text>I know what alpine linux is, I just don't see how it anyway addresses my point</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:55:32.962300</ts>
    <user>Rosaline</user>
    <text>alpine linux is insecure because the source code is publicly available</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:55:37.962600</ts>
    <user>Isa</user>
    <text>So do you want to say me you publish source code of your all projects? Free and pay? I don’t believe.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:56:05.963400</ts>
    <user>Clarine</user>
    <text>&lt;@Isa&gt; there’s a difference between a business model and security</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:56:21.964200</ts>
    <user>Isa</user>
    <text>&lt;@Rosaline&gt; blockchain idea is to be public. It is different topic.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:56:30.964500</ts>
    <user>Rosaline</user>
    <text>legally I am unable to publish the source code to the stuff I do for pay because the rights are not mine</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:56:54.965300</ts>
    <user>Rosaline</user>
    <text>&lt;@Isa&gt; by crypto I mean "cryptography" not digital ponzi schemes</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:57:30.966400</ts>
    <user>Isa</user>
    <text>I am sure there is dependency between code publicity and number of trying hack. But it is besides of our topic.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:58:48.967400</ts>
    <user>Rosaline</user>
    <text>there are reasons not to provide source code, but if you put security on that list you have failed to secure anything</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T14:59:37.967500</ts>
    <user>Isa</user>
    <text>I mean because code is public and everybody know what system cointain, we needs solutions like alpine</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:00:33.968300</ts>
    <user>Isa</user>
    <text>I believe it reduce probability. Not making system secure. Just reduce attention and make things harder to hack.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:01:16.968900</ts>
    <user>Rosaline</user>
    <text>&lt;https://en.wikipedia.org/wiki/Security_through_obscurity&gt;</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:01:29.969500</ts>
    <user>Isa</user>
    <text>But things are different for very popular public projects where security start to go on higher level.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:01:29.969600</ts>
    <user>Rosaline</user>
    <text>"Security experts have rejected this view as far back as 1851"</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:01:52.970200</ts>
    <user>Meagan</user>
    <text>I think it's pretty proven-out that open vs closed source doesn't have much bearing on security</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:02:04.970500</ts>
    <user>Meagan</user>
    <text>usually people want to keep their source closed for business reasons</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:02:25.971000</ts>
    <user>Meagan</user>
    <text>i.e. I don't want a competitor to steal my codez</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:02:55.971400</ts>
    <user>Isa</user>
    <text>Anyway business reasons are enough to do it</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:03:16.971800</ts>
    <user>Meagan</user>
    <text>but it's kinda silly, because that's what licensing and legal teams are for :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:03:33.972300</ts>
    <user>Meagan</user>
    <text>it's just putting a barrier in place. it's fairly easy to knock down</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:04:07.972700</ts>
    <user>Isa</user>
    <text>So whole world is silly doing that :wink:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:05:15.972900</ts>
    <user>Meagan</user>
    <text>plenty of businesses are based around JS applications that everyone downloads the source for ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:08:17.974500</ts>
    <user>Isa</user>
    <text>Why did you make depstar instead of use &lt;https://github.com/juxt/pack.alpha&gt; or &lt;https://github.com/luchiniatwork/cambada&gt; ?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:08:40.975400</ts>
    <user>Meagan</user>
    <text>anyway, not saying that everyone _should_ make their code publicly available. but that going to _great lengths_ to obfuscate it is probably not worth the time/money</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:10:12.977400</ts>
    <user>Meagan</user>
    <text>AOT is great for perf if you need it. as obfuscation from a business/security perspective, it's not that great and in the case of Clojure can be work to make sure all code deals with it well</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:11:44.978000</ts>
    <user>Celestine</user>
    <text>AOT is great for _startup time_ -- not performance.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:12:01.978400</ts>
    <user>Meagan</user>
    <text>fair!</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:12:52.979800</ts>
    <user>Celestine</user>
    <text>There is no difference in performance since Clojure source code is compiled when it is loaded anyway and the JVM will do its JIT thing over time as the application runs -- AOT just saves that initial compile time on load.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:13:21.980500</ts>
    <user>Clarine</user>
    <text>yeah, considering that we’re doing AOT for each deploy, it kind of defeats the purpose (you only benefit from it once) - except that we maybe have a little less downtime between deploys</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:14:21.981600</ts>
    <user>Celestine</user>
    <text>For us, the biggest chunk of startup time is New Relic's instrumentation agent processing all of the classes as they load. The difference between AOT and non-AOT for us is noticeable but relatively small in comparison.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:15:36.981700</ts>
    <user>Celestine</user>
    <text>Because `depstar` does what I want and is nice and minimal. And &lt;@Marlyn&gt; made `depstar`. I just forked it, fixed some bugs, and added the "thin JAR" creation feature.</text>
  </message>
  <message conversation_id="367">
    <ts>2019-01-31T15:15:54.981900</ts>
    <user>Celestine</user>
    <text>Also, I'm pretty sure Cambada didn't exist when `depstar` was created?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:16:23.982200</ts>
    <user>Isa</user>
    <text>not always true, if you run app in kubernetes to do a job or create new containers when needed, then it is not once</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:16:59.982400</ts>
    <user>Clarine</user>
    <text>I was referring to an app we run in production. In general (for libs, etc) you can benefit from it more.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:17:18.982600</ts>
    <user>Isa</user>
    <text>How does it work in the context of:
&lt;https://clojurians.slack.com/archives/C03S1KBA2/p1548963422931200&gt;</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:17:30.983000</ts>
    <user>Celestine</user>
    <text>Juxt's `pack.alpha` came first (back in December 2017, it seems). Then `depstar` in early 2018. Then Cambada. Based on initial commits, not public releases.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:18:06.983200</ts>
    <user>Celestine</user>
    <text>Not sure what you mean by that question... that's _exactly_ what `depstar` does.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:19:45.983400</ts>
    <user>Isa</user>
    <text>Sorry if I am asking about something stupid. But does it only pack source files or compile them into different format? As I understand compile to different format. But hiredman wrote “just zips up the source code and calls it a jar” and it make me confuse.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:20:18.983700</ts>
    <user>Celestine</user>
    <text>A JAR file is just a ZIP file with the extension `.jar`</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:20:47.983900</ts>
    <user>Celestine</user>
    <text>Not sure what you mean by "compile them into different format".</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:21:40.984100</ts>
    <user>Isa</user>
    <text>hmm so how AOT is added?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:22:37.984300</ts>
    <user>Isa</user>
    <text>Does it still need .clj files after that?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:22:56.984500</ts>
    <user>Isa</user>
    <text>So then what source code doing there?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:27:26.984700</ts>
    <user>Celestine</user>
    <text>When you compile Clojure source `.clj` files, you get `.class` files. You don't need the `.clj` file present if you have all the `.class` files that it compiles into -- unless it does some action at runtime that would require the source (such as loading a specific source file). AOT is transitive (which is considered a bug by most people -- there is at least one open JIRA issue about it) which means it compiles the namespaces you specify _and any namespaces that are reached by loading those namespaces (recursively)_ -- which means that if your AOT'd code uses `require`/`resolve` at runtime on namespaces that were not part of the AOT pass, you still need their source files.</text>
  </message>
  <message conversation_id="368">
    <ts>2019-01-31T15:29:14.984900</ts>
    <user>Isa</user>
    <text>So all solutions like lein uberjar etc. include source files?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:30:28.985100</ts>
    <user>Celestine</user>
    <text>It depends on whether you configure them to AOT everything or just specific namespaces. And even at runtime, Clojure code can still pull in new dependencies (as source code) and load them (which compiles them into class images in memory).</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:31:16.985300</ts>
    <user>Celestine</user>
    <text>I think it's a long-standing mistake that Leiningen chose to have as the default in its basic app template, a compiled main namespace and a `:gen-class` directive.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:31:43.985500</ts>
    <user>Celestine</user>
    <text>Leiningen does a lot of stuff by default that is not necessary.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:32:19.985700</ts>
    <user>Isa</user>
    <text>So… do you suggest to always include source code? What about business?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:32:41.985900</ts>
    <user>Isa</user>
    <text>Is there any right solution? How do you protect source code?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:37:37.986200</ts>
    <user>Celestine</user>
    <text>Licensing. As several people said.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:40:03.986400</ts>
    <user>Isa</user>
    <text>It doesn’t protect source code in any way. It makes potential penalty if you can prove it.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:40:46.986600</ts>
    <user>Isa</user>
    <text>ok so I assume you make source code public for all your apps (unless it is on cluster only, so they can’t read anyway)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:40:55.986800</ts>
    <user>Isa</user>
    <text>Thanks for explanation</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T15:56:52.989100</ts>
    <user>Isa</user>
    <text>Just to summary up what I wanted to say and avoid misunderstanding:
Not publish code doesn’t make code more secure.
But publish code increase a risk to be hacked. For example bot looking known bugs in public code, which will notice hacker you use dependency with security issue, have overflow bug etc.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:01:17.989400</ts>
    <user>Celestine</user>
    <text>All the code I have written for myself, that I own the rights to, has been open source -- for about thirty years. The code I write for companies, in general, is owned by those companies and it's up to them whether they release it publicly. Some code I wrote for Macromedia was open sourced (in the early 2000's). Some code I wrote for a client after I quit Adobe in 2007 was open sourced. Various companies I've worked for have open sourced some of their code. My current employer supports all of its developers contributing to existing open source projects -- and has allowed me to release a number of libraries as open source that were written internally, as well as having its own GitHub organization with some open source libraries.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:02:31.989600</ts>
    <user>Celestine</user>
    <text>We have some code at work that is proprietary in terms of containing internal business logic and/or algorithms -- but we wouldn't release that in compiled format. Nothing to do with source code.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:02:55.989800</ts>
    <user>Isa</user>
    <text>&amp;gt; All the code I have written for myself, that I own the rights to, has been open source -- for about thirty years.
I envy you have such opportunity to do it :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:03:18.990000</ts>
    <user>Celestine</user>
    <text>A couple of our developers have given conference talks, going into some depth about how we use certain software and sharing code examples publicly.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:04:10.991200</ts>
    <user>Celestine</user>
    <text>The real reason most companies won't release their code as open source is that they don't want to have to maintain it as an open source project -- because that's a big commitment. We've had a lot of discussions about that internally.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:04:22.991600</ts>
    <user>Felix</user>
    <text>Anyone have a recommendation of a smalltalk written in clojure? I'm mainly interested in the "liveness" and "object protocol", not so much the parser.

EDIT: removed incorrect statement regarding Clojure / Protocols</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:05:07.991700</ts>
    <user>Isa</user>
    <text>oh yes, it is</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:05:18.991900</ts>
    <user>Celestine</user>
    <text>For a long time, we only had one official company library available as open source, and it was on BitBucket (an internal repo made public), and that was all about the potential drain on our time for maintaining it for the community if we put it up on GitHub for "everyone".</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:06:36.992300</ts>
    <user>Rosaline</user>
    <text>it isn't</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:06:49.992400</ts>
    <user>Celestine</user>
    <text>With the primary delivery platform now being the web, there's no deliverable for backend code to clients, so compiling (to whatever format) is far less important. And of course all your client-side code _is public as JavaScript_ and the entire world can read it.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:07:11.993000</ts>
    <user>Rosaline</user>
    <text>clojure doesn't have an mop, and protocols are not based on smalltalk</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:07:50.993800</ts>
    <user>Celestine</user>
    <text>Anything delivered as a desktop app built on Electron etc -- all your source code is public there too. Because JavaScript.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:08:07.994400</ts>
    <user>Isa</user>
    <text>hmm unless we use solutions like electron to make desktop app it is mostly true</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:08:18.994700</ts>
    <user>Isa</user>
    <text>hmm</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:08:27.994900</ts>
    <user>Isa</user>
    <text>good point</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:08:55.995100</ts>
    <user>Celestine</user>
    <text>Companies like Microsoft are now releasing huge swathes of code as open source. Closed source is pretty much dead as a concept as far as modern companies are concerned.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:09:06.995300</ts>
    <user>Isa</user>
    <text>so I would say it is issue / feature of Java / JavaScript world</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:09:53.995500</ts>
    <user>Isa</user>
    <text>&amp;gt; Closed source is pretty much dead as a concept as far as modern companies are concerned.
That is interesting topic. I see this trend more and more, but I have never seen rationale for that.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:10:04.995700</ts>
    <user>Isa</user>
    <text>Do you know good article about that?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:10:21.995900</ts>
    <user>Celestine</user>
    <text>PHP, Python, Ruby... all delivered as source code, regardless of whether the code is open source or restricted by licensing.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:11:20.996800</ts>
    <user>Felix</user>
    <text>I removed in correct statement regarding Clojure / Protocols. Regarding original question -- is there any readable impl of Smalltalk in Clojure ?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:11:58.996900</ts>
    <user>Isa</user>
    <text>licensing is ok, but is is hard to deal with people who don’t respect it</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:12:12.997100</ts>
    <user>Isa</user>
    <text>Maybe in US it is easier, I don’t know</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:12:34.997700</ts>
    <user>Jasmine</user>
    <text>re smalltalk, I think &lt;http://cloxp.github.io/&gt; is smalltalk inspired</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:12:39.997900</ts>
    <user>Celestine</user>
    <text>That's always been true tho' even with proprietary closed source systems -- look at how widely pirated desktop software from Microsoft and Adobe is...</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:13:45.998100</ts>
    <user>Isa</user>
    <text>Yeah, it is interesting move from MS to let run they system without cracks.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:13:49.998300</ts>
    <user>Isa</user>
    <text>I think they did it</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:14:00.998500</ts>
    <user>Celestine</user>
    <text>Adobe has a specific software license enforcement team that work with law enforcement worldwide and they conduct raids on pirating organizations, as well as sue companies that use pirated versions of their products. I'm sure Microsoft, Oracle, et al all do as well.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:14:17.998700</ts>
    <user>Isa</user>
    <text>But on the other hand they power is in number of users, also this who crack they system</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:15:01.998900</ts>
    <user>Celestine</user>
    <text>Unless you're a giant mega-corp, with billions in revenue from closed source desktop systems, piracy is really not worth worrying about tho'...</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:15:06.999100</ts>
    <user>Isa</user>
    <text>I mean more people use they product, better for them, because more people will buy a licence.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:15:36.999300</ts>
    <user>Celestine</user>
    <text>Your ideas in software are not likely to be novel :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:16:16.999500</ts>
    <user>Celestine</user>
    <text>There's much less true innovation in software than a lot of people seem to think.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:16:47.999700</ts>
    <user>Celestine</user>
    <text>So the software you produce -- there's almost no benefit to keeping it "secret" in the vast majority of cases.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:17:08.999900</ts>
    <user>Isa</user>
    <text>Still if somebody will do copy &amp;amp; paste your system for which you spent a lot of money you will feel bad about that</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:17:29.000100</ts>
    <user>Isa</user>
    <text>This things can easy happen in Russia or China</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:17:50.000300</ts>
    <user>Celestine</user>
    <text>If you really "spent a lot of money" and have a large amount  of business riding on it, sue for license infringement. That's what licenses (and courts) are for.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:18:18.000500</ts>
    <user>Celestine</user>
    <text>And if it's closed source, they'll just crack the product anyway. It's no defense.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:18:26.000700</ts>
    <user>Isa</user>
    <text>I think Russia and China don’t care about that too much</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:18:43.000900</ts>
    <user>Celestine</user>
    <text>Really, if you think closed source vs open source is some magic defense against piracy/cracking you're delusional :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:18:45.001100</ts>
    <user>Isa</user>
    <text>but it is fair point</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:18:56.001300</ts>
    <user>Isa</user>
    <text>no, I don’t</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:19:19.001500</ts>
    <user>Celestine</user>
    <text>Exactly, Russia and China et al will do whatever they want with your software regardless of whether you release the source or not!</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:20:40.001700</ts>
    <user>Isa</user>
    <text>Reversing situations: so why companies close they source code? Everything should be public.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:21:13.001900</ts>
    <user>Celestine</user>
    <text>Example: a Clojure open source library out there was made by a Russian as a copy of one of my libraries and they removed the license and copyright notices and passed it off as their own code. They announced the library on the Clojure mailing list and I called them out for license infringement -- and they recanted because they were caught in public breaking the rules.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:22:40.002100</ts>
    <user>Celestine</user>
    <text>Closed source is the old-fashioned model. Companies with old-fashioned thinking still follow that model. Companies still use COBOL, for example :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:23:20.002300</ts>
    <user>Celestine</user>
    <text>This is an interesting article on the thinking behind keeping things closed: &lt;https://opensource.com/business/13/10/seven-reasons-closed-better-than-open-source&gt;</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:23:29.002600</ts>
    <user>Isa</user>
    <text>To be honest I think I don’t have strong opinion in that topic</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:23:38.002800</ts>
    <user>Isa</user>
    <text>I think there is no answer for that</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:24:07.003000</ts>
    <user>Isa</user>
    <text>But for example turquoise model of managing business is new “fashion”, but I don’t believe it fits everywhere</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:25:03.003200</ts>
    <user>Isa</user>
    <text>&amp;gt; You never have to fix components when something goes wrong.
haha I like this one</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:27:16.005100</ts>
    <user>Celestine</user>
    <text>&amp;gt; But publish code increase a risk to be hacked. For example bot looking known bugs in public code, which will notice hacker you use dependency with security issue, have overflow bug etc.
A good, relevant example here is Slack. The JavaScript code is not open source but it is public because of the way web apps work and it has a stupid exploit in it that allows hackers to bypass security checks in the client. Slack have known about it for years but refuse to fix it. If their source code was actually open source, you can bet they'd be deluged with pull requests to fix security issues like that.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:27:56.006000</ts>
    <user>Celestine</user>
    <text>That's why open source code is often *more secure* and *less hackable* than closed source code -- more eyeballs, more developers wanting to help fix vulnerabilities.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:28:19.006100</ts>
    <user>Isa</user>
    <text>Thanks for conversation. I think it changed my point of view a little.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:29:00.006300</ts>
    <user>Celestine</user>
    <text>You're welcome. As you can imagine, I'm very much an open source advocate, having been doing this for about thirty years :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:30:32.007400</ts>
    <user>Isa</user>
    <text>I agree about all popular projects. Just not sure if it will work the same if you will publish the system, which only you maintenance. For example small SaaS or system which you use only in company X. I think true is not black and white. But I agree. It is fair point.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:31:34.007500</ts>
    <user>Isa</user>
    <text>I can imagine. I would like to do more open source, but not so easy. Trends from US go to Poland after a few years :wink:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:37:03.010400</ts>
    <user>Laurinda</user>
    <text>I've spent the last hours hunting down an obscure compilation problem with a cryptic error message. I still don't understand it, but it seems that if I mark a `(def q (into (sorted-set) [1 2 3]))` with a `^:const`, then *other* files that need `q` for their `(def)s` will not compile. And I now know that `sorted-set` and `^:const` are needed. A vector won't cause it.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:37:24.010700</ts>
    <user>Laurinda</user>
    <text>Just wanted to check if this rings a bell with anyone.</text>
  </message>
  <message conversation_id="369">
    <ts>2019-01-31T16:37:52.010800</ts>
    <user>Ciara</user>
    <text>disabled an integration in this channel: &lt;https://clojurians.slack.com/services/BEW89FKAA|outgoing-webhook&gt;</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:41:31.011900</ts>
    <user>Jasmine</user>
    <text>const means inline at point of use (that explains the scope of where you see the issue)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:42:22.012600</ts>
    <user>Jasmine</user>
    <text>I don’t think sorted-sets can be const - they have an embedded comparator function that’s not representable as data</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:44:21.013400</ts>
    <user>Laurinda</user>
    <text>Hmm. I didn't know there are things that can't be const.</text>
  </message>
  <message conversation_id="369">
    <ts>2019-01-31T16:44:48.013800</ts>
    <user>Laurinda</user>
    <text>The error messages are… suboptimal.
```
Exception in thread "main" Syntax error compiling at (/tmp/form-init5251724450573718419.clj:1:73).
 [...]
Caused by: java.lang.ClassCastException: Cannot cast clojure.lang.PersistentVector to clojure.lang.ISeq
```</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:46:02.014300</ts>
    <user>Jasmine</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-944&gt; is in the ballpark of this - it’s a really tricky corner of the compiler</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:48:07.015800</ts>
    <user>Laurinda</user>
    <text>This is way beyond me. I searched the bugtracker before asking, but I wouldn't have recognized this issue as related. Anyway, it isn't a major problem, it's just that finding the cause is very difficult.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:50:08.016700</ts>
    <user>Jasmine</user>
    <text>can you repost the root cause of that exception chain (the last one one)?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:51:31.017600</ts>
    <user>Laurinda</user>
    <text>Sure. I just abbreviated it, because it seemed rude to clog people's screens:
```
Caused by: java.lang.ClassCastException: Cannot cast clojure.lang.PersistentVector to clojure.lang.ISeq
        at java.lang.Class.cast(Class.java:3369)
        at clojure.lang.Reflector.boxArg(Reflector.java:552)
        at clojure.lang.Reflector.boxArgs(Reflector.java:585)
        at clojure.lang.Reflector.invokeMatchingMethod(Reflector.java:132)
        at clojure.lang.Reflector.invokeStaticMethod(Reflector.java:332)
        at clojure.lang.Reflector.invokeStaticMethod(Reflector.java:325)
        at clojure.lang.LispReader$EvalReader.invoke(LispReader.java:1322)
        at clojure.lang.LispReader$DispatchReader.invoke(LispReader.java:853)
        at clojure.lang.LispReader.read(LispReader.java:285)
        at clojure.lang.LispReader.read(LispReader.java:216)
        at clojure.lang.LispReader.read(LispReader.java:205)
        at clojure.lang.RT.readString(RT.java:1874)
        at clojure.lang.RT.readString(RT.java:1869)
        at partsbox.preferences__init.__init1(Unknown Source)
        at partsbox.preferences__init.&amp;lt;clinit&amp;gt;(Unknown Source)
        ... 34 more
```
The last 2 lines reference my file: it's the one that uses the `^:const` definition.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:52:25.018200</ts>
    <user>Jasmine</user>
    <text>to get this you have to think about what the compiler is doing. it’s trying to inline a value rather than look it up via the var.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:52:58.018800</ts>
    <user>Jasmine</user>
    <text>it’s going to include that value in the class compiled for the function using the inlined value</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:54:56.021600</ts>
    <user>Rosaline</user>
    <text>I, and I am sure &lt;@Jasmine&gt; will disagree, would say never use ^:const</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:55:52.023100</ts>
    <user>Rosaline</user>
    <text>as far as I can tell, people reach for it because it has a similar name to things they use in other languages when they want things to behave correctly</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:56:04.023600</ts>
    <user>Laurinda</user>
    <text>&lt;@Jasmine&gt; Right. I understand why this happens in the including file.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:56:15.024100</ts>
    <user>Rosaline</user>
    <text>but clojure already behaves correctly, and const almost certainly doesn't do what you intuitively expect</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:56:19.024300</ts>
    <user>Jasmine</user>
    <text>it has to store the constant value in a field of the class, but there is a limit to what you can store in bytecode. For simple values, this is easy, but iirc the fallback case is to pr the value to a string, that can be re-read back to a value in the consuming case.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:56:55.025200</ts>
    <user>Laurinda</user>
    <text>Hmm. But sorted sets do not have a pr representation.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:57:04.025400</ts>
    <user>Jasmine</user>
    <text>sorted sets and maps don’t have a literal print syntax and no way to print/read the comparator function.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:58:10.025600</ts>
    <user>Jasmine</user>
    <text>```user=&amp;gt; (binding [*print-dup* true] (pr s))
#=(clojure.lang.PersistentTreeSet/create [1 2 3])```</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:58:47.026300</ts>
    <user>Jasmine</user>
    <text>this gets into increasingly murky areas where reader eval is used</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:59:12.026900</ts>
    <user>Jasmine</user>
    <text>I’m not sure I’m getting 100% of the details correct on all this (it’s been a few years since I looked at it)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T16:59:42.027500</ts>
    <user>Jasmine</user>
    <text>as &lt;@Rosaline&gt; says, there are fewer places where this is worth doing than you might expect (I wouldn’t say none though)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:00:11.028800</ts>
    <user>Jasmine</user>
    <text>in particular using ^:const in tandem with ^long or ^double can be useful for inlining primitive long or double values</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:00:12.029000</ts>
    <user>Rosaline</user>
    <text>if you don't say none, everyone wants to argue that they are special and should use, and they never should</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:00:37.029300</ts>
    <user>Laurinda</user>
    <text>In general, I really wish sorted sets and sorted maps with default comparators had a printable/readable representation. I run into this quite a bit, and I don't have a single custom comparator function.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:01:40.030800</ts>
    <user>Laurinda</user>
    <text>As to this problem, what next? Should I work on a minimal reproducible test case, or is it unnecessary? It seems this is a known issue, and all that could possibly be improved is the error message, right?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:02:29.031600</ts>
    <user>Jasmine</user>
    <text>I don’t think what you’re doing is a useful thing to do (that is, I can’t imagine how marking this ^:const well help you in any way)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:02:42.031900</ts>
    <user>Jasmine</user>
    <text>so I would recommend just removing that :)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:03:23.032900</ts>
    <user>Jasmine</user>
    <text>if you want to file a jira re the error message (or a clojure-site issue for better docs around ^:const), that seems reasonable</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:03:59.033900</ts>
    <user>Jasmine</user>
    <text>the docs around ^:const are, well, largely non-existent. there are a couple lines in the changelog when it was added</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:04:19.034300</ts>
    <user>Laurinda</user>
    <text>I did, I don't much care about the `^:const`. I just checked, and I have 253 `^:const` declarations. I use them mostly as a comment, really.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:05:04.035400</ts>
    <user>Laurinda</user>
    <text>I guess I can simply remove them all and assume that every `def` is a constant.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:06:10.036800</ts>
    <user>Rosaline</user>
    <text>I'd suggest also maybe a re-evaluation of your relationship with sorted sets, if they are causing issues, maybe try and get a long without them (as a data point I am not sure if I recall ever using clojure's built in sorted sets outside of toy projects)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:06:16.037000</ts>
    <user>Laurinda</user>
    <text>&lt;@Jasmine&gt; By the way, I really enjoy your weekly journal blog posts. If this doesn't take too much of your time, it is worth doing and is much appreciated.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:07:06.038000</ts>
    <user>Jasmine</user>
    <text>I’ll +1 reevaluating sorted sets</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:07:44.039100</ts>
    <user>Jasmine</user>
    <text>I find using them means you are usually relying on order and linear searches rather than building indexes which will be a better solution</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:09:08.040700</ts>
    <user>Laurinda</user>
    <text>Hmm. They are actually quite useful in certain places. I use them for things like a list of quantities (build/order/whatever). A list like that has 1-20 numerical items. A sorted-set is perfect, as it lets me declaratively specify that it should always be sorted. I could stop using it, but then I have to worry about re-sorting in a number of places.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:10:19.042700</ts>
    <user>Laurinda</user>
    <text>But — indeed if they cause more problems than they solve, I can just make sure I always sort manually.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:10:47.043600</ts>
    <user>Tammera</user>
    <text>What’s the complexity of operations in a sorted set, membership and insert and such? Is it worse than a regular set? (I got intrigued… :) )</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:11:29.044700</ts>
    <user>Jasmine</user>
    <text>they’re red-black trees, so mostly O(n log n) I think</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:11:31.044800</ts>
    <user>Rosaline</user>
    <text>or treat it more like a graph, {somevalue #{next} next #{nnext} etc}</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:12:01.045600</ts>
    <user>Becki</user>
    <text>is this really easier than using a simple data structure like a sorted set?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:12:09.045800</ts>
    <user>Rosaline</user>
    <text>if you are sorting just for display (as a todo list or whatever) then you don't need sorted data, you need a sorted view over something</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:12:34.046400</ts>
    <user>Rosaline</user>
    <text>it is more flexible in that it encodes the sort as data in the graph</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:12:37.046700</ts>
    <user>Rosaline</user>
    <text>vs. as a function</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:13:03.047600</ts>
    <user>Rosaline</user>
    <text>so it is better suited to things like serialization</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:14:46.049100</ts>
    <user>Tammera</user>
    <text>Cool! I remember having quite a difficult time getting my head around RB trees when I got them in CS</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:18:37.050400</ts>
    <user>Becki</user>
    <text>is it? seems like you run into the same issue as the sorted set. you can serialize its current order but how do you serialize the instructions for inserting new elements into the graph? that would be the comparator in the sorted set and would seem to be an analogous point for the graph insertion</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:22:01.052000</ts>
    <user>Rosaline</user>
    <text>that is the point, you don't serialize instructions at all</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:23:28.053000</ts>
    <user>Rosaline</user>
    <text>is order a property of your data/information or is it a property of the particular data structure you are using to represent the data</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:27:16.054100</ts>
    <user>Marlyn</user>
    <text>(I would also agree about `:const` earlier -- 90% of the time I've seen it in the wild, it is incorrect.)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:28:49.054700</ts>
    <user>Rosaline</user>
    <text>1. sorted sets are cool, most of my favorite things are built on them to some degree or other (&lt;https://git.sr.ht/~hiredman/dset&gt;) 2. if something is causing you trouble stop using it 3. always have a third thing</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:51:07.056600</ts>
    <user>Laurinda</user>
    <text>I would humbly suggest that the word "incorrect" is too strong. `^:const`, at a first glance, seems like an indication that something is a constant and will never change. Marking things this way is entirely reasonable</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T17:52:52.058100</ts>
    <user>Laurinda</user>
    <text>As for sorted sets, of course I don't require them. I can make sure that every function that needs the data sorts it before using (and no, it's not just "a view", there are multiple views, there is also logic that assumes the data is sorted). It's a tradeoff between declarative and procedural.</text>
  </message>
  <message conversation_id="370">
    <ts>2019-01-31T18:07:13.058400</ts>
    <user>Dann</user>
    <text>but that's not how const works</text>
  </message>
  <message conversation_id="371">
    <ts>2019-01-31T18:40:22.058500</ts>
    <user>Latonya</user>
    <text>The constant factors for Clojure's sorted sets/maps are typically a fair amount larger than sets/maps that are not sorted, e.g. n log_2 n is a constant factor 5 more than n log_32 n.</text>
  </message>
  <message conversation_id="372">
    <ts>2019-01-31T19:03:32.058700</ts>
    <user>Diamond</user>
    <text>Seems like it’d be easy enough to copy and paste the lines from `changes.md` over. Where would those go? I’ve seen this discussion come up enough that it’d be easier to just point someone to the site for reference.

There are also several other meta questions that come up too (myself and others have asked about `^:inline`).</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:06:02.059000</ts>
    <user>Diamond</user>
    <text>&lt;@Laurinda&gt; here’s a link to the aforementioned changelog entry explaining `^:const` &lt;https://github.com/clojure/clojure/blob/master/changes.md#215-const-defs&gt;</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:09:52.059800</ts>
    <user>Laurinda</user>
    <text>Well, as an aside, I do understand how const works. The inlining is not critical in the code that I currently write, but I am aware of it. What I wasn't aware of are pitfalls, e.g. that not every Clojure data structure can be treated this way.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:10:23.060000</ts>
    <user>Dann</user>
    <text>no data clojure structure does anything useful with const - it's an optimization for primitives</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:10:35.060200</ts>
    <user>Dann</user>
    <text>some data structures also error, none of them benefit</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:10:35.060400</ts>
    <user>Diamond</user>
    <text>&lt;@Laurinda&gt; I was trying to be helpful. I didn’t see anyone send you a link, etc.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:11:13.060600</ts>
    <user>Laurinda</user>
    <text>Yes, "primitives" is what I was missing, I guess.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:11:54.060800</ts>
    <user>Laurinda</user>
    <text>As for "useful", isn't it true that if initialization is expensive, it would happen at compile time and the result would be inlined?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:12:00.061000</ts>
    <user>Diamond</user>
    <text>This is the kind of the discussion that needs to be distilled into reference material so these discussions can just be collapsed into a URL.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:12:16.061200</ts>
    <user>Dann</user>
    <text>I don't want to come off as too strident here - I think given what const means in other languages it is poorly named and under documented</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:12:49.061500</ts>
    <user>Dann</user>
    <text>if your form is at the top level of the file, it's initialized during compilation, in clojure compilation happens when you load the file</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:13:16.061700</ts>
    <user>Laurinda</user>
    <text>Right. And if I build an uberjar with AOT?</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:15:28.061900</ts>
    <user>Dann</user>
    <text>the file is loaded when making the uberjar, anything at the top level is done again on ~app startup~ runtime load of that class file, otherwise def with side effects in it would break when using AOT</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:16:07.062100</ts>
    <user>Dann</user>
    <text>so you aren't saving as much time as you might think for defs at least</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:17:50.062400</ts>
    <user>Dann</user>
    <text>eg. `(def tracking (get-tracking-data (fire-missiles)))` - fires missiles when you make the uberjar, then does it again when you load the resulting class file in an app</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:21:18.062600</ts>
    <user>Laurinda</user>
    <text>Thanks for explaining. I didn't think these definitions were evaluated again.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:27:08.062800</ts>
    <user>Dann</user>
    <text>it's surprising, but it's the least surprising choice - think of all the _potential_ bugs when people use def on eg. a db connection pool, or an http server etc. (of course best practice for devs is never do anything stateful in def)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:42:31.063100</ts>
    <user>Laurinda</user>
    <text>No, what surprises me is that the same is done when there is a `^:const` metadata flag. I would not expect re-evaluation then.</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T19:52:19.063300</ts>
    <user>Dann</user>
    <text>const doesn't really do anything with data structures, it enables a fast path for compiled code that uses the const var, if the const var is a primitive</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T20:01:51.063600</ts>
    <user>Jasmine</user>
    <text>the inline stuff is primarily intended for use inside Clojure itself and is not considered a public feature that we wish to encourage (it may be removed in the future)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T20:02:19.063800</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/reference/compilation&gt; is probably the best place to doc ^:const</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T20:02:49.064000</ts>
    <user>Diamond</user>
    <text>Thanks! I’ve already forked the repo to patch my name/github name. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T20:03:19.064200</ts>
    <user>Jasmine</user>
    <text>if you’re adding your name, you need to complete the CA form (but if you’re fixing a typo or something, that’s fine)</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T20:03:45.064400</ts>
    <user>Diamond</user>
    <text>I completed the CA _years_ ago. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T20:04:59.064600</ts>
    <user>Jasmine</user>
    <text>cool</text>
  </message>
  <message conversation_id="366">
    <ts>2019-01-31T20:05:47.064800</ts>
    <user>Diamond</user>
    <text>Also, regarding `^:inline`, I’m aware that it is not intended for public consumption; my suggestion regarding it is to make that fact public in documentation so that folks (you included) don’t have to keep having the same discussions.</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T05:43:26.079000</ts>
    <user>Salina</user>
    <text>when writing a clojure library, should we just have all the dependencies declared as `:provided`?</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T05:44:30.080100</ts>
    <user>Clarine</user>
    <text>I tend to make deps that are not strictly needed for the library to be usable provided.</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T05:44:58.080600</ts>
    <user>Clarine</user>
    <text>An example would be in clj-http that cheshire is not strictly needed, unless you want to do json parsing</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T05:46:09.081700</ts>
    <user>Clarine</user>
    <text>Sometimes people make these part of the test  / dev dependencies. I think provided is the intended use for this.</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T05:47:24.082300</ts>
    <user>Salina</user>
    <text>nice thanks, I'm trying to add a library to a project now, and I get a million conflicts like
`[io.confluent/kafka-schema-registry "5.1.0" :exclusions [org.slf4j/slf4j-log4j12]] -&amp;gt; [io.confluent/rest-utils "5.1.0"] -&amp;gt; [org.eclipse.jetty.websocket/javax-websocket-server-impl "9.4.12.v20180830"] -&amp;gt; [org.eclipse.jetty.websocket/javax-websocket-client-impl "9.4.12.v20180830"] -&amp;gt; [org.eclipse.jetty.websocket/websocket-client "9.4.12.v20180830"] -&amp;gt; [org.eclipse.jetty/jetty-client "9.4.12.v20180830"] -&amp;gt; [org.eclipse.jetty/jetty-http "9.4.12.v20180830"]`</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T05:47:44.083300</ts>
    <user>Salina</user>
    <text>the actual version numbers from the main project will however still take precedence right?</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T05:48:25.084000</ts>
    <user>Salina</user>
    <text>would be nice to just exclude everything for that library</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T05:48:46.084400</ts>
    <user>Clarine</user>
    <text>the ones you define in your own project take precedence, I think</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T05:49:16.084800</ts>
    <user>Clarine</user>
    <text>e.g. if your main project says clojure 1.10, but a lib says clojure 1.9, you will get 1.10</text>
  </message>
  <message conversation_id="373">
    <ts>2019-02-01T06:12:28.087800</ts>
    <user>Samual</user>
    <text>When deps A and B bring along distinct versions of C it's not too hard to exclude C from one or the other or to state a direct dependency on one particular version of C. The problem is, what happens later?! When updating A or B, will you notice the extraordinary measures, back them out, and reintroduce only if necessary? Or will your project stay forever pinned to C-version-1 long after A and B have moved on to C-version-6?</text>
  </message>
  <message conversation_id="374">
    <ts>2019-02-01T06:14:01.088600</ts>
    <user>Samual</user>
    <text>A deps-resolver syntax that makes clear both the problem and the solution, and applies the solution only when circumstances match the stated problem, would allow tidier engineering</text>
  </message>
  <message conversation_id="374">
    <ts>2019-02-01T06:50:45.089400</ts>
    <user>Salina</user>
    <text>yeah it's a fun problem in every ecosystem really</text>
  </message>
  <message conversation_id="374">
    <ts>2019-02-01T06:50:59.090300</ts>
    <user>Salina</user>
    <text>btw is there a library to generate a graph of the dependencies (with graphviz) that works?</text>
  </message>
  <message conversation_id="374">
    <ts>2019-02-01T06:51:26.091100</ts>
    <user>Salina</user>
    <text>vizdeps seems to be the best one but it's not working anymore, and I could not really find one that works apart from that</text>
  </message>
  <message conversation_id="375">
    <ts>2019-02-01T07:25:53.094300</ts>
    <user>Sonny</user>
    <text>Often wondered if (at least on the JVM), it would be possible to isolate all this stuff with some classloader magic. One CL for each dep and a CL graph that mirrored the dependency graph etc. There's a fun project for somebody who gets bored.</text>
  </message>
  <message conversation_id="375">
    <ts>2019-02-01T07:27:45.094600</ts>
    <user>Clarine</user>
    <text>&lt;@Sonny&gt; Maybe boot is already doing this with pods</text>
  </message>
  <message conversation_id="375">
    <ts>2019-02-01T07:30:36.095000</ts>
    <user>Sonny</user>
    <text>Oh, I didn't know this. Will investigate. Thanks.</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:23:42.096700</ts>
    <user>Matha</user>
    <text>Hi! How can you match all routes with a specific prefix in Bidi? e.g. match all routes that start with `/app`. So all routes of the form `/app/*/*...`</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:27:04.097000</ts>
    <user>Matha</user>
    <text>nevermind, the answer was `true` (&lt;https://github.com/juxt/bidi/blob/master/README.md#catch-all-routes&gt;)</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:30:13.099300</ts>
    <user>Danna</user>
    <text>I am trying to implement `clojure.lang.ILookup` in a record like this
```
(defrecord StaticMapService [m]
  sim/Service
  (start_service [this process] this)
  (finalize_service [this process] this)

  IFn
  (invoke [_ ident]
    (get m ident))

  ILookup
  (valAt [_ k] (get m k))
  (valAt [_ k not-found] (get m k not-found)))
```
and I get a `Duplicate interface name "clojure/lang/ILookup" in class file compile__stub/services/entityid_service/StaticMapService` error

can't for the life of me see what I am doing wrong

Any suggestions?</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:32:37.099500</ts>
    <user>Mariela</user>
    <text>my guess: defrecord already impls that interface. so you have to use the lower-level `deftype` or such</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:33:09.100100</ts>
    <user>Jasmine</user>
    <text>
Records already implement ILookup</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:33:10.100200</ts>
    <user>Danna</user>
    <text>ah of course</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:33:40.101300</ts>
    <user>Jasmine</user>
    <text>If you want custom lookup behavior you need to drop down to deftype</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:33:40.101400</ts>
    <user>Danna</user>
    <text>oh so I can just merge upon `start_service`</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:33:57.102000</ts>
    <user>Danna</user>
    <text>thankyou</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:34:04.102500</ts>
    <user>Jasmine</user>
    <text>Yes, should be able to</text>
  </message>
  <message conversation_id="376">
    <ts>2019-02-01T08:34:16.102700</ts>
    <user>Danna</user>
    <text>Thanks very much</text>
  </message>
  <message conversation_id="377">
    <ts>2019-02-01T10:29:25.104200</ts>
    <user>Matha</user>
    <text>Is there a nice clojure lib to go back and forth between UUIDs and base62-encoded (or similar) UUIDs? (to put in URLs)</text>
  </message>
  <message conversation_id="377">
    <ts>2019-02-01T10:34:39.104900</ts>
    <user>Ciara</user>
    <text>There’s the built-in murmurhash (&lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Murmur3.java&gt;) - not sure if it would fit the requirements</text>
  </message>
  <message conversation_id="377">
    <ts>2019-02-01T10:39:46.105500</ts>
    <user>Jasmine</user>
    <text>I would consider that an implementation detail of Clojure and not something to rely on calling into</text>
  </message>
  <message conversation_id="377">
    <ts>2019-02-01T10:42:35.105800</ts>
    <user>Ciara</user>
    <text>ah - good to know!</text>
  </message>
  <message conversation_id="377">
    <ts>2019-02-01T10:49:49.109500</ts>
    <user>Cecil</user>
    <text>i have something not quite understood while reading `Clojure Programming` (it's really a great book)
it explain one of the usage of `recur` is when performing mathematical operation.
&amp;gt; In addition, because it allows you to work with numerics without the overhead of boxed representations, ...

what _overhead of boxed representations_ means?</text>
  </message>
  <message conversation_id="377">
    <ts>2019-02-01T10:50:37.109700</ts>
    <user>Korey</user>
    <text>&lt;http://insideclojure.org/2014/12/15/warn-on-boxed/&gt;</text>
  </message>
  <message conversation_id="377">
    <ts>2019-02-01T10:52:01.110300</ts>
    <user>Cecil</user>
    <text>ah, it was a java stuff</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:08:24.113400</ts>
    <user>Hugh</user>
    <text>Hey guys!
In clojure jdbc, I am trying to understand `:return-keys` How can I get only `[{:a … :b ...} ...]` returned?:
```
(db-do-prepared-return-keys
  db
  (into statement updates)
  {:multi? true
   :return-keys {:columns [:a :b]}})
```</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:08:52.113800</ts>
    <user>Hugh</user>
    <text>`:return-keys [:a :b]` didn’t work for me either</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:10:47.114400</ts>
    <user>Rosaline</user>
    <text>if I recall the behavior of return-keys is highly database dependent</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:11:52.114700</ts>
    <user>Dann</user>
    <text>just checking, this is clojure.java.jdbc not clojure.jdbc right? - the name of the latter makes this unfortunately ambiguous</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:12:13.114900</ts>
    <user>Dann</user>
    <text>(in fact I think the naming is downright hostile)</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:16:24.115800</ts>
    <user>Rosaline</user>
    <text>I don't think :return-keys is actually an option you can set on db-do-prepared-return-keys</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:16:53.116300</ts>
    <user>Rosaline</user>
    <text>it always returns keys</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:18:00.116900</ts>
    <user>Hugh</user>
    <text>yes clojure.java.jdbc</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:18:02.117100</ts>
    <user>Hugh</user>
    <text>sorry</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:18:24.117600</ts>
    <user>Hugh</user>
    <text>ok</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:18:24.117700</ts>
    <user>Rosaline</user>
    <text>db-do-prepared-return-keys calls prepare-statement with return-keys set to the boolean true, regardless of any options passed in</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:18:46.118100</ts>
    <user>Rosaline</user>
    <text>you can change that by calling prepare-statement yourself and passing that in</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:19:19.118600</ts>
    <user>Rosaline</user>
    <text>the prepare-statement docstring has a blurb about the behavior being driver dependent</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:21:10.118800</ts>
    <user>Hugh</user>
    <text>ok, thanks</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:21:47.118900</ts>
    <user>Dann</user>
    <text>np - I don't expect most people to know clojure.jdbc exists (I certainly don't recommend using it) - just checking in case there's been miscommunication ;D</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:23:31.119500</ts>
    <user>Hugh</user>
    <text>ok, I can do `:row-fn #(select-keys % [:a :b])` though</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:23:39.119700</ts>
    <user>Hugh</user>
    <text>interesting</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T13:49:59.122200</ts>
    <user>Henry</user>
    <text>&lt;@Hugh&gt; It looks like you only want to select specific columns. In that case you should do that in your SQL statement (instead of `SELECT * FROM` do `SELECT a,b FROM ...`). The purpose of :return-keys is to get keys generated by inserts from the DB.</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T14:08:06.122600</ts>
    <user>Hugh</user>
    <text>&lt;@Henry&gt; my statement is an `UPDATE` one though</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T14:10:41.125300</ts>
    <user>Celestine</user>
    <text>&lt;@Hugh&gt; `:return-keys` can accept a vector of column names on some (but not all) databases. You should not use `db-do-prepared-return-keys` really -- it's very low-level (and, I think, assumes you already have a `PreparedStatement` -- where you would have set those options _prior_ to calling it!).</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T14:11:01.125800</ts>
    <user>Celestine</user>
    <text>`insert!` and `execute!` should accept `:return-keys` with a vector (if your DB allows it).</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T14:11:24.126700</ts>
    <user>Celestine</user>
    <text>Also, there's always &lt;#C1Q164V29|sql&gt; for deeper `clojure.java.jdbc` questions (I'm more likely to see it there).</text>
  </message>
  <message conversation_id="378">
    <ts>2019-02-01T14:11:46.127000</ts>
    <user>Hugh</user>
    <text>ok changing channel</text>
  </message>
  <message conversation_id="379">
    <ts>2019-02-01T15:00:54.130600</ts>
    <user>Laurinda</user>
    <text>&lt;@Matha&gt; I use a very nice library by &lt;@Phebe&gt; that produces compact 26-char UUIDs: &lt;https://github.com/tonsky/compact-uuids&gt;</text>
  </message>
  <message conversation_id="379">
    <ts>2019-02-01T15:01:36.131000</ts>
    <user>Matha</user>
    <text>ah brilliant, ty!</text>
  </message>
  <message conversation_id="379">
    <ts>2019-02-01T15:06:56.131700</ts>
    <user>Becki</user>
    <text>i thought i remembered ghadi making or showing off someone else's uuid -&amp;gt; words library? does that ring a bell with anyone</text>
  </message>
  <message conversation_id="379">
    <ts>2019-02-01T15:08:14.132400</ts>
    <user>Marlyn</user>
    <text>ill post a gist of that, &lt;https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki&gt; is the spec</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:14:57.133300</ts>
    <user>Arnoldo</user>
    <text>If I wanted to hook into an existing protocol on a built-in type to provide some additional functionality, is there a better way than wrapping the protocol's method I want to extend?</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:19:39.134000</ts>
    <user>Dann</user>
    <text>well, there are no protocols or methods there</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:20:38.135000</ts>
    <user>Dann</user>
    <text>(there are protocols and methods in the implementation of the object passed to swap!, and swap! itself is an object extending IFn but I don't think that's what you mean)</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:21:12.135600</ts>
    <user>Dann</user>
    <text>but if you mean generally, you want to do an AOP style wrapping of an existing function, yeah that's what it typically looks like</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:22:00.136800</ts>
    <user>Dann</user>
    <text>though idiomatically `wrap-foo` means "hand this thing a function, it returns a new one", which isn't your semantics here, but that's a naming issue</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:22:47.137600</ts>
    <user>Arnoldo</user>
    <text>poor choice of nomenclature on my part... I basically just mean if I have a type that implements a protocol, and I want to do something extra with one or all of the functions implementing the protocol on that type, is that the best way</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:24:00.138900</ts>
    <user>Arnoldo</user>
    <text>yeah i named it `wrap` but it's more a passthrough method, agree on the naming</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:24:13.139400</ts>
    <user>Jasmine</user>
    <text>I don’t think protocols have anything to do with your question?</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:24:56.140000</ts>
    <user>Dann</user>
    <text>&lt;@Arnoldo&gt; once again that's not a method</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:25:28.140800</ts>
    <user>Dann</user>
    <text>method and function aren't interchangeable in Clojure, they mean specific things and we use both</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:26:12.141600</ts>
    <user>Arnoldo</user>
    <text>i didn't literally mean method, sorry... "passthrough methods" is just  naming convention for functions (or methods in other languages) that do nothing but delegate to another function</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:27:53.142600</ts>
    <user>Dann</user>
    <text>sure, most AOP style wrappers will take the original function and then use apply with a variable arg list like in your code</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:28:47.143600</ts>
    <user>Dann</user>
    <text>more commonly the function itself is passed as one of the args, which makes the wrapper more reusable (one reason functions are more flexible than methods)</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:30:33.144800</ts>
    <user>Dann</user>
    <text>&lt;@Arnoldo&gt; this is also visible in the signature of `swap!` itself, and `alter-var-root` - the function signatures make it easy to pass in a function that exists already, and return an "enhanced" version</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:30:51.145000</ts>
    <user>Arnoldo</user>
    <text>I noticed that actually...</text>
  </message>
  <message conversation_id="380">
    <ts>2019-02-01T15:31:19.145600</ts>
    <user>Dann</user>
    <text>oh, and I don't know why `a` is in your function signature there - it's valid to call swap! with a single arg function, and your definition makes that impossible</text>
  </message>
  <message conversation_id="381">
    <ts>2019-02-01T15:41:31.146900</ts>
    <user>Zenaida</user>
    <text>Hi! Is there a clever way to convert this `{:sku [111111111 22222222], :storeId 88888888}` to this `{:sku 111111111 :storeId 88888888}, {:sku 22222222 :storeId 88888888}`?</text>
  </message>
  <message conversation_id="381">
    <ts>2019-02-01T15:58:11.147200</ts>
    <user>Marlyn</user>
    <text>do it the simple way with mapcat</text>
  </message>
  <message conversation_id="381">
    <ts>2019-02-01T16:01:32.147400</ts>
    <user>Marlyn</user>
    <text>or map</text>
  </message>
  <message conversation_id="381">
    <ts>2019-02-01T16:01:46.147600</ts>
    <user>Bethel</user>
    <text>I am not sure about your expected result type. Perhaps you can use ((fn [m] (map #(assoc m :sku %1) (:sku m))) {:sku [111111111 22222222], :storeId 88888888}).</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T16:38:02.147800</ts>
    <user>Arnoldo</user>
    <text>((fn [m] (map #(hash-map :sku %1 :storeId %2)
               (:sku m) (repeat (:storeId m))))
  {:sku [111111111 22222222], :storeId 88888888})</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:06:45.151600</ts>
    <user>Arnoldo</user>
    <text>&lt;@Jasmine&gt; Stepped away for a minute... you're right I guess the question is less about protocols and more about conrete implementations.  Maybe an example would be better than me fumbling around with incorrect terminology:

If I have a single-function protocol implemented concretely by several different objects, and I want to inject some minor changes to one of the implementations (and don't have access to the code to modify it directly), is wrapping the way i've described generally the best way to go about that?  From an OO perspective, I would just subclass and then override the method of interest, do whatever extra stuff I needed to do, and then call the parent's overriden method from the child.</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:08:43.152000</ts>
    <user>Jasmine</user>
    <text>again, I don’t think the fact that this is a protocol function makes any difference</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:09:00.152400</ts>
    <user>Jasmine</user>
    <text>if there is a function, and you want stuff to happen before that call, wrap it in another function</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:10:17.153600</ts>
    <user>Jasmine</user>
    <text>Clojure intentionally abstracts invocation over functions, multimethods, protocol methods, macros (with asterisks), collections that are invokable, etc so that callers don’t know or care</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:11:16.154400</ts>
    <user>Jasmine</user>
    <text>in general in the core team we take it as a rule of thumb these days to wrap all protocol function invocations in an outer function that gives you a hook to handle special cases</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:12:21.155000</ts>
    <user>Jasmine</user>
    <text>for example, clojure.datafy/datafy is a wrapper function that calls clojure.core.protocols/datafy</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:12:47.155400</ts>
    <user>Jasmine</user>
    <text>protocols are best at the bottom, not at the top</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:18:44.156800</ts>
    <user>Arnoldo</user>
    <text>OK thanks for the clarification.</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:19:36.156900</ts>
    <user>Arnoldo</user>
    <text>A general version (couldn't think of a good name for the function, gave it my best shot)</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:19:39.157100</ts>
    <user>Arnoldo</user>
    <text>(defn explode-key [m explode-key anchor-key]
  (reduce #(conj %1 {explode-key %2 anchor-key (get m anchor-key)})
          []
          (get m explode-key)))

(explode-key {:sku [111111111 22222222], :storeId 88888888} :sku :storeId)</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:20:39.158400</ts>
    <user>Dann</user>
    <text>if you want something that swaps atoms differently, you can wrap swap! to get a new function, if you want a new thing that swaps differently than an atom you can implement IAtom, and that implementation could even be done compositionally by allocating and using an atom internally</text>
  </message>
  <message conversation_id="382">
    <ts>2019-02-01T17:21:09.159100</ts>
    <user>Dann</user>
    <text>but good usable clojure code tends to wrap functions when possible, rather than extending protocols</text>
  </message>
  <message conversation_id="383">
    <ts>2019-02-01T17:54:28.159300</ts>
    <user>Otelia</user>
    <text>```
  (defn add-store-id-to-skus [{:keys [sku storeId]}]
    (map #(hash-map :sku %, :storeId storeId) sku))
```</text>
  </message>
  <message conversation_id="383">
    <ts>2019-02-01T18:08:12.159600</ts>
    <user>Otelia</user>
    <text>&lt;@Jasmine&gt;, why do you specifically call out macros with asterisks? I thought the asterisk was just a way to name a variant of a function, like X and X prime, without any conventional meaning. But what you said makes me think there is a convention.</text>
  </message>
  <message conversation_id="383">
    <ts>2019-02-01T21:15:55.159800</ts>
    <user>Otelia</user>
    <text>Oh, maybe you meant with exceptions.</text>
  </message>
  <message conversation_id="383">
    <ts>2019-02-01T22:32:43.160700</ts>
    <user>Jasmine</user>
    <text>Yes, I just meant there were exceptions in the case of macros as you can’t use them as higher order functions</text>
  </message>
  <message conversation_id="383">
    <ts>2019-02-01T22:32:51.161000</ts>
    <user>Jasmine</user>
    <text>So the abstraction leaks</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T01:29:28.162000</ts>
    <user>Gemma</user>
    <text>None</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T01:30:43.162800</ts>
    <user>Gemma</user>
    <text>only when want to lein uberjar, with figwheel it works</text>
  </message>
  <message conversation_id="383">
    <ts>2019-02-02T01:41:04.163800</ts>
    <user>Gemma</user>
    <text>if I don't use `(wrap-defaults site-defaults)` it doesn't throw this error</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T01:54:27.164400</ts>
    <user>Celestine</user>
    <text>Base on that stack trace &lt;@Gemma&gt; it sounds like you're putting something invalid in the cookie "scope"?</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T01:56:46.165200</ts>
    <user>Gemma</user>
    <text>I deleted all the wrappers, where am I putting something in a cookie other than there?</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T01:57:03.165600</ts>
    <user>Gemma</user>
    <text>and why only with `wrap-defaults`?</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T01:59:46.166900</ts>
    <user>Celestine</user>
    <text>`wrap-defaults` adds a bunch of logic, and checks, around various parts of the Ring request/response so you wouldn't get the exception without it because not much is checked.</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:00:48.168000</ts>
    <user>Celestine</user>
    <text>Without seeing all your code it's hard to say what the problem is, but that error suggests that it thinks you are putting "bad attributes" into the `:cookies` key of the Ring request/response...</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:02:01.168100</ts>
    <user>Gemma</user>
    <text>None</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:02:57.168700</ts>
    <user>Gemma</user>
    <text>I also use sente, can it be the problem?</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:03:41.169400</ts>
    <user>Gemma</user>
    <text>and why is this specific too compiling? with lein figwheel works well</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:04:40.170300</ts>
    <user>Gemma</user>
    <text>I can show all my code, but it is a pretty big project, I just wanted to put it up on the server</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:12:26.170700</ts>
    <user>Celestine</user>
    <text>I'd be surprised if Sente was incompatible with Ring defaults...</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:13:21.171400</ts>
    <user>Celestine</user>
    <text>I would add some `println` debugging to see what the Ring request/response looks like and see if you can figure out what's the various submaps...</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:23:46.171800</ts>
    <user>Gemma</user>
    <text>None</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:24:38.173100</ts>
    <user>Gemma</user>
    <text>I don't even know how that "_ga" gets there, I dont have google analytics, I also remove google maps too</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:29:05.173500</ts>
    <user>Gemma</user>
    <text>oh, it was in cache, same error, nothing in :cookies</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:29:11.173600</ts>
    <user>Gemma</user>
    <text>None</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:35:57.174100</ts>
    <user>Gemma</user>
    <text>well, it was a dependency problem</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:36:12.174400</ts>
    <user>Gemma</user>
    <text>:exclusions [ring/ring-core] solved it</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:37:00.174900</ts>
    <user>Gemma</user>
    <text>`[ring-transit-middleware "0.1.3" :exclusions [ring/ring-core]]`</text>
  </message>
  <message conversation_id="384">
    <ts>2019-02-02T02:37:20.175400</ts>
    <user>Gemma</user>
    <text>thank you anyway, I never tried printing in a wrapper before, the more you know... :smile:</text>
  </message>
  <message conversation_id="385">
    <ts>2019-02-02T07:10:07.178000</ts>
    <user>Jalisa</user>
    <text>I would like to use `tap&amp;gt;` to debug. But since `tap&amp;gt;` retrns `true`/`false` and not the provided parameter, this is not trivial. What would be an elegant statement, which calls `tap&amp;gt;` whith my statement `(+ 1 2)` and then returns the value of my statement?</text>
  </message>
  <message conversation_id="385">
    <ts>2019-02-02T07:13:27.179500</ts>
    <user>Jalisa</user>
    <text>Looking for something shorter then `(let [result (+ 1 2)] (tap&amp;gt; result) result)`</text>
  </message>
  <message conversation_id="385">
    <ts>2019-02-02T07:15:02.179900</ts>
    <user>Henry</user>
    <text>&lt;@Jalisa&gt; `(doto (+ 1 2) tap&amp;gt;)`</text>
  </message>
  <message conversation_id="385">
    <ts>2019-02-02T07:17:41.180600</ts>
    <user>Henry</user>
    <text>I usually define something like `(defn spy&amp;gt; [x] (doto x tap&amp;gt;))`</text>
  </message>
  <message conversation_id="385">
    <ts>2019-02-02T09:03:14.182800</ts>
    <user>Jasmine</user>
    <text>Having tap&amp;gt; return the val is a pretty good idea - if you write up a CLJ jira for it, that would remind me to talk to Rich about it</text>
  </message>
  <message conversation_id="385">
    <ts>2019-02-02T09:05:08.183300</ts>
    <user>Jasmine</user>
    <text>Or adding spy&amp;gt; or something</text>
  </message>
  <message conversation_id="386">
    <ts>2019-02-02T10:05:10.183700</ts>
    <user>Mariela</user>
    <text>None</text>
  </message>
  <message conversation_id="386">
    <ts>2019-02-02T10:05:12.184100</ts>
    <user>Mariela</user>
    <text>code above, error below</text>
  </message>
  <message conversation_id="386">
    <ts>2019-02-02T10:05:15.184300</ts>
    <user>Mariela</user>
    <text>any workaround?</text>
  </message>
  <message conversation_id="386">
    <ts>2019-02-02T10:07:29.184400</ts>
    <user>Mariela</user>
    <text>got it `(ns-unmap *ns* 'Compiler)`</text>
  </message>
  <message conversation_id="385">
    <ts>2019-02-02T10:42:25.184600</ts>
    <user>Otelia</user>
    <text>thx!</text>
  </message>
  <message conversation_id="386">
    <ts>2019-02-02T15:08:14.187100</ts>
    <user>Patrice</user>
    <text>I’m trying to write a macro that will allow me to def a var with certain metadata attached. Using the reader macro in the middle of the macro doesn’t work!</text>
  </message>
  <message conversation_id="386">
    <ts>2019-02-02T15:11:00.187900</ts>
    <user>Meagan</user>
    <text>that’s true. I believe you can use `alter-meta!`</text>
  </message>
  <message conversation_id="386">
    <ts>2019-02-02T15:14:51.188300</ts>
    <user>Patrice</user>
    <text>&lt;@Meagan&gt; thanks!</text>
  </message>
  <message conversation_id="386">
    <ts>2019-02-02T15:17:03.190000</ts>
    <user>Patrice</user>
    <text>got it working! my motivation for this is to def a function in a namespace and preserve the docstring and arglists of a function from another namespace:
```
(defmacro def-with-doc [nom var-sym]
  (let [doc      (-&amp;gt; var-sym resolve meta :doc)
        arglists (-&amp;gt; var-sym resolve meta :arglists)]
    `(do
       ~(if doc
          `(def ~nom ~doc ~(-&amp;gt; var-sym resolve deref))
          `(def ~nom ~(-&amp;gt; var-sym resolve deref)))
       ~(when arglists
          `(alter-meta! (var ~nom) assoc :arglists (quote ~arglists))))))

(def-with-doc inspect ins/inspect)
```</text>
  </message>
  <message conversation_id="387">
    <ts>2019-02-02T15:58:16.190300</ts>
    <user>Henry</user>
    <text>this library has `import-vars` that does a similar thing, it keeps docstrings and works for fuctions and macros &lt;https://github.com/ztellman/potemkin&gt;</text>
  </message>
  <message conversation_id="388">
    <ts>2019-02-02T16:24:14.190600</ts>
    <user>Celestine</user>
    <text>Why not `assoc :doc` in the way you handle `:arglists`, then you don't need the `if` special case.</text>
  </message>
  <message conversation_id="388">
    <ts>2019-02-02T16:32:18.191300</ts>
    <user>Celestine</user>
    <text>You can avoid the conditionals altogther, like this ```
(defmacro def-with-doc [nom var-sym]
  `(do
    (def ~nom ~(-&amp;gt; var-sym resolve deref))
    (alter-meta! (var ~nom) merge '~(-&amp;gt; var-sym resolve meta (select-keys [:doc :arglists])))))
```</text>
  </message>
  <message conversation_id="388">
    <ts>2019-02-02T16:35:24.191500</ts>
    <user>Celestine</user>
    <text>If you want that to work for macros too, add `:macro` to the keys in the `select-keys` call.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-02T23:48:36.192900</ts>
    <user>Fredda</user>
    <text>You know what might be nice? An thread macro that can optionally escape forms, like `(-&amp;gt; n dec #esc #(- 9 % 1) inc)`</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-02T23:52:00.194700</ts>
    <user>Fredda</user>
    <text>such that, instead of the value being threaded into the beginning or end of the anonymous function, the fn is allowed to convert itself into its evaluated form, and the thread sees it as a one arg fn.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-02T23:53:21.195300</ts>
    <user>Fredda</user>
    <text>What would be an ideal notation for that thread escaping?</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-02T23:55:48.195900</ts>
    <user>Celestine</user>
    <text>Why wouldn't you just use `as-&amp;gt;` for that? `(-&amp;gt; n dec (as-&amp;gt; n (- 9 n 1)) inc)`</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-02T23:56:42.196600</ts>
    <user>Fredda</user>
    <text>Cause then I could just use `-&amp;gt;` for everything, and escape optionally</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-02T23:57:11.197200</ts>
    <user>Celestine</user>
    <text>Seems to me that `as-&amp;gt;` _is_ the "escape" function...</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-02T23:57:43.197800</ts>
    <user>Celestine</user>
    <text>`(-&amp;gt; n dec (as-&amp;gt; % (- 9 % 1)) inc)` if you prefer `%` for the argument name.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-02T23:58:22.198500</ts>
    <user>Celestine</user>
    <text>`(-&amp;gt; n dec #esc   #(- 9 % 1)  inc)` it's not all that different -- and it's built-in, no language extensions needed</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-02T23:59:42.199500</ts>
    <user>Fredda</user>
    <text>`(-&amp;gt; n dec #~(- 9 % 1) inc)` that might look prettier... and I wouldn't have to switch between two different thread macro contexts</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:00:20.200100</ts>
    <user>Fredda</user>
    <text>or `(-&amp;gt; n dec #~#(- 9 % 1) inc)`</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:05:01.201000</ts>
    <user>Celestine</user>
    <text>Meh... you've saving so few keystrokes, and introducing non-standard syntax... I see no benefit.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:08:08.202700</ts>
    <user>Fredda</user>
    <text>you could even switch some assoc's cleaner `(-&amp;gt; n (- 3) dec #~#(assoc state :n %) keys)`</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:08:33.203300</ts>
    <user>Celestine</user>
    <text>```
(-&amp;gt; n (- 3) dec (-&amp;gt;&amp;gt; (assoc state :n)) keys)
(-&amp;gt; n (- 3) dec (as-&amp;gt; % (assoc state :n %)) keys)
(-&amp;gt; n (- 3) dec #~#(assoc state :n %) keys) ; more cryptic and only one character shorter?
```</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:08:56.203600</ts>
    <user>Fredda</user>
    <text>Yeah, I use multiple thread macros some times</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:09:43.204400</ts>
    <user>Fredda</user>
    <text>I hear you, I'm not completely sold on it either... I'd have to kick the tires on it some more.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:11:37.205800</ts>
    <user>Fredda</user>
    <text>And I'm not saying add a reader macro for `#~` language wide. Just add another thread macro that detects it, like `-#&amp;gt;` or something</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:11:55.206100</ts>
    <user>Celestine</user>
    <text>Code golf. Doesn't make code any clearer.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:13:15.207600</ts>
    <user>Celestine</user>
    <text>Don't get me wrong, I find `(partial f a b)` to be annoyingly long, as well as `(comp f g)`, compared to Haskell's auto-currying and therefore `f a b` and `f . g` but it really isn't worth messing up the language syntax for a few characters of typing...</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:14:07.208300</ts>
    <user>Fredda</user>
    <text>It's not about saving characters. It's about semantic context switching between various thread macro semantics</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:14:24.208600</ts>
    <user>Celestine</user>
    <text>We're going to disagree on that.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:14:51.209100</ts>
    <user>Celestine</user>
    <text>I find this much more readable than your proposal `(-&amp;gt; n (- 3) dec (-&amp;gt;&amp;gt; (assoc state :n)) keys)`</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:15:41.210100</ts>
    <user>Celestine</user>
    <text>Especially when written indented: ```
(-&amp;gt; n
    (- 3)
    dec
    (-&amp;gt;&amp;gt; (assoc state :n))
    keys)```</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:17:01.212100</ts>
    <user>Celestine</user>
    <text>There's also a strong argument that such long threads are inherently hard to read already and should be broken into named segments with `let`...</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:17:31.212700</ts>
    <user>Fredda</user>
    <text>hmmm. perhaps the idea could be further generalized and simplified... Perhaps `-#&amp;gt;` could just evaluate all anonymous functions defined within the thread first ... then it's just `(-#&amp;gt; n #(- 9 % 3) dec #(assoc state :n %) keys)`</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:18:21.213100</ts>
    <user>Celestine</user>
    <text>Personally, I think that's horribly ugly. It's not even consistent.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:18:52.213800</ts>
    <user>Celestine</user>
    <text>You're mixing an implicit `-&amp;gt;` with regular anonymous functions :disappointed:</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:19:23.214300</ts>
    <user>Fredda</user>
    <text>It makes sense though... It's a thread macro that auto-evaluates anonymous functions first.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:19:35.214600</ts>
    <user>Celestine</user>
    <text>It doesn't make sense to me. It's horrible.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:19:39.214800</ts>
    <user>Fredda</user>
    <text>lol</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:20:58.216300</ts>
    <user>Fredda</user>
    <text>I know you're just saying that to goad me into writing a library for it... And I'm not gonna do it!</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:21:04.216500</ts>
    <user>Celestine</user>
    <text>`(as-&amp;gt; n % (- 9 % 3) (dec %) (assoc state :n %) (keys %))` is also horrible but at least it's consistent (and, hey, already possible/legal in Clojure).</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:27:58.217900</ts>
    <user>Fredda</user>
    <text>well, I guess that `-#&amp;gt;` is pointless, since it's basically just doing function application, just unwinding it, for less parenthesis</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:28:15.218300</ts>
    <user>Celestine</user>
    <text>Consistency has had me recently move to wrapping all the forms in `( .. )` in a threaded macro BTW.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:28:52.218900</ts>
    <user>Celestine</user>
    <text>So I'm more likely to write: ```
(-&amp;gt; n
    (- 3)
    (dec)
    (-&amp;gt;&amp;gt; (assoc state :n))
    (keys))```</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:29:02.219100</ts>
    <user>Fredda</user>
    <text>interesting</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:29:19.219400</ts>
    <user>Fredda</user>
    <text>For visual clarity?</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:29:33.219800</ts>
    <user>Celestine</user>
    <text>The more code I maintain, the more consistency and simplicity have come to matter.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:30:07.220200</ts>
    <user>Celestine</user>
    <text>And we're at ```Clojure source 280 files 65913 total loc,
Clojure tests 320 files 22004 total loc,
``` these days.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:31:14.220800</ts>
    <user>Celestine</user>
    <text>(nearly 88k lines... that's quite shocking to me, really, given where we were just a few years ago!)</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:33:01.222200</ts>
    <user>Fredda</user>
    <text>Yeah, that's pretty awesome</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:34:44.222900</ts>
    <user>Meagan</user>
    <text>but I also hate nesting them. I think it's confusing</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:34:45.223000</ts>
    <user>Meagan</user>
    <text>I like wrapping all my threaded forms in parens too</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:34:58.223300</ts>
    <user>Celestine</user>
    <text>No `lein`, no `boot`. Just `clj` and `deps.edn` these days too.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:35:27.223700</ts>
    <user>Celestine</user>
    <text>(and, of course, Clojure 1.10 in production, and testing against 1.11 master :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:40:30.225500</ts>
    <user>Fredda</user>
    <text>I guess that last `-#&amp;gt;` I described is really `comp&amp;gt;`. It reverses the order of comp, so it reads like definition order, but allows you to thread in forms in the comp that are not functions.</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:40:57.225900</ts>
    <user>Celestine</user>
    <text>Like transducers? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:41:31.226600</ts>
    <user>Fredda</user>
    <text>ooooh, `transduce-&amp;gt;`</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:41:39.226800</ts>
    <user>Celestine</user>
    <text>:rolling_on_the_floor_laughing:</text>
  </message>
  <message conversation_id="389">
    <ts>2019-02-03T00:41:49.227000</ts>
    <user>Fredda</user>
    <text>lol</text>
  </message>
  <message conversation_id="390">
    <ts>2019-02-03T01:10:08.227500</ts>
    <user>Tressa</user>
    <text>things get pretty nasty when i abuse threading macros</text>
  </message>
  <message conversation_id="390">
    <ts>2019-02-03T01:10:36.228100</ts>
    <user>Tressa</user>
    <text>so when i notice I'm Doing It Again i rewrite the whole thing with lets to see which is simpler</text>
  </message>
  <message conversation_id="390">
    <ts>2019-02-03T06:07:49.228900</ts>
    <user>Henry</user>
    <text>When it comes to weird threading macros, this library is funny &lt;https://github.com/rplevy/swiss-arrows&gt;</text>
  </message>
  <message conversation_id="391">
    <ts>2019-02-03T08:33:59.231200</ts>
    <user>Shayla</user>
    <text>My issue with using `let`s instead of threading macros is it allows me to write more procedural/pythonic code, instead of finding a functional way to write it</text>
  </message>
  <message conversation_id="391">
    <ts>2019-02-03T08:35:51.233300</ts>
    <user>Shayla</user>
    <text>I’ve been working on a lot of ETL pipelines recently, so extracting my complicated `let` conditionals into functions I can thread has been very helpful in maintaining the functional mindset</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T09:05:02.233800</ts>
    <user>Matha</user>
    <text>To store clojure data structures in a database (postgresql in my case), would you just store the EDN representation or encode it with transit?</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T09:12:44.235100</ts>
    <user>Min</user>
    <text>If you dont care about querying use something like fressian or nippy</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T10:18:21.236000</ts>
    <user>Sixta</user>
    <text>&lt;@Matha&gt; using transit json-pretty gives you the option to query it in the future if you please.</text>
  </message>
  <message conversation_id="393">
    <ts>2019-02-03T10:18:28.236300</ts>
    <user>Sixta</user>
    <text>We have done this on a project before.</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T10:20:21.236800</ts>
    <user>Matha</user>
    <text>&lt;@Sixta&gt; oh I didn’t know that option, thank you</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T10:21:10.236900</ts>
    <user>Matha</user>
    <text>what is the json pretty option?</text>
  </message>
  <message conversation_id="393">
    <ts>2019-02-03T10:33:23.237100</ts>
    <user>Ali</user>
    <text>I think it's supposed to be read as an n/m dash rather than a hyphen.</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T10:57:54.238200</ts>
    <user>Matha</user>
    <text>When I try to require a namespace in the REPL but it fails because of a syntax error in said namespace’s file, how can I reload it after correcting the error? running require again throws a “namespace not found” error</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T11:01:04.239200</ts>
    <user>Sixta</user>
    <text>&lt;@Matha&gt; guessing you might want to try `(require 'foo :reload)`</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T11:01:17.239500</ts>
    <user>Matha</user>
    <text>&lt;@Sixta&gt; I tried that, it didn’t work :thinking_face:</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T12:45:22.239900</ts>
    <user>Isa</user>
    <text>&lt;@Matha&gt; &lt;https://clojuredocs.org/clojure.core/require&gt; see `:reload` and `:reload-all`</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T12:45:36.240300</ts>
    <user>Isa</user>
    <text>precise
&amp;gt; it didn’t work :thinking_face:
:wink:</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T12:45:42.240500</ts>
    <user>Matha</user>
    <text>&lt;@Isa&gt; I tried `:reload` but that didn’t work. I’ll try again</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T12:45:43.240800</ts>
    <user>Matha</user>
    <text>ah, mwell</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T12:45:46.241100</ts>
    <user>Matha</user>
    <text>it threw the same error</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T12:45:50.241300</ts>
    <user>Matha</user>
    <text>hang on, I’ll reproduce it</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T12:46:33.241600</ts>
    <user>Isa</user>
    <text>but normally you use editor shortcuts to do that</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T15:59:46.244500</ts>
    <user>Meagan</user>
    <text>I have probably a silly question:
```
(let [foo (my-macro)]
  ...)
```

I want `my-macro` to know that it has been bound to the symbol `foo` in this context.
Impossible, yes?</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T16:00:53.244800</ts>
    <user>Harris</user>
    <text>yes</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T16:05:33.245600</ts>
    <user>Meagan</user>
    <text>:sob: thought so</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T16:08:12.246400</ts>
    <user>Meagan</user>
    <text>OK, followup: is there _any way_ (hacky or otherwise) to get at the let bindings inside of a function?</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T16:11:42.247300</ts>
    <user>Meagan</user>
    <text>I have a lib where I’d like to provide some report of how it’s used inside of an opaque function</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T16:13:44.249100</ts>
    <user>Meagan</user>
    <text>using some fancy tricks I can show what was passed in when the library functions were invoked, and the _order_ of invocation, but I’m losing some semantics because there’s no names attached to them</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T16:22:08.249400</ts>
    <user>Magdalena</user>
    <text>[ANN] com.cognitect.aws/api-0.8.243  is released: &lt;https://groups.google.com/forum/#!topic/clojure/wzEy8tSSKF0&gt;</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T16:44:54.250100</ts>
    <user>Fredda</user>
    <text>&lt;@Meagan&gt; you can get the line number with `(-&amp;gt; &amp;amp;form meta :line)`</text>
  </message>
  <message conversation_id="392">
    <ts>2019-02-03T16:53:27.251200</ts>
    <user>Meagan</user>
    <text>it would still be hard to know exactly what name it was bound to, but that could be hilariously hacky</text>
  </message>
  <message conversation_id="394">
    <ts>2019-02-03T17:06:51.252200</ts>
    <user>Fredda</user>
    <text>you can get the namespace in there too, but yeah :confused:</text>
  </message>
  <message conversation_id="395">
    <ts>2019-02-04T05:00:27.255500</ts>
    <user>Bree</user>
    <text>how can I find the approximate size (bytes of memory) of a piece of Clojure data?</text>
  </message>
  <message conversation_id="395">
    <ts>2019-02-04T05:01:01.256100</ts>
    <user>Bree</user>
    <text>alternately, what is the approx size of maps and keywords?</text>
  </message>
  <message conversation_id="395">
    <ts>2019-02-04T05:11:15.256600</ts>
    <user>Sixta</user>
    <text>&lt;@Bree&gt; &lt;https://github.com/clojure-goes-fast/clj-memory-meter&gt;</text>
  </message>
  <message conversation_id="396">
    <ts>2019-02-04T05:14:01.257100</ts>
    <user>Bree</user>
    <text>awesome, more than I could have hoped for :slightly_smiling_face:</text>
  </message>
  <message conversation_id="396">
    <ts>2019-02-04T05:14:02.257300</ts>
    <user>Bree</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="397">
    <ts>2019-02-04T08:17:43.259100</ts>
    <user>Elaine</user>
    <text>There is some "core utils" with a `index-by` function, that do `(index-by :id [{:id 1}]) =&amp;gt; {1 {:id 1}}`?? It's almost like group-by, but do not conj on value.</text>
  </message>
  <message conversation_id="397">
    <ts>2019-02-04T08:19:24.259900</ts>
    <user>Clarine</user>
    <text>yes, there is, but often people write it themselves, using `(into {} (map (juxt f identity) coll))`</text>
  </message>
  <message conversation_id="397">
    <ts>2019-02-04T08:21:01.260500</ts>
    <user>Clarine</user>
    <text>This PR for medley has been open for a while. I like the name `index-by` better. Propose it :wink: &lt;https://github.com/weavejester/medley/pull/28&gt;</text>
  </message>
  <message conversation_id="398">
    <ts>2019-02-04T08:49:07.262700</ts>
    <user>Vita</user>
    <text>&lt;https://github.com/vodori/missing&gt; (a lib I maintain) has index-by and indexcat-by and groupcat-by :P</text>
  </message>
  <message conversation_id="397">
    <ts>2019-02-04T08:55:54.263100</ts>
    <user>Harris</user>
    <text>&lt;@Elaine&gt; not exactly but `clojure.set/index`</text>
  </message>
  <message conversation_id="398">
    <ts>2019-02-04T08:56:02.263300</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; (set/index [{:id 1} {:id 2} {:id 1 :x 2}] [:id])
{{:id 1} #{{:id 1, :x 2} {:id 1}}, {:id 2} #{{:id 2}}}```</text>
  </message>
  <message conversation_id="399">
    <ts>2019-02-04T10:08:39.264100</ts>
    <user>Tracee</user>
    <text>Hello guys!! Do we have a channel for `Lacinia`? I have found one, but it is archived..</text>
  </message>
  <message conversation_id="398">
    <ts>2019-02-04T10:31:40.264500</ts>
    <user>Katherina</user>
    <text>&lt;#C4DLZKR9T|graphql&gt; should be the one i think</text>
  </message>
  <message conversation_id="399">
    <ts>2019-02-04T10:39:00.264700</ts>
    <user>Tracee</user>
    <text>Thank you!!</text>
  </message>
  <message conversation_id="400">
    <ts>2019-02-04T10:52:22.269500</ts>
    <user>Danna</user>
    <text>I am using `clojure.edn/read` to read an .edn file which contains `#object[` tags like `#object[java.io.File 0x6ae4aa5 "hello-world.pdf"]`
Ideally I would like to  interpret these as a record, something like  `(-&amp;gt;EdnObject clazzname identityHashCode string-description)`
at the moment I get an error
```java.lang.RuntimeException: No reader function for tag object```
Is the preexisting reader function that I can reuse to do this?
Do I have to write my own?</text>
  </message>
  <message conversation_id="400">
    <ts>2019-02-04T11:00:31.269600</ts>
    <user>Danna</user>
    <text>I was hoping to wire in the binding using
```(binding [clojure.core/*data-readers* (assoc clojure.core/*data-readers*
                                        'object #'dev/my-special-edn-binding)]```
does that only work for namespaced tags?</text>
  </message>
  <message conversation_id="400">
    <ts>2019-02-04T11:10:28.269800</ts>
    <user>Danna</user>
    <text>oh I see I can just pass in `:readers` in the options to `clojure.edn/read`
thus
```(clojure.edn/read {:eof eof-sentinel :readers {'object #'dev/my-special-edn-binding}} r)```</text>
  </message>
  <message conversation_id="400">
    <ts>2019-02-04T11:10:53.270000</ts>
    <user>Roslyn</user>
    <text>&lt;http://insideclojure.org/2018/06/21/tagged-literal/&gt;</text>
  </message>
  <message conversation_id="400">
    <ts>2019-02-04T11:10:55.270200</ts>
    <user>Danna</user>
    <text>top banana</text>
  </message>
  <message conversation_id="400">
    <ts>2019-02-04T11:12:47.270700</ts>
    <user>Danna</user>
    <text>thank vlaad; that good to know</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:06:58.272200</ts>
    <user>Ronald</user>
    <text>Why is spec imported as `spec.alpha`? Does this notation imply that the interface is liable to change?</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:09:49.272700</ts>
    <user>Dann</user>
    <text>it has alpha in the name because it is alpha, yes</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:11:28.273900</ts>
    <user>Ronald</user>
    <text>It just seems odd to explicitly notate it, since AFAIK breaking changes have happened in Clojure core even when not notated alpha</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:11:38.274300</ts>
    <user>Dann</user>
    <text>very rarely</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:11:38.274400</ts>
    <user>Jasmine</user>
    <text>trying to do better :)</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:11:50.274900</ts>
    <user>Celestine</user>
    <text>`(:require [clojure.spec.alpha :as s])` means that when it comes out of alpha you can just update that to `(:require [clojure.spec :as s])` and (hopefully) not having to change your code :slightly_smiling_face:</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:11:51.275100</ts>
    <user>Jasmine</user>
    <text>spec 2 dev is under way and will likely include some breaking changes</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:11:58.275300</ts>
    <user>Celestine</user>
    <text>Except for those breaking changes :slightly_smiling_face:</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:12:05.275600</ts>
    <user>Jasmine</user>
    <text>although we are trying to minimize those</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:13:32.276800</ts>
    <user>Celestine</user>
    <text>We're very heavy users of spec and I have almost everything running at work on spec2 -- and the code changes weren't too extensive. I'm still working with Alex on a couple of issues tho'... :slightly_smiling_face:</text>
  </message>
  <message conversation_id="401">
    <ts>2019-02-04T14:23:59.277700</ts>
    <user>Jasmine</user>
    <text>more changes to come, although I expect a lot will be additive</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T14:57:36.279000</ts>
    <user>Ronald</user>
    <text>Sounds good - really I was just curious about the choice of notation, I'm not concerned too about having to make small changes to keep using spec :slightly_smiling_face:</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T14:59:32.279700</ts>
    <user>Celestine</user>
    <text>There was a good thread about the `alpha` naming here &lt;https://clojureverse.org/t/are-clojure-core-alpha-namespaces-chosen-to-avoid-upgrade-conflicts/3722/5&gt; -- relating to Rich's talk about semantic versioning and accretive design...</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:00:31.280100</ts>
    <user>Ronald</user>
    <text>Thanks for the link &lt;@Celestine&gt;</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:06:33.281200</ts>
    <user>Celestine</user>
    <text>Strong adoption of Clojure 1.10 in the State of the (Clojure) Union survey results! Already 54% on 1.10. That's awesome. And only 3% on 1.7 or earlier. Great news for library developers.</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:08:29.281700</ts>
    <user>Bree</user>
    <text>that's the result of caring about backwards compatibility :ok_hand:</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:08:41.282100</ts>
    <user>Bree</user>
    <text>stable software :heart:</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:08:47.282300</ts>
    <user>Jasmine</user>
    <text>I was actually disappointed it was so low :)</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:09:03.282700</ts>
    <user>Bree</user>
    <text>agreed, should've been higher</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:09:24.283100</ts>
    <user>Bree</user>
    <text>but I'm more surprised at 3% on 1.7 or earlier</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:09:45.283900</ts>
    <user>Jasmine</user>
    <text>in line with prior surveys - generally most people are on the last 2-3 releases</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:09:46.284000</ts>
    <user>Becki</user>
    <text>conversely, people who updated were much more likely to participate in the survey :slightly_smiling_face:</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:10:06.284300</ts>
    <user>Jasmine</user>
    <text>always hard to predict the selection bias for respondents</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:10:24.284700</ts>
    <user>Becki</user>
    <text>agreed. really looking forward to the results. i like hearing from fellow clojure users</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:11:54.285400</ts>
    <user>Bree</user>
    <text>I'll throw in another data point: thanks a lot for the tireless great work you and your team put in &lt;@Jasmine&gt;!</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:12:24.286000</ts>
    <user>Becki</user>
    <text>agreed. immutable datastructures, a repl, and an alex. all features i value in Clojure</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:13:49.286200</ts>
    <user>Jasmine</user>
    <text>tell your friends :)</text>
  </message>
  <message conversation_id="402">
    <ts>2019-02-04T15:14:54.286500</ts>
    <user>Bree</user>
    <text>I do that too :slightly_smiling_face:</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:46:19.287400</ts>
    <user>Kirstin</user>
    <text>is this a pattern that people use?

```
#(do [:a :vector :or :other :literal])
```

or do most people opt for specific constructor functions (or `into` etc) ?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:46:50.287700</ts>
    <user>Kirstin</user>
    <text>i tend to go with `do` because it's only two characters</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:47:48.288400</ts>
    <user>Clarine</user>
    <text>I tend to go with `(fn [] [:a :vector])` or `(constantly [:whatever])`</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:48:24.289200</ts>
    <user>Kirstin</user>
    <text>the question pertains specifically to lambdas</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:48:33.289500</ts>
    <user>Kirstin</user>
    <text>i.e., assume you are using a lambda then ...</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:49:10.290900</ts>
    <user>Kirstin</user>
    <text>there are reasons why i don't always use a lambda but if a lambda is available to me, then I do opt for it first.</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:49:38.291300</ts>
    <user>Clarine</user>
    <text>with lambda you mean a function literal?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:49:46.291700</ts>
    <user>Jasmine</user>
    <text>`#(vector :a :vector)`</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:49:58.292200</ts>
    <user>Jasmine</user>
    <text>^^ if you want a vector constructor, use the vector constructor</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:50:08.292500</ts>
    <user>Kirstin</user>
    <text>&lt;@Clarine&gt; no, i mean the `#( ... )` shorthand syntax for a function literal</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:50:31.293100</ts>
    <user>Kirstin</user>
    <text>any reason for this preference? performance or aesthetic?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:50:50.293600</ts>
    <user>Clarine</user>
    <text>bikeshedding if you ask me</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:50:58.293800</ts>
    <user>Jasmine</user>
    <text>I think it is clearest way to say what you are doing here. you are invoking a function to make a vector from some elements</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:51:10.294200</ts>
    <user>Kirstin</user>
    <text>&lt;@Clarine&gt; yea, probably. was just staring at some code and wondered what other people thought.</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:51:19.294300</ts>
    <user>Meagan</user>
    <text>just FYI, things that start with `#` are referred to as "literals"</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:51:28.294500</ts>
    <user>Jasmine</user>
    <text>whereas #(do […]) is fewer characters but much weirder imo</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:51:54.294700</ts>
    <user>Kirstin</user>
    <text>fyi... `{:a :b}` is a literal. `[:a :b]` is also a literal.</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:52:18.294900</ts>
    <user>Kirstin</user>
    <text>as are: `9`, `:a`, `"blah"` etc etc</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:52:27.295200</ts>
    <user>Clarine</user>
    <text>&lt;@Kirstin&gt; #(…) is a function literal</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:53:02.295400</ts>
    <user>Meagan</user>
    <text>OK, sorry; I'm just basing this off of the Clojure docs: &lt;https://clojure.org/guides/higher_order_functions#_function_literals&gt;</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:53:14.295600</ts>
    <user>Kirstin</user>
    <text>&lt;@Clarine&gt; ah, got it.</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:53:28.295800</ts>
    <user>Kirstin</user>
    <text>what would you call `(fn [] ...)` then?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:53:34.296000</ts>
    <user>Kirstin</user>
    <text>just "anonymous function" ?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:53:40.296200</ts>
    <user>Clarine</user>
    <text>yes</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:53:46.296400</ts>
    <user>Kirstin</user>
    <text>[although technically it can be named too :)]</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:53:56.296600</ts>
    <user>Kirstin</user>
    <text>`(fn the-name [] ...)`</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:54:05.296800</ts>
    <user>Meagan</user>
    <text>yeah. or a "form" maybe?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:54:12.297000</ts>
    <user>Clarine</user>
    <text>function value?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:54:31.297200</ts>
    <user>Clarine</user>
    <text>just function maybe. don’t know</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:55:01.297400</ts>
    <user>Kirstin</user>
    <text>lol, yea, i tend to prefer fewer characters unless it's really confusing</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:55:03.297600</ts>
    <user>Clarine</user>
    <text>the function’s name is only known to itself, so it’s still anonymous to the outside</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:56:16.297800</ts>
    <user>Kirstin</user>
    <text>another argument for `do` is that it is possible to return any literal that way, not just the ones which happen to have a nice constructor (like say `vector` or `hash-map`).</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:59:24.299000</ts>
    <user>Lemuel</user>
    <text>I am seeing the weirdest thing:  (symbol x) returning nil, when we are passing it a valid string without a slash, and both `type` and `class` report java.lang.String.</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T15:59:43.299300</ts>
    <user>Lemuel</user>
    <text>I don't see how this can happen, though.  Has anyone seen this?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:02:19.299900</ts>
    <user>Rosaline</user>
    <text>not possible, so it is something else</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:02:42.300300</ts>
    <user>Lemuel</user>
    <text>I agree that it is not possible, however, I am repeatedly demonstrating it.</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:02:47.300500</ts>
    <user>Rosaline</user>
    <text>I doubt it</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:02:56.300700</ts>
    <user>Lemuel</user>
    <text>heh.</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:03:25.301300</ts>
    <user>Rosaline</user>
    <text>are you literally doing `(doto (symbol x) (-&amp;gt; class prn))` ?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:05:43.301700</ts>
    <user>Jasmine</user>
    <text>don’t all of the literals have a constructor though?</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:08:54.302200</ts>
    <user>Lemuel</user>
    <text>I'm going to see how far I can whittle down the example, but this is the current state: &lt;https://gist.github.com/eraserhd/f4f8f52fb43a2e4a5b6fc740a1101c02&gt;</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:09:42.302500</ts>
    <user>Rosaline</user>
    <text>you are shadowing clojure.core/symbol with the argument name</text>
  </message>
  <message conversation_id="404">
    <ts>2019-02-04T16:09:58.302600</ts>
    <user>Lemuel</user>
    <text>hahaha!</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:10:08.302900</ts>
    <user>Lemuel</user>
    <text>It's OK everyone.  Compiler's not broken</text>
  </message>
  <message conversation_id="403">
    <ts>2019-02-04T16:10:27.303200</ts>
    <user>Lemuel</user>
    <text>&lt;@Rosaline&gt; thanks. :P</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:43:25.305000</ts>
    <user>Katharina</user>
    <text>So I'm trying to generate longs with `clojure.spec.gen.alpha/large-generator`. This works fine when using `generate`, but with `clojure.spec.gen.alpha/sample` it generates extremely low values (+-60 from 0). I need it to generate pretty much the full range of longs. Any idea why it has this behavior?</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:46:50.305100</ts>
    <user>Tammera</user>
    <text>it generates larger integers with a larger sample size</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:47:26.305300</ts>
    <user>Tammera</user>
    <text>What I think it is trying to do is try the “edge” cases first, so zero, minus one, plus one, etc. Before actually switching to completely random longs</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:48:13.305500</ts>
    <user>Katharina</user>
    <text>Hmm, seems your right. The numbers get more random as I get more. Anyway I can force it to be random from the beginning?</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:48:48.305700</ts>
    <user>Tammera</user>
    <text>I am not sure, you can always define your own generator tho</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:49:12.305900</ts>
    <user>Katharina</user>
    <text>Alright, thanks!</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:49:48.306100</ts>
    <user>Tammera</user>
    <text>May I ask, why don’t you just increase the sample size?</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:50:00.306300</ts>
    <user>Tammera</user>
    <text>Is there really no value in testing small values for you</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:51:18.306500</ts>
    <user>Katharina</user>
    <text>Yeah, I'm testing dates. So one low value is fine (Jan 1, 1970), but then I want to start seeing other values. Having to scroll past the first 10 values in the web app is just wasting space, but it may be the easiest solution. Or I guess I could drop the first 10 or so values</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:53:11.306800</ts>
    <user>Tammera</user>
    <text>Well - from a formal background - I understand why gen is doing this, bugs usually occur on boundaries. So testing for `0`, `-1`, `1` etc. is usually more valuable than testing complete random values. Further reading: boundary analysis</text>
  </message>
  <message conversation_id="405">
    <ts>2019-02-04T16:55:32.307000</ts>
    <user>Katharina</user>
    <text>Cool. Thanks for the input. I appreciate the help</text>
  </message>
  <message conversation_id="406">
    <ts>2019-02-04T17:54:32.307500</ts>
    <user>Jasmine</user>
    <text>that’s not actually why - gen is designed to “grow” more “complex” values as it generates more samples, then has support for “shrinking” a complex test case into a simpler one</text>
  </message>
  <message conversation_id="406">
    <ts>2019-02-04T17:55:11.307700</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md&gt;</text>
  </message>
  <message conversation_id="406">
    <ts>2019-02-04T17:59:47.308000</ts>
    <user>Jasmine</user>
    <text>you can use `large-integer*` to generate longs with uniform distribution (note: spec’s `int-in` uses this so that’s another path)</text>
  </message>
  <message conversation_id="406">
    <ts>2019-02-04T18:02:54.308200</ts>
    <user>Jasmine</user>
    <text>well, actually those might grow too</text>
  </message>
  <message conversation_id="406">
    <ts>2019-02-04T18:04:38.308400</ts>
    <user>Jasmine</user>
    <text>my memory was faulty</text>
  </message>
  <message conversation_id="407">
    <ts>2019-02-04T19:40:09.309000</ts>
    <user>Lana</user>
    <text>I am eager to move to it, but am being held back by CIDER not coping with the change in error format. Normally I adopt much faster. :smile:</text>
  </message>
  <message conversation_id="408">
    <ts>2019-02-04T20:14:19.309800</ts>
    <user>Tammera</user>
    <text>Hah, interesting!</text>
  </message>
  <message conversation_id="408">
    <ts>2019-02-04T20:23:23.310900</ts>
    <user>Tammera</user>
    <text>I stand corrected ^^</text>
  </message>
  <message conversation_id="408">
    <ts>2019-02-04T21:55:06.316700</ts>
    <user>Alix</user>
    <text>What strategies, if any, do people use to decouple sub systems within an application. For example decoupling a database access layer. I've been using protocols to group common functions and passing the instances down into subsystems using `stuartsierra/component`. I can also see people using `weavejester/integrant` and mapping single functions. I can also see directly coupling/referencing subsystems and segregating them in separate namespaces.</text>
  </message>
  <message conversation_id="408">
    <ts>2019-02-04T22:13:09.318600</ts>
    <user>Milford</user>
    <text>I have a project where starting a REPL with Java 1.8.0_192 takes 11 seconds and with Java 1.8.0_201 takes 44 seconds. I'm wondering if this is a known issue or something idiosyncratic to my project.</text>
  </message>
  <message conversation_id="409">
    <ts>2019-02-04T22:29:22.319500</ts>
    <user>Milford</user>
    <text>Looks like the Clojure portion ^ is easy to repro with a fresh React Native project; will check in &lt;#C0E1SN0NM|cljsrn&gt;</text>
  </message>
  <message conversation_id="409">
    <ts>2019-02-04T23:01:59.319700</ts>
    <user>Mariela</user>
    <text>Protocols are a must for (clean) testability IMO. Also nice being able to change libraries in a future (e.g. Bidi -&amp;gt; ataraxy)

At work we use separate directories for protocols and impls. At first I agreed but I came to realise this creates an awkward indirection.

90% of times there's just 1 relevant implementation for a protocol. So one's IDE's jump-to-def will take you to the protocol ns, not the impl ns. That's the awkward point, and a good reason to place protocols close to impls

bad:

```
protocols/
 foo.clj
 ...
impls/
 foo.clj
  ...
```

better:

```
components/
  foo/
    protocol.clj
    impl.clj
  bar/
  baz/
  ...
```

This becomes evident as the app size scales

I wouln't create proto and impl in the same ns, it forces you to choose different fn names to avoid clashes. Better to have it uniform</text>
  </message>
  <message conversation_id="409">
    <ts>2019-02-04T23:05:02.319900</ts>
    <user>Mariela</user>
    <text>As for Component vs Int, Int has "suspend" capabilities which I believe can make the restart process more graceful and/or performant. Haven't tried it though.

&lt;https://github.com/weavejester/suspendable&gt; might work as well for Component

I like Component. With &lt;https://github.com/stuartsierra/component/pull/62&gt; now it's as lightweight and data-driven as Integrant (or even more so)</text>
  </message>
  <message conversation_id="410">
    <ts>2019-02-04T23:08:32.320400</ts>
    <user>Mariela</user>
    <text>Answering to your question... at least 1 protocol (and 1 component) per sub-system. Each subsystem only talks to each other via protos</text>
  </message>
  <message conversation_id="409">
    <ts>2019-02-04T23:12:40.320700</ts>
    <user>Alix</user>
    <text>&lt;@Mariela&gt; Thanks for your input. It's great to see how other people solve these problems. We are definitely on the same page with this. When using protocols, I've also grouped up the implementation with the protocol in the same directory. I use cursive so when I jump-to-def to the protocol, I can do another jump-to-def on the protocol name which takes me directly to the implementation. So using that it wouldn't matter if they're in the same directory or not. However, I do prefer them in the same directory.</text>
  </message>
  <message conversation_id="410">
    <ts>2019-02-05T04:06:13.322700</ts>
    <user>Maryjane</user>
    <text>Hello</text>
  </message>
  <message conversation_id="410">
    <ts>2019-02-05T04:07:33.323400</ts>
    <user>Maryjane</user>
    <text>Looking for jdbc that uses threadpool</text>
  </message>
  <message conversation_id="411">
    <ts>2019-02-05T06:48:24.325400</ts>
    <user>Thuy</user>
    <text>Hi all, I'm new to Clojure I'm new to Java. :slightly_smiling_face: Can anyone point me to the right direction? I'm trying to serialize an &lt;https://github.com/thi-ng/ndarray&gt;</text>
  </message>
  <message conversation_id="412">
    <ts>2019-02-05T08:18:20.328400</ts>
    <user>Jalisa</user>
    <text>How do I  `apply` a function `(defn myfn [&amp;amp; {:keys [a b]}] ...)` to a map `m` (`{:a 1 :b 2}`)?</text>
  </message>
  <message conversation_id="410">
    <ts>2019-02-05T08:19:31.328800</ts>
    <user>Clarine</user>
    <text>```
$ clj
Clojure 1.10.0
user=&amp;gt; (def m {:a 1 :b 2})
#'user/m
user=&amp;gt; (defn myfn [{:keys [a b]}] [a b])
#'user/myfn
user=&amp;gt; (myfn m)
[1 2]
```</text>
  </message>
  <message conversation_id="410">
    <ts>2019-02-05T08:20:58.329300</ts>
    <user>Jalisa</user>
    <text>Sorry, I meant: `(defn myfn [&amp;amp; {:keys [a b]}] ...)`</text>
  </message>
  <message conversation_id="410">
    <ts>2019-02-05T08:21:42.329600</ts>
    <user>Clarine</user>
    <text>then you probably need `mapply`</text>
  </message>
  <message conversation_id="410">
    <ts>2019-02-05T08:22:57.330100</ts>
    <user>Clarine</user>
    <text>it’s a function that’s not in clojure, but in several helper libs:
```
(defn mapply
  "Applies a function f to the argument list formed by concatenating
  everything but the last element of args with the last element of
  args.  This is useful for applying a function that accepts keyword
  arguments to a map."
  [f &amp;amp; args]
  (apply f (apply concat (butlast args) (last args))))
```</text>
  </message>
  <message conversation_id="410">
    <ts>2019-02-05T12:26:37.334700</ts>
    <user>Nubia</user>
    <text>noticed functions like `assoc` and `contains?` operate on vectors (by position), but `dissoc` throws an error. Seems like this should work as a complement to the aforementioned functions - no? Or is this an intentional omission for performance reasons?</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:29:36.335200</ts>
    <user>Becki</user>
    <text>what would `(dissoc [:a :b] 0)` mean?</text>
  </message>
  <message conversation_id="410">
    <ts>2019-02-05T12:29:51.335700</ts>
    <user>Dann</user>
    <text>removing something from the middle of a vector isn't a simple operation, so it isn't built in</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:29:58.336000</ts>
    <user>Nubia</user>
    <text>remove item at position 0?</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:30:08.336400</ts>
    <user>Dann</user>
    <text>also if you find yourself wanting to do that, you should probably use a different datatype (eg. finger tree)</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:30:10.336600</ts>
    <user>Becki</user>
    <text>the result would have an item at position 0</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:30:23.337100</ts>
    <user>Becki</user>
    <text>`(contains? (dissoc [:a :b] 0) 0)` would be true</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:30:41.337700</ts>
    <user>Nubia</user>
    <text>good points :slightly_smiling_face:</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:30:45.337800</ts>
    <user>Becki</user>
    <text>along with the non-constant performance of dissoc there</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:31:06.338500</ts>
    <user>Becki</user>
    <text>i hadn't realized that until you asked it so i like your question :slightly_smiling_face:</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:31:52.339300</ts>
    <user>Nubia</user>
    <text>yeah I figured the performance would make it bad, just curious on the reasoning.- thx</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:33:14.340800</ts>
    <user>Shanell</user>
    <text>you have keep-indexed tho `(keep-indexed (fn [k v] (when (not= k 0) v)) [:a :b :c :d])`</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:33:32.341200</ts>
    <user>Dann</user>
    <text>see also the inability to check something sequential for a specific value (what people often naively think contains? would do) - it's possible, but there's no simple built in because doing so often indicates you should be using a different datatype</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:36:23.344100</ts>
    <user>Nubia</user>
    <text>for what it’s worth I was building a custom version of `assoc` that wouldn’t add nil values in order to reduce gc overhead (relative to pruning). it works as I expected, but in doing so I stumbled upon the issue. edit: note that I’m not even using vectors, but I was attempting to achieve feature parity… so it was really just a question.</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:37:06.344800</ts>
    <user>Kirsten</user>
    <text>&lt;@Dann&gt; wouldn't something like `some` count as a built in for that?</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:37:15.345000</ts>
    <user>Nubia</user>
    <text>so it’s not a data type issue</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:38:03.345300</ts>
    <user>Becki</user>
    <text>i think he means without doing a linear scan</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:38:41.346000</ts>
    <user>Dann</user>
    <text>&lt;@Kirsten&gt; yes we have functions that do linear scans of collections, but nothing that specifically checks membership of a given value</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T12:39:00.346400</ts>
    <user>Kirsten</user>
    <text>got it</text>
  </message>
  <message conversation_id="414">
    <ts>2019-02-05T14:21:22.348300</ts>
    <user>Fairy</user>
    <text>Hi, does anyone have recommendations on how to get the length of a video in clojure... Sadly I must use windows.</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:23:19.349300</ts>
    <user>Fairy</user>
    <text>i was using ffmpeg on a mac, and calling it with processBuilder, however I'm running into issues getting any output at all while using CMD  instead of bash</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:23:36.349800</ts>
    <user>Fairy</user>
    <text>I tried loading the file as a media object using ffmpeg, but ffmpeg doesn't support MOV files .</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:40:40.350700</ts>
    <user>Dann</user>
    <text>&lt;@Fairy&gt; you should be able to pipe output between processes via InputStream and OutputStream, if all the executables are present</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:41:07.351700</ts>
    <user>Dann</user>
    <text>java does have multimedia libraries, that's the next thing I would look for</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:41:34.352300</ts>
    <user>Dann</user>
    <text>even if there was a clojure binding, using the lib via interop is likely a better choice</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:42:49.353400</ts>
    <user>Fairy</user>
    <text>right! &lt;https://gist.github.com/jdkealy/65edec6c28a89f378c27803fb78be6d8&gt; so this calls bash, would you know how to do this in windows ? I know you can call bash via CMD, eg. "CMD" "C/" "bash" but the stream just returns ""</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:42:50.353500</ts>
    <user>Fairy</user>
    <text>None</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:43:26.354200</ts>
    <user>Fairy</user>
    <text>or... if slurp is returning "", is there a silent error somewhere?</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:45:35.354300</ts>
    <user>Hilary</user>
    <text>could stuff be going to stderr that's not showing up? I remember from some old C#/.NET work there were some `Process` options for redirecting stderr to stdout, not sure if that'd be exposed via Java classes though</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:47:49.354500</ts>
    <user>Hilary</user>
    <text>this is what I was thinking of &lt;https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.processstartinfo.redirectstandarderror?view=netframework-4.7.2&gt;</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:56:13.355600</ts>
    <user>Kirstin</user>
    <text>Perhaps. Set, vector, list &amp;amp; hash-map do. </text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:57:30.356400</ts>
    <user>Kirstin</user>
    <text>Yes, that’s right. It allows self-reference. That’s about it. </text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:59:33.356700</ts>
    <user>Jasmine</user>
    <text>sorted-set, sorted-map, queue</text>
  </message>
  <message conversation_id="413">
    <ts>2019-02-05T14:59:49.356900</ts>
    <user>Jasmine</user>
    <text>ok, queue doesn’t :)</text>
  </message>
  <message conversation_id="415">
    <ts>2019-02-05T15:14:14.357600</ts>
    <user>Ronald</user>
    <text>I would look for a specific library in Java/Clojure before piping stuff to bash/cmd</text>
  </message>
  <message conversation_id="415">
    <ts>2019-02-05T15:36:53.357800</ts>
    <user>Dann</user>
    <text>Process allows accessing stderr</text>
  </message>
  <message conversation_id="415">
    <ts>2019-02-05T15:37:37.358000</ts>
    <user>Dann</user>
    <text>&lt;https://docs.oracle.com/javase/8/docs/api/java/lang/Process.html#getErrorStream--&gt;</text>
  </message>
  <message conversation_id="415">
    <ts>2019-02-05T15:38:03.358200</ts>
    <user>Dann</user>
    <text>in ProcessBuilder you have the option to join the out/err into one stream also</text>
  </message>
  <message conversation_id="416">
    <ts>2019-02-05T15:52:38.359000</ts>
    <user>Nathanael</user>
    <text>ffmpeg writes a lot of things to stderr rather than stdout, afaik &lt;@Fairy&gt;</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-05T19:33:38.361300</ts>
    <user>Velia</user>
    <text>Confirming isak's comment, I had to combine stderr with stdout, as follows, to get output from the shell command:
/usr/bin/ffmpeg -i myfile.mpg 2&amp;gt;&amp;amp;1 | grep Duration | cut -d' ' -f4 | cut -d, -f1</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-05T20:45:57.363800</ts>
    <user>Velia</user>
    <text>Also, you should not need to shell out to a cmd.exe or bash shell to run ffmpeg, provided you pass the arguments properly to the process execute command. (much later); I added a comment to the gist as an improved version, to remove cut/split/grep/bash dependencies. (I'm still a Clojure novice, so my code is not well-formatted)</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-05T20:54:19.364800</ts>
    <user>Dann</user>
    <text>&lt;@Velia&gt; fyi def inside a function alters a single global value, but it's easy to move those defs into the adjacent let</text>
  </message>
  <message conversation_id="415">
    <ts>2019-02-05T20:54:38.365200</ts>
    <user>Dann</user>
    <text>but yeah, def inside any other form is very rarely what you want</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-05T21:47:33.366000</ts>
    <user>Velia</user>
    <text>I guess I liked def for testing in the repl, but should remember to reformat my code a little after my interactive testing/debugging</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T00:10:13.366100</ts>
    <user>Lana</user>
    <text>Oops, it looks like they fixed that issue and I somehow missed it. I thought I was tracking the issue on GitHub. It’s been a busy few months! I am trying again to move to 1.10.</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T00:18:19.368700</ts>
    <user>Mariela</user>
    <text>I use Component + tools.namespace.repl and very occasionally I encounter these spurious errors:

`java.lang.IllegalArgumentException: No implementation of method: xxx of protocol: #'yyy found for class: zzz`

The code is certainly right, it's simply a code loading issue

Can one fix these without a JVM restart?</text>
  </message>
  <message conversation_id="415">
    <ts>2019-02-06T03:37:32.370000</ts>
    <user>Roslyn</user>
    <text>Using `:extend-via-metadata` and meta to implement protocols made these errors go away for me</text>
  </message>
  <message conversation_id="418">
    <ts>2019-02-06T04:46:17.373600</ts>
    <user>Samual</user>
    <text>&lt;@Roslyn&gt; hmm... trouble might arise when most of the app reloads but the the via-meta protocol implementations do not, and therefore get out of synch.</text>
  </message>
  <message conversation_id="419">
    <ts>2019-02-06T05:43:04.375000</ts>
    <user>Jalisa</user>
    <text>How to fill a vector like `[:a :b :c]` with seperators `:sep` to get this: `[:a :sep :b :sep :c]`?</text>
  </message>
  <message conversation_id="419">
    <ts>2019-02-06T05:45:22.375900</ts>
    <user>Cherise</user>
    <text>```
(def v [:a :b :c])
(vec (interpose :sep v))
```</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:00:08.377700</ts>
    <user>Harris</user>
    <text>&lt;@Jasmine&gt; looks like &lt;http://insideclojure.org|insideclojure.org&gt; is down</text>
  </message>
  <message conversation_id="418">
    <ts>2019-02-06T11:04:06.378000</ts>
    <user>Roslyn</user>
    <text>works for me</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:05:01.378200</ts>
    <user>Harris</user>
    <text>yup it works now</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:05:16.378400</ts>
    <user>Harris</user>
    <text>must've been a blip</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:05:59.379200</ts>
    <user>Jasmine</user>
    <text>It’s github pages, so not much I can do if it is</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:12:50.379600</ts>
    <user>Shayla</user>
    <text>&lt;@Jasmine&gt; Do you use a SSG? If so, which one?</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:13:14.379800</ts>
    <user>Jasmine</user>
    <text>what’s an SSG?</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:13:26.380000</ts>
    <user>Jasmine</user>
    <text>(so I guess no) :)</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:13:27.380200</ts>
    <user>Shayla</user>
    <text>Static Site Generator, like Jykell or Hugo</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:13:46.380500</ts>
    <user>Jasmine</user>
    <text>oh, it’s jekyll, just path of least resistance</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:14:36.381400</ts>
    <user>Jasmine</user>
    <text>if I wanted to spend time on it I’d use a Clojure one like stasis (Strange Loop site is done with that) or Cryogen</text>
  </message>
  <message conversation_id="417">
    <ts>2019-02-06T11:15:20.381600</ts>
    <user>Jasmine</user>
    <text>for something like this, Cryogen is probably ideal</text>
  </message>
  <message conversation_id="418">
    <ts>2019-02-06T11:18:36.381800</ts>
    <user>Shayla</user>
    <text>cool, thank you!</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:19:46.385200</ts>
    <user>Larissa</user>
    <text>Hello all, how do I handle with `java.util.Collections`? Is there any way to convert it to Clojure collection?</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:35:48.386900</ts>
    <user>Latonya</user>
    <text>If you have an arbitrarily nested java.util.Collections object, then you would need some kind of function that recursively 'walks' through it, converting each thing into a corresponding Clojure type.  If you have a java.util.Set, and you know its elements are things like integers, strings, etc., then you should be able to simply call `(set my-java-set)`, which will return a Clojure set.</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:39:04.387900</ts>
    <user>Latonya</user>
    <text>I would bet that someone has written the recursive version of that for many kinds of java.util.Collections, but I don't know what library it might exist in.</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:39:25.388400</ts>
    <user>Larissa</user>
    <text>It´s kind of `Enumeration&amp;lt;String&amp;gt;`</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:39:59.388900</ts>
    <user>Latonya</user>
    <text>If you know it contains String elements, then `(set my-java-collection)` should do the job just fine.</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:41:06.389600</ts>
    <user>Latonya</user>
    <text>unless you want a different kind of result, e.g. if you want a vector, then `(vec my-java-collection)`</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:42:40.390200</ts>
    <user>Larissa</user>
    <text>look the solution -&amp;gt; `(java.util.Collections/list my-java-collection)`</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:43:45.390700</ts>
    <user>Larissa</user>
    <text>it response as an array in Clojure</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:43:56.391000</ts>
    <user>Larissa</user>
    <text>thank you for the help</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:50:44.392300</ts>
    <user>Latonya</user>
    <text>You may want to assign the return value of that to a variable or let-bound symbol, and print out the value of `(type val)` to see if it really is a Clojure vector, if you truly _need_ an immutable Clojure vector, and not a Java mutable type.  Java mutable types can be printed at a REPL in a way that looks the same as Clojure collections.</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:51:04.392500</ts>
    <user>Latonya</user>
    <text>```user=&amp;gt; (java.util.ArrayList. [1 2 3])
[1 2 3]
user=&amp;gt; (type (java.util.ArrayList. [1 2 3]))
java.util.ArrayList
```</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:51:48.392800</ts>
    <user>Larissa</user>
    <text>I see you point</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:53:10.393600</ts>
    <user>Latonya</user>
    <text>java.util.Collections/list can convert the Enumeration type to a Java list, and from there you can call Clojure's `set` or `vec` on it to create an immutable value.</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:56:05.394600</ts>
    <user>Latonya</user>
    <text>I was also just reminded while searching through the Clojure source code for "Enumeration" of the function `enumeration-seq`, which takes a Java Enumeration, and returns a Clojure sequence.</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T20:56:51.395400</ts>
    <user>Latonya</user>
    <text>Using that instead of java.util.Collections/list might be a little more efficient, since it might not allocate as much memory</text>
  </message>
  <message conversation_id="420">
    <ts>2019-02-06T21:18:10.396200</ts>
    <user>Larissa</user>
    <text>It worked with `enumeration-seq` too. That helped me a lot. Many thanks</text>
  </message>
  <message conversation_id="421">
    <ts>2019-02-07T04:31:22.397800</ts>
    <user>Aubrey</user>
    <text>Some code golf — is there something that can simplify this a little bit? ```
  (let [results [{:_id 1} {:_id 2} {:_id 5}]
        lookup {1 "a", 2 "b", 3 "c"}]
    (map #(assoc % :val (get lookup (:_id %) "default")) results))
;; =&amp;gt; ({:_id 1, :val "a"} {:_id 2, :val "b"} {:_id 5, :val "default"})```</text>
  </message>
  <message conversation_id="422">
    <ts>2019-02-07T08:43:12.400700</ts>
    <user>Cherise</user>
    <text>If you didn’t need a default you could have used
```
cljs.user=&amp;gt; (clojure.walk/postwalk-replace lookup results)
[{:_id "a"} {:_id "b"} {:_id 5}]
```</text>
  </message>
  <message conversation_id="422">
    <ts>2019-02-07T08:44:18.400900</ts>
    <user>Cherise</user>
    <text>Oh wait you could not :wink:</text>
  </message>
  <message conversation_id="422">
    <ts>2019-02-07T08:44:29.401100</ts>
    <user>Cherise</user>
    <text>You also add `:val`</text>
  </message>
  <message conversation_id="422">
    <ts>2019-02-07T08:44:58.401300</ts>
    <user>Cherise</user>
    <text>To me it looks perfectly idiomatic as is</text>
  </message>
  <message conversation_id="422">
    <ts>2019-02-07T08:49:41.401500</ts>
    <user>Cherise</user>
    <text>Can also use `for`:

```
(for [{:keys [_id] :as e} results
      :let [val (get lookup _id "default")]]
  (assoc e :val val))

;; =&amp;gt; ({:_id 1, :val "a"} {:_id 2, :val "b"} {:_id 5, :val "default"})
```</text>
  </message>
  <message conversation_id="423">
    <ts>2019-02-07T10:12:28.403100</ts>
    <user>Ok</user>
    <text>I have posted the same question in the cljs channel, but am also posting here as the behavior is the same in clj.

I am exploring `extend-via-metadata` and I am getting this behavior:

```
(defprotocol Component
  :extend-via-metadata true
  (start [component]))

(def component (with-meta {:name "db"} {`start (constantly "started")
                                        `clojure.core.protocols/datafy (fn [x] (:name x))}))

(start component)
;; =&amp;gt; started
(datafy component)
;; =&amp;gt; db

(satisfies? clojure.core.protocols/Datafiable component)
;; =&amp;gt; true
(satisfies? Component component)
;; =&amp;gt; false
```

So when extending with `datafy` protocol i get true when checking if the data `satisfies?` the protocol.
However with a custom protocol with `:extend-via-metadata true` I am getting `false` in the `satisfies?` check.

Is there something I am missing in the implementation?
thanks</text>
  </message>
  <message conversation_id="423">
    <ts>2019-02-07T11:53:34.405000</ts>
    <user>Celestine</user>
    <text>&lt;@Ok&gt; `satisfies?` doesn't work via metadata -- what you're seeing with `(satisfies? clojure.core.protocols/Datafiable component)` is the _implementation_ of that protocol for `Object`, and `component` is an instance of `Object`.</text>
  </message>
  <message conversation_id="423">
    <ts>2019-02-07T12:25:46.405400</ts>
    <user>Ok</user>
    <text>Thanks &lt;@Celestine&gt;, makes sense now.</text>
  </message>
  <message conversation_id="423">
    <ts>2019-02-07T12:58:34.405600</ts>
    <user>Celestine</user>
    <text>It took me a bit of digging in the REPL to figure out what was going on!</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:36:33.407600</ts>
    <user>Scarlett</user>
    <text>is there a more idiomatic way to spread a map into map varargs? given `(defn foo [a b &amp;amp; {:as x}])`
`(-&amp;gt;&amp;gt; {:a 1} (apply concat) (apply foo 1 2))` is hideous</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:40:40.408400</ts>
    <user>Becki</user>
    <text>`(defn bridge [a b x] (apply foo a b (interleave (keys x) (vals x)))` ?</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:41:38.408900</ts>
    <user>Becki</user>
    <text>basically make a more graceful api? or is it a lot of functions so covering them doesn't really work?</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:43:19.409600</ts>
    <user>Dann</user>
    <text>yes, it's hideous, I think apply concat is nicer than interleave, and my solution is to never use `&amp;amp; {}`</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:43:28.409900</ts>
    <user>Dann</user>
    <text>(if I can help it)</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:44:29.410700</ts>
    <user>Dann</user>
    <text>also I think `(apply foo 1 2 (apply concat x))` is nicer than the arrow form, but that's subjective of course</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:46:40.412500</ts>
    <user>Becki</user>
    <text>agree on the never use `&amp;amp; {}`. I think interleave would be more meaningful to me when i see this in the wild 3 months after writing it. also agree don't thread but context of actual use dictates that ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:47:02.412800</ts>
    <user>Scarlett</user>
    <text>i just run into apis out of my control frequently enough to be irritated by it.  wasnt sure if there was an `applym` or something cute to be done with the core libs</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:47:30.413700</ts>
    <user>Dann</user>
    <text>no, there's nothing built in</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:48:20.414700</ts>
    <user>Dann</user>
    <text>&lt;@Becki&gt; perhaps as a compromise `(def unwrap-map (partial apply concat))`</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:48:37.415200</ts>
    <user>Becki</user>
    <text>put it on clojars! #shipit</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:48:44.415500</ts>
    <user>Dann</user>
    <text>:D</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T13:49:32.415900</ts>
    <user>Scarlett</user>
    <text>ill import it right below leftpad :wink:</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:01:38.416700</ts>
    <user>Dann</user>
    <text>&lt;@Scarlett&gt; quoting the bot on &lt;#C03S1KBA2|clojure&gt; irc: ```
You have to do something like
(defn mapply [f &amp;amp; args] (apply f (apply concat (butlast args) (last args))))
, which just goes to show why unrolled keyword args are a bad idea```</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:03:26.417600</ts>
    <user>Becki</user>
    <text>i just don't know what you gain either. I know common lisp used that style a lot but with map syntax so convenient it just seems worse in every regard</text>
  </message>
  <message conversation_id="425">
    <ts>2019-02-07T14:05:15.418400</ts>
    <user>Shayla</user>
    <text>why `(butlast args) (last args)`? What does that get you?</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:07:37.422100</ts>
    <user>Becki</user>
    <text>that's how the map gets flattened into a sequence. args = `(a b {:x 3})` `(concat (a b) {:x 3})` =&amp;gt; `(a b :x 3)`</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:07:48.422200</ts>
    <user>Scarlett</user>
    <text>yea i agree the syntax doesnt help enough, it just gets in the way of composition</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:08:25.422800</ts>
    <user>Becki</user>
    <text>that's why i think the interleave makes a lot of semantic sense</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:08:58.423400</ts>
    <user>Becki</user>
    <text>`(apply f (concat (butlast args) (interleave (keys (last arg)) (vals (last arg)))`</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:09:14.423800</ts>
    <user>Becki</user>
    <text>makes it clear to me that the map gets turned into key value key value ...</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:09:23.424000</ts>
    <user>Becki</user>
    <text>but it is for sure more work</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:09:42.424500</ts>
    <user>Dann</user>
    <text>to me it's intuitive that concat on a map would turn it into a list of keys followed by their values</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:14:13.425300</ts>
    <user>Scarlett</user>
    <text>incase anyone else code golfing wants a macro: ```(defmacro applym [f &amp;amp; args] `(apply ~f ~@(butlast args) (apply concat ~(last args))))```</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:15:22.425500</ts>
    <user>Becki</user>
    <text>why not a function?</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:16:18.426400</ts>
    <user>Becki</user>
    <text>saving on allocations?</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:16:57.427300</ts>
    <user>Scarlett</user>
    <text>presumably</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:17:02.427500</ts>
    <user>Dann</user>
    <text>this doesn't work if the map isn't a literal, and a big reason to want something like applym is to reuse a default map for the args</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:18:31.427700</ts>
    <user>Scarlett</user>
    <text>that would preserve a symbol</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:19:28.428600</ts>
    <user>Becki</user>
    <text>it works?</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:19:36.428900</ts>
    <user>Becki</user>
    <text>```
(let [thing {:a 1 :b 2}]
  (applym f 3 thing))
{:b 2, :a 1}
```</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:19:56.429200</ts>
    <user>Scarlett</user>
    <text>```(macroexpand '(applym foo 1 2 k))
=&amp;gt; (clojure.core/apply foo 1 2 (clojure.core/apply clojure.core/concat k))```</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:19:59.429300</ts>
    <user>Becki</user>
    <text>```
(defn f [a &amp;amp; {:as x}]
        (prn x))
```</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:21:53.430600</ts>
    <user>Jasmine</user>
    <text>I use kwargs and &amp;amp; {} all the time, yet never have this issue. can someone back up and tell me a real scenario where you’re doing this?</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:22:35.430700</ts>
    <user>Becki</user>
    <text>None</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:23:05.431900</ts>
    <user>Becki</user>
    <text>presumably programatically creating the args and then having to use a function that uses `&amp;amp; {}`</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:24:22.433400</ts>
    <user>Jasmine</user>
    <text>I guess I tend to use them on the outer layer where it’s people, not programs</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:24:43.434100</ts>
    <user>Scarlett</user>
    <text>yea specifically im progmatically calling into an api with kwargs</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:25:15.435600</ts>
    <user>Becki</user>
    <text>and you prefer `(invoke :arg1 :a :arg2 :b)` instead of `(invoke {:arg1 :a :arg2 :b})` for humans?</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:25:30.435800</ts>
    <user>Jasmine</user>
    <text>I do</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:25:55.436400</ts>
    <user>Jasmine</user>
    <text>we’ve actually contemplated a small change that would make either automatically work in Clojure</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:26:18.436700</ts>
    <user>Jasmine</user>
    <text>if you use &amp;amp; {} in the args</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:27:10.438000</ts>
    <user>Becki</user>
    <text>that might be kinda nice</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:27:12.438100</ts>
    <user>Scarlett</user>
    <text>that would be cool</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:27:29.438500</ts>
    <user>Jasmine</user>
    <text>it doesn’t invalidate any existing code, just a tweak in destructuring</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:27:52.438800</ts>
    <user>Jasmine</user>
    <text>well, maybe it’s in the compiler, I don’t remember</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:28:10.439300</ts>
    <user>Jasmine</user>
    <text>possibly 1.11 feature :) but don’t quote me on it</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:29:03.439800</ts>
    <user>Shanell</user>
    <text>`(defn a [b &amp;amp; [{:keys [c d]}]])` would be unaffected I guess</text>
  </message>
  <message conversation_id="424">
    <ts>2019-02-07T14:29:41.440300</ts>
    <user>Jasmine</user>
    <text>correct, effect is allowing something new in the invocation</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:12:14.441900</ts>
    <user>Dulcie</user>
    <text>Anyone have any recommendations: I'd love something to "organize" my requires and imports. Remove unused, and alphabetize would be nice</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:12:47.442300</ts>
    <user>Dulcie</user>
    <text>I use Cursive, but I don't think it does this</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:14:00.443000</ts>
    <user>Tammera</user>
    <text>I installed a plugin for line sorting and ended up putting a newline between `(:require` and the first actual require</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:14:26.443700</ts>
    <user>Tammera</user>
    <text>needless to say, that makes that I now have about three different ways of requiring things</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:15:41.443900</ts>
    <user>Dulcie</user>
    <text>Interesting. What's the plugin?</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:16:07.444300</ts>
    <user>Tammera</user>
    <text>I recall that there is also a leiningen plugin that can complain/fix requires</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:16:12.444700</ts>
    <user>Tammera</user>
    <text>but its name left me</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:16:16.444900</ts>
    <user>Becki</user>
    <text>slamhound? is that still around?</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:16:52.445300</ts>
    <user>Dulcie</user>
    <text>I think eastwood will do the job at complaining at me, but doesn't fix</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:17:11.445700</ts>
    <user>Tammera</user>
    <text>yeah there is a fixing tool, but remembering names is really challenging</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:17:54.445900</ts>
    <user>Becki</user>
    <text>&lt;https://github.com/technomancy/slamhound&gt;</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:18:06.446300</ts>
    <user>Shayla</user>
    <text>That's a great name, haha</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:18:56.446600</ts>
    <user>Tammera</user>
    <text>&lt;https://github.com/gfredericks/how-to-ns&gt;</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:19:25.447100</ts>
    <user>Tammera</user>
    <text>such a googleable name that I ended up searching for my coworkers slack message :’)</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:21:10.447500</ts>
    <user>Dulcie</user>
    <text>Ha, yes too generic</text>
  </message>
  <message conversation_id="426">
    <ts>2019-02-07T15:21:15.447700</ts>
    <user>Dulcie</user>
    <text>thanks</text>
  </message>
  <message conversation_id="427">
    <ts>2019-02-07T15:50:09.448600</ts>
    <user>Jerome</user>
    <text>There are some issues with slamhound and Clojure v 1.10 fwiw</text>
  </message>
  <message conversation_id="428">
    <ts>2019-02-07T15:50:15.448800</ts>
    <user>Georgine</user>
    <text>Is there a way to define in the environment where deps.edn is located? Using nextflow and the workaround I'm using is to cp deps.edn to current directory, but it's messy/lazy.</text>
  </message>
  <message conversation_id="428">
    <ts>2019-02-07T15:50:47.449000</ts>
    <user>Jasmine</user>
    <text>no, not currently</text>
  </message>
  <message conversation_id="428">
    <ts>2019-02-07T15:51:52.449300</ts>
    <user>Georgine</user>
    <text>thanks, worth checking</text>
  </message>
  <message conversation_id="429">
    <ts>2019-02-07T20:53:36.453500</ts>
    <user>Johnathon</user>
    <text>this might be a silly spec question, but is there a way to use a def'ed collection of keywords with, say, the `:opt` group in `s/keys`? i'm trying to define a map with a large list of optional keywords defined elsewhere:
```
(def some-test-keys [:test/a :test/b :test/c ... +100 more])
(s/def :test/labels (s/keys :opt some-test-keys))
CompilerException java.lang.IllegalArgumentException: Don't know how to create ISeq from: clojure.lang.Symbol
```</text>
  </message>
  <message conversation_id="429">
    <ts>2019-02-07T21:48:28.454200</ts>
    <user>Celestine</user>
    <text>&lt;@Johnathon&gt; Not with spec as it stands, but programmatic specs are coming in the next version (aka spec2).</text>
  </message>
  <message conversation_id="429">
    <ts>2019-02-07T21:50:05.455500</ts>
    <user>Celestine</user>
    <text>What you _can_ do is define the spec with the literal set of keys and then use `s/form` to get back the form of the spec and take it apart to get the list of keys in it. In other words, let the spec by the "System of Record" and extra your "collection of keywords" from it.</text>
  </message>
  <message conversation_id="429">
    <ts>2019-02-07T21:53:13.457000</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (s/def ::my-spec (s/keys :opt [::key1 ::key2 ::key3]))
:user/my-spec
user=&amp;gt; (let [[_ _ ks] (s/form (s/get-spec ::my-spec))] (println ks))
[:user/key1 :user/key2 :user/key3]
nil
user=&amp;gt; 
``` You can get fancier and check what you get back from `s/form` actually has `clojure.spec.alpha/keys` as the first element and `:opt` as the second element and/or handle `:req`/`:req-un`/etc as well.</text>
  </message>
  <message conversation_id="430">
    <ts>2019-02-07T22:15:44.458900</ts>
    <user>Tamie</user>
    <text>is there an equivalent to `defonce` like `doonce`  I just want to execute some code only one time, not each time I reload my src file.</text>
  </message>
  <message conversation_id="430">
    <ts>2019-02-07T22:16:20.459300</ts>
    <user>Tamie</user>
    <text>I'm currently doing `defonce ignore (blah....`</text>
  </message>
  <message conversation_id="429">
    <ts>2019-02-07T22:21:35.460300</ts>
    <user>Celestine</user>
    <text>Having code executing when a namespace is _loaded_ is generally a bad idea (since it will run if you compile the ns, for example when building an uberjar with Leiningen or Boot).</text>
  </message>
  <message conversation_id="429">
    <ts>2019-02-07T22:23:02.461800</ts>
    <user>Celestine</user>
    <text>If this is for dev work, you're probably better off putting it inside a `(comment ..)` form and manually evaluating it when you need to &lt;@Tamie&gt;</text>
  </message>
  <message conversation_id="429">
    <ts>2019-02-07T22:24:02.462600</ts>
    <user>Tamie</user>
    <text>&lt;@Celestine&gt; thats a great point, thanks sean!  stinky code :wink:</text>
  </message>
  <message conversation_id="429">
    <ts>2019-02-07T22:25:14.463800</ts>
    <user>Celestine</user>
    <text>Many of my source files end with a `(comment ..)` form that contains all sorts of expressions to do dev setup and some testing, including `require`s that are only needed for dev work, setup for Components, etc.</text>
  </message>
  <message conversation_id="430">
    <ts>2019-02-08T00:05:19.463900</ts>
    <user>Johnathon</user>
    <text>ah clever! i did something similar to turn forms back into spec maps. it didn't cross my mind that i could use the same technique -- thanks for the suggestion. &lt;https://github.com/joshkh/specalog/blob/dev/src/specalog/jig.clj#L9&gt;</text>
  </message>
  <message conversation_id="431">
    <ts>2019-02-08T01:31:16.464300</ts>
    <user>Sixta</user>
    <text>A bit out of context, but in clojurescript this is normal in order to activate your application.</text>
  </message>
  <message conversation_id="432">
    <ts>2019-02-08T02:00:07.465600</ts>
    <user>Larita</user>
    <text>Hi all!

Is it possible to define mutually recursive functions _with metadata_ in a local scope?

I want to define `f` and `g`, and attach metadata (using `with-meta` or something similar) such that each can see the other's metadata within its body.</text>
  </message>
  <message conversation_id="432">
    <ts>2019-02-08T02:02:40.467300</ts>
    <user>Larita</user>
    <text>(This has come up while implementing a `fn`-like macro that creates a function and attaches some metadata to it. I'd like these "fake `fn`s" to be useable anywhere a real Clojure function can be made, which led me down the road of trying to create a `letfn`-like macro that attached metadata to all the functions declared in the `letfn`. But I ran into the issue of not being able to create a `letfn` that binds metadata to the functions it creates.)</text>
  </message>
  <message conversation_id="432">
    <ts>2019-02-08T02:12:22.467600</ts>
    <user>Larita</user>
    <text>I guess something like this should work:
```
(letfn 
  [(f-thunk [] 
     (with-meta (fn f [] (meta (g-thunk))) {:b 3})) 
   (g-thunk [] 
     (with-meta (fn [] (meta (f-thunk))) {:a 2}))] 
  (let [f (f-thunk) g (g-thunk)] 
    [(f) (g)]))
```</text>
  </message>
  <message conversation_id="433">
    <ts>2019-02-08T04:39:52.469300</ts>
    <user>Melina</user>
    <text>Apologies if this is noise, but is there any plan to add metadata to EDN?</text>
  </message>
  <message conversation_id="434">
    <ts>2019-02-08T05:13:13.470300</ts>
    <user>Isa</user>
    <text>Ech I always forget this….
`(re-matches #"(?i)&amp;lt;message&amp;gt;(.+)&amp;lt;/message&amp;gt;" "&amp;lt;message&amp;gt;foo&amp;lt;/message&amp;gt;baz&amp;lt;message&amp;gt;bar&amp;lt;/message&amp;gt;")`
How to get `foo` and `bar` from here? I am trying half an hour :slightly_smiling_face:</text>
  </message>
  <message conversation_id="435">
    <ts>2019-02-08T05:22:49.473200</ts>
    <user>Thersa</user>
    <text>Hi there!

Is there anybody, who knows about a problem with `slurp`? I try to fetch some websites, that I can reach via browser, but `slurp`throws an exception:

```(slurp "&lt;https://www.some.url&gt;")

FileNotFoundException &lt;https://www.some.url&gt;  sun.net.www.protocol.http.HttpURLConnection.getInputStream0 (HttpURLConnection.java:1836)```

Tested the same URL with `curl` and it works fine. Any ideas?</text>
  </message>
  <message conversation_id="435">
    <ts>2019-02-08T05:38:02.473300</ts>
    <user>Jessia</user>
    <text>Any more useful information in the stack?</text>
  </message>
  <message conversation_id="435">
    <ts>2019-02-08T05:39:42.475100</ts>
    <user>Thersa</user>
    <text>```lein version
Leiningen 2.8.3 on Java 1.8.0_91 Java HotSpot(TM) 64-Bit Server VM```
org.clojure/clojure “1.9.0”</text>
  </message>
  <message conversation_id="435">
    <ts>2019-02-08T05:42:46.475600</ts>
    <user>Jessia</user>
    <text>hmm, I get the same problem</text>
  </message>
  <message conversation_id="435">
    <ts>2019-02-08T05:43:51.475800</ts>
    <user>Jessia</user>
    <text>`curl -i ...` shows it's speaking HTTP/2, maybe something to do with that?</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T05:52:21.477400</ts>
    <user>Samual</user>
    <text>&lt;@Isa&gt; re-seq . But the regex is not quite right - the .+ is too greedy and may consume the end tag</text>
  </message>
  <message conversation_id="435">
    <ts>2019-02-08T05:52:57.478000</ts>
    <user>Samual</user>
    <text>Try it at the REPL and you'll see</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T05:53:59.478500</ts>
    <user>Isa</user>
    <text>sure, but the question is how right regex look :wink:</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T05:54:40.478800</ts>
    <user>Samual</user>
    <text>.+?</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T05:54:45.479000</ts>
    <user>Samual</user>
    <text>The question makes it less greedy</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T05:54:52.479200</ts>
    <user>Isa</user>
    <text>nope, it doesn’t help</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T05:55:14.479400</ts>
    <user>Samual</user>
    <text>Did you try it at the REPL?  I did</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T05:55:25.479600</ts>
    <user>Isa</user>
    <text>oh it works with re-seq</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T05:55:43.479800</ts>
    <user>Isa</user>
    <text>I am after week 16h work everyday after breaking changes third party system update. My mind is almost turned off :slightly_smiling_face:</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T05:57:08.480200</ts>
    <user>Isa</user>
    <text>Thanks</text>
  </message>
  <message conversation_id="437">
    <ts>2019-02-08T06:30:35.480600</ts>
    <user>Thersa</user>
    <text>:man-shrugging: </text>
  </message>
  <message conversation_id="437">
    <ts>2019-02-08T06:30:45.480800</ts>
    <user>Thersa</user>
    <text>That's why I'm asking </text>
  </message>
  <message conversation_id="438">
    <ts>2019-02-08T07:10:16.483900</ts>
    <user>Alleen</user>
    <text>`definline` is still labeled as experimental in the docs, but it seems hardly ever used. what is its official status ?</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:52:36.484200</ts>
    <user>Cherise</user>
    <text>&lt;@Isa&gt; another approach:

```
(require '[hickory.core :as hickory]
         '[hickory.select :as select])

(def parsed-doc
  (hickory/as-hickory (hickory/parse "&amp;lt;message&amp;gt;foo&amp;lt;/message&amp;gt;baz&amp;lt;message&amp;gt;bar&amp;lt;/message&amp;gt;")))

(mapcat :content (select/select (select/tag :message) parsed-doc))
;; =&amp;gt; ("foo" "bar")
```</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:54:02.484300</ts>
    <user>Isa</user>
    <text>Can it find all &amp;lt;errors&amp;gt;&amp;lt;error&amp;gt;&amp;lt;messsage&amp;gt;…..&amp;lt;/message&amp;gt;… in string? Because in reality it is very complex XML structure.</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:54:19.484500</ts>
    <user>Isa</user>
    <text>and this message can be everywhere</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:54:29.484700</ts>
    <user>Isa</user>
    <text>so not sure it will be more efficient</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:55:20.484900</ts>
    <user>Cherise</user>
    <text>Of course</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:55:37.485100</ts>
    <user>Cherise</user>
    <text>It is bad practice to use regex for parsing XML :wink: See this famous answer: &lt;https://stackoverflow.com/a/1732454/2609980&gt;</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:55:45.485400</ts>
    <user>Isa</user>
    <text>thanks</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:56:25.485600</ts>
    <user>Isa</user>
    <text>Sure it is, but in many cases it just work as simple 1 line solution</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:56:46.485800</ts>
    <user>Isa</user>
    <text>But I agree</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T07:59:16.486400</ts>
    <user>Cherise</user>
    <text>Sometimes it can be easier</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T08:05:18.486600</ts>
    <user>Cherise</user>
    <text>Alright let me know how it goes</text>
  </message>
  <message conversation_id="436">
    <ts>2019-02-08T08:05:28.486800</ts>
    <user>Cherise</user>
    <text>&lt;https://github.com/davidsantiago/hickory#selectors&gt;</text>
  </message>
  <message conversation_id="439">
    <ts>2019-02-08T08:18:18.488200</ts>
    <user>Jasmine</user>
    <text>Would like to deemphasize - primarily used in Clojures implementation</text>
  </message>
  <message conversation_id="439">
    <ts>2019-02-08T08:21:40.488500</ts>
    <user>Alleen</user>
    <text>so better not rely on it ?</text>
  </message>
  <message conversation_id="439">
    <ts>2019-02-08T08:22:07.488800</ts>
    <user>Jasmine</user>
    <text>No</text>
  </message>
  <message conversation_id="439">
    <ts>2019-02-08T08:27:39.489100</ts>
    <user>Isa</user>
    <text>Unfortunately I don’t have time to try it now. But I wrote it in my notes to try later :slightly_smiling_face:</text>
  </message>
  <message conversation_id="440">
    <ts>2019-02-08T09:33:39.490200</ts>
    <user>Jalisa</user>
    <text>I have a collection `c` which can be a list, a vector or a set. How do I remove an item from it while keeping the type of `c`?</text>
  </message>
  <message conversation_id="440">
    <ts>2019-02-08T09:34:30.490900</ts>
    <user>Jasmine</user>
    <text>those are different kinds of things so there is no common operation to do that</text>
  </message>
  <message conversation_id="440">
    <ts>2019-02-08T09:34:55.491500</ts>
    <user>Jasmine</user>
    <text>usually if I encounter a question like this, I step back and look at how I got to wanting to remove things from a non-indexed collection</text>
  </message>
  <message conversation_id="440">
    <ts>2019-02-08T09:36:33.492400</ts>
    <user>Jalisa</user>
    <text>&lt;@Jasmine&gt; So you mean, I should avoid having to remove individual items from lists or vectors? Just from sets?</text>
  </message>
  <message conversation_id="440">
    <ts>2019-02-08T09:37:28.493100</ts>
    <user>Jasmine</user>
    <text>yes, generally I try to never remove anything from the middle of a list or vector</text>
  </message>
  <message conversation_id="440">
    <ts>2019-02-08T09:37:45.493700</ts>
    <user>Jasmine</user>
    <text>sets are fine - they are designed for that</text>
  </message>
  <message conversation_id="440">
    <ts>2019-02-08T09:37:57.494100</ts>
    <user>Jalisa</user>
    <text>&lt;@Jasmine&gt; Thank you. I'm going to think about that...</text>
  </message>
  <message conversation_id="440">
    <ts>2019-02-08T09:41:07.494500</ts>
    <user>Alleen</user>
    <text>thanks !</text>
  </message>
  <message conversation_id="440">
    <ts>2019-02-08T09:41:46.495200</ts>
    <user>Roslyn</user>
    <text>&lt;@Jalisa&gt; if you are okay with O(n):
```
(let [xs [1 2 3] ;; or '(1 2 3) or #{1 2 3}
      el 1]
  (into (empty xs) (remove #(= % el)) xs))
```</text>
  </message>
  <message conversation_id="441">
    <ts>2019-02-08T10:02:39.497300</ts>
    <user>Haley</user>
    <text>How does Calva find test namespaces?

I have `["src/a/b.cljc", a.b]` and `["test/a/b_test.cljc", a.b-test]`, and `:source-paths ["src", "test"]`, but Calva says "No tests found. :scream:"</text>
  </message>
  <message conversation_id="441">
    <ts>2019-02-08T10:06:36.497400</ts>
    <user>Isa</user>
    <text>&lt;#CBE668G4R|calva-dev&gt; try here</text>
  </message>
  <message conversation_id="442">
    <ts>2019-02-08T11:40:38.498000</ts>
    <user>Dann</user>
    <text>beware that `into` on a seq reverses order</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T12:55:53.498600</ts>
    <user>Boyd</user>
    <text>Is there a more idiomatic way of doing an `or` check with multiple `=` checks involving the same variable?

```
(or (= panel-name :general-info) (= panel-name :permanent-address) (= panel-name :school-info))
```</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T12:57:07.499200</ts>
    <user>Becki</user>
    <text>`(#{:general-info :permanent-address :school-info} panel-name)`</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T12:57:24.499500</ts>
    <user>Dann</user>
    <text>contains? at the front if nil or false are one of your cases</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T12:57:50.500000</ts>
    <user>Dann</user>
    <text>the set works because a set acts as a function returning an item if found in the set</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T12:57:58.500200</ts>
    <user>Boyd</user>
    <text>Ah yes, I have used something like this before.</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T12:58:03.500500</ts>
    <user>Becki</user>
    <text>yeah. however it looks. but rather than `or` just do set membership check</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T12:58:20.501000</ts>
    <user>Becki</user>
    <text>which is semantically what you are doing</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T12:59:07.501900</ts>
    <user>Dann</user>
    <text>also, depending on where the or is:
```(case panel-name
  (:general-info :permanent-address :school-info) (some-action))``` - but this only works if your matches are compile time literals</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T12:59:36.502200</ts>
    <user>Dann</user>
    <text>(the case would potentially replace if/cond here)</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T13:07:06.502800</ts>
    <user>Jasmine</user>
    <text>`(#{:general-info :permanent-address :school-info} panel-name)`</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T13:07:17.503100</ts>
    <user>Jasmine</user>
    <text>^^ enumerate things in a set and use set membership</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T13:07:48.503400</ts>
    <user>Jasmine</user>
    <text>literally, is panel-name in this set of values</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T13:08:17.503800</ts>
    <user>Jasmine</user>
    <text>if you want to improve readability you can make that more explicit:
`(contains? #{:general-info :permanent-address :school-info} panel-name)`</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T13:08:57.504200</ts>
    <user>Jasmine</user>
    <text>oh sorry, I didn’t see &lt;@Becki&gt; s reply above, sorry to duplicate</text>
  </message>
  <message conversation_id="443">
    <ts>2019-02-08T13:09:23.504600</ts>
    <user>Becki</user>
    <text>i'm always pleased when my recommendation aligns with yours :slightly_smiling_face:</text>
  </message>
  <message conversation_id="444">
    <ts>2019-02-08T13:16:16.504700</ts>
    <user>Karren</user>
    <text>Could you be more specific and given an example of url reproducing the problem?</text>
  </message>
  <message conversation_id="445">
    <ts>2019-02-08T14:18:09.506300</ts>
    <user>Deangelo</user>
    <text>hi everyone. are there any isomorphic web frameworks for clojure, except `fulcro`?</text>
  </message>
  <message conversation_id="445">
    <ts>2019-02-08T14:21:51.506600</ts>
    <user>Shayla</user>
    <text>what's an isomorphic web framework?</text>
  </message>
  <message conversation_id="445">
    <ts>2019-02-08T14:23:40.507200</ts>
    <user>Deangelo</user>
    <text>basically a combo of server - side rendering and a single page application</text>
  </message>
  <message conversation_id="445">
    <ts>2019-02-08T14:24:08.507700</ts>
    <user>Deangelo</user>
    <text>where you can use the same exact component on client and server</text>
  </message>
  <message conversation_id="445">
    <ts>2019-02-08T14:25:59.507900</ts>
    <user>Shayla</user>
    <text>ah cool, okay</text>
  </message>
  <message conversation_id="445">
    <ts>2019-02-08T14:26:12.508100</ts>
    <user>Fredda</user>
    <text>rum</text>
  </message>
  <message conversation_id="445">
    <ts>2019-02-08T14:27:53.509100</ts>
    <user>Fredda</user>
    <text>most cljs react wrappers can probably be retrofitted to work isomorphic style, with some elbow grease. But rum was able to do it out of the box when it first shipped (or pretty early)</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:51:01.510400</ts>
    <user>Tammera</user>
    <text>May I ask, I was wondering why this works, is a set somehow also a function?</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:51:33.511500</ts>
    <user>Tammera</user>
    <text>I know it does work, but come to think about it I don’t know why :’)</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:51:36.511700</ts>
    <user>Arnoldo</user>
    <text>Yes, just like map</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:53:42.512300</ts>
    <user>Tammera</user>
    <text>(I meant under the hood)</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:54:32.512500</ts>
    <user>Arnoldo</user>
    <text>and I meant, similar to map, it implements IFn</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:55:03.513400</ts>
    <user>Tammera</user>
    <text>Right I see now, then we are on the same page. Thanks!</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:55:24.513600</ts>
    <user>Arnoldo</user>
    <text>np...when I first came across this I was both puzzled and delighted</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:56:30.514700</ts>
    <user>Tammera</user>
    <text>Yeah I know it works for months now, but I never stopped an thought about why</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:57:40.515000</ts>
    <user>Becki</user>
    <text>specifically this i think: &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/APersistentSet.java#L49&gt;</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T14:59:49.516800</ts>
    <user>Tammera</user>
    <text>What a curious interface iFn, it has invokes for 0..20 arity plus 20 arity and varargs</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:00:18.517000</ts>
    <user>Arnoldo</user>
    <text>That stuff is all performance related as far as I understand it</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:00:32.517200</ts>
    <user>Arnoldo</user>
    <text>usually the interesting ones are at the bottom where it explicitly handles multi-arity</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:01:05.517800</ts>
    <user>Becki</user>
    <text>there's some different between a form run in the repl, compiled in the repl and run normally too. invoke, run, etc</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:01:09.518000</ts>
    <user>Tammera</user>
    <text>Yeah I know that varargs are slow</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:01:21.518200</ts>
    <user>Becki</user>
    <text>but it's so hazy for me that i'm almost certainly wrong but just a grain of truth there</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:01:39.518400</ts>
    <user>Becki</user>
    <text>if you ask in &lt;#C03S1KBA2|clojure&gt; i'm sure someone could point you towards that</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:01:48.518600</ts>
    <user>Becki</user>
    <text>(if you're interested)</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:03:06.520000</ts>
    <user>Tammera</user>
    <text>Always interested in more knowledge,  but not always at the expense of time of others ;)</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:04:11.520400</ts>
    <user>Tammera</user>
    <text>If that makes any sense</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:04:17.520600</ts>
    <user>Arnoldo</user>
    <text>class clj_dict(dict):
	def __call__(self,item,default):
		return self.get(item,default)

f = clj_dict(a=1,b=2)
print(f('c','not_here!'))</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:04:26.520800</ts>
    <user>Arnoldo</user>
    <text>my python will never be the same :stuck_out_tongue:</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:05:22.521600</ts>
    <user>Tammera</user>
    <text>Same goes for equality, math ops, lookup, etc</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:05:59.522600</ts>
    <user>Tammera</user>
    <text>I’ve seen python code that repurposes `**` for something clever</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:06:45.522800</ts>
    <user>Arnoldo</user>
    <text>yeah it has pretty convenient metaprogramming with it's "magic" methods</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:06:57.523000</ts>
    <user>Arnoldo</user>
    <text>nothing beats macros though</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:09:03.523700</ts>
    <user>Tammera</user>
    <text>Language design is such a fascinating subject</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:19:00.523900</ts>
    <user>Arnoldo</user>
    <text>definitely... also quite the rabbit hole</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:19:12.524100</ts>
    <user>Arnoldo</user>
    <text>i prefer being a spectator and letting the adults play</text>
  </message>
  <message conversation_id="446">
    <ts>2019-02-08T15:21:51.524300</ts>
    <user>Tammera</user>
    <text>hahaha, right</text>
  </message>
  <message conversation_id="447">
    <ts>2019-02-08T16:34:18.525800</ts>
    <user>Bree</user>
    <text>tooting my own horn here, but &lt;https://github.com/cjohansen/dumdom&gt; can render the same components server and client side on both the JVM (native, no JavaScript runtime) and Node</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:48:39.530200</ts>
    <user>Alyson</user>
    <text>I hope I'm not beating a dead horse, but I wanted to ask some conceptual questions about clojure startup time.  Some things I understand:
- The JVM startup time is a relatively small component
- Clojure itself has to evaluate all of its internal code when you start it up, which is the bulk of the time
- I've read that some lisp implementations are able to save an "image" of a system
- Subsequent invocations can start quicker by simply loading the image
- I think GraalVM supports a similar notion, but that might be only for compiled code (you lose `eval`?)
- Clojurescript / Lumo, etc have a faster startup time (on platforms for which Node is available)</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:49:13.530900</ts>
    <user>Alyson</user>
    <text>My question was: are there any technical limitations which would make it impossible for clojure to eventually support this notion of saving to / starting from an "image"?</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:49:29.531200</ts>
    <user>Alyson</user>
    <text>i.e. is there anything about the JVM which would make that impossible?</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:50:03.531700</ts>
    <user>Alyson</user>
    <text>Startup times on machines I own, if anyone is curious :slightly_smiling_face:
```
startup times:
* macbook pro 2015: clojure(1.9):         ~1.2 seconds
* macbook pro 2012: clojure(1.9):         ~1.2 seconds
* HP i3@2.3GHz:     clojure(1.8,openjdk): ~6.1 seconds
* raspi 3:          clojure(1.8,oracle):  ~16 seconds
* OLPC:             clojure(1.6,openjdk): ~20 seconds
* raspi zero w:     clojure(1.6,oracle):  ~81 seconds
* raspi zero w:     clojure(1.6,openjdk): ~97 seconds
* pogoplug:         clojure(1.6,openjdk): ~98 seconds
* NSLU2:            clojure(1.9,openjdk): ~284 seconds
```</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:50:51.532300</ts>
    <user>Dann</user>
    <text>what are you starting in each of those cases? lein? the clojure command line tool? `java -jar ...` ?</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:51:13.532800</ts>
    <user>Alyson</user>
    <text>oh, sorry: `time echo '(System/exit 0)' | clojure`</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:51:18.533000</ts>
    <user>Alyson</user>
    <text>not sure how scientific that is</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:51:25.533200</ts>
    <user>Dann</user>
    <text>so the clojure command line tool</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:51:31.533400</ts>
    <user>Alyson</user>
    <text>yeah</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:51:54.534200</ts>
    <user>Dann</user>
    <text>just make sure it's not the first run from that directory (cached deps list / downloads)</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:51:57.534400</ts>
    <user>Alyson</user>
    <text>(I should also state that I'm a clojure noob -- please point out any glaring mistakes I'm making)</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:52:17.534800</ts>
    <user>Alyson</user>
    <text>&lt;@Dann&gt; yeah, thanks, I did see a speedup on subsequent runs!</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:53:32.536000</ts>
    <user>Dann</user>
    <text>there are a few things that can be sped up, where speeding them up removes desired dev-time features of the language (eg. redefinitions of vars) - some of them are provided by default for clojure.core but can be turned on for other namespaces</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:53:57.536200</ts>
    <user>Alyson</user>
    <text>oh interesting</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:54:55.537200</ts>
    <user>Alyson</user>
    <text>for the "image" idea, I'm curious how that is implemented on other lisps.  literally dumping a copy of the stack / heap to disk?  seems like that would be large</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:55:00.537500</ts>
    <user>Becki</user>
    <text>direct linking?</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:55:58.538200</ts>
    <user>Dann</user>
    <text>&lt;@Alyson&gt; precisely, it's a space/speed tradeoff (java makes enough of those already that the size of allocations becomes a factor...)</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:56:16.538600</ts>
    <user>Alyson</user>
    <text>&lt;@Becki&gt; this? &lt;https://clojure.org/reference/compilation#directlinking&gt;</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:56:34.538900</ts>
    <user>Dann</user>
    <text>yeah, that's the one</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:57:37.539500</ts>
    <user>Dann</user>
    <text>&lt;@Alyson&gt; the jvm arg is `-Dclojure.compiler.direct-linking=true`</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:57:47.539800</ts>
    <user>Alyson</user>
    <text>_As of Clojure 1.8, the Clojure core library itself is compiled with direct linking._  oh interesting, so I should definitely be comparing 1.8 to other versions</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:58:23.540600</ts>
    <user>Dann</user>
    <text>I guess it doesn't apply to your test, as it defines no clojure code outside clojure.core</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:58:28.540800</ts>
    <user>Alyson</user>
    <text>might explain why the raspi zero w was way slower than I expected vs. the rasp 3 -- I was running 1.6 on one and 1.8 on the other</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:59:09.541300</ts>
    <user>Alyson</user>
    <text>&lt;@Dann&gt; oh, if I don't use clojure.core then it doesn't get evaled on startup?</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T17:59:55.542100</ts>
    <user>Dann</user>
    <text>what I mean is that the flag I menion above doesn't do anything if you aren't compiling anything - I guess your one interop call gets compiled but that should be minor</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:00:03.542500</ts>
    <user>Alyson</user>
    <text>oh gotcha</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:00:34.543200</ts>
    <user>Dann</user>
    <text>if you had a significant app to compile and run, I would expect that flag to make a difference</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:03:00.544300</ts>
    <user>Alyson</user>
    <text>One the conceptual things I seemed to gather was that porting clojure to a different platform doesn't address the startup issue, because it is mostly due to the need to evaluate a bunch of clojure code on startup.  I grabbed a copy of clojure_py and observed similar results.</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:03:19.544700</ts>
    <user>Alyson</user>
    <text>(so i.e. porting to C wouldn't help anything, and might even be slower the the JVM)</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:05:20.546000</ts>
    <user>Alyson</user>
    <text>The thing which struck me was the difference between clojure startup times and some common-lisp implementation startup times.  e.g. on my lowly NSLU2, gcl starts in 0.26 seconds.  So it must not be evaluating much on startup.</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:06:46.546800</ts>
    <user>Alyson</user>
    <text>Anyway, just wanted to ask if there was any knowledge / current efforts around the idea of starting clojure from an "image" in a way similar to e.g. common-lisp (I think emacs does this as well?)  (related: &lt;https://stackoverflow.com/a/7686350/7543271&gt;)</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:08:24.548200</ts>
    <user>Celestine</user>
    <text>While there is ongoing work to help reduce Clojure's startup time on the JVM, the idea of an "image" is a non-starter, in my opinion, since you're talking about the JVM itself really -- you'd need to be able to save and load JVM images for Clojure to be able to leverage that.</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:08:38.548400</ts>
    <user>Alyson</user>
    <text>ah, gotcha</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:09:31.549400</ts>
    <user>Celestine</user>
    <text>Clojure just has a lot of `.class` files to load and initialize.</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:11:04.551100</ts>
    <user>Celestine</user>
    <text>It would require a fairly fundamental change to the (Clojure) compiler to produce something that loaded and initialized faster for `clojure.core` (and the handful of other namespaces that actually get pulled in for `-main` to run) -- and that's just not a concern for server-based software which is really Clojure's target.</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:11:36.551600</ts>
    <user>Alyson</user>
    <text>thanks for the perspective &lt;@Celestine&gt;</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:13:12.553500</ts>
    <user>Ronda</user>
    <text>I would recommend watching this great talk from Gary Fredericks: &lt;https://www.youtube.com/watch?v=-Qm09YiUHTs&gt; - IMO there is no low hanging fruit (without introducing breaking changes)</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:13:35.554400</ts>
    <user>Alyson</user>
    <text>&lt;@Ronda&gt; thanks I'll check it out!</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:13:39.554500</ts>
    <user>Celestine</user>
    <text>On a reasonably fast laptop/desktop, `clojure` _is_ fast enough for scripting for most purposes tho', unless you're looking for sub-second response times...</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:13:54.554900</ts>
    <user>Celestine</user>
    <text>Gary's talk is excellent!</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:14:28.555900</ts>
    <user>Alyson</user>
    <text>yeah, I gather that most people are using a SLIME-style workflow anyway, so they infrequently see the startup time lag</text>
  </message>
  <message conversation_id="449">
    <ts>2019-02-08T18:14:53.556300</ts>
    <user>Celestine</user>
    <text>I guess a lot depends on which languages you're coming from... I've been on the JVM primarily for about twenty years so... :slightly_smiling_face:</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:15:43.557200</ts>
    <user>Celestine</user>
    <text>Aye, I start a REPL up and leave it running for days. In fact, I often have two or three REPLs running in different contexts, and switch my editor between them as needed.</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:19:04.557800</ts>
    <user>Celestine</user>
    <text>And "Welcome to Clojure!" &lt;@Alyson&gt; :slightly_smiling_face:</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:19:37.558200</ts>
    <user>Celestine</user>
    <text>(just scrolled back and saw your comment that you're new-ish to the language)</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:21:41.559400</ts>
    <user>Alyson</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:21:46.559500</ts>
    <user>Celestine</user>
    <text>One difference between 1.8 and 1.9 is the addition of `clojure.spec` and `core.specs` so I suspect that's part of the slowdown from 1.8 to 1.9</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:22:07.559700</ts>
    <user>Alyson</user>
    <text>ah interesting</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:22:49.561000</ts>
    <user>Alyson</user>
    <text>yeah even though I'm new, I've been watching rich's talks for years and they have influenced my thinking in other languages.  my goal for 2019 is to get serious with clojure</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:23:20.561700</ts>
    <user>Celestine</user>
    <text>Locally, it looks like startup times were pretty consistent from 1.2 up to 1.7 (about 1.15 - 1.2s on my desktop), then dropped to just under 1s with 1.8, and went back up to about 1.1-1.2 with 1.9.</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:24:01.562200</ts>
    <user>Alyson</user>
    <text>ah, so that reflects the change to direct linking in core and then the introduction of spec</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:24:43.562700</ts>
    <user>Celestine</user>
    <text>And 1.10 and 1.11 (master) seem about the same as 1.9 (again, consistent).</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:26:23.563100</ts>
    <user>Celestine</user>
    <text>You might find the analysis here interesting &lt;https://dev.clojure.org/display/design/Improving+Clojure+Start+Time&gt;</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:26:52.563300</ts>
    <user>Alyson</user>
    <text>oh thanks!</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:28:50.563700</ts>
    <user>Celestine</user>
    <text>You can shave some startup time off for `clojure` with `-J'-Xverify:none'`</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:29:05.564100</ts>
    <user>Celestine</user>
    <text>(per that wiki page -- but see the caveats around that)</text>
  </message>
  <message conversation_id="448">
    <ts>2019-02-08T18:30:46.564500</ts>
    <user>Celestine</user>
    <text>This is consistently 0.9s for me ```time echo '(System/exit 0)' | clojure -A:1.10 -J'-Xverify:none' -J-client -J-XX:+TieredCompilation -J-XX:TieredStopAtLevel=1
```</text>
  </message>
  <message conversation_id="450">
    <ts>2019-02-08T19:45:32.565300</ts>
    <user>Jasmine</user>
    <text>I don’t think that works anymore in modern jvms</text>
  </message>
  <message conversation_id="450">
    <ts>2019-02-08T19:46:08.565900</ts>
    <user>Jasmine</user>
    <text>Or has no effect</text>
  </message>
  <message conversation_id="450">
    <ts>2019-02-08T19:47:47.566700</ts>
    <user>Jasmine</user>
    <text>Correct. 1.8 had some cost from incidental loading from the socket server stuff</text>
  </message>
  <message conversation_id="450">
    <ts>2019-02-08T19:49:27.567900</ts>
    <user>Jasmine</user>
    <text>AppCDS does this on the jvm and it does help a lot, but kind of requires you to know everything you’re going to load</text>
  </message>
  <message conversation_id="451">
    <ts>2019-02-08T19:55:13.568700</ts>
    <user>Matha</user>
    <text>what machine are you on?</text>
  </message>
  <message conversation_id="450">
    <ts>2019-02-08T20:04:19.568900</ts>
    <user>Celestine</user>
    <text>A late-2012 27" iMac with 16GB RAM and a 3.4GHz Core i7 with SSD drives.</text>
  </message>
  <message conversation_id="450">
    <ts>2019-02-08T20:09:10.569900</ts>
    <user>Celestine</user>
    <text>`-J-Xverify:none` still seems to make a difference on OpenJDK 11 vs OpenJDK 8.  The `-client` and tiered stuff, not so much.</text>
  </message>
  <message conversation_id="450">
    <ts>2019-02-08T20:37:53.571300</ts>
    <user>Jasmine</user>
    <text>I thought they didn’t allow you to turn off the verifier anymore, but been a while since I looked at it</text>
  </message>
  <message conversation_id="450">
    <ts>2019-02-08T21:01:55.572000</ts>
    <user>Jasmine</user>
    <text>In any case, don’t turn off the verifier :)</text>
  </message>
  <message conversation_id="450">
    <ts>2019-02-08T21:31:08.572200</ts>
    <user>Celestine</user>
    <text>&amp;gt; (per that wiki page -- but see the caveats around that)
:slightly_smiling_face:</text>
  </message>
  <message conversation_id="452">
    <ts>2019-02-09T11:22:03.574700</ts>
    <user>Mireille</user>
    <text>seeing this error running an old version of a library (liberator 0.12.2) on java 11 using the clojure cli:
```CompilerException java.lang.ClassNotFoundException: javax.xml.ws.ProtocolException, compiling:(liberator/conneg.clj:1:1)```
is there a workaround for this? I believe it's a general issue running old libraries on java 11, and the answer is to add the dependency using `--add-modules` but I'm not sure how to do that. also, it's a regression test so I can't upgrade the liberator library</text>
  </message>
  <message conversation_id="452">
    <ts>2019-02-09T13:23:39.580200</ts>
    <user>Jessia</user>
    <text>I think in Java 11 the better solution is to add the javax jaxb dependencies (available on Maven). </text>
  </message>
  <message conversation_id="452">
    <ts>2019-02-09T13:24:24.580600</ts>
    <user>Jessia</user>
    <text>See here: &lt;https://stackoverflow.com/a/52502208&gt;</text>
  </message>
  <message conversation_id="453">
    <ts>2019-02-09T13:52:58.583600</ts>
    <user>Rosia</user>
    <text>how do people typically deal with missing values NA or NaN type values when doing data science type stuff in clojure? Is using nil or ##NaN obviously better?</text>
  </message>
  <message conversation_id="453">
    <ts>2019-02-09T13:53:08.583800</ts>
    <user>Rosia</user>
    <text>and checking for this everywhere?</text>
  </message>
  <message conversation_id="453">
    <ts>2019-02-09T13:57:29.587600</ts>
    <user>Jessia</user>
    <text>Is there a best practice for namespaced keys in nested maps? e.g. I have this structure with namespaced keys but see it is rather verbose: 

```
{:document/entities 
  {:entity/extracted ... 
   :entity/tagged ... }}
```</text>
  </message>
  <message conversation_id="453">
    <ts>2019-02-09T13:59:14.588400</ts>
    <user>Rosia</user>
    <text>&lt;@Jessia&gt; you can do this to save a little repetition: ``` {:document/entities 
                #:entity{:extracted []
                         :tagged [] }} ```</text>
  </message>
  <message conversation_id="453">
    <ts>2019-02-09T14:00:23.589900</ts>
    <user>Jessia</user>
    <text>Thanks - sorry I should have said I’m aware of that syntax but even then it doubles up on entity/entities in this example.</text>
  </message>
  <message conversation_id="453">
    <ts>2019-02-09T14:02:55.591200</ts>
    <user>Rosia</user>
    <text>I'm not 100% what you mean, do you mean you want the `:entity` keyword qualifier somehow inferred from it being below `:document/entities` in the tree?</text>
  </message>
  <message conversation_id="453">
    <ts>2019-02-09T14:03:38.592300</ts>
    <user>Rosia</user>
    <text>I think a lot of the qualified keyword stuff is a place where verbosity has been hard to avoid in my experience</text>
  </message>
  <message conversation_id="453">
    <ts>2019-02-09T14:03:47.592500</ts>
    <user>Jessia</user>
    <text>Yes, or if there’s some better way to design my data so it’s not necessary</text>
  </message>
  <message conversation_id="454">
    <ts>2019-02-09T14:18:09.595400</ts>
    <user>Tajuana</user>
    <text>I’m working a testing framework but I’m struggling to filter/compare namespaced maps</text>
  </message>
  <message conversation_id="454">
    <ts>2019-02-09T14:18:49.596000</ts>
    <user>Tajuana</user>
    <text>```#::step{:name 'some-name}```</text>
  </message>
  <message conversation_id="454">
    <ts>2019-02-09T14:19:10.596400</ts>
    <user>Tajuana</user>
    <text>with an arbitrary map that may be namespaced</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:24:46.596500</ts>
    <user>Samual</user>
    <text>clojure.data/diff ?</text>
  </message>
  <message conversation_id="454">
    <ts>2019-02-09T14:31:54.597500</ts>
    <user>Tajuana</user>
    <text>Not quite what I’m looking for. I want to ask.. is this map from this particular namespace</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:37:41.597700</ts>
    <user>Oscar</user>
    <text>I think records could be useful for this. but, _gasp_, that means making use of types</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:39:16.598400</ts>
    <user>Rosia</user>
    <text>will all keys in the map have the same namespace?</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:39:30.598800</ts>
    <user>Becki</user>
    <text>just to point out, maps cannot be namespaced. there's a shorthand for when all of the keys share the same namespace but this is a property of those keys and not the map</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:39:59.599400</ts>
    <user>Becki</user>
    <text>however, could you walk over things and collapse maps whose entries are keywords which all share the same namespace into a single entry?</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:41:27.600500</ts>
    <user>Rosia</user>
    <text>`(-&amp;gt; #:step{:name 'some-name} first key namespace)` if you can count on the map's key entries to all have the same NS</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:41:29.600600</ts>
    <user>Becki</user>
    <text>not sure what your goal is but you could walk and strip namespaces, or assert that all entries have the same namespace or something. But i'm not clear what your goal is and how namespace keys really affect that</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:57:10.600700</ts>
    <user>Samual</user>
    <text>What does it mean for a map to be from a namespace?</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:57:34.600900</ts>
    <user>Samual</user>
    <text>Each key in a map may be namespace-qualified.</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:58:44.601600</ts>
    <user>Samual</user>
    <text>The utility of namespaced keys is precisely that one map can contain a variety of them</text>
  </message>
  <message conversation_id="455">
    <ts>2019-02-09T14:59:05.602100</ts>
    <user>Tajuana</user>
    <text>I think the answer is to just walk the keys and see if it conforms</text>
  </message>
  <message conversation_id="456">
    <ts>2019-02-09T15:00:01.602400</ts>
    <user>Tajuana</user>
    <text>Okie, thanks</text>
  </message>
  <message conversation_id="457">
    <ts>2019-02-10T01:36:36.602900</ts>
    <user>Mireille</user>
    <text>&lt;@Jessia&gt; thanks, that worked for me</text>
  </message>
  <message conversation_id="458">
    <ts>2019-02-10T05:03:14.603200</ts>
    <user>Alease</user>
    <text>is there anything like a static analysis tool to add type hints to a clojure file?</text>
  </message>
  <message conversation_id="458">
    <ts>2019-02-10T05:03:38.603400</ts>
    <user>Alease</user>
    <text>or at leas try</text>
  </message>
  <message conversation_id="459">
    <ts>2019-02-10T08:52:16.604200</ts>
    <user>Rosanne</user>
    <text>Hi! The following code:
```(ns my-ns
        (:refer-clojure :exclude [def]))

   (alias 'c 'clojure.core)

   (c/def test 1)```
Gives an error: `RuntimeException No such var: c/def`. What am I doing wrong here?</text>
  </message>
  <message conversation_id="460">
    <ts>2019-02-10T10:25:08.605700</ts>
    <user>Shanell</user>
    <text>`:refer-clojure` is outside `ns`</text>
  </message>
  <message conversation_id="459">
    <ts>2019-02-10T11:37:14.605800</ts>
    <user>Rosanne</user>
    <text>You’re right of course, i mistyped it in Slack, but it’s correct in my code</text>
  </message>
  <message conversation_id="459">
    <ts>2019-02-10T13:17:43.606500</ts>
    <user>Argentina</user>
    <text>&lt;@Jessia&gt; If you want to reduce the verbosity in your code, I'd look at using tagged literals. I put together an example of doing that  &lt;https://gist.github.com/shaunparker/c89ac63cba98d05d9586a837654b1c1e&gt;. If you have clojure installed locally you can run `clojure -Sdeps '{:deps {keyword-tagged-literal-ex {:git/url "&lt;https://gist.github.com/shaunparker/c89ac63cba98d05d9586a837654b1c1e&gt;" :sha "bb8513e88698c0cf12108b6df19a96679661c3cc"}}}' -m example`</text>
  </message>
  <message conversation_id="461">
    <ts>2019-02-10T13:31:09.609200</ts>
    <user>Deangelo</user>
    <text>hi everyone. I have a list of lists - ```((1 2 3) (1 0 6) (3 9 8))```
and I’d like to `interleave` these and put them in lists again, so basically my end result to be
```((1 1 3) (2 0 9) (3 6 8))```
I’m a bit stuck, because I ended up with something like
```(apply list (apply interleave my-list))``` and it obviously doesn’t work</text>
  </message>
  <message conversation_id="461">
    <ts>2019-02-10T13:37:40.609500</ts>
    <user>Argentina</user>
    <text>&lt;@Deangelo&gt; `(-&amp;gt;&amp;gt; (apply interleave my-list) (partition 3))`</text>
  </message>
  <message conversation_id="461">
    <ts>2019-02-10T13:38:19.609900</ts>
    <user>Deangelo</user>
    <text>ah right! thanks &lt;@Argentina&gt;</text>
  </message>
  <message conversation_id="461">
    <ts>2019-02-10T13:38:43.610600</ts>
    <user>Argentina</user>
    <text>you're welcome</text>
  </message>
  <message conversation_id="461">
    <ts>2019-02-10T13:38:48.610700</ts>
    <user>Latonya</user>
    <text>An alternative that should work for more then 3 lists of lists (I am not saying shaun's does not -- I just suspect perhaps maybe it is limited to that because of the (partition 3)):</text>
  </message>
  <message conversation_id="461">
    <ts>2019-02-10T13:38:50.610900</ts>
    <user>Latonya</user>
    <text>```user=&amp;gt; (apply map list '((1 2 3) (1 0 6) (3 9 8)))
((1 1 3) (2 0 9) (3 6 8))
```</text>
  </message>
  <message conversation_id="461">
    <ts>2019-02-10T13:52:42.611700</ts>
    <user>Deangelo</user>
    <text>:+1: nice one. they both work actually :slightly_smiling_face: I love the fact that there are many different ways you can approach things</text>
  </message>
  <message conversation_id="462">
    <ts>2019-02-10T14:53:23.612500</ts>
    <user>Jessia</user>
    <text>Whoa, interesting stuff. Thanks Shaun, I shall have to give it a try </text>
  </message>
  <message conversation_id="463">
    <ts>2019-02-10T15:54:50.614400</ts>
    <user>Sixta</user>
    <text>Why does using a nested j.u.H cause a reflection warning? How can I do this properly?

```
(defn foo
  []
  (java.util.HashMap.
    {"baz" (java.util.HashMap.
             {"foo" "bar"})}))
```

```
Reflection warning, NO_SOURCE_PATH:3:3 - call to java.util.HashMap ctor can't be resolved.
```</text>
  </message>
  <message conversation_id="464">
    <ts>2019-02-10T16:04:50.614700</ts>
    <user>Sixta</user>
    <text>I mean, I can reduce-kv, but other than that :slightly_smiling_face:</text>
  </message>
  <message conversation_id="463">
    <ts>2019-02-10T16:13:47.615000</ts>
    <user>Becki</user>
    <text>there are two single arg constructors. need to indicate _which_ one?</text>
  </message>
  <message conversation_id="463">
    <ts>2019-02-10T16:14:39.615400</ts>
    <user>Becki</user>
    <text>not sure how to indicate `HashMap(Map&amp;lt;? extends K,? extends V&amp;gt; m)`.</text>
  </message>
  <message conversation_id="463">
    <ts>2019-02-10T16:14:50.615700</ts>
    <user>Jasmine</user>
    <text>I don’t think that’s it</text>
  </message>
  <message conversation_id="463">
    <ts>2019-02-10T16:15:03.616200</ts>
    <user>Jasmine</user>
    <text>specifically the inner one does not  reflect, only the outer one</text>
  </message>
  <message conversation_id="463">
    <ts>2019-02-10T16:17:06.616600</ts>
    <user>Jasmine</user>
    <text>TBH, I can’t explain that without digging into the compiler more</text>
  </message>
  <message conversation_id="464">
    <ts>2019-02-10T16:24:45.617000</ts>
    <user>Cherise</user>
    <text>&lt;@Deangelo&gt; another one :wink:

```
(require '[core.matrix :as matrix])
(matrix/transpose '((1 2 3) (1 0 6) (3 9 8)))
;; =&amp;gt; ((1 1 3) (2 0 9) (3 6 8))
```</text>
  </message>
  <message conversation_id="464">
    <ts>2019-02-10T22:16:11.618800</ts>
    <user>Gracie</user>
    <text>Has anyone seen the following error when running 'brew install clojure'?  brew install clojure
Error: No available formula with the name "clojure"
Clojure isn't really a program but a library managed as part of a
project and Leiningen is the user interface to that library.

To install Clojure you should install Leiningen:
  brew install leiningen</text>
  </message>
  <message conversation_id="464">
    <ts>2019-02-10T22:19:42.619500</ts>
    <user>Marlyn</user>
    <text>you must be on a very old brew &lt;@Gracie&gt;</text>
  </message>
  <message conversation_id="464">
    <ts>2019-02-10T22:19:59.619900</ts>
    <user>Marlyn</user>
    <text>I can brew install clojure just fine</text>
  </message>
  <message conversation_id="464">
    <ts>2019-02-10T22:28:49.620900</ts>
    <user>Gracie</user>
    <text>&lt;@Marlyn&gt; yes... turns out that reinstalling brew did the trick. brew update was also broken, which is how I ended up stuck on an older version.  Didn't realize it would affect the package index.</text>
  </message>
  <message conversation_id="465">
    <ts>2019-02-11T06:40:56.006800</ts>
    <user>Kenny</user>
    <text>Is it possible to define a custom implementation of `toString` for `defrecord`s? I have already defined a `clojure.core/print-method` for the record-type in question, which helps in REPL, but is not useful when I try to generate formatted string with `format` functions. Looks like `format` function directly calls `toString`.</text>
  </message>
  <message conversation_id="465">
    <ts>2019-02-11T06:43:17.008000</ts>
    <user>Virgil</user>
    <text>I'm using `clojure.tools.deps.alpha` to `resolve-deps` but I get:
```Expanding javax.servlet/javax.servlet-api #:mvn{:version 3.1.0}
Execution error (ArtifactNotFoundException) at org.eclipse.aether.connector.basic.ArtifactTransportListener/transferFailed (ArtifactTransportListener.java:48).
Could not find artifact net.java:jvnet-parent:pom:3 in glassfish-repository (&lt;http://download.java.net/maven/glassfish&gt;)```</text>
  </message>
  <message conversation_id="465">
    <ts>2019-02-11T06:43:36.008100</ts>
    <user>Roslyn</user>
    <text>```
(defrecord A []
  Object
  (toString [this] "AAAAA!!!"))
=&amp;gt; user.A
(A.)
=&amp;gt; #user.A{}
(format "scary? %s" (A.))
=&amp;gt; "scary? AAAAA!!!"
```</text>
  </message>
  <message conversation_id="465">
    <ts>2019-02-11T06:49:06.008300</ts>
    <user>Kenny</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="466">
    <ts>2019-02-11T06:58:01.008800</ts>
    <user>Virgil</user>
    <text>the solution was to ensure to have ``` :mvn/repos {"central" {:url "&lt;https://repo1.maven.org/maven2/&gt;"}
                "clojars" {:url "&lt;https://repo.clojars.org/&gt;"}}``` in the deps map</text>
  </message>
  <message conversation_id="467">
    <ts>2019-02-11T09:06:19.009300</ts>
    <user>Tamisha</user>
    <text>&lt;@Boyd&gt; try `(#{:general-info :permanent-address :school-info} panel-name)`</text>
  </message>
  <message conversation_id="468">
    <ts>2019-02-11T09:37:17.009500</ts>
    <user>Suzann</user>
    <text>If you take a look at the publics for clojure.core you will see that def is not included.

```
(sort (keys
       (ns-publics 'clojure.core)))
```

That's because def is actually a special form. &lt;https://clojure.org/reference/special_forms#def&gt;</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:29:51.010100</ts>
    <user>Mariela</user>
    <text>From last week. Any luck?
It keeps biting me, especially after long sessions</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:39:38.010900</ts>
    <user>Clarine</user>
    <text>I have had this problem too. Eventually I gave up on using tools.namespace refresh. I’m using the REPL more in the style of Stuart Halloway</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:40:40.011600</ts>
    <user>Mariela</user>
    <text>swapping Stus... :grin:

what does the technique consist of?</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:41:05.012200</ts>
    <user>Clarine</user>
    <text>In short, just redefine forms yourself, one at a time</text>
  </message>
  <message conversation_id="470">
    <ts>2019-02-11T10:41:35.012900</ts>
    <user>Donita</user>
    <text>Hi all does anybody know if a tool that would help to refactor function calls in a clj file that were created with a :refer :all to use a prefix?</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:42:07.013700</ts>
    <user>Clarine</user>
    <text>You can watch this talk: &lt;https://youtu.be/Qx0-pViyIDU?t=1751&gt;
He talks about the difference in the second half of the talk if I remember correctly</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:43:13.015300</ts>
    <user>Donita</user>
    <text>For example I have a file with (:require [korma.core :refer :all]))...   and within uses (update db-table (set-fields :myfield mydata) (where (:id id)))....</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:43:15.015500</ts>
    <user>Mariela</user>
    <text>sounds tough... I'm used to refresh large projects ~100 times per session.

no way I could do that manually (and without errors)?</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:43:17.015700</ts>
    <user>Donita</user>
    <text>to be:</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:43:37.016100</ts>
    <user>Mariela</user>
    <text>clj-refactor for emacs</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:43:54.016600</ts>
    <user>Mariela</user>
    <text>it has the `stop-referring` command</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:44:04.017000</ts>
    <user>Donita</user>
    <text>(:require [korma.core :as kdb]))....   (kdb/update tb-table (kdb/set-fields :myfield mydata) (where {:id id})))... etc.</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:44:41.017300</ts>
    <user>Donita</user>
    <text>ooh nice didn't see that!</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:44:49.017500</ts>
    <user>Clarine</user>
    <text>I use a lot of `(comment ...)` sections to try out stuff. those also get erased when I change something and then use tools.nrepl refresh. Also I use inline def sometimes to capture stuff. All this state is erased. Something which hampers my debugging. It’s a different trade off.</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:44:54.017700</ts>
    <user>Donita</user>
    <text>thanks #vemv</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:45:25.017900</ts>
    <user>Donita</user>
    <text>&lt;@Mariela&gt;</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:45:53.018100</ts>
    <user>Mariela</user>
    <text>:+1:if you don't use emacs you can use the underlying clojure code anyway</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:46:27.018300</ts>
    <user>Donita</user>
    <text>i have emacs yes. I will give it a wizz now. I don't normally use clj-refactor but have it installed</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:47:00.019100</ts>
    <user>Mariela</user>
    <text>it's super sweet. especially with the Hydra menu, otherwise I'd forget all those commands</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:47:35.019700</ts>
    <user>Becki</user>
    <text>The compiler will tell you about undefined symbols if you just update your import statement</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:48:05.020500</ts>
    <user>Clarine</user>
    <text>you can also use the joker linter, which will tell you even without compiling</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:48:32.021400</ts>
    <user>Clarine</user>
    <text>it’s a killer feature when using this as an editor plugin</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:50:05.022900</ts>
    <user>Donita</user>
    <text>just removing and relying on the compiler might be a bit deceptive as there are some function names in the korma namespace that shadow clojure.core ones - for example update and so I am concerned that I may not get compiler errors in that case</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:54:29.023400</ts>
    <user>Becki</user>
    <text>ah good point</text>
  </message>
  <message conversation_id="469">
    <ts>2019-02-11T10:59:15.024900</ts>
    <user>Donita</user>
    <text>gunna try emacs / clj-refactor / stop-referring command</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:01:00.026400</ts>
    <user>Roslyn</user>
    <text>tools.deps question: when I depend on git dependency, is there a way to also specify an alias defined in that library to be used?</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:01:10.026600</ts>
    <user>Jasmine</user>
    <text>no</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:01:21.027200</ts>
    <user>Roslyn</user>
    <text>will there be such a way?</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:01:23.027300</ts>
    <user>Jasmine</user>
    <text>no</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:01:38.027900</ts>
    <user>Jasmine</user>
    <text>aliases are resolved first to determine what deps to traverse</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:02:02.028700</ts>
    <user>Roslyn</user>
    <text>but aren't they like a classifiers in poms?</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:02:10.029000</ts>
    <user>Jasmine</user>
    <text>no</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:02:12.029100</ts>
    <user>Roslyn</user>
    <text>kind of</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:03:43.030000</ts>
    <user>Roslyn</user>
    <text>&amp;gt; aliases are resolved first to determine what deps to traverse
I meant to use alias defined in dependent library when specifying dependency, not using it in place where normal aliases are used</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:04:26.030900</ts>
    <user>Jasmine</user>
    <text>oh</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:04:36.031200</ts>
    <user>Jasmine</user>
    <text>haven’t thought about it</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:04:53.031600</ts>
    <user>Roslyn</user>
    <text>like that:
```
{:deps {git-dep/artifact {:git/url "..." :sha "..." :aliases ["blah"]}}}
```</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:05:22.032100</ts>
    <user>Roslyn</user>
    <text>this looks like classifier, and behaves kind of like classifier</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:05:46.032700</ts>
    <user>Roslyn</user>
    <text>(I mean expected to behave, not behaves)</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:05:56.032800</ts>
    <user>Jasmine</user>
    <text>I don’t think it’s like classifiers</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:06:18.033200</ts>
    <user>Jasmine</user>
    <text>classifiers select an alternate artifact</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:06:26.033700</ts>
    <user>Jasmine</user>
    <text>this is about selecting an alternate sub-classpath</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:06:36.034100</ts>
    <user>Roslyn</user>
    <text>right, this is more of a configure what bits to also include</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:07:00.034900</ts>
    <user>Jasmine</user>
    <text>well, feel free to file a TDEPS jira enhancement and I’ll think about it. not anything I’m going to do soon though.</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:08:40.036200</ts>
    <user>Roslyn</user>
    <text>Thanks, I will! I have a use case for it, but it's not very urgent and workarounds are possible while it's not there</text>
  </message>
  <message conversation_id="472">
    <ts>2019-02-11T11:30:25.037600</ts>
    <user>Mauricio</user>
    <text>hi, i’m trying to process a hierarchy and i think i have things working the way i like, but i can’t seem to figure out how to avoid an atom i want to get rid of… any tips appreciated.

&lt;https://gist.github.com/joefromct/0b017d43f381e3f861fc93d08e716213&gt;

I think it’s trickier than just a recur with an accumulator because there is a couple of doseq’s in the middle there.</text>
  </message>
  <message conversation_id="471">
    <ts>2019-02-11T11:40:12.038000</ts>
    <user>Roslyn</user>
    <text>&lt;@Jasmine&gt; created &lt;https://dev.clojure.org/jira/browse/TDEPS-116&gt;</text>
  </message>
  <message conversation_id="472">
    <ts>2019-02-11T11:54:43.040000</ts>
    <user>Jasmine</user>
    <text>thx</text>
  </message>
  <message conversation_id="472">
    <ts>2019-02-11T11:59:28.040100</ts>
    <user>Lonna</user>
    <text>Here’s a version that uses `reduce-kv` and `reduce` instead of `doseq`:
```

(defn recur-test [{:keys [acc val md5-list json-key]
                   :or {acc []
                        md5-list []
                        json-key []}
                   :as args}]
  (let [pretend-md5 (str (hash val))]
    (cond
      (map? val)
      (reduce-kv (fn [args' k v]
                   (recur-test (-&amp;gt; (assoc args' :val v)
                                   (update :json-key conj k)
                                   (update :md5-list conj pretend-md5))))
                 (update args :acc conj {:md5-list (conj md5-list pretend-md5)
                                         :json-key json-key
                                         :val val})
                 val)

      (vector? val)
      (reduce (fn [args' v]
                (recur-test (assoc args' :val v)))
              args
              val)

      :else
      args)))

(:acc (recur-test {:val airplanes}))
```</text>
  </message>
  <message conversation_id="473">
    <ts>2019-02-11T12:00:26.040300</ts>
    <user>Lonna</user>
    <text>Although note, I extracted `:acc` from the final result, since the whole `args` is returned from every call.</text>
  </message>
  <message conversation_id="473">
    <ts>2019-02-11T12:04:35.040600</ts>
    <user>Mauricio</user>
    <text>thanks a bunch that is awesome.</text>
  </message>
  <message conversation_id="473">
    <ts>2019-02-11T12:23:12.042100</ts>
    <user>Clarine</user>
    <text>Interestingly, TDEPS-116 could also open the way for a solution to managed dependencies. The lib/deps.edn is a file that describes managed deps via aliases. app/deps.edn consumes this lib and describes which managed deps (= alias in lib/deps.edn) it wants to include as deps.</text>
  </message>
  <message conversation_id="473">
    <ts>2019-02-11T12:41:24.042500</ts>
    <user>Lonna</user>
    <text>you’re welcome!</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:07:13.044200</ts>
    <user>Clemente</user>
    <text>I just did a `(source promise)` and discovered there's an undocumented behavior; a promise can act as a function equivalent to deliver on the promise.  This is actually quite useful to me.  Is this an intentional part of promise and, if so, should it be documented?

```
(def p (promise))
=&amp;gt; #'user/p
(p 37)
=&amp;gt; #object[clojure.core$promise$reify__8486 0x5742bdca {:status :ready, :val 37}]
@p
=&amp;gt; 37
```</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:11:11.045000</ts>
    <user>Clemente</user>
    <text>I'll submit a patch to update the docstring if so.</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:11:50.045900</ts>
    <user>Dann</user>
    <text>&lt;@Clemente&gt; for undocumented behavior you *definitely* shouldn't count on, I've seen `deliver` used to replace `(fn [f x] (f x))` which relies on that behavior</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:12:27.046300</ts>
    <user>Jasmine</user>
    <text>the implementation seems to quite intentionally support that</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:12:46.046900</ts>
    <user>Jasmine</user>
    <text>(by implementing IFn)</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:12:51.047100</ts>
    <user>Clemente</user>
    <text>So missing documentation: a bug, or leaving option open to remove this behavior?</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:13:13.047400</ts>
    <user>Jasmine</user>
    <text>I’d call it a doc bug</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:13:28.047900</ts>
    <user>Clemente</user>
    <text>Ok, patch coming up!</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:13:32.048100</ts>
    <user>Jasmine</user>
    <text>can’t imagine we would remove it</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:15:25.049000</ts>
    <user>Jasmine</user>
    <text>bleh</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:16:31.049900</ts>
    <user>Jasmine</user>
    <text>I would make the patch small by just extending “… with deliver _or by invoking the promise_”</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:18:02.050600</ts>
    <user>Jasmine</user>
    <text>looking at it again, clearly `deliver` is the intended entry point so I think I’d call it an enhancement</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:33:04.052000</ts>
    <user>Clemente</user>
    <text>Interesting; looking at the source for deliver, it is just `(promise val)`.  My thinking is that this usage in not intentional, it was just easier for Rich to re-use IFn than to define a new IDeliver interface. However, I think it is quite worth documenting and even using when appropriate.</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:34:08.052100</ts>
    <user>Tammera</user>
    <text>I have this ‘problem’ too, I initially thought it was because of refer’s, but sadly not so trivial</text>
  </message>
  <message conversation_id="474">
    <ts>2019-02-11T14:40:21.052300</ts>
    <user>Clemente</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-2480&gt;</text>
  </message>
  <message conversation_id="475">
    <ts>2019-02-11T15:23:14.054900</ts>
    <user>Larissa</user>
    <text>hello all, Is there any exponentiation function of a double exponent? `(function 4.554 &amp;lt;exponent_double&amp;gt;)`</text>
  </message>
  <message conversation_id="475">
    <ts>2019-02-11T15:23:39.055300</ts>
    <user>Dann</user>
    <text>for both clj and cljs you can use `Math/pow` via interop</text>
  </message>
  <message conversation_id="475">
    <ts>2019-02-11T15:23:57.055500</ts>
    <user>Larissa</user>
    <text>thansk</text>
  </message>
  <message conversation_id="475">
    <ts>2019-02-11T15:24:10.055700</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (Math/pow 4.554 Math/E)
61.61660979210404```</text>
  </message>
  <message conversation_id="475">
    <ts>2019-02-11T15:24:52.056100</ts>
    <user>Larissa</user>
    <text>worked, many thnaks</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T15:57:22.058900</ts>
    <user>Sebrina</user>
    <text>You know, once you get over the parenthesis there is a lot of power to appreciate. I was about to write `(defn min-&amp;gt;ms [min] (* (* min 60) 1000)` then `(defn min-&amp;gt;ms [min] (-&amp;gt; min (* 60) (* 1000)))` then realized it’s just `(defn min-&amp;gt;ms [min] (* min 60 1000))`.</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T15:58:24.059600</ts>
    <user>Becki</user>
    <text>honestly i would absolutely hate to work in a language without parens. text editing is so convenient with them. i think a paren beginner is equivalent to a vim master</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T15:59:02.060200</ts>
    <user>Esther</user>
    <text>once you have something like paredit as muscle memory it seems like you really have lifted off</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T15:59:15.060500</ts>
    <user>Tammera</user>
    <text>I am so lost in all editors that don’t sanely add parens lately</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T15:59:21.060700</ts>
    <user>Tammera</user>
    <text>cursive spoiled me</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T16:01:46.062100</ts>
    <user>Mauricio</user>
    <text>i want to brush up on my paren editing skills… does anyone have a link to a good tutorial/docs?  I’m using doom emacs atm and smart-parens is mildly annoying at times… i think i had a better paredit setup years ago.</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T16:02:13.062700</ts>
    <user>Esther</user>
    <text>i use lispy and there is a file in the package that is like vimtutor
&lt;https://github.com/abo-abo/lispy/blob/master/lispytutor/lispytutor.el&gt;</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T16:02:34.063600</ts>
    <user>Esther</user>
    <text>there might be something better out there though. Not sure if lispy is the best solution for clojure so would be interested in people's thoughts on that</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T16:02:36.063700</ts>
    <user>Sebrina</user>
    <text>Personally I’ve been using parinfer which I really love. The code practically writes itself!</text>
  </message>
  <message conversation_id="476">
    <ts>2019-02-11T16:02:59.064100</ts>
    <user>Mauricio</user>
    <text>nice i’ll read up on those two.</text>
  </message>
  <message conversation_id="477">
    <ts>2019-02-11T17:23:03.074500</ts>
    <user>Tandy</user>
    <text>In an attempt to understand datafy/nav a bit further (especially nav), I put together a very simple repo with an example here &lt;https://github.com/markbastian/datafy-playground/&gt;. The only example of significance is here: &lt;https://github.com/markbastian/datafy-playground/blob/master/src/datafy_playground/datafy_file.clj&gt;. I was wondering if some of the experts could weigh in on some questions I've had regarding these functions. Here are my questions:

 1. Is it appropriate or normal to auto-datafy as you nav? In my example, if I nav from a datafied file to its parent, is there any reason to not just datafy it on the fly?
 2. If a datafied item has a nested datafiable entity (in this case a datafied directory has a list of files) is it considered best practice to use collection functions to get at the item and then datafy it (e.g. ```(datafy (get-in datafied-directory [:files 2]))```) or is it acceptable to nav right to it (e.g. ```(nav datafied-directory :files 2)```).
 3. Finally, is it considered acceptable to nav to the contents of a thing if the key isn't present in the datafied coll? For example, if a file is a .csv file, is it normal to do ```(nav datafied-file :contents :csv)``` where the contents are implied?

The example I have above can be pasted right into a REPL if anyone wants to try it out. Hopefully it will be useful in both illustrating the above items as well as being something you all can use to experiment on.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T17:58:09.080200</ts>
    <user>Gemma</user>
    <text>Hello guys, how would you make a function run one at a time, even if it is called multiple times? I have a compojure route which makes a reservation, but first it checks if there is free-space. So this is a concurrency problem, how would you solve it?</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T17:58:41.081200</ts>
    <user>Dann</user>
    <text>if you use an agent, they enforce a queue on all sends</text>
  </message>
  <message conversation_id="477">
    <ts>2019-02-11T17:58:46.081400</ts>
    <user>Celestine</user>
    <text>&lt;@Tandy&gt; I don't know if this helps answer those questions, but the way I think about it is that you have some Thing (which is an arbitrary object -- Clojure or Java, whatever) and you explicitly call `datafy` on it to get a pure Clojure data representation of that Thing. Then you can navigate that as a pure Clojure data structure using regular Clojure functions and when you want to go back to the _corresponding arbitrary Thing or sub-Thing_ you call `nav`, mimicking the pure Clojure data structure navigation. Now you're back in Thing-land, and you would explicitly call `datafy` again to get to a pure Clojure data representation of that new Thing/sub-Thing.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:00:17.083400</ts>
    <user>Celestine</user>
    <text>In the case of REBL, it takes a Thing and calls `datafy` to get the data it displays in the view pane and when you "drill down", it calls `nav` to navigate into the Thing, and then calls `datafy` to get new data to display in the view pane.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:00:27.083800</ts>
    <user>Dann</user>
    <text>&lt;@Gemma&gt; alternatively, `compare-and-set!` or `swap!` with a function that conditionally aborts</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:01:01.084400</ts>
    <user>Dann</user>
    <text>(those functions work on an atom rather than an agent though, so if the source of truth isn't in memory an agent might still make more sense)</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:04:12.085100</ts>
    <user>Rosaline</user>
    <text>if you can model it in an atom as a compare-and-set!, you can do the same in a sql database, and other kinds of databases often have some kind of cas</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:04:54.086000</ts>
    <user>Dann</user>
    <text>yeah, letting a db be source of truth for the transaction is smarter</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:05:13.086600</ts>
    <user>Rosaline</user>
    <text>I am a huge fan of a cas, so for a reservation system, cas not-reserved with reserved, and then it doesn't matter how often the function is run</text>
  </message>
  <message conversation_id="477">
    <ts>2019-02-11T18:07:52.090000</ts>
    <user>Tandy</user>
    <text>&lt;@Celestine&gt; - So, in the cases of a File or a DB thing (a row in a resultset, for example), datafy takes you from File or Row to Clojure data (likely a map). This part makes sense to me. WRT nav, are you saying nav on a map would take me back to a File, Row, or other Thing-type corresponding to where you are navigating?</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:08:09.090400</ts>
    <user>Gemma</user>
    <text>&lt;@Dann&gt; the problem is the source is mongodb. Read and writes can't be atomic together, I just want to put functions in queque like in core.async, but I want to wait still one ends before the other starts</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:08:42.091800</ts>
    <user>Dann</user>
    <text>agents have this behavior, but it's going to be fragile</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:08:54.092800</ts>
    <user>Dann</user>
    <text>eg. what if two servers are running your app?</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:09:05.093500</ts>
    <user>Sonny</user>
    <text>&lt;@Gemma&gt; You may need to consider here, what is going to happen if you ever load balance over more than one server :slightly_smiling_face:.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:09:06.093600</ts>
    <user>Dann</user>
    <text>with no distributed reliable source of truth, bad things will happen</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:09:07.093700</ts>
    <user>Tandy</user>
    <text>Or once you are in data-land do you capture the scope of the original thing (e.g. the FileSystem or DB) and just work in data?</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:09:34.094700</ts>
    <user>Rosaline</user>
    <text>you will need to stand up something like zookeeper or etcd to get cas on top of a non-transactional store</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:10:00.095700</ts>
    <user>Dann</user>
    <text>yeah, a dedicated reliable source of truth is an option</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:10:04.095900</ts>
    <user>Celestine</user>
    <text>Correct. `Thing` -&amp;gt; `datafy` -&amp;gt; data -&amp;gt; `nav` -&amp;gt; `Thing2` -&amp;gt; `datafy` -&amp;gt; data2</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:10:15.096900</ts>
    <user>Rosaline</user>
    <text>(or implement a consensus algorithm yourself, which has hazards)</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:10:17.097000</ts>
    <user>Gemma</user>
    <text>&lt;@Sonny&gt; I am way too amateur too consider this yet. This is my third full-stack application till now, and this one have real clients, so this is my first concurrency problem :smile:</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:10:18.097200</ts>
    <user>Dann</user>
    <text>or a db that provides this while also storing your data - such things exist</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:10:34.097700</ts>
    <user>Celestine</user>
    <text>The Thing you start with either needs to have metadata for the `Datafiable` protocol or directly implement it.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:10:38.098000</ts>
    <user>Rosaline</user>
    <text>using a queue doesn't really enforce what you want</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:11:04.099400</ts>
    <user>Celestine</user>
    <text>When you call `datafy`, the pure data structure produced has metadata for the `Navigable` protocol (or directly implements it).</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:11:15.100000</ts>
    <user>Gemma</user>
    <text>well I just want to block other operations while I read, calculate then update the new value</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:11:21.100400</ts>
    <user>Gemma</user>
    <text>so a queque with blocking :smile:</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:11:28.100700</ts>
    <user>Celestine</user>
    <text>When you `nav`, you get back a new Thing (with metadata for `Datafiable` or an implementation of it).</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:11:43.101700</ts>
    <user>Rosaline</user>
    <text>a queue with blocking doesn't</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:11:50.102200</ts>
    <user>Sonny</user>
    <text>&lt;@Gemma&gt; Well, here's an interesting option. If you choose to represent each "ticket" in your mongo database as an individual document, you should be able to use the mongo function, "findOneAndUpdate()", to find a "free ticket" and reserve it.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:12:37.104000</ts>
    <user>Sonny</user>
    <text>Then you can load balance later if you need to :slightly_smiling_face:</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:13:10.105300</ts>
    <user>Rosaline</user>
    <text>the best thing to do is likely just not use mongo</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:13:10.105400</ts>
    <user>Celestine</user>
    <text>Have you seen my examples in &lt;https://github.com/clojure/java.jdbc/blob/master/src/main/clojure/clojure/java/jdbc/datafy.clj&gt;</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:13:21.106100</ts>
    <user>Gemma</user>
    <text>&lt;@Sonny&gt; well this is a bit more complex, I store free-times in minute intervals `[[600 1000][1200 1440]]`... so I can't update with mongo logic, I need my clojure power to make new ranges of minutes etc.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:14:12.107800</ts>
    <user>Gemma</user>
    <text>my all reservation logic is about ranges, remove ranges from ranges, then keep the new ranges</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:15:07.109900</ts>
    <user>Sonny</user>
    <text>&lt;@Gemma&gt; Honestly, you might need to rethink that if you want a robust solution to this problem. It's not uncommon to have to do this, particularly with something like mongo. You often have to design your data storage around operational requirements.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:16:32.113800</ts>
    <user>Sonny</user>
    <text>You could also look at java.util.concurrent if nothing obvious to be found in clojure. Lots of "locky" type stuff in there, but locking your entire system while one person makes a booking strikes me as a... non-ideal solution.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:17:07.116000</ts>
    <user>Jasmine</user>
    <text>Lot of good questions here, but I don’t have time or ability to answer atm and I might forget. If you put this on Clojure mailing list I will be more likely to give it the treatment it deserves</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:18:03.118100</ts>
    <user>Sonny</user>
    <text>Incidentally, many large systems solve this problem by just "overselling" and solving the problem later :slightly_smiling_face:.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:18:28.118800</ts>
    <user>Gemma</user>
    <text>I want to lock only the function. only adding reservation and modifying it, is a problem, which happens like 40 times a day, the problem is it happened at the same time once, so reservation overlapped each other.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:18:36.119300</ts>
    <user>Tandy</user>
    <text>Moved to separate thread...</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:18:37.119500</ts>
    <user>Gemma</user>
    <text>well, I thought it wont be a problem for a time myself</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:19:04.120100</ts>
    <user>Gemma</user>
    <text>but in first week it happened 2 times :smile:</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:19:27.120600</ts>
    <user>Gemma</user>
    <text>it is like 2 guys picking same date, same hour, at same guy, in the same 5 ms-es</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:21:17.122600</ts>
    <user>Gemma</user>
    <text>well, anyway, I need an easy fix, because I can't make a new architecture in one night. For example storing a state in atom, setting it to true if running, false after the update, and the function should recur still it is false, so it can run and set it true and etc...</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:22:16.122900</ts>
    <user>Celestine</user>
    <text>&lt;@Tandy&gt; `nav` should not automatically `datafy` things.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:22:43.123200</ts>
    <user>Celestine</user>
    <text>Did you see this thread? I was trying to answer in a thread to avoid cluttering the main channel.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:23:39.123800</ts>
    <user>Celestine</user>
    <text>&lt;@Tandy&gt; I answered in a thread to avoid cluttering the main channel.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:25:05.124300</ts>
    <user>Tandy</user>
    <text>Thanks, &lt;@Jasmine&gt; &amp;amp; &lt;@Celestine&gt; - And I want to make sure I don't give you guys the impression that I expect you to get to it right away. If there's a "best place" to put examples for discussion please let me know and I'm happy to put them there. I want to provide as complete examples as possible to minimize everyone else's work load.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:25:59.125400</ts>
    <user>Sonny</user>
    <text>&lt;@Gemma&gt; Maybe look at `(locking)`, you can just def some kind of object in the namespace and lock on it. I am not sure I would advise this as an actual long term solution, but it will probably do what you need for now.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:26:06.125500</ts>
    <user>Celestine</user>
    <text>In your example, you would do `(-&amp;gt; (io/file ".") datafy :files)` to get your sequence of files, then you can either do `(get X 0)` to get an individual file representation or `(nav X 0 (get X 0))` to navigate to the corresponding file thing.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:26:52.126000</ts>
    <user>Celestine</user>
    <text>I'm happy to continue answering in the thread (where I already posted several replies)</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:27:02.126400</ts>
    <user>Dann</user>
    <text>btw my first suggestion, using an agent, is effectively a queue plus locking plus execution on a separate thread</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:27:20.126800</ts>
    <user>Tandy</user>
    <text>Pasted from main thread:</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:27:21.127000</ts>
    <user>Tandy</user>
    <text>Using the "recipe" at &lt;http://corfield.org/blog/2018/12/03/datafy-nav/&gt;:
You can sum this up as:

Starting with a “thing”…
```(io/file ".")```
…you convert it to data (with datafy)…
```
(-&amp;gt; (io/file ".")
     datafy) ;Let's say this produces a map with an entry :files which is a list of java.io.File
```
…and walk it with simple Clojure data access…
```
(-&amp;gt; (io/file ".")
     datafy
     (get-in [:files 0])) ;This is one way
```
…and, at each stage, you can navigate to the corresponding “new thing” by calling nav…
```
;Option 1
(-&amp;gt; (io/file ".")
     datafy
     (get-in [:files 0])
    (nav ? ?) ;Not sure how this works

;Option 2
(-&amp;gt; (io/file ".")
     datafy
    (nav :files 0) ;This could return a File or I could datafy this in my implementation
```
…which may return just that value or may do something more complex…
…and from that “new thing” you convert it to data (with datafy) and continue the process.

Do either of these make sense? I apologize if I am sounding dense and am taking too much of you guys' time. I've watched Stuart's video, read your blog post, and the source (all multiple times) and everything seems to click except for the correct way to invoke nav.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:27:31.127300</ts>
    <user>Celestine</user>
    <text>I already answered that above.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:28:03.128000</ts>
    <user>Sonny</user>
    <text>Yeah, or use an agent :slightly_smiling_face:</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:28:24.128400</ts>
    <user>Gemma</user>
    <text>looking in both, your help is much appreaciated :slightly_smiling_face:</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:29:17.129000</ts>
    <user>Tandy</user>
    <text>Ok, I'll take another look at nav in your navize-row function. Thanks.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:29:39.129200</ts>
    <user>Celestine</user>
    <text>Specifically this answer:
&amp;gt; In your example, you would do `(-&amp;gt; (io/file ".") datafy :files)` to get your sequence of files, then you can either do `(get X 0)` to get an individual file representation or `(nav X 0 (get X 0))` to navigate to the corresponding file thing.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:34:47.129800</ts>
    <user>Dann</user>
    <text>locking might be better, making things async via threads might just increase complexity here</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:36:26.130700</ts>
    <user>Sonny</user>
    <text>Yeah, in retrospect, not even sure how you do this with an agent, more asynchronity there, not less. Though in fairness I don't use them much, so might be missing something.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:37:05.131200</ts>
    <user>Dann</user>
    <text>you `send` the reservation setting function to the data defining reservations</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:37:23.131700</ts>
    <user>Dann</user>
    <text>the setting functions are guaranteed to not run concurrently</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:38:49.132100</ts>
    <user>Sonny</user>
    <text>Really? Then why do they run in a thread pool?</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:38:54.132300</ts>
    <user>Sonny</user>
    <text>I guess I really don't understand these things.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:39:23.133200</ts>
    <user>Dann</user>
    <text>they run async from the caller, but no two agent functions on the same agent overlap</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:39:38.133600</ts>
    <user>Dann</user>
    <text>as far as the agent itself is concerned, zero concurrency</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:39:38.133700</ts>
    <user>Sonny</user>
    <text>Oh, I see.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:40:59.134700</ts>
    <user>Dann</user>
    <text>so agents are perfect for a case where you need a single source of truth, no retries, no overlapping changes

as long as it's OK for all of this to be async from the perspective of the code doing the modification</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:42:08.135100</ts>
    <user>Sonny</user>
    <text>So, tricky to know if reservation has gone through I guess.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:42:58.135600</ts>
    <user>Gemma</user>
    <text>well my customer will mention it for sure :smile:</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:43:06.135800</ts>
    <user>Sonny</user>
    <text>Haha</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:43:48.136400</ts>
    <user>Sonny</user>
    <text>Well, that does seem to be the airline model. Over sell and kick the can down the road to the poor customer service person at the airport.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:43:53.136600</ts>
    <user>Sonny</user>
    <text>There's always that approach :wink:</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:48:48.140000</ts>
    <user>Fredda</user>
    <text>yeah, a given agent will wait for the result of its last execution before starting its next.</text>
  </message>
  <message conversation_id="478">
    <ts>2019-02-11T18:53:42.141800</ts>
    <user>Sonny</user>
    <text>Definitely took me a while to re-grok that fact. References to, "thread pools" in the `(send)` docs are actually misleading because it does suggest that sends are done concurrently, but what is really meant here is that there is a single thread pool that is shared across *all* agents for `(send)`. I think I did know this once... but honestly, how often do you use this stuff? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:10:07.143200</ts>
    <user>Fredda</user>
    <text>Honestly, I mostly only remember those specifics because I reimplemented agents over web workers a while back. Turned out, atoms and immutable data solved 90% of our concurrency issues.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:10:31.144100</ts>
    <user>Maryann</user>
    <text>$2^e$</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:10:59.144500</ts>
    <user>Sonny</user>
    <text>I think you are looking for #perl :wink:</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:11:15.144800</ts>
    <user>Fredda</user>
    <text>Those last 10% though are usually solved by seasoned java devs, so I think they're more inclined to reach for native thread tools, instead of using agents (or even STM)</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:12:34.145800</ts>
    <user>Sonny</user>
    <text>Yeah, I have to say that includes me John. I can get most of this stuff done with core.async now, but I spent long enough in Java land to find reaching for java.util.concurrent a bit too easy. Nearly suggested a Semaphore for problem above.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:15:52.148400</ts>
    <user>Fredda</user>
    <text>Yeah, I think we should try to stay between the lines more often than we do there. Atoms and agents and stm all work in concert with one another wrt the snapshotting of data across a transformation. Seeing folks muddy the semantics makes me sad. But sure, sometimes you'll have to reach for a more specific tool.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:22:01.149600</ts>
    <user>Tandy</user>
    <text>I think I may have figured it out. Please let me know if this makes sense:
1. Use datafy when you have an object (non-pure data) representation of something and want to convert it to pure data. In some instances, datafy will produce a "coordinate" that links to something else (e.g. a foreign key or hyperlink).
2. Use regular Clojure navigation (e.g. get, get-in, keywords) to navigate pure data.
3. Use nav when you need to navigate to a referenced thing. This thing should be a pointer, link, etc. It is not used to transform data.
If I am getting this, places where nav would be appropriate would be foreign keys in a db, web navigation (key is :href and val is the url), or perhaps a symlink in a file system. The basic idea is there is a 1:1 link between the data and the thing you are navigating to.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:23:17.151900</ts>
    <user>Shonda</user>
    <text>+1 for agents in this use case. My project uses an agent in one particular spot. We routinely schedule a task but want only one to run at a time. Works like a charm.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:25:27.153500</ts>
    <user>Gemma</user>
    <text>yep, I can confirm that it works well in my case as well, also much easier to implement than I thought, thank you guys.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:31:01.155700</ts>
    <user>Sonny</user>
    <text>Interested to know how you solved the problem of communicating back to the caller. Agents do seem a little, "fire and forget". The agent data will get updated with the return 'at some point in the future', and you do have `(await)` so I suppose if you do something like keep a vector of successful reservations you can `(await)` to see if it's there, but aside from your constantly growing vector there, `(await)` docs contains some concerning statements like, "Will never return if..." :slightly_smiling_face:</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:34:51.156000</ts>
    <user>Tandy</user>
    <text>I think the only thing that seems fuzzy for me is how you might handle a directory. Suppose I datafy my current directory. I could do a couple of things (This is all dependent upon my implementation of datafy):
```
;Option 1: Pure data
{:file "."
:files ["file0" "file1"]}

;Option 2: mixed - Pour .listFiles into a vector for :files
{:file "."
:files [#object[java.io.File 0x5cc6922c "./project.clj"] ...]}
```

With Option 2 you would do something along the lines of (-&amp;gt; (io/file ".") datafy (get-in [:files 0]) datafy) to navigate to the first file as data.

With Option 1 you would use nav. Something along the lines of (-&amp;gt; (io/file ".") datafy :files (nav :files 0) datafy).

Is this correct? If so, is there a preferred or canonical way of doing the implementation?</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:35:07.156500</ts>
    <user>Celestine</user>
    <text>Pass in a closure over a promise that gets delivered when the function executes on the agent? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:36:25.157800</ts>
    <user>Dann</user>
    <text>I was thinking that too, but was afraid that was just the first step to a bad rube goldberg machine - but perhaps it is that simple</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:36:37.158000</ts>
    <user>Celestine</user>
    <text>Neither is correct.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:36:52.158700</ts>
    <user>Sonny</user>
    <text>Hah, I have in my head a core.sync solution that looks a bit like that with channels.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:37:04.158900</ts>
    <user>Tandy</user>
    <text>:disappointed: Sorry! Am I close?</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:37:12.159300</ts>
    <user>Celestine</user>
    <text>Thing -&amp;gt; `datafy` -&amp;gt; data -&amp;gt; `nav` -&amp;gt; Thing2 -&amp;gt; `datafy` -&amp;gt; data2.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:37:34.160200</ts>
    <user>Rosaline</user>
    <text>(or just use an atom and compare and set)</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:37:43.160500</ts>
    <user>Celestine</user>
    <text>and it's `(nav &amp;lt;collection&amp;gt; k v)` where `v` is nearly always `(get &amp;lt;collection&amp;gt; k)`</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:37:49.160800</ts>
    <user>Dann</user>
    <text>I mean what if the agent blows up so the promise delivery never happens, now your thread is deadlocked,

so then you put the deref of the promise in a future so you can use deref of that with a timeout

and then...</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:37:59.160900</ts>
    <user>Celestine</user>
    <text>`nav` mirrors the pure data "navigation" you do in Clojure</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:39:47.162600</ts>
    <user>Tandy</user>
    <text>oh, whoops, Is this correct:
(-&amp;gt; (io/file ".") datafy (nav :files 0) datafy).</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:40:01.163000</ts>
    <user>Tandy</user>
    <text>I just noticed I had a double :files</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:40:11.163500</ts>
    <user>Sonny</user>
    <text>Concurrency is hard</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:40:53.163700</ts>
    <user>Celestine</user>
    <text>Directory -&amp;gt; `datafy` -&amp;gt; data structure that representations the (contents of the) directory, with metadata added for `Navigable` protocol (most likely on the collection of data that represents the files) -&amp;gt; `(get (:files dir-data) 0)` produces the first file representation, so `(nav (:files dir-data) 0 (get (:files dir-data) 0))` would be the correct `nav` call here -&amp;gt; a File (or Directory) object -&amp;gt; `datafy` -&amp;gt; data structure that represents that.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:42:13.163900</ts>
    <user>Celestine</user>
    <text>`(-&amp;gt; (io/file ".") datafy (nav :files 0) datafy)` -- no, `nav` takes collection, key, value. You can't do multiple levels of navigation with it, just one.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:43:40.164400</ts>
    <user>Meagan</user>
    <text>this is why people use Node.js :wink:</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:44:08.165100</ts>
    <user>Sonny</user>
    <text>Haha! Touchè! </text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:44:15.165400</ts>
    <user>Rosaline</user>
    <text>pffft</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:45:08.166500</ts>
    <user>Rosaline</user>
    <text>the problem with people who write javascript is the tend to think that using a single threaded server and single threaded client will save them from thinking about concurrency</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:45:19.166800</ts>
    <user>Celestine</user>
    <text>Grokking how `nav` works is definitely the hardest part of this.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:45:26.167200</ts>
    <user>Rosaline</user>
    <text>of course that is already two threads in your system operating concurrently</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:45:42.167800</ts>
    <user>Rosaline</user>
    <text>then you get more clients and more servers, and databases</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:45:54.168300</ts>
    <user>Sonny</user>
    <text>&lt;@Rosaline&gt; Datomic team also think this ;)</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:46:09.168600</ts>
    <user>Rosaline</user>
    <text>pfft</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:46:26.169100</ts>
    <user>Rosaline</user>
    <text>what makes you think they think that?</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:47:03.170000</ts>
    <user>Celestine</user>
    <text>It's intended to mirror `(get collection key)` or `(get vector index)`, and you pass it the actual value (returned by `get`) as well as the collection/vector and the key/index.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:47:23.170900</ts>
    <user>Sonny</user>
    <text>I’m partially joking, but lots said about transactional benefits of single writer. </text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:47:44.171400</ts>
    <user>Rosaline</user>
    <text>but the system is entirely designed thinking about concurrency</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:47:56.171700</ts>
    <user>Rosaline</user>
    <text>and clojure's reference model</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:48:13.172100</ts>
    <user>Rosaline</user>
    <text>datomic is a database as a value in an atom</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:48:32.172500</ts>
    <user>Celestine</user>
    <text>From my blog post "Given an associative data representation, it does `(get coll k)` first to get `v`, and then it calls `(nav coll k v)` to allow the underlying navigation to return an updated value."</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:49:04.173600</ts>
    <user>Sonny</user>
    <text>Indeed, but writes are single threaded in part so you don’t have to worry about isolation </text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:49:42.174000</ts>
    <user>Sonny</user>
    <text>Are they still actually?</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:49:51.174400</ts>
    <user>Sonny</user>
    <text>Not sure with cloud</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:50:06.174800</ts>
    <user>Tandy</user>
    <text>For sure. So, looking at ```(nav (:files dir-data) 0 (get (:files dir-data) 0))``` I could also do:
```
(let[{:keys[files]} (datafy (io/file "."))]
    (nav files 0 (get files 0)))
```
The key being that dereferencing the bare data in position 0 (coll) with the key produces the value?</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:50:23.175300</ts>
    <user>Tandy</user>
    <text>Which I think you just said.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:50:43.175900</ts>
    <user>Rosaline</user>
    <text>anyway, my point is, programming in javascript will damage your brain when it comes to concurrency, and concurrency is a fact</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:51:33.176500</ts>
    <user>Celestine</user>
    <text>Yup.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:51:49.176900</ts>
    <user>Sonny</user>
    <text>I am definitely not a JS evangelist. </text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:51:56.177200</ts>
    <user>Celestine</user>
    <text>But that's not `(-&amp;gt; ... (nav :files 0) ...)` just to be clear.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:52:12.178000</ts>
    <user>Sonny</user>
    <text>At least probably not, not sure what this weeks syntax is. </text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:52:26.178200</ts>
    <user>Tandy</user>
    <text>Right, which is why I had to use a let to get the intermediate value.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:53:07.178400</ts>
    <user>Tandy</user>
    <text>Now I'm trying to understand why I need to provide the value.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:53:41.179000</ts>
    <user>Celestine</user>
    <text>Because `nav` may just return that value, if the act of navigating is just the same as for pure Clojure data.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:54:26.179800</ts>
    <user>Sonny</user>
    <text>“JavaScript will damage your brain” &amp;lt;- next tattoo </text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:54:43.179900</ts>
    <user>Celestine</user>
    <text>Specifically `(let [data {:foo "bar"}] (nav data :foo "bar"))` -- `nav` on a hash map is basically a no-op that just returns the value (so it's an assumption that the key you pass would refer to the value you pass).</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:55:08.180100</ts>
    <user>Celestine</user>
    <text>That's assuming no metadata on that hash map.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:56:35.180500</ts>
    <user>Tandy</user>
    <text>why not just return ```(get data :foo)``` in the default case?</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:56:37.180700</ts>
    <user>Rosaline</user>
    <text>when it comes to concurrency</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:56:58.181300</ts>
    <user>Meagan</user>
    <text>I agree. it was tongue-in-cheek :stuck_out_tongue:</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:57:06.181600</ts>
    <user>Celestine</user>
    <text>In the `java.jdbc.datafy` case, it ensures that the updated `query` function returns something that is `Datafiable` and that `datafy` will add metadata for `Navigable` to each row, so that when you `nav` on a row, if the key matches a foreign key in the schema, instead of just returning the column's value, it fetches the related results from the DB (and starts the cycle over again).</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:57:16.182100</ts>
    <user>Meagan</user>
    <text>the truth is that while your language might be single threaded, your system is _not_</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:57:35.182900</ts>
    <user>Celestine</user>
    <text>Because it's already been passed the value (from `(get data :foo)`)</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:57:37.183200</ts>
    <user>Meagan</user>
    <text>at least JS in the browser lets you not have to think about problems locally without concurrency issues. but too many people try and venture farther and run into issues early on</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:57:39.183300</ts>
    <user>Meagan</user>
    <text>I was one of them!</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:58:44.184000</ts>
    <user>Tandy</user>
    <text>Ah, plain old get doesn't allow you to add metadata.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:59:03.184500</ts>
    <user>Meagan</user>
    <text>it gets even harder with threads, because of shared memory</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:59:48.185100</ts>
    <user>Meagan</user>
    <text>(unless you have Clojure's fancy atoms/refs :wink: )</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T19:59:56.185200</ts>
    <user>Tandy</user>
    <text>And in the general case, some things will navigate and others will not.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:00:04.185700</ts>
    <user>Sonny</user>
    <text>...or core.async</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:00:21.185800</ts>
    <user>Tandy</user>
    <text>In the case of a key-val being a foreign key vs. a scalar.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:00:29.186100</ts>
    <user>Celestine</user>
    <text>Yes. `datafy`/`nav` are a very generic way to implement laziness.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:01:25.186700</ts>
    <user>Celestine</user>
    <text>The docstring for `nav` tries to make the reason for the value clear &lt;https://github.com/clojure/clojure/blob/master/src/clj/clojure/datafy.clj#L31&gt; but it isn't entirely obvious.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:01:46.187000</ts>
    <user>Celestine</user>
    <text>In particular, for sequences, you might _only_ have the value, and not any matching key/index.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:03:43.187200</ts>
    <user>Celestine</user>
    <text>The default implementation of `Navigable` for all `Object`s is just to return the value passed in, ignoring the collection and key/index: &lt;https://github.com/clojure/clojure/blob/master/src/clj/clojure/core/protocols.clj#L194&gt;</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:03:54.187500</ts>
    <user>Tandy</user>
    <text>Ok, I think I am getting it. I suppose for a file list you might want to provide the value (file name) vs. the index since most people think in terms of a seq of names vs. a vector of filenames. Thanks!</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:06:26.187700</ts>
    <user>Tandy</user>
    <text>Then you could use a filename filter in the nav protocol or something similar and not list all the files in the :files key in the datafied dir.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:06:29.187900</ts>
    <user>Celestine</user>
    <text>Yeah, the sequence/collection of files (filenames) would have metadata for `clojure.core.protocol/nav` to provide how to turn the data (filename) into the actual file "thing" so the fact its a vector is less important here.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:07:00.188100</ts>
    <user>Celestine</user>
    <text>Or the metadata could close over the path to the file and so just the "filename.ext" part would be enough -- no filtering needed.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:07:21.188300</ts>
    <user>Tandy</user>
    <text>ah, nice idea</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:07:50.188500</ts>
    <user>Tandy</user>
    <text>Thanks so much for all of the help on this. It's making a lot more sense.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:08:32.188700</ts>
    <user>Celestine</user>
    <text>So `(nav (:files dir-data) nil "filename.ext")` would rely on the `nav` implementation in the metadata of `(:files dir-data)` being able to add the path to the directory in which the file lives.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:08:57.188900</ts>
    <user>Tandy</user>
    <text>yes, and that makes a lot more sense when you read it</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:09:12.189100</ts>
    <user>Celestine</user>
    <text>It's tough stuff. I spent hours playing with this at Conj, trying to get `java.jdbc` working with REBL after watching Stu's talk.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:10:46.189300</ts>
    <user>Tandy</user>
    <text>Yeah, I am sure being there helped a lot. Thanks again for passing on the knowledge.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-11T20:14:59.189500</ts>
    <user>Celestine</user>
    <text>Happy to help any time!</text>
  </message>
  <message conversation_id="480">
    <ts>2019-02-11T21:06:59.189700</ts>
    <user>Gemma</user>
    <text>That was my approach after looking at my options.</text>
  </message>
  <message conversation_id="479">
    <ts>2019-02-12T01:33:29.200800</ts>
    <user>Celestine</user>
    <text>Go to &lt;#C04V84U7G|slack-help&gt; or &lt;#C0CB40N8K|community-development&gt; and alert an admin in either of those channels. Do *not* engage the trolls/spammers here please.</text>
  </message>
  <message conversation_id="481">
    <ts>2019-02-12T07:33:38.206700</ts>
    <user>Hassie</user>
    <text>is there any way to add hint for returned value from function which is defined using `fn`?</text>
  </message>
  <message conversation_id="481">
    <ts>2019-02-12T07:33:45.206900</ts>
    <user>Hassie</user>
    <text>```
user=&amp;gt; (set! *unchecked-math* :warn-on-boxed)
:warn-on-boxed
user=&amp;gt; (defn abc ^double [] 1.0)
#'user/abc
user=&amp;gt; (inc (abc))
2.0
user=&amp;gt; (def abc* (fn ^double [] 1.0))
#'user/abc*
user=&amp;gt; (inc (abc*))
Boxed math warning, C:\cygwin64\tmp\form-init496459974570346569.clj:1:1 - call: public static java.lang.Number clojure.lang.Numbers.unchecked_inc(java.lang.Object).
2.0
```</text>
  </message>
  <message conversation_id="481">
    <ts>2019-02-12T07:36:26.207900</ts>
    <user>Roslyn</user>
    <text>Did you know? You can put pre-post map in meta :scream:
```
(fn ^{:pre [(pos? i)]} [i]
  (inc i))
```</text>
  </message>
  <message conversation_id="481">
    <ts>2019-02-12T07:37:50.208100</ts>
    <user>Clarine</user>
    <text>```
(macroexpand '(fn ^{:pre [(pos? i)]} [i]
  (inc i)))
(fn* ([i] (clojure.core/assert (pos? i)) (inc i)))
```</text>
  </message>
  <message conversation_id="481">
    <ts>2019-02-12T07:38:39.208400</ts>
    <user>Clarine</user>
    <text>cool, didn’t know</text>
  </message>
  <message conversation_id="481">
    <ts>2019-02-12T07:48:19.208700</ts>
    <user>Hassie</user>
    <text>ok... found a solution</text>
  </message>
  <message conversation_id="481">
    <ts>2019-02-12T07:48:25.208900</ts>
    <user>Hassie</user>
    <text>```
(def ^{:arglists '(^double [])}
  abc* (fn ^double [] 1.0))
```</text>
  </message>
  <message conversation_id="482">
    <ts>2019-02-12T07:56:46.209400</ts>
    <user>Hassie</user>
    <text>let's go deeper</text>
  </message>
  <message conversation_id="482">
    <ts>2019-02-12T07:56:50.209600</ts>
    <user>Hassie</user>
    <text>what about such case?</text>
  </message>
  <message conversation_id="482">
    <ts>2019-02-12T07:56:53.209800</ts>
    <user>Hassie</user>
    <text>```
user=&amp;gt; (defn make-me-aaa [] (fn ^double [] 1.0))
#'user/make-me-aaa
user=&amp;gt; (let [aaa (make-me-aaa)] (inc (aaa)))
Boxed math warning, C:\cygwin64\tmp\form-init496459974570346569.clj:1:26 - call: public static java.lang.Number clojure.lang.Numbers.unchecked_inc(java.lang.Object).
2.0
```</text>
  </message>
  <message conversation_id="482">
    <ts>2019-02-12T07:57:19.210100</ts>
    <user>Harris</user>
    <text>you can't avoid boxed math while crossing anonymous function boundaries</text>
  </message>
  <message conversation_id="482">
    <ts>2019-02-12T07:57:36.210700</ts>
    <user>Harris</user>
    <text>clojure only knows how to use the unboxed path when using primitively tagged functions stored in Vars</text>
  </message>
  <message conversation_id="482">
    <ts>2019-02-12T07:57:58.211200</ts>
    <user>Harris</user>
    <text>so to your initial question.. no</text>
  </message>
  <message conversation_id="482">
    <ts>2019-02-12T07:58:57.211900</ts>
    <user>Hassie</user>
    <text>ok...</text>
  </message>
  <message conversation_id="482">
    <ts>2019-02-12T08:00:19.212600</ts>
    <user>Harris</user>
    <text>invokedynamic could help with this if it ever lands in clojure \cc &lt;@Marlyn&gt;</text>
  </message>
  <message conversation_id="483">
    <ts>2019-02-12T08:52:46.216200</ts>
    <user>Ronald</user>
    <text>What's the status of the functions in the Clojure incubator? I'm mainly interested in `dissoc-in`. It looks like there's been no activity in incubator or on the issue (&lt;https://dev.clojure.org/jira/browse/CLJ-1063&gt;) in a while. I think it would be nice to have in core so I can stop putting a copy into each of my projects :slightly_smiling_face:</text>
  </message>
  <message conversation_id="483">
    <ts>2019-02-12T09:20:58.216600</ts>
    <user>Shayla</user>
    <text>create a package and then just pull that down! hah</text>
  </message>
  <message conversation_id="483">
    <ts>2019-02-12T09:26:11.216800</ts>
    <user>Jasmine</user>
    <text>incubator is dead</text>
  </message>
  <message conversation_id="483">
    <ts>2019-02-12T09:26:43.217200</ts>
    <user>Jasmine</user>
    <text>I think my comments at the end of 1063 summarizes my qualms about it</text>
  </message>
  <message conversation_id="484">
    <ts>2019-02-12T09:30:03.218200</ts>
    <user>Jasmine</user>
    <text>I don’t think there is a candidate impl that I would consider worth recommending right now</text>
  </message>
  <message conversation_id="483">
    <ts>2019-02-12T09:34:01.218400</ts>
    <user>Ronald</user>
    <text>Gotcha</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T09:40:21.219300</ts>
    <user>Catina</user>
    <text>Does anyone else crash/hang Docker (on Mac) when running `lein uberjar`? Last night it just hanged. Now it terminated with `ERRO[0457] error waiting for container: EOF`.

I even bumped it to use 6 CPUs, 8 GiB RAM &amp;amp; 3.0 GiB swap.</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T09:40:53.219500</ts>
    <user>Catina</user>
    <text>(It creates the `...-SNAPSHOT.jar` then hangs/crashes.)</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T09:42:52.220100</ts>
    <user>Marlyn</user>
    <text>&lt;@Catina&gt; is your uberjar running across a mounted volume?</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T09:43:14.220700</ts>
    <user>Marlyn</user>
    <text>sometimes it's painfully slow if $HOME/.m2 or the app itself is mounted</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T09:45:14.222000</ts>
    <user>Marlyn</user>
    <text>but if other containers are having issues, it's good to hit the Reset button in Docker for Mac preferences</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T09:47:22.222500</ts>
    <user>Catina</user>
    <text>&lt;@Marlyn&gt; Hmm, thanks — I believe it must be! (So the uberjar remains after the Docker dies. I didn't write this codebase, so I'll verify.)

(I've reset a few times, so unfortunately that doesn't work. :/)</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T09:49:29.224200</ts>
    <user>Marlyn</user>
    <text>yeah, Docker for Mac filesystems mounts are quite slow.  If you `watch -n 1 du your-uberjar.jar` you may see that it progresses, but at a crawl</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T09:52:39.225900</ts>
    <user>Catina</user>
    <text>Hmm, in that case I wonder if it makes sense to run Docker inside VMWare/Debian (atop MacOS). :stuck_out_tongue:</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T10:02:16.229700</ts>
    <user>Clarine</user>
    <text>&lt;@Ronald&gt; medley has dissoc-in: &lt;https://github.com/weavejester/medley/blob/master/src/medley/core.cljc#L20&gt;</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T10:04:21.232200</ts>
    <user>Clarine</user>
    <text>I usually write update-in + dissoc because I’m too lazy to use an extra dependency</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T10:04:38.232500</ts>
    <user>Jeromy</user>
    <text>Greetings fellow clojurians!
Does anyone have experience with creating a jpeg file from a base64 encoded string extracted from html? (Inline image in html) I managed to get those image strings from a html page with hickory, but after that I tried to decode them with (String. (.decode (Base64/getMimeDecoder) to-decode)) and &lt;http://clojure.java.io/copy|clojure.java.io/copy&gt; them out to a folder with no success. When I try to open an image my viewer says: (Not a JPEG file: starts with 0x75 0xab)
I am pretty new to this, so got the idea to ask it here. I hope someone could help me.
Thank you in advance!</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T10:06:47.233200</ts>
    <user>Clarine</user>
    <text>&lt;@Jeromy&gt; Could you post the base64 encoded string in a gist?</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T10:09:09.233500</ts>
    <user>Jeromy</user>
    <text>&lt;@Clarine&gt; Sure, &lt;https://gist.github.com/aaronpowered/6e2f2de74e2de9be7da52889c5452f4d&gt;
(Have to leave now, will be able to reply after 3 hours.)</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T10:14:19.233700</ts>
    <user>Ronald</user>
    <text>Yes I agree about the extra dependency. Doesn't update-in + dissoc leave empty intermediates though? For my use case I would want the other behavior (as in the incubator/medley versions)</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T10:14:52.233900</ts>
    <user>Clarine</user>
    <text>then use those versions :slightly_smiling_face:</text>
  </message>
  <message conversation_id="485">
    <ts>2019-02-12T10:23:00.235600</ts>
    <user>Clarine</user>
    <text>I noticed there was a trailing slash in the base64 string. I recommend testing it in an online viewer first:  e.g. &lt;https://codebeautify.org/base64-to-image-converter&gt;</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T11:30:12.237000</ts>
    <user>Laurene</user>
    <text>Hi, I'm doing some interop with Java and I dont understand why `(.write javax.imageio.ImageIO bi "jpg" f)` works but not ` (.write javax.imageio.ImageIO bi "jpg" f)` ?
Before I did `(.fillRect g2d 20 50 10 30)` and it worked fine</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T11:30:25.237400</ts>
    <user>Laurene</user>
    <text>Is it because ImageIO is a class and not an instance?</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T11:31:08.237700</ts>
    <user>Laurene</user>
    <text>My question is about the interop syntax</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T11:32:40.238400</ts>
    <user>Becki</user>
    <text>```
(.write javax.imageio.ImageIO bi "jpg" f)
(.write javax.imageio.ImageIO bi "jpg" f)
```
the two forms you put are identical</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T11:33:16.238700</ts>
    <user>Becki</user>
    <text>(unless i missed something?)</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T12:36:29.239500</ts>
    <user>Becki</user>
    <text>&lt;@Laurene&gt; did you figure out what was going on?</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:19:31.240700</ts>
    <user>Laurene</user>
    <text>&lt;@Becki&gt; hey sorry I was out, I meant `(. javax.imageio.ImageIO write bi "jpg" f)` is the correct way and `(.write javax.imageio.ImageIO bi "jpg" f)` didnt work</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:22:18.241500</ts>
    <user>Dann</user>
    <text>for a static method, `(javax.imageio.ImageIO/write bi "jpg" f)` is the recommended syntax</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:24:31.242500</ts>
    <user>Dann</user>
    <text>&lt;@Laurene&gt; you can see from the javadoc which methods are static, &lt;https://docs.oracle.com/javase/8/docs/api/javax/imageio/ImageIO.html&gt; and the clojure docs for interop describe static method calls &lt;https://clojure.org/reference/java_interop#_the_dot_special_form&gt;</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:25:13.242900</ts>
    <user>Laurene</user>
    <text>Thanks for the informations</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:25:58.243600</ts>
    <user>Laurene</user>
    <text>but why would `(.fillRect g2d 20 50 10 30)` works and not `(.write javax.imageio.ImageIO bi "jpg" f)` ? Is that because write is static?</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:26:37.244400</ts>
    <user>Dann</user>
    <text>right, fillRect is a method on g2d, write is a method on javax.imageio.ImageIO, the rules for static vs. instance methods are different</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:27:07.245300</ts>
    <user>Dann</user>
    <text>in java they have the same syntax, but on the bytecode level they are implemented differently, and clojure distinguishes them</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:27:42.245900</ts>
    <user>Laurene</user>
    <text>Right, thanks for the clarification, It's an area to improve for me!</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:28:15.246500</ts>
    <user>Dann</user>
    <text>interop is a pretty small set of rules, and once you learn them you can use a lot of stuff for free, so it's rewarding :D</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:29:26.247800</ts>
    <user>Laurene</user>
    <text>Yeah that's why I was getting my hands dirty with it, leveraging Java libs is a great bonus to the already nice language</text>
  </message>
  <message conversation_id="486">
    <ts>2019-02-12T13:34:15.248100</ts>
    <user>Laurene</user>
    <text>Thank you again for your help ! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:04:53.251200</ts>
    <user>Epifania</user>
    <text>Hielo all. I'm doing some experiments with streams (but not touching IO yet), but getting the following error randomly in my lein repl, anyone have a clue why?
```
IOException Resource temporarily unavailable
        java.io.FileInputStream.readBytes (FileInputStream.java:-2)
        java.io.FileInputStream.read (FileInputStream.java:255)
        java.io.BufferedInputStream.fill (BufferedInputStream.java:246)
        java.io.BufferedInputStream.read (BufferedInputStream.java:265)
        jline.internal.NonBlockingInputStream.run (NonBlockingInputStream.java:294)
        java.lang.Thread.run (Thread.java:748)
```</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:06:49.251600</ts>
    <user>Dann</user>
    <text>does *e have the full stack trace?</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:07:07.252000</ts>
    <user>Dann</user>
    <text>did you open a file? if so how did you open it / access it?</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:08:24.253200</ts>
    <user>Epifania</user>
    <text>nope, no open files. Not sure I can see what `*e` has as the process crashes when it happens</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:08:41.253600</ts>
    <user>Epifania</user>
    <text>unless `aleph/manifold` automatically open files, I would hope it doesn't</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:11:22.255700</ts>
    <user>Dann</user>
    <text>you could set the top level uncaught exception handler to be more informative `(Thread/setDefaultUncaughtExceptionHandler (reify Thread$UncaughtExceptionHandler (uncaughtException [this thread error] (prn "uncaught error\n" thread error))))` (fixed error, added example) ```(ins)user=&amp;gt; (Thread/setDefaultUncaughtExceptionHandler (reify Thread$UncaughtExceptionHandler (uncaughtException [this thread error] (prn "uncaught error\n" thread error)))
)
nil
(ins)user=&amp;gt; (.start (Thread. #(/ 1 0)))
nil
user=&amp;gt; "uncaught error\n" #object[java.lang.Thread 0x2d631a09 "Thread[Thread-0,5,main]"] #error {
 :cause "Divide by zero"
 :via
 [{:type java.lang.ArithmeticException
   :message "Divide by zero"
   :at [clojure.lang.Numbers divide "Numbers.java" 163]}]
 :trace
 [[clojure.lang.Numbers divide "Numbers.java" 163]
  [clojure.lang.Numbers divide "Numbers.java" 3833]
  [user$eval215$fn__216 invoke "NO_SOURCE_FILE" 40]
  [clojure.lang.AFn run "AFn.java" 22]
  [java.lang.Thread run "Thread.java" 748]]}

```</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:11:26.255800</ts>
    <user>Epifania</user>
    <text>hm, might be related with autocomplete or something like that, as the error seems to happen when I write `(def my-stream (s/stream)` (notice the missing ending `)`)</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:11:41.256300</ts>
    <user>Epifania</user>
    <text>oh, thanks for the snippet, I'll give that a try</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:14:31.257000</ts>
    <user>Dann</user>
    <text>haha, just fixed a missing paren then thought you were referring to it - noticed when I pasted into my repl -I'm proud that something freeform into slack was that close to correct honestly! :D</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:15:56.257500</ts>
    <user>Epifania</user>
    <text>hm, unfortunately that doesn't make the error any clearer &lt;https://gist.github.com/victorb/304ed4cd9834ecb02ce1b37f641e7957&gt;</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:16:59.258000</ts>
    <user>Dann</user>
    <text>so this happens before you even finish writing the form? what repl implementation?</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:17:17.258300</ts>
    <user>Epifania</user>
    <text>yup, using lein</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:17:30.258800</ts>
    <user>Dann</user>
    <text>wait, just a regular lein repl in a terminal?</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:17:31.258900</ts>
    <user>Epifania</user>
    <text>it crashes as soon as I finish the `(s/stream)` form</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:17:49.259400</ts>
    <user>Epifania</user>
    <text>seems related with some autocomplete</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:18:15.260300</ts>
    <user>Dann</user>
    <text>you can use `lein upgrade $VERSION` to pick an arbitrary older version of lein - if it's a lein bug I bet going back a version or two would eliminate the error</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:18:32.260800</ts>
    <user>Dann</user>
    <text>nrepl stuff was radically changed recently</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:18:59.261500</ts>
    <user>Dann</user>
    <text>(and of course having the latest lein is just a question of using `lein upgrade` again)</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:19:05.261900</ts>
    <user>Epifania</user>
    <text>good idea, I'm on 2.8.1 so I'll try upgrading before downgrading. Thanks for the suggestion</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:19:05.262000</ts>
    <user>Becki</user>
    <text>Cider in the mix?</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:19:17.262300</ts>
    <user>Epifania</user>
    <text>no cider, just lein repl + one deadly form `(s/stream)`</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:20:42.263400</ts>
    <user>Dann</user>
    <text>also OS mgiht be relevant here too (since IO bugs in IPC code that only affect one OS are relatively common...)</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:20:45.263500</ts>
    <user>Epifania</user>
    <text>upgraded to latest (2.9.0) and now it works</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:20:50.263800</ts>
    <user>Dann</user>
    <text>:tada:</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:21:09.264000</ts>
    <user>Epifania</user>
    <text>I'm on Ubuntu 18.04.1 LTS for posterity</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:21:29.264400</ts>
    <user>Epifania</user>
    <text>thanks &lt;@Dann&gt; for helping me out :slightly_smiling_face:</text>
  </message>
  <message conversation_id="488">
    <ts>2019-02-12T14:28:29.268100</ts>
    <user>Jeromy</user>
    <text>&lt;@Clarine&gt; trailing slash was only a mistake of copy paste. I had another mistake, had to drop the head of the string, (data:image/jpeg;base64) so i can use Base64/getDecoder instead of Base64/getMimeDecoder, but image file is still not available to open. I leave this image here as the difference between my decoded file and the one decoded by Best Online Base64</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:31:55.269300</ts>
    <user>Jeromy</user>
    <text>BTW What is this nonsense, Slack? "Your file was uploaded — it’s safe and sound in Slack. Unfortunately your workspace doesn’t have any storage space left. To get more space, you can upgrade to a paid account or delete some of your older files."
Can you guys see my recently uploaded picture?</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:34:03.270400</ts>
    <user>Dann</user>
    <text>yes - I can see it - that difference almost looks like text encoding issues, which makes me wonder if you wrote the file using a String / text oriented function rather than a bytes / raw data function</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:34:04.270500</ts>
    <user>Laurene</user>
    <text>Yes can see it</text>
  </message>
  <message conversation_id="488">
    <ts>2019-02-12T14:35:10.271500</ts>
    <user>Jeromy</user>
    <text>&lt;@Dann&gt; &lt;@Laurene&gt; Thank you! Yes good point</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:35:10.271600</ts>
    <user>Dann</user>
    <text>&lt;@Jeromy&gt; OK I scrolled up - your mistake is using the `String` constructor</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:35:24.272100</ts>
    <user>Dann</user>
    <text>pass the byte array to io/copy, this isn't textual data</text>
  </message>
  <message conversation_id="488">
    <ts>2019-02-12T14:35:25.272200</ts>
    <user>Jeromy</user>
    <text>aaah</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:35:38.272500</ts>
    <user>Jeromy</user>
    <text>Thank you again &lt;@Dann&gt;</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:36:36.273700</ts>
    <user>Jeromy</user>
    <text>I have to stop just copy pasting utility functions</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:36:47.274000</ts>
    <user>Dann</user>
    <text>&lt;@Jeromy&gt; one of my loose heuristics for bugs is doing any sort of String conversion during IO - text to text just works via the binary methods, string conversion in the middle breaks things</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:38:42.274700</ts>
    <user>Jeromy</user>
    <text>Finally it works! You guys are always doing a great job here :slightly_smiling_face: I am very grateful</text>
  </message>
  <message conversation_id="488">
    <ts>2019-02-12T14:41:06.276600</ts>
    <user>Jeromy</user>
    <text>I just wrote a function which extracts images from the output of a wysiwyg, make sha1 hash and store every image once and change the inline base64 string to the path to that image. It works brilliant :slightly_smiling_face:</text>
  </message>
  <message conversation_id="487">
    <ts>2019-02-12T14:41:15.276800</ts>
    <user>Dann</user>
    <text>nice</text>
  </message>
  <message conversation_id="489">
    <ts>2019-02-12T15:18:41.278400</ts>
    <user>Pearline</user>
    <text>Could someone explain to me what is the common use of `var` in Clojure?</text>
  </message>
  <message conversation_id="489">
    <ts>2019-02-12T15:21:50.279700</ts>
    <user>Ashlea</user>
    <text>You’ll often see it used via the reader macro `#'`. Usually to alter the metadata associated with a Var, or sometimes in test namespaces to refer to private vars</text>
  </message>
  <message conversation_id="489">
    <ts>2019-02-12T15:26:30.281000</ts>
    <user>Pearline</user>
    <text>&lt;@Ashlea&gt; Thanks, I didn’t realise that metadata came with a var, not the associated object.</text>
  </message>
  <message conversation_id="490">
    <ts>2019-02-12T15:42:55.282900</ts>
    <user>Noemi</user>
    <text>cross-posted from &lt;#C077KDE3A|luminus&gt;: does anyone know specifically where to put wrap-cors in a luminus app (which has swagger, if that matters)?</text>
  </message>
  <message conversation_id="490">
    <ts>2019-02-12T15:43:17.283400</ts>
    <user>Noemi</user>
    <text>my various attempts in handler and middleware aren't working.</text>
  </message>
  <message conversation_id="490">
    <ts>2019-02-12T15:44:08.284300</ts>
    <user>Noemi</user>
    <text>I need cors enabled locally for development on an app created with the equivalent of 'lein new luminus testapp +swagger'.</text>
  </message>
  <message conversation_id="489">
    <ts>2019-02-12T15:50:07.286000</ts>
    <user>Dann</user>
    <text>&lt;@Pearline&gt; another usage of var is to pass the container holding a function to a function that creates a long running closure (eg. starts a web server using the function you pass in) - if you pass a function, the higher order function won't see redefs, if you pass the var it always sees the current value</text>
  </message>
  <message conversation_id="490">
    <ts>2019-02-12T15:50:45.286500</ts>
    <user>Dann</user>
    <text>the thing that makes this work is that calling a var attempts to call the value you put in the var</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:42:10.290800</ts>
    <user>Kirsten</user>
    <text>of the 3 `Design / usage benefits of transducers:`  in &lt;https://clojure.org/guides/faq#transducers_vs_seqs&gt; - don't the last two apply to `reduce` or `loop/recur` too?</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:43:09.291400</ts>
    <user>Dann</user>
    <text>unlike transducers, reduce and loop/recur are syntaxes rather than units of composition</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:43:51.292300</ts>
    <user>Dann</user>
    <text>so they are eager and explicit about resource usage, but aren't in the same category of abstraction</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:44:17.292900</ts>
    <user>Kirsten</user>
    <text>&lt;@Dann&gt; yeah, that is why I said 'the last two' - excluding transformation composition</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:44:28.293200</ts>
    <user>Dann</user>
    <text>both transducers and sequences can be passed to functions to get a new transducer or sequence</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:45:04.294000</ts>
    <user>Dann</user>
    <text>right - what I'm saying is they aren't even in the same category - strings and io streams are also eager and explicit about resource usage, but would be out of place in the comparison</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:49:37.296000</ts>
    <user>Pearline</user>
    <text>&lt;@Marin&gt; Actually, it’s a cool usage. Thank you</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:50:37.297100</ts>
    <user>Kirsten</user>
    <text>&lt;@Dann&gt; Ok, I see what you mean, yes, they are not the same, was specifically curious what do they have over `reduce` specifically and only for eagerness and resource control</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:52:19.298900</ts>
    <user>Dann</user>
    <text>transduce vs. reduce has two major improvements: formalizing a final "collate results" step after everything has run (very common pattern in my code to need that), and separating transducing (a transform applied across the input) from the folding operation itself</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:53:04.299600</ts>
    <user>Dann</user>
    <text>(aside from the previously mentioned fact that a transducer is a compositional abstraction in a way reduce isn't)</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:56:57.300900</ts>
    <user>Kirsten</user>
    <text>ok, your second point is about the 'transformation composition' in the FAQ, how often do you really use this? didn't understand your first one yet</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:58:33.301800</ts>
    <user>Kirsten</user>
    <text>Or your two improvements seem highly related</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:58:39.302000</ts>
    <user>Dann</user>
    <text>the most common usage is defining the transducer as it's own testable unit of code</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T16:58:54.302400</ts>
    <user>Dann</user>
    <text>sometimes I use comp to join them also</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:02:09.305500</ts>
    <user>Kirsten</user>
    <text>(about unit of code) can comp and partial be used to create the same effect (without transducers)? ignoring the performance benefits of removing all intermediate sequence and cached value creation.</text>
  </message>
  <message conversation_id="492">
    <ts>2019-02-12T17:02:21.305800</ts>
    <user>Elanor</user>
    <text>Anyone aware of any tools to identify/remove unused vars (not ns but mostly def and defn forms)? I can cook up a shell script to do so but would be nice if others have a tool to recommend.</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:03:46.306100</ts>
    <user>Dann</user>
    <text>sure - but this gets heavy handed when you consider eg. transducing from a channel to another channel - the transducing version never needs to build a collection, the non-transducing version builds one collection of N elements per unit of composition</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:04:28.306800</ts>
    <user>Dann</user>
    <text>there's a lein-yagni plugin if that's what you mean - it scans your codebase and tells you about functions without callers</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:06:25.306900</ts>
    <user>Kirsten</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="492">
    <ts>2019-02-12T17:06:55.307600</ts>
    <user>Kirsten</user>
    <text>how do you remove an unused var manually?</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:07:22.308200</ts>
    <user>Dann</user>
    <text>by editing the code or calling ns-unmap, depending on what you mean</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:07:56.308900</ts>
    <user>Elanor</user>
    <text>last time I check yagni does not detect vars but ns only.</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:08:28.309000</ts>
    <user>Dann</user>
    <text>also, here's a contrived example of using the completion function ```user=&amp;gt; (transduce (map inc) (completing
              (fn [acc i] (update acc i (fnil * 1) i))
              vals)
              {}
              [1 2 3 2 1])
(4 9 4)
``` - in real usage I often have "secondary accumulators" in a hash map that are needed while reducing, but not needed in the result</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:08:44.309400</ts>
    <user>Kirsten</user>
    <text>&lt;@Dann&gt; from memory</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:09:37.310200</ts>
    <user>Dann</user>
    <text>&lt;@Elanor&gt; I use it at work, it definitely checks for unused vars (and also is uptight about protocol methods and multimethods in ways that can be hard to make happy...)</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:10:02.310800</ts>
    <user>Dann</user>
    <text>ns-unmap is what removes a var from a namespace</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:10:38.311200</ts>
    <user>Elanor</user>
    <text>&lt;@Dann&gt; Will give it a try. Thanks.</text>
  </message>
  <message conversation_id="491">
    <ts>2019-02-12T17:44:53.311300</ts>
    <user>Kirsten</user>
    <text>Ok, let me try to read that first hehe</text>
  </message>
  <message conversation_id="493">
    <ts>2019-02-12T18:35:20.311700</ts>
    <user>Kirsten</user>
    <text>are you allowed to write code like that at work?</text>
  </message>
  <message conversation_id="493">
    <ts>2019-02-12T18:36:17.311900</ts>
    <user>Dann</user>
    <text>I tend to avoid transduce because we aren't doing things where streams of data are the perf bottleneck</text>
  </message>
  <message conversation_id="493">
    <ts>2019-02-12T18:36:44.312100</ts>
    <user>Dann</user>
    <text>but I do use transducers because they help modularize operations on IO streams to be testable on seqs, without needing to turn io into a seq</text>
  </message>
  <message conversation_id="493">
    <ts>2019-02-12T18:37:38.312300</ts>
    <user>Dann</user>
    <text>eg. we have a minimal kafka topology definition that takes a transducer, we can test that transducer outside kafka with seq in / seq out</text>
  </message>
  <message conversation_id="493">
    <ts>2019-02-12T18:44:31.312500</ts>
    <user>Kirsten</user>
    <text>yes, that is super helpful, experienced that with datomic, ex: developing and testing functions with no database</text>
  </message>
  <message conversation_id="494">
    <ts>2019-02-13T03:00:48.314900</ts>
    <user>Lewis</user>
    <text>Hey, can we generate an Clojure Server from swagger definition? </text>
  </message>
  <message conversation_id="493">
    <ts>2019-02-13T05:26:32.319400</ts>
    <user>Shayna</user>
    <text>&lt;@Lewis&gt; don’t think so. Have been waiting for someone to take a stab at this. The thing missing is that swagger defines parameters &amp;amp; responses in swagger json schema, while most Clojure web libs use Schema or clojure.spec as the idiomatic way to describe those. Generator would need to convert the params. Just the paths, libs like `org.zalando/swagger1st` and `metosin/reitit` both use the swagger path format, so the transformation should be quite trivial.</text>
  </message>
  <message conversation_id="493">
    <ts>2019-02-13T05:27:42.320000</ts>
    <user>Shayna</user>
    <text>(co-authoring reitit, so happy to help if you would like to do the converter for it)</text>
  </message>
  <message conversation_id="495">
    <ts>2019-02-13T08:33:54.325500</ts>
    <user>Alaine</user>
    <text>A question related to the REPL:
I’d like to write a small Clojure program that opens an JSON file and allows me to investigate the content of the JSON as a Clojure object in the REPL.
I was thinking of creating a `core.clj` file with a `-main` function that receives the path to the JSON file as an argument and define a `core.data` var that contains the Clojure representation of the JSON file.
My problem is that I cannot when I pass `-m core` to the REPL, it runs the program and exits.
I’d like the REPL to stay open.
Is that feasible?</text>
  </message>
  <message conversation_id="495">
    <ts>2019-02-13T08:37:02.326100</ts>
    <user>Sixta</user>
    <text>You could call clojure.main/repl in your main</text>
  </message>
  <message conversation_id="495">
    <ts>2019-02-13T09:44:40.326800</ts>
    <user>Alaine</user>
    <text>Yeah. I thought about that but somehow I was expecting to find a simpler solution &lt;@Sixta&gt;</text>
  </message>
  <message conversation_id="495">
    <ts>2019-02-13T09:48:26.327300</ts>
    <user>Sixta</user>
    <text>&lt;@Alaine&gt; you could use `-e` instead of `-m`</text>
  </message>
  <message conversation_id="495">
    <ts>2019-02-13T09:49:39.327600</ts>
    <user>Jasmine</user>
    <text>^^</text>
  </message>
  <message conversation_id="495">
    <ts>2019-02-13T10:35:02.328100</ts>
    <user>Alaine</user>
    <text>&lt;@Sixta&gt; can we have access to command line arguments with `-e`?</text>
  </message>
  <message conversation_id="495">
    <ts>2019-02-13T10:59:45.328500</ts>
    <user>Jasmine</user>
    <text>you do</text>
  </message>
  <message conversation_id="495">
    <ts>2019-02-13T10:59:47.328700</ts>
    <user>Jasmine</user>
    <text>```$ clj -e "(println *command-line-args*)" -m foo 1 2 3
(1 2 3)```</text>
  </message>
  <message conversation_id="495">
    <ts>2019-02-13T13:55:20.333000</ts>
    <user>Alaine</user>
    <text>&lt;@Jasmine&gt; awesome
This is exactly what I was looking for</text>
  </message>
  <message conversation_id="496">
    <ts>2019-02-13T13:56:23.334000</ts>
    <user>Alaine</user>
    <text>And with `-r`, I can open a REPL
```
➜  ~ clj -e "(ns my.aa) (def a 1)" -r
#'my.aa/a
my.aa=&amp;gt; a
1
my.aa=&amp;gt;
```

Now, I am wondering why `-m` is not compatible with `-r`?</text>
  </message>
  <message conversation_id="496">
    <ts>2019-02-13T14:06:52.334400</ts>
    <user>Jasmine</user>
    <text>-m starts a program, -r starts a repl</text>
  </message>
  <message conversation_id="496">
    <ts>2019-02-13T14:07:06.334600</ts>
    <user>Jasmine</user>
    <text>they are different modes</text>
  </message>
  <message conversation_id="496">
    <ts>2019-02-13T14:07:56.335300</ts>
    <user>Jasmine</user>
    <text>or you can pass a path to  run a clj script or - for stdin</text>
  </message>
  <message conversation_id="496">
    <ts>2019-02-13T14:13:55.336100</ts>
    <user>Jasmine</user>
    <text>-e is an initial option that happens before those (and can be used more than once)</text>
  </message>
  <message conversation_id="497">
    <ts>2019-02-13T14:58:18.337800</ts>
    <user>Shayla</user>
    <text>Let's say I have a macro that defines a bunch of local variables for easy of use. Is it possible to conditionally bind them only if they're used in the body?</text>
  </message>
  <message conversation_id="497">
    <ts>2019-02-13T15:03:24.338700</ts>
    <user>Matha</user>
    <text>Is there a built-in clojure function that has the following effect?
```
(f [] 0) ; =&amp;gt; []
(f [1] 0) ; =&amp;gt; [1 0]
(f [1 2] 0) ; =&amp;gt; [1 0 2 0]
(f [1 2 3] 0) ; =&amp;gt; [1 0 2 0 3 0]
```
Almost `interpose` but with the separator also added to the end when the sequence is not empty</text>
  </message>
  <message conversation_id="497">
    <ts>2019-02-13T15:08:20.338900</ts>
    <user>Ashlea</user>
    <text>There isn’t</text>
  </message>
  <message conversation_id="497">
    <ts>2019-02-13T15:09:06.339600</ts>
    <user>Ashlea</user>
    <text>&amp;gt; added to the end
Does it have to be the last item in the seq, or should it be `conj`ed?</text>
  </message>
  <message conversation_id="497">
    <ts>2019-02-13T15:10:18.339900</ts>
    <user>Fatima</user>
    <text>Would `(interleave [1 2 3] (repeat 0))` work?</text>
  </message>
  <message conversation_id="497">
    <ts>2019-02-13T15:12:24.340200</ts>
    <user>Matha</user>
    <text>&lt;@Fatima&gt; oh wow; that works</text>
  </message>
  <message conversation_id="497">
    <ts>2019-02-13T15:12:36.340400</ts>
    <user>Matha</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:01:55.343200</ts>
    <user>Glayds</user>
    <text>I’m trying to figure out how to write a macro that will return a quoted vector of the arguments passed to it

Example
``` (quote-me [:user/id])
;;-&amp;gt; ’[:user/id]

any ideas?</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:02:49.343400</ts>
    <user>Ashlea</user>
    <text>```
=&amp;gt; (doc quote)
-------------------------
quote
  (quote form)
Special Form
  Yields the unevaluated form.

  Please see &lt;http://clojure.org/special_forms#quote&gt;
  Yields the unevaluated form.
```</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:03:16.343700</ts>
    <user>Ashlea</user>
    <text>^ I think `quote` is what you’re looking for</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:05:12.344700</ts>
    <user>Dann</user>
    <text>&lt;@Glayds&gt; `'[:foo]` and `[:foo]` are already equal - there's a difference for symbols, the macro you want for that is `quote`, which is what `'` expands to</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:05:42.345400</ts>
    <user>Dann</user>
    <text>also that's not a quoted vector of the arguments, that's taking a vector and returning it</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:06:08.345900</ts>
    <user>Glayds</user>
    <text>This doesn’t seem to work for the function I’m trying to pass the return value into</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:06:21.346600</ts>
    <user>Glayds</user>
    <text>as in, I need to pass it in as quoted</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:06:58.347800</ts>
    <user>Dann</user>
    <text>quoting is a compilation time operation that prevents evaluation of literal forms in your source code</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:07:13.348200</ts>
    <user>Dann</user>
    <text>it doesn't have a meaning at runtime, unless you are using runtime eval</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:08:42.349000</ts>
    <user>Dann</user>
    <text>I might be misunderstanding what you are trying to do here</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:11:49.349900</ts>
    <user>Deb</user>
    <text>Sounds like you're asking for an extra level of quote, like `(defmacro foo [x] ``(quote (quote ~x)))`
`(foo [:user/id]) ==&amp;gt; '[:user/id]`.  Like your example.</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:12:16.350300</ts>
    <user>Deb</user>
    <text>Oh... looks like I don't know how to put code in slack.</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:15:31.351000</ts>
    <user>Glayds</user>
    <text>turns out didn’t need to use a macro</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:15:33.351200</ts>
    <user>Glayds</user>
    <text>(deftrack a [b conn id]
  (b @(posh/pull conn `[~b] id))
  )</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:15:36.351400</ts>
    <user>Glayds</user>
    <text>this did what I wanted</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:16:06.352200</ts>
    <user>Glayds</user>
    <text>thanks</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:16:26.352600</ts>
    <user>Dann</user>
    <text>what do you expect ```
`[~b]``` to do that `[b]` wouldn't?</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:16:39.352900</ts>
    <user>Glayds</user>
    <text>get accepted by datascript</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:17:56.353700</ts>
    <user>Glayds</user>
    <text>ah</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:18:01.354100</ts>
    <user>Dann</user>
    <text>how would datascript see a difference?</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:18:09.354400</ts>
    <user>Glayds</user>
    <text>yeah, think you’re actually right</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:18:58.354900</ts>
    <user>Glayds</user>
    <text>I think it is more because datascript allows things in the pull and query that would otherwise get evaluted</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:19:24.355800</ts>
    <user>Dann</user>
    <text>sure, quote those things if you need their unevaluated meaning</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:19:44.356700</ts>
    <user>Glayds</user>
    <text>for the toy example just putting it in directly works fine</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:19:46.357000</ts>
    <user>Dann</user>
    <text>and quasiquote can help build a partially quoted data structure with selective evaluation, without needing a macro</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:19:58.357400</ts>
    <user>Glayds</user>
    <text>its for building up the more complicated queries and pulls that I need the ` and ~</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:20:58.358000</ts>
    <user>Dann</user>
    <text>right, and you don't actually want a macro for that - you just want a convenient syntax for selective quoting</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:21:40.358300</ts>
    <user>Glayds</user>
    <text>yeah, hadn’t realized I could use ` and ~ outside of macros</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-13T18:21:50.358600</ts>
    <user>Glayds</user>
    <text>thanks</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-14T01:15:45.359500</ts>
    <user>Alaine</user>
    <text>&lt;@Glayds&gt; FWIT, I once wrote a tutorial about syntax quote &lt;http://blog.klipse.tech/clojure/2016/05/05/macro-tutorial-3.html&gt;</text>
  </message>
  <message conversation_id="498">
    <ts>2019-02-14T08:15:28.362700</ts>
    <user>Ferne</user>
    <text>if anybody wants to have fun with instaparse, regular expressions, and property-based testing, doing a totally-achievable and well-defined thing, you could work on making this code as robust as the clj-jvm version: &lt;https://github.com/gfredericks/test.chuck/pull/54&gt;</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:41:36.369700</ts>
    <user>Shayla</user>
    <text>I asked this yesterday afternoon but I don't think I did a good job of describing the question/issue, so I'mma try again but with actual examples this time.
I have a macro that accepts an atom (and some other parameters), and binds a lot of helper variables for use in the macro:
```
(defmacro req [&amp;amp; expr]
  `(fn ~['state 'side 'eid 'card 'targets]
     (let ~['runner '(:runner @state)
            'corp '(:corp @state)
            'run '(:run @state)
            'run-server '(when (:run @state)
                           (get-in @state (concat [:corp :servers] (:server (:run @state)))))
            'servers '(zones-&amp;gt;sorted-names (get-zones state))
            etc... ]
        ~@expr)))
```
This macro is used _a lot_ in the codebase, which means that all of these variables are being bound in every invocation. Most times, only a handful of the let-bound variables are actually used or needed in `expr`. Is there some way to write the macro such that it will only bind a given variable if that variable is used in `expr`?</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:43:25.370200</ts>
    <user>Becki</user>
    <text>its anaphoric and you want to only create the binding if you can find a usage in the body?</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:43:57.370600</ts>
    <user>Shayla</user>
    <text>I'm unfamiliar with "anaphoric" in this setting. What do you mean?</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:44:20.371300</ts>
    <user>Becki</user>
    <text>the macro creates a symbol for the body to use seemingly without a binding creating it</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:44:39.371800</ts>
    <user>Becki</user>
    <text>the old common lisp ones would introduce a symbol `it` by convention</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:45:03.372300</ts>
    <user>Shayla</user>
    <text>Isn't `let` a binding?</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:45:29.372900</ts>
    <user>Becki</user>
    <text>yes but its created at macroexpansion time and therefore not visible in the code you actually write</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:46:04.373700</ts>
    <user>Shayla</user>
    <text>Ah yes, that's correct</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:46:07.373800</ts>
    <user>Becki</user>
    <text>`(req (run-server))` is an example. you create the symbol run-server that `expr` can use without itself creating that binding.</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:46:48.374100</ts>
    <user>Shayla</user>
    <text>You are correct, yes</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:50:44.376200</ts>
    <user>Becki</user>
    <text>i bet &lt;@Harris&gt; has an easy way to do this with t.a.jvm. I'm thinking a naive version of walk your expr for the first form might work in practice but would miss things in let bindings, doseq bindings, etc. You don't care if someone shadows since you would create an extra unused binding in a few rare cases. I'm guessing you could run the analyzer over the form, find which things are used and intersect that with the few you have here</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:53:17.376700</ts>
    <user>Shayla</user>
    <text>Interesting idea, thanks!</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:54:37.377400</ts>
    <user>Becki</user>
    <text>its also possible you'll do a lot of work, hit rough edge cases, and after some tedious coding, realize you don't get any measurable performance difference.</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:55:10.378000</ts>
    <user>Shayla</user>
    <text>That's what I suspected, which is why I haven't worked very hard at finding a solution, lol</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:56:06.378600</ts>
    <user>Becki</user>
    <text>so if i'm reading the AST stuff correctly, you could perhaps figure out how to collect all vars (&lt;http://clojure.github.io/tools.analyzer.jvm/spec/quickref.html#var&gt;) from the AST of expr and then find which ones are your bindings</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:57:38.379200</ts>
    <user>Becki</user>
    <text>and tools.analyzer has an ast namespace with a `nodes` function to give a lazy sequence of nodes in the AST</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:58:05.379600</ts>
    <user>Becki</user>
    <text>there's also a really cool looking ast-&amp;gt;eav function so you could do this in datalog.</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T10:58:22.380000</ts>
    <user>Becki</user>
    <text>that's amazing that you can query the AST of clojure code. like that's really cool</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:08:39.380200</ts>
    <user>Becki</user>
    <text>```
  (let [ast (ana.jvm/analyze
             '(let [x 3]
                (+ x another-sym something-else)))]
    (into #{}
          (comp (filter (comp #{:var} :op))
                (map :form))
          (ast/nodes ast)))
```</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:09:32.380400</ts>
    <user>Becki</user>
    <text>```
  (def another-sym 4)
  (def something-else 5)
  (let [ast (ana.jvm/analyze
             '(let [x 3]
                (+ x another-sym something-else)))]
    (into #{}
          (comp (filter (comp #{:var} :op))
                (map :form))
          (ast/nodes ast)))

  ;;-&amp;gt; #{another-sym something-else}
```</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:10:30.380700</ts>
    <user>Shayla</user>
    <text>That's wild. Thank you!</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:12:35.381500</ts>
    <user>Harris</user>
    <text>if you want to go down this route, you'd need to collect local bindings that can't be resolved, there's a hook for that</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:13:09.382300</ts>
    <user>Harris</user>
    <text>I'm a bit busy right now but I can show you how to do that later</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:13:46.382900</ts>
    <user>Harris</user>
    <text>I do agree with &lt;@Becki&gt; though that it sounds like it could be just premature optimization</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:14:00.383300</ts>
    <user>Becki</user>
    <text>&amp;gt; The analyze function can take an environment arg (when not provided it uses the default empty-env) which allows for more advanced usages, like injecting locals from an outer scope:

this style?</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:14:34.384000</ts>
    <user>Becki</user>
    <text>also thanks for this huge amount of work &lt;@Harris&gt;</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:14:58.384900</ts>
    <user>Harris</user>
    <text>honestly, I haven't used/worked on `t.a.jvm` in anger in years so I can't remember off the top of my head how to do it, just that it's possible :)</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:15:44.386000</ts>
    <user>Shayla</user>
    <text>This is probably an unnecessary optimization (seeing as nearly every binding is either grabbing data from the map atom or performing minor calculations on the atom), but it's currently used 2344 times in the codebase, so it seemed worth at least peeking into</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:16:11.386100</ts>
    <user>Harris</user>
    <text>mhhhph, that requires knowing in advance the locals you want to inject</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:16:40.386300</ts>
    <user>Harris</user>
    <text>what I was thinking of was to disable the part of the validation pass that throws an error on unresolved symbol names</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:16:45.386500</ts>
    <user>Harris</user>
    <text>then collecting all those nodes</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:17:00.386700</ts>
    <user>Harris</user>
    <text>to figure out which locals are used in the body</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:17:15.386900</ts>
    <user>Becki</user>
    <text>this is in a macro so i was thinking using &amp;amp;env</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:17:50.387400</ts>
    <user>Harris</user>
    <text>but what you want to look for are locals that are used in `expr` that _don't exist yet_</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:17:58.387900</ts>
    <user>Harris</user>
    <text>they won't be in `&amp;amp;env`</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:18:04.388200</ts>
    <user>Harris</user>
    <text>the context is inverted</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:18:12.388400</ts>
    <user>Fredda</user>
    <text>You could do something like
```
(defn seq-has? [form namespace-qualified-quoted-sym]
  (when (seq? form)
    (not
      (empty?
        (filter #(= % namespace-qualified-quoted-sym) form)))))

(defn expr-has? [expr namespace-qualified-quoted-sym]
  (when (coll? expr)
    (not
      (empty?
        (-&amp;gt;&amp;gt; expr
             (tree-seq coll? seq)
             (filter #(seq-has? % namespace-qualified-quoted-sym)))))))
```
Adapted from some other code I have, so not tested...
(oops, didn't full adapt it... fixed)</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:18:35.388500</ts>
    <user>Harris</user>
    <text>&lt;https://github.com/clojure/tools.analyzer.jvm/blob/master/src/main/clojure/clojure/tools/analyzer/passes/jvm/validate.clj#L255-L262&gt;</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:18:42.388800</ts>
    <user>Harris</user>
    <text>this is what I think is needed</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:21:19.390300</ts>
    <user>Fredda</user>
    <text>You just call `expr-has?` in your macro. You may need to check for both the namespace qualified and non-namespace qualified version of the symbol. But that's extra macro stuff.</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:30:21.392700</ts>
    <user>Harris</user>
    <text>```
(require '[clojure.tools.analyzer.jvm :as j])
(require '[clojure.tools.analyzer.ast :as ast])

(defn find-undefined-locals [expr]
 (-&amp;gt;&amp;gt; (j/analyze expr
                 (j/empty-env)
                 {:passes-opts (merge j/default-passes-opts
                                      {:validate/unresolvable-symbol-handler
                                       (fn [_ s {:keys [op] :as ast}]
                                         (if (= op :maybe-class)
                                           ast
                                           (throw (Exception. ""))))})})
      ast/nodes
      (filter (fn [{:keys [op]}] (= op :maybe-class)))
      (map :class)))

(find-undefined-locals '(let [a identity] (a b))) ;=&amp;gt; (b)
``` &lt;@Becki&gt; &lt;@Shayla&gt;</text>
  </message>
  <message conversation_id="500">
    <ts>2019-02-14T11:30:51.393200</ts>
    <user>Shayla</user>
    <text>That's cool as hell, thank you</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:30:59.393600</ts>
    <user>Harris</user>
    <text>in your example if you use `(find-undefined-locals expr)` you should be able to find the set of locals that you need</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:31:45.394000</ts>
    <user>Harris</user>
    <text>it's quite the hammer though :)</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:32:15.394900</ts>
    <user>Harris</user>
    <text>if I had a timemachine I would rename that node type to `:undefined-symbol` but alas</text>
  </message>
  <message conversation_id="500">
    <ts>2019-02-14T11:32:21.395100</ts>
    <user>Shayla</user>
    <text>With something like this, is it happening at compile time or run-time? heh cuz I suspect the overall performance cost of doing this at runtime will overshadow the performance gain from skipping the unused variables</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:34:19.395500</ts>
    <user>Harris</user>
    <text>you're invoking it from a macro</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:34:21.395700</ts>
    <user>Harris</user>
    <text>so compile time</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:35:05.396400</ts>
    <user>Harris</user>
    <text>this is assuming that you do something like `(defmacro whatever [body] (let [neded-locals (find-undefined-locals body)] (emit-only needed-locals body)))`</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:35:18.396900</ts>
    <user>Harris</user>
    <text>which afaict is the only way to do what you want anyway</text>
  </message>
  <message conversation_id="500">
    <ts>2019-02-14T11:36:07.397100</ts>
    <user>Shayla</user>
    <text>Where is `emit-only` coming from?</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:37:16.397500</ts>
    <user>Becki</user>
    <text>that's what you write to create only the binding forms that are in the set `needed-locals`</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:37:40.398100</ts>
    <user>Becki</user>
    <text>it's the binding forms of your let form in the original macro, moved to a function to make it easier to test and the macro easier to reason about</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:40:51.398200</ts>
    <user>Harris</user>
    <text>eugh don't do this in macros</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:41:12.398400</ts>
    <user>Harris</user>
    <text>traversing code like this is a recipe for broken edge cases</text>
  </message>
  <message conversation_id="500">
    <ts>2019-02-14T11:41:31.398600</ts>
    <user>Fredda</user>
    <text>Really? Like how?</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:41:47.398800</ts>
    <user>Harris</user>
    <text>it doesn't handle lexical scoping at all</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:42:20.399000</ts>
    <user>Harris</user>
    <text>if you run this over `(do a)` and `(let [a 1] a)` it would tell you that both expressions are using the undefined symbol `a`</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:42:22.399200</ts>
    <user>Harris</user>
    <text>for example</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:42:35.399600</ts>
    <user>Shayla</user>
    <text>Ah okay, thanks, that's cool</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:42:39.399800</ts>
    <user>Harris</user>
    <text>or even worse, if you ran it over `'a`</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:42:44.400100</ts>
    <user>Shayla</user>
    <text>I'll mess around and hopefully make it work!</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:42:52.400200</ts>
    <user>Harris</user>
    <text>which is using _the symbol_ `a`, not the local `a`</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:43:00.400400</ts>
    <user>Fredda</user>
    <text>Ah, I see</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:43:06.400600</ts>
    <user>Harris</user>
    <text>it would just enter `(quote a)` ignoring that `quote` suppresses evaluation</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:43:19.400800</ts>
    <user>Harris</user>
    <text>and so on, dozens of edge cases like this</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:43:57.401000</ts>
    <user>Harris</user>
    <text>there's _some_ constrained cases where this is fine</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:44:03.401200</ts>
    <user>Harris</user>
    <text>like what `spec` does</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:44:15.401400</ts>
    <user>Harris</user>
    <text>but it's the exception rather than the rule :)</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:44:30.401600</ts>
    <user>Fredda</user>
    <text>That makes sense. Won't play nice if somebody intends to (or accidentally) shadow the sym</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:47:40.401900</ts>
    <user>Fredda</user>
    <text>Well, I suppose you could fancy it up to not catch on quoted or binding forms of the symbol. But yeah, add in all that complexity and you might as well reach for the analyzer</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:47:58.402100</ts>
    <user>Fredda</user>
    <text>I was implementing in cljs though</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:48:01.402300</ts>
    <user>Harris</user>
    <text>exactly</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:48:07.402500</ts>
    <user>Harris</user>
    <text>well in cljs you have access to `cljs.analyzer` :)</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:48:28.402700</ts>
    <user>Fredda</user>
    <text>The same should be doable with that, yeah?</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:49:38.402900</ts>
    <user>Harris</user>
    <text>yep</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:49:39.403100</ts>
    <user>Fredda</user>
    <text>Doesn't have as many bells and whistles as your c.t.a.jvm I thought</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:50:13.403600</ts>
    <user>Harris</user>
    <text>it doesn't indeed but the AST format now matches `t.a` so you should be able to use the passes and the rest of the framework over the AST it produces</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:50:32.403800</ts>
    <user>Harris</user>
    <text>I haven't tried it but I think &lt;@Laurette&gt; does that</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:50:50.404000</ts>
    <user>Fredda</user>
    <text>Wait, you can use c.t.a.jvm on cljs forms?</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:51:04.404200</ts>
    <user>Harris</user>
    <text>no</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:51:33.404400</ts>
    <user>Harris</user>
    <text>you can use `cljs.analyzer`, get back an AST and feed that AST to `tools.analyzer` passes/traverse it using the t.a utilities</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:51:52.404600</ts>
    <user>Fredda</user>
    <text>gotcha</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:52:10.404800</ts>
    <user>Fredda</user>
    <text>Well that's awesome</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:52:18.405000</ts>
    <user>Harris</user>
    <text>don't know how easy or feasable that is, but some work went into cljs last year to allow this</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:55:00.405200</ts>
    <user>Fredda</user>
    <text>Ain't nothin a little elbow grease can't fix</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:55:25.405400</ts>
    <user>Fredda</user>
    <text>Big appreciation to you and bronsa's work on it</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T11:58:00.405600</ts>
    <user>Harris</user>
    <text>that would be the same person :simple_smile:</text>
  </message>
  <message conversation_id="500">
    <ts>2019-02-14T12:00:06.406100</ts>
    <user>Fredda</user>
    <text>lol ambrose I mean! :joy:</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:00:12.406300</ts>
    <user>Harris</user>
    <text>just added a slightly more performant version of `find-undefined-locals` to &lt;https://github.com/Bronsa/tools.analyzer.jvm.deps/commit/8c7c3936e6f73e85f9e7cc122a2142c43d459c12&gt;</text>
  </message>
  <message conversation_id="500">
    <ts>2019-02-14T12:00:19.406400</ts>
    <user>Fredda</user>
    <text>bronsa, ambrose, tomato, tomato</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:00:22.406600</ts>
    <user>Harris</user>
    <text>haha</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:01:03.407200</ts>
    <user>Becki</user>
    <text>if you're gonna bump some stuff, the project.clj version is out of date with the pom. little confusing</text>
  </message>
  <message conversation_id="500">
    <ts>2019-02-14T12:01:17.407700</ts>
    <user>Becki</user>
    <text>project.clj is 0.6.9 snapshot or something? and released is 0.7.0</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:01:26.408100</ts>
    <user>Harris</user>
    <text>this is `t.a.jvm.deps`</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:01:34.408600</ts>
    <user>Harris</user>
    <text>but I can fix that in `t.a.jvm`</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:01:43.408900</ts>
    <user>Becki</user>
    <text>i think that might just be t.analyzer</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:01:46.409200</ts>
    <user>Harris</user>
    <text>ok</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:01:52.409400</ts>
    <user>Becki</user>
    <text>i had to read t.a.jvm to see what version was actually out</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:02:10.409600</ts>
    <user>Harris</user>
    <text>ouch</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:02:19.410000</ts>
    <user>Harris</user>
    <text>the stuff in the readme should be correct</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:02:31.410400</ts>
    <user>Harris</user>
    <text>it's just `project.clj` that sometimes gets out of sync because I forget, I think</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:02:38.410700</ts>
    <user>Harris</user>
    <text>I'll double check both and update though, thanks</text>
  </message>
  <message conversation_id="499">
    <ts>2019-02-14T12:16:38.411300</ts>
    <user>Gia</user>
    <text>I've never needed to have a caching in my Clojure program before, so I need some guidance.
I have a collection of entities (maps), that are calculated via some expensive functions using data-fetching from the database. Basically, I want to have it in cache as a big map with `entity-id` as keys and corresponding hash-map as values. I looked up idiomatic ways to handle caching in Clojure, it's suggested to use `clojure.core.cache` and atoms. It seems to me that none of eviction policies are suitable for my case, so I resorted to use `BasicCache`. Additional to my "main" cache, implemented as an atom which contains plain entries, I want to have a nested lookup map with same entities grouped in keys for fast access. I want to store this derived lookup map in some atom for future uses, rather than calculating it every time (it's ~ over a million values).
I have two questions:
1) Should I use `clojure.core.cache`'s `BasicCache`? It seems to me that it's just a wrapper over regular map, what benefits do I get using it?
2) Is it ok or idiomatic to use `add-watch` as a way to keep in sync two atoms? So that my derived-lookup-map in second atom is always relevant and in sync whenever plain data in first atom changes?</text>
  </message>
  <message conversation_id="501">
    <ts>2019-02-14T13:27:46.413500</ts>
    <user>Nathanael</user>
    <text>&lt;@Gia&gt; Not sure about BasicCache, but for 2, on the client a lot of people would just use re-frame subscriptions for that, which lets you achieve the same with more precision and less imperative code. Not sure if anyone uses that on the server, though</text>
  </message>
  <message conversation_id="501">
    <ts>2019-02-14T13:30:32.413600</ts>
    <user>Shayla</user>
    <text>Having messed around with this for a bit, I have a small question: how do you go about `let` binding the `needed-locals`?  I can construct a vector of the necessary forms, but I'm having trouble using that vector in a `let` as the bindings. Or is there some much easier solution to this?</text>
  </message>
  <message conversation_id="501">
    <ts>2019-02-14T13:32:03.413800</ts>
    <user>Becki</user>
    <text>if you know the necessary forms its simple `(let [~@ forms] body)`</text>
  </message>
  <message conversation_id="501">
    <ts>2019-02-14T13:32:20.414000</ts>
    <user>Becki</user>
    <text>macro land you can just plop the pairs in there</text>
  </message>
  <message conversation_id="501">
    <ts>2019-02-14T13:35:57.414200</ts>
    <user>Shayla</user>
    <text>Ah, okay, thank you, that was the part I was missing</text>
  </message>
  <message conversation_id="502">
    <ts>2019-02-14T15:06:34.415900</ts>
    <user>Dann</user>
    <text>Keeping atoms in sync is a domain error - it's not what atoms are for.  You can synchronize changes to refs to ensure that they stay coherent, but it's not something you can do generally / safely with atoms.</text>
  </message>
  <message conversation_id="502">
    <ts>2019-02-14T15:07:26.416600</ts>
    <user>Dann</user>
    <text>the advantage of BasicCache is that it uses the cache protocols, so you can swap in other caches with other behaviors without changing surrounding code</text>
  </message>
  <message conversation_id="502">
    <ts>2019-02-14T15:08:13.417400</ts>
    <user>Dann</user>
    <text>eg. you thought you needed a TTL cache, but now product says no more time outs, BasicCache is a simple change without rewriting surrounding code</text>
  </message>
  <message conversation_id="502">
    <ts>2019-02-14T15:08:43.417700</ts>
    <user>Dann</user>
    <text>or, you know you want a cache, but specific behaviors are going to be elaborated as needed, so you start with a BasicCache so you don't need to rewrite code to get the new caching behaviors in the final result</text>
  </message>
  <message conversation_id="502">
    <ts>2019-02-14T15:10:29.418700</ts>
    <user>Dann</user>
    <text>if a second atom is always tied to the state of a first atom, and isn't changed itself, you can replace it with a function on the first atom, or added fields in a map in one atom</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T16:32:20.419100</ts>
    <user>Somer</user>
    <text>Is it possible to add a Java annotation to a Clojure function?</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T16:33:10.419600</ts>
    <user>Somer</user>
    <text>I've seen this: &lt;https://clojure.org/reference/datatypes#_java_annotation_support&gt; which sounds like the answer is no.</text>
  </message>
  <message conversation_id="504">
    <ts>2019-02-14T16:36:29.420000</ts>
    <user>Tammera</user>
    <text>I am finding this: &lt;https://github.com/clojurebook/ClojureProgramming/blob/master/ch09-annotations/src/main/clojure/com/clojurebook/annotations/junit.clj&gt;</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T16:39:42.420300</ts>
    <user>Tammera</user>
    <text>it looks pretty magical tho</text>
  </message>
  <message conversation_id="502">
    <ts>2019-02-14T17:00:10.421300</ts>
    <user>Dann</user>
    <text>I'd expect you'd want an annotation on a class, not a function per-se?</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:01:30.421500</ts>
    <user>Somer</user>
    <text>Well, a method would be more correct I suppose.</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:02:25.421700</ts>
    <user>Somer</user>
    <text>I'm trying to do this:
```
@Trace (dispatcher=true)
public void run() {
  // background task
}
```
without needing to do some crazy definterface &amp;amp; deftype stuff.</text>
  </message>
  <message conversation_id="502">
    <ts>2019-02-14T17:03:45.421900</ts>
    <user>Dann</user>
    <text>well, you need a class with a run method that's annotated, you can use gen-class and get a method without an interface, but the idiomatic thing in clojure is to use defprotocol (which defines an interface) then defrecord, deftype, or reify to get something implementing it</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:04:15.422100</ts>
    <user>Dann</user>
    <text>unless the method name doesn't actually matter, in that case functions have an `invoke` method, but there's no way to annotate it</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:04:41.422300</ts>
    <user>Dann</user>
    <text>you could reify or otherwise implement clojure.lang.IFn, and that way get something that calls like a normal function and also has annotations</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:07:09.422500</ts>
    <user>Somer</user>
    <text>Hmm that's interesting.</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:07:27.422700</ts>
    <user>Somer</user>
    <text>The idea is to be able to add that annotation to any Clojure function.</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:08:33.422900</ts>
    <user>Somer</user>
    <text>Is IFn the only one I'd need to implement?</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:09:04.423400</ts>
    <user>Dann</user>
    <text>yeah, one moment, I have an example somewhere</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:11:34.423600</ts>
    <user>Somer</user>
    <text>Can you dynamically set annotations on a deftype?</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:12:02.423800</ts>
    <user>Somer</user>
    <text>Something like:
```
(deftype TracedFn [traced-params]
  IFn
  ((with-meta 'invoke traced-params) [_]))
```</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:13:23.424000</ts>
    <user>Somer</user>
    <text>I don't think the deftype params are in scope. Even this doesn't work:
```
(deftype TracedFn [traced-params]
  IFn
  (^{com.newrelic.api.agent.Trace traced-params}
  invoke [_]))
```</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:14:12.424200</ts>
    <user>Somer</user>
    <text>I guess I can macro-ify that.</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:15:05.424400</ts>
    <user>Dann</user>
    <text>when you say it doesn't work, you mean because you can't have a different set of annotations for each instance?</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:15:25.424600</ts>
    <user>Somer</user>
    <text>Sorry, I should've been more specific. I get this:
```
Syntax error compiling at (impl.clj:19:1).
Unable to resolve symbol: traced-params in this context```</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:15:30.424900</ts>
    <user>Dann</user>
    <text>even with java. I don't think you can have different annotations on methods each instance of a class</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:15:41.425100</ts>
    <user>Dann</user>
    <text>oh, yeah, it prevents capture in deftype</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:16:03.425300</ts>
    <user>Dann</user>
    <text>I'd just use reify unless you really need multiple instances (why? I don't make multiple instances of functions...)</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:16:24.425500</ts>
    <user>Dann</user>
    <text>otherwise, yes, a macro that fills it in, since lexical capture is unavailable in deftype / defrecord</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:17:05.425700</ts>
    <user>Somer</user>
    <text>Right, makes sense. Thinking the IFn path is the easiest. No need for an extra interface here.</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:17:25.425900</ts>
    <user>Dann</user>
    <text>be sure to define every applicable arity for invoke, plus applyTo</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:17:33.426100</ts>
    <user>Dann</user>
    <text>:thumbsup: (bad emoji autocomplete haha)</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:18:15.426400</ts>
    <user>Somer</user>
    <text>It _seems_ to work without defining every arity. Is that just a REPL artifact?</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:18:35.426700</ts>
    <user>Dann</user>
    <text>if you don't define applyTo, apply breaks</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:19:00.426900</ts>
    <user>Dann</user>
    <text>I'd rather take the time to define applyTo, rather than risk a really counterintuitive error if I ever refactor and use apply</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:19:15.427100</ts>
    <user>Dann</user>
    <text>you only need to define the arities you implement, of course</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:19:18.427300</ts>
    <user>Somer</user>
    <text>So I could just define the `invoke` method(s) I need and applyTo?</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:19:21.427500</ts>
    <user>Somer</user>
    <text>Right</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:19:42.427700</ts>
    <user>Dann</user>
    <text>yeah</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:20:08.427900</ts>
    <user>Dann</user>
    <text>if you need numeric perf, the method overloads for primitives are there too...</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:20:35.428100</ts>
    <user>Dann</user>
    <text>(where fn gives you  that "for free" if you satisfy the static constraints the compiler knows how to use)</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:20:39.428300</ts>
    <user>Somer</user>
    <text>I was wondering what all those were. Looks like generated code at first glance.</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:21:07.428500</ts>
    <user>Dann</user>
    <text>pretty much, yeah, the multiple overloads is how you get good fast paths (at the expense of human radability)</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:28:41.428700</ts>
    <user>Somer</user>
    <text>Is the typical way applyTo implemented with a case statement of the count of the args?</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:29:28.428900</ts>
    <user>Somer</user>
    <text>BTW, another reason you need `appyTo`: &lt;https://dev.clojure.org/jira/browse/CLJ-1715&gt;</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:31:53.429100</ts>
    <user>Somer</user>
    <text>Looks like that's how AFn does it: &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/AFn.java#L147&gt;</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:32:45.429400</ts>
    <user>Dann</user>
    <text>nice to see the kind of bug I was avoiding by just superstitiosly using applyTo even though I didn't think I needed it :D</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:34:27.429700</ts>
    <user>Somer</user>
    <text>FWIW, ended with :
```
(defn- invoke-methods
  [bodies meta-map]
  (for [[args-list &amp;amp; body] bodies]
    `(~(with-meta 'invoke meta-map) [~'_ ~@args-list] ~@body)))

(defn- make-traced2
  [deftype-name traced-meta fn-name bodies]
  `(deftype ~deftype-name []
     IFn
     ~@(invoke-methods bodies (default-traced-meta traced-meta fn-name))
     (~'applyTo [this# args#]
       (AFn/applyToHelper this# args#))))

```</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:36:26.429900</ts>
    <user>Dann</user>
    <text>cool</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:37:12.430100</ts>
    <user>Dann</user>
    <text>with a bit of wrangling you could turn that into `fn-traced` or `traced-fn` or whatever</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:37:27.430300</ts>
    <user>Somer</user>
    <text>That's the end goal :slightly_smiling_face:</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:37:46.430500</ts>
    <user>Somer</user>
    <text>I wish Clojure had some helper functions for parsing defn args... going to attempt to do that with spec</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:39:01.430700</ts>
    <user>Dann</user>
    <text>so you can't just delegate by passing in the argslist as is? or is it that deftype methods don't support destructuring etc?</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:40:07.430900</ts>
    <user>Somer</user>
    <text>It's just the complexity of the defn spec</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:40:39.431100</ts>
    <user>Somer</user>
    <text>Gotta take in all this stuff
```
'([name doc-string? attr-map? [params*] prepost-map? body]
                [name doc-string? attr-map? ([params*] prepost-map? body) + attr-map?])
```
and spit out a defn matching what I was given.</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:40:41.431300</ts>
    <user>Dann</user>
    <text>ahh, if you want 100% compatibility I can see that...</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:41:04.431500</ts>
    <user>Dann</user>
    <text>I'd be tempted to just support what I consider "normal" in  defn</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:41:46.431700</ts>
    <user>Somer</user>
    <text>Yeah that wouldn't be the end of the work, I suppose.</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:42:05.431900</ts>
    <user>Somer</user>
    <text>I'm kinda surprised no one has a library for writing defn-esque things.</text>
  </message>
  <message conversation_id="503">
    <ts>2019-02-14T17:44:50.432100</ts>
    <user>Dann</user>
    <text>yeah - they made one for map-like things...</text>
  </message>
  <message conversation_id="505">
    <ts>2019-02-14T18:52:36.433600</ts>
    <user>Denae</user>
    <text>What do people think is the oldest clojure version a library should support?</text>
  </message>
  <message conversation_id="505">
    <ts>2019-02-14T18:54:27.433900</ts>
    <user>Latonya</user>
    <text>For a brand new library, Clojure 1.9.0 would seem reasonable.</text>
  </message>
  <message conversation_id="505">
    <ts>2019-02-14T18:58:54.434400</ts>
    <user>Latonya</user>
    <text>The latest Clojure survey results show that 97% of respondents were using Clojure 1.8.0 and later: &lt;https://www.surveymonkey.com/results/SM-S9JVNXNQV/&gt;</text>
  </message>
  <message conversation_id="505">
    <ts>2019-02-14T18:59:59.435200</ts>
    <user>Jasmine</user>
    <text>Well that was a multi select question so careful with the number</text>
  </message>
  <message conversation_id="505">
    <ts>2019-02-14T19:00:46.436300</ts>
    <user>Jasmine</user>
    <text>3% said they were using something older than 1.8, but they could also have been using something newer</text>
  </message>
  <message conversation_id="505">
    <ts>2019-02-14T19:02:01.437300</ts>
    <user>Becki</user>
    <text>just as a datapoint, CIDER now requires a minimum of 1.8 to work. There are still a few cljx based projects out there that are in wide use. cemerick's url package and its dependency pathetic for example</text>
  </message>
  <message conversation_id="506">
    <ts>2019-02-14T23:06:56.438400</ts>
    <user>Gia</user>
    <text>Yeah, I was looking for something like signals/subscriptions, but on the server-side. Was thinking watches would provide same functionality.</text>
  </message>
  <message conversation_id="506">
    <ts>2019-02-14T23:13:39.441300</ts>
    <user>Gia</user>
    <text>&lt;@Dann&gt;, so if I switch to refs instead of atoms, it would be ok to use watches? I'm little bit reluctant to just use a function, as even getting derived lookup-index from data that stored in first atom requires to process over million rows, that's why I was thinking about caching it.</text>
  </message>
  <message conversation_id="506">
    <ts>2019-02-15T04:14:21.441700</ts>
    <user>Clarine</user>
    <text>it seems &lt;@Tamisha&gt; is continuing that work here:
&lt;https://github.com/wilkerlucio/test.chuck.sfr-cljs&gt;</text>
  </message>
  <message conversation_id="507">
    <ts>2019-02-15T05:36:29.443200</ts>
    <user>Karren</user>
    <text>Trying some examples from SICP I've found that Ratio is pretty slow - is that expected?
E.g. using continued fraction to compute inverse of golden ratio:
```
(defn cont-frac-iter [n d k]
  (letfn [(frac-iter [i acc]
            (if (&amp;lt; i 1)
              acc
              ;; WARNING: if you don't use double coercion then the procedure will be slow for large k
              (recur (dec i) (double (/ (n i) (+ (d i) acc))))))]
    (frac-iter k 0)))

;; this is pretty fast
(time (double (cont-frac-iter (constantly 1)
                              (constantly 1)
                              100000)))
;; "Elapsed time: 14.10361 msecs"
;; =&amp;gt; 0.6180339887498948

;; BUT!
;; Original version without doulbe coercion and k=5000 took more than 3 seconds!!!
;; "Elapsed time: 3642.036658 msecs"
;; =&amp;gt; 0.6180339887498948
```</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:07:30.444900</ts>
    <user>Sonny</user>
    <text>Folks, this strikes me as a question where I am sure that the answer is going to embarrass me, but I am drawing a mental blank. Is there a simple way to toggle a single item within a set. I.e. if it's there remove it, if not add it? Used to do this with set xor in my JS days.</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:09:59.445700</ts>
    <user>Simonne</user>
    <text>Besides `(if (contains? s i) (disj s i) (conj s i))`?</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:10:20.446300</ts>
    <user>Sonny</user>
    <text>Yes, exactly the code I was trying to simplify.</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:10:50.447200</ts>
    <user>Sonny</user>
    <text>Had a feeling there might be a (xor s #{i}) type thing.</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:10:57.447500</ts>
    <user>Sonny</user>
    <text>No big deal but felt like it might be there.</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:11:10.447800</ts>
    <user>Simonne</user>
    <text>put that in a fn called `toggle-member`?</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:12:11.448900</ts>
    <user>Sonny</user>
    <text>Yeah, can definitely do that. I just had this, "I am sure there is an API function for this" feeling. If not it's good, means I am not going crazy :slightly_smiling_face:.</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:12:30.449300</ts>
    <user>Simonne</user>
    <text>not sure what you want to do, but `set/intersection` might help</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:14:43.451700</ts>
    <user>Simonne</user>
    <text>`(set/difference s (set/intersection s #{i}))`?</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:15:07.452400</ts>
    <user>Sonny</user>
    <text>I think the first example is probably the most readable barring the existence of a `(toggle s i)` function or similar. I occasionally get this weird thing that happens in my brain where I think, "Ok, I am sure that there is either a built in function for this, or an obvious pattern that I am missing". No worries, thanks for your help.</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:15:12.452500</ts>
    <user>Simonne</user>
    <text>hmmm… doesn’t do the “if it’s no there, add it part”</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:16:02.453100</ts>
    <user>Clarine</user>
    <text>You might want to use a map: `(update {:foo true} :foo not)`</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:18:09.454200</ts>
    <user>Sonny</user>
    <text>Hah! That's a neat trick. I think this is the kind of thing I meant by some pattern that I might be missing. Will explore whether converting to a map makes sense. This is all "first world problems", the contains check is not that complex anyway really.</text>
  </message>
  <message conversation_id="509">
    <ts>2019-02-15T07:32:28.454900</ts>
    <user>Leana</user>
    <text>Is it possible to write docstring in `defmethod` when using multimethod?</text>
  </message>
  <message conversation_id="508">
    <ts>2019-02-15T07:33:20.455400</ts>
    <user>Sonny</user>
    <text>&lt;@Leana&gt; To my knowledge, no. Docstring goes on the defmulti.</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T08:00:08.457700</ts>
    <user>Roberto</user>
    <text>I have this weird problem, where I get a `ClassCastException` when calling `(class x)` but no error when calling `(.getClass x)`. Here's the code:
```
(let [^Property src        (get-prop inst)
       [target-id target-prop] val
       target-inst (tree-search/find-nearest-by-id inst (str target-id))
       target-class (.getClass target-inst)
       get-target-prop (get-property-fn target-class target-prop)
       ^ObservableValue target     (get-target-prop target-inst)]

       (println "Now binding" src "with" target)

       (.bind src target))
```

This works, but when I replace `(.getClass target-inst)` with `(class target-inst)` I get: `java.lang.Class cannot be cast to clojure.lang.IFn`. What's going on here?</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T08:12:50.458400</ts>
    <user>Sonny</user>
    <text>&lt;@Roberto&gt; Have you shadowed, "class" somewhere else in the context? (def class ...) etc</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T08:15:26.460300</ts>
    <user>Roberto</user>
    <text>yes, I have. damn this has cost me something, why didn't I see it?</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T08:15:31.460500</ts>
    <user>Roberto</user>
    <text>:rage:</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T08:15:52.460800</ts>
    <user>Roberto</user>
    <text>thanks</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T08:15:58.461100</ts>
    <user>Roberto</user>
    <text>I should take a break :slightly_smiling_face:</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T08:16:09.461400</ts>
    <user>Sonny</user>
    <text>Not a problem. I only saw it because I have done similar things myself :slightly_smiling_face:</text>
  </message>
  <message conversation_id="511">
    <ts>2019-02-15T08:17:49.461700</ts>
    <user>Leana</user>
    <text>&lt;@Sonny&gt; Thanks a lot for your answer :slightly_smiling_face:</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T08:18:06.462100</ts>
    <user>Leana</user>
    <text>Guess I am doing something wrong if I need to have docstring in the method xD</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T08:20:31.464100</ts>
    <user>Sonny</user>
    <text>&lt;@Leana&gt; No worries. I actually quite often drop in a regular comment at the top of my multimethods in place of an actual docstring. Seems that I often find it useful to give a little explanation about what this specific case does. There is probably nothing to attach an actual docstring to though by the time all this stuff gets munged down to .class or .js.</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T09:44:20.465900</ts>
    <user>Simonne</user>
    <text>&lt;@Leana&gt; No you’re not doing it wrong. It’s a flaw IMO.</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T09:46:40.468300</ts>
    <user>Simonne</user>
    <text>I needed this the other day. I’ll play around w/ it more real quick.</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T09:49:34.470100</ts>
    <user>Shayla</user>
    <text>So I have a test helper function that checks to see if a given string is in hashmap `state`, which I use like `(is (last-log-contains? state "Barrier"))`. This works fine when it's correct, but when it's not correct, the output is: `expected: (is (last-log-contains? state "Barrier")) \n actual: (not (last-log-contains? [FULL STATE CONTENTS HERE] "Barrier"))`. Because of how this app works, the `state` hashmap can occasionally be _extremely massive_, which is tough to handle in test output.</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T09:49:53.470500</ts>
    <user>Shayla</user>
    <text>```
(defn last-log-contains?
  [state content]
  (some? (re-find (re-pattern content)
                  (-&amp;gt; @state :log last :text))))
```</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T09:50:23.471100</ts>
    <user>Shayla</user>
    <text>Is there any better way to write the function to avoid this? Is there any better way to write the `is` assertions to avoid this?</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T09:58:19.472200</ts>
    <user>Becki</user>
    <text>perhaps you could check `(select-keys state ["Barrier"])` for the key rather than the full map. When you are wrong you will be presented only with the value of the thing you are checking</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:01:11.472500</ts>
    <user>Shayla</user>
    <text>That's not a bad idea! Let me try that</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:02:33.473700</ts>
    <user>Shayla</user>
    <text>And thank you &lt;@Becki&gt; and &lt;@Harris&gt;! Your help yesterday was fundamental to me getting my PR up</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:02:43.473900</ts>
    <user>Harris</user>
    <text>great!</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:03:09.474400</ts>
    <user>Becki</user>
    <text>that's awesome. was there any performance gain? measured or just "felt"?</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:03:39.475100</ts>
    <user>Becki</user>
    <text>or just feel better that you are doing things more correctly. that's always a win too :slightly_smiling_face:</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:06:14.476000</ts>
    <user>Shayla</user>
    <text>haha Mostly the last one. Compile times seem to take a bit longer, and the tests were already pretty quick, but this is a major win for DRY</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:07:10.477000</ts>
    <user>Shayla</user>
    <text>We had 3 macros that did similar but slightly different things, and this allows me to extract the main `let` bindings that were shared between the 3 into a single spot</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:11:15.477400</ts>
    <user>Simonne</user>
    <text>&lt;@Leana&gt; yeah ok</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:11:28.477700</ts>
    <user>Simonne</user>
    <text>so a couple things</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:11:47.478100</ts>
    <user>Simonne</user>
    <text>you _could_ use the meta reader macro anywhere you want</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:12:24.478300</ts>
    <user>Simonne</user>
    <text>e.g. `(defmethod ^{:doc "foo"} foo* :bar [args])`</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:12:30.478500</ts>
    <user>Simonne</user>
    <text>the problem with that^ is</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:13:45.479400</ts>
    <user>Simonne</user>
    <text>You basically can’t get back to that docstring at runtime. It’s attached to the symbol `foo*`.</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:14:37.480200</ts>
    <user>Simonne</user>
    <text>You could also do something more drastic, like re-implement `defmethod`:
```
(defmacro defmethod*
  [multifn dispatch-val mymeta &amp;amp; fn-tail]
  `(. ~(with-meta multifn {:tag 'clojure.lang.MultiFn})
      addMethod
      ~dispatch-val
      ~(with-meta `(fn ~@fn-tail)
                  mymeta)))
```</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:15:02.480500</ts>
    <user>Simonne</user>
    <text>Then you could get back to your docstring via: `(meta (get-method foo* :baz))`</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:15:57.481500</ts>
    <user>Simonne</user>
    <text>However, it’s odd, because the docstring is attached to the _function_. Whereas the docstring of the multimethod is attached to the _var_.</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:16:20.482200</ts>
    <user>Jasmine</user>
    <text>there's a jira about this btw</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:16:21.482300</ts>
    <user>Simonne</user>
    <text>i.e. you get the multimethod docstring like so: `(meta #'foo)`</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:16:25.482500</ts>
    <user>Simonne</user>
    <text>ah good to know</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:17:25.483200</ts>
    <user>Simonne</user>
    <text>So the unfortunate truth is, as &lt;@Sonny&gt; deduced, there’s no consistent place to hang a method’s metadata.</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:17:48.483700</ts>
    <user>Jasmine</user>
    <text>well, I thought there was, not seeing it now. I know I've had some conversation about it in the last 6 months</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:19:46.486100</ts>
    <user>Sonny</user>
    <text>It doesn't seem like there is much point in supporting it because defmethods have no real identity. All of the tools that give power and usefulness to docstrings rely on being able to talk about a named thing, but defmethods are not named things.

Perhaps if things like the `(doc)` function were changed to optionally support a dispatch value in the case of multimethods or something, but otherwise... why bother? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:20:55.487000</ts>
    <user>Jasmine</user>
    <text>but yes, that's the tricky bit</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:22:39.488200</ts>
    <user>Sonny</user>
    <text>I would say, in my case it would only be supporting docstrings in the usual "docstring location", even if they were ignored entirely at runtime, but all that is really for is consistency of documentation in the code itself.</text>
  </message>
  <message conversation_id="510">
    <ts>2019-02-15T10:23:16.488700</ts>
    <user>Sonny</user>
    <text>It's not really a problem to drop in a standard comment, they just look different in cursive and I don't get the pretty green :slightly_smiling_face:</text>
  </message>
  <message conversation_id="512">
    <ts>2019-02-15T10:53:29.489400</ts>
    <user>Leana</user>
    <text>Thanks a lot for all your answer!</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:39:12.489600</ts>
    <user>Elida</user>
    <text>```(def valid-guid?
  (s/with-gen
    #(int? %)
    (constantly 1)))
=&amp;gt; #'test-ns/valid-guid?
(s/form valid-guid?)
=&amp;gt; :clojure.spec.alpha/unknown```</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:39:19.489800</ts>
    <user>Elida</user>
    <text>is this expected behavior?</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:45:02.490500</ts>
    <user>Clarine</user>
    <text>```
$ clj -A:test
Clojure 1.10.0
user=&amp;gt; (require '[clojure.spec.gen.alpha :as gen])
nil
user=&amp;gt; (require '[clojure.spec.alpha :as s])
nil
user=&amp;gt; (s/def ::guid (s/with-gen int? #(gen/return 1)))
:user/guid
user=&amp;gt; (s/form ::guid)
clojure.core/int?
user=&amp;gt; (gen/generate (s/gen ::guid))
1
user=&amp;gt;
```</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:45:05.490600</ts>
    <user>Elida</user>
    <text>```
(def valid-guid?
  (s/with-gen
    int?
    (constantly 1)))
=&amp;gt; #'test-nss/valid-guid?
(s/form valid-guid?)
=&amp;gt; clojure.core/int?```</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:46:17.491700</ts>
    <user>Elida</user>
    <text>right, anonymous functions in with-gen breaks s/form</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:49:54.492200</ts>
    <user>Clarine</user>
    <text>In spec-alpha2 that won’t work at all anymore, so you better get used to it :wink:</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:53:04.492900</ts>
    <user>Sixta</user>
    <text>Is there an existing pretty printing socket server repl I can utilize? Or do I need to write my own using `clojure.pprint/pprint`, is `clojure.pprint/pprint` even suited to pretty printing in a repl?</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:53:41.493200</ts>
    <user>Becki</user>
    <text>doesn't CIDER offer that but default to fipp?</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:53:48.493500</ts>
    <user>Becki</user>
    <text>meaning it should be fine?</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:54:08.494000</ts>
    <user>Min</user>
    <text>yeah and fipp as a specialized fn that's repl friendly if I recall</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:57:44.495500</ts>
    <user>Sixta</user>
    <text>I'm happy to use fipp for dev, but I'm not so sure about production with fipp. I don't want to conflict with someone else's version of fipp.</text>
  </message>
  <message conversation_id="513">
    <ts>2019-02-15T11:58:00.496100</ts>
    <user>Sixta</user>
    <text>Cider offers a clojure.pprint integration too though</text>
  </message>
  <message conversation_id="514">
    <ts>2019-02-15T12:45:55.497300</ts>
    <user>Mariela</user>
    <text>Is it possible to check whether a given symbol corresponds to a protocol method?

e.g. `(protocol-method? 'my-method) =&amp;gt; true`, `(protocol-method? 'inc) =&amp;gt; false`</text>
  </message>
  <message conversation_id="514">
    <ts>2019-02-15T12:48:03.498100</ts>
    <user>Marlyn</user>
    <text>resolve it, and inspect the var, if it resolves</text>
  </message>
  <message conversation_id="514">
    <ts>2019-02-15T12:49:12.498400</ts>
    <user>Elida</user>
    <text>form won’t work at all with with-gen specs?</text>
  </message>
  <message conversation_id="514">
    <ts>2019-02-15T12:51:12.499400</ts>
    <user>Mariela</user>
    <text>right, metadata of such vars has a `:protocol` key. thanks!</text>
  </message>
  <message conversation_id="514">
    <ts>2019-02-15T12:52:31.499600</ts>
    <user>Elida</user>
    <text>or you won’t be able to pass anonymous functions to with-gen?</text>
  </message>
  <message conversation_id="515">
    <ts>2019-02-15T13:26:11.501000</ts>
    <user>Hans</user>
    <text>&lt;@Sixta&gt; Fipp is very stable. It should be safe to just forcibly use the latest version.</text>
  </message>
  <message conversation_id="515">
    <ts>2019-02-15T13:26:16.501200</ts>
    <user>Hans</user>
    <text>I promise stability.</text>
  </message>
  <message conversation_id="515">
    <ts>2019-02-15T13:28:32.501300</ts>
    <user>Clarine</user>
    <text>you cannot do `(s/form int?)` in spec 2. you must write `(s/form (s/spec int?))`</text>
  </message>
  <message conversation_id="516">
    <ts>2019-02-15T13:37:41.501500</ts>
    <user>Elida</user>
    <text>would `(s/form (s/spec #(int? %)))` work?</text>
  </message>
  <message conversation_id="516">
    <ts>2019-02-15T13:38:20.501700</ts>
    <user>Clarine</user>
    <text>This is what I get:
```
user=&amp;gt; (s/form (s/spec #(int? %)))
(fn [%] (clojure.core/int? %))
```</text>
  </message>
  <message conversation_id="516">
    <ts>2019-02-15T13:39:00.501900</ts>
    <user>Clarine</user>
    <text>minor, but why are you writing #(int? %) instead of int?</text>
  </message>
  <message conversation_id="516">
    <ts>2019-02-15T13:43:21.502100</ts>
    <user>Elida</user>
    <text>just a simple example</text>
  </message>
  <message conversation_id="516">
    <ts>2019-02-15T13:43:32.502300</ts>
    <user>Clarine</user>
    <text>k</text>
  </message>
  <message conversation_id="516">
    <ts>2019-02-15T13:46:16.502500</ts>
    <user>Latonya</user>
    <text>Clojure Ratio values are exact, and I believe that every single arithmetic operation you do on one also does a greatest common divisor calculation to reduce the numerator and denominator integer values to lowest terms, changing the type to an integer if the result happens to be one.</text>
  </message>
  <message conversation_id="516">
    <ts>2019-02-15T13:46:55.502700</ts>
    <user>Latonya</user>
    <text>Because the results are exact, if the numerator and denominator get large, then all calculations will be doing exact arithmetic on large integers.</text>
  </message>
  <message conversation_id="517">
    <ts>2019-02-15T14:01:09.502900</ts>
    <user>Dann</user>
    <text>sounds like what you want is a cache, and then an atom used to derive the cached values, and clear of (parts of) the cache if the atom changes</text>
  </message>
  <message conversation_id="517">
    <ts>2019-02-15T14:01:48.503100</ts>
    <user>Dann</user>
    <text>you might want to check out core.cache, and for that usage a cache used by a function over an atom would make sense, where alterations to the atom might clear some or all of the function's cache</text>
  </message>
  <message conversation_id="517">
    <ts>2019-02-15T14:02:22.503300</ts>
    <user>Dann</user>
    <text>using two atoms together isn't generally doable in a correct way, but a cache of a function over an atom is doable</text>
  </message>
  <message conversation_id="518">
    <ts>2019-02-15T14:25:41.504100</ts>
    <user>Sixta</user>
    <text>&lt;@Hans&gt; your word is sufficient, fipp it is! </text>
  </message>
  <message conversation_id="518">
    <ts>2019-02-15T14:31:16.504600</ts>
    <user>Hans</user>
    <text>if you ever have a problem w/ that, feel free to complain to me directly and i’ll get a fixed build out</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:37:32.506000</ts>
    <user>Matha</user>
    <text>Is there ever a legitimate use of a map from keywords to functions instead of using a multimethod?</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:39:52.506900</ts>
    <user>Shonda</user>
    <text>I suppose if the function to be called can change at runtime based on context. Meaning you have one keyword, but the fn associated with that can change.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:45:46.508100</ts>
    <user>Fredda</user>
    <text>If your multifn is just dispatching off of keywords, seems like mostly the same thing to me. You're just able to define your dispatch map across multiple namespaces and downstream projects.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:46:08.508600</ts>
    <user>Fredda</user>
    <text>If all dispatch logic fits in one ns, a simple map would be just as good imo</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:49:39.510300</ts>
    <user>Matha</user>
    <text>&lt;@Fredda&gt; yeah… basically, when dispatching on some function of an argument, a multimethod seems natural (or when there is a need for extensibility). But in my project I found myself passing a keyword as the first argument to my multimethod (a dispatch key) which is then totally ignored by the body of the function. It seems odd / a map would be cleaner</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:52:14.512100</ts>
    <user>Fredda</user>
    <text>Yeah... IMO it would be cleaner, in some cases. The multifn approach is just so extensible - let's you build out that dispatch mechanism across namespaces.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:52:57.512500</ts>
    <user>Fredda</user>
    <text>and let's downstream authors extend your dispatch map</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:53:11.512700</ts>
    <user>Matha</user>
    <text>fair; makes sense. Ty :slightly_smiling_face:</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:54:19.513400</ts>
    <user>Fredda</user>
    <text>np. Feel free to check out dispacio if you're looking for any more inspiration around dispatch strategies &lt;https://github.com/johnmn3/dispacio&gt;</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:55:37.514600</ts>
    <user>Fredda</user>
    <text>The finest-grain control might be to plug in interceptors, for manually constructing dispatch strategies</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:55:56.515000</ts>
    <user>Matha</user>
    <text>Ah; I’ll definitely check this out! I had a similar question some time ago about using pattern matching v.s. multimethods; I think the answer is the same; it depends on how much you care about extensibility</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T16:56:08.515300</ts>
    <user>Fredda</user>
    <text>aye</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:06:06.516200</ts>
    <user>Matha</user>
    <text>Why do a lot of clojure functions on sequences return lists? e.g. `(rest [1 2 3])` returns `(2 3)`, forcing me to write `(into [] (rest [1 2 3]))` to get a vector back. Am I doing something wrong?</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:06:59.517000</ts>
    <user>Antwan</user>
    <text>Well, more specifically they return sequences</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:07:11.517400</ts>
    <user>Fredda</user>
    <text>FWIU, the list is the underlying data type of the `seq` abstraction, which all functions that operate over sequences recognize.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:08:07.519100</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/guides/faq#seqs_vs_colls&gt;</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:08:31.519700</ts>
    <user>Antwan</user>
    <text>If you are using rest for your computations things will be more efficient with linked lists (probably, by guestimate)</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:09:25.520300</ts>
    <user>Antwan</user>
    <text>Maybe</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:09:27.520500</ts>
    <user>Antwan</user>
    <text>I dunno</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:10:32.521700</ts>
    <user>Antwan</user>
    <text>Either way there is always subvec</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:10:38.521900</ts>
    <user>Jasmine</user>
    <text>&lt;@Matha&gt; &lt;@Fredda&gt; protocols are implemented as a map of names to functions</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:11:08.522400</ts>
    <user>Jasmine</user>
    <text>but special in having call-site optimizations</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:11:23.522600</ts>
    <user>Fredda</user>
    <text>Well, there ya' go :slightly_smiling_face:</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:12:05.523700</ts>
    <user>Jasmine</user>
    <text>there's plenty of places where a map of "name" to function is a better simpler choice than a multimethod or protocol</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:12:30.524500</ts>
    <user>Matha</user>
    <text>Ah. Am I doing something wrong by assuming in my code that I have a vector? Because, say, if at some point in my code I assume that I have a vector and use `conj` to append an element to the end, I now have to add `into []` or similar to all sequence operations I do on that vector, to ensure it remains a vector</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:12:59.525200</ts>
    <user>Matha</user>
    <text>Thanks &lt;@Jasmine&gt; for the extra explanation on multi-methods</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:13:09.525500</ts>
    <user>Fredda</user>
    <text>You have to know, yeah. Otherwise `conj`ing may do the different thing.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:13:19.525800</ts>
    <user>Jasmine</user>
    <text>why do you need to ensure it remains a vector?</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:13:31.526200</ts>
    <user>Matha</user>
    <text>Well otherwise `conj` might behave differently on it</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:13:54.526400</ts>
    <user>Jasmine</user>
    <text>in practice, I'd say this is not a problem I ever have</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:14:48.527700</ts>
    <user>Matha</user>
    <text>hmm, maybe I am thinking of it as a problem but it wouldn’t be in practice. I’ll try to ignore it and see</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:14:48.527800</ts>
    <user>Antwan</user>
    <text>If you want to not worry about it you can always whip up your own fn</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:15:02.528200</ts>
    <user>Jasmine</user>
    <text>I would not do that</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:15:13.529000</ts>
    <user>Antwan</user>
    <text>I'm a bad programmer so I would</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:15:21.529500</ts>
    <user>Antwan</user>
    <text>But I would feel bad afterwords</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:15:24.529700</ts>
    <user>Matha</user>
    <text>&lt;@Antwan&gt; yeah, but I found myself bumping into it over and over and I thought that if the standard library behaves in that way then I might be doing something wrong</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:15:24.529900</ts>
    <user>Jasmine</user>
    <text>as you will then just build your own bespoke collection handling that is different than what is done everywhere else</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:15:35.530500</ts>
    <user>Matha</user>
    <text>since I doubt all clojure devs re-write those functions, otherwise they would be in the std lib</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:15:46.531000</ts>
    <user>Jasmine</user>
    <text>if you're having this issue, back up and explain how you got there</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:16:32.532100</ts>
    <user>Jasmine</user>
    <text>generally once I have sequences, I am never "conj"ing to them, I am manipulating them at the sequence level with sequence functions</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:16:43.532200</ts>
    <user>Rosaline</user>
    <text>it is usually a problem if you are trying write what is an imperative algorithm using arrays in clojure</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:16:57.532500</ts>
    <user>Rosaline</user>
    <text>which, if you are doing that, don't use vectors, clojure has arrays</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:17:43.533300</ts>
    <user>Jasmine</user>
    <text>I think you're maybe off down a side path from where hmaurer started</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:18:06.533700</ts>
    <user>Jasmine</user>
    <text>I rarely use conj directly</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:19:52.536300</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/clojure/tools.deps.alpha&gt; is probably something visible I work on regularly. it has tons of data structures and data structure manipulation. I use conj twice in the whole code base.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:20:08.537300</ts>
    <user>Jasmine</user>
    <text>or I should say, in two functions</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:20:10.537400</ts>
    <user>Fredda</user>
    <text>Rarely does a clojure programmer not know obviously what the type being passed to conj is, I suppose. I rarely find myself getting bit by this either.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:20:18.537900</ts>
    <user>Rosaline</user>
    <text>for example, if you where directly translating some javascript code, js allows you to call push or whatever (I guess an arraylist would be a better analogue to that in clojure) to push a value on to the front of an array</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:21:00.539300</ts>
    <user>Rosaline</user>
    <text>and basically all the clojure collection code is not built to support that style of usage</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:21:10.539800</ts>
    <user>Matha</user>
    <text>Well, I started like this. I have a map which I pass down some function, a “step”. This map contains a special key, e.g `:remaining-steps [:a :b :c]` with the steps left to execute. What I do is I take that map, and run it through all those steps until that array is empty (so first `:a`, look up the corresponding function, run it on the map, and keep going). Those functions can also push elements to the beginning of  the vector under that key, adding more steps.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:21:21.540100</ts>
    <user>Rosaline</user>
    <text>so if you were trying to use it like that, you would end up doing something silly like (into [] ...) everywhere</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:21:48.540300</ts>
    <user>Jasmine</user>
    <text>so it's a queue</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:22:16.540900</ts>
    <user>Matha</user>
    <text>I guess? I wasn’t thinking of it that way. It’s more like a bag of information that I run through a sequence of stages</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:22:21.541200</ts>
    <user>Matha</user>
    <text>like a bunch of middlewares</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:22:47.541600</ts>
    <user>Matha</user>
    <text>sequence of steps *</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:23:35.543700</ts>
    <user>Matha</user>
    <text>basically like a middleware chain except that instead of directly calling the next one I add a keyword under a special key and some functions “above” is in charge of calling them in order until there are no more to call</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:24:21.545200</ts>
    <user>Jasmine</user>
    <text>it's unclear from what you said whether you want a stack or a queue. if you want a stack, the fastest option is to use a list (and cons/peek/pop). You can also use a vector as a stack with insertion point at the end, but that's slower than a list.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:24:38.546000</ts>
    <user>Matha</user>
    <text>stack</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:24:51.546500</ts>
    <user>Fredda</user>
    <text>`(update amap :remaining-steps into :extra-step)` or `conj`. But you already know it's a vector, so you know which direction conj works in in that case.</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:25:13.547300</ts>
    <user>Fredda</user>
    <text>Oh you want to push it to the front?</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:25:17.547500</ts>
    <user>Matha</user>
    <text>yep</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:25:20.547700</ts>
    <user>Rosaline</user>
    <text>just don't start with a vector and your stack will be great</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:25:30.547900</ts>
    <user>Fredda</user>
    <text>aye</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:25:37.548200</ts>
    <user>Matha</user>
    <text>alright, fair enough</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:25:48.548500</ts>
    <user>Matha</user>
    <text>ty</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:25:54.548600</ts>
    <user>Fredda</user>
    <text>or #queue</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:26:24.549200</ts>
    <user>Fredda</user>
    <text>But some seq ops will lose your queue type</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:26:45.549800</ts>
    <user>Jasmine</user>
    <text>note that that syntax is cljs-only</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:26:56.550300</ts>
    <user>Fredda</user>
    <text>ah</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:27:23.551000</ts>
    <user>Jasmine</user>
    <text>clj has a queue, but not the literal for it, you just use clojure.lang.PersistentQueue/EMPTY to get an empty one</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:37:46.551700</ts>
    <user>Matha</user>
    <text>Folllow up question: is there a cleaner way to prepend a list of elements IN ORDER to a list than doing: `(into some-list (reverse elements-to-prepend))` ?</text>
  </message>
  <message conversation_id="519">
    <ts>2019-02-15T17:38:14.552300</ts>
    <user>Matha</user>
    <text>e.g. pretend `'(4 5)` to `'(1 2 3) ` to get `'(4 5 1 2 3)`</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:43:52.552700</ts>
    <user>Rosaline</user>
    <text>concat (with caveats)</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:44:35.553500</ts>
    <user>Matha</user>
    <text>said caveats being?</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:45:17.554200</ts>
    <user>Rosaline</user>
    <text>but what you are talking about is concat, the caveat with concat is becuase it builds lazy seqs if you are using it without care you  will blow the stack when you go to realize it</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:46:53.554600</ts>
    <user>Rosaline</user>
    <text>you may want to reformulate how you keep your queue</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:47:10.554900</ts>
    <user>Rosaline</user>
    <text>instead of a list of items, keep a tree</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:47:59.555600</ts>
    <user>Matha</user>
    <text>tbh performance matters 0 in my case</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:48:42.556500</ts>
    <user>Rosaline</user>
    <text>I would just use concat</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:52:03.558700</ts>
    <user>Rosaline</user>
    <text>one way to think of something like your remaining steps is as a program, and what you have is the simplest kind of program, a linear list of instructions</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:52:33.559300</ts>
    <user>Rosaline</user>
    <text>so you could support more complicated trees of instructions, so something like clojure's do</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:53:00.559700</ts>
    <user>Matha</user>
    <text>sorry, what do you mean by this? (as a program)</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:53:36.560400</ts>
    <user>Rosaline</user>
    <text>it is a sequence of instructions for some abstract machine</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:55:00.561400</ts>
    <user>Rosaline</user>
    <text>you have `[do-x do-y do-z] and some program (the abstract machine) takes do-x off the control stack and does it, possibly pushing other things on to the control stack</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:56:34.562700</ts>
    <user>Matha</user>
    <text>yep that’s pretty much what I have</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:56:44.563200</ts>
    <user>Matha</user>
    <text>except that my do-x do-y do-z are keywords</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:56:49.563400</ts>
    <user>Rosaline</user>
    <text>so you might have something like `[[:do-2-things do-x do-y] do-z]` and have your abstract machine support do-2-things by pushing the 2 things back on to the control stack</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:59:31.565100</ts>
    <user>Matha</user>
    <text>hmm, I see</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T17:59:41.565400</ts>
    <user>Matha</user>
    <text>I don’t need that flexibility (for now) though, I think</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:00:11.566400</ts>
    <user>Matha</user>
    <text>Basically at first I was just piping something through functions with `-&amp;gt;`, but I needed to add some machinery between every step, so I wrote this simple abstract machine because</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:01:31.567400</ts>
    <user>Lura</user>
    <text>when reloading a namespace with a defprotocol, Is there a way to avoid the dreaded `IllegalArgumentException No implementation of method: :foo of protocol: #'com.example.foo/IFoo found for class: com.example.foo.FooRecord clojure.core/-cache-protocol-fn (core_deftype.clj:527)` by unloading the protocol somehow at the repl?</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:02:16.568300</ts>
    <user>Lura</user>
    <text>the readme for toolsnnamespace says “To avoid this problem, always create new instances of records after a refresh.” which doesn’t make sense to me, defprotocol is the thing that is throwing on reload</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:02:48.568900</ts>
    <user>Rosaline</user>
    <text>if you support some kind of `do` operation in your machine, and add continuations, you can process trees of instructions without having to do annoying concats of instruction sequences</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:03:06.569300</ts>
    <user>Matha</user>
    <text>&lt;@Rosaline&gt; what do you mean by continuations in this context?</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:03:31.569700</ts>
    <user>Rosaline</user>
    <text>the continuation of your abstract machine</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:03:46.570100</ts>
    <user>Matha</user>
    <text>as in? picking up evaluation again at some state?</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:03:51.570400</ts>
    <user>Rosaline</user>
    <text>yeah</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:03:54.570700</ts>
    <user>Matha</user>
    <text>yeah I do support that</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:04:50.571800</ts>
    <user>Rosaline</user>
    <text>if you have that, then instead of having to implement do by pushing things back on to the control stack, you push a new continuation that continues with the old control stack after the new control stack executes</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:05:27.572000</ts>
    <user>Matha</user>
    <text>:thinking_face:</text>
  </message>
  <message conversation_id="521">
    <ts>2019-02-15T18:19:37.572200</ts>
    <user>Tammera</user>
    <text>what they probably mean is that you need to refresh your instances of your `FooRecord`, because if they keep surviving post refresh they refer to the old protocol</text>
  </message>
  <message conversation_id="521">
    <ts>2019-02-15T18:20:01.572400</ts>
    <user>Tammera</user>
    <text>one way this can happen is if you `def` them in a namespace, which you `:refer :all`.</text>
  </message>
  <message conversation_id="520">
    <ts>2019-02-15T18:20:18.572600</ts>
    <user>Tammera</user>
    <text>That said, I have very similar issues often, so there is definitely more going on</text>
  </message>
  <message conversation_id="522">
    <ts>2019-02-15T20:19:55.573800</ts>
    <user>Laurene</user>
    <text>Hi, is there a convention for writing docstring for a wrapper function wrapping a Java library?</text>
  </message>
  <message conversation_id="522">
    <ts>2019-02-15T20:20:27.574400</ts>
    <user>Laurene</user>
    <text>Like should I use the Javadoc in the docstring, link to it? Any ideas?</text>
  </message>
  <message conversation_id="522">
    <ts>2019-02-15T22:54:32.575600</ts>
    <user>Celestine</user>
    <text>&lt;@Laurene&gt; No conventions. There's no formatting associated with Clojure docstrings. They're usually just short statements of what a function does, occasionally with examples of usage. There are some documentation tools that will render Markdown in a Clojure docstring...</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:12:37.576700</ts>
    <user>Mariela</user>
    <text>Looking for a function `f` that makes the example `=` true...

```
&amp;gt; 'component/start
component/start
&amp;gt; `component/start
com.stuartsierra.component/start
&amp;gt; (let [s 'component/start] (= (f s) `component/start)) ;; &amp;lt;--- looking for an f
```</text>
  </message>
  <message conversation_id="524">
    <ts>2019-02-16T00:21:10.576900</ts>
    <user>Celestine</user>
    <text>`resolve`?</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:22:22.577600</ts>
    <user>Mariela</user>
    <text>`(resolve 'component/start)` is nil

(in any case I want a symbol, not its resolved value)</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:25:40.577800</ts>
    <user>Mariela</user>
    <text>got it `(symbol (ns-resolve *ns* 'component/stop))`</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:26:04.578000</ts>
    <user>Mariela</user>
    <text>thanks for the hint!</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:29:14.578100</ts>
    <user>Celestine</user>
    <text>You need the alias in scope to resolve the symbol: ```user=&amp;gt; (require '[com.stuartsierra.component :as component])
user=&amp;gt; (-&amp;gt;&amp;gt; (resolve 'component/start) meta ((juxt (comp str :ns) :name)) (map name) (apply symbol))
com.stuartsierra.component/start
user=&amp;gt;   ```</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:30:11.578200</ts>
    <user>Celestine</user>
    <text>Depends on the context you're trying to resolve symbols in I guess...</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:31:05.579200</ts>
    <user>Celestine</user>
    <text>Interesting shortcut... FWIW, `(resolve 'component/start)` produces a Var for me: `#'com.stuartsierra.component/start` -- not sure why you didn't get that &lt;@Mariela&gt;</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:31:48.579900</ts>
    <user>Mariela</user>
    <text>&amp;gt; `(resolve 'component/start)` is nil

I probably said (and eval'ed) that wrongly. getting the var indeed</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:32:28.580200</ts>
    <user>Mariela</user>
    <text>so yeah `(symbol (resolve 'component/stop))` is the shortest way</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:32:58.580800</ts>
    <user>Celestine</user>
    <text>Oh, I should have tried that first... that's a recent addition that you can go from a namespace object to a symbol I think...</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:34:30.581100</ts>
    <user>Celestine</user>
    <text>Yeah, new in 1.10</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:35:28.581400</ts>
    <user>Celestine</user>
    <text>```seanc@DESKTOP-QU2UJ1N:~/clojure$ clj -Sdeps '{:deps {:com.stuartsierra/component {:mvn/version "RELEASE"}}}' -A1.9
Clojure 1.9.0
user=&amp;gt; (require '[com.stuartsierra.component :as component])
nil
user=&amp;gt; (resolve 'component/start)
#'com.stuartsierra.component/start
user=&amp;gt; (symbol *1)
ClassCastException clojure.lang.Var cannot be cast to java.base/java.lang.String  clojure.core/symbol (core.clj:579)
user=&amp;gt;
seanc@DESKTOP-QU2UJ1N:~/clojure$ clj -Sdeps '{:deps {:com.stuartsierra/component {:mvn/version "RELEASE"}}}' -A1.10
Clojure 1.10.0
user=&amp;gt; (require '[com.stuartsierra.component :as component])
nil
user=&amp;gt; (resolve 'component/start)
#'com.stuartsierra.component/start
user=&amp;gt; (symbol *1)
com.stuartsierra.component/start
user=&amp;gt;           ```</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:36:28.581800</ts>
    <user>Mariela</user>
    <text>nicely 'scienced'! and good to know :slightly_smiling_face:</text>
  </message>
  <message conversation_id="523">
    <ts>2019-02-16T00:41:16.582000</ts>
    <user>Mariela</user>
    <text>I asked about this problem in this channel a couple times very recently. no luck...

my conclusion (as suggested by someone else) is to resort to metadata-based protocol extension. I find the feature nifty anyway.

You can `vary-meta` either defrecords ('thin'  defrecords: implementing no protocols), or plain maps</text>
  </message>
  <message conversation_id="525">
    <ts>2019-02-16T03:18:27.582300</ts>
    <user>Karren</user>
    <text>Great, thanks for enlightenment</text>
  </message>
  <message conversation_id="526">
    <ts>2019-02-16T11:51:42.585800</ts>
    <user>Laurene</user>
    <text>Thanks again Sean!</text>
  </message>
  <message conversation_id="527">
    <ts>2019-02-16T15:42:40.588500</ts>
    <user>Doreatha</user>
    <text>Is there a library like chime, but for java-time instead of clj-time/joda-time?</text>
  </message>
  <message conversation_id="527">
    <ts>2019-02-16T15:42:42.588700</ts>
    <user>Doreatha</user>
    <text>&lt;https://github.com/jarohen/chime&gt;</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:30:40.589400</ts>
    <user>Meagan</user>
    <text>I want to add a custom `Datafiable` implementation to a function created with `defn`</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:32:01.590600</ts>
    <user>Meagan</user>
    <text>I tried doing `(alter-meta! #'my-fn-name assoc 'clojure.core.protocols/Datafiable my-datafy-impl)`</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:32:19.590900</ts>
    <user>Meagan</user>
    <text>doesn’t seem to work</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:37:47.591400</ts>
    <user>Celestine</user>
    <text>The metadata needs to be keyed on the function name, not the protocol type.</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:38:10.591800</ts>
    <user>Celestine</user>
    <text>`(alter-meta! #'my-fn-name assoc 'clojure.core.protocols/datafy my-datafy-impl)`</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:38:10.591900</ts>
    <user>Meagan</user>
    <text>ahhh</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:38:13.592200</ts>
    <user>Meagan</user>
    <text>yep just realized</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:38:25.592500</ts>
    <user>Celestine</user>
    <text>I got that wrong too when I first tried it at Conj :slightly_smiling_face:</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:40:06.593100</ts>
    <user>Meagan</user>
    <text>OK, so that answers one question. the next is: is there a way to attach it to the function itself without rewriting `defn`? :grimacing:</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:40:42.594200</ts>
    <user>Celestine</user>
    <text>I'm not sure what you're trying to do here... why do you want a _function_ to be datafiable?</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:40:45.594300</ts>
    <user>Meagan</user>
    <text>because now, `(datafy #'my-fn-name)` works but `(datafy my-fn-name)` obviously does not, since the meta is on the var not the fn</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:40:53.594500</ts>
    <user>Meagan</user>
    <text>reasons :stuck_out_tongue:</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:41:53.595300</ts>
    <user>Celestine</user>
    <text>You could `alter-var-root` to put in a new definition with metadata (wrapped on the function value, rather the Var) maybe?</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:43:04.595500</ts>
    <user>Meagan</user>
    <text>ahh hmm</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:48:52.595900</ts>
    <user>Meagan</user>
    <text>I lose some other nice properties if I do that it looks like</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:50:24.596400</ts>
    <user>Meagan</user>
    <text>like the REPL prints it as “clojure.lang.AFunction” instead of the var name</text>
  </message>
  <message conversation_id="528">
    <ts>2019-02-16T16:51:47.596900</ts>
    <user>Celestine</user>
    <text>Oh, because you no longer have access to the Var metadata itself?</text>
  </message>
  <message conversation_id="529">
    <ts>2019-02-16T18:21:26.597700</ts>
    <user>Matha</user>
    <text>is there an idiomatic way in clojure to check if a list has *one and only one* item? Other than `(= (count my-list) 1)`</text>
  </message>
  <message conversation_id="529">
    <ts>2019-02-16T18:28:18.597900</ts>
    <user>Jasmine</user>
    <text>No</text>
  </message>
  <message conversation_id="529">
    <ts>2019-02-16T18:46:23.598000</ts>
    <user>Henry</user>
    <text>Could also use `(= 1 (bounded-count 2 my-list))` to avoid fully realizing large lazy sequences :slightly_smiling_face:</text>
  </message>
  <message conversation_id="529">
    <ts>2019-02-16T18:56:40.598700</ts>
    <user>Matha</user>
    <text>&lt;@Henry&gt; ouh; good call; thanks!</text>
  </message>
  <message conversation_id="530">
    <ts>2019-02-17T00:15:39.600000</ts>
    <user>Meagan</user>
    <text>what’s the state of the art for setting up tests in a deps.edn project?</text>
  </message>
  <message conversation_id="530">
    <ts>2019-02-17T00:16:16.600700</ts>
    <user>Meagan</user>
    <text>specifically I want something I can run from within Emacs. I’ve never bothered to set it up before :x</text>
  </message>
  <message conversation_id="530">
    <ts>2019-02-17T00:21:17.600800</ts>
    <user>Madeleine</user>
    <text>Hum, just use Cider then &lt;https://cider.readthedocs.io/en/latest/running_tests/&gt;</text>
  </message>
  <message conversation_id="530">
    <ts>2019-02-17T00:23:07.601000</ts>
    <user>Madeleine</user>
    <text>Kaocha seems state of the art. For simple test running, there is test-runner from cognitec-lab</text>
  </message>
  <message conversation_id="530">
    <ts>2019-02-17T00:23:21.601200</ts>
    <user>Madeleine</user>
    <text>&lt;https://github.com/cognitect-labs/test-runner&gt;</text>
  </message>
  <message conversation_id="530">
    <ts>2019-02-17T00:23:42.601500</ts>
    <user>Madeleine</user>
    <text>&lt;https://github.com/lambdaisland/kaocha&gt;</text>
  </message>
  <message conversation_id="530">
    <ts>2019-02-17T00:24:28.601800</ts>
    <user>Madeleine</user>
    <text>Both have a CLI, so you.can run them from emacs in theory, but you dont have ab emacs mode or anything integrating them first class inside emacs</text>
  </message>
  <message conversation_id="530">
    <ts>2019-02-17T00:25:24.602000</ts>
    <user>Meagan</user>
    <text>awesome! thanks</text>
  </message>
  <message conversation_id="531">
    <ts>2019-02-17T05:59:22.606200</ts>
    <user>Sharen</user>
    <text>I'm stuck trying to write this macro:
```
(ns myns.util
  (:require [herb.core :refer-macros [&amp;lt;class]]))

(defmacro defstyled [fn-name bindings el stylem]
  `(defn ~fn-name [~'attrs &amp;amp; ~'body]
     (let [body# (if (map? ~'attrs) ~'body (conj ~'body ~'attrs))
           attrs# (if (map? ~'attrs) ~'attrs nil)]
       (letfn [(~fn-name ~bindings ~stylem)]
         (into [~el (merge {:class (herb.core/&amp;lt;class ~fn-name attrs#)}
                           attrs#)]
           body#)))))
```
I want to make it so the call to `&amp;lt;class` only includes `attrs#` if it's non-nil.
So in the above example, if `attrs#` is nil it should be `(herb.core/&amp;lt;class ~fn-name)` instead.
I've tried many ways to do this; with a simple if or concat, but I can't get it to work.</text>
  </message>
  <message conversation_id="532">
    <ts>2019-02-17T08:46:45.612200</ts>
    <user>Isa</user>
    <text>Today I get an idea to focus 80% of my time on open source / documentations / tutorials , because I like make solutions for other developers. But I don’t see how I could survive doing this considering money vs contracts. I didn’t think how to monetise open source before too much. Does it make sense? Probably not :slightly_smiling_face: Anybody here (as a person, not corporation) make money doing mostly open source? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="532">
    <ts>2019-02-17T08:49:42.612700</ts>
    <user>Clarine</user>
    <text>Nice discussion for the &lt;#C03RZGPG3|off-topic&gt; channel</text>
  </message>
  <message conversation_id="531">
    <ts>2019-02-17T08:59:07.613900</ts>
    <user>Jasmine</user>
    <text>Sounds like a place where you want to unquote splice a collection instead </text>
  </message>
  <message conversation_id="531">
    <ts>2019-02-17T09:00:44.614900</ts>
    <user>Jasmine</user>
    <text>`~@(when attrs# [attrs#])` ?</text>
  </message>
  <message conversation_id="531">
    <ts>2019-02-17T09:03:41.616300</ts>
    <user>Jasmine</user>
    <text>The trick being that unquote splicing an empty collection yields nothing, not nil</text>
  </message>
  <message conversation_id="531">
    <ts>2019-02-17T09:05:57.616800</ts>
    <user>Sharen</user>
    <text>that's cool to know! sadly I get a compiler exception syntax error, and my linter tells me it's unable to resolve the symbol attrs# inside that form. could it be because attrs# is defined when the returned function is run, not the macro?</text>
  </message>
  <message conversation_id="531">
    <ts>2019-02-17T09:21:39.617000</ts>
    <user>Sharen</user>
    <text>I feel I'm a bit closer with `(apply herb.core/&amp;lt;class ~fn-name (if (map? attrs#) [attrs#] []))` but I get `Can't take value of macro herb.core/&amp;lt;class` so I guess I'm messing up the quoting somehow?</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:15:21.617800</ts>
    <user>Nigel</user>
    <text>Why doesn't `(doseq [f [inc dec +]] (doc f))` print doc?</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:17:11.618300</ts>
    <user>Jasmine</user>
    <text>the symbols are being resolved to functions and doc takes symbols. quote to avoid evaluation</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:19:53.618800</ts>
    <user>Nigel</user>
    <text>Thanks &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:23:59.619400</ts>
    <user>Jasmine</user>
    <text>actually since doc is a macro, you might need to do more than that to get doc evaluated with the actual symbol</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:24:14.619600</ts>
    <user>Nigel</user>
    <text>Yeah. That didn't work :slightly_smiling_face:</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:24:25.620000</ts>
    <user>Nigel</user>
    <text>```
user=&amp;gt; (doseq [f `(inc)] (println f)(doc f))
clojure.core/inc
```</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:24:46.620400</ts>
    <user>Nigel</user>
    <text>Hee hee. Sometimes, these things are trickier than you assume</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:27:45.620700</ts>
    <user>Nigel</user>
    <text>`clojure.repl/print-doc` isn't public</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:31:50.621200</ts>
    <user>Jasmine</user>
    <text>oh right, attrs# is defined inside the code you're generating so isn't available to unquote</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:33:33.621400</ts>
    <user>Jasmine</user>
    <text>I mean you could just put an `if` around the call to &amp;lt;class in the generated code</text>
  </message>
  <message conversation_id="533">
    <ts>2019-02-17T10:35:37.621700</ts>
    <user>Jasmine</user>
    <text>```(defmacro defstyled [fn-name bindings el stylem]
  `(defn ~fn-name [~'attrs &amp;amp; ~'body]
     (let [body# (if (map? ~'attrs) ~'body (conj ~'body ~'attrs))]
       (letfn [(~fn-name ~bindings ~stylem)]
         (into [~el (merge {:class (if (map? ~'attrs) (herb.core/&amp;lt;class ~fn-name ~'attrs) (herb.core/&amp;lt;class ~fn-name))}
                           attrs#)]
           body#)))))```</text>
  </message>
  <message conversation_id="534">
    <ts>2019-02-17T12:29:07.623000</ts>
    <user>Leticia</user>
    <text>whats the best library to consume chunked/streamed http responses? something that takes a callback or returns a channel and can automatically parse json chunks</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:26:45.624100</ts>
    <user>Scotty</user>
    <text>I'd like to serialize some data structure in EDN. `(spit)`-ing it loses `M` suffix on `BigDecimal` objects. Is there a way to avoid that (or maybe I'm using a wrong tool?)</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:32:31.624200</ts>
    <user>Becki</user>
    <text>None</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:33:22.624800</ts>
    <user>Becki</user>
    <text>also works for me if i use `(BigDecimal. 17)`</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:34:18.625100</ts>
    <user>Becki</user>
    <text>the screenshot is a split of the outputted edn file</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:42:16.625400</ts>
    <user>Scotty</user>
    <text>Hmm, I'm doing something wrong then.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:44:35.625900</ts>
    <user>Scotty</user>
    <text>```% clojure -e '(spit "foo.edn" 3M)'
% cat foo.edn
3
% clojure -e '(spit "bar.edn" {:number 3M})'
% cat bar.edn
{:number 3M}
%
```</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:45:16.626500</ts>
    <user>Scotty</user>
    <text>Weird.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:46:15.627000</ts>
    <user>Becki</user>
    <text>check `str` on 3 vs {:number 3M} is your issue</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:46:35.627200</ts>
    <user>Scotty</user>
    <text>Yes, that's different.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:47:02.627400</ts>
    <user>Becki</user>
    <text>which is what spit is calling</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:48:31.627700</ts>
    <user>Scotty</user>
    <text>Which is `.toString` on the argument.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:50:56.628400</ts>
    <user>Becki</user>
    <text>so the difference is that RT.java prints bigdecs with the M added. so if you str a map you end up here but if you just str the big dec you get the bigdec's version of what a string is</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:51:14.628600</ts>
    <user>Becki</user>
    <text>```
		else if(x instanceof BigDecimal &amp;amp;&amp;amp; readably) {
			w.write(x.toString());
			w.write('M');
		}
```</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:51:36.629000</ts>
    <user>Scotty</user>
    <text>Right. Now I need to trace why it happens inside a large Clojure structure as well.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:51:45.629300</ts>
    <user>Scotty</user>
    <text>Don't have a small reproducer yet.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:52:38.629700</ts>
    <user>Becki</user>
    <text>any chance you have a stringbuilder anywhere and you're building up the string yourself?</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:53:22.630600</ts>
    <user>Scotty</user>
    <text>Nope, I'm getting the data from API endpoint, `clj-http.client` passes it through `cheshire`, I wrap it into top-level map and spit.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:53:23.630700</ts>
    <user>Mariela</user>
    <text>Patreon is working quite nicely. Some software devs are making a proper salary out of it. Personally I donate to a handful of Patreon projects.

I would mix that with a "N versions back" model. It's briefly mentioned here &lt;https://ayende.com/blog/186147-A/making-money-from-open-source-software-how-we-do-it&gt; (the author doesn't like it, I do)

i.e. open-source n-versions-back releases on a continuous basis, while the latest-and-greatest release is closed-source and paid</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:54:37.631800</ts>
    <user>Becki</user>
    <text>can json express BigDecimal? and are you sure that its coming out of cheshire correctly? Also, is perhaps cheshire doing that? are you keywordizing the keys? maybe cheshire reduces over vals and strs them manually which would exemplify this behavior</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:55:16.632000</ts>
    <user>Scotty</user>
    <text>JSON numbers are size-less.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:55:35.632600</ts>
    <user>Becki</user>
    <text>```
(reduce (fn [acc [k v]] (assoc acc (keyword k) (str v)))
        {}
        {"number" 3M})
{:number "3"}
```</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:55:41.632800</ts>
    <user>Becki</user>
    <text>if cheshire does something like this</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:55:41.632900</ts>
    <user>Scotty</user>
    <text>Cheshire has a specific option, and I use it: `(binding [cheshire.parse/*use-bigdecimals?* true] ...)`</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:56:13.633400</ts>
    <user>Scotty</user>
    <text>Hmm, I wonder if `clj-http` has a pool inside that might interfere with that... Let me check.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:58:05.634200</ts>
    <user>Becki</user>
    <text>its kinda worrying that the string representation of BigDecimals changes on context due to RT</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:58:07.634300</ts>
    <user>Scotty</user>
    <text>Hah, `*use-bigdecimals?*` works only if the number has a decimal dot.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:58:29.634900</ts>
    <user>Becki</user>
    <text>makes sense</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T13:59:55.635900</ts>
    <user>Scotty</user>
    <text>So that's the crux of the problem, one of numbers was an integer and hasn't got converted.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:00:17.636400</ts>
    <user>Scotty</user>
    <text>So I need to accept both bigints and integers down the line. Not a big deal.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:01:23.637400</ts>
    <user>Scotty</user>
    <text>I would expect that `str` calls into `RT.print` (that falls back to .toString for types it does not know) instead of `.toString`. Perforrmance? ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:02:49.638700</ts>
    <user>Becki</user>
    <text>yeah it seems like it. but i don't know the details of pr-str vs str and print-dup and all that machinery. but i'm surprised that (str 3M) and (str {:x 3M}) are so different. It _feels_ wrong but maybe this usage is above a simple `str` call</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:03:07.638900</ts>
    <user>Becki</user>
    <text>hard to know if foot gun or bug</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:03:40.639200</ts>
    <user>Scotty</user>
    <text>I'll file a bug and we'll see.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:13:05.640000</ts>
    <user>Scotty</user>
    <text>`(str nil)` and `(str {:a nil})` are inconsistent as well.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:13:29.640300</ts>
    <user>Scotty</user>
    <text>characters too.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:13:58.640500</ts>
    <user>Scotty</user>
    <text>Classes too.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:14:25.640700</ts>
    <user>Scotty</user>
    <text>bigints too.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:15:15.640900</ts>
    <user>Scotty</user>
    <text>patterns too.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:15:43.641600</ts>
    <user>Scotty</user>
    <text>Most of special cases in `RT.print` produce output different from their built-in `.toString` function.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:16:12.641900</ts>
    <user>Scotty</user>
    <text>&lt;@Becki&gt; &lt;https://dev.clojure.org/jira/browse/CLJ-2485&gt; — I don't expect it to be fixed though.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:17:22.642400</ts>
    <user>Becki</user>
    <text>we'll see. I expect thoughtful discussion. I don't know what the conclusion of that will be.</text>
  </message>
  <message conversation_id="535">
    <ts>2019-02-17T14:25:32.642500</ts>
    <user>Isa</user>
    <text>thank you for feedback</text>
  </message>
  <message conversation_id="536">
    <ts>2019-02-17T14:25:52.642700</ts>
    <user>Isa</user>
    <text>Do you know anybody from Clojure community who success with it?</text>
  </message>
  <message conversation_id="537">
    <ts>2019-02-17T14:47:41.642900</ts>
    <user>Mariela</user>
    <text>Not really. Cognitect and bbatsov are only collecting a couple hundred dollars / month.

But my thinking is, if you go boldly for it why would it not succeed?

i.e. when you give people an incentive to use Patreon (or other), they will do it</text>
  </message>
  <message conversation_id="538">
    <ts>2019-02-17T16:04:05.643100</ts>
    <user>Sharen</user>
    <text>thanks, that did the trick!
by the way, I really enjoyed your book clojure applied [=</text>
  </message>
  <message conversation_id="537">
    <ts>2019-02-17T16:11:01.643900</ts>
    <user>Mariela</user>
    <text>can I prevent commas from being printed in repl evaluations?</text>
  </message>
  <message conversation_id="539">
    <ts>2019-02-17T17:33:54.644000</ts>
    <user>Isa</user>
    <text>Hmm even if I will do super great tools as open source it is for free, so who will pay for that? :wink:</text>
  </message>
  <message conversation_id="539">
    <ts>2019-02-17T17:34:06.644200</ts>
    <user>Isa</user>
    <text>you see my concern</text>
  </message>
  <message conversation_id="539">
    <ts>2019-02-17T17:34:50.644400</ts>
    <user>Isa</user>
    <text>I am afraid it is way to do things only for fun, but not as everyday job, because of money.</text>
  </message>
  <message conversation_id="537">
    <ts>2019-02-17T17:40:28.644700</ts>
    <user>Mariela</user>
    <text>I don't think many are doing n-versions-back. I'd give a think to that. Not apt for libraries, but yes for things like IDEs DBs etc</text>
  </message>
  <message conversation_id="540">
    <ts>2019-02-17T21:23:06.645200</ts>
    <user>Vita</user>
    <text>Shouldn’t you use `(pr-str {:number 3M})` if you want to write edn?</text>
  </message>
  <message conversation_id="537">
    <ts>2019-02-17T23:38:02.646700</ts>
    <user>Nigel</user>
    <text>Is there a way to refer to an unevaluated form inside a macro without doing the following ?
```
(defmacro debug [form]
  `(do (println (list ~@form)) ~form))
```</text>
  </message>
  <message conversation_id="537">
    <ts>2019-02-17T23:54:57.647000</ts>
    <user>Mariela</user>
    <text>```
(defmacro debug [form]
  `(do
     (println ~(list 'quote form))
     ~form))
```
?</text>
  </message>
  <message conversation_id="537">
    <ts>2019-02-18T00:19:19.647200</ts>
    <user>Nigel</user>
    <text>&lt;@Mariela&gt; Thanks. I guess you can’t do it without somehow making a list of it again.</text>
  </message>
  <message conversation_id="537">
    <ts>2019-02-18T00:33:56.647400</ts>
    <user>Mariela</user>
    <text>that's not a list, in the same way that `'x` is not a list

(clojure implements `'x` as a list though... which is why my macro looks like that)</text>
  </message>
  <message conversation_id="537">
    <ts>2019-02-18T00:41:23.647700</ts>
    <user>Nigel</user>
    <text>&lt;@Mariela&gt; got that.</text>
  </message>
  <message conversation_id="541">
    <ts>2019-02-18T01:59:32.648700</ts>
    <user>Latrina</user>
    <text>I love how approachable the core.async src is. I mean, 90% is way over my head, but it’s like 1000x less scary than I imagined it for what it’s accomplishing.</text>
  </message>
  <message conversation_id="541">
    <ts>2019-02-18T02:09:31.649200</ts>
    <user>Becki</user>
    <text>watch tim baldridge's videos on the macros. they are well worth the time</text>
  </message>
  <message conversation_id="541">
    <ts>2019-02-18T04:54:25.649300</ts>
    <user>Cherise</user>
    <text>I thought you would be able to use `print-method` for this to change the printing of the various types, but trying to inspect the actual object leads to a StackOverflowError for some reason:

```
(defmethod print-method clojure.lang.PersistentArrayMap [o ^java.io.Writer w] (.write w "changed"))
#multifn[print-method 0x41358378]
user&amp;gt; {}
changed
;; Trying to change the print method by using the actual object leads to StackOverflowError:
user&amp;gt; (defmethod print-method clojure.lang.PersistentArrayMap [o ^java.io.Writer w] (.write w (str o)))
#multifn[print-method 0x41358378]
Exception updating the ns-cache #error {
 :cause nil
 :via
 [{:type java.lang.StackOverflowError
   :message nil
   :at [clojure.lang.Var deref Var.java 197]}]
 :trace
 (...)
```</text>
  </message>
  <message conversation_id="541">
    <ts>2019-02-18T05:00:45.649900</ts>
    <user>Cherise</user>
    <text>&lt;https://github.com/clojure/clojure/blob/06097b1369c502090be6489be27cc280633cb1bd/src/clj/clojure/core_print.clj#L229&gt;</text>
  </message>
  <message conversation_id="541">
    <ts>2019-02-18T05:00:51.650200</ts>
    <user>Cherise</user>
    <text>There’s the comma</text>
  </message>
  <message conversation_id="542">
    <ts>2019-02-18T05:30:46.650400</ts>
    <user>Mariela</user>
    <text>Epic find :v:</text>
  </message>
  <message conversation_id="542">
    <ts>2019-02-18T05:35:17.652300</ts>
    <user>Raina</user>
    <text>Is there a good writeup about `#=` reader conditional? I tried using it and it has very confusing semantics:
```
'{:a #=(vec (list [1 2 3]))}
=&amp;gt; {:a [list [1 2 3]]}
{:a #=(vec (list [1 2 3]))}
=&amp;gt; {:a [#object[clojure.lang.PersistentList$Primordial 0x488c6b35 "clojure.lang.PersistentList$Primordial@488c6b35"] [1 2 3]]}
```
It's like it evaluates first function but quotes the argument list of the said function</text>
  </message>
  <message conversation_id="542">
    <ts>2019-02-18T05:50:51.653100</ts>
    <user>Jasmine</user>
    <text>It’s happening at read time so no evaluation has occurred on the args</text>
  </message>
  <message conversation_id="542">
    <ts>2019-02-18T05:51:15.653800</ts>
    <user>Jasmine</user>
    <text>It’s intentionally not doc’ed because it’s not a public feature</text>
  </message>
  <message conversation_id="543">
    <ts>2019-02-18T08:27:40.655700</ts>
    <user>Marybeth</user>
    <text>This message was deleted.</text>
  </message>
  <message conversation_id="542">
    <ts>2019-02-18T08:39:37.656000</ts>
    <user>Gilberto</user>
    <text>`(assoc m :foo (or (m :foo) (compute-foo)))`</text>
  </message>
  <message conversation_id="543">
    <ts>2019-02-18T08:42:07.656800</ts>
    <user>Jalisa</user>
    <text>But this would invoke (compute-foo) even if :foo is already set. :disappointed:</text>
  </message>
  <message conversation_id="542">
    <ts>2019-02-18T08:43:07.657100</ts>
    <user>Gilberto</user>
    <text>I had `or` in my first response, then changed it to a map-get operation, then back to `or` because of this. `or` is lazy.</text>
  </message>
  <message conversation_id="542">
    <ts>2019-02-18T08:44:14.657300</ts>
    <user>Jalisa</user>
    <text>`or` is lazy? Thanks!</text>
  </message>
  <message conversation_id="542">
    <ts>2019-02-18T08:44:37.657600</ts>
    <user>Gilberto</user>
    <text>```
user=&amp;gt; (doc or)
-------------------------
clojure.core/or
([] [x] [x &amp;amp; next])
Macro
  Evaluates exprs one at a time, from left to right. If a form
  returns a logical true value, or returns that value and doesn't
  evaluate any of the other expressions, otherwise it returns the
  value of the last expression. (or) returns nil.
```</text>
  </message>
  <message conversation_id="544">
    <ts>2019-02-18T09:48:44.657900</ts>
    <user>Eufemia</user>
    <text>None</text>
  </message>
  <message conversation_id="544">
    <ts>2019-02-18T09:52:53.658300</ts>
    <user>Cherise</user>
    <text>&lt;http://blog.fogus.me/2010/01/22/de-chunkifying-sequences-in-clojure/&gt;</text>
  </message>
  <message conversation_id="544">
    <ts>2019-02-18T09:53:42.658600</ts>
    <user>Cherise</user>
    <text>&lt;https://markhneedham.com/blog/2014/04/06/clojure-not-so-lazy-sequences-a-k-a-chunking-behaviour/&gt;</text>
  </message>
  <message conversation_id="542">
    <ts>2019-02-18T10:07:49.661800</ts>
    <user>Eufemia</user>
    <text>thanks</text>
  </message>
  <message conversation_id="544">
    <ts>2019-02-18T10:08:16.662300</ts>
    <user>Shayla</user>
    <text>I have a vec of symbols and quoted function calls to be used in a let-binding macro that I've quoted, and I want to turn it into a map so I can use the symbol as the key and get the quoted function back. I currently have the vec quoted, and in a thread macro I call `(partition 2) (map (juxt first identity)) (into {})` which neatly handles what I'm looking to do. My question is, why do I need to call `(map (juxt first identity))`?</text>
  </message>
  <message conversation_id="544">
    <ts>2019-02-18T10:09:32.663500</ts>
    <user>Shayla</user>
    <text>If I leave it out, I get the `clojure.lang.Symbol cannot be cast to java.base/java.util.Map$Entry` error, but if I put it in, I've just created a list of `['symbol '(symbol (function call))]`, right?</text>
  </message>
  <message conversation_id="544">
    <ts>2019-02-18T10:09:49.663700</ts>
    <user>Shayla</user>
    <text>What am I missing in this situation?</text>
  </message>
  <message conversation_id="545">
    <ts>2019-02-18T10:34:07.664100</ts>
    <user>Esther</user>
    <text>`(into {})` expects a sequence of 2-vectors, `[key val]`, that will become key-val pairs in your map. So, `(map (juxt first identity))` puts them in that form.</text>
  </message>
  <message conversation_id="545">
    <ts>2019-02-18T10:38:27.666200</ts>
    <user>Laurene</user>
    <text>I used `float-array` to pass a Java array of float to a Java method. That method returns me back an array of float. Is there a sister function of `float-array` that does the inverse, so that I can use the array of float with Clojure? Or am I misunderstanding something?</text>
  </message>
  <message conversation_id="545">
    <ts>2019-02-18T10:39:46.666700</ts>
    <user>Laurene</user>
    <text>Like how to print the array?</text>
  </message>
  <message conversation_id="545">
    <ts>2019-02-18T10:42:45.667200</ts>
    <user>Becki</user>
    <text>i believe `vec` can take arrays and knows how to make PersistentVectors from them</text>
  </message>
  <message conversation_id="545">
    <ts>2019-02-18T10:45:31.667500</ts>
    <user>Laurene</user>
    <text>Yes that work, thanks a lot!</text>
  </message>
  <message conversation_id="545">
    <ts>2019-02-18T10:54:26.668100</ts>
    <user>Laurene</user>
    <text>I added an entry into clojuredocs to make it more visible &lt;https://clojuredocs.org/clojure.core/float-array&gt;</text>
  </message>
  <message conversation_id="545">
    <ts>2019-02-18T10:56:07.668400</ts>
    <user>Laurene</user>
    <text>`(into [] f)` works as well (with f a Java array of floats)</text>
  </message>
  <message conversation_id="545">
    <ts>2019-02-18T11:15:59.668800</ts>
    <user>Shayla</user>
    <text>Ah, okay. Thanks</text>
  </message>
  <message conversation_id="546">
    <ts>2019-02-18T12:29:27.671600</ts>
    <user>Rosia</user>
    <text>I need a way to use  `partition-all` with a step of 1 but as a transducer... is there some way to get this by composing the transducer producing functions available in clojure.core or am I best off just sort of "copying" the  transducer portion of the `partition-all` source code to meet my needs</text>
  </message>
  <message conversation_id="546">
    <ts>2019-02-18T12:34:47.672300</ts>
    <user>Leticia</user>
    <text>whats a good http client that allows a callback per chunk for streaming requests?</text>
  </message>
  <message conversation_id="546">
    <ts>2019-02-18T14:04:39.673700</ts>
    <user>Doreatha</user>
    <text>&lt;@Rosia&gt; You can use the `partition` from the xforms library.
```
(require '[net.cgrand.xforms :as xfs])

(= [[0 1 2] [1 2 3] [2 3 4]]
   (into [] (xfs/partition 3 1) (range 5)))
```</text>
  </message>
  <message conversation_id="546">
    <ts>2019-02-18T14:05:09.674200</ts>
    <user>Rosia</user>
    <text>&lt;@Doreatha&gt; thanks! I just found this a minute before your response</text>
  </message>
  <message conversation_id="547">
    <ts>2019-02-18T15:14:34.675200</ts>
    <user>Meagan</user>
    <text>is there a trick to turn a clojure form into a list recursively at macro-time?</text>
  </message>
  <message conversation_id="547">
    <ts>2019-02-18T15:15:08.675800</ts>
    <user>Meagan</user>
    <text>ex:
```
(defn foo [])
(defn bar [])
(defn baz [])

(my-macro (foo (bar (baz))))
;; =&amp;gt; (#function[user/foo] (#function[user/bar] (#function [user/baz])))
```</text>
  </message>
  <message conversation_id="547">
    <ts>2019-02-18T15:31:16.678000</ts>
    <user>Nathanael</user>
    <text>&lt;@Meagan&gt; how about this: `(defmacro my-macro [xs] (flatten xs))` and then "(macroexpand `(my-macro (foo (bar (baz))))" ?</text>
  </message>
  <message conversation_id="547">
    <ts>2019-02-18T15:32:11.678600</ts>
    <user>Meagan</user>
    <text>ah sorry, I probably didn’t explain well. I don’t want to flatten, I want to retain the nested-ness</text>
  </message>
  <message conversation_id="547">
    <ts>2019-02-18T15:32:16.678800</ts>
    <user>Meagan</user>
    <text>I just don’t want it to be evaluated</text>
  </message>
  <message conversation_id="547">
    <ts>2019-02-18T15:33:06.679900</ts>
    <user>Nathanael</user>
    <text>oh sorry, i misread. But in that case the macro can just return it without calling flatten, and the rest is the same</text>
  </message>
  <message conversation_id="547">
    <ts>2019-02-18T15:34:37.680200</ts>
    <user>Meagan</user>
    <text>I went with this for now:
```
(defn listify [f]
  (if (seq? f)
    `(list ~@(map listify f))
    f))

(defmacro my-macro [&amp;amp; body]
  `(list ~@(map listify body)))
```</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T15:48:50.681500</ts>
    <user>Debora</user>
    <text>hey all, so nil is considering less than everything else when comparing two things. is there a value that's considered more than everything else?</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T15:49:52.681800</ts>
    <user>Becki</user>
    <text>across all types? seems like a tough order</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T15:50:00.682000</ts>
    <user>Debora</user>
    <text>yea</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T15:54:53.682200</ts>
    <user>Jasmine</user>
    <text>42</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T15:56:13.682400</ts>
    <user>Becki</user>
    <text>the greatest number</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T16:05:15.683400</ts>
    <user>Becki</user>
    <text>there's the obvious
```
(defn my-compare [x y]
  (cond (= x y) 0
        (= x :value/max) 1
        (= y :value/max) -1
        :else            (compare x y)))
```</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T16:07:47.684600</ts>
    <user>Becki</user>
    <text>I wanted to do something like this:
```

(deftype MAX []
  java.lang.Comparable
  (compareTo [this _]
    1))
(def absolute-biggest-thing-ever (MAX.))
```
which works for `(compare MAX 3)` but not the other way around. you get class cast exceptions</text>
  </message>
  <message conversation_id="549">
    <ts>2019-02-18T17:31:17.685600</ts>
    <user>Raina</user>
    <text>im probably missing something obvious but why

```
(meta ^:x 'x)
``` returns nil</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T17:31:38.685800</ts>
    <user>Rosaline</user>
    <text>'x =&amp;gt; (quote x)</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T17:31:42.686000</ts>
    <user>Rosaline</user>
    <text>(quote x) =&amp;gt; x</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T17:32:46.687100</ts>
    <user>Rosaline</user>
    <text>&lt;@Becki&gt; you have to use a custom comparator instead of relying on the default one that uses Comparable</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T17:34:25.688100</ts>
    <user>Rosaline</user>
    <text>if you attach metadata to the form (quote x), then evaluate the form and get x, the metadata isn't on x, it is still on the form from before evaluation</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T17:37:18.688400</ts>
    <user>Becki</user>
    <text>like the `my-compare` example i gave or something else?</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T17:55:35.690100</ts>
    <user>Latonya</user>
    <text>&lt;@Debora&gt; In Clojure's clojure.core/compare implementation, is there some value that is greater than everything else?  No.  There is a greatest Long (Long/MAX_VALUE), and a greatest Double value (+Inf), but there is no single value that is comparable to all other values, and greater than all of them.  nil is special that way.</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T17:56:42.690800</ts>
    <user>Latonya</user>
    <text>Why?  Probably because Rich new that nil-punning was going to be common in Clojure, and didn't want exceptions raised when sorting collections using clojure.core/compare that contained nil mixed with other types.  That is just my guess, though.</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T18:01:54.692100</ts>
    <user>Latonya</user>
    <text>You are free to write your own custom comparator function that does whatever you like.  If for some reason there is some value you wanted to be comparable to, and greater than, all other values, it isn't clear to me what would be a reasonable choice for such a value. You could choose `nil` for that, but then it would be greater than all other values, not less than all other values.</text>
  </message>
  <message conversation_id="550">
    <ts>2019-02-18T19:00:33.693000</ts>
    <user>Vinnie</user>
    <text>has anyone hit clojure jira's api? i tried a few paths under &lt;http://dev.clojure.org|dev.clojure.org&gt; but getting 404. not sure if it's enabled.</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:01:06.693400</ts>
    <user>Latonya</user>
    <text>I use it every week to collect numbers of votes on each JIRA ticket.</text>
  </message>
  <message conversation_id="550">
    <ts>2019-02-18T19:01:48.693900</ts>
    <user>Vinnie</user>
    <text>sample path i tried `GET`ing &lt;https://dev.clojure.org/jira/rest/api/3/user/assignable/multiProjectSearch&gt; (with auth) getting 404</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:02:00.694200</ts>
    <user>Latonya</user>
    <text>The URLs I use are in this code somewhere: &lt;https://github.com/jafingerhut/clj-prescreen/blob/master/src/clj_prescreen/presc.clj&gt;  Search for occurrences of http and you should see them.</text>
  </message>
  <message conversation_id="550">
    <ts>2019-02-18T19:02:09.694500</ts>
    <user>Vinnie</user>
    <text>awesome, thanks!</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:02:23.694800</ts>
    <user>Latonya</user>
    <text>I do not necessarily exercise parts of the API that you want to use...</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:02:40.695100</ts>
    <user>Vinnie</user>
    <text>sure. i will poke around and see if i can figure it out</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:03:39.696000</ts>
    <user>Latonya</user>
    <text>I notice that my code never uses 'rest' in any of its URLs.  Also note that Clojure JIRA may be an older version than the most recent, by several years.</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:03:56.696400</ts>
    <user>Becki</user>
    <text>&lt;@Rosaline&gt; built a neat looking way to query jira with core.logic but mentioned that the clojure jira doesn't send a lot of stuff back in the api</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:04:19.697000</ts>
    <user>Vinnie</user>
    <text>yeah i don't recognize the `sr` in the urls, or the `jira.issueviews` fragment</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:04:21.697100</ts>
    <user>Becki</user>
    <text>i'm assuming it is quite old and unloved</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:04:42.697500</ts>
    <user>Latonya</user>
    <text>Well, loved by a few, and stable.  Updating it can be a pain, I am sure.</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:04:52.697800</ts>
    <user>Vinnie</user>
    <text>apparently `Atlassian JIRA (v4.4#649-r158309)`</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:05:14.698000</ts>
    <user>Vinnie</user>
    <text>circa 2011</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:05:37.698400</ts>
    <user>Latonya</user>
    <text>I am sure it gets more fun to update to the latest version, the more intermediate versions there are :slightly_smiling_face:</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:06:15.698700</ts>
    <user>Vinnie</user>
    <text>good reason to use a service and let someone else worry about upgrades :smile:</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:07:46.699400</ts>
    <user>Latonya</user>
    <text>Until and unless they break APIs you use without telling you</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:07:47.699600</ts>
    <user>Vinnie</user>
    <text>looks like we're on `v7.6.6` at work, which is what i've developed against previously. so i bet none of my code will work against clojure's</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-18T19:12:19.699800</ts>
    <user>Vinnie</user>
    <text>ha parts of it work :slightly_smiling_face:</text>
  </message>
  <message conversation_id="551">
    <ts>2019-02-18T19:41:52.701900</ts>
    <user>Jasmine</user>
    <text>When you’re using the api, please be kind. It’s not on a mammoth server or anything</text>
  </message>
  <message conversation_id="551">
    <ts>2019-02-18T19:43:30.703200</ts>
    <user>Jasmine</user>
    <text>I’ve unsuccessfully spent weeks trying to upgrade this jira instance to their cloud version. It’s a nightmare.</text>
  </message>
  <message conversation_id="552">
    <ts>2019-02-19T01:48:12.704400</ts>
    <user>Ali</user>
    <text>Jira is brilliantly engineered in that it's extremely hard to get out of once you're in. On the other hand, the same indeed applies to Jira itself.</text>
  </message>
  <message conversation_id="553">
    <ts>2019-02-19T08:34:46.705500</ts>
    <user>Melynda</user>
    <text>Where is the difference between clojure.edn and clojure.tools.reader.edn?</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-19T08:54:08.706100</ts>
    <user>Marlyn</user>
    <text>The latter is implemented in Clojure</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-19T08:54:57.707500</ts>
    <user>Marlyn</user>
    <text>The former in Java.  The Clojure library that tools.reader.edn lives in, also works in ClojureScript</text>
  </message>
  <message conversation_id="554">
    <ts>2019-02-19T09:10:38.708100</ts>
    <user>Noma</user>
    <text>Hi, I reinstalled Java and lein, but lein seems to be broken: ```lein
clojure.lang.Compiler$CompilerException: Syntax error compiling at (cider/nrepl.clj:1:1).
#:clojure.error{:phase :compile-syntax-check, :line 1, :column 1, :source "cider/nrepl.clj"}
...
Caused by: java.io.FileNotFoundException: Could not locate clojure/tools/nrepl/server__init.class, clojure/tools/nrepl/server.clj or clojure/tools/nrepl/server.cljc on classpath.
 at clojure.lang.RT.load (RT.java:466)```</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-19T09:12:23.708700</ts>
    <user>Noma</user>
    <text>```java --version
openjdk 11.0.2 2019-01-15
OpenJDK Runtime Environment 18.9 (build 11.0.2+9)
OpenJDK 64-Bit Server VM 18.9 (build 11.0.2+9, mixed mode)``` but same issue with java 8</text>
  </message>
  <message conversation_id="554">
    <ts>2019-02-19T09:12:40.708900</ts>
    <user>Noma</user>
    <text>lein installed with brew and I tried from the cli command tool</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-19T09:21:26.710000</ts>
    <user>Jasmine</user>
    <text>the latest cider has moved to a new nrepl - that exception indicates the old nrepl. I don't know quite enough to point you at where things are amiss</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-19T09:23:01.711000</ts>
    <user>Jasmine</user>
    <text>I think things that would help someone answer this better would be which leiningen version and cider version you have</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-19T09:23:47.711600</ts>
    <user>Becki</user>
    <text>usually lein 2.9.0 is enough. check your deps for the presence of tools.deps.nrepl which is poisonous to have now</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-19T09:26:58.712000</ts>
    <user>Sixta</user>
    <text>Looks to me like an old cider version? the error is that t.d.n can't be found. You might have cider in your ~/.lein/profile.clj</text>
  </message>
  <message conversation_id="548">
    <ts>2019-02-19T09:31:25.713400</ts>
    <user>Noma</user>
    <text>Yes, you are right, I completely forget this file `~/.lein/profiles.clj` which was pointing to an old version of cider, I put the version displayed on clojars and it worked. Thank you.</text>
  </message>
  <message conversation_id="555">
    <ts>2019-02-19T10:03:36.713600</ts>
    <user>Melynda</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="556">
    <ts>2019-02-19T10:19:09.714500</ts>
    <user>Debora</user>
    <text>thanks &lt;@Latonya&gt; &lt;@Becki&gt;, I was asking for a "max value" value only out of convenience</text>
  </message>
  <message conversation_id="556">
    <ts>2019-02-19T10:19:22.714900</ts>
    <user>Debora</user>
    <text>i just ended up writing my own comparator for the specific use case</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:21:20.716100</ts>
    <user>Madeleine</user>
    <text>So, anyone knows what's up with pRepl and what is it?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:21:49.717000</ts>
    <user>Madeleine</user>
    <text>Given there is already nRepl and unRepl. I'm not sure what it can bring to the table</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:22:13.717700</ts>
    <user>Madeleine</user>
    <text>Though I would like it if it was more like unrepl</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:24:30.719000</ts>
    <user>Madeleine</user>
    <text>Or it seems maybe it can be used in conjunction with unRepl?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:32:23.719500</ts>
    <user>Marlyn</user>
    <text>it cannot be used with unrepl</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:33:06.720500</ts>
    <user>Marlyn</user>
    <text>it does framing on output -- unrepl expects a raw stream</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:33:52.721200</ts>
    <user>Marlyn</user>
    <text>anyways, it's used in REBL and various other things
&lt;https://github.com/clojure/clojure/blob/master/changes.md#25-prepl-alpha&gt;</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:35:45.722700</ts>
    <user>Celestine</user>
    <text>It'll be nice to see more tooling using prepl so less dependencies need to be involved.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T12:36:12.722900</ts>
    <user>Zenaida</user>
    <text>Hi folks! Is there a way of compiling clojure files to clojuresctipt/js ?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:37:36.723700</ts>
    <user>Madeleine</user>
    <text>Hum, I'm not sure I'm onboard with pRepl then. Unrepl seems just all around better</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:38:46.724200</ts>
    <user>Madeleine</user>
    <text>Which already allows for zero dependencies</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:39:03.724700</ts>
    <user>Jasmine</user>
    <text>Actually, I’d say prepl is not framing, but data over a stream</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:39:36.725400</ts>
    <user>Madeleine</user>
    <text>Is the data also streamed though? Otherwise it would be less efficient no?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:39:54.725700</ts>
    <user>Jasmine</user>
    <text>What else could it be?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:40:47.727000</ts>
    <user>Madeleine</user>
    <text>Well, I mean. Say you return a long printed string. Can you start decoding the characters before the full string is returned?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:41:17.727900</ts>
    <user>Madeleine</user>
    <text>If it is packed in a data notation, I feel you'd need to wait for the whole thing </text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:41:50.729200</ts>
    <user>Madeleine</user>
    <text>Where as with unrepl bytestream, you can do whatever you want. You could return streaming video for that matter</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:42:14.729500</ts>
    <user>Evonne</user>
    <text>Well, the usual caveats apply--JS doesn’t support Java interop or Java-style threads. If your Clojure code isn’t running into any Java/JS incompatibilities, it probably compiles as CLJS already.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:42:29.730000</ts>
    <user>Gillian</user>
    <text>Would replacing a node in a tree with clojure.zip be an example of path copying?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:42:59.730100</ts>
    <user>Evonne</user>
    <text>I may not have understood what you’re asking for tho.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:44:42.732500</ts>
    <user>Gillian</user>
    <text>```With the path copying method a copy of all nodes is made on the path to any node which is about to be modified. These changes must then be cascaded back through the data structure: all nodes that pointed to the old node must be modified to point to the new node instead. These modifications cause more cascading changes, and so on, until the root node is reached.```
I think it pretty much describes zipping up a tree. Just realized that stuff I’ve been reading about Scala is described as path copying rather than anything related to functional zipper.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:45:04.733200</ts>
    <user>Madeleine</user>
    <text>I guess pRepl is more a replacement for nRepl then. Which would be bundled with Clojure. It seems like the advantage over unRepl might just be easier for tooling to build on, because of the defined data-format.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:46:10.733300</ts>
    <user>Zenaida</user>
    <text>No, you understand correctly. =D But, just because I have the org.clojure/clojurescript dependency it will compile to cljs? (if I have no incompatibilities)</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:52:58.735600</ts>
    <user>Jasmine</user>
    <text>It’s packed in an edn string, so in general you would wait to read the whole data structure response (unless your client was very clever)</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:53:50.736800</ts>
    <user>Jasmine</user>
    <text>But the key here is that in general your interactions with a repl are short, not a streaming video</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:54:07.737000</ts>
    <user>Evonne</user>
    <text>I would tend to expect so, that was one of the goals of CLJS. You might also want to use .cljc files if you’re interested in code that compiles to both.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:54:56.737800</ts>
    <user>Jasmine</user>
    <text>I see all of them as different approaches</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T12:54:58.737900</ts>
    <user>Evonne</user>
    <text>Here’s the link if you haven’t seen the docs for this: &lt;https://clojure.org/guides/reader_conditionals&gt;</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:55:55.739500</ts>
    <user>Jasmine</user>
    <text>Prepl and unrepl are built over streams and certainly Rich has expressed at great length the heritage and benefits of streams for composability and portability</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:57:22.740800</ts>
    <user>Madeleine</user>
    <text>I guess I'm not seeing the value proposition of pRepl over nRepl except for it being bundled in the Clojure jar.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:57:50.741400</ts>
    <user>Madeleine</user>
    <text>Sure, there's some implementation details differences. </text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:58:33.743200</ts>
    <user>Jasmine</user>
    <text>Every Unix thing already knows how to work with character streams</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:59:12.744400</ts>
    <user>Jasmine</user>
    <text>Stream repls compose, so you can nest one inside another</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T12:59:47.745400</ts>
    <user>Madeleine</user>
    <text>Maybe I don't know enough about nRepl then. What does it return if not a stream?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:00:09.745800</ts>
    <user>Jasmine</user>
    <text>It’s a framed protocol</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:02:11.745900</ts>
    <user>Madeleine</user>
    <text>What does that mean?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:04:10.746000</ts>
    <user>Sixta</user>
    <text>I think this is untrue</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:04:29.746400</ts>
    <user>Zenaida</user>
    <text>Thanks! I am using lein-cljsbuild. Is there better one?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:05:01.746800</ts>
    <user>Sixta</user>
    <text>Unrepl can start a nested session within a single frame of prepl</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:05:33.747000</ts>
    <user>Evonne</user>
    <text>That’s what I’ve always used, I haven’t really looked for a better one.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:06:15.747200</ts>
    <user>Sixta</user>
    <text>I think, anyway </text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:06:30.747900</ts>
    <user>Zenaida</user>
    <text>Just to clarify: I have an application written in Clojure and I would like to compile it to cljs/js and run it in a Node VM.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:06:33.748100</ts>
    <user>Jasmine</user>
    <text>Probably better for you to go read their well written docs than for me to explain</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:07:43.748200</ts>
    <user>Zenaida</user>
    <text>This is possible, right?</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:07:56.748800</ts>
    <user>Jasmine</user>
    <text>It’s bencoded messages over a socket</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:08:10.749000</ts>
    <user>Evonne</user>
    <text>Sounds plausible, but you’ll have to port the code that works with dependencies, so anything to do with, say, databases or web servers</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:09:43.749200</ts>
    <user>Evonne</user>
    <text>That can be a bigger rabbit-hole than you might think because you may have Clojure libraries that depend on something Java-specific internally, meaning you’ll have to find a CLJS replacement for the whole library.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:10:24.749600</ts>
    <user>Rosaline</user>
    <text>that is not strictly accurate</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:10:57.750300</ts>
    <user>Rosaline</user>
    <text>nrepl in practice is mostly bencoded messages over a socket, but you can define different transports</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:11:17.750400</ts>
    <user>Evonne</user>
    <text>Depending on the application, it may prove to be simpler/faster to use the Clojure implementation as a reference, and write the CLJS from scratch. But that’s a worst-case scenario.</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:14:40.753100</ts>
    <user>Rosaline</user>
    <text>I must admit I am some what baffled at the turn prepl has taken, because it has been my experience that tunneling framed messages is easier to do both over on framed message protocols (like websockets) and over streams (like a socket), and when nrepl as a project started I seem to recall rich suggesting looking at STOMP(a message bus protocol) for inspiration</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:15:36.754100</ts>
    <user>Zenaida</user>
    <text>Right, make sense! Thanks! Do you have any doc/post about compiling clj to cljs? I just would like to run some " lein comile clj to cljs" and see some exceptions popping up (because of some Java/JS incompatibilities).</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:15:45.754300</ts>
    <user>Rosaline</user>
    <text>(tunneling is near and dear to me because at work I do a lot with an nrepl tunneled over &lt;http://socket.io|socket.io&gt;)</text>
  </message>
  <message conversation_id="557">
    <ts>2019-02-19T13:18:55.755000</ts>
    <user>Rosaline</user>
    <text>but then, like reading the doc string on prepl, most of the doc string is example framed messages that out-fn is called with</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:21:10.756400</ts>
    <user>Rosaline</user>
    <text>so the idea that that you can differentiate between prepl and nrepl saying one is framed messages and the other is streams, rings rather hallow</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:22:02.756700</ts>
    <user>Eugena</user>
    <text>What is the best possible way to generate list using clojure on a map like

 ```(def somemap {:name 'John Doe' :gender 'male'})```

and generate
 ```(some-ns/property :name 'John Doe')(some-ns/property :gender 'male')```</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:24:35.756900</ts>
    <user>Evonne</user>
    <text>I would just start by copying the files into a `cljs` directory instead of `clj`, and changing the file extensions from `clj` to `cljs`. (Actually, I’d inspect them as I copied them just to see what I was getting into.)</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:34:01.758000</ts>
    <user>Dann</user>
    <text>if you want a list of those lists `(map (fn [entry] (cons 'some-ns/property entry)) somemap)`</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:34:39.758500</ts>
    <user>Dann</user>
    <text>but often lists aren't the right data type</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:34:48.758700</ts>
    <user>Rosaline</user>
    <text>generate is kind of an ambiguous word there</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:36:59.759200</ts>
    <user>Rosaline</user>
    <text>and the def isn't even valid clojure</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:41:15.759900</ts>
    <user>Eugena</user>
    <text>&lt;@Dann&gt; &lt;@Rosaline&gt; , I m trying to generate this form from a map ```(traverse g (add-V :person)
              (property :name "John Doe")
              (property :gender "male")))```</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:41:42.760200</ts>
    <user>Rosaline</user>
    <text>generate is again ambiguous</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:43:15.761600</ts>
    <user>Rosaline</user>
    <text>but, assuming traverse is a function, and property is a function, and what you want to do is call the traverse function with those arguments (instead of creating a that as a datastructure)</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:44:03.762700</ts>
    <user>Rosaline</user>
    <text>`(apply traverse g (add-V :person) (for [[k v] somemap] (property k v)))`</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:44:10.763000</ts>
    <user>Eugena</user>
    <text>yes traverse and property are functions</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:44:11.763200</ts>
    <user>Rosaline</user>
    <text>assuming you fix the broken quotes on somemap</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:45:15.763900</ts>
    <user>Madeleine</user>
    <text>I</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:45:17.764300</ts>
    <user>Rosaline</user>
    <text>although, my (wild)guess is you are using clojurescript, not clojure, and for in clojurescript might not work on maps like that</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:47:07.766800</ts>
    <user>Eugena</user>
    <text>&lt;@Rosaline&gt; I m dabbling with ogre library for JanusGraph and trying to create a graph traversal in clojure</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:47:23.767600</ts>
    <user>Marlyn</user>
    <text>i don't see how that could work</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:47:37.768500</ts>
    <user>Dann</user>
    <text>"generate this form" makes me think you might be trying to do a macro - is traverse a function where you can precalculate args, or a macro that needs another macro around it?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:47:45.768900</ts>
    <user>Rosaline</user>
    <text>I saw single quoted strings and swung for the fence</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:48:27.770100</ts>
    <user>Lemuel</user>
    <text>philosophical design question: what makes some data metadata?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:48:47.770400</ts>
    <user>Madeleine</user>
    <text>I'm not sure I see the difference between bencode, and EDN. Both sound framed to me. And neither seem to be streamable protocols. They both require the full payload to be received before decoding can proceed. That said, EDN in Clojure-land seems more natural. So I still feel pRepl is more like a new take on nRepl, with Clojure jar bundling. Which is fine, better then nRepl. But unRepl still seems like the wholy grail to me. That said, I recognize it might be harder to implement a tool with unRepl, since you're left implementing the protocol you want on your own. So, maybe pRepl is the right compromise in this case.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:50:07.771500</ts>
    <user>Rosaline</user>
    <text>I haven't seen anything in unrepl that couldn't be done in nrepl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:51:50.773100</ts>
    <user>Rosaline</user>
    <text>in fact technomancy had a proposal for using hypermedia kind of things to build emacs/vim/whatever uis for tooling on top of nrepl instead of having to build them again for every editor</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:52:15.773200</ts>
    <user>Eugena</user>
    <text>so, here is how ogre lets us create a vertex in Janusgraph with traverse function. so I am wondering if there is a macro approach  - &lt;https://github.com/clojurewerkz/ogre/blob/master/test/clojure/clojurewerkz/ogre/suite/add_vertex_test.clj#L22&gt;</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:53:05.774200</ts>
    <user>Madeleine</user>
    <text>Well, for me the differentiator for unRepl, is really just the idea that you inject your repl code through a standard socket repl or clojure.main repl.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:53:45.775300</ts>
    <user>Madeleine</user>
    <text>So if nRepl injected itself like that, to bootstrap, instead of requiring hard dependencies. Then it would be totally fine</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:54:13.776000</ts>
    <user>Lemuel</user>
    <text>&lt;@Rosaline&gt; I've seen hints of this in nREPL, but not sure where this was going.  Do you know of a blog post or something?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:54:42.776400</ts>
    <user>Rosaline</user>
    <text>I don't recall, it was a billion years ago</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:54:59.776800</ts>
    <user>Dann</user>
    <text>don't use a macro if you dont' need one - if traverse is a function, use a function like hiredman demonstrated</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:55:04.777100</ts>
    <user>Rosaline</user>
    <text>I think he even proposed a talk at the conj about (I don't recall if it was accepted)</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:55:54.777200</ts>
    <user>Dann</user>
    <text>macros can do a few things a function can't, but are less flexible / usable in other code, so if either a macro or a function would work, use a function</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:56:00.777500</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/technomancy/nrepl-discover&gt;</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:56:26.777700</ts>
    <user>Vernia</user>
    <text>Equality and hashing ignore metadata, so it’s best used for annotations that you would not consider part of an object’s value</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:56:27.777900</ts>
    <user>Eugena</user>
    <text>sure, thank you. I will check his approach</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:57:33.779000</ts>
    <user>Madeleine</user>
    <text>It's like ultimate REPL reification</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:58:03.779700</ts>
    <user>Rosaline</user>
    <text>nrepl if I recall shipped with a teletype transport which was a socket repl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:58:58.780800</ts>
    <user>Jasmine</user>
    <text>prepl being streaming means that you can connect remotely and still nest new repls, which you can't with nrepl afaik. I think cgrand was even looking at deploying unrepl that way over prepl?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:59:29.781700</ts>
    <user>Teodoro</user>
    <text>I started working on injectable nRepl.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:59:37.782000</ts>
    <user>Rosaline</user>
    <text>depends what you mean by nest repls, but nrepl middleware can pretty much do whatever it wants</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T13:59:50.782600</ts>
    <user>Jasmine</user>
    <text>I mean like run `clojure.main/repl`</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:00:15.783300</ts>
    <user>Rosaline</user>
    <text>I have a repo somewhere that runs swim (clustering) over nrepl, and then lets you proxy in to different members of the cluster</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:00:21.783400</ts>
    <user>Madeleine</user>
    <text>Yes! Awesome, I was just thinking that in theory, unrepl could inject nRepl or even pRepl (:p), though that one is just part of Clojure so no reason to do so. That's great.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:01:21.784100</ts>
    <user>Madeleine</user>
    <text>By the way, is there currently a way to start the socket repl from within a REPL? Or you need to have the JVM arg on app startup ?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:01:59.784400</ts>
    <user>Jasmine</user>
    <text>it has a programatic api</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:02:08.784600</ts>
    <user>Jasmine</user>
    <text>so you can start it yourself if you like</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:02:38.784900</ts>
    <user>Jasmine</user>
    <text>&lt;http://clojure.github.io/clojure/clojure.core-api.html#clojure.core.server/start-server&gt;</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:03:10.785200</ts>
    <user>Madeleine</user>
    <text>Ah awesome, I was looking for that, but couldn't find it.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:03:46.785500</ts>
    <user>Madeleine</user>
    <text>So, does each socket repl get a dedicated thread?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:04:12.786200</ts>
    <user>Jasmine</user>
    <text>each socket server has a thread, and each incoming client gets its own thread</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:04:42.786500</ts>
    <user>Jasmine</user>
    <text>you could just go read the code for this too, it's pretty straightforward</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:04:47.786700</ts>
    <user>Madeleine</user>
    <text>Ah yes, I see from the source. Cool</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:07:39.787100</ts>
    <user>Madeleine</user>
    <text>So, what does the "p" stand for, just curious?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:07:44.787300</ts>
    <user>Madeleine</user>
    <text>in pRepl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:07:45.787500</ts>
    <user>Madeleine</user>
    <text>:stuck_out_tongue:</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:08:40.787900</ts>
    <user>Jasmine</user>
    <text>program</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:09:01.788400</ts>
    <user>Jasmine</user>
    <text>as in not, designed for humans but for programs (like rebl) to talk</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:09:16.788900</ts>
    <user>Madeleine</user>
    <text>I see, that makes sense.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:09:36.789400</ts>
    <user>Jasmine</user>
    <text>&lt;https://groups.google.com/forum/#!msg/clojure-dev/Dl3Stw5iRVA/IHoVWiJz5UIJ&gt; is some stuff from rich when the socket repl was added that you might find useful to read if you're interested in his opinions on it</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:09:53.789600</ts>
    <user>Jasmine</user>
    <text>it's a long thread</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:10:26.789900</ts>
    <user>Madeleine</user>
    <text>I see that haha.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:11:09.790500</ts>
    <user>Jasmine</user>
    <text>this pre-dates prepl but I think you can project most of what's said there to prepl as well</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:13:07.791700</ts>
    <user>Madeleine</user>
    <text>Hum, havn't read it all. But I wonder if pRepl is a realization that no one used the Socket Repl. And thus, a thin RPC, or lets call it more, a easier time building REPL based programs was needed to gain more adoption. Thus pRepl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:14:06.792000</ts>
    <user>Jasmine</user>
    <text>it's important to separate the socket server from the socket repl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:14:16.792300</ts>
    <user>Jasmine</user>
    <text>the socket server is the more important bit imo</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:14:45.792900</ts>
    <user>Jasmine</user>
    <text>the socket repl is the clojure.main repl, with a few minor tweaks, over the socket server</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:15:47.793900</ts>
    <user>Jasmine</user>
    <text>to some degree, it is mostly a minimal example to be in the box - we never expected it by itself to be used much</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:16:50.794500</ts>
    <user>Jasmine</user>
    <text>we expected more people would build interesting custom remote repls (unrepl is a great example)</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:18:34.796000</ts>
    <user>Jasmine</user>
    <text>stepping away... need to get some work done :)</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:20:14.797400</ts>
    <user>Rosaline</user>
    <text>the whole thing is so frustrating to read, the stream vs. messaging framing because streams are an ordered sequence of messages, the rpc vs. repl framing because after saying a repl is not an "Eval RPC Server/Window", rich turns around and releases prepl, which I mean, a programatic repl, how is that not an rpc server?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:24:25.799600</ts>
    <user>Jasmine</user>
    <text>It supports streamed messages which are independent. If you have a thread pumping out, you’ll keep getting messages independent from the repl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:25:14.800200</ts>
    <user>Marlyn</user>
    <text>like tap messages get pushed</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:30:15.803900</ts>
    <user>Madeleine</user>
    <text>I'm taking this bit: `With the improved read-ability of REPL output, I think an edn-based REPL makes a fine RPC server for program-to-program communication, especially since the set of 'verbs' supported is bounded only by what you can evaluate, and the types of things you might discover is open.` This sounds a lot like pRepl. And I feel it is. I can see how the Socket server is the true primitive. And then unRepl, happened to be the only take on it. So maybe, it is true that people seemed to have been baffled by how bare bones socket server was, and just having to decide of a serialization format to exchange was too hard for tooling to adopt it. So maybe pRepl is trying to solve that. Adding a basic edn serialization on top.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:30:30.804200</ts>
    <user>Rosaline</user>
    <text>Which is that a response to? I can see how that could be used to argued against it being rpc, but then again plenty of rpc frameworks have someway to stream information. As for streams vs. messages you can't describe what the stream is doing without calling it messages, so I dunno.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:31:21.805200</ts>
    <user>Rosaline</user>
    <text>I feel like my parents got divorced so I get more toys (so many repls) but then they keep making digs at the toys the other parent got me</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:31:48.806100</ts>
    <user>Rosaline</user>
    <text>and like, it is pretty clear they are all legos</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:33:02.807500</ts>
    <user>Marlyn</user>
    <text>It's really important to separate Socket Server vs. Socket REPL

Socket REPL is `clojure.core.server/main` running as the "connection accept" function for a Socket Server
You can conceivably run a JSON-RPC endpoint, or some HTTP server as your "connection accept" function</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:34:01.808400</ts>
    <user>Marlyn</user>
    <text>prepl is another thing you can run on a Socket *Server* -- specifically `clojure.core.server/io-prepl` would be the accept function for that</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:35:24.809200</ts>
    <user>Rosaline</user>
    <text>I am not sure what point you are trying to make?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:35:44.809900</ts>
    <user>Marlyn</user>
    <text>just re-articulating a previous point</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:36:37.811600</ts>
    <user>Rosaline</user>
    <text>diverse transports? nrepl has them (as I said nrepl ships with bencoded data over sockets and a plain socket repl, and there are throd party transports for things like message queues and http)</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:37:32.813200</ts>
    <user>Madeleine</user>
    <text>Right, I see that. I guess the thing is. Once you have a socket server, and an accept function that can take a char-stream and eval it, and return a char-stream of the result. You have all the power as a client. So now, you can send to be evaled the entire code of pRepl if you wanted. And eval a swap of the socket server accept-fn to be the one you just sent.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:38:17.814000</ts>
    <user>Madeleine</user>
    <text>That to me is fantastic. And from my understanding, its the idea behind unRepl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:39:32.815100</ts>
    <user>Madeleine</user>
    <text>Now, pRepl, or nRepl, or wtv else. Those are just protocols or middleware, etc. over your foundation. Maybe as a tool writer, I prefer to exchange EDN back and forth. Or maybe I prefer bencode.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:39:47.815300</ts>
    <user>Madeleine</user>
    <text>unRepl lets me choose which</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:40:25.816600</ts>
    <user>Madeleine</user>
    <text>That said, its also an added responsibility to the tool writer. So maybe, I don't care. And its best that Rick just says, it'll be EDN from now on.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:40:25.816700</ts>
    <user>Marlyn</user>
    <text>transport encoding is the least interesting part of this.  How the REPL handles `*in*` is really important</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:40:44.817300</ts>
    <user>Madeleine</user>
    <text>Hum, go on</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:42:07.819100</ts>
    <user>Marlyn</user>
    <text>I haven't looked recently so I don't know if this is out of date information w.r.t. nREPL,  but that old thread above brought up some difficulties with issuing `(read *in*)`  in nREPL</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:42:46.819900</ts>
    <user>Marlyn</user>
    <text>```(defn user-prompt [s]
  (println s)
  (read *in*))```</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:43:21.820900</ts>
    <user>Rosaline</user>
    <text>yeah, it is tricky, but doable</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:43:33.821400</ts>
    <user>Marlyn</user>
    <text>so that is _fundamental_ to a REPL</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:43:37.821700</ts>
    <user>Becki</user>
    <text>```
"Returns a LineNumberingPushbackReader suitable for binding to *in*.
   When something attempts to read from it, it will (if empty) send a
   {:status :need-input} message on the provided transport so the client/user
   can provide content to be read."
```</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:43:39.821900</ts>
    <user>Rosaline</user>
    <text>but it also illustrates the problems transporting streams over messages</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:43:41.822000</ts>
    <user>Marlyn</user>
    <text>and shouldn't be tricky</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:43:46.822300</ts>
    <user>Marlyn</user>
    <text>nesting repls, etc.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:44:15.823600</ts>
    <user>Marlyn</user>
    <text>transport encoding is as  simple as swapping the R and P in REPL.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:44:21.824000</ts>
    <user>Rosaline</user>
    <text>and most intresting protocols these days (http, websockets, etc) are message based</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:44:41.824700</ts>
    <user>Rosaline</user>
    <text>so defining a repl entirely on streams limits its reach outside of a single machine</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:44:49.824800</ts>
    <user>Becki</user>
    <text>I remember Stu saying something like that on the apropos cast i think? His daughter was making a program and requested the users height or something. And he said it should read from in, not send a message.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:45:04.825600</ts>
    <user>Becki</user>
    <text>But i don't see the full importance of that</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:45:16.826000</ts>
    <user>Rosaline</user>
    <text>as I have said in the past, I have a nrepl repl tunneled over &lt;http://socket.io|socket.io&gt;</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:45:21.826200</ts>
    <user>Rosaline</user>
    <text>and I just typed (read) in to it</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:45:33.826600</ts>
    <user>Rosaline</user>
    <text>emacs prompted me for input</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:45:36.826800</ts>
    <user>Rosaline</user>
    <text>I typed ':a'</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:45:44.827000</ts>
    <user>Rosaline</user>
    <text>the result was :a</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:46:11.827400</ts>
    <user>Rosaline</user>
    <text>like, even tcp socket "streams" are not streams</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:46:25.827800</ts>
    <user>Rosaline</user>
    <text>they are sequence of messages</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:46:59.828900</ts>
    <user>Rosaline</user>
    <text>so framing streams as some fundamental answer that will give us super powers is kind of silly</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:47:01.829000</ts>
    <user>Marlyn</user>
    <text>there are molecules too but we're talking about the user-facing abstraction</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:47:12.829200</ts>
    <user>Marlyn</user>
    <text>&lt;https://clojurians.slack.com/archives/C03S1KBA2/p1550605401820900&gt;</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:47:19.829600</ts>
    <user>Marlyn</user>
    <text>what was that in reference to? ^</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:47:22.829800</ts>
    <user>Madeleine</user>
    <text>Rich sais: &amp;gt; There must be some source (stream) of things read. That source is the same source that should be used should the code being evaluated call 'read'.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:47:35.830200</ts>
    <user>Rosaline</user>
    <text>the read input</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:47:41.830700</ts>
    <user>Madeleine</user>
    <text>And that seems hard to argue against. But maybe nRepl supports this now.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:47:58.831200</ts>
    <user>Rosaline</user>
    <text>when I said "tricky but doable" and then did it, I was imply it is tricky but has been done</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:48:09.831500</ts>
    <user>Rosaline</user>
    <text>not "it is tricky, and you kind of have to hack around to make it work"</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:48:44.832000</ts>
    <user>Madeleine</user>
    <text>I think streaming matters. But I'm not sure pRepl qualifies as streaming.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:48:53.832200</ts>
    <user>Madeleine</user>
    <text>When I think streaming, I think, partial.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:49:12.832900</ts>
    <user>Madeleine</user>
    <text>Like if I wanted to return a big image from the REPL, and have it rendered in my tool.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:49:16.833100</ts>
    <user>Rosaline</user>
    <text>what you mean is you want results split over multiple messages</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:49:23.833400</ts>
    <user>Rosaline</user>
    <text>"streaming"</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:49:55.834300</ts>
    <user>Madeleine</user>
    <text>Yes, where the messages don't add considerable overhead to the stream. And where you can begin to deserialize very early.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:50:15.834800</ts>
    <user>Rosaline</user>
    <text>you can write an nrepl middleware that recognizes java Image objects and starts and a webserver and serves them over http and just sends a link to the client repl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:50:30.835000</ts>
    <user>Madeleine</user>
    <text>That's a lot of roudabout</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:50:55.835800</ts>
    <user>Madeleine</user>
    <text>If my REPL just returns bytestreams. It could just return the image bytes with a byte header and done</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:51:20.836600</ts>
    <user>Rosaline</user>
    <text>I think you think more about it that is not enough</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:51:51.837300</ts>
    <user>Rosaline</user>
    <text>but you can also certainly write an nrepl middleware that detects java Image objects and sends them back as a bunch of bytes</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:52:03.837700</ts>
    <user>Becki</user>
    <text>ardem added this to cider-nrepl i believe</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:52:09.838100</ts>
    <user>Rosaline</user>
    <text>(but for example, if you are transporting over something that json encodes things will be tricky)</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:52:19.838400</ts>
    <user>Rosaline</user>
    <text>yeah</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:52:34.839000</ts>
    <user>Madeleine</user>
    <text>Yes, but now I'm having to add middleware dependencies ahead of time. So to use a tool, the user is forced to add code to their program. That's why I love unRepl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:53:14.840000</ts>
    <user>Madeleine</user>
    <text>With unRepl, the tool is in full control. And can choose to be as sophisticated, or as little.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:53:40.840800</ts>
    <user>Madeleine</user>
    <text>With no pre-req from the user, appart for starting a socket repl.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:53:43.840900</ts>
    <user>Rosaline</user>
    <text>all critiques of nrepl I have seen so far instead of making me think "well nrepl could be better" leave me thinking "oh, I guess so and so hasn't used nrepl much"</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:54:10.841300</ts>
    <user>Madeleine</user>
    <text>My critique seems very real. I don't want to have to add nRepl to my code.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:54:18.841600</ts>
    <user>Madeleine</user>
    <text>Or any additional middleware</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:54:35.842100</ts>
    <user>Rosaline</user>
    <text>you can add it the way you use any other library</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:55:06.842700</ts>
    <user>Madeleine</user>
    <text>Yes, but that is a burden.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:55:12.843000</ts>
    <user>Madeleine</user>
    <text>Which I don't want.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:55:28.843400</ts>
    <user>Rosaline</user>
    <text>if you want to inject it right in to an existing repl, I don't know if I buy there being a lot of demand for that, but if there is, while nrepl can't do that now, I don't see why reason why it couldn't do that</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:55:49.843800</ts>
    <user>Madeleine</user>
    <text>If it were to do that, it basically becomes unRepl.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:56:33.844600</ts>
    <user>Rosaline</user>
    <text>at one point, and this may predate nrepl in the slime/swank days that is how a lot of the functionality was done, it would inject code in to the clojure process</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:56:53.845200</ts>
    <user>Rosaline</user>
    <text>version that is a nightmare, and making sure extensions work together, etc</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:56:59.845500</ts>
    <user>Marlyn</user>
    <text>what did it use to inject code into the process?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:57:17.846100</ts>
    <user>Rosaline</user>
    <text>the swank-clojure repl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:57:38.846900</ts>
    <user>Rosaline</user>
    <text>so of course there was a backlash, and now I guess we are scheduled for a backlash to the backlash</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:58:50.848200</ts>
    <user>Madeleine</user>
    <text>Ya, so this is where unRepl comes into play as well. Once you say, let's inject things into a socket repl. You have so much freedom, that you can also mess up, and different tools could inject incompatible things. Which is where, you want a framework around it. That's where unRepl goes beyond just the idea of injecting REPL functionality into a socket repl, into an actual library to use.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T14:59:26.848600</ts>
    <user>Madeleine</user>
    <text>That said, nRepl isn't free of that issue also. Different middlewares need to play well with each other.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:00:02.849400</ts>
    <user>Rosaline</user>
    <text>they do, but atleast if you have to included them in a versioned manner in your project.clj or deps.edn or whatever you can try to pin them to something that works together</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:00:28.849800</ts>
    <user>Rosaline</user>
    <text>but if we just have a free for all of all your tooling just evaling whatever</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:01:05.850400</ts>
    <user>Madeleine</user>
    <text>Well, I can't speak of more details, since it is beyond my knowledge. But in my experience, I've had less issues overall with unRepl then nRepl.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:01:22.850700</ts>
    <user>Rosaline</user>
    <text>because unrepl is new and the field is empty</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:01:53.851300</ts>
    <user>Rosaline</user>
    <text>I don't use any middleware with nrepl and have also never had the problem</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:02:09.851700</ts>
    <user>Madeleine</user>
    <text>Yes, possibly. I'm just not sure that it would create a worse field.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:02:29.852400</ts>
    <user>Madeleine</user>
    <text>For tooling, nRepl seems non ideal to me.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:02:40.852900</ts>
    <user>Rosaline</user>
    <text>the idea that unrepl is better because people haven't written terrible tools around it yet, well, just wait</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:03:02.853600</ts>
    <user>Rosaline</user>
    <text>and in a year or two you can move on to the next repl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:03:36.854400</ts>
    <user>Rosaline</user>
    <text>what tooling have you written for unrepl and nrepl?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:03:42.854700</ts>
    <user>Madeleine</user>
    <text>Oh, you want refactoring, add this to your project.clj file. Oh, you don't want the refactor lib deployed to prod, okay, figure out a way to use profiles, or aliases to only depend on it in dev. Oh but now, you actually do want to connect to a prod remote repl, and miss your auto-complete? Well too bad, maybe just include that middleware when going to prod?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:04:18.855000</ts>
    <user>Madeleine</user>
    <text>By the way, I'm not bashing on nRepl.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:04:33.855600</ts>
    <user>Madeleine</user>
    <text>It is great, and does a lot. The functionality is what matters to me.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:04:40.856100</ts>
    <user>Rosaline</user>
    <text>I am not interesting in being the defender of nrepl</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:04:42.856300</ts>
    <user>Madeleine</user>
    <text>Which one gives me a better user experience.</text>
  </message>
  <message conversation_id="559">
    <ts>2019-02-19T15:04:51.856600</ts>
    <user>Elaine</user>
    <text>my generator generates invalid `inst` 's
Is it a know issue?
`clj -Srepro -Sdeps '{:deps {org.clojure/test.check {:mvn/version "0.10.0-alpha3"}}}' -e "(do (require '[clojure.test.check.generators :as gen] '[clojure.spec.alpha :as s]) (gen/generate (gen/vector (s/gen inst?)) 120 6))"`
`[#inst "1970-01-01T01:24:38.462-00:00" #inst "1969-12-06T11:54:24.666-00:00" #inst "820499-07-18T05:28:23.398-00:00" #inst "1969-08-08T01:04:53.430-00:00" #inst "1970-01-01T00:00:00.000-00:00" #inst "1970-01-01T00:00:00.001-00:00"]`
The `3` one: `#inst "820499-07-18T05:28:23.398-00:00"` the reader can read it.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:05:08.857000</ts>
    <user>Rosaline</user>
    <text>I take issue with people making bad comparisons to bolster their preferred solution</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:05:25.857300</ts>
    <user>Rosaline</user>
    <text>I get it, you like whatever, everyone likes things</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:06:11.858300</ts>
    <user>Madeleine</user>
    <text>Well, I'm not feeling like I'm making bad comparisons. I'm only stating a difference, which I think is not mistaken. nRepl requires hard dependencies to it and its middlewares. UnRepl does not.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:07:46.859300</ts>
    <user>Madeleine</user>
    <text>And others seem to say that nRepl handles input and output in a way that makes certain code not behave normally. I can't speak to that fact. Maybe nRepl is handling all that correctly now, so it isn't an issue anymore.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:09:10.860600</ts>
    <user>Madeleine</user>
    <text>Finally, I feel neither nRepl nor pRepl can allow for streaming data. So there use case suffers when you need to return gigantic results. Obviously, no tools needs this as of yet. But I like that UnRepl doesn't limit that, because the tool could choose its own mechanism.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:10:11.861000</ts>
    <user>Madeleine</user>
    <text>Or might be more fair for me to say, limited streaming capabilities</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:12:02.861500</ts>
    <user>Madeleine</user>
    <text>I'm not totally sure about that last one though. I might be wrong about both nRepl and pRepl in that regards, I admit.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:14:16.862600</ts>
    <user>Madeleine</user>
    <text>I also understand that, none of these might seem like good enough differentiator to warrant splitting the REPL ecosystem in three. And ya, maybe that'll end up worst, now having some tools use nRepl, others pRepl, and some more unRepl.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:15:04.863300</ts>
    <user>Madeleine</user>
    <text>Anyways, I just wanted to understand where pRepl differentiated itself from nRepl, or unRepl. So thanks everyone for helping me understand that better.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:16:06.863900</ts>
    <user>Jasmine</user>
    <text>not a known issue, file a jira</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:21:04.865000</ts>
    <user>Vernia</user>
    <text>nrepl can “stream” evaluation results over one or more messages since 0.6, and it was always possible with middleware (cider’s pretty printing middleware has done that for a long time). So you can interrupt an evaluation while printing a large (or infinite) result</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:25:06.867600</ts>
    <user>Madeleine</user>
    <text>Hey thanks for that piece of info &lt;@Vernia&gt; I know you've been hard at work on the cider orchard and nRepl. I love all the improvements being done. And actually agree with &lt;@Ingrid&gt; choice to stick with nRepl and double down. Lots of good stuff uses it, and it makes sense to just keep improving and making better what we already have.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:26:48.869000</ts>
    <user>Vernia</user>
    <text>I think it’s a good thing if there are other REPL implementations tbh, tooling ecosystems can be diverse without being fragmented. If nrepl makes tradeoffs that dont make sense in some circumstances (i.e. how it handles `*in*` / `*out*`) then we _should_ have other options</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:38:27.869400</ts>
    <user>Vernia</user>
    <text>Would you really rather inject some tooling code into prod than include it as a normal dependency though?</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:40:06.869600</ts>
    <user>Vernia</user>
    <text>I agree that sideloading/upgrading is a cool feature but having to add a dep or two surely isn’t a blocker. lein and boot bundle nrepl anyway :slightly_smiling_face:</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:48:01.870400</ts>
    <user>Celestine</user>
    <text>I think once the nREPL clients can side-load the `nrepl` dependency over a Socket REPL or pREPL, no one will really care about the differences.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:48:42.871200</ts>
    <user>Celestine</user>
    <text>It'll just become more and more common to start from a simple Socket REPL or pREPL, initiated by Clojure itself based on JVM options, and any and all tooling will start from that point and build up.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:50:02.872700</ts>
    <user>Celestine</user>
    <text>For me, that's the main benefit: you can start an arbitrary JVM process (that contains Clojure), using JVM options to start a basic REPL, and then connect to that process from any editor, command-line tool, whatever, using whatever set of tooling features you like best.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:50:39.873300</ts>
    <user>Fredda</user>
    <text>WRT nrepl to a cljs target, interrupt doesn't actually work.</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:56:26.874900</ts>
    <user>Vernia</user>
    <text>That depends on which cljs repl you’re using – e.g. Nashorn handles interruption how you’d expect since it’s in the same runtime. Any kind of browser or foreign runtime and it gets complicated</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T15:57:04.875100</ts>
    <user>Fredda</user>
    <text>aye</text>
  </message>
  <message conversation_id="558">
    <ts>2019-02-19T16:01:02.875200</ts>
    <user>Elaine</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-2486&gt;</text>
  </message>
  <message conversation_id="560">
    <ts>2019-02-19T16:15:29.878400</ts>
    <user>Rosaline</user>
    <text>I spent lunch thinking about streams vs. messages, and it seems like what differentiates nrepl and socket repl/prepl in that regard is, nrepl has different message types for "user input" and "forms to evaluate input" where as for socket repl/prepl there is effectively one "input" message type for both</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:28:05.878800</ts>
    <user>Ferne</user>
    <text>are there any libraries that modify clojure.test output for exceptions to also show the `ex-data`?</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:30:06.879500</ts>
    <user>Jasmine</user>
    <text>clojure 1.10 does now I think</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:30:33.879900</ts>
    <user>Jasmine</user>
    <text>yeah, that was CLJ-1209</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:30:47.880200</ts>
    <user>Ferne</user>
    <text>does it print _everything_?</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:30:52.880500</ts>
    <user>Ferne</user>
    <text>is it pretty printed?</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:31:00.881000</ts>
    <user>Ferne</user>
    <text>`*print-length*`?</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:31:11.881500</ts>
    <user>Jasmine</user>
    <text>what do I look like, a go-try-it-machine?</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:31:12.881600</ts>
    <user>Ariel</user>
    <text>Dear Clojurists, any recommendations for DynamoDB API's?
So far, Faraday &lt;https://github.com/ptaoussanis/faraday&gt; looks the most promising, even though last commit was on 2017 :thinking_face:</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:31:56.882600</ts>
    <user>Jasmine</user>
    <text>you could use the new cognitect-labs aws-api</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:32:11.883000</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/cognitect-labs/aws-api&gt;</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:32:13.883200</ts>
    <user>Ariel</user>
    <text>thanks &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:32:25.883500</ts>
    <user>Ariel</user>
    <text>I will give it a shot</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:32:34.883900</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/cognitect-labs/aws-api/blob/master/examples/dynamodb_examples.clj&gt;</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:34:14.885500</ts>
    <user>Rosaline</user>
    <text>I've used faraday a little, ended up ripping it of a project in favor of the java sdk (and ultimately getting rid of dynamo altogether and the deployment target changed). faraday was a little too magic for my taste, if you try and do anything actually database like with dynamo vs. just using it as a key value store, a lot of the decisions faraday makes with regards to serialization will bite you</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:36:36.886100</ts>
    <user>Jasmine</user>
    <text>aws-api doesn't use java sdk, just makes web calls, so it's much lighter weight</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:37:03.886500</ts>
    <user>Rosaline</user>
    <text>yeah, that example looks great</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:40:07.888000</ts>
    <user>Rosaline</user>
    <text>working with the java sdk is also frustrating because you can tell it is all json under the hood but you have to build all these java objects, which the aws-api stuff avoids</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:42:28.888700</ts>
    <user>Jasmine</user>
    <text>what, you don't like needless data -&amp;gt; object -&amp;gt; data transformations?</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T16:46:15.889700</ts>
    <user>Ferne</user>
    <text>I first parsed that as "needless data" -&amp;gt; "object" -&amp;gt; "data transformations" and that was much weirder</text>
  </message>
  <message conversation_id="562">
    <ts>2019-02-19T16:51:25.890000</ts>
    <user>Dann</user>
    <text>that's like the spring module for monads right?</text>
  </message>
  <message conversation_id="561">
    <ts>2019-02-19T17:19:12.890900</ts>
    <user>Herlinda</user>
    <text>&lt;@Eugena&gt; Luckily you don't have to try to chain `property` calls together as they mutate the underlying traversal object. Something like
```(defn add-properties
  [traversal m]
  (doseq [[k v] m]
    (o/property traversal k v))
  traversal)``` will work. That saves you from a fairly nasty macro that I didn't enjoy trying to write</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:19:55.891200</ts>
    <user>Herlinda</user>
    <text>For once I was happy with mutable state :man-shrugging:</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:22:15.892400</ts>
    <user>Kirstin</user>
    <text>Is there a way to expose an nrepl port (remote) to cider for a clj/deps instantiated repl?</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:23:40.892700</ts>
    <user>Ferne</user>
    <text>ssh port forwarding?</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:24:45.893400</ts>
    <user>Rosaline</user>
    <text>there is a lot to unpack there</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:24:47.893600</ts>
    <user>Meagan</user>
    <text>&lt;@Kirstin&gt; are you asking how to use CIDER to connect to a remote REPL, or how to setup your project to include nREPL</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:24:57.893800</ts>
    <user>Rosaline</user>
    <text>what is a clj/deps instantiated repl?</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:25:31.895100</ts>
    <user>Rosaline</user>
    <text>the clojure.main repl? the socket repl? a nrepl server in your code?</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:25:42.895500</ts>
    <user>Kirstin</user>
    <text>&lt;@Meagan&gt; the former. I know how to do it generally just not for a repl started via `clj` (with a backing deps.edn)</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:26:10.896400</ts>
    <user>Meagan</user>
    <text>`M-x cider-connect` or something to that effect</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:26:12.896900</ts>
    <user>Kirstin</user>
    <text>&lt;@Rosaline&gt; it’s literally what you get if you just run the ‘clj` executable </text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:26:38.898200</ts>
    <user>Kirstin</user>
    <text>I know how to do it on the cider/emacs side. But doesn’t the repl server have to somehow include nrepl?</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:26:54.898700</ts>
    <user>Meagan</user>
    <text>oh, okay, so you meant the latter</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:26:54.898800</ts>
    <user>Rosaline</user>
    <text>the old nrepl project has a great readme that explains how to embed an nrepl server</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:27:21.899400</ts>
    <user>Rosaline</user>
    <text>the new project has moved it all in to some fancy docs site that doesn't work without javascript</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:27:38.899600</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/clojure/tools.nrepl#embedding-nrepl-starting-a-server&gt;</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:28:33.900300</ts>
    <user>Kirstin</user>
    <text>So no one has made this automatic as it is for Leiningen?</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:28:34.900400</ts>
    <user>Rosaline</user>
    <text>&lt;https://nrepl.org/nrepl/0.6.0/usage/server.html&gt;</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:28:57.900600</ts>
    <user>Becki</user>
    <text>```
    (nrepl-server/start-server :bind "0.0.0.0" :port nrepl-port
                               :handler cider-nrepl-handler)
```</text>
  </message>
  <message conversation_id="564">
    <ts>2019-02-19T17:29:17.901000</ts>
    <user>Kirstin</user>
    <text>&lt;@Becki&gt; thx! :+1::skin-tone-2:</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:29:29.901300</ts>
    <user>Becki</user>
    <text>i did this about two hours ago at my new job :slightly_smiling_face:</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:29:52.901600</ts>
    <user>Kirstin</user>
    <text>Good timing lol</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:30:25.901800</ts>
    <user>Madeleine</user>
    <text>`clj -Sdeps '{:deps {nrepl/nrepl {:mvn/version "0.5.3"}}}' -m nrepl.cmdline`</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:30:40.902000</ts>
    <user>Madeleine</user>
    <text>&lt;https://nrepl.org/nrepl/usage/server.html#_using_clojure_cli_tools&gt;</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:35:27.902200</ts>
    <user>Sixta</user>
    <text>Sorry, my fault! </text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:35:52.902400</ts>
    <user>Madeleine</user>
    <text>I would actually yes.</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:35:55.902600</ts>
    <user>Sixta</user>
    <text>Although I expected antora not to be js dependent, I might report this upstream </text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:36:36.902800</ts>
    <user>Madeleine</user>
    <text>Normally my flow is, have issue, ssh to prod host, start a second instance of my app with socket.repl flag. Connect to REPL and debug.</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:38:29.903000</ts>
    <user>Madeleine</user>
    <text>Well, actually, I start a second instance into clojure.main to be more precise. And then I use unRepl to enhance the clojure.main repl to support all kinds of cool features.</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:38:59.903200</ts>
    <user>Madeleine</user>
    <text>That bypasses my server from instantiating, and thus avoids binding to an existing port, as well as make sure it is not serving traffic</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T17:40:30.903400</ts>
    <user>Madeleine</user>
    <text>I don't think the dependencies are a huge ordeal. But, its a pain point. Especially to newcomers. There's a reason cider-jack-in choose to inject them into lein.</text>
  </message>
  <message conversation_id="563">
    <ts>2019-02-19T18:37:35.904500</ts>
    <user>Kirstin</user>
    <text>&lt;@Madeleine&gt; that's what i was looking for. thx!</text>
  </message>
  <message conversation_id="565">
    <ts>2019-02-19T18:42:49.905800</ts>
    <user>Celestine</user>
    <text>That (and a whole lot more) is in my `.clojure/deps.edn` file &lt;@Kirstin&gt; &lt;https://github.com/seancorfield/dot-clojure/blob/master/deps.edn#L47&gt; as some inspiration of what you can do with CLI / `deps.edn`</text>
  </message>
  <message conversation_id="565">
    <ts>2019-02-19T18:43:45.906000</ts>
    <user>Kirstin</user>
    <text>cool, thx</text>
  </message>
  <message conversation_id="565">
    <ts>2019-02-19T18:47:29.906200</ts>
    <user>Kirstin</user>
    <text>what does your `clj` invocation to utilize the `main-opts` look like?</text>
  </message>
  <message conversation_id="565">
    <ts>2019-02-19T18:47:47.906400</ts>
    <user>Kirstin</user>
    <text>is it just: `clj -R:nREPL` ?</text>
  </message>
  <message conversation_id="566">
    <ts>2019-02-19T19:35:10.906600</ts>
    <user>Celestine</user>
    <text>I pretty much just use `-A` for everything -- so for aliases where I might want just the dependencies sometimes and also the main opts other times, I tend to break them into two aliases. Hence `-A:test:runner` for example, and the ability to combine the REBL aliases with others to add dependencies, start a Socket REPL Server, and so on.</text>
  </message>
  <message conversation_id="565">
    <ts>2019-02-19T19:51:30.907400</ts>
    <user>Kirstin</user>
    <text>Hmm, I’ll have to learn about that. My clj usage is rather shallow at this point </text>
  </message>
  <message conversation_id="566">
    <ts>2019-02-19T20:52:29.907700</ts>
    <user>Celestine</user>
    <text>Happy to answer any questions -- we switched over from Boot to CLI / `deps.edn` completely last year, after being on Boot for three years (we were on Leiningen for four years before that). Feel free to DM me about it.</text>
  </message>
  <message conversation_id="565">
    <ts>2019-02-19T21:01:52.908100</ts>
    <user>Kirstin</user>
    <text>:+1::skin-tone-2:Thanks!</text>
  </message>
  <message conversation_id="567">
    <ts>2019-02-19T22:36:05.909900</ts>
    <user>Nigel</user>
    <text>On a lein of  2.9.0 on Java 1.8 and a cider/nrepl of 0.21, I am unable to ctrl-D to interrupt infinite loops. Anyone else see this? It was perfectly fine until 0.20</text>
  </message>
  <message conversation_id="567">
    <ts>2019-02-19T22:45:16.910300</ts>
    <user>Becki</user>
    <text>can you open an issue with a simple repro? I understood it was supposed to be better in this release</text>
  </message>
  <message conversation_id="567">
    <ts>2019-02-19T22:45:23.910600</ts>
    <user>Becki</user>
    <text>also &lt;#C0617A8PQ|cider&gt; might be a good place to discuss</text>
  </message>
  <message conversation_id="568">
    <ts>2019-02-19T23:50:45.911600</ts>
    <user>Kirsten</user>
    <text>How do I provide the missing arg?  `(instance?  ?  (int-array [1 2 3 4 5]))`</text>
  </message>
  <message conversation_id="568">
    <ts>2019-02-20T00:08:03.912400</ts>
    <user>Jasmine</user>
    <text>`(Class/forName "[I")`</text>
  </message>
  <message conversation_id="567">
    <ts>2019-02-20T09:29:13.000900</ts>
    <user>Becki</user>
    <text>anyone know of a way to programmatically upgrade lein that skips the confirm? i'm doing `yes | lein upgrade 2.9.0` but i once made a 3GB file this way so i'd prefer a flag if it was available</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T10:49:37.002000</ts>
    <user>Darcel</user>
    <text>Is there a way to call a static method from native binary compiled via graalvm native-image command?</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T10:59:49.005500</ts>
    <user>Laurene</user>
    <text>Can anybody provide a little assistance please? I have this function
```(defn color
  [r g b]
  (java.awt.Color. r g b))```
that wraps the java.awt.Color constructor.

When I use the function like this `(color 255 255 255)`, this `(java.awt.Color. 255 255 255)` and this `(java.awt.Color. 1.0 1.0 1.0)` it works, but not `(color 1.0 1.0 1.0)`

It throws an exception `IllegalArgument ... No matching ctor found for class java.awt.Color`</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:00:11.006000</ts>
    <user>Laurene</user>
    <text>But when calling directly the constructor it works, any idea how to deal with it?</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:01:03.007300</ts>
    <user>Marlyn</user>
    <text>turn on reflection warnings and you'll see that your call inside the body of that function is reflective.</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:01:31.008000</ts>
    <user>Marlyn</user>
    <text>you'll need to hint either the args to the function or the args to the constructor (both are not necessary)</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:02:19.009400</ts>
    <user>Marlyn</user>
    <text>&lt;https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/Color.html&gt;
there are two constructors and clojure can't tell your intent statically</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:03:40.011000</ts>
    <user>Meagan</user>
    <text>interesting. how would you make the `color` function polymorphic (like the Java constructor is)?</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:03:49.011200</ts>
    <user>Laurene</user>
    <text>I thought I could use the dynamism of clojure to have both constructor wrapped in the same function.
And I thought I can't have multiple definition of the same arity? Like how to differentiate one constructor from the other? (appart from creating two functions)</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:04:07.011600</ts>
    <user>Laurene</user>
    <text>```(defn color
 ([r g b]
  (java.awt.Color. r g b))
 ([rf gf bf]
   (java.awt.Color. rf gf bf)))
```
I cant do that can I?</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:06:58.013800</ts>
    <user>Laurene</user>
    <text>nor
```(defn color
  ([^long r ^long g ^long b]
   (java.awt.Color. r g b))
  ([^double rf ^double gf ^double bf]
   (java.awt.Color. rf gf bf)))
```</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:07:19.014300</ts>
    <user>Lemuel</user>
    <text>&lt;@Laurene&gt; no, but you can do (if (double? rf) (java.awt.Color ^double rf ^double gf ^double bf) (java.awt.Color. ^int rf ...)))</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:07:54.015200</ts>
    <user>Lemuel</user>
    <text>You are asking Clojure to make a decision at runtime, in any case, but it doesn't know how.</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:08:04.015500</ts>
    <user>Laurene</user>
    <text>&lt;@Lemuel&gt; oh I see, doing runtime type checking to select the right constructor</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:08:53.015800</ts>
    <user>Laurene</user>
    <text>Thanks, didn't thougt about that</text>
  </message>
  <message conversation_id="569">
    <ts>2019-02-20T11:10:02.016500</ts>
    <user>Lemuel</user>
    <text>&lt;@Darcel&gt; as long as it's not reflective, or you've configured reflection for that class, it should work.</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:14:46.019300</ts>
    <user>Laurene</user>
    <text>Hey i'm back with question about wrapping the `java.awt.Color constructor`</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:14:56.019500</ts>
    <user>Laurene</user>
    <text>```(defn color
  [r g b]
   (cond
     (instance? java.awt.color.ColorSpace r)
       (let [cspace r
             components g
             alpha b]
         (java.awt.Color. ^java.awt.color.ColorSpace cspace (float-array components) alpha))
     (float? r)
       (java.awt.Color. ^double r ^double g ^double b)
     :default
       (java.awt.Color. ^long r ^long g ^long b))```</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:15:50.020400</ts>
    <user>Laurene</user>
    <text>In the case with the ColorSpace parameter, I can't make it work as I believe I need to add typehint but I don't know how</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:17:29.021200</ts>
    <user>Laurene</user>
    <text>I try to use it like this
```
(defn get-components
  ([^java.awt.Color color]
    (vec (.getComponents color nil)))
  ([^java.awt.Color color comp-array]
    (vec (.getComponents color (float-array comp-array))))
  ([^java.awt.Color color cspace comp-array]
    (vec (.getComponents color cspace (float-array comp-array)))))
(def cspace (java.awt.color.ColorSpace/getInstance  java.awt.color.ColorSpace/CS_sRGB))
(construct-color cspace (get-components white) 1.0)
```</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:17:59.021800</ts>
    <user>Laurene</user>
    <text>and `white` is defined as `(def white  java.awt.Color/white)`</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:18:36.022400</ts>
    <user>Laurene</user>
    <text>When I try to construt the Color, I het the error:
```(construct-color cspace (get-components white) 1.0)
Execution error (IllegalArgumentException) at joy-of-clojure-exo.clj-awt.color/construct-color (color.clj:61).
No matching ctor found for class java.awt.Color```</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:19:35.023200</ts>
    <user>Laurene</user>
    <text>It's kind of the same error I got earlier (&lt;https://clojurians.slack.com/archives/C03S1KBA2/p1550678389005500&gt;), and the fix was to add more typehint</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:20:17.024200</ts>
    <user>Laurene</user>
    <text>Here I add `^java.awt.color.ColorSpace cspace` and I thought it was enough, but apparently not, any idea?</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:22:16.025600</ts>
    <user>Celestine</user>
    <text>`(java.awt.Color. (float r) (float g) (float b))` should work. By default, Clojure uses `Double` and `Long` only (boxed) and you need `float` primitives here.</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:23:43.026200</ts>
    <user>Rosaline</user>
    <text>the error mentions construct-color, which you haven't shared the source of</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:24:23.027000</ts>
    <user>Rosaline</user>
    <text>my guess is you switched to calling that function color, and then didn't update the calling code to call color instead of construct-color</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:24:33.027300</ts>
    <user>Laurene</user>
    <text>how sorry I renamed color to construct-color in between..</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:24:56.028000</ts>
    <user>Laurene</user>
    <text>But the error still stand, but adding the suggestion of seancorfield helps!</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:25:23.028600</ts>
    <user>Laurene</user>
    <text>wrapping `alpha` in `(float alpha)` resolve the problem</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:26:07.029600</ts>
    <user>Celestine</user>
    <text>`java.awt.Color` has seven constructors and three of them take three arguments so you need to provide assistance so the correct constructor is selected.</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:28:01.030600</ts>
    <user>Celestine</user>
    <text>In particular `(java.awt.Color. 1 1 1)` and `(java.awt.Color. 1.0 1.0 1.0)` produce completely different colors (the first is very dark gray, the second is white).</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:28:37.031500</ts>
    <user>Laurene</user>
    <text>yes eraserhd provided assistance with that &lt;https://clojurians.slack.com/archives/C03S1KBA2/p1550678839014300&gt;</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:28:44.031800</ts>
    <user>Celestine</user>
    <text>Your Clojure code will need to distinguish between which version you actually need based on something other than just three arguments.</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:29:45.032800</ts>
    <user>Laurene</user>
    <text>He told me that I could do a `cond` with typecheking as predicate to differentiate the constructor, and add typehint to help the compiler</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:30:13.033200</ts>
    <user>Laurene</user>
    <text>the result is as follow
```(defn construct-color
  "Creates either:
  - (int) an opaque sRGB color with the specified combined RGB value consisting of the red component in bits 16-23,
    the green component in bits 8-15, and the blue component in bits 0-7
  - (int, boolean) an sRGB color with the specified combined RGBA value consisting of the alpha component in bits 24-31,
    the red component in bits 16-23, the green component in bits 8-15, and the blue component in bits 0-7
  - (float, float, float) an opaque sRGB color with the specified red, green, and blue values in the range (0.0 - 1.0)
  - (int, int, int) an opaque sRGB color with the specified red, green, and blue values in the range (0 - 255)
  - (float, float, float, float) an sRGB color with the specified red, green, blue, and alpha values in the range (0.0 - 1.0)
  - (int, int, int, int) an sRGB color with the specified red, green, blue, and alpha values in the range (0 - 255)
  - (ColorSpace, float[], float) a color in the specified ColorSpace with the color components specified in the float array and the specified alpha
  (depending on the number of arguments and their types)."
  ([rgb]
   (java.awt.Color. rgb))
  ([rgba has-alpha]
   (java.awt.Color. rgba has-alpha))
  ([r g b]
   (cond
     (instance? java.awt.color.ColorSpace r)
       (let [cspace r
             components g
             alpha b]
         (java.awt.Color. ^java.awt.color.ColorSpace cspace (float-array components) (float alpha)))
     (float? r)
       (java.awt.Color. ^double r ^double g ^double b)
     :default
       (java.awt.Color. ^long r ^long g ^long b)))
  ([r g b a]
   (if (double? r)
     (java.awt.Color. ^double r ^double g ^double b ^double a)
     (java.awt.Color. ^long r ^long g ^long b ^long a))))```</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:30:48.033800</ts>
    <user>Laurene</user>
    <text>But i need to remove `^double` and replace them with `(float x)`</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:31:01.034100</ts>
    <user>Laurene</user>
    <text>Thanks &lt;@Celestine&gt;</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:32:26.034500</ts>
    <user>Marlyn</user>
    <text>your function arity that takes `[r g b]` isn't typical</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:32:48.035100</ts>
    <user>Marlyn</user>
    <text>it should be a different function IMHO that takes the colorspace arguments</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:33:07.035900</ts>
    <user>Marlyn</user>
    <text>being extremely forgiving with arguments leads to confusion</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:33:14.036100</ts>
    <user>Celestine</user>
    <text>I agree. I would use different function names to avoid the ambiguity that Java creates.</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:35:52.038700</ts>
    <user>Celestine</user>
    <text>The problem you have with the above is if you accidentally call `construct-color` with a mix of `Long` and `Double` arguments now -- you're internally dispatching on only the type of the first argument. So `(construct-color 1 1.0 1)` and `(construct-color 1.0 1 1)` are going to create very different colors...</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:41:43.039700</ts>
    <user>Laurene</user>
    <text>&lt;@Celestine&gt; and &lt;@Marlyn&gt; so create function with differents name to call the same constructor but with different type?</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:44:26.041600</ts>
    <user>Laurene</user>
    <text>`(defn construct-float-color [r g b] (java.awt.Color. (float r) (float g) (float b))` and `(defn construct-int-color [r g b] (java.awt.Color. (int r) (int g) (int b))` etc?</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T13:47:32.042200</ts>
    <user>Laurene</user>
    <text>Also I have never used `spec` but would it help in that case?</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T14:46:25.042700</ts>
    <user>Celestine</user>
    <text>I would give them better names more aligned with the problem domain but, yes.</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T14:47:27.043600</ts>
    <user>Celestine</user>
    <text>I'm not sure about the use of `clojure.spec` here since I don't know much about your problem domain (it's clearly more than just writing a very thin wrapper around a Java API?).</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T14:51:24.045200</ts>
    <user>Celestine</user>
    <text>(I would start with looking at how you need to create RGB(A) colors in whatever code you're writing and only create wrapper functions for those -- and even then it might not be worth the effort: it's idiomatic Clojure to just use Java interop directly for a lot of things)</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T14:53:44.046100</ts>
    <user>Laurene</user>
    <text>Right now it's only wrapping java.awt, then I use it to create images, just a toy project to learn Java interop</text>
  </message>
  <message conversation_id="570">
    <ts>2019-02-20T16:09:49.049200</ts>
    <user>Celestine</user>
    <text>&lt;@Laurene&gt; I'd probably just `:import (java.awt Color)` and invoke `(Color. ...)` directly as needed rather than trying to wrap it in Clojure functions. There are other things in AWT that would likely benefit from wrapper functions, and probably higher-level abstractions you could build.</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T16:18:39.049500</ts>
    <user>Clarine</user>
    <text>How do I use the clojure slim jar in a project? what should my coordinate look like?</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T16:23:15.050100</ts>
    <user>Marlyn</user>
    <text>why do you want to use it &lt;@Clarine&gt;?</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T16:24:02.050400</ts>
    <user>Clarine</user>
    <text>I want to use a non-directly linked version of clojure to test out some spec stuff.</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T16:26:47.050600</ts>
    <user>Marlyn</user>
    <text>ah</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T16:28:52.051300</ts>
    <user>Marlyn</user>
    <text>need the `:classifier "slim"` in lein</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T16:29:50.051800</ts>
    <user>Jasmine</user>
    <text>`org.clojure/clojure$slim` in deps</text>
  </message>
  <message conversation_id="572">
    <ts>2019-02-20T16:46:08.052000</ts>
    <user>Clarine</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:07:37.052100</ts>
    <user>Laurene</user>
    <text>Could you elaborate a bit? I'm still fairly new to both Java (and especially java.awt) and Clojure, and I'd love to learn about Java interop, and writing wrapper while also doing something that could benefits others</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:10:27.052600</ts>
    <user>Sixta</user>
    <text>Has anyone ever run into a case of the global-hierarchy being reset/cleared?</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:10:55.053200</ts>
    <user>Sixta</user>
    <text>Requiring a namespace which transitively loads a lot of things is causing it, but I can't see any code in my whole jar which calls `underive` or `global-hierarchy`</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T17:18:05.053700</ts>
    <user>Jasmine</user>
    <text>different classloader?</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:23:18.054300</ts>
    <user>Sixta</user>
    <text>it's the same repl, so unless my clojure is changing inside the repl, I don't think so</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T17:25:08.055400</ts>
    <user>Jasmine</user>
    <text>just telling you one way that could happen...</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T17:25:32.055700</ts>
    <user>Jasmine</user>
    <text>the global-hierarchy is a var - you could attach a watcher to it</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:28:41.056100</ts>
    <user>Sixta</user>
    <text>I did. All I see is it going clear, not something inserting itself.</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:30:42.056600</ts>
    <user>Sixta</user>
    <text>I think I have managed to manually whittle it down, with a little luck, the problem was high in the list.</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:32:34.056900</ts>
    <user>Sixta</user>
    <text>it appears to be something between manifold &amp;amp; core.async</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:32:43.057200</ts>
    <user>Sixta</user>
    <text>and maybe something else, not sure. blugh.</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T17:39:52.057900</ts>
    <user>Jasmine</user>
    <text>are you seeing something weird inside a go block?</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T17:41:34.058800</ts>
    <user>Jasmine</user>
    <text>did you have your watcher dump its stack when it goes clear?</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T17:41:47.059100</ts>
    <user>Jasmine</user>
    <text>I think the watchers are fired in same thread doing the alter</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:43:21.061300</ts>
    <user>Sixta</user>
    <text>Oh really? I didn't know that, I'll print the stack.

I don't think it's inside a go block, just that requiring manifold.stream in my repl causes the global hierarchy to reset</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:43:59.062200</ts>
    <user>Sixta</user>
    <text>Although I'm afk now, so it will be some time before I can try the stack thing, but that sounds perfect.</text>
  </message>
  <message conversation_id="573">
    <ts>2019-02-20T17:51:33.062500</ts>
    <user>Rosaline</user>
    <text>are you sure you aren't loading clojure.core twice somehow?</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T18:02:17.062800</ts>
    <user>Celestine</user>
    <text>It's hard to be specific for this case, as I'm not familiar with AWT, but in general writing a wrapper that has close to a 1:1 mapping from Clojure functions to Java methods doesn't add much value -- it's just syntactic sugar.</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T18:04:42.063000</ts>
    <user>Celestine</user>
    <text>A good example of a higher-level wrapper is Seesaw (a wrapper for Swing). &lt;https://gist.github.com/daveray/1441520&gt;</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T18:05:26.063200</ts>
    <user>Celestine</user>
    <text>It tries to map Swing operations to a simple set of primitives with data describing things.</text>
  </message>
  <message conversation_id="571">
    <ts>2019-02-20T18:07:21.063400</ts>
    <user>Laurene</user>
    <text>Thanks I'll take a look at that, thanks very much!</text>
  </message>
  <message conversation_id="574">
    <ts>2019-02-20T23:31:53.064400</ts>
    <user>Kirsten</user>
    <text>is `with-open`  clojure's TWR version?</text>
  </message>
  <message conversation_id="574">
    <ts>2019-02-20T23:44:01.065400</ts>
    <user>Rosaline</user>
    <text>more or less, with-open predates try with resources by some number of years</text>
  </message>
  <message conversation_id="574">
    <ts>2019-02-20T23:44:29.065800</ts>
    <user>Rosaline</user>
    <text>so with-open predates autocloseable</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T01:10:21.068800</ts>
    <user>Sixta</user>
    <text>I think that you're right hiredman, doing a require of clojure.core is causing the global hierarchy to reset. I think one of the manifold namespaces aliases clojure.core, so that's why the finger is pointing there.

Why would clojure.core be loaded twice?!</text>
  </message>
  <message conversation_id="574">
    <ts>2019-02-21T01:29:37.069200</ts>
    <user>Jasmine</user>
    <text>shouldn't be</text>
  </message>
  <message conversation_id="574">
    <ts>2019-02-21T01:29:50.069500</ts>
    <user>Jasmine</user>
    <text>it's loaded on RT initialization and should never be loaded again after that</text>
  </message>
  <message conversation_id="574">
    <ts>2019-02-21T01:30:49.070300</ts>
    <user>Jasmine</user>
    <text>(unless you're in an isolated classloader chain)</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T01:44:10.071400</ts>
    <user>Sixta</user>
    <text>I'm using onejar class loader. So I think I will need to figure out the details.</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T01:48:08.071800</ts>
    <user>Jasmine</user>
    <text>that seems like an important detail you omitted :)</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T01:52:09.073400</ts>
    <user>Sixta</user>
    <text>You're right, I was a bit hyper focused on "require is causing my program to break" and was a bit lost.</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T01:53:21.073900</ts>
    <user>Sixta</user>
    <text>I'm aware of &lt;https://dev.clojure.org/jira/browse/CLJ-971&gt; and I'm setting the factory</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T01:55:05.074500</ts>
    <user>Sixta</user>
    <text>But I'm not aware of any other things I need to do for clojure to work with onejar.</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T02:04:45.075800</ts>
    <user>Jasmine</user>
    <text>you could collect info about the classloader chain at points where things look good and bad and compare</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T02:05:25.076400</ts>
    <user>Jasmine</user>
    <text>the classloader thing is a hypothesis, so try to prove/disprove</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T02:08:01.077600</ts>
    <user>Sixta</user>
    <text>I have a clojure.main repl in my jar, so this should be easy. How could I collect info about the chain?</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T02:21:46.078200</ts>
    <user>Sixta</user>
    <text>The context class loader is the same before and after requiring clojure, for example.</text>
  </message>
  <message conversation_id="576">
    <ts>2019-02-21T02:57:21.078400</ts>
    <user>Wilfred</user>
    <text>The closest I could get to seems to be this: &lt;https://github.com/dakrone/cheshire/issues/62&gt; (mixing stream and laziness is confusing)…</text>
  </message>
  <message conversation_id="576">
    <ts>2019-02-21T02:59:41.078800</ts>
    <user>Wilfred</user>
    <text>As for the underlying stream itself, look like manifold is a widely supported substrate (you can convert it to other representations, such as core.async, later)… then use the client side of aleph/http-kit to read. (http-kit is old though)</text>
  </message>
  <message conversation_id="576">
    <ts>2019-02-21T03:03:41.079100</ts>
    <user>Wilfred</user>
    <text>(btw… anyone know if there’s activity in this space? my general feeling is that things almost/mostly “work”, but are not as polished as the more mainstream use case)</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T03:12:34.079300</ts>
    <user>Sixta</user>
    <text>If I turn on verbose logging, I can see it searching for clojure__core when I do require</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T03:15:51.079500</ts>
    <user>Sixta</user>
    <text>But I'm a bit confused why it wouldn't be the same as what clojure.main is using, maybe I need to do a custom build of clojure with some logging in.</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T03:43:17.079700</ts>
    <user>Sixta</user>
    <text>Into clojure.main/main I added a print of the context class loader, then I compared it to what I have at the repl, exactly the same:

```
#object[com.simontuffs.onejar.JarClassLoader 0x7a79be86 "com.simontuffs.onejar.JarClassLoader@7a79be86"]
Clojure 1.11.0-master-SNAPSHOT
user=&amp;gt; (.getContextClassLoader (Thread/currentThread))
#object[com.simontuffs.onejar.JarClassLoader 0x7a79be86 "com.simontuffs.onejar.JarClassLoader@7a79be86"]
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T03:46:41.079900</ts>
    <user>Sixta</user>
    <text>```
#object[com.simontuffs.onejar.JarClassLoader 0x7a79be86 "com.simontuffs.onejar.JarClassLoader@7a79be86"]
Clojure 1.11.0-master-SNAPSHOT
user=&amp;gt; (clojure.lang.RT/baseLoader)
#object[clojure.lang.DynamicClassLoader 0xeccaf1b "clojure.lang.DynamicClassLoader@eccaf1b"]
```

clojure.lang.Compiler/LOADER is bound then, but I don't really know what that means?</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T03:46:49.080100</ts>
    <user>Sixta</user>
    <text>(I confirmed the binding)</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T03:49:11.080300</ts>
    <user>Sixta</user>
    <text>Oh, but that isn't too useful anyway:

```
user=&amp;gt; (.getParent @clojure.lang.Compiler/LOADER)
#object[com.simontuffs.onejar.JarClassLoader 0x7a79be86 "com.simontuffs.onejar.JarClassLoader@7a79be86"]
```</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T03:49:53.080500</ts>
    <user>Sixta</user>
    <text>I'm a bit defeated really, I'm going to need some direction on the clojure internals to puzzle out what's going on here I guess.</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T05:58:52.080900</ts>
    <user>Sixta</user>
    <text>I modified doInit so I could check the class loader before `load("clojure/core")` is called, and `com.simontuffs.onejar.JarClassLoader@7a79be86` is the classloader there, and `#object[com.simontuffs.onejar.JarClassLoader 0x7a79be86 "com.simontuffs.onejar.JarClassLoader@7a79be86"]` is the one loaded when clojure.main/repl is running.

I also modified `load` so that I could see which ClassLoader it was using when loading "clojure/core", and I got `com.simontuffs.onejar.JarClassLoader@7a79be86`</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T05:59:03.081100</ts>
    <user>Sixta</user>
    <text>So class loader doesn't seem likely to me. I can't see where the caching is.</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T06:03:19.081300</ts>
    <user>Sixta</user>
    <text>*loaded-libs* doesn't contain clojure.core at the point of me having a REPL...

```
user=&amp;gt; @*1
#{clojure.core.protocols clojure.core.server clojure.core.specs.alpha clojure.edn clojure.instant clojure.java.browse &lt;http://clojure.java.io|clojure.java.io&gt; clojure.java.javadoc clojure.java.shell clojure.main clojure.pprint clojure.repl clojure.spec.alpha clojure.spec.gen.alpha clojure.string clojure.uuid clojure.walk}
```</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T06:13:53.081500</ts>
    <user>Sixta</user>
    <text>Looks like clojure.core is never in loaded-libs:

```
❯ clj                    
Clojure 1.10.0
user=&amp;gt; @@#'clojure.core/*loaded-libs*
#{clojure.core.protocols clojure.core.server clojure.edn clojure.instant clojure.java.browse &lt;http://clojure.java.io|clojure.java.io&gt; clojure.java.javadoc clojure.java.shell clojure.main clojure.pprint clojure.repl clojure.spec.alpha clojure.spec.gen.alpha clojure.string clojure.uuid clojure.walk}
```</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T06:49:21.081700</ts>
    <user>Sixta</user>
    <text>So, I think I'm onto something here. OneJar always returns "0" for the last modified. I have a suspicion this might be because I'm not setting the last modified of the jar itself, and maybe that's what onejar uses.

Anyway, when I use `clj`, this passes as true:

```
	if((classURL != null &amp;amp;&amp;amp;
	    (cljURL == null
	     || lastModified(classURL, classfile) &amp;gt; lastModified(cljURL, scriptfile)))
	   || classURL == null) {
```

However, in my jar lastModified is 0, hence `0 &amp;gt; 0` is false. So we end up going to `	if(!loaded &amp;amp;&amp;amp; cljURL != null) {`  which I'm guessing doesn't look at the same caching path as the first `if` to determine whether the namespace is already loaded or not</text>
  </message>
  <message conversation_id="577">
    <ts>2019-02-21T08:03:59.082600</ts>
    <user>Jasmine</user>
    <text>Isn’t this the same issue as the ticket you linked to earlier?</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:23:12.088500</ts>
    <user>Machelle</user>
    <text>Small rant:

I've had the hardest time working with `deps.edn` over the last few days. Nothing to do with the workflow or the principle - it's the tooling that did for me. Was trying to build an uberjar for a Cloud Foundry deploy - this pretty much means that it needs to have AOT compilation and run with `java -jar uberjar.jar`. I tried using `depstar`, `cambada` and `Pack` as listed on the tools page of the deps wiki.

Depstar doesn't support AOT or a manifest file out of the box and I'm nowhere near skilled enough to work out how to add them in. Both `pack` and `cambada` did not stop building the uberjar - literally, both of them filled the disk up and exited them. Thought it might be the code, but then I try `lein uberjar` and it just worked. Really disappointed - kinda think it'd be worth packaging up the leiningen uberjar code as a separate library?

&amp;lt;/moan&amp;gt; Other than that I'm having a lovely day. :smile:</text>
  </message>
  <message conversation_id="575">
    <ts>2019-02-21T09:24:33.089200</ts>
    <user>Jasmine</user>
    <text>someone was just using lein as a library under deps.edn to call lein stuff so that might be a path</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:24:56.089900</ts>
    <user>Machelle</user>
    <text>That's what I was thinking - who, where, how?! :smile:</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:25:08.090200</ts>
    <user>Jasmine</user>
    <text>having tools be reusable things rather than bound into plugins for a single build tool is generally a great idea imo</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:25:59.091200</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/oakes/full-stack-clj-example&gt;</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:26:05.091400</ts>
    <user>Machelle</user>
    <text>I agree as well - it's _instinctively_ where I want to get to as I've always been put off by Leiningen.</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:27:44.091900</ts>
    <user>Machelle</user>
    <text>Nice: &lt;https://github.com/oakes/full-stack-clj-example/blob/master/prod.clj&gt;</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:28:02.092400</ts>
    <user>Jasmine</user>
    <text>that's from &lt;@Josue&gt; if you have questions for him</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:31:24.093900</ts>
    <user>Machelle</user>
    <text>I like it - makes sense!</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:47:53.094800</ts>
    <user>Josue</user>
    <text>yep i started using this technique in most of my projects. if you want to use other lein commands you can make a multimethod like this &lt;https://github.com/oakes/Nightlight/blob/master/prod.clj&gt;</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T09:53:47.096000</ts>
    <user>Machelle</user>
    <text>Have you considered extracting the pattern out into a library after the fashion of `depstar` or `Pack` - or do you consider it too trivial?</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T10:04:59.097800</ts>
    <user>Josue</user>
    <text>for me i’d rather use it directly and avoid the layer of indirection. i’m ok with a little code duplication. might be an interesting library idea if others want to try it though</text>
  </message>
  <message conversation_id="579">
    <ts>2019-02-21T10:05:08.098100</ts>
    <user>Marlyn</user>
    <text>it's also really easy to AOT with `depstar`, but it's not "baked in"</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T10:08:35.098500</ts>
    <user>Machelle</user>
    <text>could you show me an example?</text>
  </message>
  <message conversation_id="578">
    <ts>2019-02-21T10:08:57.098700</ts>
    <user>Machelle</user>
    <text>(as I liked `depstar` - in that it actually finished building...)</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T11:38:26.102300</ts>
    <user>Ronald</user>
    <text>Is there a way to create a function literal of a Java function? The following does not work:
```
user=&amp;gt; (def func Integer/parseInt)

Syntax error compiling at (form-init730605430373361324.clj:1:1).
Unable to find static field: parseInt in class java.lang.Integer
```
So I've been playing with making Clojure wrapper functions and using those for higher-order needs. Ex:
```
(def parse-int #(Integer/parseInt %))
```</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T11:41:22.103100</ts>
    <user>Cherise</user>
    <text>I don’t think there is one because it’s a static method</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T11:41:27.103400</ts>
    <user>Cherise</user>
    <text>For instance methods you can use `memfn`</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T11:41:40.103800</ts>
    <user>Cherise</user>
    <text>```(map (memfn charAt i) ["fred" "ethel" "lucy"] [1 2 3])
;; =&amp;gt; (\r \h \y)```</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T11:42:02.104000</ts>
    <user>Cherise</user>
    <text>&lt;https://clojure.org/reference/java_interop#_alternative_macro_syntax&gt;</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T11:43:04.104400</ts>
    <user>Ronald</user>
    <text>Ah cool, I hadn't seen `memfn`. Thanks!</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T11:43:49.104600</ts>
    <user>Cherise</user>
    <text>Me neither before I tried to answer your question :wink:</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T11:44:59.105300</ts>
    <user>Ronald</user>
    <text>I had even made it to that Java Interop page before but must have missed it</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T11:58:31.107100</ts>
    <user>Jasmine</user>
    <text>note that memfn introduces reflection so an anonymous literal wrapper is often better</text>
  </message>
  <message conversation_id="581">
    <ts>2019-02-21T11:59:12.107700</ts>
    <user>Ronald</user>
    <text>Interesting. Just because of overhead of the reflection?</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T12:00:53.108100</ts>
    <user>Jasmine</user>
    <text>presumably if you are setting this up, you're going to invoke  it more than once</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T12:02:54.108800</ts>
    <user>Ronald</user>
    <text>I just didn't know that reflection was costly enough to make a difference. But on looking it up, it does appear to be very very slow</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T12:06:32.109400</ts>
    <user>Jasmine</user>
    <text>if you're calling it once, you probably don't care, but if you're calling it a lot, you will</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T12:08:25.109700</ts>
    <user>Ronald</user>
    <text>Got it, thanks</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T12:16:24.110400</ts>
    <user>Marlyn</user>
    <text>memfn can take a hint on the symbol and avoid reflection, no?</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T12:16:55.111000</ts>
    <user>Marlyn</user>
    <text>No one uses memfn in the wild</text>
  </message>
  <message conversation_id="582">
    <ts>2019-02-21T13:15:17.111500</ts>
    <user>Nigel</user>
    <text>Any test runners that can spit out JSON?</text>
  </message>
  <message conversation_id="580">
    <ts>2019-02-21T13:54:28.112100</ts>
    <user>Sixta</user>
    <text>memfn is something I used a lot to implement a datafy thing.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:09:57.118400</ts>
    <user>Wesley</user>
    <text>&lt;@Celestine&gt; or anyone: `tools.cli` will parse e.g. `-for` as `-f -o -r`.  Is there a way to turn this functionality off?  I personally like this GNU behavior, with double-dash for verbose options, but there's also Java convention that uses single-dash for multi-character options.  I'm using a Java lib that does that.  I use `tools.cli` for the options that my code provides, but I don't want to reinvent the wheel for the options that the library provides.  However, this means that if I use `tools.cli` to find errors using `parse-opts`, my code has to distinguish between real errors in option specification on the command line, as opposed to "errors" due to `cli/parse-opts` thinking that the user has provided `-f -o -r`.  I am trying to add code to filter out the Java lib options, but without turning off the single-dash/multi-character expansion, it's very difficult.  (I'm also trying not to simply reinvent tools.cli's parsing.)  Thanks-</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:13:08.119700</ts>
    <user>Wesley</user>
    <text>Or maybe I should look more closely at the tools.cli innards and maybe I can build something from the functions there....</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:14:03.120400</ts>
    <user>Celestine</user>
    <text>&lt;@Wesley&gt; I'm not sure that you could support both styles of options -- it would be ambiguous -- and this is a change that was made explicitly in `tools.cli` to support GNU-style options (prior to me taking the library over).</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:14:54.121400</ts>
    <user>Tammera</user>
    <text>many linux utils take multiple “flags” together</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:14:58.121800</ts>
    <user>Celestine</user>
    <text>So I think my position here is that `tools.cli` supports the GNU behavior by design and will not support the Java convention.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:15:01.122000</ts>
    <user>Tammera</user>
    <text>for example `tar  -xvf`</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:15:23.122600</ts>
    <user>Tammera</user>
    <text>really, Java is the oddball here</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:15:24.122800</ts>
    <user>Celestine</user>
    <text>Yes, that's the "standard" GNU/*nix behavior.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:15:49.123500</ts>
    <user>Celestine</user>
    <text>I agree. And `tools.cli` was changed deliberately in the past to the GNU/*nix behavior :slightly_smiling_face:</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:16:38.124300</ts>
    <user>Wesley</user>
    <text>Right, one couldn't support both in the same application.  But you could have a flag that turns the single-dash/multichar behavior on and off.  But I (doh!) just realized that I can address my problem pretty simply by just requiring that the Java lib options be put after `--` to stop option processing by `tools.cli`.  The lib ignores `--`.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:17:22.125400</ts>
    <user>Celestine</user>
    <text>Ah, OK. So this was just a case where you need to pass _additional command-line options_ directly to an embedded library? I missed that.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:17:26.125500</ts>
    <user>Wesley</user>
    <text>The rationale for turning it off would specifically be compatibility with Java conventions.  But maybe it's not worth the trouble.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:17:48.126000</ts>
    <user>Tammera</user>
    <text>is there a story here btw, Unixes were widespread when Java came about right</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:18:00.126500</ts>
    <user>Wesley</user>
    <text>Oh, sorry.  I didn't explain clearly enough then.  Yes, the library also sees the command line, and ignores options it doesn't know, but processes the ones it does know.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:19:19.127100</ts>
    <user>Wesley</user>
    <text>Maybe it will only be a real problem if the `--` trick isn't enough for a situation.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:22:09.127800</ts>
    <user>Celestine</user>
    <text>I wouldn't expect command-line parsing libraries to be very composable if they're both parsing the same command-line data :slightly_smiling_face:</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:24:18.129200</ts>
    <user>Wesley</user>
    <text>Yah, I know.  It actually works just fine in this case, as long as you ignore misspelled options and that sort of thing.  And I have been misspelling them lately, and then thinking I have a bug. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:24:53.129700</ts>
    <user>Celestine</user>
    <text>This seems to delve into the Java vs GNU argument parsing differences &lt;https://softwareengineering.stackexchange.com/questions/70357/command-line-options-style-posix-or-what&gt;</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:27:30.131400</ts>
    <user>Tammera</user>
    <text>Your google fu is better than mine!</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:27:42.131700</ts>
    <user>Wesley</user>
    <text>Thanks.  That's helpful to read.  I may think about it further and come back with some ideas for tools.cli down the road if I think there's something worth doing that's potentially worth the trouble.  Obviously an isolated use case isn't worth trouble.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:27:48.131800</ts>
    <user>Tammera</user>
    <text>or better filter bubble :stuck_out_tongue:</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:29:17.133000</ts>
    <user>Wesley</user>
    <text>I think this application is unusual in other ways too.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:30:16.133100</ts>
    <user>Wesley</user>
    <text>Yeah.  Well it helps to know that Java is following Posix.  I didn't realize that.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:30:53.133300</ts>
    <user>Wesley</user>
    <text>Oh no that's wrong.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:33:28.133500</ts>
    <user>Tammera</user>
    <text>yeah, X11 style :stuck_out_tongue:</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:39:26.133700</ts>
    <user>Celestine</user>
    <text>My _Bing_ fu :slightly_smiling_face:</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:39:50.133900</ts>
    <user>Celestine</user>
    <text>I haven't used Google for years.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T14:44:20.134100</ts>
    <user>Tammera</user>
    <text>‘google fu’ as in ‘velcro’ :wink:.</text>
  </message>
  <message conversation_id="584">
    <ts>2019-02-21T15:51:30.136900</ts>
    <user>Madeleine</user>
    <text>Quick question about gen-class. The :name value in the doc says it has to be a `package-qualified name of the class to be generated`. Which I assume means it is not a Clojure namespace name, but a Java one. Which means, since that it should not contain hyphens, but underscores instead, since Java doesn't allow for hyphens. Now, here's the thing, it seems that if you put hyphens, it will work, and generate a file with hyphens in the folder and classname, and somehow, that will work from Java as well. What's happening here?</text>
  </message>
  <message conversation_id="584">
    <ts>2019-02-21T15:54:03.138900</ts>
    <user>Madeleine</user>
    <text>For example, the following:
```
(:gen-class :name screening.whirlpool.update-investigation-poller.Main)
```

Will generate the directories: `screening/whirlpool/update-investigation-poller/Main`

And the Main class generated has as its package name: `screening.whirlpool.update-investigation-poller`

But it does: `Util.loadWithClass("screening/whirlpool/poller/update_investigation_poller", Main.class);` in its static initializer.

Yet, somehow, I can use that class fine form Java.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:10:49.139300</ts>
    <user>Dann</user>
    <text>that looks like something accidentally working, at first glance</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:28:11.141100</ts>
    <user>Tammera</user>
    <text>I am trying to check whether some val that implements a protocol via metadata `(satisfies? ...)` that protocol. That sadly doesnt work. then I found &lt;https://dev.clojure.org/jira/browse/CLJ-2426&gt;, and I tried inlining that proposed `satisfies?` function in my code, but also no success.</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:29:50.141300</ts>
    <user>Tammera</user>
    <text>None</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:31:03.142300</ts>
    <user>Marlyn</user>
    <text>the most straightforward solution is to check for the symbol inside the meta, as it does around line 9</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:31:49.143000</ts>
    <user>Tammera</user>
    <text>sorry, which symbol, there are only function names in the meta?</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:32:06.143500</ts>
    <user>Marlyn</user>
    <text>no they're literal symbols inserted -- see line 21</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:32:12.143700</ts>
    <user>Marlyn</user>
    <text>```
`bla-bla == test/bla-bla
```</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:33:00.144900</ts>
    <user>Marlyn</user>
    <text>the function is checking for the existing of the correct symbol within the metadata, on Line 10</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:33:26.145700</ts>
    <user>Marlyn</user>
    <text>I don't think using `satisfies?` is a good idea _in general_</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:33:37.146100</ts>
    <user>Marlyn</user>
    <text>it runs counterproductive with polymorphism</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:33:49.146500</ts>
    <user>Marlyn</user>
    <text>the whole point of protocols is not to care about doing type-tests</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:33:52.146700</ts>
    <user>Marlyn</user>
    <text>_in general_</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:33:58.147000</ts>
    <user>Tammera</user>
    <text>Right, but `(symbol (:var proto))` is `test/BlaFactory`, thats not `test/bla-bla` right?</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:34:23.147700</ts>
    <user>Marlyn</user>
    <text>I didn't read the details, but check for the name of the protocol function, not the protocol var</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:36:50.147900</ts>
    <user>Tammera</user>
    <text>I dont use it as a type test, I use it in s/fdef’s to do some rudimentary argument checking in development. Maybe not the best usecase, but it has found some bugs for me ^^</text>
  </message>
  <message conversation_id="583">
    <ts>2019-02-21T16:45:44.148600</ts>
    <user>Tammera</user>
    <text>hmm I’ll try that. Thanks as always!</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:12:36.153200</ts>
    <user>Lesa</user>
    <text>Hi all - I have a `spec` question. I'm writing a spec describing some JSON that is getting posted to one of our endpoints (which we do not have control over, it is a callback from another system). The callback can be in one of two shapes, depending on if the operation was successful or not. So I have my spec looking essentially like `(s/def ::callback-post (s/or :success ::success-spec :failure ::failure-spec))`. All that is fine and dandy - what I am stuck on, is that the callback has a `success` flag, which will be either `true` or `false`, and I'm not sure of the best way to represent that within the `::success-spec` and `::failure-spec` specs</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:14:35.155200</ts>
    <user>Lesa</user>
    <text>I have a higher level `(s/def ::success (s/org :true true? :false false?))` spec, but without using some manual namespacing I'm not sure how best to specify within the `::success-spec` that `::success` ought to be only `true`</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:15:20.155300</ts>
    <user>Tammera</user>
    <text>First of all, `(s/def ::success boolean?)` ^^</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:15:47.155500</ts>
    <user>Lesa</user>
    <text>yup, that's a :picard-facepalm:</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:16:22.155700</ts>
    <user>Dulcie</user>
    <text>Multi-spec?</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:16:40.155900</ts>
    <user>Dulcie</user>
    <text>&lt;https://clojure.org/guides/spec#_multi_spec&gt;</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:17:08.156100</ts>
    <user>Dulcie</user>
    <text>... where the success field indicates the "type", and hence which spec to use</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:19:07.156400</ts>
    <user>Lesa</user>
    <text>yeah, that looks like it could be the answer, thanks :slightly_smiling_face: I hadn't come across `multi-spec` before</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:19:36.156600</ts>
    <user>Dulcie</user>
    <text>You're the second person I've suggested it to this week. I'm a big fan of it!</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:20:06.156800</ts>
    <user>Tammera</user>
    <text>I used it to do payload validation before, mighty useful</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:20:36.157000</ts>
    <user>Dulcie</user>
    <text>I posted this in &lt;#C1B1BB2Q3|clojure-spec&gt;, it might be useful as an example</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:20:40.157200</ts>
    <user>Dulcie</user>
    <text>```
(s/def ::email string?)
(s/def ::username number?)
(s/def ::request-type #{:change-email :show-username})

(s/def ::change-email-request (s/keys :req [::email] :opt [::username]))
(s/def ::show-username-request (s/keys :req [::username] :opt [::email]))


(defmulti request-type ::request-type)
(defmethod request-type :change-email [_] ::change-email-request)
(defmethod request-type :show-username [_] ::show-username-request)

(s/def ::body-params (s/multi-spec request-type ::request-type))

(s/valid? ::body-params {::request-type :change-email ::email "boop"})
=&amp;gt; true
(s/valid? ::body-params {::request-type :change-email ::username 1234})
=&amp;gt; false
(s/valid? ::body-params {::request-type :show-username ::email "boop"})
=&amp;gt; false
(s/valid? ::body-params {::request-type :show-username ::username 1234})
=&amp;gt; true
```</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:23:44.159000</ts>
    <user>Lesa</user>
    <text>thanks, I was just doing a little headscratching over the docs</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:24:00.159500</ts>
    <user>Jonas</user>
    <text>I'm looking for a way to mock out a `defrecord` that implements several protocols. empty implementations that just return nil are fine for most functions; a few others need to be replaced with code I will supply. &lt;https://github.com/alexanderjamesking/spy&gt; has `protocol/spy` but that only seems to work for one protocol. (though its code looks like it could handle more? maybe I should patch it)</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:24:14.160000</ts>
    <user>Jonas</user>
    <text>is there an alternative library, or am I misapprehending something?</text>
  </message>
  <message conversation_id="586">
    <ts>2019-02-21T17:42:15.160200</ts>
    <user>Cherise</user>
    <text>Interesting. Thanks</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:44:15.160900</ts>
    <user>Dann</user>
    <text>&lt;@Jonas&gt; what's the use value for a stubbed method with no real logic vs. not implementing the method at all?</text>
  </message>
  <message conversation_id="586">
    <ts>2019-02-21T17:44:48.161800</ts>
    <user>Dann</user>
    <text>because clojure is happy to let you define only the methods you care about and throw an error at runtime if others are called</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:45:33.162800</ts>
    <user>Jonas</user>
    <text>no particular reason, then. in this case, I need three functions that are split across two protocols; nothing else is called anyway.</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T17:57:51.163000</ts>
    <user>Lesa</user>
    <text>Thanks, that did the trick :slightly_smiling_face: Hopefully spec2 makes this kind of thing a little more straightforward</text>
  </message>
  <message conversation_id="585">
    <ts>2019-02-21T18:01:31.163200</ts>
    <user>Dulcie</user>
    <text>:thumbsup: you're welcome!</text>
  </message>
  <message conversation_id="587">
    <ts>2019-02-21T18:09:19.163900</ts>
    <user>Jasmine</user>
    <text>`boolean?`</text>
  </message>
  <message conversation_id="586">
    <ts>2019-02-21T19:56:50.164100</ts>
    <user>Lesa</user>
    <text>Yup, that was one adjustment, though the major problem (choosing a spec based on the value of that boolean) was solved using `multi-spec` on suggestion from butterguns</text>
  </message>
  <message conversation_id="588">
    <ts>2019-02-21T22:06:10.166500</ts>
    <user>Keenan</user>
    <text>If I have an arbitary number of functions I want to run just for effects, is there a handy function for that?

So rather than

```
(do
  (f1)
  (f2)
  (f3))
```

just

`(dofn f1 f2 f3)`</text>
  </message>
  <message conversation_id="588">
    <ts>2019-02-21T22:13:03.167100</ts>
    <user>Wesley</user>
    <text>&lt;@Keenan&gt; look at `run!` and `juxt`.</text>
  </message>
  <message conversation_id="588">
    <ts>2019-02-21T22:13:55.167400</ts>
    <user>Keenan</user>
    <text>Will do &lt;@Wesley&gt; -- thank you</text>
  </message>
  <message conversation_id="588">
    <ts>2019-02-21T22:17:12.168000</ts>
    <user>Wesley</user>
    <text>With `run!` you'd have to do something like this: `(run! (fn [f] (f)) [(fn [] (println "yo")) (fn [] (println "ya"))])`.  `juxt` is probably better for what you want.</text>
  </message>
  <message conversation_id="589">
    <ts>2019-02-22T06:17:40.169000</ts>
    <user>Machelle</user>
    <text>So... anyone seen this before?
```
Exception in thread "main" java.lang.ClassCastException: cm_metrics.main$_main$fn__8935 cannot be cast to java.base/java.lang.Thread
	at cm_metrics.main$_main.invokeStatic(main.clj:30)
	at cm_metrics.main$_main.doInvoke(main.clj:21)
	at clojure.lang.RestFn.invoke(RestFn.java:397)
	at clojure.lang.AFn.applyToHelper(AFn.java:152)
	at clojure.lang.RestFn.applyTo(RestFn.java:132)
	at cm_metrics.main.main(Unknown Source)
```</text>
  </message>
  <message conversation_id="589">
    <ts>2019-02-22T06:18:17.169400</ts>
    <user>Machelle</user>
    <text>it's from an uberjar</text>
  </message>
  <message conversation_id="589">
    <ts>2019-02-22T06:19:07.170100</ts>
    <user>Machelle</user>
    <text>happens when the `-main` function calls `(Runtime/getRuntime)` (I think)</text>
  </message>
  <message conversation_id="589">
    <ts>2019-02-22T08:30:53.172600</ts>
    <user>Josue</user>
    <text>&lt;@Machelle&gt; i dont know what your code looks like but i’m guessing you’re trying to add a shutdown hook? if so, the addShutdownHook method wants a Thread object not a function: `(Thread. (fn [] ...))`</text>
  </message>
  <message conversation_id="589">
    <ts>2019-02-22T08:31:15.173000</ts>
    <user>Machelle</user>
    <text>You're obviously a mind reader :smile:</text>
  </message>
  <message conversation_id="589">
    <ts>2019-02-22T08:31:46.173200</ts>
    <user>Machelle</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="589">
    <ts>2019-02-22T08:32:08.173400</ts>
    <user>Josue</user>
    <text>haha np</text>
  </message>
  <message conversation_id="590">
    <ts>2019-02-22T09:11:22.177600</ts>
    <user>Isidro</user>
    <text>I'm trying to get a clojure cli tool I wrote a while back to compile and run under java 6. So far I've downgraded leiningen and the clojure version and I'm now in the process of trying to find a permutation of the dependencies which would actually compile under java 6 (currently playing with tools.cli) . Just figured I would ping this channel to see if this is even worth it...i.e. is this doomed to fail from start or is there a chance this might actually work in the end?</text>
  </message>
  <message conversation_id="590">
    <ts>2019-02-22T09:14:02.178000</ts>
    <user>Jasmine</user>
    <text>why?</text>
  </message>
  <message conversation_id="590">
    <ts>2019-02-22T09:14:41.178800</ts>
    <user>Isidro</user>
    <text>&lt;@Jasmine&gt; I'm trying to get the tool to run in a controlled server environment which only has java 6</text>
  </message>
  <message conversation_id="590">
    <ts>2019-02-22T09:21:13.182800</ts>
    <user>Kyong</user>
    <text>Has anyone used a recent core.memoize with a cache backend out of process (like leveldb or redis where you need to serialize the objects)? Since I last used it, it seems to make heavier use of custom delay objects and I wondered if anyone else has encountered issues</text>
  </message>
  <message conversation_id="590">
    <ts>2019-02-22T09:21:59.183400</ts>
    <user>Jasmine</user>
    <text>&lt;@Isidro&gt; that's what I was asking. I don't think it's hopeless (but might not be fun)</text>
  </message>
  <message conversation_id="590">
    <ts>2019-02-22T09:22:55.184300</ts>
    <user>Isidro</user>
    <text>&lt;@Jasmine&gt; ok thanks! ...yeah, not fun which is why I figured I would ask first before banging my head against the wall</text>
  </message>
  <message conversation_id="591">
    <ts>2019-02-22T11:41:45.187200</ts>
    <user>Leeann</user>
    <text>On a phone, so not tested, but (apply reduce (fn [_ f] (f)) f1 f2 f3)</text>
  </message>
  <message conversation_id="591">
    <ts>2019-02-22T11:41:58.187700</ts>
    <user>Leeann</user>
    <text>Should probably work. </text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T11:47:24.188300</ts>
    <user>Onita</user>
    <text>hey everyone, this might be more of a java question but i’m looking to store a hex number, for example 1ff as a byte-array</text>
  </message>
  <message conversation_id="591">
    <ts>2019-02-22T11:47:36.188700</ts>
    <user>Onita</user>
    <text>namely, 0x00 0x01 0xFF</text>
  </message>
  <message conversation_id="591">
    <ts>2019-02-22T11:48:10.189400</ts>
    <user>Onita</user>
    <text>casting to and from bigintegers results in truncating the 1, and i’m not quite sure how to get around that</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T11:48:12.189700</ts>
    <user>Onita</user>
    <text>any ideas?</text>
  </message>
  <message conversation_id="591">
    <ts>2019-02-22T11:49:12.190000</ts>
    <user>Onita</user>
    <text>i guess the super hacky route would be to mod the number of hex characters against 8 and supplement zeroes..</text>
  </message>
  <message conversation_id="591">
    <ts>2019-02-22T11:57:52.191000</ts>
    <user>Jasmine</user>
    <text>you might look at java.util.BitSet</text>
  </message>
  <message conversation_id="591">
    <ts>2019-02-22T11:59:33.191500</ts>
    <user>Jasmine</user>
    <text>not sure if it's exactly what you want as an api but prob good code to build on</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:06:04.191700</ts>
    <user>Onita</user>
    <text>cool, i’ll have a look - thanks</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:11:35.192400</ts>
    <user>Rosaline</user>
    <text>0x00 0x01 0xFF isn't a "hex number" it is 3 bytes, so when you try to store it as 1 byte it is truncated to 0xff</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:14:57.193500</ts>
    <user>Rosaline</user>
    <text>3 bytes is kind of an odd size to work with, usually it will be some power of two, 2 or 4 would fit, and match the sizes of some primitives on the jvm (short and int)</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:15:41.194200</ts>
    <user>Rosaline</user>
    <text>are you sure this isn't just a signedness thing tripping you up?</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:16:50.195700</ts>
    <user>Dann</user>
    <text>if you want  a byte array with the contents describing some Long / Int / whatever you can use ByteBuffer &lt;https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#putInt(int)&gt;</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:17:42.196600</ts>
    <user>Rosaline</user>
    <text>bigintegers will add an extra byte to track the sign sometimes, where if you are mostly concerned with bytes but sometimes with numbers you often want to assume unsigned and not have the extra byte</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:19:31.196800</ts>
    <user>Dann</user>
    <text>```(cmd)user=&amp;gt; (def bb (ByteBuffer/allocate 16))
#'user/bb
(ins)user=&amp;gt; (seq (.array bb))
(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)
(ins)user=&amp;gt; (.putLong bb 42)
#object[java.nio.HeapByteBuffer 0x640f11a1 "java.nio.HeapByteBuffer[pos=8 lim=16 cap=16]"]
(cmd)user=&amp;gt; (seq (.array bb))
(0 0 0 0 0 0 0 42 0 0 0 0 0 0 0 0)
(ins)user=&amp;gt; (.putLong bb Long/MAX_VALUE)
#object[java.nio.HeapByteBuffer 0x640f11a1 "java.nio.HeapByteBuffer[pos=16 lim=16 cap=16]"]
(cmd)user=&amp;gt; (seq (.array bb))
(0 0 0 0 0 0 0 42 127 -1 -1 -1 -1 -1 -1 -1)
```</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:21:45.197600</ts>
    <user>Dann</user>
    <text>this is the most straightforward way I've found for converting between the internal representation of primitive types and the actual values (for every putFoo method there's a getFoo method)</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:24:47.198300</ts>
    <user>Dann</user>
    <text>&lt;@Onita&gt; were you trying to use the toByteArray method? &lt;https://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#toByteArray()&gt;</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:25:53.198500</ts>
    <user>Onita</user>
    <text>i was using clojure’s byte-array</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:26:47.199000</ts>
    <user>Dann</user>
    <text>so what was your actual task? turn a byte array into a number?</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:27:07.199400</ts>
    <user>Onita</user>
    <text>no, i was trying to store a series of bits that may or may not fit neatly into bytes in a byte array</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:27:21.199900</ts>
    <user>Onita</user>
    <text>so, right, it wasn’t really a ‘hex number’, i was using hex to specify a series of bits</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:27:30.200200</ts>
    <user>Dann</user>
    <text>OK - you can write bits (or any other type of course...) one by one with ByteBuffer, then read out whatever types you like</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:27:46.200700</ts>
    <user>Rosaline</user>
    <text>putShort on a bytebuffer is almost certainly what you want</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:30:45.202000</ts>
    <user>Onita</user>
    <text>yeah, i hadn’t thought about that</text>
  </message>
  <message conversation_id="592">
    <ts>2019-02-22T12:30:53.202300</ts>
    <user>Onita</user>
    <text>i’ll dig into it and see what i can do. thanks guys, appreciate the help</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:39:18.203100</ts>
    <user>Dulcie</user>
    <text>Why isn't `group-by` "transducable"? Is it because it needs to scan the entire coll?</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:44:00.204000</ts>
    <user>Rosaline</user>
    <text>group-by is itself a reduce, not a transformation of a step function</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:45:19.204800</ts>
    <user>Rosaline</user>
    <text>you can do something similar as a transformation of a step function if you have input sorted by your grouping key and a transducer version of partition-by</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:47:26.205300</ts>
    <user>Jasmine</user>
    <text>it can't produce any intermediate results, so not really any point</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:48:40.206100</ts>
    <user>Dulcie</user>
    <text>OK, so my group-by is in the middle of a long chain of transformations</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:49:03.206600</ts>
    <user>Dulcie</user>
    <text>my only option, it seems, is to have 2 transducers</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:50:13.207700</ts>
    <user>Dann</user>
    <text>I could imagine a hypothetical case where a groups-by function might be useful, and that could be a transducer (reductions : reduce :: groups-by : group-by)</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:51:15.208900</ts>
    <user>Dann</user>
    <text>reductions gives a lazy seq of all accumulator values for a given reducing function and input, so groups-by could give all the intermediate groups as you consume inputs - but there's few places that would be useful, if any</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:52:20.209300</ts>
    <user>Jasmine</user>
    <text>have you considered what it means to  have a group-by in the middle of a long chain  of  transformations?</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:53:14.210500</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/aphyr/tesser&gt; has a group-by operation with slightly different semantics that is very interesting</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:54:02.211000</ts>
    <user>Rosaline</user>
    <text>it basically splits the step function to separate reduction steps for each group</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:55:33.211700</ts>
    <user>Dann</user>
    <text>None</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:56:04.212300</ts>
    <user>Dulcie</user>
    <text>&lt;@Jasmine&gt; My feeling is that it's not a single sequence of transformations. Rather, two, unrelated map-reduce piplines</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:56:39.213100</ts>
    <user>Dulcie</user>
    <text>&lt;@Rosaline&gt; Thanks. My understanding of how transducers work is still very basic, so I'll have to read more about this</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:56:42.213300</ts>
    <user>Jasmine</user>
    <text>that seems healthy :)</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T14:57:49.214500</ts>
    <user>Rosaline</user>
    <text>tesser has a slightly different model of folds then transducers does, but is very useful for inspiration, and speaking of map/reduce tesser can run the folds as hadoop jobs</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T15:06:22.214900</ts>
    <user>Rosaline</user>
    <text>```
(defn groupy-by-transducer [key-fun]
  (fn [f]
    (fn
      ([] (f))
      ([x] (into {} (map (fn [[k v]] [k (f v)])) x))
      ([accum value]
       (let [k (key-fun value)]
         (assoc accum k (f (get accum k (f)) value)))))))

(transduce
 (comp
  (groupy-by-transducer :type)
  (map :mass))
 +
 {}
 [{:name :electron, :type :lepton, :mass 0.51}
  {:name :muon,     :type :lepton, :mass 105.65}
  {:name :up,       :type :quark,  :mass 1.5}
  {:name :down,     :type :quark,  :mass 3.5}])

;;=&amp;gt; {:lepton 106.16000000000001, :quark 5.0}
```</text>
  </message>
  <message conversation_id="593">
    <ts>2019-02-22T15:06:49.215500</ts>
    <user>Rosaline</user>
    <text>that kind of works, but I think it might run afoul of the internal mutations that some transducers do</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:33:38.216200</ts>
    <user>Sage</user>
    <text>I'm trying to add metadata to a function, but it's annoying because it erases the function name in the print-out:
```
binja.util&amp;gt; (fn hey ([x] x))
#function[binja.util/eval9096/hey--9097]
binja.util&amp;gt; (with-meta (fn hey ([x] x)) {:x "x"})
#function[clojure.lang.AFunction/1]
```</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:33:49.216500</ts>
    <user>Sage</user>
    <text>does anyone know how I can add meta data without erasing the name?</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:38:43.216700</ts>
    <user>Rosaline</user>
    <text>you can't</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:40:44.217700</ts>
    <user>Rosaline</user>
    <text>I recommend not putting metadata on functions because they have reference equality but value metadata</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:42:11.218600</ts>
    <user>Sage</user>
    <text>can't it be done "under the hood" somehow?</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:43:00.219300</ts>
    <user>Dann</user>
    <text>you can implement IFn / IMeta and have any toString you like via reify, deftype, whatever</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:43:37.219800</ts>
    <user>Dann</user>
    <text>or fork clojure, but implementing IFn and IMeta is a lot less work</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:45:19.220100</ts>
    <user>Rosaline</user>
    <text>it cannot</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:45:50.220500</ts>
    <user>Rosaline</user>
    <text>what is printed there is the jvm type of the object</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:46:31.221100</ts>
    <user>Rosaline</user>
    <text>adding metadata to a function results in wrapping it with an instance of another function with that metadata</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:47:29.221900</ts>
    <user>Rosaline</user>
    <text>which is part of why `(= x (with-meta x {}))` which holds true for other types with-meta works on fails for functions</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:49:17.222900</ts>
    <user>Sage</user>
    <text>hmm well that's disappointing. maybe i can figure out how to store the metadata inside the function and fetch it somehow when I need it</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:49:48.223200</ts>
    <user>Sage</user>
    <text>it won't be very "meta" then</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:54:15.223900</ts>
    <user>Dann</user>
    <text>```cmd)user=&amp;gt; (def f (reify clojure.lang.IFn (invoke [this] :a) (applyTo [this _] :b) Object (toString [this] "f")))
#'user/f
(ins)user=&amp;gt; (def g (with-meta f {:foo :bar}))
#'user/g
(ins)user=&amp;gt; (meta g)
{:foo :bar}
(ins)user=&amp;gt; (meta f)
{:line 53, :column 8}
(ins)user=&amp;gt; (f)
:a
(ins)user=&amp;gt; (g)
:a
(ins)user=&amp;gt; [f, g]
[#object[user$reify__233 0x36676c1a "f"] #object[user$reify__233 0x5b408dc3 "f"]]
```</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T16:54:33.224200</ts>
    <user>Dann</user>
    <text>(reify is already IMeta so no need to implement)</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:01:33.225600</ts>
    <user>Sage</user>
    <text>thanks &lt;@Dann&gt;! But I mostly need it for stack trace errors so it needs to show up as a function, not just a reify</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:01:48.226100</ts>
    <user>Rosaline</user>
    <text>the original function will show up in the stacktrace</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:01:57.226300</ts>
    <user>Rosaline</user>
    <text>because the wrapper just calls it</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:03:04.227700</ts>
    <user>Rosaline</user>
    <text>but, again, metadata on functions is kind of silly, metadata is more or less extra data you want to attach to an object without changing the equality of that object</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:03:16.228200</ts>
    <user>Rosaline</user>
    <text>but I doubt you are comparing equality on a functions</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:03:30.228700</ts>
    <user>Rosaline</user>
    <text>so use a map</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:03:39.228900</ts>
    <user>Sage</user>
    <text>```
b.util &amp;gt; (def f (reify clojure.lang.IFn (invoke [this] :a) (applyTo [this _] :b) Object (toString [this] "f")))
#'b.util/f
b.util&amp;gt; (f 3)
Execution error (AbstractMethodError) at b.util/eval9131 (form-init14739800243932352027.clj:2461).
Receiver class b.util$reify__9129 does not define or inherit an implementation of the resolved method abstract invoke(Ljava/lang/Object;)Ljava/lang/Object; of interface clojure.lang.IFn.
```</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:03:52.229300</ts>
    <user>Rosaline</user>
    <text>{:my other-data :f some-function}</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:03:58.229500</ts>
    <user>Dann</user>
    <text>you need to define the arity you call</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:04:10.229800</ts>
    <user>Dann</user>
    <text>you only defined the 0 arg ~applyto~ *invoke*</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:04:35.230500</ts>
    <user>Rosaline</user>
    <text>just don't put metadata on functions</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:05:05.231100</ts>
    <user>Sage</user>
    <text>well i'm storing the type information of the args and return value for a function, which I can check with a spec, so I just need some way to get that out of a function. i could hide it in the function so if you call it with the magic incantation it returns the type</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:06:34.232500</ts>
    <user>Sage</user>
    <text>but the only arity I consistently have available is zero args, so I could have that return the type information, but that will result in sloppy errors</text>
  </message>
  <message conversation_id="594">
    <ts>2019-02-22T17:11:24.233300</ts>
    <user>Sage</user>
    <text>Oooh I see what you were saying @hireman. My function names do show up in the stack trace, just not when i print out the function. that'll work!</text>
  </message>
  <message conversation_id="595">
    <ts>2019-02-23T07:41:25.234500</ts>
    <user>Henry</user>
    <text>Is there a predicate to check for a multimethod? Something like `fn?` (which returns false for multimethods)</text>
  </message>
  <message conversation_id="596">
    <ts>2019-02-23T08:01:53.236600</ts>
    <user>Mira</user>
    <text>Hi can you guys recommend a good open source *application* code to read? especially in the context of slightly more intermediate/advanced, clojure techniques i.e. transducers, use of spec, use of namespace-qualified keywords etc., cheers!</text>
  </message>
  <message conversation_id="597">
    <ts>2019-02-23T09:39:43.237900</ts>
    <user>Lemuel</user>
    <text>well, there’s `methods`, but I’m not sure what happens when you call it on a non-multimethod </text>
  </message>
  <message conversation_id="597">
    <ts>2019-02-23T09:41:13.238200</ts>
    <user>Emilia</user>
    <text>I need a dynamically sized collection of agents, but the size of that collection will be managed by another agent (changes to the size of the collection will be significantly less frequent than changes to the underlying agents).  Is nesting agents in this case appropriate, or am I missing a better way to structure this?  eg. (def things (agent {:thing1 (agent 1) :thing2 (agent 1)})) , then (send (:thing1 @things) inc), and (send things assoc :thing3 (agent 1))</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T09:46:35.238700</ts>
    <user>Sterling</user>
    <text>hi, it seems to me it's not possible to specify a *mandatory* option for toosl.cli</text>
  </message>
  <message conversation_id="597">
    <ts>2019-02-23T09:47:33.239300</ts>
    <user>Sterling</user>
    <text>the only thing i can do so far is to:    :default-fn #(if (nil? (:id %))
                   (throw (IllegalArgumentException. "--id is mandatory"))
                   %)</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:02:28.240600</ts>
    <user>Epifania</user>
    <text>Trying to spin up a old (eh, ~two months) project of mine, and when running `lein ring server-headless`, I get the following endlessly long stack trace: &lt;https://gist.github.com/victorb/81eb2afacce8ca8d1731f399bbeb34d0&gt;
As far as I can tell, the error is not related to my code, as it's not part of the stack trace. But I'm unable to find any entrypoint or obvious place to start looking for issues. Could someone provide some pointers?</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:10:29.242700</ts>
    <user>Jessia</user>
    <text>I think options are always optional unless you do something like that. Use arguments for mandatory arguments. Sorry that sounds a bit tautological. </text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:14:40.243000</ts>
    <user>Vita</user>
    <text>Looks like it’s probably related to an old version of clojure.core/unify that does something incompatible with clojure 1.10 / spec. It looks like Alex probably fixed that here: &lt;https://github.com/clojure/core.unify/commit/a5f60d74e1df61291535be43dab7bd2f2eaceb32&gt; and that you could resolve it by explicitly declaring a version of `[org.clojure/core.unify "0.5.7"]`</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:15:16.243200</ts>
    <user>Epifania</user>
    <text>Huh, that's super helpful! Thanks a lot for taking a look and even coming up with a solution :thumbsup:</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:18:46.243500</ts>
    <user>Epifania</user>
    <text>Hm, doesn't seem to resolve the issue though. Specifiying it in my `project.clj` still has the same error. Also worth mentioning, I'm on clojure 1.10.0, and `0.5.7` of core.unify seems to have been released 2016.07.25 so I expected it to be used already</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:19:10.243700</ts>
    <user>Vita</user>
    <text>There’s not a predicate in core afaik because Clojure chooses to treat them transparently the same as functions everywhere and discourages doing otherwise. However, you could always do something like `(instance? MultiFn thing)`</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:19:13.243900</ts>
    <user>Fatima</user>
    <text>Are you using cider? If so, update to latest version.</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:19:51.244100</ts>
    <user>Epifania</user>
    <text>nope, no cider. `lein ancient` also tells me `all artifacts are up-to-date` so everything is updated</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:20:13.244300</ts>
    <user>Fatima</user>
    <text>How about updating lein itself?</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:20:15.244500</ts>
    <user>Vita</user>
    <text>do you have a ~/.lein/profiles.clj that might be interfering ?</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:20:22.244700</ts>
    <user>Vita</user>
    <text>or that ^ :stuck_out_tongue:</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:20:29.244900</ts>
    <user>Fatima</user>
    <text>I remember bumping into that same stack trace but updating all deps resolved it.</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:20:34.245100</ts>
    <user>Epifania</user>
    <text>already on latest lein. Thanks for the `profiles.clj`, will check that out</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:21:22.245300</ts>
    <user>Epifania</user>
    <text>hm, no luck, commented out everything in profiles.clj, ran `lein clean` and still same error</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:21:46.245500</ts>
    <user>Epifania</user>
    <text>gonna try downgrading lein instead, have solved issues in the past</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:22:45.245700</ts>
    <user>Vita</user>
    <text>i still think you have an old version of unify on the classpath. just a question of how it’s getting there</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:22:45.245900</ts>
    <user>Fatima</user>
    <text>Mmm lein plugins in `project.clj`? Especially `lein-ring`</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:23:28.246100</ts>
    <user>Fatima</user>
    <text>&lt;https://github.com/weavejester/lein-ring/commit/b787f66a70993b52487fcafcc906e3875b4726ac&gt;</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:23:30.246300</ts>
    <user>Epifania</user>
    <text>&lt;@Vita&gt; seems so. `lein deps :tree` does not list unify anywhere, but guess it's possible it's embedded somewhere somehow</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:23:44.246500</ts>
    <user>Epifania</user>
    <text>&lt;@Fatima&gt; yeah, had three plugins there but commented them away</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:24:43.246700</ts>
    <user>Epifania</user>
    <text>yeah! Thanks &lt;@Fatima&gt;! Upgrading lein-ring solved the issue!</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:25:13.247000</ts>
    <user>Epifania</user>
    <text>My assumption that `lein ancient` upgrades everything was wrong, as it doesn't update plugins (by default at least)</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:25:41.247300</ts>
    <user>Epifania</user>
    <text>the Clojure community continues to surprise me with it's helpfulness! You're all awesome folks! :beach_with_umbrella:</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:26:00.247600</ts>
    <user>Epifania</user>
    <text>thanks a lot for helping me tracking it down</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:26:32.247800</ts>
    <user>Fatima</user>
    <text>No problemo!</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T10:27:10.248000</ts>
    <user>Vita</user>
    <text>np!</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T11:17:17.249300</ts>
    <user>Evangeline</user>
    <text>Is there a designated channel &lt;@Jasmine&gt; posts his weekly update blog post link on? I can never find it reliably. </text>
  </message>
  <message conversation_id="599">
    <ts>2019-02-23T11:18:20.250000</ts>
    <user>Evangeline</user>
    <text>Ps. Those posts are great. </text>
  </message>
  <message conversation_id="599">
    <ts>2019-02-23T11:26:25.250100</ts>
    <user>Henry</user>
    <text>If they were treated the same, then I'd expect `fn?` to return true for them, that would work for me as well :slightly_smiling_face: I just want to distinguish non-function values (including collections) from functions. Thanks for the ideas, the instance check seems like a good way.</text>
  </message>
  <message conversation_id="599">
    <ts>2019-02-23T11:39:04.250600</ts>
    <user>Becki</user>
    <text>i've seen them reliably show up on reddit</text>
  </message>
  <message conversation_id="599">
    <ts>2019-02-23T11:41:42.251700</ts>
    <user>Alfonso</user>
    <text>And in the reddit thread today it was mentioned he is posting about them on a zulip stream: &lt;https://clojurians.zulipchat.com/#narrow/stream/187050-inside-clojure-journals&gt;  I haven't quite wrapped my head around this zulip thing yet myself</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T11:49:30.252600</ts>
    <user>Jasmine</user>
    <text>I have been posting on reddit and now on Zulip and erratically here :)</text>
  </message>
  <message conversation_id="600">
    <ts>2019-02-23T13:29:59.254400</ts>
    <user>Rolanda</user>
    <text>I have started subscribing to RSS feeds again, mostly to keep up with interesting Clojure news. &lt;https://feedly.com&gt; seems to be a good choice for me.</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:19:17.255500</ts>
    <user>Matha</user>
    <text>Is there a format to give examples in docstrings/elsewhere for (pure) clojure functions that can then be exploited by other tools? (e.g. to check the examples, etc)</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:45:41.256900</ts>
    <user>Matha</user>
    <text>Also, another question: in my current project I find myself wanted to use maps with namespaced keywords over records because they have a lot of very nice properties (play well with specs, serialise well, are extendable, etc), but I really, really miss having something like protocols. Is there anyway to get the best of both worlds?</text>
  </message>
  <message conversation_id="598">
    <ts>2019-02-23T14:48:46.257200</ts>
    <user>Jasmine</user>
    <text>have you experimented with multimethods?</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:49:35.258000</ts>
    <user>Matha</user>
    <text>&lt;@Jasmine&gt; it depends what you mean by experimented. I am aware of them and have used multimethods in a few places, but I wouldn’t say I have a good intuition on how they can be used to address a variety of problems</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:50:46.259500</ts>
    <user>Matha</user>
    <text>for example, I have a datastructure in my application that is essentially a tree. If I implemented it using a record I would make it extend a “ITree” protocol (or similar) and define some standard tree functions on it, but because I am using maps it seems like I am forced to define all those tree functions specifically for that datastructure</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:51:17.259800</ts>
    <user>Roslyn</user>
    <text>With clojure 1.10 you have `:extend-via-metadata` on protocols so plain maps can implement protocols using meta</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:51:30.260100</ts>
    <user>Matha</user>
    <text>holy moly really?</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:51:32.260300</ts>
    <user>Jasmine</user>
    <text>^^ although there are some caveats</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:51:46.260500</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/reference/protocols#_extend_via_metadata&gt;</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:51:59.260800</ts>
    <user>Matha</user>
    <text>what are the caveats &lt;@Jasmine&gt;?</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:52:16.261300</ts>
    <user>Jasmine</user>
    <text>`satisfies?` doesn't work with it (although generally you should steer away from that anyways)</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:52:47.262300</ts>
    <user>Jasmine</user>
    <text>and they are slower than record protocol impls although how much that matters to you will depend</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:53:39.263000</ts>
    <user>Matha</user>
    <text>out of curiosity do you (&lt;@Jasmine&gt; and others) shy away from using records for application code? I know they’re used for clojure core / libairies (e.g. seq, etc), but their incompatibility with specs seem.. discouraged</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:53:48.263200</ts>
    <user>Matha</user>
    <text>slower doesn’t matter at all to me</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:54:25.263900</ts>
    <user>Matha</user>
    <text>and Clojure seems to be very much the spirit of using attribute granularity (as illustrated by spec using namespaced keywords, etc), which records are not</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:55:27.264100</ts>
    <user>Matha</user>
    <text>sorry not protocols; records*</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:55:35.264400</ts>
    <user>Matha</user>
    <text>and if you use protocols, do you use them with maps?</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:56:51.265000</ts>
    <user>Jasmine</user>
    <text>I'd say records are good in their niche, but that niche is relatively small</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:58:02.265600</ts>
    <user>Jasmine</user>
    <text>definitely use protocols, but don't extend to generic map type</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:58:12.265900</ts>
    <user>Matha</user>
    <text>to generic map type?</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:58:27.266300</ts>
    <user>Jasmine</user>
    <text>I don't typically use protocols with maps</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:59:14.266900</ts>
    <user>Matha</user>
    <text>hmm, and so do you not define generic functions on map? e.g. using generic tree functions on a map that represents some kind of tree</text>
  </message>
  <message conversation_id="601">
    <ts>2019-02-23T14:59:18.267200</ts>
    <user>Matha</user>
    <text>(e.g. map, fold, etc)</text>
  </message>
  <message conversation_id="602">
    <ts>2019-02-23T15:22:20.267400</ts>
    <user>Kirsten</user>
    <text>In clojure applied, examples use records instead of maps :stuck_out_tongue_winking_eye:</text>
  </message>
  <message conversation_id="602">
    <ts>2019-02-23T15:22:41.267600</ts>
    <user>Kirsten</user>
    <text>but I'm still in the first chapter</text>
  </message>
  <message conversation_id="602">
    <ts>2019-02-23T15:24:50.268000</ts>
    <user>Jasmine</user>
    <text>I don't typically have those kinds of data structures</text>
  </message>
  <message conversation_id="602">
    <ts>2019-02-23T15:25:28.268800</ts>
    <user>Jasmine</user>
    <text>but usually stuff like `tree-seq` or `clojure.walk/postwalk` are useful with trees</text>
  </message>
  <message conversation_id="602">
    <ts>2019-02-23T15:25:43.268900</ts>
    <user>Jasmine</user>
    <text>yeah, I wrote it :)</text>
  </message>
  <message conversation_id="602">
    <ts>2019-02-23T15:26:03.269100</ts>
    <user>Jasmine</user>
    <text>a second edition would probably be different</text>
  </message>
  <message conversation_id="602">
    <ts>2019-02-23T15:30:17.269300</ts>
    <user>Kirsten</user>
    <text>yep, hence my curiousness, your comment here vs the book</text>
  </message>
  <message conversation_id="603">
    <ts>2019-02-24T00:26:33.270900</ts>
    <user>Nigel</user>
    <text>This issue with the REPL not breaking on Ctrl-C/Ctrl-D while evaluating an infinite lazy sequence is sort of getting in my way.</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T00:30:11.271100</ts>
    <user>Becki</user>
    <text>which repl?</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T00:34:23.271500</ts>
    <user>Rosaline</user>
    <text>(my guess is it isn't evaluating but printing)</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T00:46:38.272100</ts>
    <user>Nigel</user>
    <text>&lt;@Becki&gt; off my `lein repl` which is the default. So repl-y I guess?</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T00:47:00.272500</ts>
    <user>Nigel</user>
    <text>&lt;@Rosaline&gt; - possible.</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T00:50:19.273500</ts>
    <user>Becki</user>
    <text>`lein repl` and i evaluated `(range)` and it just sat there and spun. it obeyed a control c and gave me the prompt back. `(prn (range))` and it was time to kill :slightly_smiling_face:</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T00:51:48.274400</ts>
    <user>Becki</user>
    <text>check `(set! *print-length* 100)` and then try `(prn (range 1e5))`</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T00:52:58.274800</ts>
    <user>Nigel</user>
    <text>&lt;@Becki&gt; thanks. That certainly helps</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T00:56:20.275300</ts>
    <user>Nigel</user>
    <text>Is there a good use case for `with-redefs`</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T00:58:08.275700</ts>
    <user>Nigel</user>
    <text>in actual code that is, not tests.</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T01:18:10.276200</ts>
    <user>Nigel</user>
    <text>```
(defmulti foo class)
(defmethod foo ::collection [c] :a-collection)
(defmethod foo String [s] :a-string)
```</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T01:18:40.277000</ts>
    <user>Nigel</user>
    <text>that’s an example given on the Clojure site</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T01:19:07.277700</ts>
    <user>Nigel</user>
    <text>It says that if I execute a `(foo [])` then I ought to get `:a-collection`</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T01:19:50.278200</ts>
    <user>Nigel</user>
    <text>Earlier on it derived a bunch of things from :a-collection</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T01:21:25.278500</ts>
    <user>Nigel</user>
    <text>Ah, ignore. I did something wrong</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T01:33:37.279200</ts>
    <user>Nigel</user>
    <text>&lt;@Becki&gt; The repl thing works when its just a print, but here’s where it breaks `(drop-while (partial &amp;lt;= 0) (range))`</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T01:33:54.279500</ts>
    <user>Nigel</user>
    <text>And I distinctly remember that working earlier</text>
  </message>
  <message conversation_id="605">
    <ts>2019-02-24T02:03:31.285200</ts>
    <user>Domingo</user>
    <text>Hi, everyone
I was wondering If I could write a macro to turn a map into a function defintion that resolves the keys in that map into its corresponding value using case form ... but couldnt quite get it right. (This is as far as I got ....)
How is it possible (or am I getting something terribly wrong ?)</text>
  </message>
  <message conversation_id="604">
    <ts>2019-02-24T02:46:22.286400</ts>
    <user>Latonya</user>
    <text>Not sure if you were aware, but you can "call" a map value in Clojure, like a function, passing a first argument that is some value, and it will look up that value in the map, and return the corresponding value, e.g. ```user=&amp;gt; (def my-map {:a 1 :b -2 "c" 42})
#'user/my-map
user=&amp;gt; (my-map "c")
42
```</text>
  </message>
  <message conversation_id="605">
    <ts>2019-02-24T03:01:40.286500</ts>
    <user>Domingo</user>
    <text>Thanks, but yeah I knew.</text>
  </message>
  <message conversation_id="605">
    <ts>2019-02-24T03:02:43.286700</ts>
    <user>Domingo</user>
    <text>But the question of how to turn into a case statement using macros was just teasing me</text>
  </message>
  <message conversation_id="606">
    <ts>2019-02-24T09:28:09.292000</ts>
    <user>Angele</user>
    <text>Hi everyone,
I’m working on gRPC server running in Clojure.
This is an example of simple method creating server:
```
(defn build-server [config info-service]
  (let [port (:port config)
        server (-&amp;gt; (ServerBuilder/forPort port)
                   (.addService ^BindableService info-service)
                   (.build)
                   (.start))]
    (println "gRPC server started listening on port" port)
    server))
```
In the snippet below I’m trying to pass to the server a vector of handlers and add them to the server sequently.
```
(defn build-server [config handlers]
  (let [port (:port config)
        server (-&amp;gt; (ServerBuilder/forPort port)
                   (as-&amp;gt; builder
                         (do (doseq [h handlers]
                               (.addService builder ^BindableService h))
                             builder))
                   (.build)
                   (.start))]
    (println "gRPC server started listening on port" port)
    server))
```
The thing is that the piece
```
(as-&amp;gt; builder
      (do (doseq [h handlers]
            (.addService builder ^BindableService h))
          builder))
```
doesn’t look elegant. I have briefly a few months of experience with Clojure and I feel there might be some handy macro or practice I’m missing.</text>
  </message>
  <message conversation_id="606">
    <ts>2019-02-24T09:33:22.292200</ts>
    <user>Jasmine</user>
    <text>check out `doto`</text>
  </message>
  <message conversation_id="606">
    <ts>2019-02-24T09:34:31.292700</ts>
    <user>Jasmine</user>
    <text>all this looks fine to me btw, but doto can help when doing a lot of java factory stuff</text>
  </message>
  <message conversation_id="606">
    <ts>2019-02-24T09:51:56.294200</ts>
    <user>Angele</user>
    <text>Thanks &lt;@Jasmine&gt;, I know `doto` but in this piece is not going to help very much as I can’t use it with doseq. If there were a doseq returning a result of last execution :thinking_face:</text>
  </message>
  <message conversation_id="607">
    <ts>2019-02-24T10:32:20.296600</ts>
    <user>Dreama</user>
    <text>Howdy,  I am trying to send a pdf ( as ByteArrayOutputStream )  back to front end in the body of the http response. In our middle wear stack &amp;gt;&amp;gt; Transit &amp;lt;&amp;lt;  is barfing on that ( NullPointer )     so I am wondering if there is something I am missing.  Do i have to make custom handler for transit or something?</text>
  </message>
  <message conversation_id="607">
    <ts>2019-02-24T10:33:52.296900</ts>
    <user>Dreama</user>
    <text>my response looks like this  {:status 200 :body pdf-output-stream :headers {"Content-Type" content-type}}</text>
  </message>
  <message conversation_id="607">
    <ts>2019-02-24T10:34:06.297300</ts>
    <user>Dreama</user>
    <text>where pdf-output-stream is the byte array output stream</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:34:03.299100</ts>
    <user>Matha</user>
    <text>What would be an idiomatic way to return the keys of a map for which the values match some predicate?</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:34:41.299600</ts>
    <user>Matha</user>
    <text>e.g. `(map first (filter #(predicate? %2) my-map))`; is there a more idiomatic way?</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:36:57.300400</ts>
    <user>Becki</user>
    <text>return the keys or key/value pairs?</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:37:05.300500</ts>
    <user>April</user>
    <text>(for [[k v] my-map :when (p? v)] k) ??</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:37:20.301000</ts>
    <user>Matha</user>
    <text>&lt;@Becki&gt; keys only</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:37:28.301200</ts>
    <user>Becki</user>
    <text>`(filter predicate? (keys my-map))`?</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:37:44.301300</ts>
    <user>Matha</user>
    <text>ah that’s nice; thanks!</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:37:57.301500</ts>
    <user>Matha</user>
    <text>the predicate is on the values</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:38:17.301700</ts>
    <user>Becki</user>
    <text>"for which the values". gotcha</text>
  </message>
  <message conversation_id="609">
    <ts>2019-02-24T11:40:08.302700</ts>
    <user>April</user>
    <text>Hi!
random question :stuck_out_tongue: why metadata impact on equality for functions?
```
(let [f (fn [])
        m {}]
                  (println "fn withMeta == fn"  (= (with-meta f {1 1}) f))
                  (println "m  withMeta ==  m" (= (with-meta m {1 1}) m))) 

fn withMeta == fn  false
m  withMeta ==  m true
```</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T11:43:08.302800</ts>
    <user>April</user>
    <text>:grin:</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T12:10:42.305000</ts>
    <user>Jasmine</user>
    <text>Functions have identity equality semantics. Generally you shouldn’t be comparing them for equality in the first place.</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T12:11:52.305300</ts>
    <user>April</user>
    <text>ok :pensive:, thanks!!</text>
  </message>
  <message conversation_id="610">
    <ts>2019-02-24T14:37:01.306900</ts>
    <user>Clarine</user>
    <text>Function equivalence is reducible to the halting problem which cannot be solved:
&lt;https://stackoverflow.com/a/1132167/6264&gt;</text>
  </message>
  <message conversation_id="610">
    <ts>2019-02-24T14:50:06.309700</ts>
    <user>Latonya</user>
    <text>Where "cannot be solved" is the general case, for an arbitrary pair of functions.  There are special cases that are decidable, but Clojure's `=` makes no attempt to help you find those.  But I agree that point is getting fairly far from the original question :slightly_smiling_face:</text>
  </message>
  <message conversation_id="608">
    <ts>2019-02-24T15:01:28.310400</ts>
    <user>Rosaline</user>
    <text>functions have reference equality, but implement the value metadata interface, and implement it by wrapping</text>
  </message>
  <message conversation_id="611">
    <ts>2019-02-24T15:08:00.311900</ts>
    <user>Tammera</user>
    <text>You gotta love those proofs tho, suppose we have x, if we define x’ and y, we would have to solve the halting problem. That’s not possible</text>
  </message>
  <message conversation_id="612">
    <ts>2019-02-24T16:37:18.312400</ts>
    <user>Sixta</user>
    <text>How can I analyze a directory of files using tools.analyzer?</text>
  </message>
  <message conversation_id="610">
    <ts>2019-02-24T17:20:01.313900</ts>
    <user>Angele</user>
    <text>Answering my previous question (&lt;https://clojurians.slack.com/archives/C03S1KBA2/p1551018489292000&gt;) I found a more elegant approach of expressing the same:
```
(defn build-server [config handlers]
  (let [port (:port config)
        server (-&amp;gt; (ServerBuilder/forPort port)
                   (as-&amp;gt; builder (reduce #(.addService %1 %2) builder handlers))
                   (.build)
                   (.start))]
    (println "gRPC server started listening on port" port)
    server))
```</text>
  </message>
  <message conversation_id="610">
    <ts>2019-02-25T07:33:18.316900</ts>
    <user>Simonne</user>
    <text>&lt;@Angele&gt; At first I was going to suggest getting rid of the `as-&amp;gt;` threader, but after looking at it, I think the following is most straightforward:

```
(let [b (ServerBuilder/forPort port)]
  (doseq [h handlers]
    (.addService b h))
  (.start (.build b)))
```</text>
  </message>
  <message conversation_id="610">
    <ts>2019-02-25T07:34:31.317800</ts>
    <user>Simonne</user>
    <text>In general, I prefer using side-effecty constructs for side-effecty operations.</text>
  </message>
  <message conversation_id="610">
    <ts>2019-02-25T07:36:01.318800</ts>
    <user>Simonne</user>
    <text>For example, `doseq` for adding services to a mutable object.</text>
  </message>
  <message conversation_id="610">
    <ts>2019-02-25T07:39:55.319200</ts>
    <user>Simonne</user>
    <text>If you wanna keep the startup msg, I would do:</text>
  </message>
  <message conversation_id="610">
    <ts>2019-02-25T07:39:58.319400</ts>
    <user>Simonne</user>
    <text>```
(let [b (ServerBuilder/forPort port)
      srvr (do (doseq [h handlers]
                 (.addService b h))
               (.start (.build b)))]
  (println "gRPC server started listening on port" port)
  srvr)
```</text>
  </message>
  <message conversation_id="613">
    <ts>2019-02-25T08:17:20.322000</ts>
    <user>Drucilla</user>
    <text>One thing I've found useful to build into functions like these is a promise that is delivered once the service has started. It can either be passed in by the caller, or returned as part of a map that wraps the server object. This makes it possible for tests to use it to ensure the service is ready for requests before the test starts hitting it.</text>
  </message>
  <message conversation_id="614">
    <ts>2019-02-25T10:38:40.323200</ts>
    <user>Harriet</user>
    <text>Anyone has an experience with Multi-part uploads with Amazonica ? Context: I am trying the merge 30K+ files into a single file in a Lambda function.</text>
  </message>
  <message conversation_id="615">
    <ts>2019-02-25T11:07:56.323300</ts>
    <user>Vita</user>
    <text>I would expect `fn?` to return true as well. Kinda surprised it doesn’t.  It looks like MultiFn extends AFn implements IFn and the fn? implementation is ```(instance? clojure.lang.Fn x)``` …. so difference between IFn and Fn. I don’t know why</text>
  </message>
  <message conversation_id="616">
    <ts>2019-02-25T12:49:12.324900</ts>
    <user>Ronald</user>
    <text>Why does `transit-cljs` allow you to read/write directly from/to strings, but `transit-clj` require the construction of `ByteArrayInputStream`/`ByteArrayOutputStream`? Is there a way to read and write strings directly in the Clojure version?</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T13:05:12.325000</ts>
    <user>Dann</user>
    <text>```Clojure 1.9.0
(ins)user=&amp;gt; (defmulti foo identity)
#'user/foo
(ins)user=&amp;gt; (ifn? foo)
true
```</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T13:18:30.327600</ts>
    <user>Dann</user>
    <text>&lt;@Ronald&gt; because String is the right abstraction in a js runtime, but not in the java runtime. It's simple to call the String constructor on a byte-array, but you end up doing a bunch of pointless work in common use cases if you convert to string (because often your target isn't a String in memory, it's an output destination like a File or socket which provides and OutputStream to write to directly). Similarly for input, the thing that you get the transit data from will almost always offer an input-stream, getting a String first then translating reduces flexibility and adds pointless layers of work.</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T13:18:58.328400</ts>
    <user>Wanita</user>
    <text>How to automatically construct spec from data structure?</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T13:21:41.328800</ts>
    <user>Ronald</user>
    <text>That's fair. It just seemed very non-Clojurey to be creating and mutating this odd Java object, but it makes sense in that context. I'll just make a wrapper for my purposes that dumps to an in-memory string.</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T13:23:00.329100</ts>
    <user>Ronald</user>
    <text>Thanks for the response &lt;@Dann&gt;</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T13:23:11.329300</ts>
    <user>Dann</user>
    <text>yeah - it's very easy to convert a byte-array to string or string to byte-array</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T13:24:17.329700</ts>
    <user>Dann</user>
    <text>I think there's a good comparison to the various collection operations here - it would be trivial to provide a function that scans a collection for a matching key, but it's not provided in order to make using a set or hash-map the low-friction path</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T13:25:17.329900</ts>
    <user>Dann</user>
    <text>(compare to common-lisp or scheme which have sets/hash-maps but many programs use lists instead with O(n) access because it has less friction with a normal coding style)</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T13:26:43.330100</ts>
    <user>Ronald</user>
    <text>It makes a lot of sense from that perspective</text>
  </message>
  <message conversation_id="618">
    <ts>2019-02-25T14:07:32.331500</ts>
    <user>Eugenio</user>
    <text>is that even doable for a highly dynamic and flexible thing like spec?</text>
  </message>
  <message conversation_id="617">
    <ts>2019-02-25T15:07:48.332000</ts>
    <user>Suzann</user>
    <text>&lt;https://github.com/stathissideris/spec-provider&gt;</text>
  </message>
  <message conversation_id="619">
    <ts>2019-02-25T15:10:31.332700</ts>
    <user>Scotty</user>
    <text>Is there a Markdown parser in Clojure (or Java) than can parse Markdown with GH extensions?</text>
  </message>
  <message conversation_id="619">
    <ts>2019-02-25T15:16:01.334300</ts>
    <user>Jonas</user>
    <text>I'm pondering what best to do with a vanilla `java.util.concurrent.Future` I'm getting from the Firebase API. trying to `.get()` it seems to be blocking my REPL thread forever? not sure.</text>
  </message>
  <message conversation_id="619">
    <ts>2019-02-25T15:16:20.334600</ts>
    <user>Jonas</user>
    <text>is there a way to wrap it into a Clojure future that will play nicer?</text>
  </message>
  <message conversation_id="619">
    <ts>2019-02-25T15:18:07.334900</ts>
    <user>Dann</user>
    <text>the functions that work on a clojure future also work on that object</text>
  </message>
  <message conversation_id="619">
    <ts>2019-02-25T15:18:29.335400</ts>
    <user>Dann</user>
    <text>`realized?`, `deref` (with optional time-out arg), `future-cancel`</text>
  </message>
  <message conversation_id="619">
    <ts>2019-02-25T15:18:55.335700</ts>
    <user>Jonas</user>
    <text>oh, I didn't think I could deref it.</text>
  </message>
  <message conversation_id="619">
    <ts>2019-02-25T15:19:21.336200</ts>
    <user>Dann</user>
    <text>deref will block the same way .get will, except you can optionally provide that time-out arg</text>
  </message>
  <message conversation_id="619">
    <ts>2019-02-25T15:20:19.336300</ts>
    <user>Meagan</user>
    <text>google found me this: &lt;https://github.com/atlassian/commonmark-java&gt;</text>
  </message>
  <message conversation_id="619">
    <ts>2019-02-25T15:22:19.336800</ts>
    <user>Dann</user>
    <text>I was wrong about `realized?`, but `deref` will work ```egret.run=&amp;gt; (doto (java.util.concurrent.FutureTask. #(+ 1 1)) (.run))
#object[java.util.concurrent.FutureTask 0x2fa829be "java.util.concurrent.FutureTask@2fa829be"]
egret.run=&amp;gt; (def f *1) 
#'egret.run/f
egret.run=&amp;gt; (realized? f)
ClassCastException java.util.concurrent.FutureTask cannot be cast to clojure.lang.IPending  clojure.core/realized? (core.clj:7453)

egret.run=&amp;gt; @f
2
```</text>
  </message>
  <message conversation_id="620">
    <ts>2019-02-25T15:36:11.337300</ts>
    <user>Scotty</user>
    <text>&lt;@Meagan&gt; That's what I'm playing with (via `commonmark-hiccup`), though it does not seem to be handling tables in my test files even after adding an extension ta parse them.</text>
  </message>
  <message conversation_id="621">
    <ts>2019-02-25T15:51:00.338700</ts>
    <user>Ariel</user>
    <text>Hi, I am trying to use DynamoDB (dockerized local) with com.cognitect.aws/api.
I am struggling to override the endpoint to match the local one.
I am doing this:
```
(def db (aws/client {:api :dynamodb :endpoint-override "local" }))
(aws/invoke db {:op :ListTables})
```
But I get:
```
=&amp;gt; #:cognitect.anomalies{:category :cognitect.anomalies/not-found, :message "local"}
(meta *1)
=&amp;gt;
{:http-request {:request-method :post,
                :scheme :https,
                :server-port 443,
                :uri "/",
                :headers {"x-amz-date" "20190225T205047Z",
                          "x-amz-target" "DynamoDB_20120810.ListTables",
                          "content-type" "application/x-amz-json-1.0",
                          "host" "local",
                          "authorization" "AWS4-HMAC-SHA256 Credential=AKIAIEJE6SPXIMLB7VRA/20190225/us-east-1/dynamodb/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=2099f67eb5a11b49446bf3cbcf89202d94f3d0cf9973d1d6f5c37e85db202e63"},
                :body "{}",
                :server-name "local"},
 :http-response {:cognitect.anomalies/category :cognitect.anomalies/not-found,
                 :cognitect.anomalies/message "local",
                 :body nil}}
```</text>
  </message>
  <message conversation_id="621">
    <ts>2019-02-25T15:57:30.339100</ts>
    <user>Dann</user>
    <text>is "local" a placeholder here? I'd expect at least a valid name like "localhost" otherwise</text>
  </message>
  <message conversation_id="621">
    <ts>2019-02-25T15:57:55.339300</ts>
    <user>Dann</user>
    <text>and the credential pointing to something on us-east-1 is suspicious</text>
  </message>
  <message conversation_id="621">
    <ts>2019-02-25T16:00:36.339600</ts>
    <user>Jasmine</user>
    <text>I believe this is a known issue</text>
  </message>
  <message conversation_id="621">
    <ts>2019-02-25T16:00:36.339800</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/cognitect-labs/aws-api/issues/59&gt;</text>
  </message>
  <message conversation_id="621">
    <ts>2019-02-25T16:06:36.340300</ts>
    <user>Ariel</user>
    <text>I have tried "&lt;http://localhost:8000&gt;" but it gets interpreted as a IPv6.
I am suing "local"due to an entry on
&lt;https://github.com/aws/aws-sdk-java/blob/master/aws-java-sdk-core/src/main/resources/com/amazonaws/partitions/endpoints.json&gt;</text>
  </message>
  <message conversation_id="621">
    <ts>2019-02-25T16:07:10.340600</ts>
    <user>Ariel</user>
    <text>```
 "dynamodb" : {
        "defaults" : {
          "protocols" : [ "http", "https" ]
        },
        "endpoints" : {
          "local" : {
            "credentialScope" : {
              "region" : "us-east-1"
            },
            "hostname" : "localhost:8000",
            "protocols" : [ "http" ]
          },
```</text>
  </message>
  <message conversation_id="621">
    <ts>2019-02-25T16:20:49.340900</ts>
    <user>Ariel</user>
    <text>Thanks &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="622">
    <ts>2019-02-25T16:57:14.341300</ts>
    <user>Angele</user>
    <text>make sense, thanks</text>
  </message>
  <message conversation_id="623">
    <ts>2019-02-26T00:10:32.343800</ts>
    <user>Marlon</user>
    <text>Anyone who has experience with http-kit: how do you send "multipart/form-data" parameters? I'm currently working with the discord api and that's what it's asking for, but I can't get it to send properly. I've tried putting the data directly into the :form-params key of the request map but that didn't do it, and I've tried putting the data directly into the :body as well, also no luck.</text>
  </message>
  <message conversation_id="623">
    <ts>2019-02-26T00:16:30.344000</ts>
    <user>Marlon</user>
    <text>I think I've figured it out.</text>
  </message>
  <message conversation_id="623">
    <ts>2019-02-26T00:19:01.344800</ts>
    <user>Celestine</user>
    <text>&lt;@Marlon&gt; Let me know if you still need assistance with that. We use `http-kit` in our test suite to POST images etc into our API for processing.</text>
  </message>
  <message conversation_id="623">
    <ts>2019-02-26T00:20:46.345300</ts>
    <user>Marlon</user>
    <text>Oh, thanks! Only issue I'm running into now is actually getting file contents into it. Not sure what's causing problems with it honestly.</text>
  </message>
  <message conversation_id="623">
    <ts>2019-02-26T00:43:25.345900</ts>
    <user>Marlon</user>
    <text>I've gotten it figured out now though</text>
  </message>
  <message conversation_id="624">
    <ts>2019-02-26T06:58:24.348200</ts>
    <user>Frederick</user>
    <text>hey guys can I get an extra eye please? I have this `ns` form failing with spec on clojure 1.10:
```(ns af-rematcher.deeplink
  (:require [clojure.string :as s]
            [cemerick.url :refer [query-&amp;gt;map]]
            [cheshire.core :as json]
            [version-clj.core :as ver]
            [com.taoensso/timbre :as timbre]))```
generating: `clojure.lang.ExceptionInfo: Call to clojure.core/ns did not conform to spec. {:clojure.spec.alpha/problems [{:path [], :reason "Extra input",`
What am I doing wrong?</text>
  </message>
  <message conversation_id="624">
    <ts>2019-02-26T06:59:47.348600</ts>
    <user>Harris</user>
    <text>`com.taoensso/timbre`</text>
  </message>
  <message conversation_id="624">
    <ts>2019-02-26T07:00:19.349200</ts>
    <user>Frederick</user>
    <text>oh it should be `taoensso.timbre`</text>
  </message>
  <message conversation_id="624">
    <ts>2019-02-26T07:00:30.349500</ts>
    <user>Frederick</user>
    <text>thanks &lt;@Harris&gt;!</text>
  </message>
  <message conversation_id="623">
    <ts>2019-02-26T08:37:38.355000</ts>
    <user>Mireille</user>
    <text>I have a tree traversal problem: I'm trying to substitute values in a tree according to a substitution map in the tree. for example, if the node `[:expr {:x 1} ...]` should substitute all `:x` child nodes with 1. here's an example: ```(subst [:a [:b [:expr {:x 1} [:d :e [:f :g :x]]]] [:expr {:y 2} [:h :y]]])
=&amp;gt; ([:a [:b [:expr {:x 1} [:d :e [:f :g 1]]]] [:expr {:y 2} [:h 2]]])
```
I'm aware of clojure.walk but I'm having trouble using it with "memory". any pointers?</text>
  </message>
  <message conversation_id="623">
    <ts>2019-02-26T08:52:22.355800</ts>
    <user>Harris</user>
    <text>&lt;@Mireille&gt; you can use a thread local to propagate the context down the recursion</text>
  </message>
  <message conversation_id="623">
    <ts>2019-02-26T12:02:01.357100</ts>
    <user>Ariel</user>
    <text>&lt;@Mireille&gt; do you know &lt;https://github.com/nathanmarz/specter&gt;? ```transform``` might help.</text>
  </message>
  <message conversation_id="623">
    <ts>2019-02-26T12:07:48.358000</ts>
    <user>Mireille</user>
    <text>&lt;@Ariel&gt; thanks, i was reading &lt;https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively&gt; but it'll take a while to get my head around it</text>
  </message>
  <message conversation_id="625">
    <ts>2019-02-26T13:00:17.358800</ts>
    <user>Jonelle</user>
    <text>I’m trying to translate this from java to clojure:
```
int alpha = (pixel &amp;gt;&amp;gt; 24) &amp;amp; 0xff;
int red = (pixel &amp;gt;&amp;gt; 16) &amp;amp; 0xff;
int green = (pixel &amp;gt;&amp;gt; 8) &amp;amp; 0xff;
int blue = (pixel) &amp;amp; 0xff;```
but I don’t know how to do the `&amp;amp; 0xff` part, anyone point me in the right direction?</text>
  </message>
  <message conversation_id="625">
    <ts>2019-02-26T13:04:56.359300</ts>
    <user>Marlyn</user>
    <text>`(bit-and .....   0xff)`</text>
  </message>
  <message conversation_id="625">
    <ts>2019-02-26T13:05:44.359600</ts>
    <user>Jonelle</user>
    <text>sweet, I had just gotten there myself :slightly_smiling_face:</text>
  </message>
  <message conversation_id="625">
    <ts>2019-02-26T13:05:45.359800</ts>
    <user>Jonelle</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:06:08.360700</ts>
    <user>Lowell</user>
    <text>Hi fellas, this mind-boggling error is consuming me `Can't make API call blobstore.CreateEncodedGoogleStorageKey in a thread that is neither the original request thread nor a thread created by ThreadManager`
It's happening with me trying to do an interop where the original is
```
BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
BlobKey blobKey = blobstoreService.createGsBlobKey("/gs/" + bucket + "/image.jpeg");
```
to
```
(.createGsBlobKey (BlobstoreServiceFactory/getBlobstoreService) "/gs/crowd-hm.appspot.com/users/5644647548321792/profile/0eb6082b-f67d-46b4-ad2c-d2ef2b737ee5.jpg")
```</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:09:34.361400</ts>
    <user>Dann</user>
    <text>&lt;@Lowell&gt; sounds like that method whitelists specific threads for the call and you are trying to call it outside the allowed thread</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:12:46.362100</ts>
    <user>Lowell</user>
    <text>Never stumbled in that before, how do I handle it?</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:16:53.362700</ts>
    <user>Dann</user>
    <text>you could send a function (which is a Callable) to be executed in an app-engine thread pool / thread &lt;https://cloud.google.com/appengine/docs/standard/java/runtime#threads&gt;</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:17:22.363200</ts>
    <user>Dann</user>
    <text>I think that would satisfy it (based on a common sense reading of the error message and docs at least)</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:17:52.363800</ts>
    <user>Dann</user>
    <text>it wants to impose extra coordination over what you get by default with network calls and threads I guess(?)</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:18:14.364000</ts>
    <user>Dann</user>
    <text>&amp;gt; if you want to call App Engine APIs (com.google.appengine.api.*), you must call those APIs from a request thread or from a thread created using the ThreadManager API.</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:19:16.364900</ts>
    <user>Dann</user>
    <text>&lt;@Lowell&gt; ~to clarify about the above, if something hands you a Thread you can use `(.run t f)` where f is any clojure function taking no args~ -- not quite right...</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:19:49.365500</ts>
    <user>Dann</user>
    <text>so I think the solution is to ask the google ThreadManager for a thread, and pass your 0 arg function to the run method of that thread</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:21:22.366600</ts>
    <user>Dann</user>
    <text>the root issue might be that you are in eg. an http server or go block some other context where new threads are created or allocated automatically to call your function</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:21:48.367000</ts>
    <user>Lowell</user>
    <text>And I thought that would be just a silly mistake, sounds I need to go deeper :smile:</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:22:12.367500</ts>
    <user>Lowell</user>
    <text>Your explanation was awesome &lt;@Dann&gt; so much thanks!</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:25:10.368400</ts>
    <user>Dann</user>
    <text>&lt;@Lowell&gt; I need to correct myself - you can pass a function to the `Thread` constructor, but you can't pass one to its `run` method - so the real fix is different</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:25:27.368600</ts>
    <user>Lowell</user>
    <text>:open_mouth:</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:25:52.369100</ts>
    <user>Dann</user>
    <text>but I'm sure ThreadManager does have the thing you need</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:26:28.369500</ts>
    <user>Dann</user>
    <text>&lt;https://cloud.google.com/appengine/docs/standard/java/javadoc/com/google/appengine/api/ThreadManager.html#createBackgroundThread-java.lang.Runnable-&gt; - this is the method you need, a clojure function of zero args is a Runnable</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:26:44.369900</ts>
    <user>Dann</user>
    <text>so it's still straightforward, just not how I initially described it</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:45:42.370600</ts>
    <user>Lowell</user>
    <text>&lt;@Dann&gt; so i've got to `(ThreadManager/createBackgroundThread (BlobstoreServiceFactory/getBlobstoreService))` after the imports
and had `com.google.appengine.api.blobstore.BlobstoreServiceImpl cannot be cast to java.lang.Runnable`</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:46:58.371200</ts>
    <user>Dann</user>
    <text>so what you do is make that call (and ancillary code if any) inside a function</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:47:31.371800</ts>
    <user>Dann</user>
    <text>`(ThreadManager/createBackgroundThread (fn [] (some-other-step) (BlobstoreServiceFactory/getBlobstoreService)))`</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:47:39.372100</ts>
    <user>Dann</user>
    <text>where (some-other-step) might not exist, of course</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:48:20.372600</ts>
    <user>Dann</user>
    <text>you may also need to explicitly call the Thread's `run` method once it has been created</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:49:36.373000</ts>
    <user>Lowell</user>
    <text>Might be something like this `(.run (ThreadManager/createBackgroundThread #(BlobstoreServiceFactory/getBlobstoreService)))` ?</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:50:09.373200</ts>
    <user>Dann</user>
    <text>right</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:50:32.373900</ts>
    <user>Dann</user>
    <text>and you probably don't want that at a top level of the ns (otherwise it runs every time the ns is loaded or compiled)</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:50:47.374300</ts>
    <user>Lowell</user>
    <text>Sure, it isn't :wink:</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:51:09.374900</ts>
    <user>Dann</user>
    <text>I was taking a literal read of "after the imports" :D</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:51:14.375100</ts>
    <user>Lowell</user>
    <text>ahahahaha</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:51:30.375600</ts>
    <user>Dann</user>
    <text>I find assuming common sense in software discussions is dangerous</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:51:38.375800</ts>
    <user>Lowell</user>
    <text>Awesome ahaha</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:51:43.376000</ts>
    <user>Lowell</user>
    <text>BUT</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:51:48.376200</ts>
    <user>Lowell</user>
    <text>`Current thread is not associated with any request and is not a background thread`</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:52:08.376400</ts>
    <user>Dann</user>
    <text>weird</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:52:55.376800</ts>
    <user>Lowell</user>
    <text>:smiling_face_with_smiling_eyes_and_hand_covering_mouth:</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:53:03.377100</ts>
    <user>Dann</user>
    <text>oh, :facepalm: you want the `.start` method, not `.run` - newb error on my part</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:54:37.377900</ts>
    <user>Dann</user>
    <text>it's a weird thing about the API that if you call the run method, the thread's code (if any) runs on your thread instead - I have never seen a design where that was useful</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:54:54.378300</ts>
    <user>Dann</user>
    <text>but start actually uses the thread object like you'd expect</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T14:59:06.378900</ts>
    <user>Jasmine</user>
    <text>I've wasted more time than I care to admit accidentally calling .run instead of .start in Java</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:00:25.379100</ts>
    <user>Dann</user>
    <text>I'm glad I'm not the only one</text>
  </message>
  <message conversation_id="627">
    <ts>2019-02-26T15:09:03.379700</ts>
    <user>Lowell</user>
    <text>well.. didn't budge</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:09:58.381300</ts>
    <user>Lowell</user>
    <text>To give more context, this is from:
&lt;https://cloud.google.com/appengine/docs/standard/java/images/#using-image&gt;</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:11:51.382200</ts>
    <user>Dann</user>
    <text>is it about other methods that need to be on google owned threads, or still the same method?</text>
  </message>
  <message conversation_id="627">
    <ts>2019-02-26T15:12:39.382700</ts>
    <user>Myrtle</user>
    <text>Came across this trick to avoid loading files at compile time: &lt;https://stackoverflow.com/a/31333821&gt;

Does that work b/c the `def`s are evaluated at compile time _and_ runtime?</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:12:57.382900</ts>
    <user>Lowell</user>
    <text>Same, the snippet here is the same one you see as the first and second line over the link</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:14:37.383000</ts>
    <user>Dann</user>
    <text>yes, that's one work around - the issue is there's no compile time / run time distinction of that sort in clojure - every time your namespace is loaded, whether it's because you are compiling your app or running it, the code inside every def runs (as well as any other top level code)</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:15:14.383200</ts>
    <user>Dann</user>
    <text>the cleaner fix is to put things that interact with the "outside world" or stateful objects inside functions, and arrange to call them via your main or other startup code</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:16:26.384000</ts>
    <user>Dann</user>
    <text>OK - I think that all the api calls related to using the blob store need to be inside the function you pass to the google thread manager</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:16:49.384500</ts>
    <user>Dann</user>
    <text>if you are doing that and still see that sort of error, you might need help from someone who knows app-engine</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:18:20.384600</ts>
    <user>Myrtle</user>
    <text>Interesting...so why evaluate anything at compile time at all?</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:19:24.384800</ts>
    <user>Dann</user>
    <text>because clojure allows you to use the full language while compiling - it's a common thing in lisps</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:19:45.385000</ts>
    <user>Dann</user>
    <text>there's no "compile only" mode other than putting something inside an fn</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T15:21:02.385200</ts>
    <user>Dann</user>
    <text>and yes, another work around is not using AOT, so that your code is only loaded when running the app (but this still causes problems when eg. linting or running tests, depending what sorts of side effects are in your def)</text>
  </message>
  <message conversation_id="626">
    <ts>2019-02-26T16:56:37.386100</ts>
    <user>Myrtle</user>
    <text>Yes, I see. The interplay b/t :clj: 's dynamism and Java's static nature always gets me :simple_smile: .</text>
  </message>
  <message conversation_id="628">
    <ts>2019-02-26T20:19:52.386400</ts>
    <user>Mireille</user>
    <text>interesting, do you have an example of this I could refer to?</text>
  </message>
  <message conversation_id="629">
    <ts>2019-02-27T01:48:44.387700</ts>
    <user>Betty</user>
    <text>Hi everyone! Has anyone encountered the `java.lang.module.FindException: Module java.xml.bind not found` error after adding: `:jvm-opts ...` and the `[javax.xml.bind/jaxb-api "2.4.0-b180830.0359"]` dependency?</text>
  </message>
  <message conversation_id="629">
    <ts>2019-02-27T01:50:50.388200</ts>
    <user>Betty</user>
    <text>Fixed it! Adding one is fine but not both.</text>
  </message>
  <message conversation_id="630">
    <ts>2019-02-27T03:01:12.389500</ts>
    <user>Mariela</user>
    <text>Anyone heard of a library that points out the slowest members in your system? (Component/Integrant)

Doesn't sound hard to build, but who knows, maybe someone already has such code</text>
  </message>
  <message conversation_id="630">
    <ts>2019-02-27T03:43:48.389700</ts>
    <user>Mariela</user>
    <text>was defnitely easy with robert-hooke.

If going for it, do all logging in a ns with `clojure.tools.namespace.repl/disable-reload!` set</text>
  </message>
  <message conversation_id="631">
    <ts>2019-02-27T04:21:11.394300</ts>
    <user>Darcel</user>
    <text>None</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:01:38.396000</ts>
    <user>Lucio</user>
    <text>G’day! I’ve got a question about database connections in a web application: where do I actually keep the connection? Putting it into a namespace is not so great for obvious reasons. Is it a common pattern to put it in a request object of a http framework?</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:02:01.396400</ts>
    <user>Lucio</user>
    <text>Most of the demo/example applications do keep the connection in a namespace :disappointed:</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:04:03.396700</ts>
    <user>Lucio</user>
    <text>(specifically speaking of compojure and monger)</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:04:56.396900</ts>
    <user>Bo</user>
    <text>Are you aware of tufte? &lt;https://github.com/ptaoussanis/tufte&gt;
I'm using this for profiling (a yada server using component)</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:08:21.397200</ts>
    <user>Mariela</user>
    <text>I'm not sure something like that would have served

I needed an answer to "of all my [Sierra] components, which one is the slowest"?

I cannot add profiling boilerplate to every single component...</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:09:24.397400</ts>
    <user>Mariela</user>
    <text>So, I have to "profile" `component/start`, which code I cannot modify

did so with robert hook, so args and `time` are logged</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:10:41.398000</ts>
    <user>Bo</user>
    <text>Right, that sounds like a good solution</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:12:05.398800</ts>
    <user>Katherina</user>
    <text>&lt;@Lucio&gt; &lt;https://github.com/tolitius/mount&gt; and &lt;https://github.com/stuartsierra/component&gt; are precisely for these scenarios</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:12:06.398900</ts>
    <user>Lucio</user>
    <text>ah, or one can create the connection in a “create-routes” method passing the connection down to handlers</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:12:44.399600</ts>
    <user>Lucio</user>
    <text>&lt;@Katherina&gt; using components?</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:13:05.400200</ts>
    <user>Lucio</user>
    <text>read about stuartsierra/component, but not about mount</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:13:05.400500</ts>
    <user>Lucio</user>
    <text>thanks</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:13:35.401200</ts>
    <user>Katherina</user>
    <text>mount is an alternative that some people prefer, both have their ways of managing state.</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:16:00.401600</ts>
    <user>Lucio</user>
    <text>ah “component” even has an example on web applications</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:16:08.401800</ts>
    <user>Lucio</user>
    <text>will check that out, thanks!</text>
  </message>
  <message conversation_id="633">
    <ts>2019-02-27T07:20:04.402200</ts>
    <user>Toccara</user>
    <text>which kafka client you are using guys in production ?</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:33:02.402300</ts>
    <user>Lucio</user>
    <text>just from contemplating the sources of “mount”: it actually “does” define a variable in the respective namespace but defers the instantiation of the actual value until you call “start” on the framework and from then on it takes care of the lifecycle</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:33:53.402600</ts>
    <user>Lucio</user>
    <text>…trying to understand the magic behind it</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:36:32.402800</ts>
    <user>Lucio</user>
    <text>sooo technically, if I don’t need lifecycle, I would just define an atom and “assign” the connection to it from somewhere later in the code. That’s what the component framework actually does under the hood</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:45:17.403300</ts>
    <user>Katherina</user>
    <text>yeah both of them make state management nicer than the manual way. Mount however tries a kinda less opinionated approach i think: &lt;https://github.com/tolitius/mount/blob/master/doc/differences-from-component.md#differences-from-component&gt;</text>
  </message>
  <message conversation_id="633">
    <ts>2019-02-27T07:51:25.403700</ts>
    <user>Elizebeth</user>
    <text>The Java one</text>
  </message>
  <message conversation_id="633">
    <ts>2019-02-27T07:51:49.404200</ts>
    <user>Mariela</user>
    <text>IIRC Mount has the drawback of failing to create isolated systems that can be run independently

e.g. what if I want to parallelize my test suite? All tests would share the same stuff</text>
  </message>
  <message conversation_id="632">
    <ts>2019-02-27T07:51:58.404500</ts>
    <user>Elizebeth</user>
    <text>With a thin wrapper we wrote around the bits of it we need to make interacting with it more 'Clojureish'</text>
  </message>
  <message conversation_id="633">
    <ts>2019-02-27T07:53:08.404600</ts>
    <user>Min</user>
    <text>Integrant is also quite nice.</text>
  </message>
  <message conversation_id="634">
    <ts>2019-02-27T08:09:11.404800</ts>
    <user>Gilberto</user>
    <text>I (and my team) bounced off duct, and by extension integrant, pretty hard. I strongly suspect component would be the same story, but it's been years since I last tried it out.

FWIW we migrated everything duct/integrant to mount in an hour and the productivity boost that we have seen from doing that has been incredible.

I find mount more amenable to just starting a part of the system, which means I can now do REPL-driven development inside the namespace I am writing, as opposed to somewhere else, followed by shipping it out when I'm done.

In short, I just find mount to be a lot closer to rolling plain Clojure without any of this stuff than the other two.</text>
  </message>
  <message conversation_id="634">
    <ts>2019-02-27T08:11:09.405800</ts>
    <user>Gilberto</user>
    <text>&lt;@Toccara&gt; We use &lt;https://github.com/dvlopt/kafka.clj&gt; which is a thin wrapper around the Java one. It even supports the Kafka Streams stuff, should one desire to use it.</text>
  </message>
  <message conversation_id="634">
    <ts>2019-02-27T08:12:35.406100</ts>
    <user>Toccara</user>
    <text>great thanks guys</text>
  </message>
  <message conversation_id="634">
    <ts>2019-02-27T08:15:53.406200</ts>
    <user>Mariela</user>
    <text>Honestly that sounds like a classic simple vs. easy contrast.

I absolutely do repl-driven dev with Component. Everyone else in the team does, and it's a diverse one (vim, emacs, cursive...)

Component/Integrant make things explicit + testable, similarly the Reloaded workflow forces you to keep things pure and non-cyclic :slightly_smiling_face:

It wasn't entirely an easy journey, here are some notes taken &lt;https://github.com/reducecombine/rehardened&gt;</text>
  </message>
  <message conversation_id="633">
    <ts>2019-02-27T08:18:38.406500</ts>
    <user>Min</user>
    <text>Your mileage may vary. We use component heavily at work and are happy with it. But I like what I read about Integrant, seems better</text>
  </message>
  <message conversation_id="634">
    <ts>2019-02-27T08:20:08.406700</ts>
    <user>Min</user>
    <text>&amp;gt; Honestly that sounds like a classic simple vs. easy contrast.
exactly</text>
  </message>
  <message conversation_id="633">
    <ts>2019-02-27T08:40:58.407000</ts>
    <user>Gilberto</user>
    <text>I agree, but my conclusion is opposite to yours - I view `mount` as simple, and integrant/component as complex. It just so happens that in this case, it is "made easy" as well.

Like you say, your mileage may vary.</text>
  </message>
  <message conversation_id="635">
    <ts>2019-02-27T09:13:35.407400</ts>
    <user>Jenine</user>
    <text>Announcing ClojuTRE 2019, September 26-27th in Helsinki, Finland. Tickets are on sale, get yours now from &lt;https://clojutre.org/2019/&gt;</text>
  </message>
  <message conversation_id="635">
    <ts>2019-02-27T09:26:14.407600</ts>
    <user>Mariela</user>
    <text>I try to avoid controversy, but it might be helpful to wonder "I say _x_ is complected, but it complects what with what? Is it a complection or a composition?"

Mount appears to complect namespaces with state. You cannot take a namespace without also taking its state, and vice versa. Other libraries keep those orthogonal: I can create state (e.g. new app instances) without creating namespaces,

That's the magic of Rich's discourse: he pursues an objective definition of simplicity, enabling more fruitful discussions :slightly_smiling_face:</text>
  </message>
  <message conversation_id="633">
    <ts>2019-02-27T09:30:10.407800</ts>
    <user>Min</user>
    <text>One is pure, the other is not. Sure it's more work to handle when pure, but that's also more powerful (testing/repl etc). Same argument can be made for functional programming and here we are, using clojure, so you might as well embrace (relative) purity. And you're free to use whatever you want, the rest is just subjective arguments (simplicity etc).</text>
  </message>
  <message conversation_id="633">
    <ts>2019-02-27T09:32:05.408200</ts>
    <user>Min</user>
    <text>On a side note, that would be cool to have first class namespaces but that's another subject</text>
  </message>
  <message conversation_id="636">
    <ts>2019-02-27T09:53:58.409100</ts>
    <user>Holly</user>
    <text>Is there any library out there with some kind of `let-debug`  that prints a debug statement after each let? :stuck_out_tongue:</text>
  </message>
  <message conversation_id="636">
    <ts>2019-02-27T09:54:08.409400</ts>
    <user>Holly</user>
    <text>```(let [a (f1)
      b (f2)]```
into
```(let [a (f1)
      _ (println "a" a)
      b (f2)
      _ (println "b" b)]```</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:09:52.410000</ts>
    <user>Jasmine</user>
    <text>there's a dlet explained at &lt;https://cambium.consulting/articles/2018/2/8/the-power-of-clojure-debugging&gt;</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:10:24.410500</ts>
    <user>Jasmine</user>
    <text>I think there are some libs out there with stuff like this, but I'm not sure which ones off the top of my head</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:13:02.410800</ts>
    <user>Holly</user>
    <text>here’s my shot:
```
(defmacro letd [bindings &amp;amp; body]
  (let [pairs (partition 2 bindings)
        dbg   (map (fn [[v value]] `(_# (println ~(str "&amp;gt;&amp;gt;" v) ~value))) pairs)
        intv  (interleave pairs dbg)
        bs    (into [] (apply concat intv))]
    (println dbg)
    `(let* ~(destructure bs) ~@body)))
```</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:14:15.411200</ts>
    <user>Holly</user>
    <text>my solution does not work with destructuring :cry: tks &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:15:14.412000</ts>
    <user>Holly</user>
    <text>I guess is one of those things, everybody quietly rolls their own :smile:</text>
  </message>
  <message conversation_id="636">
    <ts>2019-02-27T10:16:24.412500</ts>
    <user>Alleen</user>
    <text>would you have any links to share about first class namespaces &lt;@Min&gt; ?</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:17:29.413400</ts>
    <user>Min</user>
    <text>not really, it's not a thing in clojure, racket has something like that and ocaml functors come to mind (somewhat)</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:19:08.414000</ts>
    <user>Tressa</user>
    <text>til interleave. i was reducing</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:24:18.415500</ts>
    <user>Tressa</user>
    <text>```
(defmacro let-debug
  [bind-vec &amp;amp; body]
  (let [parted (partition 2 bind-vec)
        new-bind (reduce
                   (fn debugger [aggr [name value]]
                     (conj aggr
                           name value
                           '_ `(println ~(str name " is ") ~value)))
                   []
                   parted)]
    `(let ~new-bind ~@body)))
```</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:24:31.415600</ts>
    <user>Alleen</user>
    <text>I'll have to move these languages up from my learning list</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:43:09.415800</ts>
    <user>Gilberto</user>
    <text>&lt;@Min&gt; I think you are confusing purity with functional programming.

With mount we still have pure functions. The point of FP is pure functions, not pure namespaces - since namespaces are just groupings of things. Whether said groupings contain state or not is, in my humble opinion, completely beside the point of writing pure, stateless functions.

State needs to live somewhere. I don't think it matters whether it's spread across the place or living in a single namespace if you can easily get hold of it when you need it. Beyond that, it boils down to whether it forces me into a particular way of doing REPL-driven development.

And my point was that mount allows me to do it any way I like, unlike the alternatives.</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:57:33.416000</ts>
    <user>Min</user>
    <text>I am not :) But as I said it's all quite subjective arguments at this point. </text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T10:58:43.416200</ts>
    <user>Min</user>
    <text>I like to be able to pass my state around, have multiple versions of it etc, you like to shove it at the namespace level, so be it. </text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:03:50.420000</ts>
    <user>Chauncey</user>
    <text>There doesn't seem to be a channel for `clojure.java.jdbc`, so a simple question here. I need to write some code that will be generating a ton of very postgresql specific DDL.  Without meaning to slight `clojure.java.jdbc/create-table-ddl`, it is nowhere near prepared to deal with schema entity references, quoted identifiers for table or column ids, and the many _many_ options for `create table`.  Even something as simple as a column default constraint requires special quoting to use `create-table-ddl`, e.g. `[:text-col :text :default "'the default value'"]`  (note inner single quotes).

I'm just wondering if someone has written an abstraction like `create-table-ddl` that is more capable with regard to supporting the many options of `CREATE TABLE`.  If not I suppose I'll just be concatenating up a lot of strings, no time to write this dreamed-of abstraction now.</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T11:04:03.420100</ts>
    <user>Lucio</user>
    <text>I see, my original question has no clear answer, there’s some controversy about where to keep the state :smile:</text>
  </message>
  <message conversation_id="637">
    <ts>2019-02-27T11:08:39.421000</ts>
    <user>Chauncey</user>
    <text>as a reminder of the wide variety of options.</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:09:19.421400</ts>
    <user>Tressa</user>
    <text>are you dynamically generating tables?</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:15:15.421500</ts>
    <user>Gilberto</user>
    <text>I think the suggestion would be to try both `mount` and one of `component`/`integrant` and find out which one fits you better.</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:16:55.421800</ts>
    <user>Chauncey</user>
    <text>yes</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:17:09.422200</ts>
    <user>Tressa</user>
    <text>i feel your pain</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:17:17.422400</ts>
    <user>Chauncey</user>
    <text>Part of a semi-structured to structured data storage project</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:17:33.422700</ts>
    <user>Chauncey</user>
    <text>tables, schemas, partitions, the whole bit</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:18:49.423300</ts>
    <user>Darlene</user>
    <text>&lt;@Chauncey&gt; - There's also &lt;#C1Q164V29|sql&gt;, FYI.</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:19:27.424100</ts>
    <user>Chauncey</user>
    <text>On a side note, I was kind of suprised when I couldn't find a nice package that encapsulates queries on the the supposed-SQL-standard "information schema" supported by postgresql.</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:20:02.424200</ts>
    <user>Chauncey</user>
    <text>thanks, will cross post there</text>
  </message>
  <message conversation_id="638">
    <ts>2019-02-27T11:35:51.424800</ts>
    <user>Chauncey</user>
    <text>(as in, return maps of maps that represent schemas/tables/columns etc in a hierarchical view)</text>
  </message>
  <message conversation_id="639">
    <ts>2019-02-27T12:14:51.425500</ts>
    <user>Celestine</user>
    <text>&amp;gt; There doesn't seem to be a channel for `clojure.java.jdbc`, so a simple question here.
The &lt;#C1Q164V29|sql&gt; channel is for `clojure.java.jdbc` discussions, as well as general SQL questions (and also other SQL libs).</text>
  </message>
  <message conversation_id="640">
    <ts>2019-02-27T14:51:11.426900</ts>
    <user>Maximina</user>
    <text>I am trying to do some calls to https with http-kit/client , but all I get is " :message "HTTPS is not supported". What http-client lib do you guys use for async-http-requests? I need to use ssl with pkcs12</text>
  </message>
  <message conversation_id="640">
    <ts>2019-02-27T14:51:56.427000</ts>
    <user>Maximina</user>
    <text>I am on the latest version of Http-kit. I tested Clj-http before but I did not like the async-connection-manager</text>
  </message>
  <message conversation_id="640">
    <ts>2019-02-27T15:00:00.427300</ts>
    <user>Dann</user>
    <text>aleph has a client iirc</text>
  </message>
  <message conversation_id="640">
    <ts>2019-02-27T15:00:21.427500</ts>
    <user>Dann</user>
    <text>it has its own setup for async (manifold) which is similar to core.async in some ways</text>
  </message>
  <message conversation_id="640">
    <ts>2019-02-27T15:06:52.427700</ts>
    <user>Maximina</user>
    <text>i'll have a look, thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="640">
    <ts>2019-02-27T15:18:09.427900</ts>
    <user>Maximina</user>
    <text>awh yeah. Aleph looking sweet</text>
  </message>
  <message conversation_id="641">
    <ts>2019-02-27T15:46:03.428500</ts>
    <user>Antwan</user>
    <text>&lt;@Holly&gt; I cant think of a destructuring form that doesnt just use symbols</text>
  </message>
  <message conversation_id="641">
    <ts>2019-02-27T15:46:42.429400</ts>
    <user>Antwan</user>
    <text>so if you wanted that macro to log everything, you would just need to scan the thing on the left for "all symbols except _" recursively</text>
  </message>
  <message conversation_id="641">
    <ts>2019-02-27T16:12:48.429900</ts>
    <user>Holly</user>
    <text>I think ur right</text>
  </message>
  <message conversation_id="642">
    <ts>2019-02-27T19:07:16.431000</ts>
    <user>Vinnie</user>
    <text>i've been seeing obscure errors in my stacktraces like `in unnamed module of loader 'app'` since upgrading to java 11 and clojure 10. others seeing this? example: ```class clojure.lang.PersistentList cannot be cast to class clojure.lang.IFn (clojure.lang.PersistentList and clojure.lang.IFn are in unnamed module of loader 'app')```</text>
  </message>
  <message conversation_id="642">
    <ts>2019-02-27T19:08:48.432000</ts>
    <user>Vita</user>
    <text>I have seen those - my understanding is that’s just letting you know what jvm module (jigsaw and all) was responsible for the classes listed. but the exception is that you’re using a list as a function somewhere</text>
  </message>
  <message conversation_id="642">
    <ts>2019-02-27T19:09:05.432600</ts>
    <user>Vita</user>
    <text>I believe with jigsaw there’s an implicit top level module if you don’t define your own modules</text>
  </message>
  <message conversation_id="642">
    <ts>2019-02-27T19:09:12.432900</ts>
    <user>Vita</user>
    <text>presumably that’s what ‘app’ is</text>
  </message>
  <message conversation_id="642">
    <ts>2019-02-27T19:09:19.433100</ts>
    <user>Rosaline</user>
    <text>yeah, that looks like a regular error with a little extra java module information appended</text>
  </message>
  <message conversation_id="642">
    <ts>2019-02-27T19:09:35.433300</ts>
    <user>Rosaline</user>
    <text>```
user=&amp;gt; (())
Execution error (ClassCastException) at user/eval602 (REPL:1).
class clojure.lang.PersistentList$EmptyList cannot be cast to class clojure.lang.IFn (clojure.lang.PersistentList$EmptyList and clojure.lang.IFn are in unnamed module of loader 'app')
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="642">
    <ts>2019-02-27T19:16:46.434200</ts>
    <user>Jasmine</user>
    <text>That’s standard for Java ClassCastExceptions now</text>
  </message>
  <message conversation_id="642">
    <ts>2019-02-27T19:17:17.434600</ts>
    <user>Jasmine</user>
    <text>In Java 9+</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T22:55:35.436000</ts>
    <user>Loria</user>
    <text>Is there a common name for this function in Clojure?
```
(defn &amp;lt;*&amp;gt;
  [fs xs]
  (reduce-kv (fn [m k f]
               (assoc m k (f (get xs k))))
    (cond (vector? xs)      []
          (associative? xs) {})
    fs))
```</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T22:56:07.436600</ts>
    <user>Loria</user>
    <text>it applies each `f` in `fs` to each `x` in `xs` while trying to keep the original data structure</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T22:56:25.436800</ts>
    <user>Loria</user>
    <text>```
&amp;gt; (&amp;lt;*&amp;gt; [dec inc] [10 20])
[9 21]

&amp;gt; (&amp;lt;*&amp;gt; {:a dec :b inc} {:a 10 :b 20})
{:a 9, :b 21}
```</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:05:36.438600</ts>
    <user>Simonne</user>
    <text>so, I’ve seen thinks like `map-vals` that’s basically `(into {} (map (fn [[k v]] [k (f v)])) coll)`</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:06:16.439300</ts>
    <user>Simonne</user>
    <text>it’s _very_ questionable to me that there’s value in not knowing whether you have a vector or a map</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:06:29.439700</ts>
    <user>Simonne</user>
    <text>like, I _kinda_ see it, but I mostly don’t :stuck_out_tongue:</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:08:34.440200</ts>
    <user>Loria</user>
    <text>hmm ok, just realised that it's almost equivalent to
```
(defn &amp;lt;*&amp;gt; [fs xs]
  (reduce-kv update xs fs))
```</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:09:32.441700</ts>
    <user>Simonne</user>
    <text>ah :derp:</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:09:41.442100</ts>
    <user>Simonne</user>
    <text>I misinterpreted what you were doing</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:09:55.442600</ts>
    <user>Simonne</user>
    <text>(a little)</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:10:04.442800</ts>
    <user>Loria</user>
    <text>the concept is roughly equivalent to the Applicative typeclass in Haskell, or like `juxt` with multiple arguments</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:10:37.443400</ts>
    <user>Loria</user>
    <text>so I was wondering if there was a primitive for it</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:11:04.443800</ts>
    <user>Simonne</user>
    <text>not something I’ve seen before :slightly_smiling_face:</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:13:28.444300</ts>
    <user>Loria</user>
    <text>looks like `reduce-kv` doesn't work on lazy sequences though</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:15:15.445300</ts>
    <user>Loria</user>
    <text>I wonder what would be the expected behaviour for missing keys :thinking_face:</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:15:38.445500</ts>
    <user>Loria</user>
    <text>or variadic arguments</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:19:30.446400</ts>
    <user>Loria</user>
    <text>real-world example: let's say you have a map of strings, each to be parsed differently</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:20:38.447000</ts>
    <user>Loria</user>
    <text>```
(def data {:date  "2019-02-28"
           :price "$20.50"
           :id    "0a18abb7-dd4f-4aad-a49a-acb46cf23955"})

(&amp;lt;*&amp;gt; {:date  parse-date
      :price parse-currency
      :id    parse-uuid}
  data)
```</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:26:01.447900</ts>
    <user>Celestine</user>
    <text>&lt;@Loria&gt; You can use `empty` instead of that condition (from 30 minutes ago). `(empty xs)` will produce `[]` if `xs` is a vector and `{}` if `xs` is a hash map.</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:27:24.448300</ts>
    <user>Loria</user>
    <text>Thanks for the tip!</text>
  </message>
  <message conversation_id="644">
    <ts>2019-02-27T23:31:43.450700</ts>
    <user>Celestine</user>
    <text>For the above example, I'd probably be tempted to use conforming specs... ```
(s/def ::date parse-date)
(s/def ::price parse-currency)
(s/def ::id parse-uuid)
(s/conform (s/keys :req-un [::date ::price ::id]) data)``` where each of the `parse-*` functions accepted a string and either returned the parsed value or else `s/invalid`.</text>
  </message>
  <message conversation_id="644">
    <ts>2019-02-27T23:32:18.451400</ts>
    <user>Celestine</user>
    <text>(but you'll get howls of protest from the folks who say specs should not conform from string to non-string types :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:35:21.453200</ts>
    <user>Loria</user>
    <text>That's interesting, I've only used `spec` for instrumenting functions during development - is it common practice to use it in this way for actual application logic?</text>
  </message>
  <message conversation_id="644">
    <ts>2019-02-27T23:35:44.453700</ts>
    <user>Celestine</user>
    <text>Also, in the above example, what should have to keys that aren't in the parse hash map? Clojure's principles would suggest that such any additional key/value pairs should be passed through unchanged.</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:36:37.454800</ts>
    <user>Celestine</user>
    <text>We use spec very heavily in production code. We use it for API parameter validation (and we use heuristics on top of `explain-data` to produce user-facing error messages).</text>
  </message>
  <message conversation_id="644">
    <ts>2019-02-27T23:37:41.456100</ts>
    <user>Celestine</user>
    <text>We also use spec around our persistence model, to strip hash maps down to just the expected keys (which we extract from the `s/keys` in the spec via `s/form`) and that the values conform to what the database expects.</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:38:37.457200</ts>
    <user>Celestine</user>
    <text>We have three layers of spec: API parameters (conforming from string to simple values), domain model (this isn't used a huge amount right now), persistence model.</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:39:45.458600</ts>
    <user>Celestine</user>
    <text>We don't use instrumentation a great deal (we use it around some tests). We use `s/exercise` to produce "random example" data for unit tests. We have a few `st/check` tests as well, and some "occasionally run" generative tests.</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:40:16.459100</ts>
    <user>Celestine</user>
    <text>(we started using early releases of spec in production during the early 1.9 alpha cycle)</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:43:43.459800</ts>
    <user>Loria</user>
    <text>Thanks for the explanation :slightly_smiling_face: Sounds like I should start looking into `spec` more deeply</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:45:19.460500</ts>
    <user>Loria</user>
    <text>In the above case, missing keys are dealt with by passing values through unchanged if there's no corresponding function</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:45:31.460800</ts>
    <user>Loria</user>
    <text>and calling the function with `nil` if there's no corresponding value</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:46:05.461100</ts>
    <user>Loria</user>
    <text>```
(defn &amp;lt;*&amp;gt;
  "apply functions in `fs` to values in `xs`"
  [fs xs]
  (reduce-kv update xs fs))

&amp;gt; (&amp;lt;*&amp;gt; [dec inc str] [1 2 3 4 5])
[0 3 "3" 4 5]

&amp;gt; (&amp;lt;*&amp;gt; [dec inc str] [1 2])
[0 3 ""]
```</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:49:34.462100</ts>
    <user>Celestine</user>
    <text>And in the case of hash maps?</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:51:37.462500</ts>
    <user>Loria</user>
    <text>```
&amp;gt; (&amp;lt;*&amp;gt; {:a str} {:b 3})
{:b 3, :a ""}
```</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:52:01.462800</ts>
    <user>Celestine</user>
    <text>Ah, OK. Not what I expected.</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:52:30.463400</ts>
    <user>Celestine</user>
    <text>I wasn't expecting the function to _add_ new keys to the map being processed. But that's a reasonable behavior too.</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:54:24.465000</ts>
    <user>Loria</user>
    <text>I guess that using spec would return `s/invalid` or throw an exception? Unless using `opt` keys, which I recall were going to be deprecated in the future</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:55:40.465400</ts>
    <user>Celestine</user>
    <text>I don't think a decision has been made on that yet.</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:56:11.466100</ts>
    <user>Celestine</user>
    <text>Specs should return either a successfully conformed value or `s/invalid`. Throwing an exception is not useful there.</text>
  </message>
  <message conversation_id="643">
    <ts>2019-02-27T23:56:53.466900</ts>
    <user>Celestine</user>
    <text>What we do for specs that conform strings, is we wrap their parsing in `try`/`catch` and in the `catch` we return `s/invalid`.</text>
  </message>
  <message conversation_id="645">
    <ts>2019-02-28T01:50:12.001800</ts>
    <user>Loria</user>
    <text>How do I define a custom return value for `s/conform`?
E.g. I have a spec like
```
(s/def ::nested
  (s/tuple (s/tuple #{"s"} int?)))
```
and I'm only interested in the int</text>
  </message>
  <message conversation_id="645">
    <ts>2019-02-28T01:51:34.002500</ts>
    <user>Loria</user>
    <text>so I would like to have `(s/conform ::nested [["s" 123]]) =&amp;gt; 123`</text>
  </message>
  <message conversation_id="645">
    <ts>2019-02-28T01:55:00.003400</ts>
    <user>Loria</user>
    <text>(apologies if this is more suited to the beginners channel)</text>
  </message>
  <message conversation_id="645">
    <ts>2019-02-28T02:10:48.005100</ts>
    <user>Loria</user>
    <text>Also is there any way to recursively conform specs?
```
&amp;gt; (s/conform ::int-string "3")
3

&amp;gt; (s/conform (s/keys :req-un [::int-string])
    {:int-string "3"})
{:int-string "3"}
```</text>
  </message>
  <message conversation_id="645">
    <ts>2019-02-28T02:11:35.005700</ts>
    <user>Loria</user>
    <text>Google searches didn't lead me anywhere :confused:</text>
  </message>
  <message conversation_id="646">
    <ts>2019-02-28T03:44:30.006500</ts>
    <user>Elly</user>
    <text>Hey how do Clojure people run db migrations? In .NET I have my project set to auto-migrate a DB on startup in production if there is things to migrate. So I just have to git push and I'm done deploying a new version of my app.

Anything similar in Clojure?</text>
  </message>
  <message conversation_id="646">
    <ts>2019-02-28T03:46:37.008300</ts>
    <user>Leah</user>
    <text>does somebody here have experience with integrating single sign via OAuth or SAML 2? Wondering which of the many java libraries to choose. Today I only need Azure Active Directory support, but it would be handy if the library handled more…</text>
  </message>
  <message conversation_id="646">
    <ts>2019-02-28T03:48:50.008400</ts>
    <user>Katherina</user>
    <text>I used &lt;https://github.com/weavejester/ragtime&gt; worked out pretty okay for me</text>
  </message>
  <message conversation_id="646">
    <ts>2019-02-28T03:49:40.008700</ts>
    <user>Katherina</user>
    <text>I generally call the migrate function in the main which applies it everytime the server starts in an idempotent manner</text>
  </message>
  <message conversation_id="646">
    <ts>2019-02-28T03:54:44.008900</ts>
    <user>Elly</user>
    <text>&lt;@Katherina&gt; Nice, thanks</text>
  </message>
  <message conversation_id="647">
    <ts>2019-02-28T04:22:40.012400</ts>
    <user>Diedra</user>
    <text>hi guys! is there a canonical way to get a subspecification from a clojure.spec? something like get-in where you would supply a spec path? The use case is to validate the results of ´update-in´ when you have a spec for the root  without checking the entire datastruct</text>
  </message>
  <message conversation_id="647">
    <ts>2019-02-28T04:27:02.013200</ts>
    <user>Diedra</user>
    <text>I guess I could work from spec/form, but maybe there is a better way.</text>
  </message>
  <message conversation_id="648">
    <ts>2019-02-28T06:02:31.014400</ts>
    <user>Alleen</user>
    <text>&lt;https://docs.racket-lang.org/guide/units.html&gt;
is this the feature you had in mind &lt;@Min&gt; ?</text>
  </message>
  <message conversation_id="647">
    <ts>2019-02-28T07:30:55.014800</ts>
    <user>Mariela</user>
    <text>Out of a binding vector with destructuring:

```
[{::keys [foo bar]
  baz ::else/omg
  {:keys [tomato]} :potato
  :as self}]
```
...how would you get a mapping of the extracted variables to their paths? Like the following

```
{foo [::sth/foo]
 bar [::sth/bar]
 baz [::else/omg]
 tomato [:potato :tomato]
 self []}
```</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:12:57.017200</ts>
    <user>Jasmine</user>
    <text>Destructuring in macros is backed by a function called `destructure` which rewrites the binding vector into a binding vector without destructuring. It won’t give you paths but it’s halfway there</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:14:27.019300</ts>
    <user>Jasmine</user>
    <text>That function is intentionally not doc’ed (as it’s an impl detail) but it takes a binding vector and returns a binding vector so you can invoke it by quoting your vector</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:15:34.020300</ts>
    <user>Jasmine</user>
    <text>The next step of going from that binding vector to paths is probably not fun, but it’s possible</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:17:33.021000</ts>
    <user>Alleen</user>
    <text>&lt;https://gist.github.com/leonoel/e933ee2b3f1e627063ab1db90d5396f9&gt;
While reading the manual I've written a clojure implementation of the example, with injure
Feel free to comment</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:18:03.021500</ts>
    <user>Mariela</user>
    <text>thanks Alex :slightly_smiling_face:

I had played a bit down that path... and yes, didn't look very fun!</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:18:51.021600</ts>
    <user>Clarine</user>
    <text>We use &lt;https://github.com/yogthos/migratus&gt;</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:19:17.022000</ts>
    <user>Clarine</user>
    <text>Hi &lt;@Katherina&gt; - nice to meet you at ClojureD :slightly_smiling_face:</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:20:07.022200</ts>
    <user>Clarine</user>
    <text>Btw, there’s also a GraalVM version of migratus:
&lt;https://github.com/leafclick/pgmig&gt;
Should be super fast to run, didn’t try it.</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:20:29.022700</ts>
    <user>Katherina</user>
    <text>Nice to meet you too &lt;@Clarine&gt; :smile:</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:25:57.025200</ts>
    <user>Cruz</user>
    <text>what would be the best way to log an exception’s ex-data using logging? Say with logback as the logging backend. E.g when if I did
```
(log/errorf (ex-info "test" {:foo 42}))
```
and it produced something like
```
- host date | "test" {:foo 42}
```</text>
  </message>
  <message conversation_id="649">
    <ts>2019-02-28T08:27:01.025800</ts>
    <user>Cruz</user>
    <text>Does it mean I have to write my own appender or convertor class?</text>
  </message>
  <message conversation_id="650">
    <ts>2019-02-28T08:57:29.025900</ts>
    <user>Ronald</user>
    <text>Can you elaborate a little on these heuristics? We like spec but have found it very troubling to have to wrap any user-facing validation (since the messages are pretty atrocious for those who don't speak Clojure).</text>
  </message>
  <message conversation_id="651">
    <ts>2019-02-28T09:55:53.026300</ts>
    <user>Tressa</user>
    <text>what would be your expected output?</text>
  </message>
  <message conversation_id="651">
    <ts>2019-02-28T10:21:32.027500</ts>
    <user>Cruz</user>
    <text>&lt;@Tressa&gt; as I posted above, e.g. `- &amp;lt;host&amp;gt; &amp;lt;date&amp;gt; | "test" {:foo 42}`</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T12:23:53.028100</ts>
    <user>Celestine</user>
    <text>We have a hash map for each API that maps symbols (or occasionally sequences of symbols) to error codes, and we walk the `explain-data`, looking at `:path` and `:pred` and build a `reductions` of partial combinations of those, then walk that list looking for a match in our API hash map.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T12:25:13.028300</ts>
    <user>Celestine</user>
    <text>Missing parameters match to a `contains?` check on the API parameter name. Incorrect types match to a pair of the API parameter name and the spec operator, e.g., `int?`.</text>
  </message>
  <message conversation_id="653">
    <ts>2019-02-28T13:21:05.028500</ts>
    <user>Ronald</user>
    <text>Wow, that seems like a lot of work, but is sort of what I imagined would be required to prettify those. Is that code public? Thinking of building something similar at work in the medium-long term.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T13:54:53.029900</ts>
    <user>Nigel</user>
    <text>I was teaching a bunch of people Clojure. I asked them to implement the game 2048 and one of the constraints I had was to use as few `defn` as possible.  &lt;https://gist.github.com/craftybones/42f180cf753db07b6694de87f4182ece&gt;</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T13:55:13.030300</ts>
    <user>Nigel</user>
    <text>I’d appreciate it if people can critique that solution.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T13:55:23.030700</ts>
    <user>Nigel</user>
    <text>Quite a few people landed at roughly the same solution</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:00:00.031600</ts>
    <user>Dann</user>
    <text>&lt;@Nigel&gt; many of those partials could be transducer arities instead, using comp to combine them, then using a transducing context at the top level</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:00:43.032000</ts>
    <user>Nigel</user>
    <text>&lt;@Dann&gt; thanks. I hadn’t yet taught them transducers at that point, but point taken</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:01:28.032400</ts>
    <user>Nigel</user>
    <text>Also, I didn’t realise that partition returns a transducer</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:01:40.032600</ts>
    <user>Nigel</user>
    <text>Darn, so cool :slightly_smiling_face:</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:01:50.032900</ts>
    <user>Dann</user>
    <text>yeah, I think all your partials are valid transducers</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:01:58.033200</ts>
    <user>Dann</user>
    <text>your comps would need to reverse order of course</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:02:04.033400</ts>
    <user>Nigel</user>
    <text>Of course.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:02:46.034300</ts>
    <user>Nigel</user>
    <text>But ok otherwise isn’t it? Its remarkable how a game such as 2048 can be written almost entirely without a single “variable” and letting a managed stack do all the work</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:03:11.034800</ts>
    <user>Dann</user>
    <text>for transpose, there are few cases where `list` is better than `vector` and I suspect this isn't one of them</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:04:04.035500</ts>
    <user>Dann</user>
    <text>both are eager, you can easily seq on a vector, you can't easily do indexed lookup on a list</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:04:44.036100</ts>
    <user>Dann</user>
    <text>and in many cases creating a vector is lower overhead (one contiguous object instead of a linked series of allocations)</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:05:10.036800</ts>
    <user>Nigel</user>
    <text>so `(def transpose (partial apply map vector))` instead?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:05:16.037000</ts>
    <user>Dann</user>
    <text>and agreed, it's a good demonstration of how elegant and powerful higher order functions can be</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:06:13.038000</ts>
    <user>Nigel</user>
    <text>To be clear, a seq is eager, so seq on a vector and a seq on a list should theoretically be the same, so why the vector?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:06:23.038200</ts>
    <user>Dann</user>
    <text>list is eager</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:06:45.038800</ts>
    <user>Nigel</user>
    <text>But wouldn’t the seq force both?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:06:47.038900</ts>
    <user>Dann</user>
    <text>the difference is that vectors are more efficient to allocate, and they have fast indexed lookup</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:06:58.039300</ts>
    <user>Dann</user>
    <text>there's no forcing in question, both are eager</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:07:06.039500</ts>
    <user>Nigel</user>
    <text>Right. That’s what I assumed.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:07:14.039700</ts>
    <user>Nigel</user>
    <text>Ok, got it</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:07:21.040300</ts>
    <user>Nigel</user>
    <text>the allocation is the performance you are talking about</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:07:46.040800</ts>
    <user>Dann</user>
    <text>lists have few (no?) features that make them superior to vectors</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:07:57.041000</ts>
    <user>Dann</user>
    <text>the allocation and the lookup time</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:08:27.041600</ts>
    <user>Nigel</user>
    <text>lists make better stacks?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:08:42.041900</ts>
    <user>Dann</user>
    <text>vectors are great stacks, you just pile onto the end</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:08:56.042300</ts>
    <user>Nigel</user>
    <text>and peek ?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:09:00.042400</ts>
    <user>Dann</user>
    <text>peek / pop work on both vectors and lists</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:09:02.042600</ts>
    <user>Dann</user>
    <text>right</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:09:12.042900</ts>
    <user>Nigel</user>
    <text>I remember reading somewhere about peek performance.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:09:21.043200</ts>
    <user>Nigel</user>
    <text>or last. I can’t remember which</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:09:38.043600</ts>
    <user>Dann</user>
    <text>peek is faster than last, and happens to find the last element of a vector</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:09:50.043900</ts>
    <user>Nigel</user>
    <text>ok. Thanks.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:10:03.044200</ts>
    <user>Dann</user>
    <text>vectors are indexed, so all lookups by index are faster</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:10:33.045000</ts>
    <user>Dann</user>
    <text>(of course you lose this advantage by calling seq, but you are still no worse off than you were with a list)</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:10:53.045300</ts>
    <user>Nigel</user>
    <text>I am guessing lists are there primarily for homoiconicity?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:11:13.045700</ts>
    <user>Nigel</user>
    <text>and we always need more parentheses, of course</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:11:54.046600</ts>
    <user>Dann</user>
    <text>yeah, you need lists from macros (but only weird macros are built out of *direct* calls to list)</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:12:51.047600</ts>
    <user>Nigel</user>
    <text>That’s true. Regular old quoting seems to cover most needs</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:14:46.048200</ts>
    <user>Nigel</user>
    <text>Is the idea of LightTable dead? There seems to be a brave soul who every now and again revives it from the dead</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:15:03.048600</ts>
    <user>Nigel</user>
    <text>I am more interested in the idea itself even if the project doesn’t rekindle itself</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:18:29.049100</ts>
    <user>Rosaline</user>
    <text>what is the idea of lighttable?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:19:12.050200</ts>
    <user>Rosaline</user>
    <text>(like, I am familiar with the project, and have seen chris talk, etc)</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:19:19.050400</ts>
    <user>Rosaline</user>
    <text>but what do you think the idea is?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:19:30.050700</ts>
    <user>Nigel</user>
    <text>One of the things that the original video from the kickstarter campaign spoke about was a function as a unit of code as opposed to a file and the ability to live debug as you built stuff</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:19:49.051500</ts>
    <user>Nigel</user>
    <text>I thought both those ideas had a lot of merit and would have liked to see it go some distance</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:19:59.051800</ts>
    <user>Rosaline</user>
    <text>isn't that just a clojure repl?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:21:18.053900</ts>
    <user>Nigel</user>
    <text>yes and no. The repl by itself is certainly powerful, but the repl that he showcased and seemed to be aiming at was far more powerful and was real time, often highlighting values overlaid on the original code etc</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:22:28.054700</ts>
    <user>Rosaline</user>
    <text>have you seen rebl?</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:23:03.055500</ts>
    <user>Nigel</user>
    <text>I haven’t yet seen/used rebl. Is that what I want? I have the talk bookmarked and am meaning to watch it</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:23:28.056000</ts>
    <user>Rosaline</user>
    <text>it is a kind of gui data explorer</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:23:39.056700</ts>
    <user>Rosaline</user>
    <text>with repl hooks</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:24:34.058700</ts>
    <user>Rosaline</user>
    <text>I dunno, in general gui tools tend to pass me by because I do all my work ssh'ed into a vm specifically setup for work programming</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:24:57.059600</ts>
    <user>Celestine</user>
    <text>The original demo for LightTable was a radically different way to edit/work with functions -- but in testing with actual users it proved too alien/confusing so they scaled back to a much more "normal" editor experience. The main "novel" features it included were inline result display and auto-evaluation of code as you typed (which, frankly, I found a bit too dangerous/annoying and quickly turned that off).</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:25:12.060300</ts>
    <user>Rosaline</user>
    <text>so lighttable wasn't very compelling, rebl itself isn't super compelling, but it is built on some protocols which are usuable elsewhere which is kind of nice</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:25:31.060600</ts>
    <user>Nigel</user>
    <text>Ok. There was this fancy node.js repl that doesn’t seem to be maintained anymore which was quite cool as well</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:25:39.060900</ts>
    <user>Nigel</user>
    <text>Can’t remember the name now</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:25:44.061200</ts>
    <user>Celestine</user>
    <text>I think several editors provide the inline results and auto-eval options now and LT is virtually abandoned (I think).</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:26:21.062000</ts>
    <user>Nigel</user>
    <text>&lt;@Celestine&gt; - A lot of tools have this thing where they are born again later and somehow seem to catch on</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:26:47.063000</ts>
    <user>Clarine</user>
    <text>like bash</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:26:48.063100</ts>
    <user>Celestine</user>
    <text>REBL is "different" because it's in-process and it's very focused on data viewing/visualization/exploration right now. It'll be interesting to see where it goes.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:26:56.063500</ts>
    <user>Nigel</user>
    <text>&lt;@Clarine&gt; - LOL :smile:</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:27:27.064400</ts>
    <user>Nigel</user>
    <text>&lt;@Clarine&gt; - yeah, unlike fish that die and are never born again</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:27:43.065000</ts>
    <user>Nigel</user>
    <text>I’ll definitely try out REBL</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:27:49.065200</ts>
    <user>Celestine</user>
    <text>Liquid is also a very interesting project: again, it's an in-process editor, that's fairly vim-like, but written entirely in Clojure and using curses-style terminal UI (so it can run in an ssh session on a remote box, for example).</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:28:33.066000</ts>
    <user>Rosaline</user>
    <text>ed for clojure running from the repl</text>
  </message>
  <message conversation_id="654">
    <ts>2019-02-28T14:28:52.066500</ts>
    <user>Clarine</user>
    <text>btw, which is also kinda cool if you work in a terminal: &lt;https://github.com/denisidoro/floki&gt;
just spit your edn to some file and then inspect it. I’m not sure if I’ll use it, since I can inspect things with CIDER pretty well, but it’s cool that this kind of thing can be written in CLJS now</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:30:05.067900</ts>
    <user>Nigel</user>
    <text>Just hanging out in these channels is a wealth of information. Thank you &lt;@Clarine&gt; and &lt;@Celestine&gt;</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:30:05.068000</ts>
    <user>Celestine</user>
    <text>&lt;https://github.com/mogenslund/liquid&gt; -- see the demo videos for insight into the workflow. I really like it (and will like it more after it completes its transition to more vim-like key bindings!).</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:31:04.068300</ts>
    <user>Celestine</user>
    <text>I'm hoping to extract the generic heuristic code into a library and open sourcing it at some point. Right now, it's a bit tangled up with some of our proprietary code.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:31:20.068800</ts>
    <user>Nigel</user>
    <text>&lt;@Celestine&gt; - the best of vim and emacs but with Clojure instead of elisp.</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:31:22.069000</ts>
    <user>Nigel</user>
    <text>Seems cool</text>
  </message>
  <message conversation_id="652">
    <ts>2019-02-28T14:34:16.069600</ts>
    <user>Nigel</user>
    <text>This is a ridiculously cool project. &lt;@Celestine&gt;</text>
  </message>
  <message conversation_id="655">
    <ts>2019-02-28T15:39:29.069900</ts>
    <user>Jasmine</user>
    <text>lists are much faster than vectors as stacks btw</text>
  </message>
  <message conversation_id="655">
    <ts>2019-02-28T15:39:47.070100</ts>
    <user>Dann</user>
    <text>oh! - good to know</text>
  </message>
  <message conversation_id="655">
    <ts>2019-02-28T15:40:25.070300</ts>
    <user>Jasmine</user>
    <text>I mean the data structure modification is a pointer, so that should be the guess (but it's easy to see in a perf test)</text>
  </message>
  <message conversation_id="656">
    <ts>2019-02-28T15:56:40.070500</ts>
    <user>Dann</user>
    <text>using criterium and a random series of stack operations I was able to confirm that, though the difference was smaller than the smaller standard deviation</text>
  </message>
  <message conversation_id="655">
    <ts>2019-02-28T16:11:09.070700</ts>
    <user>Jasmine</user>
    <text>you'll get more variability with the vector I suspect as it will depend on how deep in the data structure you are updating</text>
  </message>
  <message conversation_id="655">
    <ts>2019-02-28T16:11:37.070900</ts>
    <user>Jasmine</user>
    <text>so for an empty vector, would likely be pretty fast, but you might see a different story on one with a few dozen elements</text>
  </message>
  <message conversation_id="657">
    <ts>2019-02-28T19:43:26.072100</ts>
    <user>Kayce</user>
    <text>from the docstring of &lt;http://clojuredocs.org/clojure.core/case&gt;
&amp;gt; Unlike cond and condp, case does a constant-time dispatch, the clauses are not considered sequentially.

can someone explain in plain English what that means?</text>
  </message>
  <message conversation_id="657">
    <ts>2019-02-28T19:44:56.072600</ts>
    <user>Dann</user>
    <text>it jumps to the condition, rather than linearly checking the conditions one at a time</text>
  </message>
  <message conversation_id="657">
    <ts>2019-02-28T19:45:24.073200</ts>
    <user>Dann</user>
    <text>it compiles to effectively (or maybe literally) a hash-map lookup on the dispatch value</text>
  </message>
  <message conversation_id="655">
    <ts>2019-02-28T21:06:08.074200</ts>
    <user>Jasmine</user>
    <text>the jvm has two bytecodes supporting "switch" - one is a linear series of checks, the other is effectively a constant time jump table keyed off of hashcode</text>
  </message>
  <message conversation_id="655">
    <ts>2019-02-28T21:06:24.074600</ts>
    <user>Jasmine</user>
    <text>Clojure's case does a ridiculous amount of work to use the latter</text>
  </message>
  <message conversation_id="655">
    <ts>2019-03-01T00:40:25.084300</ts>
    <user>Antione</user>
    <text>That got me scrolling through my phone to find the case source, which stirred up a couple of questions/comments:

1.) some?, if-some, when-some— do people use these often? I don’t, personally. Anyone have insight as to why they made it into core? I think I saw an added in 1.6, which makes me guess at it being related to transducers?

2.) `mod`’s docstring has a line “Truncates toward negative infinity.” Could someone explain that to me, and perhaps provide an example of why it’s important to know?</text>
  </message>
  <message conversation_id="658">
    <ts>2019-03-01T02:00:12.086100</ts>
    <user>Alleen</user>
    <text>I prefer `if-some` and `when-some` over `if-let` and `when-let` almost every time</text>
  </message>
  <message conversation_id="658">
    <ts>2019-03-01T02:01:20.087300</ts>
    <user>Alleen</user>
    <text>if I remember correctly the reason why they were added was because `core.async` channels impose `nil` as the end-of-stream sentinel</text>
  </message>
  <message conversation_id="658">
    <ts>2019-03-01T02:03:46.089400</ts>
    <user>Mariela</user>
    <text>&amp;gt; I prefer `if-some` and `when-some` over `if-let` and `when-let` almost every time

yes I've met other clj programmers following that style

It might boil down to Java-like vs. Lisp-like boolean semantics (in Java there's no 'truthiness' - just true and false can be used in conditions). Some people prefer Java-like</text>
  </message>
  <message conversation_id="658">
    <ts>2019-03-01T02:10:08.089500</ts>
    <user>Latonya</user>
    <text>I typically avoid calling modulo/remainder or division operations on negative numbers, to avoid having to know, and because applications I have written didn't need such operations on negative numbers.  But this page on the divide and modulo behavior in various flavors of C/C++ might answer some of your question: &lt;http://www.microhowto.info/howto/round_towards_minus_infinity_when_dividing_integers_in_c_or_c++.html&gt;</text>
  </message>
  <message conversation_id="659">
    <ts>2019-03-01T07:05:37.101500</ts>
    <user>Jaimee</user>
    <text>Hi! Anybody knows of a clojure nlp library with things like RAKE/LDA?</text>
  </message>
  <message conversation_id="659">
    <ts>2019-03-01T07:31:07.101800</ts>
    <user>Clarine</user>
    <text>&lt;@Jaimee&gt; I’d take a look at &lt;https://stanfordnlp.github.io/CoreNLP/&gt;</text>
  </message>
  <message conversation_id="659">
    <ts>2019-03-01T07:39:07.102000</ts>
    <user>Jaimee</user>
    <text>Thank you! I actually know about corenlp but it doesn't have LDA nor RAKE. I know Spark has LDA but I'd like to avoid to massive overhead Spark creates... Worst case I'll go an implement it...</text>
  </message>
  <message conversation_id="660">
    <ts>2019-03-01T07:39:58.102200</ts>
    <user>Clarine</user>
    <text>I saw something about LDA mentioned in the JavaDoc of CoreNLP, that’s why I thought it may be relevant, but maybe not.</text>
  </message>
  <message conversation_id="661">
    <ts>2019-03-01T08:50:58.105800</ts>
    <user>Epifania</user>
    <text>I'm trying to find any previous implementations (or some library I could steal ideas from) for having a pipeline which basically all functions inside this pipeline depends on the previous step and also have side-effects. Goes something like `fetch source -&amp;gt; build -&amp;gt; report status` but with a bit more steps in-between. Any previous art or thoughts on the subject are welcome! I've looked at some implementations using `async/pipeline` but feels like over-engineering for my case, no need for it to be async</text>
  </message>
  <message conversation_id="662">
    <ts>2019-03-01T09:35:21.106200</ts>
    <user>Tiesha</user>
    <text>If I understand your requirement, I’ve done similar before simply using thread-first, passing a context as I go: ```(-&amp;gt; initial-context fetch-data parse-data categorise send)```</text>
  </message>
  <message conversation_id="661">
    <ts>2019-03-01T09:35:58.106400</ts>
    <user>Epifania</user>
    <text>Ah, basically build up some context map that contains all the parts that are needed? Actually not a bad idea</text>
  </message>
  <message conversation_id="661">
    <ts>2019-03-01T09:36:18.106600</ts>
    <user>Epifania</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="661">
    <ts>2019-03-01T09:36:34.106800</ts>
    <user>Tiesha</user>
    <text>Yep exactly.  You’re welcome :slightly_smiling_face:</text>
  </message>
  <message conversation_id="663">
    <ts>2019-03-01T12:35:01.107400</ts>
    <user>Ronald</user>
    <text>I think that would definitely help improve practicality of spec</text>
  </message>
  <message conversation_id="664">
    <ts>2019-03-01T13:10:57.110200</ts>
    <user>Neoma</user>
    <text>I couldn’t find `clojure.java.jdbc` channel, so asking here: At the time of table creation, if I provide `[:age :int :default 18]` then jdbc throws error, but it accepts `"18"`, which is logically incorrect. How to handle this?</text>
  </message>
  <message conversation_id="664">
    <ts>2019-03-01T13:11:48.110400</ts>
    <user>Dann</user>
    <text>the channel for jdbc is &lt;#C1Q164V29|sql&gt;</text>
  </message>
  <message conversation_id="664">
    <ts>2019-03-01T13:12:07.110600</ts>
    <user>Neoma</user>
    <text>oh okay, thanks</text>
  </message>
  <message conversation_id="663">
    <ts>2019-03-01T14:00:43.111100</ts>
    <user>Celestine</user>
    <text>&lt;@Ronald&gt; Have you looked at `expound`?</text>
  </message>
  <message conversation_id="663">
    <ts>2019-03-01T14:07:04.111300</ts>
    <user>Ronald</user>
    <text>I have, and I think it's pretty solid. But for a lot of purposes I want to leak even less Clojure/spec stuff in error messages. So if a user sends JSON to my application and gets back this error message, they aren't confused by seeing the actual keys, maps, predicates etc. that I used internally.</text>
  </message>
  <message conversation_id="663">
    <ts>2019-03-01T14:07:30.111500</ts>
    <user>Ronald</user>
    <text>For me that's just meant trying my best to wrap any `spec` checks and give "Clojure-free" messages, but it's tedious and failure-prone</text>
  </message>
  <message conversation_id="663">
    <ts>2019-03-01T14:09:06.111800</ts>
    <user>Ronald</user>
    <text>Maybe there isn't really a great solution, since failing a spec inherently means getting "you were missing key `:some-key` in `some-map`", and you can't really send that out to the world without revealing internals of Clojure code</text>
  </message>
  <message conversation_id="663">
    <ts>2019-03-01T14:14:15.112100</ts>
    <user>Celestine</user>
    <text>If you need to produce domain-specific error messages, you pretty much have to have domain-specific heuristic code... but if I can reduce it to generic data walking and lookup + a simple hash map, then it would be worth releasing as an OSS lib...</text>
  </message>
  <message conversation_id="663">
    <ts>2019-03-01T14:20:25.112300</ts>
    <user>Ronald</user>
    <text>Yes I think so (on both accounts)</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T14:57:35.115200</ts>
    <user>Delcie</user>
    <text>I'm making myself crazy with this... I'm using clojure.data.json to create a json string. The string I want to create looks like this:
{"query":
   {"field":
       {"text": "123",</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T14:57:48.115500</ts>
    <user>Delcie</user>
    <text>Sorry, hit the wrong key. Let me try again.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T14:58:29.116100</ts>
    <user>Delcie</user>
    <text>{"query":
  {"field":
      {"text": "123",
       "title":  "ABC"}
  }
}</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:00:03.117500</ts>
    <user>Delcie</user>
    <text>the json/write-str I use looks like this:
(json/write-str {:query {:field {:text "123", :title "ABC}}})</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:00:44.117900</ts>
    <user>Delcie</user>
    <text>But I keep getting
"No value for key" error on the generation.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:00:56.118300</ts>
    <user>Delcie</user>
    <text>I've tried just about every combination I can think of, with no joy.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:01:03.118700</ts>
    <user>Dann</user>
    <text>is the " after C missing in your original?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:01:03.118800</ts>
    <user>Delcie</user>
    <text>Does someone see something I'm missing?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:01:21.119100</ts>
    <user>Delcie</user>
    <text>No, it's there. Just a typo.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:02:35.120300</ts>
    <user>Rosaline</user>
    <text>```
user=&amp;gt; ((fn [&amp;amp; {:as m}]) 1)
Execution error (IllegalArgumentException) at user$eval1467$fn__1469/doInvoke (REPL:1).
No value supplied for key: 1
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:03:10.121100</ts>
    <user>Dann</user>
    <text>```egret.run=&amp;gt; (j/write-str {:query {:text "123", :title "ABC"}})
"{\"query\":{\"text\":\"123\",\"title\":\"ABC\"}}"
egret.run=&amp;gt; (println *1)
{"query":{"text":"123","title":"ABC"}}
nil
egret.run=&amp;gt; (j/write-str {:query {:text "123", :title "ABC"}} :foo)
IllegalArgumentException No value supplied for key: :foo  clojure.lang.PersistentHashMap.create (PersistentHashMap.java:77)

```</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:03:12.121300</ts>
    <user>Dann</user>
    <text>extra arg, yeah</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:03:36.121900</ts>
    <user>Delcie</user>
    <text>It seems to me that query is matched by field, field is matched by the object containing text and title. Everything has a key value. The original JSON validates. It just doesn't work with json/write-str. Very odd.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:03:49.122300</ts>
    <user>Dann</user>
    <text>you are providing the wrong number of args to write-str</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:04:04.122700</ts>
    <user>Rosaline</user>
    <text>what does the stacktrace say?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:04:15.123000</ts>
    <user>Delcie</user>
    <text>Where did the :foo come from in your example?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:04:24.123300</ts>
    <user>Dann</user>
    <text>it's how you make that error message happen</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:04:52.124100</ts>
    <user>Delcie</user>
    <text>Ah. Is there a better way to make sub-objects in a JSON string with json/write-str?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:04:59.124200</ts>
    <user>Rosaline</user>
    <text>you have supplied the error message, which says what the error is, but the stacktrace will tell you where the error is actually happening</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:05:37.124500</ts>
    <user>Dann</user>
    <text>what does this mean?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:06:36.125800</ts>
    <user>Delcie</user>
    <text>IllegalArgumentException no value supplied for key:
then: clojure.lang.PersistentArrayMap.createAsIfByAssoc (PersistentArrayMap.java:79)</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:07:01.126200</ts>
    <user>Dann</user>
    <text>`*e` will contain the full trace</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:07:15.126500</ts>
    <user>Delcie</user>
    <text>That's the whole stack trace (this is in the repl)</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:07:25.126700</ts>
    <user>Dann</user>
    <text>that's not a stack trace, it's a message</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:07:29.127000</ts>
    <user>Dann</user>
    <text>*e contains the trace</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:07:34.127200</ts>
    <user>Delcie</user>
    <text>Never mind, I see it.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:09:28.127500</ts>
    <user>Delcie</user>
    <text>Here's the whole thing:
at [clojure.lang.PersistentArrayMap createAsIfByAssoc "PersistentArrayMap.java" 79]}]
 :trace
 [[clojure.lang.PersistentArrayMap createAsIfByAssoc "PersistentArrayMap.java" 79]
  [clojure.core$array_map invokeStatic "core.clj" 4256]
  [clojure.core$array_map doInvoke "core.clj" 4249]
  [clojure.lang.RestFn applyTo "RestFn.java" 137]
  [clojure.core$apply invokeStatic "core.clj" 646]
  [clojure.core$apply invoke "core.clj" 641]
  [clojurewerkz.elastisch.arguments$__GT_opts invokeStatic "arguments.clj" 9]
  [clojurewerkz.elastisch.arguments$__GT_opts invoke "arguments.clj" 3]
  [clojurewerkz.elastisch.rest.percolation$register_query invokeStatic "percolation.clj" 30]
  [clojurewerkz.elastisch.rest.percolation$register_query doInvoke "percolation.clj" 25]
  [clojure.lang.RestFn invoke "RestFn.java" 467]
  [esearch.handler$get_register_search invokeStatic "handler.clj" 124]
  [esearch.handler$get_register_search invoke "handler.clj" 119]
  [mysql.core$eval11790 invokeStatic "form-init1224899402989498950.clj" 1]
  [mysql.core$eval11790 invoke "form-init1224899402989498950.clj" 1]
  [clojure.lang.Compiler eval "Compiler.java" 6927]
  [clojure.lang.Compiler eval "Compiler.java" 6890]
  [clojure.core$eval invokeStatic "core.clj" 3105]
  [clojure.core$eval invoke "core.clj" 3101]
  [clojure.main$repl$read_eval_print__7408$fn__7411 invoke "main.clj" 240]
  [clojure.main$repl$read_eval_print__7408 invoke "main.clj" 240]
  [clojure.main$repl$fn__7417 invoke "main.clj" 258]
  [clojure.main$repl invokeStatic "main.clj" 258]
  [clojure.main$repl doInvoke "main.clj" 174]
  [clojure.lang.RestFn invoke "RestFn.java" 1523]
  [nrepl.middleware.interruptible_eval$evaluate invokeStatic "interruptible_eval.clj" 79]
  [nrepl.middleware.interruptible_eval$evaluate invoke "interruptible_eval.clj" 55]
  [nrepl.middleware.interruptible_eval$interruptible_eval$fn__764$fn__768 invoke "interruptible_eval.clj" 142]
  [clojure.lang.AFn run "AFn.java" 22]
  [nrepl.middleware.session$session_exec$main_loop__865$fn__867 invoke "session.clj" 171]
  [nrepl.middleware.session$session_exec$main_loop__865 invoke "session.clj" 170]
  [clojure.lang.AFn run "AFn.java" 22]
  [java.lang.Thread run "Thread.java" 748]]}</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:09:53.127700</ts>
    <user>Delcie</user>
    <text>esearch.handler is my code.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:10:42.128100</ts>
    <user>Dann</user>
    <text>so this problem has nothing to do with data.json</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:11:22.128500</ts>
    <user>Delcie</user>
    <text>Probably not, but I presume that people have built JSON like this before with data.json..</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:11:43.128800</ts>
    <user>Delcie</user>
    <text>I'm just looking for what I'm doing wrong in my write-str.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:11:57.129200</ts>
    <user>Dann</user>
    <text>write-str has nothing to do with that error</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:12:25.129800</ts>
    <user>Delcie</user>
    <text>write-str triggers it, that's all I know.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:12:40.130100</ts>
    <user>Dann</user>
    <text>if that were true, write-str would be in the stack trace</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:14:07.131100</ts>
    <user>Delcie</user>
    <text>I'd think so. It could be when it gets passed to ElasticSearch. Maybe something goes wrong there.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:14:44.132300</ts>
    <user>Dann</user>
    <text>what does -&amp;gt;opts do and how is it being called?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:14:58.132800</ts>
    <user>Celestine</user>
    <text>You are most likely realizing a lazy sequence that was created somewhere else.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:15:01.133000</ts>
    <user>Delcie</user>
    <text>I think one problem might be that the values for title and text aren't simple like "123". They are 1024 character strings containing search terms that may or may not have foreign characters in them.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:15:19.133500</ts>
    <user>Celestine</user>
    <text>And the error is in what you passed to the code that created that lazy sequence.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:15:38.133800</ts>
    <user>Delcie</user>
    <text>That's a reasonable idea.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:17:27.135100</ts>
    <user>Margit</user>
    <text>Is `-Dclojure.compile.warn-on-reflection` property supposed to work? If so, what effect should it have? I supposed it will set the reflection warning dynvar for all namespaces by default, but it doesn't seem to.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:18:23.136900</ts>
    <user>Celestine</user>
    <text>&lt;@Delcie&gt; have you shown us exactly what code is on line 124 of `esearch.handler`?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:20:33.138500</ts>
    <user>Celestine</user>
    <text>`-Dclojure.compile.warn-on-reflection=true` should work.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:21:02.139000</ts>
    <user>Dann</user>
    <text>```$ clj -J-Dclojure.compile.warn-on-reflection=true
Clojure 1.10.0
(cmd)user=&amp;gt; *warn-on-reflection*
false
```</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:21:05.139200</ts>
    <user>Delcie</user>
    <text>this is Elastisch, submitting a query to the ElasticSearch percolator:
(pcl/register-query conn index rowid json)
That's on line 124. 'json' is the output of data.json. index and rowid are strings.</text>
  </message>
  <message conversation_id="666">
    <ts>2019-03-01T15:22:02.139300</ts>
    <user>Madeleine</user>
    <text>I think it only sets it when compiling </text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:22:22.139500</ts>
    <user>Celestine</user>
    <text>Ah, yes, that's it.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:28:38.140100</ts>
    <user>Celestine</user>
    <text>Which version of Elastisch are you using? The stack trace does not match the latest version.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:30:37.140800</ts>
    <user>Celestine</user>
    <text>It looks to me like `register-query` expects kw-args style arguments, i.e., named arguments, not a single JSON map.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:30:48.140900</ts>
    <user>Madeleine</user>
    <text>So its not controlling the value of `*warn-on-reflection*`, it is just looked up as well by the compiler when compiling to decide if it should emit or not the warnings.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:30:56.141400</ts>
    <user>Delcie</user>
    <text>Elastisch is 2.2.1</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:31:19.142300</ts>
    <user>Delcie</user>
    <text>Really, I didn't see that in the docs. That is very helpful to know.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:31:21.142400</ts>
    <user>Celestine</user>
    <text>Yes. Then you're calling it per the 3.x API, instead of the 2.x API.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:31:40.142600</ts>
    <user>Celestine</user>
    <text>&lt;https://github.com/clojurewerkz/elastisch/blob/2.2.x-stable/src/clojurewerkz/elastisch/rest/percolation.clj#L27&gt;</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:31:57.143200</ts>
    <user>Celestine</user>
    <text>`&amp;amp; args` is expected to be unrolled keyword args, not a map.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:32:11.143600</ts>
    <user>Celestine</user>
    <text>In Elastisch 3.x, this call changed to accept a single hash map of `opts`</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:32:28.143800</ts>
    <user>Celestine</user>
    <text>&lt;https://github.com/clojurewerkz/elastisch/blob/3.0.x-stable/src/clojurewerkz/elastisch/rest/percolation.clj#L27&gt;</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:32:54.144300</ts>
    <user>Celestine</user>
    <text>So you either need to change your call or update to 3.x.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:33:09.144500</ts>
    <user>Delcie</user>
    <text>I'll try both. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:34:34.145200</ts>
    <user>Delcie</user>
    <text>Well, updating Elastisch to 3.0.0 didn't fix it. Same problem. I'll try keyword args rather than the JSON.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:34:57.145500</ts>
    <user>Celestine</user>
    <text>It should be a hash map not a JSON string.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:35:26.146100</ts>
    <user>Celestine</user>
    <text>Here's the commit that changed the kwargs to option hash maps across the whole of Elastisch in May 2016 &lt;https://github.com/clojurewerkz/elastisch/commit/f3ea4289b9a9cb37a491f0a3a2df4ec6388d27ae#diff-62e296465e10f4b062c0484560be3e12&gt;</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:37:21.147000</ts>
    <user>Celestine</user>
    <text>So `(pcl/register-query conn index rowid {:query {:text "123" :title "ABC"}})` for 3.x or `(pcl/register-query conn index rowid :query {:text "123" :title "ABC"})` for 2.x.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T15:44:08.147800</ts>
    <user>Delcie</user>
    <text>Thanks that's very helpful. OF course our ElasticSearch servers just went down so I'll have to test later. My localhost ES doesn't have enough data for what I'm doing.</text>
  </message>
  <message conversation_id="667">
    <ts>2019-03-01T16:01:20.148800</ts>
    <user>Magdalena</user>
    <text>[ANN] Cognitect Labs' aws-api 0.8.273 is now available: &lt;https://groups.google.com/forum/#!topic/clojure/PgnJxiam_qk&gt;</text>
  </message>
  <message conversation_id="667">
    <ts>2019-03-01T16:02:49.149800</ts>
    <user>Dona</user>
    <text>this is pure gush but i just got my first full-time clojure gig and am incredibly excited. thanks for being such a thoughtful, curious community :lambdalove:</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:03:43.150500</ts>
    <user>Delcie</user>
    <text>&lt;@Celestine&gt; I have to thank you. That one post about 3.x vs. 2.x was the key. It's fixed now.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:04:01.150900</ts>
    <user>Delcie</user>
    <text>&lt;@Dona&gt; Congratulations! That's pretty exciting.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:24:15.154500</ts>
    <user>Celestine</user>
    <text>&lt;@Delcie&gt; This is a good example of why Rich is such a strong advocate of accretion, relaxation, and fixation -- rather than _breakage_. Admittedly, Elastisch did a major version change to signal "potential breakage" per so-called Semantic Versioning, but it really does show that you never really know whether updating to a new major version is "safe" or not -- and changes like this make it hard to trust the docs, unless they are also fully versioned for every new release.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:26:22.156200</ts>
    <user>Celestine</user>
    <text>(That said, my "flagship" Clojure project, `clojure.java.jdbc` also went through two rounds of API breakage -- to move to a more idiomatic API -- and, in fact, it was precisely the same changes that Elastisch made, switching from keyword arguments to an options hash map!)</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:28:21.157900</ts>
    <user>Delcie</user>
    <text>That's true. I use your java.jdbc as well. Many times reading code is all that really works. Still, in my job I'm often trying to hack together something needed in a matter of hours, and I rely on docs to get things started probably more often than I should.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:28:43.158200</ts>
    <user>Delcie</user>
    <text>(I write mostly back end data moving stuff)</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:29:40.158500</ts>
    <user>Shonda</user>
    <text>Nice, congratulations!</text>
  </message>
  <message conversation_id="668">
    <ts>2019-03-01T16:31:30.158700</ts>
    <user>Margit</user>
    <text>&lt;@Madeleine&gt; So it seems like I can't use it to check all namespaces for warnings. Sad.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:39:02.158900</ts>
    <user>Celestine</user>
    <text>`clojure -J-Dclojure.compile.warn-on-reflection=true -e "(compile 'entry.point)"` should do it &lt;@Margit&gt;?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:46:02.159500</ts>
    <user>Celestine</user>
    <text>(you'll need a `classes` folder for it to compile into -- or else add a `binding` call around the `compile` for `*compile-path*`)</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:52:42.164000</ts>
    <user>Celestine</user>
    <text>I don't think I've broken the `java.jdbc` API in about two and a half years now, but 2016 and 2013 were bumpy years for the API :slightly_smiling_face:</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:53:51.165600</ts>
    <user>Celestine</user>
    <text>(unfortunately there are still a lot of books and tutorials out there containing 0.2.x examples which haven't worked since 2013 :disappointed: )</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:55:49.167100</ts>
    <user>Donovan</user>
    <text>I saw the following spec in some code and I was wondering what the `or` was supposed to do.
```
(s/def ::my-string string?)
(s/def ::my-int integer?)
(s/def ::my-spec (s/keys :req-un [(or ::my-string ::my-int)]))
```
I generated a few samples using `clojure.spec.gen.alpha/generate` and saw that it does not yield the same results in Clojure 1.9 and 1.10.
In 1.9, it always returns maps with both keys (which looks like a bug :thinking_face:)
In 1.10, it returns maps with either `::my-string` key, `::my-int` or both (which looks like a normal `or`)

What is the expected behavior?</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:56:19.167600</ts>
    <user>Clarine</user>
    <text>&lt;@Celestine&gt; I recently learned about clojure.jdbc. Are you aware of it and its criticisms of java.jdbc?
&lt;https://funcool.github.io/clojure.jdbc/latest/#why-another-jdbc-wrapper&gt;</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:57:13.168100</ts>
    <user>Clarine</user>
    <text>FWIW I still use java.jdbc but I thought it might be worth sharing</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:58:57.169300</ts>
    <user>Dann</user>
    <text>I find it odd and annoying that the clojure.jdbc docs call clojure.java.jdbc java.jdbc, and that the project picked a name such that many discussions about using jdbc with clojure now look ambiguous</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T16:59:07.169600</ts>
    <user>Dann</user>
    <text>I haven't used it at all though</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T17:03:32.169900</ts>
    <user>Clarine</user>
    <text>yeah, we can refer to it as funcool jdbc :wink:</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T17:04:00.170000</ts>
    <user>Jasmine</user>
    <text>well first,  the or here is not xor, so the generated examples in 1.9 are still "correct". in 1.10, it was updated  to include either or potentially both.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T17:04:41.170200</ts>
    <user>Jasmine</user>
    <text>so, expected behavior is its current behavior</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T17:05:28.170700</ts>
    <user>Donovan</user>
    <text>Great, thanks for your answer </text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T17:06:19.171400</ts>
    <user>Donovan</user>
    <text>It seems like the `valid?` function behaves the same way on this spec, though</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T17:10:54.171700</ts>
    <user>Donovan</user>
    <text>So in 1.9, it generates only one case (both keys) of the 3 valid ones (first key, second key, both keys)</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T17:17:37.171900</ts>
    <user>Celestine</user>
    <text>Are you aware that it started life by copying code from `clojure.java.jdbc` and ripping out the license and copyright? I had to call the guy out on the main Clojure Google Group for that.</text>
  </message>
  <message conversation_id="665">
    <ts>2019-03-01T17:20:30.172300</ts>
    <user>Celestine</user>
    <text>&lt;https://groups.google.com/d/topic/clojure/Louc1PRdb_s/discussion&gt;</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:26:01.174400</ts>
    <user>Celestine</user>
    <text>Also, it's criticisms are mostly out of date (and will be completely irrelevant when `next.jdbc` comes out which I've been working on a for a while). And it hasn't had any code updates in three years now (and only minor doc updates that were two years ago) -- so I'd say it's abandoned at this point.</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:26:22.174600</ts>
    <user>Celestine</user>
    <text>&lt;@Clarine&gt; ^</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:36:23.175100</ts>
    <user>Clarine</user>
    <text>great, thanks. So yes, you were aware, now I know :wink:</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:39:08.175600</ts>
    <user>Clarine</user>
    <text>didn’t know there was this “drama” associated with it. I just saw someone mentioning it on clojureverse</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:41:04.176400</ts>
    <user>Clarine</user>
    <text>Somewhere he said:
&amp;gt; Currently I have removed all taken code from the clojure.java.jdbc, license problem should be solved.
I wonder with what he replaced that code then</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:43:04.176900</ts>
    <user>Celestine</user>
    <text>I won't comment on that... for legal reasons...</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:43:48.177200</ts>
    <user>Clarine</user>
    <text>fine, we can close this topic</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:45:01.178100</ts>
    <user>Celestine</user>
    <text>Where it was mentioned on ClojureVerse, I also pointed out that the original code was ripped off, BTW. &lt;https://clojureverse.org/t/next-jdbc-early-notes/3480/5&gt; Or is there another thread that mentions it?</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:45:43.178400</ts>
    <user>Clarine</user>
    <text>I’ll see if I can find this</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:46:04.178900</ts>
    <user>Celestine</user>
    <text>(that's the only thread that search finds where it seems to be mentioned)</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:46:43.179100</ts>
    <user>Jasmine</user>
    <text>yes, we improved it</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:47:32.180000</ts>
    <user>Tammera</user>
    <text>thats so uncool, not attributing code. Even disregarding the legal implications</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:47:49.180300</ts>
    <user>Clarine</user>
    <text>or maybe it was on Reddit… or Zulip… or Slack… I forgot, sorry :confused:</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:48:37.181000</ts>
    <user>Celestine</user>
    <text>I think I saw a mention on Reddit (and also linked to the Google Group thread there about the code being ripped off in the early versions).</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:49:25.182000</ts>
    <user>Clarine</user>
    <text>yeah, I think it was this one: &lt;https://www.reddit.com/r/Clojure/comments/ao8hlb/using_databases_in_clojure_a_lot_of_options/&gt;</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:50:05.182700</ts>
    <user>Clarine</user>
    <text>This was the comment: &lt;https://www.reddit.com/r/Clojure/comments/ao8hlb/using_databases_in_clojure_a_lot_of_options/efzpxxj/&gt;
and I see 3 days later you reacted on it. I think I missed that.</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:50:07.182900</ts>
    <user>Tammera</user>
    <text>derivation is at the heart of open source, but not by copying others work and posing it as your own</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:50:33.183400</ts>
    <user>Celestine</user>
    <text>I try to catch every mention of it I can. As someone who's been doing OSS development for over twenty five years, I'm very sensitive to the issues of licensing and plagiarization :angry:</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:51:46.184100</ts>
    <user>Clarine</user>
    <text>Rightly so. Sorry man, didn’t want to trigger you into a bad mood.</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:52:46.185000</ts>
    <user>Celestine</user>
    <text>We're good. I'm just listening to Amanda Palmer's new album so not much is going to dampen my enthusiasm today :slightly_smiling_face:</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:53:48.185800</ts>
    <user>Dann</user>
    <text>legal issues aside, it's a disrespectful way to engage with a project whose work is leveraged that heavily</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:54:38.186200</ts>
    <user>Clarine</user>
    <text>that’s totally (f)uncool</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:58:25.188600</ts>
    <user>Clarine</user>
    <text>(sorry, bad joke :wink: )</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:58:37.188900</ts>
    <user>Kirsten</user>
    <text>this went from technical to legal issues ( but the technical part was never talked about )</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T17:59:15.189000</ts>
    <user>Tammera</user>
    <text>or ethical :stuck_out_tongue:</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:00:31.189800</ts>
    <user>Celestine</user>
    <text>As technical people, we'd do well to remember there are ethical and legal aspects to our work a lot of the time... for example &lt;http://2018.clojure-conj.org/keynote-speaker-rebecca-parsons/&gt;</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:01:19.190100</ts>
    <user>Tammera</user>
    <text>I often cite ‘computer ethics’ as the most influential course in my masters</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:08:46.190500</ts>
    <user>Clarine</user>
    <text>which uni? my uni also paid quite some attention to it</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:09:34.190700</ts>
    <user>Tammera</user>
    <text>University of Twente (Enschede, The Netherlands)</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:11:32.191000</ts>
    <user>Clarine</user>
    <text>Yep, that’s where I was too :slightly_smiling_face:</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:13:31.191300</ts>
    <user>Tammera</user>
    <text>Also had lectures from Johnny Søraker? Its such a shame that he’s no longer at the uni…</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:14:00.191600</ts>
    <user>Clarine</user>
    <text>I graduated in 2005</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:14:07.191800</ts>
    <user>Clarine</user>
    <text>Don’t know the name.</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:16:20.192100</ts>
    <user>Tammera</user>
    <text>yeah probably not, I think he started teaching around 2006. Anyhow, cool to hear that this has been a trait of the UT for so long. I still believe that having a good ethics course is great for a computer scientist.</text>
  </message>
  <message conversation_id="670">
    <ts>2019-03-01T18:20:37.192500</ts>
    <user>Celestine</user>
    <text>Small world :slightly_smiling_face:</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T18:24:40.192700</ts>
    <user>Tammera</user>
    <text>Quite, moreso because the university we went to is one of the smaller of The Netherlands</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T23:03:54.192900</ts>
    <user>Madeleine</user>
    <text>You can use `run!` or `doseq` for that.</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T23:09:42.193100</ts>
    <user>Madeleine</user>
    <text>For example, you can do:

```
(run! #(%) [f1 f2 f3])
```
or
```
(doseq [f [f1 f2 f3]]
  (f))
```</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T23:35:01.194400</ts>
    <user>Madeleine</user>
    <text>What user was that? Almost makes me want to avoid all funcool lib</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-01T23:43:15.194700</ts>
    <user>Madeleine</user>
    <text>It could be a liability to do so</text>
  </message>
  <message conversation_id="669">
    <ts>2019-03-02T00:27:27.195300</ts>
    <user>Celestine</user>
    <text>&lt;@Madeleine&gt; As far as I'm aware, it was just the one guy, called out in the thread I linked to...</text>
  </message>
  <message conversation_id="671">
    <ts>2019-03-02T05:34:55.195900</ts>
    <user>Margit</user>
    <text>I still use Boot, but thanks, I will try to do something similar.</text>
  </message>
  <message conversation_id="672">
    <ts>2019-03-02T06:59:31.196500</ts>
    <user>Epifania</user>
    <text>Can I somehow read the args of a function passed into a macro?</text>
  </message>
  <message conversation_id="672">
    <ts>2019-03-02T07:01:53.197100</ts>
    <user>Epifania</user>
    <text>Tried to see how `#()` does it with the variadic args but can't find the source for that macro</text>
  </message>
  <message conversation_id="672">
    <ts>2019-03-02T07:06:53.197700</ts>
    <user>Epifania</user>
    <text>`(:arglists (meta #'my-symbol))` seems to do the trick, and I don't even need a macro</text>
  </message>
  <message conversation_id="672">
    <ts>2019-03-02T08:21:01.199100</ts>
    <user>Epifania</user>
    <text>So, got it to work with vars, but would like it to work with anonymous functions as well, if possible (feels like I need another way of reorganizing the forms in a different macro to solve this)
Current implementation
```
(defmacro read-args [f]
  `(first (:arglists (meta #'~f))))

(defn use-log-func [log] (log true))

(read-args use-log-func) ;; Works
(read-args (fn [] (println "None"))) ;; Fails
(read-args (fn [one] (println "One"))) ;; Fails
;; Failure:
;; clojure.lang.PersistentList cannot be cast to clojure.lang.Symbol
```</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T10:17:27.201300</ts>
    <user>Clarine</user>
    <text>This:
```
(let [in (java.io.PushbackReader. (StringReader. "#&amp;lt;Namespace user&amp;gt;"))]
    (try (read in) (catch Exception e nil))
    [(read in) (read in)])
```
returns `'[Namespace user&amp;gt;]`
How do I get the reader to skip over this thing entirely?</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T10:17:51.201600</ts>
    <user>Clarine</user>
    <text>i.e. I’m not interested in anything `#&amp;lt;foobar&amp;gt;`</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T10:27:21.202200</ts>
    <user>Clarine</user>
    <text>use case: I’m parsing REPL sessions that can be interleaved with valid clojure expressions and their output</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T11:37:28.203400</ts>
    <user>Clarine</user>
    <text>Another issue. I’m generating code like this:
```
(defn example-104
    "clojure.core/extend"
    []
    (defprotocol Dateable
      (to-ms [t]))
    (extend java.lang.Number
      Dateable
      {:to-ms identity})
    (extend java.util.Date
      Dateable
      {:to-ms (fn* [p1__19578#] (.getTime p1__19578#))})
    (extend java.util.Calendar
      Dateable
      {:to-ms (fn* [p1__19579#] (to-ms (.getTime p1__19579#)))})
    (in-ns (quote speculative.clojuredocs-parser)))
```
but it seems that defprotocol is not supported well in defns: the symbol `to-ms` cannot be resolved.</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T11:39:43.203700</ts>
    <user>Clarine</user>
    <text>A declare helps</text>
  </message>
  <message conversation_id="674">
    <ts>2019-03-02T12:14:29.204000</ts>
    <user>Min</user>
    <text>Weird pattern</text>
  </message>
  <message conversation_id="674">
    <ts>2019-03-02T12:15:00.204800</ts>
    <user>Min</user>
    <text>Just wondering, why isn't the defprotocol at top level? </text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T12:16:42.205300</ts>
    <user>Clarine</user>
    <text>I’m just reading examples from clojuredocs and generating a function for each example</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T12:17:08.205600</ts>
    <user>Clarine</user>
    <text>I could just spit out all the code at the top level I guess</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T12:17:31.205900</ts>
    <user>Clarine</user>
    <text>but this makes it a bit more manageable</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T12:33:56.206200</ts>
    <user>Clarine</user>
    <text>I could also spit each example to their own namespace</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T17:06:21.208600</ts>
    <user>Marlyn</user>
    <text>&lt;@Clarine&gt; in your example `to-ms` cannot be resolved because you're referring to a symbol/var before the protocol is defined</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T17:06:33.209100</ts>
    <user>Marlyn</user>
    <text>It is the defprotocol that defines it</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T17:07:46.210800</ts>
    <user>Marlyn</user>
    <text>The protocol is defined at runtime of that function.
The symbol is resolved at compilation time of that function</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T17:08:17.211500</ts>
    <user>Clarine</user>
    <text>I fixed it now by emitting the defprotocol before the start of the function (same for import, require, etc.)</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T17:08:31.211800</ts>
    <user>Marlyn</user>
    <text>Yeah. That works</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T17:08:59.212600</ts>
    <user>Marlyn</user>
    <text>Some people call this the "Gilardi scenario" which sounds sort of creepy</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T17:09:18.213000</ts>
    <user>Marlyn</user>
    <text>It's at least a variant of it</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T17:10:04.213400</ts>
    <user>Clarine</user>
    <text>oh yeah, sounds familiar</text>
  </message>
  <message conversation_id="675">
    <ts>2019-03-02T17:38:52.213500</ts>
    <user>Latonya</user>
    <text>Creepy?  Does it remind you of something else with a similar name that is creepy, perhaps?  If it reminds you of "The Cask of Amantillado", then agreed, but the only thing I can see common between those is that they contain an Italian name :slightly_smiling_face:</text>
  </message>
  <message conversation_id="675">
    <ts>2019-03-02T17:40:48.213700</ts>
    <user>Clarine</user>
    <text>what’s the origin of this name for this problem btw. I tried to look it up before, but couldn’t find it</text>
  </message>
  <message conversation_id="673">
    <ts>2019-03-02T18:17:16.215200</ts>
    <user>Marlyn</user>
    <text>I don't know the origin story, but it's about Stephen Gilardi, one of the OGs </text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T20:04:23.216300</ts>
    <user>Samual</user>
    <text>In Clojure Jira, how do you comment on an issue?</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T20:26:41.216900</ts>
    <user>Celestine</user>
    <text>&lt;@Samual&gt; You need additional permissions to add comments -- we've had a lot of problems with spam, unfortunately.</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T20:27:20.217600</ts>
    <user>Celestine</user>
    <text>If you ask in &lt;#C06E3HYPR|clojure-dev&gt; and give your JIRA username, someone from Cognitect should be able to add your permissions (usually &lt;@Jasmine&gt;)</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T20:47:05.218200</ts>
    <user>Samual</user>
    <text>&lt;@Celestine&gt;, that means they accept comments only from signatories to the contributors' agreement?</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T21:07:55.219200</ts>
    <user>Celestine</user>
    <text>No, you just need to ask for comment permission to be added.</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T21:08:13.219600</ts>
    <user>Celestine</user>
    <text>But they need to know your JIRA account name for that.</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T21:08:36.220100</ts>
    <user>Celestine</user>
    <text>And the folks who control permissions on JIRA are mostly hanging out in &lt;#C06E3HYPR|clojure-dev&gt;</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T21:09:56.221600</ts>
    <user>Keenan</user>
    <text>Java interop question: If I'm extending a base class using gen-class and all that, from within an overriden method how can I call the parent's method (_super_ .theMethod()) in plain java</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T21:43:39.222900</ts>
    <user>Celestine</user>
    <text>&lt;@Keenan&gt; Looks like you need to expose the super class method and rename it &lt;https://stackoverflow.com/questions/9060127/how-to-invoke-superclass-method-in-a-clojure-gen-class-method&gt;</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T21:48:00.223400</ts>
    <user>Keenan</user>
    <text>Awesome, thanks &lt;@Celestine&gt;</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T21:52:48.224000</ts>
    <user>Celestine</user>
    <text>(I can't vouch for it, I've never tried it -- I just searched on Bing for a suggestion for you)</text>
  </message>
  <message conversation_id="676">
    <ts>2019-03-02T21:55:42.225800</ts>
    <user>Keenan</user>
    <text>^^^ No problem. In experimenting for a few seconds, it doesn't seem to be taking...but I could be missing something. That, and in this case I'm the author of the base class, so I can just make `parentMethod()` and call that for stuff I'd rather handled in pure java from the overriden one in clojure</text>
  </message>
  <message conversation_id="677">
    <ts>2019-03-02T23:25:15.226100</ts>
    <user>Latonya</user>
    <text>&lt;@Clarine&gt; I get several hits via a Google search for the term: Gilardi scenario.  Yes, it was named for Steve (Stephen?  not sure of spelling) Gilardi, who was one of the first to describe it.</text>
  </message>
  <message conversation_id="677">
    <ts>2019-03-03T00:42:38.226400</ts>
    <user>Madeleine</user>
    <text>What the macro receives is not a function, but code. So you will need to parse the code yourself and identify the args within it.</text>
  </message>
  <message conversation_id="677">
    <ts>2019-03-03T00:46:07.226600</ts>
    <user>Madeleine</user>
    <text>It might be possible for you to delegate back to def in this case.</text>
  </message>
  <message conversation_id="677">
    <ts>2019-03-03T01:06:07.226800</ts>
    <user>Madeleine</user>
    <text>Actually, it seems only defn parses args into arglists</text>
  </message>
  <message conversation_id="677">
    <ts>2019-03-03T01:08:36.227000</ts>
    <user>Madeleine</user>
    <text>You can try this:
```
(defmacro read-args [f]
  (if (symbol? f)
    `(:arglists (meta (var ~f)))
    `(do (defn ~'_ ~@(rest f))
         (:arglists (meta (var ~'_))))))
```</text>
  </message>
  <message conversation_id="678">
    <ts>2019-03-03T05:35:06.227300</ts>
    <user>Epifania</user>
    <text>Nice! Thanks a lot, works perfectly for what I wanted it to do!</text>
  </message>
  <message conversation_id="678">
    <ts>2019-03-03T05:42:37.229700</ts>
    <user>Colette</user>
    <text>I’m having an issue running boot inside my Docker image. Locally it works fine, but when I run the command
`boot --verbose api-uberjar` it gets stuck on:
`Writing api-0.1.0-SNAPSHOT-standalone.jar...`
The last output I see in the docker build (with the --verbose option) is:
`Filesystem: writing META-INF/MANIFEST.MF...`

It’s the first write operations, so it seems like docker does not like to write to disk it for some reason.
I am running the build as root.
Any ideas?</text>
  </message>
  <message conversation_id="678">
    <ts>2019-03-03T05:43:19.229800</ts>
    <user>Colette</user>
    <text>This is the full docker image:
```FROM openjdk:12-jdk-alpine AS build-api
RUN apk add bash curl
RUN bash -c "cd /usr/local/bin &amp;amp;&amp;amp; curl -fsSLo boot &lt;https://github.com/boot-clj/boot-bin/releases/download/latest/boot.sh&gt; &amp;amp;&amp;amp; chmod 755 boot"

WORKDIR /app
COPY boot.properties build.boot ./
RUN BOOT_AS_ROOT=yes boot api-deps
COPY api /app/api
RUN BOOT_AS_ROOT=yes boot --verbose api-uberjar
```</text>
  </message>
  <message conversation_id="678">
    <ts>2019-03-03T05:59:51.230000</ts>
    <user>Colette</user>
    <text>reboot fixed it…</text>
  </message>
  <message conversation_id="679">
    <ts>2019-03-03T06:23:50.231900</ts>
    <user>Epifania</user>
    <text>I seem to miss something in my understanding about `let`. In this example, the first function calls works but the second doesn't, as it seems a `let` binding is not a `var`. Only if I use `def/n` it's a `var`? Could I get what the `var` binding is pointing at somehow?

```
  (var one-arg)
  (let [f one-arg]
    (var f))
```

Something that confuses me is that these too function calls gives the same output, but according to ^, are clearly not the same

```
  (println one-arg)
  (let [f one-arg]
    (println f))
```</text>
  </message>
  <message conversation_id="679">
    <ts>2019-03-03T07:38:38.233800</ts>
    <user>Loria</user>
    <text>The issue with the first example is that `var` is a special form which treats its arguments literally as syntax, so the let bindings don't get substituted inside it</text>
  </message>
  <message conversation_id="679">
    <ts>2019-03-03T07:40:49.234600</ts>
    <user>Loria</user>
    <text>just like `def` is a special form and you don't expect
```
(let [f 42]
  (def f :abc))
```
to be equal to
```
(def 42 :abc)
```</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T08:17:05.235500</ts>
    <user>Lakeisha</user>
    <text>Hi all!
is there a way i can start my system (i’m using mount) only once before all tests run ?</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T08:34:21.235900</ts>
    <user>Samual</user>
    <text>&lt;@Lakeisha&gt; are you using clojure.test?</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T08:34:53.236300</ts>
    <user>Lakeisha</user>
    <text>i’m using eftest runner but my tests are all clojure.test</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T08:39:22.238400</ts>
    <user>Samual</user>
    <text>&lt;@Lakeisha&gt; clojure.test "fixtures" do set-up and shut-down for tests. A fixture can set-up once before running all the tests in a ns.</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T08:39:55.239000</ts>
    <user>Lakeisha</user>
    <text>yes i’ve been looking at it, but i need something to run before all ns</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T08:42:23.239200</ts>
    <user>Samual</user>
    <text>How do you invoke eftest?</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T09:05:38.239900</ts>
    <user>Lakeisha</user>
    <text>either through the REPL with `(run-tests (find-tests "test"))` or through the CLI with `lein eftest`</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T09:06:46.241100</ts>
    <user>Lakeisha</user>
    <text>i have a problem with multithread mode and when running with `:multithread? false` its running ok
so i know that if i start mount only once when starting to test it will work ok</text>
  </message>
  <message conversation_id="681">
    <ts>2019-03-03T09:46:44.241200</ts>
    <user>Epifania</user>
    <text>I see. Thanks for explaining! Follow up question: Is it possible to get whatever the binding is pointing at?</text>
  </message>
  <message conversation_id="682">
    <ts>2019-03-03T10:02:06.241600</ts>
    <user>Loria</user>
    <text>Can you give an example? What are you trying to achieve?</text>
  </message>
  <message conversation_id="683">
    <ts>2019-03-03T11:14:43.241900</ts>
    <user>Luke</user>
    <text>is there a SnowFlake implementation for clojure?</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T11:55:59.242000</ts>
    <user>Madeleine</user>
    <text>In Clojure, symbols point to values.</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T11:56:37.242200</ts>
    <user>Madeleine</user>
    <text>one-arg is a symbol, and so is f</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T11:57:27.242400</ts>
    <user>Madeleine</user>
    <text>When you eval a symbol, you don't get the symbol back, you get what the symbol points too, or what people sometime say the symbol is bound too</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T11:58:31.242600</ts>
    <user>Madeleine</user>
    <text>There are lookup contexts to find the value of a symbol, from the inner local scope to the outward local scope and finally to the global scope until a value for the symbol is found.</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:01:16.242900</ts>
    <user>Madeleine</user>
    <text>If you want to get the symbol back on eval, and not the value it points too, you can prefix the symbol with quote: `'one-arg`</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:02:05.243100</ts>
    <user>Madeleine</user>
    <text>Now you have a kind of value in Clojure called a Var</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:02:28.243300</ts>
    <user>Madeleine</user>
    <text>A Var is also a pointer to a value</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:03:15.243500</ts>
    <user>Madeleine</user>
    <text>You can think of it like a collection of one element</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:04:48.243700</ts>
    <user>Madeleine</user>
    <text>So `(def bla 42)` binds the symbol bla to a Var which contains 42 as its value. </text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:05:37.243900</ts>
    <user>Madeleine</user>
    <text>That's how def, defn, defmacro, etc. work. They always wrap the value in a Var and bind the symbol to the Var.</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:06:44.244100</ts>
    <user>Madeleine</user>
    <text>Now for convenience, when you eval a globaly scoped symbol which is bound to a Var, you will not get the Var back, but the value contained within the Var</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:07:38.244300</ts>
    <user>Madeleine</user>
    <text>If you want to get the Var back on eval, you can use the `var` special form or prefix it with `#'`</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:08:35.244500</ts>
    <user>Madeleine</user>
    <text>Now, `let` and other local bindings of symbol to value do not wrap the value in a Var for you.</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T12:09:47.244700</ts>
    <user>Madeleine</user>
    <text>This: `(let [bla 42] bla)` has no Var in it. Just the symbol bla is bound to 42 directly, so bla points to 42.</text>
  </message>
  <message conversation_id="684">
    <ts>2019-03-03T12:54:38.245800</ts>
    <user>Samual</user>
    <text>&lt;@Luke&gt; (From the snowflake website, I learned that snowflake is a cloud service that you access with SQL.)</text>
  </message>
  <message conversation_id="684">
    <ts>2019-03-03T12:55:03.246200</ts>
    <user>Shayla</user>
    <text>Like this? &lt;https://github.com/snowflakedb/snowflake-jdbc&gt;</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T17:04:15.248900</ts>
    <user>Madeleine</user>
    <text>So in your example: `(let [f one-arg] (println f))` what happens is when you eval it, one-arg is a symbol which points to a var,  and that gets resolved, and then the var points to a value, that gets resolved as well, and the symbol f is bound to point to that value. And for `(println one-arg)` one arg is a symbol that points to a Var, which points to a value, and again, both get resolved until you get the value and it is printed.</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T17:18:37.249100</ts>
    <user>Madeleine</user>
    <text>So, since you are interested in the var itself, you just need to bind f to the var itself.</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T17:23:39.249300</ts>
    <user>Madeleine</user>
    <text>```
(let [f (var one-arg)]
  f)
```</text>
  </message>
  <message conversation_id="680">
    <ts>2019-03-03T17:45:38.249500</ts>
    <user>Madeleine</user>
    <text>Specifically, in this case, it isn't really because var is given f as a symbol, since var resolve the symbol. The issue is that let binds f at runtime, and var runs at compile time. So f isn't bound yet, and will resolve to nothing.</text>
  </message>
  <message conversation_id="684">
    <ts>2019-03-04T01:14:09.250900</ts>
    <user>Shakita</user>
    <text>&lt;@Luke&gt; Mac Address based Base62 String ID &lt;https://github.com/maxcountryman/flake&gt;</text>
  </message>
  <message conversation_id="684">
    <ts>2019-03-04T01:47:31.251300</ts>
    <user>Luke</user>
    <text>thanks &lt;@Shakita&gt;</text>
  </message>
  <message conversation_id="684">
    <ts>2019-03-04T02:15:54.252300</ts>
    <user>Luke</user>
    <text>i just need 8 bytes, it seems is 16 bytes, can not store as a interger in db?</text>
  </message>
  <message conversation_id="684">
    <ts>2019-03-04T02:30:27.253900</ts>
    <user>Shakita</user>
    <text>you can change it with less bytes. For Example, less length for unix timestamp epoch, or use ip address instead of MAC address, or use less length for seq.</text>
  </message>
  <message conversation_id="685">
    <ts>2019-03-04T05:23:37.255600</ts>
    <user>Elly</user>
    <text>This has turned out to be kind of ungoogleable, why do people write `~` in their clojure code? What is the convention?</text>
  </message>
  <message conversation_id="685">
    <ts>2019-03-04T05:31:38.255700</ts>
    <user>Stefan</user>
    <text>This is a way to get the scope inside a qouted macro</text>
  </message>
  <message conversation_id="685">
    <ts>2019-03-04T05:32:22.255900</ts>
    <user>Stefan</user>
    <text>that is if you quote a macro to create a list of the symbols, ~ will actually expand (eval) the part you use it with</text>
  </message>
  <message conversation_id="685">
    <ts>2019-03-04T05:33:08.256100</ts>
    <user>Stefan</user>
    <text>maybe have a look at something like that: &lt;https://learnxinyminutes.com/docs/clojure-macros/&gt;</text>
  </message>
  <message conversation_id="685">
    <ts>2019-03-04T05:34:30.256800</ts>
    <user>Samual</user>
    <text>&lt;@Elly&gt; It's the unquote for syntax-quote: &lt;https://clojure.org/reference/reader#syntax-quote&gt;</text>
  </message>
  <message conversation_id="685">
    <ts>2019-03-04T05:37:23.257000</ts>
    <user>Elly</user>
    <text>Thanks, haven't gotten around to reading about macros yet.</text>
  </message>
  <message conversation_id="685">
    <ts>2019-03-04T05:37:29.257300</ts>
    <user>Elly</user>
    <text>Thanks</text>
  </message>
  <message conversation_id="686">
    <ts>2019-03-04T05:58:01.257500</ts>
    <user>Sixta</user>
    <text>&lt;https://clojure.org/guides/weird_characters&gt; this is useful :)</text>
  </message>
  <message conversation_id="687">
    <ts>2019-03-04T10:33:37.259500</ts>
    <user>Ariel</user>
    <text>Where is the best channel to report documentation improvements? Github?
I am under the impression that there is something wrong with &lt;https://clojuredocs.org/clojure.core/reify&gt;</text>
  </message>
  <message conversation_id="687">
    <ts>2019-03-04T10:36:16.260100</ts>
    <user>Clarine</user>
    <text>clojuredocs is a community driven site</text>
  </message>
  <message conversation_id="687">
    <ts>2019-03-04T10:36:55.260700</ts>
    <user>Clarine</user>
    <text>if you want to improve the docstring of a clojure function itself, you can first discuss in &lt;#C06E3HYPR|clojure-dev&gt; and ask if it’s worth posting an issue</text>
  </message>
  <message conversation_id="687">
    <ts>2019-03-04T10:37:12.261100</ts>
    <user>Clarine</user>
    <text>and if it is, you can go sign up for the CA and open a JIRA ticket</text>
  </message>
  <message conversation_id="687">
    <ts>2019-03-04T10:40:48.261300</ts>
    <user>Jasmine</user>
    <text>the snark is really unnecessary</text>
  </message>
  <message conversation_id="687">
    <ts>2019-03-04T10:41:23.261500</ts>
    <user>Jasmine</user>
    <text>what's the question?</text>
  </message>
  <message conversation_id="687">
    <ts>2019-03-04T10:44:45.261900</ts>
    <user>Clarine</user>
    <text>Snark removed, just a joke, didn’t mean anything by it :slightly_smiling_face:</text>
  </message>
  <message conversation_id="687">
    <ts>2019-03-04T10:54:58.262700</ts>
    <user>Ariel</user>
    <text>I think the docs for reify says a lot about _how_ but misses the point for _what_ "reify" does. Under the perspective of somebody who came across that function in a codebase, and looked it up, the expectation was to find some definition like the one in Stu's+Aaron's Book:

```
Reify lets you create an anonymous instance of a datatype that implements either a protocol or an interface.
```</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T10:59:36.265800</ts>
    <user>Shayla</user>
    <text>I have a design/architecture question: I I have some logic that's repeated in a couple different places, and I want to DRY it a bit. The only way I've figured out how to do so is to build a "wrapper" that takes in 5+ functions and then uses those to pivot or pass the necessary data around. I've looked into multi-methods that's not quite what I need (because I'd end up just repeating myself in each method)</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:00:13.266600</ts>
    <user>Shayla</user>
    <text>Does anyone have resources or suggestions as to how to pull abstractions out without turning it into a weird "mess"?</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:02:18.268200</ts>
    <user>Shayla</user>
    <text>If this were more OOP, I'd build an interface or base class, write the base logic in a method on it, and then inherit and write the variations in each child, relying on the parent to provide the abstraction, but I'm dealing with generic data structures (maps as my main data object)</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:03:21.269400</ts>
    <user>Clarine</user>
    <text>if you need something like an interface you can write a Protocol</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:04:11.269700</ts>
    <user>Clarine</user>
    <text>but I’m not sure if that make sense in your situation</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:05:10.270600</ts>
    <user>Clarine</user>
    <text>what could also work:
`(merge {:fn1 default-fn1 :fn2 default-fn2} {:fn-1 override-fn1})`?</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:10:19.272100</ts>
    <user>Shayla</user>
    <text>With my current proposed changes, it'd look like this:
```
(let [wrapped-damage (prevent-wrapper :runner
                                      (fn [target args] [:damage :damage-prevent (:type args)])  ;prevent-loc-fn
                                      (fn [target args] (:type args))                            ;card-prevent-fn
                                      (fn [target args] "Runner to prevent damage")
                                      (fn [target args] "Prevent damage?")
                                      resolve-damage
                                      nil
                                      :prevented-damage)]
  (defn damage
    "Attempts to deal n damage of the given type to the runner. Starts the prevention/boosting process and eventually resolves the damage."
    ([state side type n] (damage state side (make-eid state) type n nil))
    ([state side type n args] (damage state side (make-eid state) type n args))
    ([state side eid type n {:keys [unpreventable unboostable card] :as args}]
     (swap! state update-in [:damage :damage-bonus] dissoc type)
     (swap! state update-in [:damage :damage-prevent] dissoc type)
     (trigger-event state side :pre-damage type card n)
     (let [n (damage-count state side type n args)]
       (if (pos? n)
         ;; This is where all of the old logic would have gone (very messy)
         (wrapped-damage state side eid n (assoc args :type type))
         (effect-completed state side eid))))))
```</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:10:28.272500</ts>
    <user>Shayla</user>
    <text>and that doesn't feel quite right to me</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:11:14.273300</ts>
    <user>Lane</user>
    <text>&lt;@Shayla&gt; Could you implement a protocol to define the interface that each child (w/ variations) will implement. The common code can be in functions that take realizations of this protocol as argument?</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:12:24.274000</ts>
    <user>Lane</user>
    <text>If possible, I would also try to write most of the logic as pure functions and do the mutations (swap!) "outside".</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:13:24.274500</ts>
    <user>Becki</user>
    <text>also have the two swaps! just update `:damage` once rather than do it twice</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:13:59.274800</ts>
    <user>Shayla</user>
    <text>I'd love to do that, but sadly, the engine leans _very heavily_ on that kind of stuff</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:15:06.275500</ts>
    <user>Lane</user>
    <text>Yeah, if the API is already heavily stateful, don't bother :slightly_smiling_face:</text>
  </message>
  <message conversation_id="688">
    <ts>2019-03-04T11:21:51.276100</ts>
    <user>Shayla</user>
    <text>I'm reading the official clojure page on protocols (&lt;https://clojure.org/reference/protocols&gt;) now! any other protocol references I should look into?</text>
  </message>
  <message conversation_id="689">
    <ts>2019-03-04T12:00:11.278600</ts>
    <user>Victorina</user>
    <text>worth noting the most recent development with protocols, in Clojure 1.10: &lt;https://github.com/clojure/clojure/blob/master/changes.md#22-protocol-extension-by-metadata&gt;</text>
  </message>
  <message conversation_id="689">
    <ts>2019-03-04T12:16:05.279700</ts>
    <user>Brittney</user>
    <text>Is there a way to fully realise a data structure (all sub values) for the purpose of performance testing? </text>
  </message>
  <message conversation_id="689">
    <ts>2019-03-04T12:22:57.280800</ts>
    <user>Sixta</user>
    <text>&lt;@Brittney&gt; doall, generally. Do you have lazy seqs within lazy seqs? </text>
  </message>
  <message conversation_id="689">
    <ts>2019-03-04T12:23:09.281200</ts>
    <user>Sixta</user>
    <text>Postwalk with identity would probably do the trick</text>
  </message>
  <message conversation_id="689">
    <ts>2019-03-04T12:30:22.282300</ts>
    <user>Brittney</user>
    <text>Yeah that was the first thing I thought of but felt a bit gnarly. </text>
  </message>
  <message conversation_id="689">
    <ts>2019-03-04T12:30:22.282400</ts>
    <user>Brittney</user>
    <text>It's a big old data structure of maps and lazy seqs. Wanted a easy solution. Calling str on it atm. Appears to work </text>
  </message>
  <message conversation_id="689">
    <ts>2019-03-04T12:30:39.282700</ts>
    <user>Brittney</user>
    <text>Although I admit inelegant</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-04T16:28:43.285100</ts>
    <user>Matha</user>
    <text>Is there a way to attach metadata to a map that gets purged whenever the map is modified in any way? (e.g. a new key is assoc’ed, etc)</text>
  </message>
  <message conversation_id="689">
    <ts>2019-03-04T16:51:28.285800</ts>
    <user>Meagan</user>
    <text>not really. you could maybe create your own type that implements the metadata protocols in a specific way</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-04T17:37:23.287200</ts>
    <user>Matha</user>
    <text>&lt;@Meagan&gt; ah ok, unfortunate. I was wondering if I could use such a feature to make runtime checks of validity against a spec cheap. e.g. I could do a `s/valid?` check, and cache the result on the object (as metadata), so that future checks would be a simple look-up</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-04T17:37:29.287400</ts>
    <user>Matha</user>
    <text>(if the map doesn’t change)</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-04T17:50:57.288800</ts>
    <user>Meagan</user>
    <text>&lt;@Matha&gt; why not cache it in an atom or something and look it up in there?</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-04T17:52:17.289800</ts>
    <user>Matha</user>
    <text>yep could do that too</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-04T17:52:19.290000</ts>
    <user>Matha</user>
    <text>good point</text>
  </message>
  <message conversation_id="691">
    <ts>2019-03-05T01:40:08.292800</ts>
    <user>Tammera</user>
    <text>I like how this is called `weird_characters`</text>
  </message>
  <message conversation_id="692">
    <ts>2019-03-05T02:55:07.294300</ts>
    <user>Brigid</user>
    <text>Hey, uh, I can't figure out how to comment on any issue on the Clojure JIRA. I've commented on issues before, so I'm thinking that maybe somehow my commenting permissions have been disabled? I can still create issues, though. Who should I ask about this?</text>
  </message>
  <message conversation_id="692">
    <ts>2019-03-05T03:00:49.295100</ts>
    <user>Becki</user>
    <text>yeah permissions were restricted due to spam. Just reach out to alex miller tomorrow and he can get you settled. It's 2am in his time zone so he's not likely to be up right now</text>
  </message>
  <message conversation_id="692">
    <ts>2019-03-05T03:07:34.295400</ts>
    <user>Brigid</user>
    <text>Ah, okay, thanks</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-05T04:51:34.297700</ts>
    <user>Edie</user>
    <text>anyone knows the reasoning why `(seq (transient []))` throws an exception?</text>
  </message>
  <message conversation_id="691">
    <ts>2019-03-05T05:33:46.298700</ts>
    <user>Clarine</user>
    <text>because transient does not implement the seq abstraction, probably for good reasons</text>
  </message>
  <message conversation_id="691">
    <ts>2019-03-05T05:51:42.299100</ts>
    <user>Gia</user>
    <text>Has anyone used `cheshire` to lazy load json content from a particular nested node? For example, I have a json file like `{"package": "354", "misc-info": {..}, "entries": [{...lots of data...}]}` and I need to lazy-parse precisely the `"entries"` part of json file. I'm not sure cheshire's `parsed-seq` is suitable here. Is there a way to achieve that?</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-05T06:18:23.299500</ts>
    <user>Edie</user>
    <text>that's right, I can't see how this could lead to trouble...</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-05T06:20:02.299700</ts>
    <user>Clarine</user>
    <text>if you want a seq, why not first call `persistent!` on it?</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-05T06:22:31.299900</ts>
    <user>Edie</user>
    <text>I am trying not, so that it can be done outside of the scope I need seq</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-05T06:22:58.300100</ts>
    <user>Edie</user>
    <text>I guess my idea of transient must be wrong, perhaps it is more local than my goal</text>
  </message>
  <message conversation_id="690">
    <ts>2019-03-05T06:23:34.300300</ts>
    <user>Clarine</user>
    <text>you should never expose transients outside of a public API</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:25:59.303800</ts>
    <user>Leif</user>
    <text>This seems a strange behavior with the or

```
(deftest destructuring
  (let [foo1 (fn [{:keys [bar] :or {bar 2} bar {}}]
               bar)
        foo2 (fn [{:keys [] :or {bar 2} bar {}}]
               bar)]
    (is (= (foo1 {{} 1}) (foo2 {{} 1})))))

(destructuring)
FAIL in (destructuring) (form-init5648150256962006264.clj:6)
expected: (= (foo1 {{} 1}) (foo2 {{} 1}))
  actual: (not (= 2 1))
```</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:29:21.304200</ts>
    <user>Jasmine</user>
    <text>:or never creates values from thin air</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:30:38.304700</ts>
    <user>Jasmine</user>
    <text>so if you don't put the local in :keys, the :or default isn't used</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:32:47.305800</ts>
    <user>Nguyet</user>
    <text>And `:keys` has precedence over “regular” destructuring?</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:33:13.306100</ts>
    <user>Jasmine</user>
    <text>no, it's all "regular" destructuring</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:34:38.307300</ts>
    <user>Jasmine</user>
    <text>if you've made it ambiguous where a destructured symbol comes from, then you are in the land of undefined behavior</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:34:56.307700</ts>
    <user>Jasmine</user>
    <text>generally, destructuring maps are array maps, thus retain order, thus last one wins</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:35:34.308500</ts>
    <user>Jasmine</user>
    <text>but it's possible to use those maps in contexts (like macros) that go through an extra step that potentially destroys that order</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:36:36.309000</ts>
    <user>Jasmine</user>
    <text>if you want to see how destructuring will expand, use the (intentionally undocumented) `destructure` function:</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:36:38.309200</ts>
    <user>Jasmine</user>
    <text>```(destructure '[foo1 (fn [{:keys [bar] :or {bar 2} bar {}}]
               bar)
        foo2 (fn [{:keys [] :or {bar 2} bar {}}]
               bar)])
;;=&amp;gt; [foo1 (fn [{:keys [bar], :or {bar 2}, bar {}}] bar) foo2 (fn [{:keys [], :or {bar 2}, bar {}}] bar)]```</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:37:27.309600</ts>
    <user>Jasmine</user>
    <text>I guess that didn't help much</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:38:46.310100</ts>
    <user>Nguyet</user>
    <text>```
(deftest destructuring
  (let [foo1 (fn [{:keys [bar] bar {}}]
               bar)
        foo2 (fn [{bar {} :keys [bar]}]
               bar)]
    (is (= nil (foo1 {{} 1})))
    (is (= nil (foo2 {{} 1})))))
```
Does not seem to be order based</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:39:06.310800</ts>
    <user>Nguyet</user>
    <text>`:keys` wins in both cases</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:40:03.311300</ts>
    <user>Jasmine</user>
    <text>well, I wouldn't rely on that. I suspect it's an artifact of implementation we would not commit to</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:40:46.312300</ts>
    <user>Jasmine</user>
    <text>I will come back to: if you make it ambiguous, it's undefined</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:42:47.314200</ts>
    <user>Nguyet</user>
    <text>Yeah, we stumbled on it with a misplaced `}` : `{:keys [a b c d e] :or {a {} b 44 c d "Not found!"} e {}}` and wondered how the compiler treats that</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:43:51.314900</ts>
    <user>Nguyet</user>
    <text>A linter to detect the same symbol bound multiple times in the same destructuring is in order</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T09:45:47.315300</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/jonase/eastwood&gt; would be a good place for that</text>
  </message>
  <message conversation_id="694">
    <ts>2019-03-05T11:18:36.317400</ts>
    <user>Epifania</user>
    <text>Hey! Many thanks for the very elaborate explanation &lt;@Madeleine&gt;! :thumbsup:</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T12:09:17.317800</ts>
    <user>Danna</user>
    <text>I expect there are thread-safety issues with mutable updates</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T12:10:09.318000</ts>
    <user>Danna</user>
    <text>if you _really_ want a mutable data structure, then Java has got plenty of them; use one of those</text>
  </message>
  <message conversation_id="693">
    <ts>2019-03-05T12:10:46.318200</ts>
    <user>Danna</user>
    <text>and makes it a bit more obvious that you are going contrary to Clojure convention</text>
  </message>
  <message conversation_id="695">
    <ts>2019-03-05T12:34:40.318800</ts>
    <user>Meagan</user>
    <text>are there any libraries for EQL &amp;lt;-&amp;gt; GraphQL parsing?</text>
  </message>
  <message conversation_id="695">
    <ts>2019-03-05T12:34:46.319100</ts>
    <user>Meagan</user>
    <text>I'm mainly interested in EQL -&amp;gt; GraphQL</text>
  </message>
  <message conversation_id="695">
    <ts>2019-03-05T12:36:50.319700</ts>
    <user>Meagan</user>
    <text>it looks like pathom _might_ be what I want. I specifically would like to avoid having to write a bunch of custom parsing stuff</text>
  </message>
  <message conversation_id="695">
    <ts>2019-03-05T12:37:56.320400</ts>
    <user>Meagan</user>
    <text>most of the examples are using fulcro, though, and I have no need for client-side stuff for my use case</text>
  </message>
  <message conversation_id="695">
    <ts>2019-03-05T13:49:36.322000</ts>
    <user>Sixta</user>
    <text>&lt;@Meagan&gt; I think fulcro has some examples of doing this, but I think you're right that you'll be porting things from cljs examples unfortunately.

I only looked into this briefly though.</text>
  </message>
  <message conversation_id="696">
    <ts>2019-03-05T14:22:01.323400</ts>
    <user>Arline</user>
    <text>Is there a way to print components of the merged project from leiningen? I basically want to `(get project :java-cmd)` as lein would see it with all profiles activated and merged on the merged profiles.</text>
  </message>
  <message conversation_id="696">
    <ts>2019-03-05T14:24:34.323900</ts>
    <user>Arline</user>
    <text>Ah duh. `lein pprint` can do it natively. :facepalm:</text>
  </message>
  <message conversation_id="696">
    <ts>2019-03-05T14:24:46.324100</ts>
    <user>Arline</user>
    <text>```
$ lein pprint :java-cmd
"/var/lib/jdk/openjdk-7-jdk/bin/java"
```</text>
  </message>
  <message conversation_id="697">
    <ts>2019-03-05T15:59:24.325000</ts>
    <user>Ariel</user>
    <text>Do you know lacinia?</text>
  </message>
  <message conversation_id="697">
    <ts>2019-03-05T16:03:03.325200</ts>
    <user>Meagan</user>
    <text>we're using Lacinia for our GraphQL service. I need EDN -&amp;gt; GraphQL _query_, not GraphQL SDL</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:12:56.329000</ts>
    <user>Tonya</user>
    <text>I'm torn between using plain functions for grabbing users from a database for my website or a protocol. I'm using component to manage dependencies and I saw this: ```At this point you may be thinking, “API functions where the first argument determines a lot of the behavior… that sounds a lot like a protocol.” That’s an excellent point. For many common components, particularly ones that can be swapped out with different implementations like database connections, it can be valuable to define their API as a protocol. This can also enhance testability, since it gives us a flexible way to inject different mock components in our tests.```</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:13:37.329800</ts>
    <user>Tonya</user>
    <text>I don't understand what a protocol offers vs functions such as get-user : db * username -&amp;gt; user_row</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:14:11.330300</ts>
    <user>Meagan</user>
    <text>you can pass in a "mock" db that just returns pure data</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:15:20.332400</ts>
    <user>Tonya</user>
    <text>Oh shit.</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:15:47.333500</ts>
    <user>Tonya</user>
    <text>I've been thinking this whole time about only mocking with a test database but if I use a protocol I can mock everything.</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:16:22.334700</ts>
    <user>Tonya</user>
    <text>Maybe though not at the user level.</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:16:27.335100</ts>
    <user>Alessandra</user>
    <text>&lt;@Tonya&gt; depends on your use case:
if you're building a http service, then the interface of your system is your HTTP api, and not the functions/protocols inside of it
if you're building a library, then you may consider using a protocol

With functions, if I want to mock the database call for testing, we use `with-redefs` to make it explicit that we're monkey patching a particular function for testing</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:17:08.335900</ts>
    <user>Tonya</user>
    <text>I'm building a website, so neither.</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:17:29.336400</ts>
    <user>Tonya</user>
    <text>Would it be better to mock jdbc/sql commands though?</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:17:36.336800</ts>
    <user>Tonya</user>
    <text>rather than the individual user calls</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:17:42.337000</ts>
    <user>Meagan</user>
    <text>yep. you can just have a
```
(deftype FakeDB
  IUserInfo
  (get-user [this username]
   {:posts [] :name "Foo Bar"}))
```
and use that in your component system</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:17:57.337500</ts>
    <user>Tonya</user>
    <text>I feel like IUserInfo will be really large</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:17:59.337700</ts>
    <user>Tonya</user>
    <text>eventually</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:17:59.337800</ts>
    <user>Meagan</user>
    <text>eh, usually you want to operate at a higher level of abstraction in most of your code</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:19:01.339500</ts>
    <user>Tonya</user>
    <text>have defprotocol SqlDB with query do_command etc I feel like that offers a more powerful way to swap in certain behaviours.</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:19:08.339800</ts>
    <user>Tonya</user>
    <text>If I were to have:</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:19:08.339900</ts>
    <user>Meagan</user>
    <text>depends on how coupled you want to be to your SQL</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:19:20.340300</ts>
    <user>Tonya</user>
    <text>But I guess both could work</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:19:33.340700</ts>
    <user>Tonya</user>
    <text>AS they are not mutually exclusive</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:19:53.341200</ts>
    <user>Meagan</user>
    <text>IMO you usually want to use abstractions to model your domain</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:20:07.341700</ts>
    <user>Tonya</user>
    <text>&lt;@Meagan&gt; I really appreciate your help btw, now I see the value in the defrecord crap.</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:20:18.342100</ts>
    <user>Meagan</user>
    <text>:+1: :smile:</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:20:38.342600</ts>
    <user>Tonya</user>
    <text>I'll take your advice, I can always add the SqlDB later.</text>
  </message>
  <message conversation_id="698">
    <ts>2019-03-05T20:20:41.342800</ts>
    <user>Tonya</user>
    <text>If necessary</text>
  </message>
  <message conversation_id="699">
    <ts>2019-03-06T03:12:15.345500</ts>
    <user>Brigid</user>
    <text>Does anyone know if using side-effects in lazy sequences can result in the side-effects being executed twice?</text>
  </message>
  <message conversation_id="699">
    <ts>2019-03-06T03:14:13.347200</ts>
    <user>Mireille</user>
    <text>I'm getting this error getting a docstring for a function (using clojure 1.10.0, nrepl 0.4.0, and monroe), has anyone seen it before? seems to be project specific because I don't get the error for a new project, but I'm not sure how to go about debugging the issue
```
#error {
 :cause "clojure.repl"
 :via
 [{:type java.lang.ClassNotFoundException
   :message "clojure.repl"
   :at [java.net.URLClassLoader findClass "URLClassLoader.java" 471]}]
 :trace
 [[java.net.URLClassLoader findClass "URLClassLoader.java" 471]
  [clojure.lang.DynamicClassLoader findClass "DynamicClassLoader.java" 69]
  [java.lang.ClassLoader loadClass "ClassLoader.java" 588]
  [clojure.lang.DynamicClassLoader loadClass "DynamicClassLoader.java" 77]
  [java.lang.ClassLoader loadClass "ClassLoader.java" 521]
  [java.lang.Class forName0 "Class.java" -2]
  [java.lang.Class forName "Class.java" 398]
  [clojure.lang.RT classForName "RT.java" 2207]
  [clojure.lang.RT classForNameNonLoading "RT.java" 2220]
  [clojure.lang.Compiler$HostExpr maybeClass "Compiler.java" 1041]
  [clojure.lang.Compiler macroexpand1 "Compiler.java" 7044]
  [clojure.lang.Compiler macroexpand "Compiler.java" 7074]
  [clojure.lang.Compiler eval "Compiler.java" 7160]
  [clojure.lang.Compiler eval "Compiler.java" 7131]
  [clojure.core$eval invokeStatic "core.clj" 3214]
  [clojure.core$eval invoke "core.clj" 3210]
  [clojure.main$repl$read_eval_print__9068$fn__9071 invoke "main.clj" 414]
  [clojure.main$repl$read_eval_print__9068 invoke "main.clj" 414]
  [clojure.main$repl$fn__9077 invoke "main.clj" 435]
  [clojure.main$repl invokeStatic "main.clj" 435]
  [clojure.main$repl doInvoke "main.clj" 345]
  [clojure.lang.RestFn invoke "RestFn.java" 1523]
  [nrepl.middleware.interruptible_eval$evaluate$fn__9015 invoke "interruptible_eval.clj" 86]
  [clojure.lang.AFn applyToHelper "AFn.java" 152]
  [clojure.lang.AFn applyTo "AFn.java" 144]
  [clojure.core$apply invokeStatic "core.clj" 665]
  [clojure.core$with_bindings_STAR_ invokeStatic "core.clj" 1973]
  [clojure.core$with_bindings_STAR_ doInvoke "core.clj" 1973]
  [clojure.lang.RestFn invoke "RestFn.java" 425]
  [nrepl.middleware.interruptible_eval$evaluate invokeStatic "interruptible_eval.clj" 84]
  [nrepl.middleware.interruptible_eval$evaluate invoke "interruptible_eval.clj" 54]
  [nrepl.middleware.interruptible_eval$interruptible_eval$fn__9060$fn__9063 invoke "interruptible_eval.clj" 220]
  [nrepl.middleware.interruptible_eval$run_next$fn__9055 invoke "interruptible_eval.clj" 188]
  [clojure.lang.AFn run "AFn.java" 22]
  [java.util.concurrent.ThreadPoolExecutor runWorker "ThreadPoolExecutor.java" 1128]
  [java.util.concurrent.ThreadPoolExecutor$Worker run "ThreadPoolExecutor.java" 628]
  [java.lang.Thread run "Thread.java" 834]]}
```</text>
  </message>
  <message conversation_id="699">
    <ts>2019-03-06T03:20:51.347600</ts>
    <user>Brigid</user>
    <text>If you run `(require 'clojure.repl)` in the REPL first and then try to get a docstring, does this still happen?</text>
  </message>
  <message conversation_id="699">
    <ts>2019-03-06T03:24:09.347800</ts>
    <user>Brigid</user>
    <text>I'm thinking that getting docstrings maybe runs `clojure.repl/doc` (or some other function from that namespace) and it's not loaded in your project for some reason, so that's why you're getting the error.</text>
  </message>
  <message conversation_id="699">
    <ts>2019-03-06T03:24:46.348000</ts>
    <user>Brigid</user>
    <text>I'm not really familiar with Monroe, but if the require works, a quick fix could be adding the require to `user.clj`.</text>
  </message>
  <message conversation_id="699">
    <ts>2019-03-06T03:26:01.348200</ts>
    <user>Sixta</user>
    <text>I don't think so, no. They get cached.</text>
  </message>
  <message conversation_id="699">
    <ts>2019-03-06T03:26:41.348400</ts>
    <user>Sixta</user>
    <text>If you act on a reducible which has side effects however, that will side effect as many times as you interact with it.</text>
  </message>
  <message conversation_id="700">
    <ts>2019-03-06T03:35:42.348600</ts>
    <user>Sixta</user>
    <text>```
user=&amp;gt; (let [x (eduction (map println) (range 3))]
  #_=&amp;gt;   (when (seq x)
  #_=&amp;gt;     (map identity x)))
0
(0
1
2
nil nil nil)
```</text>
  </message>
  <message conversation_id="701">
    <ts>2019-03-06T03:47:15.348900</ts>
    <user>Mireille</user>
    <text>oh wow, that works for me!</text>
  </message>
  <message conversation_id="701">
    <ts>2019-03-06T03:48:38.349100</ts>
    <user>Mireille</user>
    <text>I think it's because I'm starting the repl server with `nrepl.server`, so clojure.repl namespace doesn't get included.</text>
  </message>
  <message conversation_id="701">
    <ts>2019-03-06T03:48:50.349300</ts>
    <user>Mireille</user>
    <text>anyways, I know how to fix the issue now, thanks so much!</text>
  </message>
  <message conversation_id="701">
    <ts>2019-03-06T03:59:46.352600</ts>
    <user>Amada</user>
    <text>So I came to clojure from c# and node, so was mostly shielded from all the java and jvm things that happen behind the scenes. I would very much like to read about those parts of the echo system, but obviously a **java/jvm for clojure developers** book does not exist :smile:. Any suggestions on where I can find some resources or what parts might be valuable and what can be left out?</text>
  </message>
  <message conversation_id="700">
    <ts>2019-03-06T04:05:04.352700</ts>
    <user>Sixta</user>
    <text>there's a good talk from conj by ghadi I think :slightly_smiling_face:</text>
  </message>
  <message conversation_id="701">
    <ts>2019-03-06T04:07:30.352900</ts>
    <user>Amada</user>
    <text>this? &lt;https://www.youtube.com/watch?v=S1mzUi_zbEs&gt;</text>
  </message>
  <message conversation_id="701">
    <ts>2019-03-06T04:07:46.353100</ts>
    <user>Amada</user>
    <text>nice thanks</text>
  </message>
  <message conversation_id="700">
    <ts>2019-03-06T04:07:55.353400</ts>
    <user>Sixta</user>
    <text>&lt;https://www.youtube.com/watch?v=-zszF8bbXM0&gt; I think this is the one :slightly_smiling_face:</text>
  </message>
  <message conversation_id="700">
    <ts>2019-03-06T04:08:01.353700</ts>
    <user>Sixta</user>
    <text>both are probably good though :smile:</text>
  </message>
  <message conversation_id="702">
    <ts>2019-03-06T04:55:30.354200</ts>
    <user>Brigid</user>
    <text>Thanks, that's what I thought as well</text>
  </message>
  <message conversation_id="703">
    <ts>2019-03-06T05:25:39.356400</ts>
    <user>Loria</user>
    <text>What's the normal workflow like for making changes to a dependency library? (e.g with the intent of fixing a bug and contributing those changes upstream)</text>
  </message>
  <message conversation_id="703">
    <ts>2019-03-06T05:50:04.359300</ts>
    <user>Loria</user>
    <text>from Emacs specifically, I can jump to function or symbol definition, then edit and eval forms in that buffer, but the actual location is in a .jar file somewhere in my ~/.m2/ folder, which I assume isn't meant to be edited directly</text>
  </message>
  <message conversation_id="700">
    <ts>2019-03-06T06:11:47.359600</ts>
    <user>Amada</user>
    <text>nice</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:36:01.361300</ts>
    <user>Jaimee</user>
    <text>Is there a way to do incremental changes with `enlive`? for example `(at [:p] (add-class nb-of-p))`</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:37:04.361600</ts>
    <user>Teodoro</user>
    <text>what do you mean by incremental? what is `nb-of-p`?</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:38:36.362500</ts>
    <user>Jaimee</user>
    <text>Let's say I have a few p tags in my code, I'd like the first p tag to have the class "p1" the second "p2" etc</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:44:54.365800</ts>
    <user>Teodoro</user>
    <text>No, nothing standard. Are `pN` unbounded?
Anyway you can cheat by using a mutable counter `(at [:p] #((add-class (str "p" (swap! cnt inc))) %))`</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:45:35.366200</ts>
    <user>Teodoro</user>
    <text>I’ll deny having made this suggestion :wink:</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:45:42.366400</ts>
    <user>Jaimee</user>
    <text>haha thank you though !</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:46:57.367100</ts>
    <user>Jaimee</user>
    <text>It's not unbounded though, essentially I load an html file and I do some manipulation of it</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:47:05.367400</ts>
    <user>Leone</user>
    <text>&lt;@Meagan&gt; I'm using this, which may be what you're looking for?
&lt;https://github.com/district0x/graphql-query&gt;</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:47:58.368700</ts>
    <user>Jaimee</user>
    <text>Maybe I could use a random number generator though, I don't care if they are ordered, I just want to make sure that each one of these has a unique class or id</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:47:59.368800</ts>
    <user>Leone</user>
    <text>Although, I'm not sure that it takes EQL exactly. </text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:48:08.369100</ts>
    <user>Jaimee</user>
    <text>Would that be cleaner?</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:50:17.369400</ts>
    <user>Jaimee</user>
    <text>or maybe the hash of the content</text>
  </message>
  <message conversation_id="704">
    <ts>2019-03-06T07:50:25.369500</ts>
    <user>Jefferey</user>
    <text>perhaps this would help too: &lt;https://purelyfunctional.tv/guide/clojure-jvm/&gt;</text>
  </message>
  <message conversation_id="705">
    <ts>2019-03-06T08:37:00.373800</ts>
    <user>Garnett</user>
    <text>Hey everyone

I'm building something that started from the chestnut template (&lt;https://github.com/plexus/chestnut&gt;), using muuntaja for de/encoding (&lt;https://github.com/metosin/muuntaja/&gt;).
Unfortunately, unlike in the toy example of muuntaja (&lt;https://github.com/metosin/muuntaja/blob/master/doc/With-Ring.md#simplest-thing-that-works&gt;) returning hashmap response bodies doesn't work in my app, I have to encode them in my request handler.
I added muuntaja's middleware `muuntaja.middleware/wrap-format` to the default middleware (which looks like this: &lt;https://github.com/plexus/chestnut/blob/master/src/leiningen/new/chestnut/src/clj/chestnut/config.clj&gt;), but something works differently there.

The failure is very weird too:
I get the following exception:
`java.lang.IllegalArgumentException: No implementation of method: :write-body-to-stream of protocol: #'ring.core.protocols/StreamableResponseBody found for class: clojure.lang.PersistentArrayMap`
which seems reasonable, but then the request is repeated (even when I use curl to send the request, so it's not the frontend logic or the browser).
The second request then also fails and I get a 500 response.

The double request happens with only the default middleware in a fresh chestnut project as well, so it's not caused by muuntaja or my changes

Any idea why muuntaja's auto-encoding doesn't seem to work in chestnut and where the request duplication comes from?</text>
  </message>
  <message conversation_id="705">
    <ts>2019-03-06T08:46:50.374000</ts>
    <user>Amada</user>
    <text>thank you</text>
  </message>
  <message conversation_id="705">
    <ts>2019-03-06T08:53:00.374300</ts>
    <user>Amada</user>
    <text>I made a repo &lt;https://github.com/SneakyPeet/java-for-clojure-developers&gt;</text>
  </message>
  <message conversation_id="705">
    <ts>2019-03-06T09:15:27.376400</ts>
    <user>Amada</user>
    <text>I’ve made a repo for java/jvm resources specifically for clojure devs. please feel free to add anything you think ads value &lt;https://github.com/SneakyPeet/java-for-clojure-developers&gt;</text>
  </message>
  <message conversation_id="706">
    <ts>2019-03-06T10:01:46.376800</ts>
    <user>Shirleen</user>
    <text>&lt;https://www.youtube.com/watch?v=P76Vbsk_3J0&gt;

and

&lt;https://www.youtube.com/watch?v=hb3rurFxrZ8&gt;</text>
  </message>
  <message conversation_id="706">
    <ts>2019-03-06T10:02:08.377000</ts>
    <user>Shirleen</user>
    <text>Oh maybe I missed the point, you mean the opposite</text>
  </message>
  <message conversation_id="706">
    <ts>2019-03-06T10:02:10.377200</ts>
    <user>Shirleen</user>
    <text>sorry</text>
  </message>
  <message conversation_id="707">
    <ts>2019-03-06T10:31:17.379700</ts>
    <user>Shayna</user>
    <text>&lt;@Garnett&gt; by default, muuntaja will encode only `:body` if it's a collection (a map is) and there is `Content-Type` header set.</text>
  </message>
  <message conversation_id="707">
    <ts>2019-03-06T10:31:56.380000</ts>
    <user>Shayna</user>
    <text>maybe something sets the content-type?</text>
  </message>
  <message conversation_id="707">
    <ts>2019-03-06T10:33:30.380200</ts>
    <user>Garnett</user>
    <text>I think I tried to depend on the automatic negotiation because the request sends `application/transit+json` in the accept header</text>
  </message>
  <message conversation_id="707">
    <ts>2019-03-06T10:36:09.380400</ts>
    <user>Shayna</user>
    <text>If you have a public repo of the setup I could look at that today</text>
  </message>
  <message conversation_id="707">
    <ts>2019-03-06T10:37:21.380600</ts>
    <user>Garnett</user>
    <text>unfortunately not :confused:</text>
  </message>
  <message conversation_id="707">
    <ts>2019-03-06T10:37:43.380800</ts>
    <user>Garnett</user>
    <text>i'm gonna try to reproduce it in a public repo</text>
  </message>
  <message conversation_id="707">
    <ts>2019-03-06T10:37:49.381000</ts>
    <user>Garnett</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T10:59:03.384100</ts>
    <user>Junko</user>
    <text>&lt;@Shirleen&gt; hehe yes. </text>
  </message>
  <message conversation_id="707">
    <ts>2019-03-06T10:59:34.384800</ts>
    <user>Tonya</user>
    <text>Okay so I have this Database record (a component) that implements a protocol called UserInfo. I want to mock a test database, so to do this I swap out the config (very easy) but I'm having trouble adding startup/cleanup code (such as adding certain users, creating schema, destroying schema, etc.). The trouble is that I don't want to have to re-implement all of my UserInfo methods for this TestDatabase record, I want it to inherit them from the real Database record.</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T10:59:45.385000</ts>
    <user>Tonya</user>
    <text>Is there a good way to do this?</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T11:11:25.385600</ts>
    <user>Tonya</user>
    <text>For example I have code that looks like the following:</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T11:11:31.385700</ts>
    <user>Tonya</user>
    <text>None</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T11:11:59.386500</ts>
    <user>Tonya</user>
    <text>I feel as if I shouldn't need to reimplement this for a test database that does some extra setup/finalization.</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T11:15:25.386800</ts>
    <user>Tonya</user>
    <text>Oh, it seems like this is a use case for reify.</text>
  </message>
  <message conversation_id="707">
    <ts>2019-03-06T11:21:06.386900</ts>
    <user>Garnett</user>
    <text>ive got it in a repo:
&lt;https://github.com/TimoFreiberg/map-return-test&gt;</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T11:30:55.388400</ts>
    <user>Garnett</user>
    <text>ok, i added some logging to `muuntaja.middleware/wrap-format`, and I notice that it receives a response that looks like this: `{:status 200, :headers {Content-Type application/octet-stream}, :body {:a x}}`</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T11:32:47.388600</ts>
    <user>Garnett</user>
    <text>i noticed here: &lt;https://github.com/TimoFreiberg/map-return-test/blob/master/src/clj/map_return_test/routes.clj#L38&gt;
that when my handler sets a Content-Type header, muuntaja doesn't touch the body anymore (because the Content-Type header should only be set when the body is already in that format, I assume)</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T11:33:24.389000</ts>
    <user>Garnett</user>
    <text>now I only have to find out where that header is being set... - looks like it's `ring.middleware.defaults/wrap-defaults`</text>
  </message>
  <message conversation_id="708">
    <ts>2019-03-06T11:37:56.389300</ts>
    <user>Garnett</user>
    <text>that's it.
keeping `ring.middleware.content-type/wrap-content-type` from being added by `wrap-defaults` fixed it</text>
  </message>
  <message conversation_id="709">
    <ts>2019-03-06T13:54:28.390400</ts>
    <user>Meagan</user>
    <text>thanks! I'll check it out. it might be what I'm looking for</text>
  </message>
  <message conversation_id="709">
    <ts>2019-03-06T13:54:47.390600</ts>
    <user>Meagan</user>
    <text>don't need EQL exactly, but am looking for something that does EDN -&amp;gt; GraphQL. EQL just looked like a good standard</text>
  </message>
  <message conversation_id="709">
    <ts>2019-03-06T13:56:07.390800</ts>
    <user>Leone</user>
    <text>ok. That ought to do it then.</text>
  </message>
  <message conversation_id="709">
    <ts>2019-03-06T13:56:34.391000</ts>
    <user>Leone</user>
    <text>I don't have much experience with that lib or graphql, but let me know if I can help</text>
  </message>
  <message conversation_id="710">
    <ts>2019-03-06T15:19:22.392000</ts>
    <user>Shayna</user>
    <text>Great! The middleware-stack is not the easiest to debug</text>
  </message>
  <message conversation_id="710">
    <ts>2019-03-06T15:20:08.392300</ts>
    <user>Arline</user>
    <text>Does anyone know how to do an `in` query using `clojure.java.jdbc`?
Like `["select * from foo where id in ?" a-vector]`?</text>
  </message>
  <message conversation_id="710">
    <ts>2019-03-06T15:21:17.392900</ts>
    <user>Shayna</user>
    <text>... but would be great if the `ring-defaults` and `muuntaja` would work together by default.</text>
  </message>
  <message conversation_id="710">
    <ts>2019-03-06T15:24:51.393100</ts>
    <user>Shayna</user>
    <text>&lt;@Garnett&gt;  Could you write issues to both repos about that default mismatch. We could figure out which one should change.</text>
  </message>
  <message conversation_id="710">
    <ts>2019-03-06T15:26:26.393300</ts>
    <user>Garnett</user>
    <text>sounds reasonable</text>
  </message>
  <message conversation_id="710">
    <ts>2019-03-06T15:26:41.393700</ts>
    <user>Arline</user>
    <text>Oh lord. Is this post still true? &lt;https://stackoverflow.com/questions/15580371/how-do-you-use-where-x-in-y-clauses-with-clojure-java-jdbc&gt;</text>
  </message>
  <message conversation_id="710">
    <ts>2019-03-06T15:26:49.394100</ts>
    <user>Arline</user>
    <text>I need to generate the correct number of question marks? :neutral_face:</text>
  </message>
  <message conversation_id="711">
    <ts>2019-03-06T15:44:40.395100</ts>
    <user>Harold</user>
    <text>see also: &lt;#C1Q164V29|sql&gt;</text>
  </message>
  <message conversation_id="711">
    <ts>2019-03-06T15:51:55.397500</ts>
    <user>Ronald</user>
    <text>&lt;@Arline&gt; I don't know for sure what capabilities `java.jdbc` has in that regard, but I know that most people in Clojure use libraries on top of it, to operate at nicer levels of abstraction. For example, I can see the use of a `where .. in` that looks nice in the README of HoneySQL &lt;https://github.com/jkk/honeysql&gt;</text>
  </message>
  <message conversation_id="712">
    <ts>2019-03-06T16:35:53.397800</ts>
    <user>Melina</user>
    <text>The last I checked (a couple of months ago), yes. I ended up using honeysql.</text>
  </message>
  <message conversation_id="710">
    <ts>2019-03-06T17:06:07.398600</ts>
    <user>Shonda</user>
    <text>&lt;@Arline&gt; the &lt;#C1Q164V29|sql&gt; channel may be able to provide more details as well.</text>
  </message>
  <message conversation_id="710">
    <ts>2019-03-06T17:36:15.401700</ts>
    <user>Celestine</user>
    <text>&lt;@Arline&gt; `(str/join "," (repeat (count v) "?"))` isn't a terrible hardship since you'll need to use `(into [(str ... SQL fragments here ...)] v)` to "pour" the elements of the vector into the sql+params vector anyway :slightly_smiling_face: But, yeah, use `honeysql` if you want to avoid that. `clojure.java.jdbc` is deliberately *not* in the business of building your SQL for you and JDBC requires a placeholder `?` for each parameterized value...</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:38:36.403800</ts>
    <user>Keenan</user>
    <text>Any tips on de/serializing records with edn? Should I just not? I will have probably a hundred or more "things" that need polymorphic behavior, but I need to put these things to a file and get them back out. Better to find a way to use plain maps and defmulti, or...?</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:40:49.404600</ts>
    <user>Dann</user>
    <text>the `transit` library is intended for this sort of usage, but defrecord already implements a printer and reader tag that should do the right thing when read back in</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:41:19.405100</ts>
    <user>Dann</user>
    <text>I've definitely found transit easier to use and more reliable than the `pr` / `read` combo though</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:42:27.405400</ts>
    <user>Dann</user>
    <text>that said, pr / read does work ```(ins)user=&amp;gt; (defrecord Foo [])
user.Foo
(ins)user=&amp;gt; (-&amp;gt;Foo)
#user.Foo{}
(ins)user=&amp;gt; (= (-&amp;gt;Foo) (read-string (pr-str (-&amp;gt;Foo))))
true
```</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:46:53.408300</ts>
    <user>Keenan</user>
    <text>&lt;@Dann&gt; Interesting...I guess two questions:

1. Did this not used to work/be supported out of the box? When I realized I might have an issue I looked around and saw info about reader hints and other stuff that indicated it didn't.
2. If it works as you say with the pr/read combo...what is `transit` providing?</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:47:36.409000</ts>
    <user>Dann</user>
    <text>transit allows extension of new type tags without a global reader registry, and it has better performance</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:47:52.409300</ts>
    <user>Dann</user>
    <text>what are reader hints?</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:49:25.410300</ts>
    <user>Keenan</user>
    <text>Sorry, using imprecise language. The last example in this "x in y" on edn suggests some kind of "help" that needed to be given to parse records: &lt;https://learnxinyminutes.com/docs/edn/&gt;</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:49:56.410900</ts>
    <user>Keenan</user>
    <text>^^^ &lt;@Dann&gt; The above is the first thing that got me worried I may have issues with deserialization</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:50:42.411300</ts>
    <user>Dann</user>
    <text>~if that document was ever accurate about records, it's definitely wrong now~ see convo below, it's right, I was wrong</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T17:51:32.412100</ts>
    <user>Keenan</user>
    <text>Haha. Good to know...probably not great it's one of the first things you'll see if you're looking for some basic info about it</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T18:02:37.412900</ts>
    <user>Rosaline</user>
    <text>the behavior of the functions for reading in clojure.edn differ from those in clojure.core</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T18:04:40.413500</ts>
    <user>Rosaline</user>
    <text>the clojure.edn functions don't automatically look up records</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T18:04:58.413800</ts>
    <user>Dann</user>
    <text>oh, now I see that</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T18:05:23.414300</ts>
    <user>Rosaline</user>
    <text>the xiny page is about as clear as mud about it</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T18:06:22.414900</ts>
    <user>Dann</user>
    <text>~OK, so another advantage of transit is that it implicitly works with record types without risking code injection via read-eval~
actually it downcasts the record to a hash-map unless you define a custom writer/reader</text>
  </message>
  <message conversation_id="714">
    <ts>2019-03-06T18:21:42.416700</ts>
    <user>Keenan</user>
    <text>Ah, okay...starting to see what this is about now. Well, darn, I probably do want to go with edn, so I guess I'll have to figure out something there...I will have a lot of record types, and it's going to suck to explicitly declaring each one for reading in edn. Hmmm</text>
  </message>
  <message conversation_id="714">
    <ts>2019-03-06T18:24:01.417400</ts>
    <user>Jasmine</user>
    <text>You can set a default-data-reader-fn</text>
  </message>
  <message conversation_id="714">
    <ts>2019-03-06T18:24:54.418400</ts>
    <user>Jasmine</user>
    <text>This is probably not what you want to do, but it might help connect the pieces: &lt;http://insideclojure.org/2018/06/21/tagged-literal/&gt;</text>
  </message>
  <message conversation_id="713">
    <ts>2019-03-06T18:26:11.418900</ts>
    <user>Jasmine</user>
    <text>Also some docs at end of &lt;https://clojure.org/reference/reader&gt;</text>
  </message>
  <message conversation_id="714">
    <ts>2019-03-06T18:30:17.419200</ts>
    <user>Keenan</user>
    <text>Thanks &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T19:19:50.421500</ts>
    <user>Kerstin</user>
    <text>Hi, how do we check a `spec` across a combination of 2 different keys in a hashmap. eg: `{:user "string" :valid :string }` or `{:user nil :valid :nil}`</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T19:21:17.422400</ts>
    <user>Kerstin</user>
    <text>`:user` can be nilable only when `:valid` is :nil but not when `:valid` is :string</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T19:22:37.422700</ts>
    <user>Meagan</user>
    <text>sounds like it might be a use-case for multispecs?</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T19:25:58.423300</ts>
    <user>Kerstin</user>
    <text>How would that work?</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T19:28:41.423500</ts>
    <user>Meagan</user>
    <text>&lt;https://clojure.org/guides/spec#_multi_spec&gt;</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T19:31:20.424100</ts>
    <user>Kerstin</user>
    <text>Yeah. I saw that but I don't quite understand how that applies to this case, that seems to apply only to multimethod?</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T19:34:06.424900</ts>
    <user>Meagan</user>
    <text>you use a multimethod to decide which spec to use</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T19:35:26.425200</ts>
    <user>Kerstin</user>
    <text>Okay, I see where you're coming from</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T19:37:19.426500</ts>
    <user>Meagan</user>
    <text>```
(defmulti user-valid-type :valid)

(defmethod user-valid-type :nil [_]
  ;; return spec to use
  )

(defmethod user-valid-type :string [_]
  ;; return spec to use
  )
```</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T20:07:52.428800</ts>
    <user>Kerstin</user>
    <text>In this case, I've been ingesting the document the actual `tag` is one level deeper. ie:

```
{:user "string" :profile {:valid :string}}
{:user nil :profile {:valid :nil}}
```
So how would that work? The document is a bit hard to parse</text>
  </message>
  <message conversation_id="716">
    <ts>2019-03-06T20:08:36.429200</ts>
    <user>Dann</user>
    <text>a multimethod can use any function for dispatch</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T20:09:37.430500</ts>
    <user>Dann</user>
    <text>instead of `(defmulti user-valid-type :valid)` you could use eg. `(defmulti user-valid-type (comp :valid :profile))` or `(defmulti user-valid-type (fn [m] (get-in m [:profile :valid]))`</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T20:14:09.431200</ts>
    <user>Kerstin</user>
    <text>What about the last parameter to `(s/multi-spec)` then?</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T20:15:54.431500</ts>
    <user>Dann</user>
    <text>the same thing you pass to defmulti I think</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T20:16:55.431900</ts>
    <user>Dann</user>
    <text>hmm... it seems to be more complicated than that</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T20:18:42.433100</ts>
    <user>Dann</user>
    <text>it is used during generation, and should either be a key (if the dispatch is by a key) or a function that takes a thing and a value and tags the object - so it's like the inverse of the multimethod dispatch function it seems(?)</text>
  </message>
  <message conversation_id="715">
    <ts>2019-03-06T20:19:14.433700</ts>
    <user>Kerstin</user>
    <text>Yeah, the additional nesting makes it a whole lot complicated it seems.</text>
  </message>
  <message conversation_id="717">
    <ts>2019-03-06T22:12:48.434400</ts>
    <user>Toby</user>
    <text>&lt;@Arline&gt; &lt;@Ronald&gt; there's also Walkable which is more expressive &lt;http://walkable.gitlab.io&gt;</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T00:16:29.436100</ts>
    <user>Xiomara</user>
    <text>Can somebody briefly tell the difference between (and high level overview of) Socket-REPL and prepl?</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:34:51.437500</ts>
    <user>Celestine</user>
    <text>&lt;@Xiomara&gt; prepl is a REPL for other programs -- it offers no prompt and it returns data: a hash map containing the result, the form read, etc. prepl can run locally or over a socket connection.</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:35:33.438300</ts>
    <user>Celestine</user>
    <text>When folks talk about Socket REPL, they mostly mean a regular REPL (with a prompt, and that prints results) running over a socket connection.</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:35:46.438500</ts>
    <user>Celestine</user>
    <text>Does that help?</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:36:11.438900</ts>
    <user>Xiomara</user>
    <text>&lt;@Celestine&gt; Thanks, that makes it clear for me. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:38:43.441100</ts>
    <user>Celestine</user>
    <text>Socket REPLs can be started for any process, just by providing JVM options -- that's most how we run REPLs on our processes. You can tell Clojure to start a Socket REPL (added in 1.8) with either a regular REPL (prompts, prints results) or a prepl (new in 1.10, no prompt, returns data). The nice thing is that you can do this for _any_ Clojure process now, external to the code.</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:40:41.443400</ts>
    <user>Celestine</user>
    <text>I switched to using unravel (based on unrepl) at the command line to connect to process that have a Socket REPL started up, and more recently to Atom + Chlorine for my editor experience that can connect to any Socket REPL -- no need for nREPL etc. Which means I can interact with any of my processes -- locally for dev or remotely on QA/production -- using the same editor or command-line setup, with no server-side deps.</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:41:37.444500</ts>
    <user>Celestine</user>
    <text>I also use REBL the same way: I start up REBL but also start a Socket REPL via JVM options, and then I can connect to it and `submit` forms and values to REBL for display in the visualization pane.</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:42:13.445000</ts>
    <user>Celestine</user>
    <text>(I don't know how many people are using REBL in their day-to-day workflow?)</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:43:18.446000</ts>
    <user>Celestine</user>
    <text>I posted an example the other day, showing Atom + Chlorine + REBL running on Windows 10 (via the work-in-progress PowerShell version of `clj`): &lt;https://clojurians.slack.com/files/U04V70XH6/FGKMLGF41/image.png&gt;</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:45:03.446800</ts>
    <user>Celestine</user>
    <text>(it was on my tiny laptop so it looks a mess -- works great on my 27" desktop tho' :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:54:41.447500</ts>
    <user>Xiomara</user>
    <text>&lt;@Celestine&gt; Coincidentally, I started thinking about this after reading your Chlorine-Atom blogpost.</text>
  </message>
  <message conversation_id="718">
    <ts>2019-03-07T01:58:08.447700</ts>
    <user>Celestine</user>
    <text>That makes me happy :slightly_smiling_face:</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:16:14.451400</ts>
    <user>Sonny</user>
    <text>Hey folks, was just doing a little `defprotocol` / `defrecord` / `extend-protocol` / `extend-type` demo to a member of my team here. It's actually been a little while since I really did much of this stuff in anger and at one point I said, "I'm pretty sure you can just treat Java interfaces as protocols" and tried to, `extend-protocol` java.lang.Runnable. As it turns out... you _can't_ do this :wink:. Aware of the existence of things like `reify` and `proxy` etc, but I am interested in whether there is a good technical reason why interfaces and protocols can't just be treated as transparently the same.</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:17:40.451800</ts>
    <user>Harris</user>
    <text>java interfaces aren't open to extension, clojure protocols are</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:18:04.452300</ts>
    <user>Harris</user>
    <text>in java you can't extend a class to an interface _after_ having created that class</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:21:12.454100</ts>
    <user>Sonny</user>
    <text>Ahhh, I see. We actually spoke a little about this. I actually waved my hands and said, "I guess clojure does some kind of magic to allow for the runtime implementation of interfaces", instead it separates the concepts entirely. Makes sense. Thanks.</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:21:28.454300</ts>
    <user>Harris</user>
    <text>yeah</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:21:36.454600</ts>
    <user>Harris</user>
    <text>protocols are backed by an interface for performance</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:21:40.454800</ts>
    <user>Harris</user>
    <text>but that's just an implementationd etail</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:21:53.455200</ts>
    <user>Harris</user>
    <text>the interface is only used if you extend the protocol inline while defining the type</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:22:14.455600</ts>
    <user>Harris</user>
    <text>when you extend an existing type to a protocol, the impl lives in an (open) vtable</text>
  </message>
  <message conversation_id="719">
    <ts>2019-03-07T07:42:42.456000</ts>
    <user>Sonny</user>
    <text>Makes sense. Thank you &lt;@Harris&gt;.</text>
  </message>
  <message conversation_id="720">
    <ts>2019-03-07T07:51:14.456300</ts>
    <user>Bernardo</user>
    <text>Just discovered
&lt;https://github.com/dvlopt/clojure-raspberry-pi&gt;

Fascinating</text>
  </message>
  <message conversation_id="720">
    <ts>2019-03-07T08:01:42.456500</ts>
    <user>Hedy</user>
    <text>&lt;@Celestine&gt;  can the Socket REPL be configured for SSL?  Or do you only open the port to certain clients.  thanks by the way for you blog post about Atom + Chlorine.  I am really liking that combination</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T08:56:03.458000</ts>
    <user>Eduardo</user>
    <text>In Scala, using a future requires an `ExecutionContext`. Is there anything analogous in Clojure?</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T08:56:58.459100</ts>
    <user>Celestine</user>
    <text>Just a plain socket. We don't open the port on the box -- we use an ssh tunnel over a VPN to connect. </text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T08:57:17.459400</ts>
    <user>Jasmine</user>
    <text>no</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T08:57:36.459700</ts>
    <user>Jasmine</user>
    <text>there is one global pool for futures</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T08:59:08.460800</ts>
    <user>Jasmine</user>
    <text>it is possible to replace the global executor used for futures with &lt;http://clojure.github.io/clojure/clojure.core-api.html#clojure.core/set-agent-send-off-executor%21&gt; but that's not something most people do (or even know exists)</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T08:59:57.461200</ts>
    <user>Clarine</user>
    <text>&lt;@Eduardo&gt; You can however use libraries that mimick Clojure future but allow passing a threadpool:
&lt;https://github.com/mpenet/knit&gt;
Manifold also allows configurable thread pools</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T09:00:28.461800</ts>
    <user>Jasmine</user>
    <text>or &lt;https://github.com/TheClimateCorporation/claypoole&gt;</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T09:00:59.462500</ts>
    <user>Eduardo</user>
    <text>In the Scala world, it’s a whole other layer of complexity to manage. I’m just curious why we never worry about it in Clojure.</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T09:02:09.463100</ts>
    <user>Jasmine</user>
    <text>well realistically, there are only a finite number of threads :)</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T09:02:41.464100</ts>
    <user>Clarine</user>
    <text>am I right that in Scala you set an implicit somewhere once to a ThreadPool and then never worry about it again? what is the added complexity in Scala?</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T09:03:11.464500</ts>
    <user>Jasmine</user>
    <text>Clojure has an ambient global pool and suggests you use that by default</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T09:04:03.465200</ts>
    <user>Jasmine</user>
    <text>(well, two global pools - an unbounded cached thread pool for I/O and a bounded thread pool for CPU)</text>
  </message>
  <message conversation_id="721">
    <ts>2019-03-07T09:04:26.465700</ts>
    <user>Jasmine</user>
    <text>futures and agent send-off use the first, send uses the latter</text>
  </message>
  <message conversation_id="722">
    <ts>2019-03-07T09:28:51.466100</ts>
    <user>Hedy</user>
    <text>ahh .  ok makes sense.. thanks</text>
  </message>
  <message conversation_id="722">
    <ts>2019-03-07T09:38:55.466700</ts>
    <user>Arline</user>
    <text>&lt;@Celestine&gt; Makes sense. :slightly_smiling_face: &lt;https://clojurians.slack.com/archives/C03S1KBA2/p1551911775401700&gt;</text>
  </message>
  <message conversation_id="722">
    <ts>2019-03-07T09:41:18.467400</ts>
    <user>Min</user>
    <text>with pg you could use ANY(?) and pass an array</text>
  </message>
  <message conversation_id="722">
    <ts>2019-03-07T09:41:27.467800</ts>
    <user>Jasmine</user>
    <text>friends don't let friends make sql with string concat</text>
  </message>
  <message conversation_id="722">
    <ts>2019-03-07T09:41:43.468600</ts>
    <user>Min</user>
    <text>^</text>
  </message>
  <message conversation_id="723">
    <ts>2019-03-07T10:47:29.470000</ts>
    <user>Eduardo</user>
    <text>&lt;@Clarine&gt; I just read an article on the three different ways to manage an ExecutionContext in Scala, depending on your goal. So it’s not a set-and-forget, necessarily. But I’m certainly no expert in Scala futures, either.</text>
  </message>
  <message conversation_id="723">
    <ts>2019-03-07T10:47:49.470200</ts>
    <user>Clarine</user>
    <text>Me neither</text>
  </message>
  <message conversation_id="723">
    <ts>2019-03-07T10:52:15.471100</ts>
    <user>Clarine</user>
    <text>&lt;@Min&gt; I just co-incidentally found an email from 2014 in my inbox and realized it was you I bought a EuroClojure ticket from last-minute</text>
  </message>
  <message conversation_id="723">
    <ts>2019-03-07T10:58:18.471400</ts>
    <user>Min</user>
    <text>right!</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:11:41.474000</ts>
    <user>Ashlie</user>
    <text>Hi all. I'd like to submit a minor change to the &lt;http://clojure.org|clojure.org&gt; website, so I need to sign the contributor agreement. But I can't seem to actually _see_ it, no matter what I do it shows up as "thumbnail not available" or a broken image icon. I've tried this in both Safari and Chrome, with/without adblock, I even installed Flash and had someone else check the site, still broken. Any idea what to do so I can sign it?</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:14:53.474800</ts>
    <user>Epifania</user>
    <text>&lt;@Ashlie&gt; seems something is wrong with the image loading, not the image itself. If you visit &lt;https://secure.na1.echosign.com/document/ci/3AAABLblqZhDSsExRd_lWlJxQm5A6RsQuKSIJlSvjgSw_zJ8BPFSdTqI4Xy5JV14UpnUiBQCEbbNtASDjPyMn5hb1a5KjWaQf/z100.png&amp;amp;sns=z100&amp;amp;snp=1&gt; you'll see the actual agreement. You can also not trust my link, and right click, copy image url and visit it manually</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:15:05.475300</ts>
    <user>Epifania</user>
    <text>that document in general seems broken (&lt;https://secure.echosign.com/public/hostedForm?formid=95YMDL576B336E&gt;)</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:15:59.475800</ts>
    <user>Ashlie</user>
    <text>Didn't think of that. Thanks, good enough for me.</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:18:10.476400</ts>
    <user>Jasmine</user>
    <text>there is a CORS error in the echosign site, which seems totally broken</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:18:30.476800</ts>
    <user>Jasmine</user>
    <text>we are aware of it, but are at the mercy of adobe's broken junk afaik</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:20:24.477500</ts>
    <user>Jasmine</user>
    <text>all that stuff is under Rich's account so it's fighting for attention with a lot of other stuff</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:27:47.478100</ts>
    <user>Ashlie</user>
    <text>Oh well. I got it submitted still :)</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:37:24.478700</ts>
    <user>Jasmine</user>
    <text>it is the url indeed</text>
  </message>
  <message conversation_id="724">
    <ts>2019-03-07T11:37:39.479100</ts>
    <user>Jasmine</user>
    <text>should be &lt;https://secure.na1.echosign.com/public/hostedForm?formid=95YMDL576B336E&gt;, will fix</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:42:56.481500</ts>
    <user>Nigel</user>
    <text>as a part of an internship programme, I have a setup where I run my tests against the intern’s code. My setup is currently only for Javascript, but I’ve been thinking about a setup like this for Clojure</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:43:53.482000</ts>
    <user>Nigel</user>
    <text>I guess I’d have to write my own runner for this</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:44:35.482300</ts>
    <user>Clarine</user>
    <text>what is your question? if there’s a clojure test runner that works for your needs?</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:46:28.483600</ts>
    <user>Nigel</user>
    <text>&lt;@Clarine&gt; - yes. I need two things. One, a way into hook into various stages of execution(before test, after test etc), the other is some way to generate a JSON</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:46:38.483900</ts>
    <user>Nigel</user>
    <text>if I have the first feature, I can easily obviously build the other</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:46:48.484300</ts>
    <user>Nigel</user>
    <text>I would like to stick to `clojure.test`</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:46:53.484600</ts>
    <user>Clarine</user>
    <text>If you only need the JVM then kaocha can already do this</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:47:02.484900</ts>
    <user>Clarine</user>
    <text>With CLJS it’s pretty early days for kaocha</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:47:13.485400</ts>
    <user>Clarine</user>
    <text>you can also use the multimethod that’s in clojure.test maybe</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:47:17.485600</ts>
    <user>Nigel</user>
    <text>no, just jvm for now. T hanks &lt;@Clarine&gt; I’ll look into it</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:47:51.485800</ts>
    <user>Nigel</user>
    <text>This is great. Thanks &lt;@Clarine&gt;</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:48:32.486500</ts>
    <user>Nigel</user>
    <text>An unrelated question: Have you played with yetibot? I want a project that I can get the interns to hack together on</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:49:19.486900</ts>
    <user>Clarine</user>
    <text>&lt;@Nigel&gt; here’s an example of using the hooks in clojure.test: &lt;https://gist.github.com/metametadata/c40a5f099814e591cd627b874f9bb595&gt;</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:49:37.487100</ts>
    <user>Clarine</user>
    <text>I don’t know yetibot</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:49:53.487400</ts>
    <user>Clarine</user>
    <text>I usually talk directly to Slack via webhooks</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:51:05.487800</ts>
    <user>Nigel</user>
    <text>&lt;@Clarine&gt; Thanks. &lt;https://cljdoc.org/d/lambdaisland/kaocha/0.0-389/doc/plugin-hooks&gt; is what I was looking for</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:52:09.488300</ts>
    <user>Nigel</user>
    <text>so the `test` passed to the hook is a map with test metadata?</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:53:28.489000</ts>
    <user>Clarine</user>
    <text>If you don’t want to usa kaocha but plain clojure.test, you can use these hooks, is what I tried to say:
&lt;https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L408&gt;
For questions about &lt;#CCY2V0U6A|kaocha&gt; you better ask in that channel</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T12:55:03.489400</ts>
    <user>Nigel</user>
    <text>thanks.</text>
  </message>
  <message conversation_id="725">
    <ts>2019-03-07T13:14:53.489900</ts>
    <user>Nigel</user>
    <text>`clojure.test` is enough for my needs. Thank you</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:17:12.490000</ts>
    <user>Vinnie</user>
    <text>i'm happy to answer any yetibot questions</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:33:49.490200</ts>
    <user>Nigel</user>
    <text>&lt;@Vinnie&gt; - are you the author?</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:35:36.490400</ts>
    <user>Vinnie</user>
    <text>yep</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:36:40.490600</ts>
    <user>Nigel</user>
    <text>Cool! I’ve a bunch of people that I am planning on teaching Clojure to. I thought it would be a good idea for them to hack on something like Yetibot</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:36:50.490800</ts>
    <user>Nigel</user>
    <text>Build their own chatbot and at the same time, learn Clojure</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:36:53.491000</ts>
    <user>Nigel</user>
    <text>those are the goals, broadly</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:37:15.491200</ts>
    <user>Vinnie</user>
    <text>cool :slightly_smiling_face: i'm actually doing something similar in a few weeks. teaching a workshop on yetibot to people who are not familiar with Clojure</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:37:35.491400</ts>
    <user>Vinnie</user>
    <text>it's a pretty good project for it because a command is pretty well isolated</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:37:45.491600</ts>
    <user>Vinnie</user>
    <text>don't need to understand the rest to build a command that interacts with an external API</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:38:46.491800</ts>
    <user>Nigel</user>
    <text>Cool. Let me play with it a bit and see where I go with it</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:39:03.492000</ts>
    <user>Vinnie</user>
    <text>sounds good. just ping me if you need anything</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:39:13.492200</ts>
    <user>Bernardo</user>
    <text>And ask me anything about... crazy uses for Yetibot: like eval-ing Clojure expressions in Slack</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:39:42.492500</ts>
    <user>Bernardo</user>
    <text>*admin-only feature `:-D`</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:39:52.492700</ts>
    <user>Nigel</user>
    <text>Lol. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="726">
    <ts>2019-03-07T13:40:55.493000</ts>
    <user>Bernardo</user>
    <text>Yep. Stuff like

```
!eval (xml/emit-element (zip/root [{:tag :a, :attrs {:href "&lt;http://yetibot.com|yetibot.com&gt;"}, :content nil} nil]))
```</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:32:37.494800</ts>
    <user>Scotty</user>
    <text>What would be a good interface for a module that provides a wrapper around a serial port (full-duplex)? A pair of `core.async` channels?</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:42:46.495000</ts>
    <user>Rosaline</user>
    <text>You could construct a channel type that wrapped two channels and implemented WritePort using one channel and ReadPort using the other</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:47:07.496600</ts>
    <user>Meagan</user>
    <text>I think manifold is meant to be a more general interface for async programming: &lt;https://github.com/ztellman/manifold&gt;</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:47:23.497100</ts>
    <user>Rosaline</user>
    <text>meh</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:48:04.498200</ts>
    <user>Scotty</user>
    <text>Hmm, a pair of a source and a sink.</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:48:11.498400</ts>
    <user>Rosaline</user>
    <text>manifold provides nice integration with netty, but it is hardly general, and doesn't properly expresses things like choice over streams</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:49:51.499500</ts>
    <user>Meagan</user>
    <text>I haven't used it at all. I just know that in a talk I watched, the reason ztellman gave for creating it was that core.async was more of a app-level abstraction choice</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:50:33.500600</ts>
    <user>Meagan</user>
    <text>and he wanted a library that didn't force you to warp your application to be core.async-y</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:50:50.501100</ts>
    <user>Rosaline</user>
    <text>instead forcing your application to manifoldy</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:51:03.501500</ts>
    <user>Rosaline</user>
    <text>and not having proper choice</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:51:45.502300</ts>
    <user>Scotty</user>
    <text>Is there really a way to do `alts!` over disparate streams? It's not like Java gives us an analogue of `select(2)` system call.</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:52:02.502900</ts>
    <user>Rosaline</user>
    <text>java does</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:52:08.503100</ts>
    <user>Rosaline</user>
    <text>you use nio</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:52:14.503300</ts>
    <user>Rosaline</user>
    <text>do it over channels</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:52:18.503500</ts>
    <user>Rosaline</user>
    <text>(nio channels)</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:52:44.504000</ts>
    <user>Scotty</user>
    <text>I don't see how can I do `nio` on `core.async` channels, or on a `BlockingQueue`, or on a lazy sequence.</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:52:55.504200</ts>
    <user>Rosaline</user>
    <text>correct</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:53:11.505000</ts>
    <user>Scotty</user>
    <text>So there is no way to implement `alts!` in Manifold.</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:53:11.505100</ts>
    <user>Rosaline</user>
    <text>core.async's alt only works on core.async channels</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:54:08.505900</ts>
    <user>Rosaline</user>
    <text>You could implement the channel protocols on top of nio channels</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:55:17.506900</ts>
    <user>Meagan</user>
    <text>manifold doesn't seem to be nearly as infectious as core.async</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:55:18.507100</ts>
    <user>Rosaline</user>
    <text>I have some concurrent ml kind of experiments that provide concurrent ml events as sync points (instead of sync'ing directly on channels) and extends them to nio operations with a selector</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:55:49.507300</ts>
    <user>Rosaline</user>
    <text>I doubt that</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:56:12.507800</ts>
    <user>Rosaline</user>
    <text>and then has the cml events implement ReadPort</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:56:36.507900</ts>
    <user>Meagan</user>
    <text>it seems pretty straight forward. functions that return values. without e.g. syntax transforms</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:57:00.508100</ts>
    <user>Rosaline</user>
    <text>you can do that with core.async too</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:57:36.508300</ts>
    <user>Meagan</user>
    <text>anyway, I'm talking out of my ass anyway so I'll assume you've done your due diligence. but I'm curious why it fails to approach its goals given in the rationale: &lt;https://aleph.io/manifold/rationale.html&gt;</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:57:46.508500</ts>
    <user>Rosaline</user>
    <text>if you don't use the go macro, and are on the jvm, you use the thread blocking version of everything, boom same thing</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:58:30.508800</ts>
    <user>Rosaline</user>
    <text>it fails because zach started from netty, a concrete io famework, vs some concurrency formalism</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T15:59:24.509000</ts>
    <user>Rosaline</user>
    <text>so for example, alts! on some collection of core.async channel ops will succeed for one of them once atomically</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:00:15.509200</ts>
    <user>Rosaline</user>
    <text>where as for manifold, taking from a stream returns a deferred, and then you can us or to make a choice between deferreds, but you cannot untake that deferred from a stram</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:00:32.509400</ts>
    <user>Rosaline</user>
    <text>which is very io like, you cannot un read that stream</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:01:30.509600</ts>
    <user>Rosaline</user>
    <text>but even then, concurrent ml (which builds on the ideas from csp which core.async is built) provides hooks for building transactional io operations</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:01:43.509800</ts>
    <user>Meagan</user>
    <text>I don't get the netty connection</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:01:52.510000</ts>
    <user>Rosaline</user>
    <text>oh</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:02:12.510200</ts>
    <user>Rosaline</user>
    <text>that whole codebase grew out of aleph, which is zach's netty library</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:02:27.510400</ts>
    <user>Meagan</user>
    <text>I see</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:13:19.514300</ts>
    <user>Rosaline</user>
    <text>the tricky thing with integrating with nio there is naively you assume that similar to core.async having !&amp;gt; and &amp;lt;! on channels, that the integration point is reading and writing to nio channels, which would leave with similar issues to manifold with regard to atomic choice between multiple actions, so the correct integration point is around the selector or the selectionkey (I don't deal directly with nio all that often so the specifics escape me)</text>
  </message>
  <message conversation_id="728">
    <ts>2019-03-07T16:13:28.514700</ts>
    <user>Clarine</user>
    <text>I have encountered several examples from a clojuredocs dump that use a var called `unchecked-divide`:
```
{:var clojure.core/unchecked-divide,
 :example 582,
 :toplevel nil,
 :sandboxed
 [(def thous 1000)
  (def trill (* thous thous thous thous))
  (unchecked-divide trill 10)
  (/ trill 10)]}
```
but I can’t find this in clojure itself nor on the clojuredocs site. What’s the history behind this?</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:14:44.515000</ts>
    <user>Rosaline</user>
    <text>old code</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:14:51.515200</ts>
    <user>Clarine</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1545&gt;</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:15:11.515400</ts>
    <user>Clarine</user>
    <text>it seems like it never made it into clojure (so far)</text>
  </message>
  <message conversation_id="728">
    <ts>2019-03-07T16:16:05.515800</ts>
    <user>Clarine</user>
    <text>the links on this page indeed exist, but point nowhere: &lt;https://clojure.org/reference/java_interop&gt;</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:16:09.516000</ts>
    <user>Suzann</user>
    <text>&lt;https://github.com/clojure/clojure/blob/8fbafa92faacb92a9bd49fa1e9b7e2c8c0747c07/src/clj/clojure/core.clj#L1015-L1020&gt;</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T16:16:33.516700</ts>
    <user>Suzann</user>
    <text>Got removed here &lt;https://github.com/clojure/clojure/commit/6ab3e4cd672092823a04c944210a23c29142785d&gt;</text>
  </message>
  <message conversation_id="728">
    <ts>2019-03-07T16:17:02.517200</ts>
    <user>Suzann</user>
    <text>now there is `unchecked-divide-int`</text>
  </message>
  <message conversation_id="728">
    <ts>2019-03-07T16:17:27.517500</ts>
    <user>Clarine</user>
    <text>ok — thanks</text>
  </message>
  <message conversation_id="729">
    <ts>2019-03-07T17:37:33.518600</ts>
    <user>Meagan</user>
    <text>this took me way too long to come up with for some reason:
```
(defn deep-merge [x1 x2]
  (cond
    (and (map? x1) (map? x2)) (merge-with deep-merge x1 x2)

    (and (coll? x1) (coll? x2)) (into x1 x2)

    :else x2))
```</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T18:50:38.519100</ts>
    <user>Kirsten</user>
    <text>stackoverflow</text>
  </message>
  <message conversation_id="727">
    <ts>2019-03-07T18:53:55.519500</ts>
    <user>Dann</user>
    <text>you'd need a very deep nesting of maps for that to be an issue</text>
  </message>
  <message conversation_id="729">
    <ts>2019-03-07T21:40:16.521000</ts>
    <user>Ruthann</user>
    <text>Question about datomic ions: is there a way to do a compiler check without pushing to AWS? I am still new to Clojure…</text>
  </message>
  <message conversation_id="729">
    <ts>2019-03-08T04:09:04.523600</ts>
    <user>Clarine</user>
    <text>Funny:
```
 $ clj -Sdeps '{:deps {org.clojure/clojure {:mvn/version "1.5.0"}}}' -e '(pr-str (quote))'
"nil"
$ clj -Sdeps '{:deps {org.clojure/clojure {:mvn/version "1.10.0"}}}' -e '(pr-str (quote))'
Wrong number of args (0) passed to quote
```
Seems like a breaking change to `quote`. Not important, just something I found while mining clojuredocs :slightly_smiling_face:.</text>
  </message>
  <message conversation_id="729">
    <ts>2019-03-08T04:11:36.524100</ts>
    <user>Clarine</user>
    <text>Same with `clj -Sdeps '{:deps {org.clojure/clojure {:mvn/version "1.5.0"}}}' -e '(pr-str (quote 1 2 3 4 5))'`, doesn’t seem to work anymore.
I came across that code here: &lt;http://clojuredocs.org/clojure.core/quote#example-542692d0c026201cdc326ea2&gt;</text>
  </message>
  <message conversation_id="730">
    <ts>2019-03-08T04:20:32.525300</ts>
    <user>Roselle</user>
    <text>Nothing to add here, just noting how trivial it was to test this with `clj`</text>
  </message>
  <message conversation_id="731">
    <ts>2019-03-08T04:28:31.527500</ts>
    <user>Melynda</user>
    <text>Hi! Is there a short form for something like `(update coll #(map (fn [item] (if (condition item) (modify item) item)) %))`? Something like a `:when` for updating a collection?</text>
  </message>
  <message conversation_id="729">
    <ts>2019-03-08T04:38:14.528000</ts>
    <user>Clarine</user>
    <text>not really. maybe specter offers something really short here, but that would be a library</text>
  </message>
  <message conversation_id="729">
    <ts>2019-03-08T04:43:37.528200</ts>
    <user>Melynda</user>
    <text>&lt;@Clarine&gt; Thanks!</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:37:19.528700</ts>
    <user>Emmy</user>
    <text>hmmm
`wat`
```
user=&amp;gt; (type 1)
;;=&amp;gt; java.lang.Long
user=&amp;gt; (case (type 1)
         java.lang.Long :long
         java.lang.Double :double
         :something-else)
;;=&amp;gt; :something-else
user=&amp;gt; (= (type 1) java.lang.Long)
;;=&amp;gt; true

```</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:38:24.530000</ts>
    <user>Emmy</user>
    <text>oh because case is a macro?</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:38:34.530300</ts>
    <user>Emmy</user>
    <text>It doesn't evaluate the test?</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:39:25.531200</ts>
    <user>Clarine</user>
    <text>no sorry, that’s only the case for the values on which it dispatches.
```
(macroexpand ' (case (type 1)
         java.lang.Long :long
         java.lang.Double :double
         :something-else))
(let* [G__141 (type 1)] (case* G__141 1 1 :something-else {0 [java.lang.Long :long], 1 [java.lang.Double :double]} :compact :hash-equiv nil))
```</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:39:34.531500</ts>
    <user>Clarine</user>
    <text>(else `case` would be pretty useless)</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:40:02.531900</ts>
    <user>Emmy</user>
    <text>mm</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:41:18.532600</ts>
    <user>Clarine</user>
    <text>```
(case 'java.lang.Long java.lang.Long :long) ;;=&amp;gt; :long 
```
so the symbol is not evaluated</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:42:45.532900</ts>
    <user>Clarine</user>
    <text>the class is not a compile time constant is what it boils down to</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:44:38.533300</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; (case (type 1) #=java.lang.Long :long :else)
:long```</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:45:07.533600</ts>
    <user>Harris</user>
    <text>just beware that if you AOT compile this, it may break between different jvm versions, since it relies on the class hash identity</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:45:46.534100</ts>
    <user>Clarine</user>
    <text>in other words, just go with `cond` here</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:45:50.534300</ts>
    <user>Harris</user>
    <text>yep</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:46:19.534700</ts>
    <user>Harris</user>
    <text>or if you need constant~ish time dispatch, use a protocol or a multimethod instead</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:48:10.535500</ts>
    <user>Alleen</user>
    <text>```
(case (symbol (.getName (type 1)))
  java.lang.Long :long
  java.lang.Double :double
  :something-else)
```</text>
  </message>
  <message conversation_id="733">
    <ts>2019-03-08T05:53:50.535600</ts>
    <user>Roslyn</user>
    <text>What is this magic?</text>
  </message>
  <message conversation_id="732">
    <ts>2019-03-08T05:55:13.535900</ts>
    <user>Clarine</user>
    <text>clever :slightly_smiling_face:</text>
  </message>
  <message conversation_id="733">
    <ts>2019-03-08T05:59:28.536100</ts>
    <user>Harris</user>
    <text>read-eval</text>
  </message>
  <message conversation_id="733">
    <ts>2019-03-08T06:00:10.536300</ts>
    <user>Harris</user>
    <text>don't think it's documented anywhere</text>
  </message>
  <message conversation_id="734">
    <ts>2019-03-08T06:30:38.539300</ts>
    <user>Danna</user>
    <text>multimethod sanitycheck -
If I declare
```(defmulti example-multi (fn [arg] (:type arg)))```
and I want to create a default method that returns a string,  it always feels like I ought to be able to write something like
```(defmethod example-multi :default str)```
but I've never got that to work, and instead I have to invoke it manually
```(defmethod example-multi :default [arg] (str arg))```

Am I missing something here, or is it just not possible?</text>
  </message>
  <message conversation_id="734">
    <ts>2019-03-08T06:31:44.540300</ts>
    <user>Danna</user>
    <text>my driver is that plain old functions are easier to work with than multi-method tentacles
I would like multi methods to be solely about dispatch/invocation and not contain any other functionality</text>
  </message>
  <message conversation_id="734">
    <ts>2019-03-08T06:34:43.541000</ts>
    <user>Emmy</user>
    <text>yeah I figured that I was probably doing it wrong with case to do runtime type dispatch when protocols and multimethods exist</text>
  </message>
  <message conversation_id="734">
    <ts>2019-03-08T06:34:51.541300</ts>
    <user>Emmy</user>
    <text>but then got more caught up with why it didn't work</text>
  </message>
  <message conversation_id="735">
    <ts>2019-03-08T07:19:20.543500</ts>
    <user>Sina</user>
    <text>I want to write some property tests, and I have done that before with `clojure.test.check`.

However, am I right in thinking that I could just write some spec for my functions and get the property testing for “free”?</text>
  </message>
  <message conversation_id="735">
    <ts>2019-03-08T07:20:46.544500</ts>
    <user>Clarine</user>
    <text>in a lot of cases yes, unless you use `s/and` + some predicates, these will mostly require writing a generator</text>
  </message>
  <message conversation_id="735">
    <ts>2019-03-08T07:20:48.544700</ts>
    <user>Gilberto</user>
    <text>You still need to write your properties, you just get generators "for free".</text>
  </message>
  <message conversation_id="735">
    <ts>2019-03-08T07:21:45.545800</ts>
    <user>Sina</user>
    <text>Right, I suppose I’m more asking, is there any reason why I would still use `test.check`, rather than using spec and getting a bit more bang for my buck?</text>
  </message>
  <message conversation_id="735">
    <ts>2019-03-08T07:24:33.547400</ts>
    <user>Sina</user>
    <text>&amp;gt; You still need to write your properties
ah wait so I _do_ still need `test.check` to actually do the tests. Thanks &lt;@Clarine&gt; and &lt;@Gilberto&gt;</text>
  </message>
  <message conversation_id="735">
    <ts>2019-03-08T07:27:04.549700</ts>
    <user>Gilberto</user>
    <text>Yep - you still need to do `for-all`, you can just use your specs to generate the data. You can also use your specs to validate something is conformant to a spec (via `valid?`) in your property so you do get plenty of mileage with spec, but it won't give you properties for free.

Not entirely related to this I also highly recommend using &lt;https://github.com/gfredericks/test.chuck&gt; if you are not doing that already.</text>
  </message>
  <message conversation_id="735">
    <ts>2019-03-08T07:29:08.550800</ts>
    <user>Sina</user>
    <text>Awesome, thanks</text>
  </message>
  <message conversation_id="736">
    <ts>2019-03-08T08:39:17.551400</ts>
    <user>Danna</user>
    <text>&lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/LispReader.java#L115&gt;</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T09:55:41.553400</ts>
    <user>Deb</user>
    <text>I'm using deps.edn for my project. Is there a way to list which dependencies have newer versions available?</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T09:56:16.553800</ts>
    <user>Clarine</user>
    <text>yes: &lt;https://github.com/Olical/depot&gt;</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:14:56.554900</ts>
    <user>Danna</user>
    <text>I was hoping to
```
(extend-type PGobject
  Named
  (getNamespace [^PGobject this] (.getType this))
  (getName[^PGobject this] (.getValue this)))
```
but it gives me
```CompilerException java.lang.IllegalArgumentException: interface clojure.lang.Named is not a protocol, compiling:```</text>
  </message>
  <message conversation_id="736">
    <ts>2019-03-08T10:15:30.555600</ts>
    <user>Danna</user>
    <text>is there a convenient way round this? Do I just have to accept that I cannot do it?</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:16:30.556000</ts>
    <user>Jasmine</user>
    <text>Named is an interface, not a protocol, so you can't use extend with it</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:17:04.556500</ts>
    <user>Danna</user>
    <text>is that an intentional choice?</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:18:04.558100</ts>
    <user>Jasmine</user>
    <text>well, intentional in that it's not possible</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:18:05.558200</ts>
    <user>Clarine</user>
    <text>I’m using clojail and need to add a permission to read a Property. I thought this is how I should do it:
```
grant {
  permission java.security.AllPermission;
  permission java.util.PropertyPermission "line.separator", "read";
};
```
but I’m still getting access denied (“java.util.PropertyPermission” “line.separator” “read”) when using `clojure.pprint` in the sandbox</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:19:21.558600</ts>
    <user>Jasmine</user>
    <text>presuming that PGObject is  a Java class, it can't be retroactively made to implement an interface (Java classes  are closed  for extension). Clojure protocols are open for  extension, which is why they're cool.</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:20:15.558800</ts>
    <user>Danna</user>
    <text>I guess i'm asking why `Named` is not a protocol</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:20:49.559000</ts>
    <user>Jasmine</user>
    <text>well it's in the guts of Clojure and was created several years before protocols existed</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:20:55.559200</ts>
    <user>Danna</user>
    <text>the PGObject is a convenient way of hooking into Postgres enum types</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:21:03.559400</ts>
    <user>Danna</user>
    <text>ah okay, so its an accident of history</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:21:06.559600</ts>
    <user>Clarine</user>
    <text>it is in ClojureScript which benefited from being created later:
&lt;https://github.com/clojure/clojurescript/blob/master/src/main/cljs/cljs/core.cljs#L839&gt;</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:21:18.559900</ts>
    <user>Danna</user>
    <text>rather than a deep design decision</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:21:46.560100</ts>
    <user>Danna</user>
    <text>ah well
thanks</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:21:50.560300</ts>
    <user>Jasmine</user>
    <text>yeah, most of the core abstractions in Clojure are Java interfaces (CLJS had the benefit of hindsight)</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:29:10.561000</ts>
    <user>Clarine</user>
    <text>I fixed it now by customizing the `:context` arg to:
```
:context (-&amp;gt; (permissions (java.util.PropertyPermission. "line.separator" "read"))
                                         domain
                                         context)
```
Apparently this policy file is needed but ignored</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:54:30.566600</ts>
    <user>Danna</user>
    <text>so I can achieve a similiar result using `proxy`
```
(proxy [PGobject clojure.lang.Named] []
  (getNamespace [] (.getType this))
  (getName [] (.getValue this)))
```</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:54:58.567000</ts>
    <user>Clarine</user>
    <text>Or just a function</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:55:07.567300</ts>
    <user>Danna</user>
    <text>is that going to reflect?</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:55:36.567700</ts>
    <user>Danna</user>
    <text>&lt;@Clarine&gt; not quite clear what you mean</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:55:42.568100</ts>
    <user>Clarine</user>
    <text>you can check with *warn-on-reflection* and add a type hint</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:56:18.568700</ts>
    <user>Clarine</user>
    <text>you can make a function which turns a PGObject enum thing into a keyword</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:56:51.569200</ts>
    <user>Clarine</user>
    <text>this is usually how I do it: when reading from the database turn it into something clojure-y instead of working with those objects directly</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:56:57.569400</ts>
    <user>Danna</user>
    <text>well the point of doing this is that I want to call `(comp keyword name)`</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:57:16.569600</ts>
    <user>Danna</user>
    <text>because I'm not sure if its a PGObject or just a keyword</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:57:49.570100</ts>
    <user>Danna</user>
    <text>computer says ```Reflection warning, /tmp/form-init3318477797552259570.clj:2:20 - reference to field getType can't be resolved.
Reflection warning, /tmp/form-init3318477797552259570.clj:3:15 - reference to field getValue can't be resolved.```</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:57:53.570300</ts>
    <user>Clarine</user>
    <text>the point I’m making is that I would get rid of the PGObject as soon as possible and not expose it beyond the database layer</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:58:36.570700</ts>
    <user>Danna</user>
    <text>yeah, you are prolly right</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:59:07.571400</ts>
    <user>Jasmine</user>
    <text>if you're proxying you're already switching objects, might as well make it what you want</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T10:59:55.572300</ts>
    <user>Danna</user>
    <text>I wasn't sure if proxy _automatically_ inferred type of *this*</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:00:03.572600</ts>
    <user>Danna</user>
    <text>but clearly it doesn't</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:00:57.573000</ts>
    <user>Rosella</user>
    <text>I'm using clojure.java.jdbc to access a Microsoft SQLServer database. I'm using the following database connection structure: {:subprotocol jtds:sqlserver, :subname //192.168.2.129:1433;database=demo;integratedSecurity=false, :user sa, :password whatever}. I'm connecting as the system admin, so I have access to the demo database, but the JDBC connection is binding to the default database, master, rather than the specified database, demo. Has anyone having experience with MS SQLServer and/or the JDBC driver seen anything like this? Any ideas as to why the driver isn't honoring the database parameter specified in :subname?</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:02:55.573500</ts>
    <user>Danna</user>
    <text>might you  have got the syntax of that URL wrong?</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:03:14.574200</ts>
    <user>Danna</user>
    <text>sometimes the default database parameter name gets changed or moved</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:03:59.575200</ts>
    <user>Danna</user>
    <text>this is a very old memory I'm dredging up</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:04:28.575800</ts>
    <user>Danna</user>
    <text>? intead of ;</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:04:31.576100</ts>
    <user>Danna</user>
    <text>that sort of thing</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:10:06.579900</ts>
    <user>Rosella</user>
    <text>Oh, I understand now. The sad thing is that that isn't an actual URL. It's just a parameter string to the MS SQL Server JDBC driver, which has about fifty different optional parameters that can be appended to the servername and port (as detailed in the page &lt;https://docs.microsoft.com/en-us/sql/connect/jdbc/setting-the-connection-properties?view=sql-server-2017&gt;). It appears that databaseName is a synonym for database and I'll try that. The odd thing is that this connection structure worked about two years ago when I last ran this program.</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:10:30.580200</ts>
    <user>Danna</user>
    <text>two years is a long time</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:10:43.580500</ts>
    <user>Rosella</user>
    <text>Sure seems to be.</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:11:03.581000</ts>
    <user>Danna</user>
    <text>in the days when SQL server 2017 was Young-And-Wild-And-Free</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:19:06.582100</ts>
    <user>Scotty</user>
    <text>&lt;http://classicprogrammerpaintings.com/post/183312119276/clojure-programmer-at-work-henri-lebasque&gt;</text>
  </message>
  <message conversation_id="737">
    <ts>2019-03-08T11:19:15.582600</ts>
    <user>Scotty</user>
    <text>Well done.</text>
  </message>
  <message conversation_id="738">
    <ts>2019-03-08T11:56:39.585100</ts>
    <user>Celestine</user>
    <text>&lt;@Rosella&gt; I'm more likely to see `clojure.java.jdbc` questions in &lt;#C1Q164V29|sql&gt; -- FYI. My first reaction is "don't use the subprotocol/subname format of DB spec" -- use dbtype/dbname per the docs. It's much better supported and easier to use. Then you should be able to specify `:integratedSecurity false` directly in the DB spec hash map.</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:38:25.587100</ts>
    <user>Holly</user>
    <text>can I make a var `:dynamic`?</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:38:56.587600</ts>
    <user>Holly</user>
    <text>```
(def x 1)

(alter-meta! #'x assoc :dynamic true)

(doseq [i (range 1 10)]
  (with-bindings {#'x i} ;;complains, cant dynamically bind a non-dynamic var
    (println x)))
```</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:39:08.587900</ts>
    <user>Holly</user>
    <text>my guess is alter-meta should work</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:39:35.588500</ts>
    <user>Dann</user>
    <text>as I understand it the :dynamic metadata changes how the def is compiled, in order to create a dynamic var</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:39:52.589000</ts>
    <user>Dann</user>
    <text>applying the metadata after the var already exists skips the actual thing that makes the var dynamic</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:40:33.589300</ts>
    <user>Holly</user>
    <text>thats my guess, but it's a shame isn't it? :stuck_out_tongue:</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:41:06.589600</ts>
    <user>Dann</user>
    <text>there's a setDynamic method on clojure.lang.Var</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:41:37.589800</ts>
    <user>Dann</user>
    <text>&lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Var.java#L106&gt;</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:42:02.590400</ts>
    <user>Dann</user>
    <text>I assume the code that implements def decides whether to call that method</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:42:49.590800</ts>
    <user>Dann</user>
    <text>yeah, that happens in compiler.java &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Compiler.java#L431&gt;</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:43:01.591100</ts>
    <user>Holly</user>
    <text>crap</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:43:24.591400</ts>
    <user>Dann</user>
    <text>why can't you just use setDynamic? it's public</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:47:05.592100</ts>
    <user>Holly</user>
    <text>it worked, wow.</text>
  </message>
  <message conversation_id="739">
    <ts>2019-03-08T17:47:08.592300</ts>
    <user>Holly</user>
    <text>tks</text>
  </message>
  <message conversation_id="740">
    <ts>2019-03-08T19:58:29.592500</ts>
    <user>Catalina</user>
    <text>After reading this great post &lt;http://insideclojure.org/2016/03/16/collections/&gt; I want to kind of extend clojure abstractions to a custom Java type so it can act just like a map and it can be manipulated elsewhere in the code (including libraries) with standard functions like `assoc`, `dissoc`…

The following code doesn’t work, but here is the idea.

```
(extend MyCustomJavaType
  Counted ;;  - countable collections
  (count [this])

  Indexed ;;  - extends Counted, allows index-based lookup
  (nth [i])
  (nth [i not-found])

  Associative ;;  (extends ILookup)
  (containsKey [key])
  (entryAt [key])
  (assoc [key val]))

(assoc (MyCustomJavaType.) :a 1)
;; =&amp;gt; #&amp;lt;something&amp;gt;
```

- How to express it in Clojure? I thought protocols are Java interface, but this previous isn’t valid.
- Where can I find all the interfaces I need to implement to be 100% sure my object will be treated like a map?</text>
  </message>
  <message conversation_id="740">
    <ts>2019-03-08T19:59:57.593500</ts>
    <user>Dann</user>
    <text>why not use defrecord? that lets you have something that acts like a hash-map but you can implement more interfaces / protocols</text>
  </message>
  <message conversation_id="740">
    <ts>2019-03-08T20:02:30.594700</ts>
    <user>Dann</user>
    <text>there's also a library with functions for making  a map-like thing if defrecord isn't flexible enough &lt;https://github.com/ztellman/potemkin#def-map-type&gt; (with the warning here that the author considers the things in this library "almost good ideas")</text>
  </message>
  <message conversation_id="740">
    <ts>2019-03-08T20:04:01.595900</ts>
    <user>Dann</user>
    <text>&lt;@Catalina&gt; and regarding ` I thought protocols are Java interface, but this previous isn’t valid.` - protocols use interfaces as an implementation detail, but extend only works on protocols not interfaces</text>
  </message>
  <message conversation_id="740">
    <ts>2019-03-08T20:04:40.596300</ts>
    <user>Dann</user>
    <text>the jvm doesn't let you add methods to a class that already exists at runtime</text>
  </message>
  <message conversation_id="740">
    <ts>2019-03-08T20:05:28.596900</ts>
    <user>Dann</user>
    <text>extend basically implements a dispatch table that protocol methods use if they can't find the method directly on a target</text>
  </message>
  <message conversation_id="741">
    <ts>2019-03-09T00:14:14.598500</ts>
    <user>Nigel</user>
    <text>How does performance differ between `(apply merge list-of-maps)` vs `(reduce merge {} list-of-maps)` ?</text>
  </message>
  <message conversation_id="742">
    <ts>2019-03-09T00:52:03.599000</ts>
    <user>Madeleine</user>
    <text>Not in a way that matters</text>
  </message>
  <message conversation_id="741">
    <ts>2019-03-09T01:20:18.599200</ts>
    <user>Nigel</user>
    <text>That’s what I thought</text>
  </message>
  <message conversation_id="743">
    <ts>2019-03-09T02:28:23.599900</ts>
    <user>Vernia</user>
    <text>The variadic arity of core functions is often optimised, so `apply` is faster in some cases. In this case it doesn’t really matter since `merge` only has a single arity, which uses `reduce`. An example where there is a difference is `apply str` vs. `reduce str` – the former is faster because the variadic arity of `str` uses a single `StringBuilder`</text>
  </message>
  <message conversation_id="743">
    <ts>2019-03-09T02:30:21.600100</ts>
    <user>Vernia</user>
    <text>A counterexample is `apply +` vs. `reduce +`. The latter is faster, because the variadic arity of `+` has to use the slower `reduce1` due to `reduce` not yet being defined</text>
  </message>
  <message conversation_id="743">
    <ts>2019-03-09T02:30:21.600300</ts>
    <user>Sixta</user>
    <text>But `(reduce +)` is faster than `(apply +)` :smile: benchmarking is the best way to find out if you care </text>
  </message>
  <message conversation_id="743">
    <ts>2019-03-09T02:30:33.600500</ts>
    <user>Vernia</user>
    <text>:ninja:</text>
  </message>
  <message conversation_id="743">
    <ts>2019-03-09T02:31:32.600700</ts>
    <user>Vernia</user>
    <text>Agreed about always benchmarking though, and even better than benchmarking is profiling w/ real use cases</text>
  </message>
  <message conversation_id="743">
    <ts>2019-03-09T02:32:11.600900</ts>
    <user>Nigel</user>
    <text>Thanks a lot</text>
  </message>
  <message conversation_id="743">
    <ts>2019-03-09T02:37:00.601300</ts>
    <user>Vernia</user>
    <text>Somewhat-related: there is a ticket looking at the performance of `merge` – &lt;https://dev.clojure.org/jira/browse/CLJ-1458&gt;</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:37:06.602300</ts>
    <user>Nigel</user>
    <text>How can I get the source of a test? I have a bunch of tests in a namespace, and I need to randomly yield a test to someone(like koans let’s say). So far I have `(filter (comp nil? :test second) (ns-interns 'some-ns))`</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:39:57.602700</ts>
    <user>Nigel</user>
    <text>The above gives me a list of all the tests in that namespace</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:40:29.603200</ts>
    <user>Nigel</user>
    <text>What I want now is to randomly pick a test and get its source. I could use `source` but that’s in `clojure.repl`</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:41:02.603500</ts>
    <user>Nigel</user>
    <text>But that won’t work really</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:41:16.603800</ts>
    <user>Sixta</user>
    <text>What's wrong with that?</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:42:08.604400</ts>
    <user>Nigel</user>
    <text>&lt;@Sixta&gt; - I am not sure `source` is able to see it</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:42:21.604600</ts>
    <user>Nigel</user>
    <text>`(map (comp #(source %1) first) (filter (comp nil? :test second) (ns-interns 'mars-rover.plateau-test)))`</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:42:32.604800</ts>
    <user>Nigel</user>
    <text>source is not found.</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:42:48.605200</ts>
    <user>Nigel</user>
    <text>test is defined using `deftest`</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:43:42.605500</ts>
    <user>Nigel</user>
    <text>Ah darn</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:43:44.605700</ts>
    <user>Nigel</user>
    <text>Ok, got it</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:43:53.606000</ts>
    <user>Nigel</user>
    <text>its a symbol and a fully qualified namespace problem</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:46:47.606900</ts>
    <user>Nigel</user>
    <text>Ok, another foolish question. Is there a simple/canonical way of finding all test based namespaces? Do I just ferret under the `test` dir?</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:51:54.607400</ts>
    <user>Sixta</user>
    <text>Check the orchard codebase, it has a query namespace which can do this</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:52:22.607700</ts>
    <user>Sixta</user>
    <text>It's designed for building tooling</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:53:24.608500</ts>
    <user>Nigel</user>
    <text>Thanks &lt;@Sixta&gt;</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:53:26.608700</ts>
    <user>Sixta</user>
    <text>I sometimes write tests inline rather than separately, so searching test folder bothers me. :)</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:54:11.609900</ts>
    <user>Sixta</user>
    <text>I'm an orchard contributor, feel free to bother me if you need help. &lt;#C17JYSA3H|nrepl&gt; is probably the best channel for help with orchard generally, we are all tooling authors.</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:55:03.610900</ts>
    <user>Nigel</user>
    <text>&lt;@Sixta&gt; - my use is as follows. I have a bunch of interns and I want to provide them a koan like experience, but with a slightly more gamified environment. They get a random test yielded to them, upon completion of which they get another etc.</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:55:28.611500</ts>
    <user>Nigel</user>
    <text>So this system has to take their submission, evaluate and provide a test to them</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T03:55:37.611800</ts>
    <user>Nigel</user>
    <text>so, an inline test is not a concern at the moment</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:08:23.612600</ts>
    <user>Nigel</user>
    <text>How do I get a symbol out of a var?</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:13:49.614000</ts>
    <user>Nigel</user>
    <text>I’ve a bunch of interned vars in a namespace. I am using `(ns-interns 'my-namespace)` to get a map. Now, I want the source of every interned var here.</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:15:02.614900</ts>
    <user>Nigel</user>
    <text>The map that `ns-interns` returns has a symbol as the key and the value contains a var that the symbol is interned as</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:15:34.615600</ts>
    <user>Nigel</user>
    <text>`source` accepts a symbol. But the symbol that `ns-interns` returns is not namespace qualified</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:16:04.616000</ts>
    <user>Vernia</user>
    <text>Call `meta` on the var to get a map of its metadata</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:17:32.617500</ts>
    <user>Vernia</user>
    <text>Sorry, I misread – you already have the name to hand if you’re using `ns-interns`</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:17:39.617900</ts>
    <user>Nigel</user>
    <text>Yeah</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:17:43.618400</ts>
    <user>Nigel</user>
    <text>But it is not namespace qualified</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:17:52.618900</ts>
    <user>Nigel</user>
    <text>So I have to hand it myself I guess</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:18:50.619900</ts>
    <user>Vernia</user>
    <text>Yeah, I think just create it yourself (the `symbol` function has a two-argument arity for this)</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:18:56.620100</ts>
    <user>Nigel</user>
    <text>Effectively, I want something as follows: `(map the-source-of (ns-interns 'my-namespace))`</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:31:55.620200</ts>
    <user>Vernia</user>
    <text>Try the following:

```
(defn ns-sources
  "Returns a mapping from name to source for the namespace's interned vars."
  [ns]
  (-&amp;gt;&amp;gt; (keys (ns-interns ns))
       (into {} (keep (fn [n]
                        (when-let [s (clojure.repl/source-fn (symbol (str ns) (str n)))]
                          [n s]))))))
```</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T04:52:49.620500</ts>
    <user>Nigel</user>
    <text>Jeez! Thanks a ton &lt;@Vernia&gt;</text>
  </message>
  <message conversation_id="745">
    <ts>2019-03-09T06:43:41.622500</ts>
    <user>Sixta</user>
    <text>Has anyone played with pagination and the new Nav protocol? I'm trying to provide a simpler interface to navigate a HTTP api lazily.</text>
  </message>
  <message conversation_id="745">
    <ts>2019-03-09T07:01:57.623800</ts>
    <user>Isa</user>
    <text>deps.edn
`github-kwladyka/form-validator {:git/url "&lt;https://github.com/kwladyka/form-validator-cljs.git&gt;" :sha "5917f9c4fc3c0ea0f22d71bc6a9f1c1257a72319"}`

Do we have any way to use `:tag` instead of `:sha` for `deps.edn`? How do you solve versioning with git deps?</text>
  </message>
  <message conversation_id="745">
    <ts>2019-03-09T07:10:52.624200</ts>
    <user>Nigel</user>
    <text>Is `clojail` still being maintained? If not, is there an alternative?</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:21:06.624800</ts>
    <user>Clarine</user>
    <text>&lt;@Nigel&gt; I’m using it myself with a minor tweak (added a deps.edn file, forked from someone who upgraded to clojure 1.10)</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:21:41.625200</ts>
    <user>Nigel</user>
    <text>&lt;@Clarine&gt; - ok, because the github page hasn’t had a commit in a while.</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:21:56.625600</ts>
    <user>Clarine</user>
    <text>the author is no longer with us, he passed away in 2016</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:22:07.625900</ts>
    <user>Nigel</user>
    <text>Oh damn. I’m sorry to hear that.</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:22:36.626100</ts>
    <user>Clarine</user>
    <text>&lt;https://www.reddit.com/r/Clojure/comments/5gyyxw/clojure_open_source_contributor_anthony_grimes/&gt;</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:23:24.626900</ts>
    <user>Clarine</user>
    <text>here’s my fork of a fork. It still works well. I’ve been parsing examples from clojuredocs and executing them in a safe environment:
&lt;https://github.com/borkdude/clojail&gt;</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:30:14.627500</ts>
    <user>Sixta</user>
    <text>Clj has a -Sresolve-tags command</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:33:23.628000</ts>
    <user>Nigel</user>
    <text>That’s ridiculously crazy given that so much more has been added in clojure since then.</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:33:34.628200</ts>
    <user>Nigel</user>
    <text>Sad to hear this</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:35:03.628900</ts>
    <user>Clarine</user>
    <text>Yeah, since there’s been stuff added to Clojure, there might be some things that should be added to the “forbidden vars”, like requiring-resolve maybe.</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:35:47.629400</ts>
    <user>Clarine</user>
    <text>but since that calls resolve, it’s probably already fine</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:36:36.629500</ts>
    <user>Isa</user>
    <text>Oh, I didn’t notice it. How does it work? `github-kwladyka/form-validator {:git/url "&lt;https://github.com/kwladyka/form-validator-cljs.git&gt;" :tag "v1.0.0"}` and after `clj -Sresolve-tags` `:sha` will be added? I can’t find any explanation about it in google.</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:37:37.629700</ts>
    <user>Isa</user>
    <text>Anyway I would like too see something what work on the fly, not overwrite deps.edn. But better this, than nothing :slightly_smiling_face:</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:40:13.630200</ts>
    <user>Clarine</user>
    <text>but it does attest to Clojure’s and Java’s strength that it still works :slightly_smiling_face:</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:50:52.630300</ts>
    <user>Sixta</user>
    <text>it adds the :sha to anything that's missing it, yeah :slightly_smiling_face:</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:51:06.630500</ts>
    <user>Sixta</user>
    <text>I also wrote a version which preserves comments/formatting/whitespace: &lt;https://github.com/SevereOverfl0w/clj-resolve-tags/&gt;</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T07:57:21.630900</ts>
    <user>Isa</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T08:01:53.631700</ts>
    <user>Clarine</user>
    <text>Does someone remember what I refer to here? &lt;https://twitter.com/borkdude/status/1104366075561549824&gt;</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T08:23:35.632100</ts>
    <user>Clarine</user>
    <text>already found it in the podcast</text>
  </message>
  <message conversation_id="746">
    <ts>2019-03-09T09:25:15.632200</ts>
    <user>Sixta</user>
    <text>&lt;@Celestine&gt; I suppose this is similar to jdbc ResultSets? I'm now considering reducers, but I seem to recall you having an issue with them?</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T11:19:56.632700</ts>
    <user>Clarine</user>
    <text>&lt;@Nigel&gt; In case you want to see it, here’s the code I used clojail with:
&lt;https://github.com/borkdude/speculative/blob/master/test/speculative/clojuredocs.clj&gt;</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T11:37:54.633300</ts>
    <user>Nigel</user>
    <text>Thanks &lt;@Clarine&gt; - I’ll take a look</text>
  </message>
  <message conversation_id="746">
    <ts>2019-03-09T11:39:58.633600</ts>
    <user>Nigel</user>
    <text>This is so neat! So a basic blacklist</text>
  </message>
  <message conversation_id="744">
    <ts>2019-03-09T11:50:18.634400</ts>
    <user>Clarine</user>
    <text>yeah, that is also how 4clojure works where it forbids certain functions</text>
  </message>
  <message conversation_id="746">
    <ts>2019-03-09T12:06:40.634800</ts>
    <user>Nigel</user>
    <text>I am guessing I can also timeout potential infinite loops</text>
  </message>
  <message conversation_id="746">
    <ts>2019-03-09T12:06:48.635000</ts>
    <user>Nigel</user>
    <text>seems like I can. the api has a timeout</text>
  </message>
  <message conversation_id="746">
    <ts>2019-03-09T12:07:24.635400</ts>
    <user>Clarine</user>
    <text>yep, it has a timeout by default turned on as well</text>
  </message>
  <message conversation_id="746">
    <ts>2019-03-09T12:17:15.636500</ts>
    <user>Celestine</user>
    <text>Not sure what you're thinking of &lt;@Sixta&gt;? Reducible queries maybe? </text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T12:52:25.636800</ts>
    <user>Ruthann</user>
    <text>Hi. I have a noob question. I am using tools.dep with Datomic Ions. I want to be able to compile locally instead of having to push to see error messages. Anyone know how to do this?</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:02:04.639000</ts>
    <user>Celestine</user>
    <text>&lt;@Ruthann&gt; You'll need to create a `classes` directory and either add it to `:paths` or use an alias and add it it `:extra-paths` and then use a `:main-opts` to invoke the compiler for the namespace `-e "(compile 'your.namespace)"`</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:02:19.639300</ts>
    <user>Celestine</user>
    <text>(if I'm understanding your question correctly)</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:03:13.640500</ts>
    <user>Celestine</user>
    <text>But I think I'd really recommend adjusting your editing workflow to rely more on a REPL running in the context of your project and make sure you eval the code into the REPL regularly as you're working -- since that will also _compile_ the code locally (in the REPL).</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:04:50.641800</ts>
    <user>Celestine</user>
    <text>As a general rule of thumb, in my opinion, you should evaluate all the code you write into the REPL, as you're writing it. That way you don't even leave your editor and you have the fastest possible feedback loop.</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:11:27.643100</ts>
    <user>Ruthann</user>
    <text>Thanks &lt;@Celestine&gt;. I tried using a REPL for this as you suggested, but the Datomic Ions has dependencies in AWS that are not downloaded to my computer. This is causing difficulties for me.</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:15:30.644200</ts>
    <user>Celestine</user>
    <text>For _compiling_ code, you should only need the library deps specified locally -- it wouldn't need to _run_ the code (but I would run as much code as you can before pushing it up to AWS).</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:16:25.645200</ts>
    <user>Celestine</user>
    <text>You may find more specific assistance in the &lt;#C03RZMDSH|datomic&gt; channel around workflows for Ions (I haven't used them, but I have worked with code that depends on AWS services and libraries, from my local REPL).</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:28:21.645300</ts>
    <user>Sixta</user>
    <text>&lt;@Celestine&gt; I found a thread about you implementing IReduce or something?

And I seem to remember you planning to change something about that?</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:28:34.645500</ts>
    <user>Sixta</user>
    <text>For jdbc "2"</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:29:54.646300</ts>
    <user>Ruthann</user>
    <text>Thanks so much for your help &lt;@Celestine&gt;. I did not know there was a &lt;#C03RZMDSH|datomic&gt; channel.</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:33:02.646400</ts>
    <user>Celestine</user>
    <text>`clojure.java.jdbc` introduced `reducible-query` ages ago that implements `IReduce`.</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:33:40.646600</ts>
    <user>Celestine</user>
    <text>`next.jdbc` will only implement `IReduceInit` (which greatly simplifies things). Neither of those have anything to do with `datafy`/`nav` tho'...</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:35:29.646800</ts>
    <user>Celestine</user>
    <text>An example (from `next.jdbc`): ```  ;; raw java
  (defn select* [^Connection con]
    (let [ps (doto (.prepareStatement con "SELECT * FROM fruit WHERE appearance = ?")
               (.setObject 1 "red"))
          rs (.executeQuery ps)
          _ (.next rs)
          value (.getObject rs "name")]
      (.close ps)
      value))
  (quick-bench (select* con))

  ;; almost same as the Java example above
  (quick-bench
   (reduce (fn [rs m] (reduced (:name m)))
           nil
           (execute! con ["select * from fruit where appearance = ?" "red"])))
```</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:36:20.647000</ts>
    <user>Celestine</user>
    <text>(there's syntactic sugar wrapping available but that's the raw, under-the-hood call)</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:37:09.647200</ts>
    <user>Celestine</user>
    <text>And that currently looks a bit like this ```(defn- reduce-stmt
  ""
  [^PreparedStatement stmt f init]
  (if (.execute stmt)
    (let [rs     (.getResultSet stmt)
          rs-map (mapify-result-set rs)]
      (loop [init' init]
        (if (.next rs)
          (let [result (f init' rs-map)]
            (if (reduced? result)
              @result
              (recur result)))
          init')))
    (f init (.getUpdateCount stmt))))

(extend-protocol Executable
  Connection
  (-execute [this [sql &amp;amp; params] opts]
            (let [factory (pre-prepare* opts)]
              (reify clojure.lang.IReduceInit
                (reduce [_ f init]
                        (with-open [stmt (prepare-fn* this sql params factory)]
                          (reduce-stmt stmt f init))))))
...```</text>
  </message>
  <message conversation_id="747">
    <ts>2019-03-09T13:37:59.647400</ts>
    <user>Celestine</user>
    <text>(I'm still figuring out how best to handle statements that produce update counts instead of result sets)</text>
  </message>
  <message conversation_id="748">
    <ts>2019-03-09T14:18:45.647600</ts>
    <user>Sixta</user>
    <text>I must be misremembering. I thought someone had done some experimenting in another repo with performance maybe</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T17:56:41.648700</ts>
    <user>Malik</user>
    <text>what's the difference between `(Integer. "1")` and `(Integer/parseInt "1")`</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T17:58:03.648900</ts>
    <user>Clarine</user>
    <text>seems to be the same thing:
&lt;http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Integer.java#l867&gt;</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T17:58:14.649100</ts>
    <user>Malik</user>
    <text>ahhh ok</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T17:58:36.649300</ts>
    <user>Malik</user>
    <text>thanks</text>
  </message>
  <message conversation_id="750">
    <ts>2019-03-09T18:28:52.649700</ts>
    <user>Jasmine</user>
    <text>Use the latter</text>
  </message>
  <message conversation_id="750">
    <ts>2019-03-09T18:29:31.650600</ts>
    <user>Jasmine</user>
    <text>It will cache integer values around 0. The former always constructs a new object</text>
  </message>
  <message conversation_id="750">
    <ts>2019-03-09T18:29:56.650800</ts>
    <user>Malik</user>
    <text>ahhh ok</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:31:42.651500</ts>
    <user>Malik</user>
    <text>is there a way to do `(map Integer/parseInt coll)`? it barfs on using a java function like that</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:34:23.651800</ts>
    <user>Meagan</user>
    <text>you have to wrap it in a function</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:34:36.652200</ts>
    <user>Meagan</user>
    <text>`(map #(Integer/parseInt %) coll)`</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:35:07.652900</ts>
    <user>Malik</user>
    <text>ok</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:35:16.653300</ts>
    <user>Malik</user>
    <text>that's what I was doing but I figured there might be a trick</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:35:26.653400</ts>
    <user>Meagan</user>
    <text>or,
```
(defn parse-int [n]
  (Integer/parseInt n))

(map parse-int coll)
```</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:35:31.653600</ts>
    <user>Malik</user>
    <text>right</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:36:17.654400</ts>
    <user>Malik</user>
    <text>I'm doing ```(defn parse-int [string-to-parse]
  (Integer/parseInt string-to-parse))

(defn split-to-digits [num]
  (as-&amp;gt; num n
    (str n)              ;; convert to string
    (string/split n #"") ;; split to digits
    (map parse-int n))   ;; parse digits back into integers
)
```</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:36:52.654800</ts>
    <user>Malik</user>
    <text>which seems reasonable</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:37:23.655600</ts>
    <user>Malik</user>
    <text>I love threading macros so much</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:39:05.655900</ts>
    <user>Meagan</user>
    <text>yeah :smile: I miss it in every other language</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:39:31.656300</ts>
    <user>Malik</user>
    <text>elixir's pipe operator is good too but it only does first arg</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:39:51.656700</ts>
    <user>Malik</user>
    <text>but you can do anonymous functions to trick it out and pass the arg in another position</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:39:54.656900</ts>
    <user>Malik</user>
    <text>but it's just ugly</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:39:57.657100</ts>
    <user>Malik</user>
    <text>&lt;https://exercism.io/tracks/clojure/exercises/armstrong-numbers/solutions/c91ba2cff80645c6a28e671a73668e4e&gt;</text>
  </message>
  <message conversation_id="749">
    <ts>2019-03-09T19:40:23.657800</ts>
    <user>Meagan</user>
    <text>yeah. I remember being unsatisfied with the pipe operation both in Elixir and ReasonML</text>
  </message>
  <message conversation_id="751">
    <ts>2019-03-09T22:00:44.658000</ts>
    <user>Celestine</user>
    <text>`next.jdbc` is a lot about performance, building on the performance of `reducible-query` compared to `query`, and also by using protocols more heavily.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:34:00.658700</ts>
    <user>Elly</user>
    <text>Any cool open source DSLs?</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:34:04.659200</ts>
    <user>Elly</user>
    <text>Honestly I'm not sure what the difference between a DSL and a library of utility functions is.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:48:44.659800</ts>
    <user>Nigel</user>
    <text>&lt;@Elly&gt; DSL for?</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:49:10.660200</ts>
    <user>Elly</user>
    <text>&lt;@Nigel&gt; anything popular and/or considered good code.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:49:23.660600</ts>
    <user>Elly</user>
    <text>Just want to see what constitutes a DSL.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:50:49.660800</ts>
    <user>Nigel</user>
    <text>Instaparse</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:51:43.661200</ts>
    <user>Nigel</user>
    <text>at some level, isn’t Leiningen a DSL of sorts?</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:53:52.661700</ts>
    <user>Elly</user>
    <text>So what makes Instaparse a DSL vs a library?</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:53:57.661900</ts>
    <user>Nigel</user>
    <text>hiccup</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:54:46.662700</ts>
    <user>Nigel</user>
    <text>Because you can use most if not all functionality of both hiccup and instaparse without having to muck about too much with Clojure itself</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:54:58.662900</ts>
    <user>Nigel</user>
    <text>But the definition is sketchy</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:55:31.663700</ts>
    <user>Elfriede</user>
    <text>I think it's a library for implementing DSLs</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:55:49.663900</ts>
    <user>Elly</user>
    <text>hiccup looks much more DSLish</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:55:50.664100</ts>
    <user>Elly</user>
    <text>to me</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-09T22:57:40.664400</ts>
    <user>Nigel</user>
    <text>&lt;@Elly&gt; - agreed</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T05:31:51.668900</ts>
    <user>Elly</user>
    <text>If I'm writing a monolithic app in Clojure but I want to go with a container like Kubernetes or Docker to simplify deployment, which one should I choose? Is there one I haven't mentioned?</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T05:37:23.670000</ts>
    <user>Elly</user>
    <text>Nvm I'm retarded. I knew that Kubernetes had something to do with containers, thought it's a container.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T05:37:33.670300</ts>
    <user>Elly</user>
    <text>Turns out it's not really a competitor to Docker whoops.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T05:41:56.670700</ts>
    <user>Elly</user>
    <text>Oh shit I remember why I gave up on Docker before.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T05:42:06.671000</ts>
    <user>Elly</user>
    <text>Requires Windows 10 Pro or Enterprise.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T05:42:11.671300</ts>
    <user>Elly</user>
    <text>Now isn't that some bullshit.</text>
  </message>
  <message conversation_id="753">
    <ts>2019-03-10T06:48:07.671500</ts>
    <user>Epifania</user>
    <text>Pretty sure I run docker without either Windows 10 Pro or Enterprise :slightly_smiling_face: You can always give virtualization a try (running Ubuntu in VirtualBox)</text>
  </message>
  <message conversation_id="754">
    <ts>2019-03-10T07:38:19.673100</ts>
    <user>Scotty</user>
    <text>Could someone recommend a library for parsing binary data in Clojure? The format is not very complicated, but it has variable-length fields with a length specified in the packet body, and a moderate amount of branching.</text>
  </message>
  <message conversation_id="755">
    <ts>2019-03-10T09:30:09.673300</ts>
    <user>Ferne</user>
    <text>ztellman might have a library for that</text>
  </message>
  <message conversation_id="755">
    <ts>2019-03-10T11:08:17.675200</ts>
    <user>Guy</user>
    <text>I was looking at the guestbook application from Luminus, it was using nrepl.server, I am trying to understanding what is the need for nrepl.server? does it open a port in production which I can connect cider to?</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T12:32:43.677000</ts>
    <user>Clarine</user>
    <text>I have some weirdness when executing examples in a sandbox (clojails). In the REPL (works) vs running with tools/deps -main function from the command line (fails). In the REPL it works, but from the command line I get:
```
"executing" (send counter inc)
Exception in thread "clojure-agent-send-pool-0" "executing" (clojure.core/deref counter)
java.lang.IllegalMonitorStateException
	at java.util.concurrent.locks.ReentrantLock$Sync.tryRelease(ReentrantLock.java:151)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1261)
	at java.util.concurrent.locks.ReentrantLock.unlock(ReentrantLock.java:457)
	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:449)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
```
and
```
"executing" (send pulp-fiction assoc :act-two "VINCENT VEGA &amp;amp; MARSELLUS WALLACE'S WIFE")
Caused by: java.lang.RuntimeException: Agent is failed, needs restart
	at clojure.lang.Util.runtimeException(Util.java:225)
	at clojure.lang.Agent.dispatch(Agent.java:238)
	at clojure.core$send_via.invokeStatic(core.clj:2109)
	at clojure.core$send_via.doInvoke(core.clj:2101)
	at clojure.lang.RestFn.applyTo(RestFn.java:146)
	at clojure.core$apply.invokeStatic(core.clj:671)
	at clojure.core$send.invokeStatic(core.clj:2120)
	at clojure.core$send.doInvoke(core.clj:2111)
	at clojure.lang.RestFn.invoke(RestFn.java:464)
	at sandbox4362$eval4454.invokeStatic(NO_SOURCE_FILE:0)
	at sandbox4362$eval4454.invoke(NO_SOURCE_FILE)
```
It’s this example from clojuredocs:
&lt;https://clojuredocs.org/clojure.core/agent&gt;</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T12:38:21.677500</ts>
    <user>Clarine</user>
    <text>I think I’ll just exclude this example, but it’d be nice to know what’s causing this</text>
  </message>
  <message conversation_id="755">
    <ts>2019-03-10T13:53:51.679300</ts>
    <user>Jasmine</user>
    <text>Code looks ok to me</text>
  </message>
  <message conversation_id="755">
    <ts>2019-03-10T13:55:20.680100</ts>
    <user>Jasmine</user>
    <text>If you want to make a jira, go for it</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T17:12:49.682100</ts>
    <user>Clarine</user>
    <text>With leiningen + clojails I get the same thing. For now I find it too time consuming to find out why this particular example doesn’t work outside the REPL, so I’ll leave it for now.</text>
  </message>
  <message conversation_id="756">
    <ts>2019-03-10T17:32:11.683500</ts>
    <user>Tonya</user>
    <text>I'm trying to setup my website to use clojurescript and I want to have two directories src/clj and src/cljs for the different source files. I'm using Lein and am unsure how to specify this new directory structure. Anyone have solutions?</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T17:39:24.683800</ts>
    <user>Clarine</user>
    <text>&lt;@Tonya&gt; Here I’ve got a project like that: &lt;https://github.com/borkdude/lein2boot&gt;</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T17:50:07.684500</ts>
    <user>Tonya</user>
    <text>&lt;@Clarine&gt; Thank you that is perfect.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T18:09:29.686100</ts>
    <user>Tonya</user>
    <text>&lt;@Clarine&gt; what if I don't want to use figwheels static server function. I desire figwheel to automatically recompile my code as I use a ring handler to serve the static content.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T18:10:47.686400</ts>
    <user>Clarine</user>
    <text>I believe that’s what the project in the link does too</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T18:10:56.686600</ts>
    <user>Clarine</user>
    <text>I just ignore the figwheel server</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T18:11:01.686800</ts>
    <user>Tonya</user>
    <text>Where does it specify that?</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T18:13:26.687700</ts>
    <user>Tonya</user>
    <text>Oh so its running you just ignore it.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T18:13:32.688000</ts>
    <user>Clarine</user>
    <text>I think lein figwheel reads the cljsbuild config, at least that’s my vague memory about it. I’m pretty sure it worked back then, since it was a requirement that I wanted to replicate in boot</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T18:13:41.688200</ts>
    <user>Tonya</user>
    <text>Okay thank you.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T18:13:56.688500</ts>
    <user>Tonya</user>
    <text>&lt;@Clarine&gt; thank you for your time and help.</text>
  </message>
  <message conversation_id="752">
    <ts>2019-03-10T18:14:25.688900</ts>
    <user>Clarine</user>
    <text>yeah, maybe you can pass an option to not start a static file server but it wasn’t important to me</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T19:37:45.689600</ts>
    <user>Tonya</user>
    <text>Can I connect cider to clojurescript and clojure simultaneously?</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T19:38:27.690200</ts>
    <user>Meagan</user>
    <text>typically I have two REPLs open: one for the Clojure process, and one for the ClojureScript process</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T19:38:42.690500</ts>
    <user>Tonya</user>
    <text>Yes, then how do you connect to both?</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T19:39:26.691200</ts>
    <user>Meagan</user>
    <text>mm, I just `cider-jack-in` inside of a .clj file, and then `cider-jack-in-clojurescript` inside of a .cljs file</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T19:39:53.691800</ts>
    <user>Tonya</user>
    <text>Okay, makes sense.</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T19:39:57.692100</ts>
    <user>Tonya</user>
    <text>I use cider-connect</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T19:40:06.692500</ts>
    <user>Tonya</user>
    <text>instead of cider-jack-in but I'm sure it's easy</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T19:40:16.692700</ts>
    <user>Meagan</user>
    <text>if you already have e.g. a clojure REPL and a figwheel process running, you can connect to the Clojure REPL and then connect again to the figwheel REPL</text>
  </message>
  <message conversation_id="758">
    <ts>2019-03-10T21:31:09.693400</ts>
    <user>Tonya</user>
    <text>Is it possible to pass data from clojure -&amp;gt; reagent as in my fake example?</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T23:03:09.695600</ts>
    <user>Connie</user>
    <text>None</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T23:05:38.695700</ts>
    <user>Connie</user>
    <text>None</text>
  </message>
  <message conversation_id="759">
    <ts>2019-03-10T23:13:08.696900</ts>
    <user>Gemma</user>
    <text>Hi. How can I print to repl? Unfortunately putting println in functions the backend uses doesn't work</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T23:23:30.697000</ts>
    <user>Meagan</user>
    <text>yes. what I typically do is print the data to a string and put it inside of a `&amp;lt;script&amp;gt;` tag</text>
  </message>
  <message conversation_id="757">
    <ts>2019-03-10T23:24:12.697200</ts>
    <user>Meagan</user>
    <text>e.g. `__QUERY_PARAMS__ = ...stringified params...`</text>
  </message>
  <message conversation_id="759">
    <ts>2019-03-10T23:32:25.700100</ts>
    <user>Lana</user>
    <text>Is anyone familiar enough with pomegranate and dynapath to help me figure out how to integrate them into my project? I provide an environment where people can add code in the field, and I compile and run it. I wanted to be able to let them pull in their own dependencies, and pomegranate seemed like the answer, but it is blowing up saying it can’t find a suitable class loader to modify, even though in my startup code I tried setting my context class loader to a `clojure.lang.DynamicClassLoader`. Unfortunately, the readme for pomegranate just says “you will need to explicitly enable the java.net.URLClassLoader support in dynapath (upon which pomegranate relies for such things)” and does not say *how*. Nor can I find anything that seems helpful in the dynapath read-me.</text>
  </message>
  <message conversation_id="760">
    <ts>2019-03-11T01:32:46.701500</ts>
    <user>Marcie</user>
    <text>hi who used expo on cljsrn?</text>
  </message>
  <message conversation_id="760">
    <ts>2019-03-11T01:34:38.701700</ts>
    <user>Marcie</user>
    <text>lein new expo myapp +reagent  then  exec ‘(start-figwheel!)’ in repl   but it’s error ,it’s con’t found evn.dev/ip</text>
  </message>
  <message conversation_id="760">
    <ts>2019-03-11T01:37:11.701800</ts>
    <user>Marcie</user>
    <text>None</text>
  </message>
  <message conversation_id="760">
    <ts>2019-03-11T01:38:25.702100</ts>
    <user>Marcie</user>
    <text>None</text>
  </message>
  <message conversation_id="759">
    <ts>2019-03-11T05:35:46.704100</ts>
    <user>Clarine</user>
    <text>Using tools.cli I want to parse a repeat number of the same argument and collect into a vector:
```
(parse-opts ["-n" "1" "-n" "2"]
              [["-n" "--num NUMBER" "Run example number"
                :parse-fn #(Integer/parseInt %)
                :default []
                :update-fn conj]])
```
Why is `num` still the empty vector here?</text>
  </message>
  <message conversation_id="760">
    <ts>2019-03-11T05:41:47.704300</ts>
    <user>Clarine</user>
    <text>oh I see, I have to use `assoc-fn`</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:08:50.708000</ts>
    <user>Isa</user>
    <text>I am thinking today about databases and tools around Clojure. What is your stack of dream for FE+BE? Datomic is cool, but it is too expensive for me. So I am talking about free DB, tools. I like idea of EQL, but I didn’t use it. I like idea of using `:user/id` instead of `:id` in query and insert / update. I am trying to find tools in Clojure / ClojureScript which will let me use databases in this new way. It needs to be stable and popular, it is too critical to choose something on early stage. Do you have your thoughts in this topic?</text>
  </message>
  <message conversation_id="760">
    <ts>2019-03-11T06:09:50.708700</ts>
    <user>Isa</user>
    <text>I back to this topic from time to time and each time I don’t feel satisfied.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:10:33.709700</ts>
    <user>Chanelle</user>
    <text>there is free datomic version?</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:10:58.709800</ts>
    <user>Isa</user>
    <text>&lt;https://www.datomic.com/get-datomic.html&gt;</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:11:07.710000</ts>
    <user>Isa</user>
    <text>there is starter, but you have only 1 year update</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:11:22.710400</ts>
    <user>Isa</user>
    <text>there is also `datomic free` but it is limited AFAIK</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:11:30.710800</ts>
    <user>Isa</user>
    <text>Anyway it sounds like a trap :slightly_smiling_face:</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:11:30.711000</ts>
    <user>Clarine</user>
    <text>Stable and popular, but free for commercial use? There are other triplestores like &lt;https://jena.apache.org/documentation/tdb/&gt; or Neo4J ?</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:11:50.711200</ts>
    <user>Chanelle</user>
    <text>&lt;https://github.com/walkable-server/walkable&gt;</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:12:04.711700</ts>
    <user>Chanelle</user>
    <text>but feels a bit like orm to me…</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:12:08.711800</ts>
    <user>Isa</user>
    <text>neo4j probably wouldn’t be the best choice for warehouse, bookkeeping systems etc.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:12:39.712400</ts>
    <user>Clarine</user>
    <text>For such a system I would just go with Postgres if you want free and popular</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:12:49.712800</ts>
    <user>Chanelle</user>
    <text>also if I am not mistaken `jdbc.next` will add support for namespaces keywords</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:12:57.713100</ts>
    <user>Chanelle</user>
    <text>but better ask here &lt;#C1Q164V29|sql&gt;</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:13:16.713200</ts>
    <user>Clarine</user>
    <text>I don’t know how stable &lt;https://github.com/replikativ/datahike&gt; is nowadays, but they do offer support for it</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:13:51.713500</ts>
    <user>Isa</user>
    <text>What is walkable vs pathom? I am not sure I catch what job it really do</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:14:21.713700</ts>
    <user>Isa</user>
    <text>also in walkable doc I can red:
```
Currently Walkable only takes care of reading from the database, NOT

making mutations to it. I think it varies from applications to

applications. If you can think of any pattern of doing it, please

open an issue.
```

So it sounds like it is read only solution</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:14:44.713900</ts>
    <user>Chanelle</user>
    <text>you can insert with plain old sql</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:14:52.714100</ts>
    <user>Chanelle</user>
    <text>in datomic it is also separated</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:15:30.714500</ts>
    <user>Isa</user>
    <text>&amp;gt; in datomic it is also separated
Can you expand what you mean?</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:15:53.714800</ts>
    <user>Chanelle</user>
    <text>for read - datalog
for update - transaction</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:16:07.715000</ts>
    <user>Chanelle</user>
    <text>walkable tries to first read part</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:16:19.715200</ts>
    <user>Chanelle</user>
    <text>but you can still insert with plain old sql</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:16:35.715400</ts>
    <user>Chanelle</user>
    <text>Why you think datomic free wont work for you?</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:16:57.715700</ts>
    <user>Chanelle</user>
    <text>what limitations concern you?</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:16:59.715900</ts>
    <user>Isa</user>
    <text>So… pathom (FE-&amp;gt;BE) -&amp;gt; walkable (BE-&amp;gt;DB) -&amp;gt; PostgreSQL
Am I understand it?</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:17:10.716100</ts>
    <user>Chanelle</user>
    <text>yes, i think so</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:17:31.716300</ts>
    <user>Chanelle</user>
    <text>(didnt use it at all, just read)</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:17:44.716500</ts>
    <user>Isa</user>
    <text>&amp;gt; Why you think datomic free wont work for you?
I will have to start to pay sooner or later. I don’t want to care about licence.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:18:11.716700</ts>
    <user>Chanelle</user>
    <text>the free version is free forever (with updates supported)</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:18:18.716900</ts>
    <user>Chanelle</user>
    <text>it is just limited to only 2 peers</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:18:21.717100</ts>
    <user>Isa</user>
    <text>&lt;https://jena.apache.org/documentation/tdb/&gt; What is it? I am not very familiar with it.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:18:27.717300</ts>
    <user>Chanelle</user>
    <text>there is also datomic cloud</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:18:42.717500</ts>
    <user>Chanelle</user>
    <text>solo costs only 1 dollar per day</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:18:46.717700</ts>
    <user>Chanelle</user>
    <text>if i am not mistaken</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:19:41.717900</ts>
    <user>Isa</user>
    <text>Maybe I “over fear” of this Datomic licence things. I don’t know. I just make me fear of this choice.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:20:01.718100</ts>
    <user>Isa</user>
    <text>My purpose is to not make code more complex because of choice of DB</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:20:19.718300</ts>
    <user>Chanelle</user>
    <text>I fully understand you :slightly_smiling_face:

I did think about datomic (free) + datascript</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:20:28.718500</ts>
    <user>Isa</user>
    <text>So for example if I will choose to use Datomic in AWS, then I can’t use google cloud. I have to use other solution for developing</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:20:31.718700</ts>
    <user>Epifania</user>
    <text>you probably shouldn't chose a DB that is not open source. Not sure what the commitment from Datomic is when in the future the product gets deprecated/unsupported, but the move of data would be a hassle anyways</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:20:35.718900</ts>
    <user>Clarine</user>
    <text>RDF is a format to store facts. SPARQL is the query language that is often used with it.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:20:56.719100</ts>
    <user>Chanelle</user>
    <text>indeed</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:21:02.719300</ts>
    <user>Chanelle</user>
    <text>thats a vector lock</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:21:30.719600</ts>
    <user>Clarine</user>
    <text>TDB is an implementation that supports these standards</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:21:52.719800</ts>
    <user>Chanelle</user>
    <text>datomic peer can use other stores (like sql or cassandra)</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:22:01.720000</ts>
    <user>Chanelle</user>
    <text>so not that much vendor specific</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:22:23.720200</ts>
    <user>Chanelle</user>
    <text>datomic seems sexy
but sql works most of the time :wink:</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:22:28.720400</ts>
    <user>Clarine</user>
    <text>This might also help you understand it: &lt;https://github.com/arachne-framework/aristotle&gt;</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:23:12.721300</ts>
    <user>Isa</user>
    <text>Clojure tools don’t support it yet, right?</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:23:49.722100</ts>
    <user>Chanelle</user>
    <text>not aware of any sql with namespaced keywords…</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:23:59.722600</ts>
    <user>Chanelle</user>
    <text>also, it is still sql, not a datalog</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:24:06.723000</ts>
    <user>Sixta</user>
    <text>&lt;@Isa&gt; JUXTs (of which I'm an employee) may be what you are after, except it is very new. It will be announced at clojure north.

It has support for namespaced keywords though :)</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:24:16.723100</ts>
    <user>Chanelle</user>
    <text>You may go &lt;#C1Q164V29|sql&gt; and ask there</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:24:31.723600</ts>
    <user>Clarine</user>
    <text>&lt;@Sixta&gt; what is it, a triplestore?</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:24:37.723700</ts>
    <user>Chanelle</user>
    <text>Sean Cornfield is the author</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:25:48.724400</ts>
    <user>Chanelle</user>
    <text>keep us posted!</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:25:58.724600</ts>
    <user>Clarine</user>
    <text>I’ve never tried to build a business-y type app with &lt;https://github.com/arachne-framework/aristotle&gt;
It might be fun to try.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:27:04.724700</ts>
    <user>Isa</user>
    <text>What is the status of the project?

For example `yada` is super cool idea, but IMO it is not ready to use yet, because of to up to date documentation and few issues. But it will be cool product soon probably.

I would like to avoid something similar with DB tool.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:29:13.725000</ts>
    <user>Isa</user>
    <text>Is it for graph DB?</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:29:45.725200</ts>
    <user>Clarine</user>
    <text>it’s for Apacha Jena:
&lt;https://jena.apache.org/&gt;</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:29:56.725400</ts>
    <user>Isa</user>
    <text>exactly, I don’t know this tool :slightly_smiling_face:</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:30:05.725600</ts>
    <user>Isa</user>
    <text>not sure what it really is</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:30:31.725800</ts>
    <user>Clarine</user>
    <text>This is a nice tutorial by my colleague:
&lt;https://joelkuiper.eu/semantic-web&gt;</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:30:56.726100</ts>
    <user>Sixta</user>
    <text>Yada is something we use on all our projects, we consider it production ready. It's just hard to find time to document things :)</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:31:02.726300</ts>
    <user>Isa</user>
    <text>it looks like graph DB</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:31:35.726500</ts>
    <user>Sixta</user>
    <text>I'm not sure how much information is public, so I'm going to hold off answering.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:31:46.726700</ts>
    <user>Clarine</user>
    <text>We have been running yada in production for years now. It’s mature.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:31:58.726900</ts>
    <user>Clarine</user>
    <text>Fair :slightly_smiling_face:</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:32:10.727100</ts>
    <user>Isa</user>
    <text>Exactly. Without good documentation it is good for you, but not for me, because I don’t know to use the tool and frustrate to find out how :slightly_smiling_face:</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:33:00.727300</ts>
    <user>Clarine</user>
    <text>It’s more important to understand the yada model of execution than the documentation, there’s not much to it really</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:33:24.727500</ts>
    <user>Clarine</user>
    <text>But I found pedestal even harder in that respect because of missing docs. I believe we have had this conversation before :slightly_smiling_face:</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:33:52.727800</ts>
    <user>Isa</user>
    <text>I didn’t try pedestal. It doesn’t seem like tool for me.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:34:02.728000</ts>
    <user>Isa</user>
    <text>So I have no opinion about that :slightly_smiling_face:</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:34:07.728200</ts>
    <user>Isa</user>
    <text>Yes we had</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:34:26.728400</ts>
    <user>Clarine</user>
    <text>Maybe luminus is more for you then, it’s got nice docs</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:34:47.728600</ts>
    <user>Isa</user>
    <text>I wanted only to say if this new tool for DB haven’t good documentation I can’t consider it to use for my purpose. At least it is how I see it.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:35:02.728800</ts>
    <user>Clarine</user>
    <text>yeah</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:36:40.729000</ts>
    <user>Isa</user>
    <text>But I appreciate the idea and I hope your tools will grow up soon and things around will be cleared. I understand how hard it is to make open source and maintenance docs etc.</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:36:44.729200</ts>
    <user>Isa</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:37:34.729400</ts>
    <user>Isa</user>
    <text>you are doing very good job, just need more time</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:40:58.729600</ts>
    <user>Isa</user>
    <text>&lt;https://github.com/replikativ/datahike&gt; hmm do you know something more about it? It looks like beta
&amp;gt; We provide a small stable API for the JVM at the moment, but the on-disk schema is not fixed yet. We will provide a migration guide until we have reached a stable on-disk schema</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:42:18.729800</ts>
    <user>Clarine</user>
    <text>ask in &lt;#CB7GJAN0L|datahike&gt;</text>
  </message>
  <message conversation_id="761">
    <ts>2019-03-11T06:46:50.731800</ts>
    <user>Isa</user>
    <text>So the conclusion: nothing really changed. Still we can use &lt;https://github.com/clojure/java.jdbc&gt; and potentially pathom / walkable on top of SQL. But it is worth to consider if use pahtom. As far as I understand it in this way we close the system for only Clojure / ClojureScript vs GraphQL solution which let developers use other languages for API.</text>
  </message>
  <message conversation_id="762">
    <ts>2019-03-11T07:50:10.732700</ts>
    <user>Clarine</user>
    <text>if you want GraphQL you can use lacinia. it’s about trade offs I guess. GraphQL comes with its limits too.</text>
  </message>
  <message conversation_id="762">
    <ts>2019-03-11T07:53:11.732800</ts>
    <user>Ali</user>
    <text>Don't fall in to the false economics of trying to be provider independent, though.

An alternative economical analysis is to observe that the more abstracted you are, the less you can leverage the particulars of the platform of your choice. Possibly to the point where you are paying up front for what it would cost to do a migration later (if you should need it).

My advice would be to not worry too much about large scale problems until you've done the initial work, and proven your model.</text>
  </message>
  <message conversation_id="762">
    <ts>2019-03-11T07:59:13.733000</ts>
    <user>Ali</user>
    <text>The teaser says "Unveiling of JUXT's new bitemporal database"</text>
  </message>
  <message conversation_id="762">
    <ts>2019-03-11T07:59:36.733200</ts>
    <user>Ali</user>
    <text>Very exciting</text>
  </message>
  <message conversation_id="762">
    <ts>2019-03-11T08:10:06.733700</ts>
    <user>Isa</user>
    <text>&lt;@Ali&gt;

&amp;gt; An alternative economical analysis is to observe that the more abstracted you are, the less you can leverage the particulars of the platform of your choice. Possibly to the point where you are paying up front for what it would cost to do a migration later (if you should need it).

Do you mean better is to use JDBS directly instead of extra layers on SQL like Datomic? Not sure what you really mean in this sentence.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:16:01.734100</ts>
    <user>Sixta</user>
    <text>I'm looking forward to talking about it </text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:16:37.734300</ts>
    <user>Clarine</user>
    <text>Is it a commercial or free/OSS product?</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:17:55.734500</ts>
    <user>Isa</user>
    <text>&amp;gt; My advice would be to not worry too much about large scale problems until you’ve done the initial work, and proven your model.

I care more about make data and state management simpler. For example I want to use everywhere `:user/id` vs `:id` etc.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:26:18.735100</ts>
    <user>Ali</user>
    <text>At the extreme, it would be like choosing tools built for Google-scale problems when starting out with a hobby project, because one day you might have a company the size of Google.

If you feel like Datomic can get you off the ground quickly, then pick Datomic and don't worry too much about maybe, perhaps, potential, but current non-problems like the license until you have reason to do so. It's a bad tradeoff to worry about long-term scalability problems before you have a workable proof of concept for what you intend to do.

That being said, you should still pick a solution that fits the problem of course.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:30:04.735400</ts>
    <user>Isa</user>
    <text>&amp;gt; tools built for Google-scale problems
Which exactly?</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:30:33.735600</ts>
    <user>Chanelle</user>
    <text>i think details doesnt matter</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:30:50.735800</ts>
    <user>Chanelle</user>
    <text>the point was - overoptimization is not good</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:30:58.736000</ts>
    <user>Isa</user>
    <text>I need this info to understand what we are talking about :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:31:13.736200</ts>
    <user>Chanelle</user>
    <text>it was abstract point :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:31:15.736400</ts>
    <user>Isa</user>
    <text>like cloud postgresql or other kind of tools</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:31:23.736600</ts>
    <user>Chanelle</user>
    <text>&lt;https://blog.bradfieldcs.com/you-are-not-google-84912cf44afb&gt;</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:32:03.737000</ts>
    <user>Chanelle</user>
    <text>no-no, I think it was like you should not think about your map-reduce cluster with 1000 machines</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:32:08.737200</ts>
    <user>Chanelle</user>
    <text>just start with one instance</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:32:36.737500</ts>
    <user>Isa</user>
    <text>oh I think I interpreted this sentence exactly opposite. Now I see what he wanted to say.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:33:14.737700</ts>
    <user>Isa</user>
    <text>But I don’t care about infrastructure scaling, I care about simple code :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:33:29.737900</ts>
    <user>Isa</user>
    <text>And managing state</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:33:34.738100</ts>
    <user>Chanelle</user>
    <text>does it mater which db you will take? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:34:26.738300</ts>
    <user>Isa</user>
    <text>I think yes. For example I saw project which use NoSQL, but data were relational. It was so messy after years.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:35:36.738600</ts>
    <user>Chanelle</user>
    <text>do you think if they will pick relational - they would do it right? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:35:51.738800</ts>
    <user>Isa</user>
    <text>yes</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:35:55.739000</ts>
    <user>Chanelle</user>
    <text>kk )</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:36:09.739200</ts>
    <user>Isa</user>
    <text>DB wouldn’t let them to make this mistakes</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:36:17.739400</ts>
    <user>Chanelle</user>
    <text>hehe</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:36:26.739600</ts>
    <user>Chanelle</user>
    <text>with sql you can much a lot of mistakes</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:36:45.739800</ts>
    <user>Chanelle</user>
    <text>even not noticible :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:37:04.740000</ts>
    <user>Ali</user>
    <text>Do you _really_ think that what you write right now is going to be run years from now? Pick the best thing for now, then refactor it in a year when it has matured, and you know more about the constraints you need.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:37:08.740200</ts>
    <user>Chanelle</user>
    <text>i think it is not about the tool
it is how you use the tool :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:37:31.740400</ts>
    <user>Chanelle</user>
    <text>they say only third rewrite makes things kinda optimal</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:37:57.740600</ts>
    <user>Chanelle</user>
    <text>go for datomic :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:38:09.740800</ts>
    <user>Chanelle</user>
    <text>anyway,  need to work :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:38:23.741000</ts>
    <user>Ali</user>
    <text>Datomic is great because it's very flexible, you can adapt it as you go along. Postgres is also great as a default unless you know that you need something specialized, just because of the tons of support and documentation.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:38:43.741200</ts>
    <user>Ali</user>
    <text>Make it work -&amp;gt; Make it right -&amp;gt; Make it fast :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:40:25.741400</ts>
    <user>Isa</user>
    <text>Sure I agree. I need to make feel comfortable with whatever choice I will do :slightly_smiling_face: So this is why I am thinking about it today, because I am at this step where I should make a decision.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:42:38.741600</ts>
    <user>Ali</user>
    <text>I used Datomic Solo to make a proof of concept. I demoed the proof of concept and got resources to start an initial project.

98% of the code I wrote is unused from the PoC, and ElasticSearch is the main workhorse, because it is the solution to the kind of problem we're dealing with _right now_. We'll bring back Datomic to do some of the more clever things, but for all intents and purposes, almost nothing of I did is in production right now. But it achieved the goal it set out to achieve: prove a workable model. And Datomic + Clojure was hands down the correct choice to make a working PoC as fast as I did.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:47:02.741900</ts>
    <user>Ali</user>
    <text>And boy, let me tell you that ElasticSearch is expensive to run, compared to Datomic.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:47:15.742100</ts>
    <user>Ali</user>
    <text>It gobbles up resources like there's no tomorrow.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:48:07.742300</ts>
    <user>Ali</user>
    <text>Nevertheless, Datomic is not built for fulltext indexing and search, so here we are.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:48:21.742500</ts>
    <user>Isa</user>
    <text>Probably my issue is I don’t have too much Datomic experience to understand what I lose / get when using it. I understand only 5000$ :wink:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:49:01.742700</ts>
    <user>Ali</user>
    <text>Ah! Now we're getting to the core of the problem :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:49:16.742900</ts>
    <user>Isa</user>
    <text>:wink:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:51:54.743100</ts>
    <user>Isa</user>
    <text>I have plan to build tools around  bookkeeping, warehouse, label printing etc. as SaaS. E-commerce things.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T08:52:07.743300</ts>
    <user>Isa</user>
    <text>So PostgreSQL sounds reasonable</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:02:26.743600</ts>
    <user>Ali</user>
    <text>Datomic can behave like a relational, or graph-like database. If you're modelling something that's sparse—that is, lot's of relatively small pieces of data, not necessarily of the same shape, with tons of relations between them in all directions—a graphlike database is nice.

If you know for a fact that you're storing something that could almost be a spreadsheet, where you stack lot's of data together side by side, and nearly always fill out all the columns, then a document store or relational store might be suitable.

For example, I know that one of the major postal services in Europe has modelled their package delivery system in a graph database, because a package delivery is traversal of nodes through out a huge system of interconnected nodes (delivery centers). Using this, rather than a relational database, made it easy for them to keep track of where a package was, where it is going, and customers can even cancel a package mid-delivery, and it will be routed back to the origin, based on a calculation of where trucks are and how much space they have available, etc. etc. etc.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:05:02.743800</ts>
    <user>Ali</user>
    <text>Your stuff sounds spontaneously more spreadsheet-like, which you could model in Datomic or Postgres.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:06:00.744000</ts>
    <user>Ali</user>
    <text>But eventually, most systems that solve a complex enough problem will be using different stores for different purposes. We're currently using ElasticSearch, a small piece of Datomic, DynamoDB and S3 (and Postgres, for midpoint-storage related to some ingestion of data).</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:16:28.744400</ts>
    <user>Isa</user>
    <text>Thanks for input :+1:</text>
  </message>
  <message conversation_id="764">
    <ts>2019-03-11T09:16:37.744700</ts>
    <user>Tonya</user>
    <text>&lt;@Meagan&gt; thanks.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:22:57.745000</ts>
    <user>Isa</user>
    <text>I am curious how system for warehouse, bookkeeping, orders etc. will look in graphql. Because one of the main issue is to keep sync order -&amp;gt; bookkeeping / warehouse and all documents around and check if they are ok with law in country and don’t break other rules.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:24:03.745200</ts>
    <user>Bambi</user>
    <text>It is OSS</text>
  </message>
  <message conversation_id="764">
    <ts>2019-03-11T09:24:13.745400</ts>
    <user>Clarine</user>
    <text>:heart:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:24:15.745600</ts>
    <user>Isa</user>
    <text>When add products to it, which have to be in sync with all orders / warehouse / bookkeeping there are a lot of relations</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:24:41.745800</ts>
    <user>Isa</user>
    <text>This history about delivery packages sounds inspiring :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:26:30.746200</ts>
    <user>Isa</user>
    <text>But on the end I want to keep this system independent but cooperate by integrations.</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:28:02.746400</ts>
    <user>Isa</user>
    <text>Well, at that moment just sharing my thoughts :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:34:40.746800</ts>
    <user>Yen</user>
    <text>I recently made a intro to protocols blog post (&lt;https://alcamech.com/an-introduction-to-clojure-protocols/&gt;) , would love some feedback !</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:44:14.747100</ts>
    <user>Sixta</user>
    <text>&lt;https://juxt.pro/technology.html&gt; public info here :slightly_smiling_face:</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:46:20.747900</ts>
    <user>Min</user>
    <text>&lt;@Yen&gt; s/methods/functions. They sometime compile down to methods but not always</text>
  </message>
  <message conversation_id="763">
    <ts>2019-03-11T09:46:54.748500</ts>
    <user>Min</user>
    <text>in the clojure sense they are just functions</text>
  </message>
  <message conversation_id="765">
    <ts>2019-03-11T10:07:16.748600</ts>
    <user>Ali</user>
    <text>More excite</text>
  </message>
  <message conversation_id="765">
    <ts>2019-03-11T10:09:23.748800</ts>
    <user>Ali</user>
    <text>Is the call for testers still relevant?</text>
  </message>
  <message conversation_id="766">
    <ts>2019-03-11T10:39:26.749700</ts>
    <user>Clarine</user>
    <text>methods is the term that’s often used though, for example here:
&lt;https://clojure.org/reference/protocols&gt;</text>
  </message>
  <message conversation_id="765">
    <ts>2019-03-11T10:42:17.749800</ts>
    <user>Hung</user>
    <text>&lt;@Ali&gt; yep :slightly_smiling_face: will PM you</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:52:09.751300</ts>
    <user>Danna</user>
    <text>what's the easiest way to remove Chunking from a sequence?
I can write something like
```
(defn unchunk
  "convert a Chunked Seq into something else"
  [[head &amp;amp; tail]]
  (if (nil? tail)
    (list head)
    (cons head (lazy-seq (unchunk tail)))))
```
but seems a bit of a palaver.
Is there a more concise way?</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:53:01.752200</ts>
    <user>Clarine</user>
    <text>&lt;@Danna&gt; Usually when you need this, it’s a bad sign</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:53:10.752700</ts>
    <user>Jasmine</user>
    <text>agree</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:53:13.752800</ts>
    <user>Danna</user>
    <text>yeah you are prolly right</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:53:15.753000</ts>
    <user>Danna</user>
    <text>ok</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:53:42.753400</ts>
    <user>Jasmine</user>
    <text>back up to the prior step and use loop/recur or transducers instead</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:54:49.753700</ts>
    <user>Clarine</user>
    <text>when Alex told me the same, I went with transducers :stuck_out_tongue:</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:55:16.754100</ts>
    <user>Danna</user>
    <text>so I'm leaning towards something like
```
(defn first-filtered
  "similiar to (comp first filter) but without chunking"
  [pred coll]
  (reduce (fn [_ v] (when (pred v) (reduced v)))
          nil
          coll))
```</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:55:48.754500</ts>
    <user>Clarine</user>
    <text>(first filter) is also an anti-pattern, mostly :wink:</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:56:19.755100</ts>
    <user>Danna</user>
    <text>you think so? `(some` leaves a semantic hole in my life</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:56:35.755700</ts>
    <user>Danna</user>
    <text>because I don't always want the _result_</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:56:48.756000</ts>
    <user>Clarine</user>
    <text>well, this was discussed a while ago. you should organize your data such that you don’t need to walk over it like this at all, if possible</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:57:20.756300</ts>
    <user>Clarine</user>
    <text>there are cases where it’s appropriate</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T10:57:35.756700</ts>
    <user>Danna</user>
    <text>haha there always are</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T11:00:44.757800</ts>
    <user>Lemuel</user>
    <text>&lt;@Danna&gt; medley has find-first</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T11:02:10.758300</ts>
    <user>Danna</user>
    <text>Ah yes! of course it does
good old James</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T11:03:45.759600</ts>
    <user>Lemuel</user>
    <text>And it's exactly what you wrote, but usable as a transducer, too.  I didn't know about the transducer case, and I've wanted that!</text>
  </message>
  <message conversation_id="767">
    <ts>2019-03-11T11:06:17.760200</ts>
    <user>Danna</user>
    <text>haha. the side effect I'm trying to avoid is just a log statement</text>
  </message>
  <message conversation_id="768">
    <ts>2019-03-11T11:13:39.760300</ts>
    <user>Roselle</user>
    <text>And here's our daily "Thank you!",  &lt;@Angila&gt;</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:03:11.760600</ts>
    <user>Nannette</user>
    <text>If I need to extend a Java base class to use a specific Java library that requires that and I don't want to use genclass &amp;amp; AOT, what options do I have?</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:04:36.760800</ts>
    <user>Roslyn</user>
    <text>`proxy`?</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:05:00.761100</ts>
    <user>Roslyn</user>
    <text>or `reify` if that's an interface</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:09:41.762300</ts>
    <user>Nannette</user>
    <text>I need to extend an abstract base class. I was reading about proxy myself. I think I need to read about proxy a bit and try it.</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:19:10.762400</ts>
    <user>Stephen</user>
    <text>It's a common misconception that GraphQL has anything to do with Graph Databases. It's almost like Java and Javascript. The one is a query language, the other a database, it might be a little easier to use GraphQL with a graph database, but you can also perfectly use GraphQL with a relational database.</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:20:19.763200</ts>
    <user>Clarine</user>
    <text>I wasn’t the one bringing GraphQL to this conversation.</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:20:42.763600</ts>
    <user>Clarine</user>
    <text>but you’re right</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:26:27.765200</ts>
    <user>Nannette</user>
    <text>I was reading Programming Clojure, 3rd ed, page 172 by &lt;@Jasmine&gt; , &lt;@Berta&gt; and Aaron Bedra. If I understood the example I can create a defprotocol and then extend some Java class with the defprotocol?</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:28:42.765600</ts>
    <user>Harris</user>
    <text>there's nothing other than `gen-class` for extending abstract classes ATM</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:41:26.766500</ts>
    <user>Nannette</user>
    <text>Sorry, my mistake. It's not an abstract class, it is an ordinary Java class that I need to extend somehow in Clojure (just checked the library source code).</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:43:05.766800</ts>
    <user>Harris</user>
    <text>doesn't matter, you just can't extend classes at all other than with `gen-class`</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:44:55.767400</ts>
    <user>Evonne</user>
    <text>&lt;@Nannette&gt; &lt;@Harris&gt; it occurs to me that you may be using “extend” in different senses?</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:45:28.767700</ts>
    <user>Harris</user>
    <text>I'm talking about `class A extends B` :)</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:47:11.768500</ts>
    <user>Kirsten</user>
    <text>its true that is less hassle to extend the class from java and then call it from clojure?</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:48:55.770100</ts>
    <user>Evonne</user>
    <text>I’m guessing &lt;@Nannette&gt; was thinking in terms of ```
(extend SomeJavaClass 
  SomeProtocol
  {:foo some-custom-fn
     ...})```</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:50:04.771000</ts>
    <user>Evonne</user>
    <text>But perhaps not — an in any case it’s important to understand what Java `extends` gives you that protocol `extend` does not.</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:50:47.771400</ts>
    <user>Harris</user>
    <text>for interop clojure's `extend` is useless</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T12:51:08.771900</ts>
    <user>Harris</user>
    <text>protocols are a concept that exists just in clojure, java doesn't know about them</text>
  </message>
  <message conversation_id="769">
    <ts>2019-03-11T13:03:39.774900</ts>
    <user>Nannette</user>
    <text>Ok. Thanks for clarifying that for me. What I need is to somehow extend a Java base class to use a specific Java library in Clojure and I thought that there could be other ways to do it in Clojure than genclass which requires AOT.</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:04:38.775400</ts>
    <user>Dann</user>
    <text>there's also proxy, which can extend a java class to new interfaces</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:05:20.775800</ts>
    <user>Dann</user>
    <text>(or just extend a class by overriding some/all methods) - see also proxy-super</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:18:15.778200</ts>
    <user>Nannette</user>
    <text>If genclass is the only option I have what's the best practice in a use case like I have (I need to extend a Java base class provided by a Java library to use that library in Clojure). Should I create the extended Java classes using Java instead and put the class files in the Clojure class path or something like that? That way I would avoid AOT.</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:19:15.779000</ts>
    <user>Dann</user>
    <text>you don't need aot for proxy, the only problem with proxy is you get an auto-generated name</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:20:08.779900</ts>
    <user>Dann</user>
    <text>extending a base class in java makes a new subclass, it doesn't alter the parent</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:23:20.782700</ts>
    <user>Nannette</user>
    <text>Ok. I'm a bit confused. One Clojure expert says that genclass is the only option in my use case, and another Clojure expert says that I can use proxy as well. Well, I think I follow this roadmap: 1. I try proxy first. If it works I'm good. If not, then 2. I implement the extended classes in Java, put the Java classes somehow available for my Clojure app and use Java interop in Clojure to use those Java classes with the Java library.</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:24:11.783600</ts>
    <user>Dann</user>
    <text>~is there some gotcha for abstract classes and proxy that I should know about?~ n/m it was clarified that this isn't about abstract classes anyway</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:24:46.784300</ts>
    <user>Harris</user>
    <text>&lt;@Nannette&gt;, you can use `proxy` to create an instance of an (abstract or not) class, you just can't create a named class, that's what I meant, I wasn't very clear</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:24:58.784800</ts>
    <user>Dann</user>
    <text>ahh, so we agree</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:28:11.787000</ts>
    <user>Nannette</user>
    <text>Ok. So, I can try to use proxy to create an "extended class" for that Java base class and then to use that proxy to interop with that Java library within Clojure. Good, I'll give it a try. Thanks everyone! I'll tell you later if I managed to use proxy like this.</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:29:14.787700</ts>
    <user>Dann</user>
    <text>the class is only implicitly created, proxy gives you an instance of that class, but yeah, this should work with most libs that require a class be extended</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T13:29:34.788200</ts>
    <user>Dann</user>
    <text>where it doesn't work is if it needs the string name of a class that extends its base class (eg. quartz)</text>
  </message>
  <message conversation_id="771">
    <ts>2019-03-11T13:56:41.790500</ts>
    <user>Nannette</user>
    <text>I didn't do that well :slightly_smiling_face: : java.lang.ClassCastException: class simpleserver.util.azuregenclass.productgroup.proxy$com.microsoft.azure.storage.table.TableServiceEntity$ff19274a cannot be cast to class java.lang.Class...   I.e. I managed to create the proxy but when I tried to use the proxy with the Java library it blew.
Maybe I'm trying my second option: create the extended classes using Java and use the java classes in Clojure to interact with the Java library. I found a document which suggests how to mix Java with a Clojure project using Leiningen: &lt;https://github.com/technomancy/leiningen/blob/master/doc/MIXED_PROJECTS.md&gt;</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:01:22.791100</ts>
    <user>Dann</user>
    <text>as mentioned above, proxy gives you an instance, not a class</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:08:19.795100</ts>
    <user>Nannette</user>
    <text>Yep. Now I understand. So, basically, my options are: genclass (with AOT - already tried this - works but causes issues with my repl workflow) or extend the classes with Java and use those Java classes in Clojure to interact with the Java library.
I try the second way as instructed in that Leiningen document.
Anyway, I'm really grateful for you helping me. Thanks!</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:10:07.795700</ts>
    <user>Dann</user>
    <text>you can get the class of a proxy object ```(cmd)user=&amp;gt; (def c (proxy [clojure.lang.IFn] [] (invoke [] "hi")))
#'user/c
(cmd)user=&amp;gt; (.newInstance (class c))
#object[user.proxy$java.lang.Object$IFn$e81cd1ee 0x5b40ceb "user.proxy$java.lang.Object$IFn$e81cd1ee@5b40ceb"]```</text>
  </message>
  <message conversation_id="772">
    <ts>2019-03-11T14:21:00.796000</ts>
    <user>Miles</user>
    <text>Is it possible to `binding` a `with-local-var`?</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:21:34.796300</ts>
    <user>Dann</user>
    <text>the setDynamic method should work on the var</text>
  </message>
  <message conversation_id="772">
    <ts>2019-03-11T14:22:53.796900</ts>
    <user>Miles</user>
    <text>I’m having trouble getting the macros to compose. Maybe I just need to push-thread-bindings explicitly?</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:23:01.797100</ts>
    <user>Dann</user>
    <text>oh but binding wants symbols...</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:24:05.797300</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (with-local-vars [^:dynamic a 0] (push-thread-bindings {a 1}) @a)
1```</text>
  </message>
  <message conversation_id="772">
    <ts>2019-03-11T14:24:34.797500</ts>
    <user>Miles</user>
    <text>thanks</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:25:31.798100</ts>
    <user>Dann</user>
    <text>what's missing here is the finally clause that cleans up the push with (pop-thread-bindings)</text>
  </message>
  <message conversation_id="772">
    <ts>2019-03-11T14:25:57.798300</ts>
    <user>Miles</user>
    <text>right</text>
  </message>
  <message conversation_id="772">
    <ts>2019-03-11T14:38:12.798400</ts>
    <user>Nannette</user>
    <text>noisesmith: you are the man. :slightly_smiling_face:  It worked:

(def productgroup-proxy
  (class (proxy [com.microsoft.azure.storage.table.TableServiceEntity]
                               [])))
... and using it:
          table-query (TableQuery/from simpleserver.util.azuregenclass.productgroup/productgroup-proxy)
=&amp;gt; Worked.
Let's see if I can create another proxy class, but this time I need to add some extra getters/setters.</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:39:19.798600</ts>
    <user>Dann</user>
    <text>cool</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:39:58.798800</ts>
    <user>Nannette</user>
    <text>Thanks, I really appreciate how you helped me.</text>
  </message>
  <message conversation_id="773">
    <ts>2019-03-11T14:57:01.799700</ts>
    <user>Ali</user>
    <text>I never actually tried this before, but you're not allowed to do,

```(defn hello [x &amp;amp; y z] (println x y z))```

As it turns out</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:58:08.800600</ts>
    <user>Ali</user>
    <text>I went back over the special forms and noticed that the specification says that one parameter can be variadic, but it doesn't specify that it must be the last one: &lt;https://clojure.org/reference/special_forms#fn&gt;</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:59:15.801300</ts>
    <user>Ali</user>
    <text>It would have been an interesting way to capture first and last, I guess, with any number of arguments between.</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T14:59:41.801700</ts>
    <user>Ali</user>
    <text>Not that `(last z)` is particularly hard.</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T15:03:50.802100</ts>
    <user>Celestine</user>
    <text>`(defn hello [x &amp;amp; [y z]] (println x y z))`</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T15:06:07.802700</ts>
    <user>Dann</user>
    <text>I think in the version &lt;@Ali&gt; imagined, y would suck up a variable number of items, and z would always be the last one</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T15:06:58.803200</ts>
    <user>Ali</user>
    <text>Yeah, exactly.</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T15:08:26.804400</ts>
    <user>Dann</user>
    <text>destructuring is implemented by the function `clojure.core/destructure`, and nothing stops you from implementing `fn+` that uses a modified destructure function</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T15:08:37.805000</ts>
    <user>Dann</user>
    <text>but destructure is a very tough nut of code</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T15:09:01.805100</ts>
    <user>Becki</user>
    <text>Transduce could benefit from this. I think it has to modify it's docstring </text>
  </message>
  <message conversation_id="774">
    <ts>2019-03-11T15:28:29.805500</ts>
    <user>Julienne</user>
    <text>Is there a way to catch an error in a macro, and return the error I want rather than the error from the body?

Example:
```(defmacro describes [msg &amp;amp; body]
  `(try (do (println :start ~msg)
          (let [ret# (do ~@body)]
            (println :end ~msg)
            ret#))
     (catch Exception e# 
       (throw (Exception. (str "The Error I want"))))))```</text>
  </message>
  <message conversation_id="770">
    <ts>2019-03-11T15:29:01.806000</ts>
    <user>Julienne</user>
    <text>_Wasn't sure if this was beginner or not so put it in both, will remove once I get an answer on one ^^^_</text>
  </message>
  <message conversation_id="774">
    <ts>2019-03-11T18:07:22.807900</ts>
    <user>Alison</user>
    <text>I’m unexpectedly having to deal with Java 9 modules, and I feel like my grandma trying to use a mobile phone.</text>
  </message>
  <message conversation_id="775">
    <ts>2019-03-11T18:49:23.808600</ts>
    <user>Jasmine</user>
    <text>ain't no fun</text>
  </message>
  <message conversation_id="775">
    <ts>2019-03-11T18:51:55.808700</ts>
    <user>Lana</user>
    <text>Did I just post this at a bad time, late Sunday night, or is this simply not a good place to ask?</text>
  </message>
  <message conversation_id="776">
    <ts>2019-03-11T19:00:49.809600</ts>
    <user>Marlyn</user>
    <text>&lt;@Alison&gt; curious about your experiences with modules</text>
  </message>
  <message conversation_id="776">
    <ts>2019-03-11T19:08:16.809700</ts>
    <user>Meagan</user>
    <text>I think that pomegranate is not a very widely use lib, so it might be hard to find someone else who has run into this same issue</text>
  </message>
  <message conversation_id="776">
    <ts>2019-03-11T19:11:41.811500</ts>
    <user>Alison</user>
    <text>&lt;@Marlyn&gt; Mostly I am hoping to ignore them, since Cursive will need to support Java 8 and Java 11 for the moment. I was trying to figure out how to get Gradle to co-operate but my problem is looking like a bug in the Gradle plugin I’m using: &lt;https://github.com/JetBrains/gradle-intellij-plugin/issues/374&gt;</text>
  </message>
  <message conversation_id="776">
    <ts>2019-03-11T19:12:10.812300</ts>
    <user>Alison</user>
    <text>So with a bit of luck I can just continue in blissful ignorance for now. I previously worked with OSGi, and I have no desire to go back there.</text>
  </message>
  <message conversation_id="775">
    <ts>2019-03-11T19:59:47.813200</ts>
    <user>Lana</user>
    <text>That’s probably true, if I don’t see anything for a while I guess I will open an issue against the read-me asking for an example.</text>
  </message>
  <message conversation_id="777">
    <ts>2019-03-12T04:22:44.814900</ts>
    <user>Tanesha</user>
    <text>hey clojurians: quick: What's the best acronym for NON-REPL development?

CECR - Compile Execute Crash Repeat?
Any fun acronyms you guys are using?</text>
  </message>
  <message conversation_id="778">
    <ts>2019-03-12T05:03:03.815300</ts>
    <user>Clarine</user>
    <text>if you have a decent compiler, your program never crashes, it all just works the first time around :stuck_out_tongue:</text>
  </message>
  <message conversation_id="779">
    <ts>2019-03-12T05:19:01.816300</ts>
    <user>Roslyn</user>
    <text>I wonder when we will see a decent compiler...</text>
  </message>
  <message conversation_id="777">
    <ts>2019-03-12T05:38:13.816700</ts>
    <user>Samual</user>
    <text>&lt;@Tanesha&gt; "FOD" file-oriented development</text>
  </message>
  <message conversation_id="777">
    <ts>2019-03-12T05:42:00.817100</ts>
    <user>Samual</user>
    <text>Mitigated by having a 'main' in each file.  That's multi-main file oriented development, MMFOD</text>
  </message>
  <message conversation_id="777">
    <ts>2019-03-12T06:48:14.818300</ts>
    <user>Kerstin</user>
    <text>Trying to connect to a nrepl server with `lein repl :connect`. But facing an error
```
Connecting to nREPL at 127.0.0.1:50724
       java.lang.ClassNotFoundException: nrepl.core
clojure.lang.Compiler$CompilerException: java.lang.ClassNotFoundException: nrepl.core, compiling:(null:1:82)

Error loading namespace; falling back to user
#object[clojure.lang.Namespace 0x6bee017d "user"]nil
```</text>
  </message>
  <message conversation_id="779">
    <ts>2019-03-12T07:04:23.818400</ts>
    <user>Cherise</user>
    <text>Also see &lt;https://github.com/weavejester/medley/blob/master/src/medley/core.cljc#L174&gt;</text>
  </message>
  <message conversation_id="777">
    <ts>2019-03-12T11:50:18.820300</ts>
    <user>Nigel</user>
    <text>My favourite is FDD. Faith driven development. Hit enter with one hand, cross fingers in the other, and let entropy determine your ourse</text>
  </message>
  <message conversation_id="780">
    <ts>2019-03-12T11:50:20.820500</ts>
    <user>Nigel</user>
    <text>*course</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T12:37:30.821300</ts>
    <user>Latrice</user>
    <text>I’m stealing FDD forever, sorry, it’s too good.</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T12:40:26.822400</ts>
    <user>Melina</user>
    <text>GDD, Guardrail Driven Development, an alias for TDD. (From Simple Made Easy of course)</text>
  </message>
  <message conversation_id="782">
    <ts>2019-03-12T12:51:22.823000</ts>
    <user>Loria</user>
    <text>Just curious, does anyone know why `lazy-seq` takes a variable number of "body" arguments?</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T12:52:18.823800</ts>
    <user>Loria</user>
    <text>for accommodating side effects? It only seems to return the last argument</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T12:58:56.824200</ts>
    <user>Clarine</user>
    <text>that’s funny yes:
```
cljs.user=&amp;gt; (def x (lazy-seq (println "dude") [1 2 3]))
#'cljs.user/x
cljs.user=&amp;gt; x
dude
(1 2 3)
```</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T12:59:42.824700</ts>
    <user>Fredda</user>
    <text>I like it</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:00:39.825200</ts>
    <user>Loria</user>
    <text>yeah, all the examples I found only use it as single arity</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:01:41.825700</ts>
    <user>Clarine</user>
    <text>well observed. you can add an example to clojuredocs if you want :wink:</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:02:49.826100</ts>
    <user>Loria</user>
    <text>and isn't the above equivalent to
```
(def x (lazy-seq (do (println "dude") [1 2 3])))
```</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:03:23.826800</ts>
    <user>Clarine</user>
    <text>yes, it is. basically lazy-seq takes the same as fn, which is always implicitly wrapped in a do</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:03:45.827300</ts>
    <user>Harris</user>
    <text>yeah, but so is `(fn [] (println "foo") 1)` equivalent to `(fn [] (do (println "foo") 1))`, clojure implicitly wraps `do` in places where it's convenient</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:05:13.828700</ts>
    <user>Loria</user>
    <text>hmm, that just seemed to me like a strange design decision for `lazy-seq`, for example the `for` macro doesn't have a implicit `do` block</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:05:59.829600</ts>
    <user>Loria</user>
    <text>seems highly non-idiomatic to have side-effects inside lazy sequences</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:06:01.829700</ts>
    <user>Harris</user>
    <text>agreed :)</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:11:49.830700</ts>
    <user>Dann</user>
    <text>does lazy-seq have a guarantee that the side effects in the implicit do won't run twice?</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:13:07.831500</ts>
    <user>Marlyn</user>
    <text>Yes</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:13:12.831600</ts>
    <user>Clarine</user>
    <text>it guarantees that the next time the seq will be called, the cached result is returned, so I’d say yes</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:13:24.831900</ts>
    <user>Dann</user>
    <text>I was thinking of race-type conditions</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:13:39.832300</ts>
    <user>Dann</user>
    <text>eg. memoized functions can be called twice for the same arg in some situations</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:14:00.832500</ts>
    <user>Clarine</user>
    <text>oh right</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:14:38.832700</ts>
    <user>Harris</user>
    <text>lazy-seq has a synchronization barrier</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:14:54.833000</ts>
    <user>Clarine</user>
    <text>yeah, just found it: &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/LazySeq.java#L39&gt;</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:15:28.834200</ts>
    <user>Becki</user>
    <text>i assume it can still be chunked though?</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:15:48.834400</ts>
    <user>Harris</user>
    <text>not lazy-seq</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:16:05.835000</ts>
    <user>Harris</user>
    <text>you can build chunked seqs over a lazy-seq</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:16:13.835300</ts>
    <user>Harris</user>
    <text>but lazy seqs aren't chunked per se</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:16:45.835900</ts>
    <user>Becki</user>
    <text>so if you `(take n ..` you can guarantee that n and only n side effects would be triggered?</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:17:27.836500</ts>
    <user>Harris</user>
    <text>if `..` is a lazy seq that yield _only_ lazy seqs in its tail, yes</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:18:29.837100</ts>
    <user>Clarine</user>
    <text>n depends on how many args you used to create the lazy seq with of course</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:18:34.837400</ts>
    <user>Harris</user>
    <text>but you have no guarantee that'll happen</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:18:35.837600</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; (first (lazy-seq (map println (range 3))))
0
1
2
nil```</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:20:45.838700</ts>
    <user>Harris</user>
    <text>as opposed to e.g. ```user=&amp;gt; (defn f [n] (lazy-seq (if (= 0 n) () (cons 1 (f (dec n))))))
#'user/f
user=&amp;gt; (first (lazy-seq (map println (f 3))))
1
nil```</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:20:59.839000</ts>
    <user>Harris</user>
    <text>where each "tail" of the lazy-seq is a lazy-seq itself</text>
  </message>
  <message conversation_id="781">
    <ts>2019-03-12T13:24:30.840200</ts>
    <user>Jasmine</user>
    <text>Clojure does not make guarantees about how lazy lazy seqs are. If that is of critical importance to you (due to side effects or resource consumption), don't use lazy seqs.</text>
  </message>
  <message conversation_id="783">
    <ts>2019-03-12T13:42:29.840500</ts>
    <user>Sixta</user>
    <text>Just wondering, what should I use?</text>
  </message>
  <message conversation_id="783">
    <ts>2019-03-12T13:44:33.840700</ts>
    <user>Clarine</user>
    <text>loop/recur or transducers</text>
  </message>
  <message conversation_id="783">
    <ts>2019-03-12T13:51:06.841400</ts>
    <user>Sixta</user>
    <text>But my transducer is just going to consume a lazy sequence, no?</text>
  </message>
  <message conversation_id="783">
    <ts>2019-03-12T13:51:29.842200</ts>
    <user>Rosaline</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1906&gt;</text>
  </message>
  <message conversation_id="783">
    <ts>2019-03-12T13:51:34.842500</ts>
    <user>Sixta</user>
    <text>loop/recur requires users to implement map/filter/reduce/etc themselves </text>
  </message>
  <message conversation_id="783">
    <ts>2019-03-12T13:51:49.843000</ts>
    <user>Dann</user>
    <text>a transducer can be used in multiple contexts, the input need not be lazy</text>
  </message>
  <message conversation_id="783">
    <ts>2019-03-12T13:51:54.843400</ts>
    <user>Dann</user>
    <text>or even a ~sequence~ data structure</text>
  </message>
  <message conversation_id="783">
    <ts>2019-03-12T13:52:44.844800</ts>
    <user>Sixta</user>
    <text>&lt;@Rosaline&gt; I've been playing with that recently. I wasn't sure how collections played into this conservation. I did have to make modifications to the proposed functions there, so I should make a comment :)</text>
  </message>
  <message conversation_id="783">
    <ts>2019-03-12T13:53:34.845500</ts>
    <user>Rosaline</user>
    <text>I haven't used anything on the ticket in anger other then the original unfold</text>
  </message>
  <message conversation_id="784">
    <ts>2019-03-12T14:47:44.846800</ts>
    <user>Tonya</user>
    <text>I'm really struggling to setup emacs CIDER with clojurescript + clojure together.</text>
  </message>
  <message conversation_id="784">
    <ts>2019-03-12T14:48:03.847600</ts>
    <user>Becki</user>
    <text>Happy to help in &lt;#C0617A8PQ|cider&gt;</text>
  </message>
  <message conversation_id="784">
    <ts>2019-03-12T14:48:05.847700</ts>
    <user>Tonya</user>
    <text>It's a breeze with just clojure, but adding clojurescript seems to be difficult.</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:00:48.851100</ts>
    <user>Joette</user>
    <text>what would the idiomatic approach be to the following problem. You have `n` threads and a single set. You require a function `(insert! coll val)` such that `insert` returns `true` if `val` was inserted into the collection by the calling thread and `false` if `val` is already contained in `coll`?</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:01:57.852100</ts>
    <user>Joette</user>
    <text>while swap! can update the value, it seems that you need another atom to capture the success/failure state of the operation</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:02:03.852500</ts>
    <user>Dann</user>
    <text>sounds like a good use for an atom and `compare-and-set!`</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:02:20.853100</ts>
    <user>Becki</user>
    <text>There's a swap-vals that returns the old value and you can check for the presence of what you added</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:02:43.853800</ts>
    <user>Becki</user>
    <text>More what you want then check and set which is overly strict it would seem</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:03:16.855100</ts>
    <user>Becki</user>
    <text>Although I guess atoms are check and set either way under the hood</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:03:20.855200</ts>
    <user>Dann</user>
    <text>compare-and-set! is a building block for swap! and swap-vals!, but yeah, I forgot swap-vals! was there and it does precisely what you want</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:04:03.856100</ts>
    <user>Dann</user>
    <text>the atom isn't check-and-set, the compare-and-set! operation is (which every op that alters an atom other than reset! uses in some form)</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:06:57.856900</ts>
    <user>Joette</user>
    <text>perfect, so just ```(defn foo [xs x]
  (let [[old new] (swap-vals! xs conj x)]
    (not= old new)))
```</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:07:21.857300</ts>
    <user>Dann</user>
    <text>they all use the underlying compareAndSet method on AtomicReference &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Atom.java&gt;</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:07:33.858000</ts>
    <user>Dann</user>
    <text>&lt;@Joette&gt; yeah that should be it</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:07:58.858400</ts>
    <user>Alleen</user>
    <text>a manual `compare-and-set!` would avoid a write if the value is present, so it should perform better</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:08:01.858600</ts>
    <user>Dann</user>
    <text>where xs must be an atom containing a set</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:08:10.858800</ts>
    <user>Joette</user>
    <text>exactly, or at least something conjable</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:09:26.859800</ts>
    <user>Dann</user>
    <text>the return value is much less interesting for anything but a set (or a map if the arg is another map or a map-entry I guess...)</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:14:40.862800</ts>
    <user>Joette</user>
    <text>was considering if multiple clients wanted to register a topic (anonymously) in the context of pub/sub. How do you you indicate that a publisher has successfully registered that topic? This approach relies on the publishers being well behaved. An alternative would be to call `(insert! m topic publisher)` and return  true if `topic` is a new key in the map…</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:15:25.863300</ts>
    <user>Dann</user>
    <text>then you would also want to stop short if the topic key is already present instead of overwriting...</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:15:37.863700</ts>
    <user>Dann</user>
    <text>so you'd likely want compare-and-set! for that</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:16:27.864600</ts>
    <user>Dann</user>
    <text>(or a function that replicates compare-and-set! by not altering the input if the value has changed)</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:16:52.865100</ts>
    <user>Dann</user>
    <text>I guess that custom function could have better key granularity and thus do fewer retries -- abort if any alteration has occured, vs. abort if this key exists</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:19:35.865500</ts>
    <user>Tonya</user>
    <text>Has anyone seen this error: "java.lang.ExceptionInInitializerError
        at clojure.main.&amp;lt;clinit&amp;gt;(main.java:20)
Caused by: Syntax error compiling . at (ring/adapter/jetty.clj:28:9)."</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:19:42.865700</ts>
    <user>Tonya</user>
    <text>I'm getting it when I run lein repl</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:20:57.866500</ts>
    <user>Dann</user>
    <text>I'm surprised - that indicates that ring.adaptor.jetty has a syntax error, are you using an up to date version of ring and the ring jetty adapter?</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:21:13.866800</ts>
    <user>Tonya</user>
    <text>Yes, it is a problem with figwheel-main</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:21:18.867000</ts>
    <user>Tonya</user>
    <text>If I leave it out the error doesn't occur.</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:22:11.867600</ts>
    <user>Dann</user>
    <text>the error is in the ring jetty adapter which figwheel uses because it wants its own webserver</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:23:02.867900</ts>
    <user>Tonya</user>
    <text>So what is the issue?</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:23:07.868100</ts>
    <user>Tonya</user>
    <text>Why can't it have its own webserver</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:23:44.868700</ts>
    <user>Dann</user>
    <text>it can, the problem is this version of the ring jetty adapter has a syntax error, which makes me assume it's an old version</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:24:25.869000</ts>
    <user>Tonya</user>
    <text>ring jetty adapter is included in ring.</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:24:29.869200</ts>
    <user>Tonya</user>
    <text>I'll update though and see.</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:24:49.869700</ts>
    <user>Tonya</user>
    <text>No I'm using ring "1.7.1"</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:26:15.870300</ts>
    <user>Dann</user>
    <text>in that case clojure is claiming this is a syntax error, which is weird &lt;https://github.com/ring-clojure/ring/blob/master/ring-jetty-adapter/src/ring/adapter/jetty.clj#L28&gt;</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:27:02.870600</ts>
    <user>Tonya</user>
    <text>Yes, it does seem strange.</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:27:14.871000</ts>
    <user>Tonya</user>
    <text>Why does setting up my dev environment have to be so hard !!!!!</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:27:35.871600</ts>
    <user>Jasmine</user>
    <text>anything happening in the compiler will report as a "syntax error" so that may be misleading you in this case</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:28:54.873100</ts>
    <user>Tonya</user>
    <text>It's weird, all I added was figwheel and I staarted getting these erros.</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:28:55.873200</ts>
    <user>Jasmine</user>
    <text>"Syntax error compiling ." just means it's an error being thrown out of one of the host expressions (field, method, etc)  calls</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:29:29.873700</ts>
    <user>Tonya</user>
    <text>None</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:29:38.874400</ts>
    <user>Tonya</user>
    <text>There's the full stacktrace.</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:29:39.874500</ts>
    <user>Jasmine</user>
    <text>and that's probably happening while compiling, while loading the system via user.clj (which happens under the RT static initializer), which is the ExceptionInInitializer part</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:30:11.874900</ts>
    <user>Dann</user>
    <text>```java.lang.ClassNotFoundException: org.eclipse.jetty.http.BadMessageException``` this is the real problem</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:30:35.875500</ts>
    <user>Jasmine</user>
    <text>`Caused by: java.lang.ClassNotFoundException: org.eclipse.jetty.http.BadMessageException` is the real cause</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:30:36.875700</ts>
    <user>Dann</user>
    <text>looks like ring jetty adapter wants a version of jetty different from the one you are pulling in</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:31:15.876200</ts>
    <user>Dann</user>
    <text>you could check `lein deps :plugin-tree` for jetty version conflicts</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:33:08.876600</ts>
    <user>Tonya</user>
    <text>Nothing there but does this mean anything?</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:33:08.876800</ts>
    <user>Tonya</user>
    <text>[refactor-nrepl "2.4.0"] -&amp;gt; [nrepl "0.4.4"]
 overrides
[cider/cider-nrepl "0.19.0-SNAPSHOT"] -&amp;gt; [nrepl "0.5.3" :exclusions [org.clojure/clojure]]</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:33:35.877300</ts>
    <user>Dann</user>
    <text>you likely need `with-profile` to ensure it checks the profile that figwheel uses</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:34:05.878000</ts>
    <user>Dann</user>
    <text>I forget how that's typically set up, but it will be evident in project.clj, something like `lein with-profile +figwheel deps :plugin-tree`</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:36:40.878500</ts>
    <user>Tonya</user>
    <text>So removing: "[com.bhauman/figwheel-main "0.1.5"]" from my :dev dependencies fixes the error</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:36:57.878900</ts>
    <user>Tonya</user>
    <text>But I see no conflicts even with my dev profile</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:37:04.879100</ts>
    <user>Dann</user>
    <text>if you have the figwheel plugin it would likely be pulling that in already</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:37:25.879500</ts>
    <user>Tonya</user>
    <text>No figwheel plugin</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:37:33.879900</ts>
    <user>Dann</user>
    <text>but figwheel probably changed significantly since I last used it :/</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:37:54.880300</ts>
    <user>Tonya</user>
    <text>I was trying to figure out figwheel + cider when everything broke</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:38:27.881300</ts>
    <user>Dann</user>
    <text>anyway, if it's not a dep conflict, and figwheel is just pulling in a bad jetty version, that's just a bug, but you can work around it by explicitly asking for the version that has the class you need before the figwheel dep</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:38:28.881400</ts>
    <user>Becki</user>
    <text>be aware lein-figwheel and figwheel main are different and incompatible</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:39:03.881700</ts>
    <user>Tonya</user>
    <text>I should use figwheel main correct?</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:39:08.881900</ts>
    <user>Tonya</user>
    <text>I'm not using lein-figwheel</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:39:42.882400</ts>
    <user>Dann</user>
    <text>I wrongly assumed that you were using `lein figwheel`, I haven't used cljs in about a year, sorry</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:40:38.882600</ts>
    <user>Tonya</user>
    <text>no problem</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-12T15:41:26.882900</ts>
    <user>Tonya</user>
    <text>does figwheel-main look at :cljs-build?</text>
  </message>
  <message conversation_id="786">
    <ts>2019-03-13T11:12:44.886900</ts>
    <user>Janean</user>
    <text>is there a cljc library like plumatic’s graph (&lt;https://github.com/plumatic/plumbing&gt;) ? Plumbing doesn’t work with deps.edn because of cljx.</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-13T11:42:18.890000</ts>
    <user>Tonya</user>
    <text>So I have clj source files in src-clj and cljs source files in src-cljs. I want run both a figwheel repl and a clojure repl and connect to both with CIDER. I'm trying to use figwheel-main but I'm running into a bunch of issues.</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-13T11:49:40.890300</ts>
    <user>Tonya</user>
    <text>I keep getting this error: [WARNING] No nREPL middleware descriptor in metadata of #'cider.piggieback/wrap-cljs-repl, see clojure.tools.middleware/set-descriptor!</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-13T11:50:33.890600</ts>
    <user>Clarine</user>
    <text>maybe also ask in &lt;#C0617A8PQ|cider&gt; or &lt;#C17JYSA3H|nrepl&gt;</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-13T12:06:46.890700</ts>
    <user>Sixta</user>
    <text>It works as a maven dependency</text>
  </message>
  <message conversation_id="786">
    <ts>2019-03-13T12:07:26.890900</ts>
    <user>Sixta</user>
    <text>Even if there wasn't cljx, it doesn't work as a git dependency because it doesn't have a deps.edn</text>
  </message>
  <message conversation_id="786">
    <ts>2019-03-13T12:08:06.891100</ts>
    <user>Janean</user>
    <text>good to know thanks. Are you aware of other libs that are easier to fork/change?</text>
  </message>
  <message conversation_id="785">
    <ts>2019-03-13T12:09:21.891400</ts>
    <user>Sixta</user>
    <text>I vaguely recall someone releasing something like the graph recently</text>
  </message>
  <message conversation_id="787">
    <ts>2019-03-13T12:43:30.891600</ts>
    <user>Danna</user>
    <text>are you running cursive?</text>
  </message>
  <message conversation_id="787">
    <ts>2019-03-13T12:44:12.891800</ts>
    <user>Danna</user>
    <text>when you start up the repl you have give it a startup option that instruments it for cljs</text>
  </message>
  <message conversation_id="787">
    <ts>2019-03-13T12:44:51.892000</ts>
    <user>Danna</user>
    <text>that error (usually) means that you have tried to use a cljs repl on something that has not been instrumented for it</text>
  </message>
  <message conversation_id="787">
    <ts>2019-03-13T12:45:57.892200</ts>
    <user>Danna</user>
    <text>Cursive does not yet natively support this instrumentation for cljs</text>
  </message>
  <message conversation_id="787">
    <ts>2019-03-13T12:46:40.892400</ts>
    <user>Danna</user>
    <text>but if you are running from command line then its much easier ...</text>
  </message>
  <message conversation_id="787">
    <ts>2019-03-13T12:50:24.892900</ts>
    <user>Danna</user>
    <text>ultimately you need to stick something like ```-m nrepl.cmdline --middleware [cider.piggieback/wrap-cljs-repl] --interactive```
into your Clojure Java process</text>
  </message>
  <message conversation_id="787">
    <ts>2019-03-13T12:50:57.893100</ts>
    <user>Danna</user>
    <text>its the details of what technology you use to get it there that might vary</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:43:00.894800</ts>
    <user>Corine</user>
    <text>hello... need an advice for which clojure server lib to use? ring, http-kit ....???? tks</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:45:08.896400</ts>
    <user>Rosaline</user>
    <text>ring usually means jetty, but ring is a spec that defines an interface between clojure code and a webserver, so there there are implementations of that spec (usually called an adapter) for a number of jvm webservers</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:46:24.896700</ts>
    <user>Rosaline</user>
    <text>http-kit to some degree implements the ring spec even</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:47:20.897600</ts>
    <user>Rosaline</user>
    <text>jetty just happens to be kind of the default choice for ring because I believe it is the only adapter that is part of the ring project</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:49:23.899400</ts>
    <user>Rosaline</user>
    <text>I like jetty too, and it supports all the cool stuff these days (http2, websockets), but a lot of that post-dates the ring spec, so the jetty ring adapter doesn't expose it in an easy to use way</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:54:35.904600</ts>
    <user>Corine</user>
    <text>you know if http-kit is abandonware?? i mean that because my background is in common-lisp and i really dont want to get all the jvm stuff for now... i started to use http-kit but i heard that it is now abandoned by the author... i know i can just "plugin" another server... but i really want to focus on the app and not the server per se</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:54:56.905000</ts>
    <user>Rosaline</user>
    <text>because the http-kit implements the ring spec, you can actually switch between it and jetty pretty seamlessly, which if I recall we've done at work a few times (I mostly don't notice the switch), and I think we are using http-kit now</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:56:10.905900</ts>
    <user>Rosaline</user>
    <text>something that I can't really put my finger on about http-kit makes me nervous, but we are using it at work and don't have problems with it</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:57:03.906500</ts>
    <user>Rosaline</user>
    <text>I do have a (unreasonable?) soft spot for jetty</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:57:17.906800</ts>
    <user>Augusta</user>
    <text>&lt;@Corine&gt; Aleph is also a nice alternative to ring</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:57:42.907100</ts>
    <user>Rosaline</user>
    <text>aleph infact also implements the ring spec to some degree</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T13:59:29.908900</ts>
    <user>Rosaline</user>
    <text>aleph is a webserver and ring is an interface for connecting clojure code to webservers, they are not directly comparable things (apples and oranges)</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T14:00:46.909100</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/ring-clojure/ring/blob/master/SPEC&gt;</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T14:03:21.910900</ts>
    <user>Corine</user>
    <text>tks &lt;@Augusta&gt; and &lt;@Rosaline&gt;</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T14:07:11.914100</ts>
    <user>Corine</user>
    <text>i will stick with http-kit ....after knowing &lt;@Rosaline&gt; employer is using it!!!</text>
  </message>
  <message conversation_id="788">
    <ts>2019-03-13T14:07:46.914400</ts>
    <user>Corine</user>
    <text>tks!!! :sunglasses:</text>
  </message>
  <message conversation_id="789">
    <ts>2019-03-13T14:13:29.916500</ts>
    <user>Kirsten</user>
    <text>It also depends in if you need  to do async stuff, the official ring/jetty combo has some async apis but it can't really do non-blocking IO.</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:57:23.917200</ts>
    <user>Fredda</user>
    <text>this seems normal</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:57:38.917900</ts>
    <user>Fredda</user>
    <text>but this surprised me</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:58:25.918900</ts>
    <user>Fredda</user>
    <text>If the values in an `update` application are fns, it seems only the first one applies</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:58:41.919300</ts>
    <user>Melina</user>
    <text>huh</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:58:41.919400</ts>
    <user>Sixta</user>
    <text>&lt;@Fredda&gt; `update` only works on 1 key at a time, always</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:58:46.919600</ts>
    <user>Sixta</user>
    <text>but the second thing is weird</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:58:58.919800</ts>
    <user>Sixta</user>
    <text>oh, no it isn't</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:59:09.920200</ts>
    <user>Rosaline</user>
    <text>it is weird, and it is not what I get locally</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:59:21.920700</ts>
    <user>Sixta</user>
    <text>```
user=&amp;gt; {:b inc}
{:b #object[clojure.core$inc 0x18fdb6cf "clojure.core$inc@18fdb6cf"]}
```</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:59:24.920900</ts>
    <user>Rosaline</user>
    <text>for update-in and update, it works on a single thing, the rest args are for arguments</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:59:46.921500</ts>
    <user>Sixta</user>
    <text>Why is it weird?</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:59:51.921700</ts>
    <user>Fredda</user>
    <text>also</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T14:59:56.921900</ts>
    <user>Fredda</user>
    <text>What I wanted to do</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:00:11.922400</ts>
    <user>Sixta</user>
    <text>&lt;@Rosaline&gt; it is what I get locally, so I am confused :slightly_smiling_face:</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:00:26.923100</ts>
    <user>Rosaline</user>
    <text>I copied and pasted the wrong thing out of the two examples</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:00:32.923400</ts>
    <user>Sixta</user>
    <text>haha :smile:</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:00:46.924000</ts>
    <user>Dorla</user>
    <text>The function `constantly` returns a function which takes any number of args</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:01:03.924400</ts>
    <user>Rosaline</user>
    <text>anyway, ` (constantly 2)` is passed the arguments `inc`, `:b`, and `(constantly 1)`</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:01:21.925000</ts>
    <user>Rosaline</user>
    <text>and the result is assoc'ed in under `:a` in the result</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:01:52.925500</ts>
    <user>Rosaline</user>
    <text>which is why you get the wrong arity exception</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:02:00.925800</ts>
    <user>Fredda</user>
    <text>Sorry, maybe my intentions got mixed up there. I wasn't actually trying to `inc` 2</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:02:11.926100</ts>
    <user>Fredda</user>
    <text>ah okay</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:02:16.926300</ts>
    <user>Melina</user>
    <text>`((:a (update {:a inc, :b inc} :a comp inc inc inc)) 38)`</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:02:19.926500</ts>
    <user>Melina</user>
    <text>I get it now</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:02:22.926700</ts>
    <user>Melina</user>
    <text>returns 42</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:02:46.927200</ts>
    <user>Fredda</user>
    <text>ooooh</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:03:02.927900</ts>
    <user>Melina</user>
    <text>`:b` remains associated to `inc`</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:03:52.929600</ts>
    <user>Fredda</user>
    <text>I thought update expected key value pairs</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:03:53.929700</ts>
    <user>Melina</user>
    <text>the rest of the args are used as in `apply`</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:04:01.930000</ts>
    <user>Marlyn</user>
    <text>update doesn't take multiple keys to update</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:04:09.930500</ts>
    <user>Marlyn</user>
    <text>just one key, a function, and trailing args to the function</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:04:09.930600</ts>
    <user>Fredda</user>
    <text>right</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:04:40.931500</ts>
    <user>Jasmine</user>
    <text>if only someone had documented the arguments somehow :)</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:04:42.931600</ts>
    <user>Sixta</user>
    <text>I've been banging my head against this one for over an hour now. I've tried using various libs for Reader/Writer to Input/OutputStream so that I can run an interactive process in the REPL against `*in*` and `*out*`, but I'm having mixed results. I don't see anything until I hit Ctrl-D.

I want to be able to run this in any repl (socket or terminal, or maybe even nrepl).</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:04:48.931800</ts>
    <user>Fredda</user>
    <text>okay okay</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:04:51.932100</ts>
    <user>Fredda</user>
    <text>ma' bad</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:04:58.932300</ts>
    <user>Sixta</user>
    <text>Am I hitting a fundamental limit that I don't understand?</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:05:22.932700</ts>
    <user>Rosaline</user>
    <text>nrepl has a whole other thing going on</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:05:35.933300</ts>
    <user>Fredda</user>
    <text>Somehow I had the wrong contract for update in my head</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:05:52.933800</ts>
    <user>Rosaline</user>
    <text>basically for reading *in* to work in the nrepl the client has to have special support for it, and many clients implement it as a weird different thing</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:06:17.934400</ts>
    <user>Sixta</user>
    <text>nrepl does some stuff with in &amp;amp; out, so may not apply. Going to circle round to that one. That's a bad thing to mention at this stage perhaps :smile: I'm more interested in terminal &amp;amp; socket at this stage.</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:07:23.934900</ts>
    <user>Sixta</user>
    <text>here's some things I tried: &lt;https://gist.github.com/SevereOverfl0w/c4c8876f20d6ce1772a77e2cc216d814&gt;</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:07:28.935000</ts>
    <user>Jasmine</user>
    <text>doesn't make sense to me</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:07:30.935200</ts>
    <user>Fredda</user>
    <text>oh, 'cause of `assoc`, that's why</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:07:41.935600</ts>
    <user>Jasmine</user>
    <text>you do have to be careful to flush when dealing with `*out*`</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:08:46.936400</ts>
    <user>Jasmine</user>
    <text>note that `*in*` is not  exactly  stdin</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:09:46.937200</ts>
    <user>Jasmine</user>
    <text>stdin in Java  is typically an inputstream.  The REPL wraps a reader around that.</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:10:09.937500</ts>
    <user>Jasmine</user>
    <text>inputstream being byte-oriented, reader being char-oriented</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:10:50.938000</ts>
    <user>Sixta</user>
    <text>ah, WriterOutputStream requires a flag to flush immediately!</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:10:59.938400</ts>
    <user>Jasmine</user>
    <text>or just call flush</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:11:15.938900</ts>
    <user>Sixta</user>
    <text>I don't know when writing has happened, that's down to the process.</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:11:24.939100</ts>
    <user>Jasmine</user>
    <text>gotcha</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:11:48.939700</ts>
    <user>Jasmine</user>
    <text>autoflush is probably a lot slower but interactively, prob don't care</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:13:51.939900</ts>
    <user>Sixta</user>
    <text>that didn't solve it anyway :disappointed:</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:15:18.940900</ts>
    <user>Sixta</user>
    <text>ah, removing the piping of `*in*` fixed it. I guess I'm blocking _some_ thread.</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:15:24.941100</ts>
    <user>Sixta</user>
    <text>No idea what one.</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:24:40.942100</ts>
    <user>Sixta</user>
    <text>I wonder if it is because .available always returns 0, so you can't do the equivalent of a select on the input/output to decide what to do</text>
  </message>
  <message conversation_id="790">
    <ts>2019-03-13T15:25:05.942700</ts>
    <user>Sixta</user>
    <text>That would be a blocking limitation for this idea</text>
  </message>
  <message conversation_id="791">
    <ts>2019-03-13T20:24:18.946000</ts>
    <user>Elaine</user>
    <text>I'm trying to remove some reflection from my code
there is a `(.set foo inst)` that works via reflection but I can't find WHY it works (inst is java.util.Date, there is no mention to java.util.Date in this lib)
There is some way to debug this? some way to "print the reflection result"</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T20:40:29.946900</ts>
    <user>Jasmine</user>
    <text>What is the type of foo?</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T20:50:54.948000</ts>
    <user>Guy</user>
    <text>After I did cider jack in, I installed more deps. Looks like cider doesn’t know the new packages installed, is there some way to refresh cider?</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:12:20.948600</ts>
    <user>Meagan</user>
    <text>you can do `cider-restart`. it will shutdown the REPL process and start it again</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:12:48.949200</ts>
    <user>Meagan</user>
    <text>so you will lose the state of your application</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:30:17.949500</ts>
    <user>Guy</user>
    <text>&lt;@Meagan&gt; is that the only way?</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T21:30:25.949800</ts>
    <user>Guy</user>
    <text>there isn’t a way to reload?</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:31:10.950500</ts>
    <user>Meagan</user>
    <text>there are libraries out there to help with this, but in general yes</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T21:32:14.951700</ts>
    <user>Guy</user>
    <text>I am trying to find some lib which can do this</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:32:16.951900</ts>
    <user>Meagan</user>
    <text>adding new dependencies means you need to add new things to the class path. in general, class path are determined before you start the JVM process clojure lives in</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:32:48.952300</ts>
    <user>Meagan</user>
    <text>I’ve heard of people using pomegranate: &lt;https://github.com/cemerick/pomegranate&gt;</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:32:52.952600</ts>
    <user>Meagan</user>
    <text>but I’ve never used it</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:33:37.953400</ts>
    <user>Meagan</user>
    <text>if you’re using `clj` + deps.edn, I’ve heard of some branch that has an `add-lib` function but I don’t know how well it works right now</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:42:30.953700</ts>
    <user>Guy</user>
    <text>&lt;@Meagan&gt; nice. Thanks</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T21:49:21.954500</ts>
    <user>Celestine</user>
    <text>&lt;@Guy&gt; If you're using `deps.edn`, see &lt;https://github.com/seancorfield/dot-clojure/blob/master/deps.edn#L103-L116&gt; which shows how to use the `add-lib` branch.</text>
  </message>
  <message conversation_id="794">
    <ts>2019-03-13T21:54:33.957600</ts>
    <user>Tressa</user>
    <text>i've got an api endpoint for listing entities. entities are many, so they are returned paginated, sorted by a given attribute. this is backed by datomic. how do i achieve in datomic what in sql would be a order by + limit + offset?</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T21:54:55.957700</ts>
    <user>Guy</user>
    <text>&lt;@Celestine&gt; I was looking up what deps is.</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T21:54:57.957800</ts>
    <user>Celestine</user>
    <text>Maybe ask in &lt;#C03RZMDSH|datomic&gt; ?</text>
  </message>
  <message conversation_id="792">
    <ts>2019-03-13T21:55:46.958200</ts>
    <user>Celestine</user>
    <text>&lt;https://clojure.org/guides/deps_and_cli&gt;</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T21:56:45.958900</ts>
    <user>Tressa</user>
    <text>gonna do that</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T21:57:43.960100</ts>
    <user>Celestine</user>
    <text>If you're using Leiningen, there's no simple way to add deps once you're up and running (you'd have to use Pomegranate I think). Boot lets you add deps to a running REPL easily. CLI/`deps.edn` lets you add deps if you depend on that branch of `tools.deps`.</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T21:58:16.960300</ts>
    <user>Guy</user>
    <text>Nice.</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T22:00:40.961400</ts>
    <user>Guy</user>
    <text>&lt;@Celestine&gt; Is there some way to install packages from emacs? I have seen clj refactor but it doesn’t work with cider 21(which is the default now)</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T22:05:46.961800</ts>
    <user>Celestine</user>
    <text>No idea. I stopped using Emacs years ago, sorry.</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T22:06:09.962200</ts>
    <user>Celestine</user>
    <text>And by "install packages" I assume you mean "add Clojure dependencies"?</text>
  </message>
  <message conversation_id="793">
    <ts>2019-03-13T22:06:34.962500</ts>
    <user>Celestine</user>
    <text>Or do you mean "install Emacs packages"?</text>
  </message>
  <message conversation_id="795">
    <ts>2019-03-14T03:53:59.963200</ts>
    <user>Alleen</user>
    <text>&lt;@Janean&gt; you may consider &lt;https://github.com/leonoel/injure/&gt;
same goals as plumatic graph, slightly different approach</text>
  </message>
  <message conversation_id="796">
    <ts>2019-03-14T05:12:52.963400</ts>
    <user>Sixta</user>
    <text>That's the library I was thinking of!</text>
  </message>
  <message conversation_id="796">
    <ts>2019-03-14T08:22:33.963600</ts>
    <user>Darlene</user>
    <text>You might ask in &lt;#C099W16KZ|emacs&gt; or &lt;#C0617A8PQ|cider&gt;.</text>
  </message>
  <message conversation_id="797">
    <ts>2019-03-14T09:50:41.963900</ts>
    <user>Toccara</user>
    <text>Hi guys</text>
  </message>
  <message conversation_id="797">
    <ts>2019-03-14T09:50:50.964300</ts>
    <user>Toccara</user>
    <text>is there something like lisp trace in clojure?</text>
  </message>
  <message conversation_id="797">
    <ts>2019-03-14T09:51:47.964500</ts>
    <user>Fritz</user>
    <text>like, &lt;https://clojure.github.io/tools.trace/#clojure.tools.trace/trace&gt;</text>
  </message>
  <message conversation_id="797">
    <ts>2019-03-14T10:52:10.965500</ts>
    <user>Toccara</user>
    <text>what is best performant approach for iterating over a list by two elements what i have in mind is:
(map vector l (rest l))</text>
  </message>
  <message conversation_id="797">
    <ts>2019-03-14T10:54:34.965900</ts>
    <user>Clarine</user>
    <text>&lt;@Toccara&gt; `(partition 2 1 [1 2 3 4])`</text>
  </message>
  <message conversation_id="797">
    <ts>2019-03-14T10:59:00.966200</ts>
    <user>Toccara</user>
    <text>should be faster than map solution for big l ?</text>
  </message>
  <message conversation_id="797">
    <ts>2019-03-14T11:00:27.966500</ts>
    <user>Clarine</user>
    <text>don’t know, run a benchmark :slightly_smiling_face:</text>
  </message>
  <message conversation_id="797">
    <ts>2019-03-14T11:02:23.967500</ts>
    <user>Toccara</user>
    <text>okay thanks</text>
  </message>
  <message conversation_id="798">
    <ts>2019-03-14T11:53:37.968400</ts>
    <user>Corine</user>
    <text>hi all... anyone knows if hiccup can indent the generate html????</text>
  </message>
  <message conversation_id="798">
    <ts>2019-03-14T12:30:59.968700</ts>
    <user>Marlyn</user>
    <text>&lt;@Corine&gt; nope.  &lt;https://github.com/weavejester/hiccup/issues/27&gt;</text>
  </message>
  <message conversation_id="799">
    <ts>2019-03-14T12:31:21.969300</ts>
    <user>Marlyn</user>
    <text>you can always re-parse it with something else if you really want indentation</text>
  </message>
  <message conversation_id="798">
    <ts>2019-03-14T12:37:45.969900</ts>
    <user>Corine</user>
    <text>&lt;@Marlyn&gt; tks! gonna see that!</text>
  </message>
  <message conversation_id="798">
    <ts>2019-03-14T12:55:41.971300</ts>
    <user>Mariela</user>
    <text>I'm a big fan of `clojure.test/are`. Occasionally for each "iteration" I'd need the `:each` fixtures to be re-run.

Wondering if anyone has solved that problem, maybe with a custom `are`</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:14:11.971700</ts>
    <user>Janean</user>
    <text>is there cljs/cljc map-like datastructure that allows lookups by key OR value?</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:20:13.972300</ts>
    <user>Dann</user>
    <text>makes me wonder if anyone has implemented bimap on top of map (not precisely this, but very close)</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:22:11.972600</ts>
    <user>Dann</user>
    <text>cgrand has a version of bimap in this mailing list thread &lt;https://groups.google.com/forum/#!topic/clojure/L1GiqSyQVVg&gt;</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:22:28.973000</ts>
    <user>Janean</user>
    <text>yes, unfortunately CLJ only</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:23:35.973700</ts>
    <user>Dann</user>
    <text>ahh, I missed that detail - seems like you could do something similar portably, at the cost of performance of course</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:24:31.973900</ts>
    <user>Clarine</user>
    <text>you could also use two maps</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:25:19.974300</ts>
    <user>Dann</user>
    <text>cgrand's version is "just" a deftype which uses two maps internally</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:25:46.974800</ts>
    <user>Dann</user>
    <text>the tricky part is concisely implementing the N interfaces / methods for a map</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:27:09.975200</ts>
    <user>Clarine</user>
    <text>I mean, if you know you’re searching with the key or the val, that would make the most sense probably</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:32:33.976000</ts>
    <user>Janean</user>
    <text>&lt;https://clojurians.slack.com/archives/C03S1KBA2/p1552584346974800&gt;
yup that’s a bit of work. I might start with a few function wrappers to get it to work initially</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:33:38.977200</ts>
    <user>Marlyn</user>
    <text>What would it return when you lookup avalue?</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:33:40.977300</ts>
    <user>Janean</user>
    <text>quite surprised that among the numerous datastructures in the eco-system, bi-map isn’t one of them</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:33:49.977500</ts>
    <user>Janean</user>
    <text>&lt;@Marlyn&gt; the key</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:34:21.978500</ts>
    <user>Janean</user>
    <text>the idea to be able to do lookups in either direction, from k to v or v to k</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:34:21.978700</ts>
    <user>Becki</user>
    <text>what about `{:a :duplicate :b :duplicate}`. what would bimap lookup return for `:duplicate`?</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:34:32.979100</ts>
    <user>Marlyn</user>
    <text>Just assoc both directions</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:35:08.980700</ts>
    <user>Becki</user>
    <text>also, if you need this only once and not in the datastructure there's set/invert-keys</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:35:10.980800</ts>
    <user>Janean</user>
    <text>&lt;@Becki&gt; depends when the entries were added. one would overwrite the key for the other</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:35:20.981200</ts>
    <user>Dann</user>
    <text>&lt;@Becki&gt; I'm pretty sure a bimap should remove :a :duplicate if :b :duplicate is inserted</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:35:42.981900</ts>
    <user>Becki</user>
    <text>i see</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:35:50.982200</ts>
    <user>Dann</user>
    <text>I could be wrong though...</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:35:53.982300</ts>
    <user>Janean</user>
    <text>my use case is to keep it around / mutate / do many lookups</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:36:52.983600</ts>
    <user>Dann</user>
    <text>&amp;gt; A bimap (or "bidirectional map") is a map that preserves the uniqueness of its values as well as that of its keys.
&lt;https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/BiMap.html&gt;</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:38:20.984100</ts>
    <user>Becki</user>
    <text>ah, and you can ask for the inverse.</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:39:00.984500</ts>
    <user>Tammera</user>
    <text>ohhh cool datastructure, what would be a usecase for a bimap</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:41:03.985400</ts>
    <user>Dann</user>
    <text>things that link two unique entities - eg. customer / assigned seat</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:41:37.985900</ts>
    <user>Dann</user>
    <text>as long as it's guaranteed 1:1</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:41:55.986300</ts>
    <user>Clarine</user>
    <text>what am I overlooking when I say that in that case you can just use two maps?</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:42:14.986700</ts>
    <user>Dann</user>
    <text>you need to keep them in sync, and it would be nice to be able to use assoc / get etc.</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:42:35.987800</ts>
    <user>Dann</user>
    <text>but yeah, easy to implement with two maps and some clever dissoc logic to keep in sync</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:42:48.988600</ts>
    <user>Tammera</user>
    <text>(I just found a bimap in rust, it uses two hash/tree maps apparantly)</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:42:50.988700</ts>
    <user>Clarine</user>
    <text>{:a 1 :c 1} would be invalid, because chair 1 would be allocated twice right</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:42:55.988800</ts>
    <user>Becki</user>
    <text>its tough without mutation. since the mutable one lets you ask for the inverse, but if you're immutable only one "direction" can use assoc,</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:43:19.989800</ts>
    <user>Dann</user>
    <text>&lt;@Clarine&gt; exactly, your assoc implementation would need to guarantee that wouldn't occur</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:43:29.990000</ts>
    <user>Becki</user>
    <text>`{:a :b :b :c}`. how do you lookup `:b` in vals or in keys</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:43:49.990400</ts>
    <user>Dann</user>
    <text>that's another invalid state you'd need to avoid</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:43:55.990700</ts>
    <user>Becki</user>
    <text>but that is valid</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:44:02.990900</ts>
    <user>Becki</user>
    <text>or at least in the mutable one</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:44:10.991200</ts>
    <user>Dann</user>
    <text>oh, I might misunderstand</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:44:16.991500</ts>
    <user>Becki</user>
    <text>since you can specify which direction you are using and use the same underlying data</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:47:08.992200</ts>
    <user>Dann</user>
    <text>so it appears the guava version has a method to access the "reversed" view</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:47:30.992900</ts>
    <user>Dann</user>
    <text>so you can get on the canonical or reversed view (backed by each of the two underlying maps of course)</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:48:26.993800</ts>
    <user>Dann</user>
    <text>&lt;@Becki&gt; for real world your case is eg. secret santa or spouse, defined as 1:1 but the same item can appear on both sides</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:48:53.994200</ts>
    <user>Becki</user>
    <text>anytime K and V intersect</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:54:02.994900</ts>
    <user>Vinnie</user>
    <text>any tips on cleaning up these warnings on repl startup?
```
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by mranderson049.orchard.v0v4v0.dynapath.v0v2v5.dynapat
h.defaults$eval39549$fn__39550 to method java.net.URLClassLoader.addURL(java.net.URL)
WARNING: Please consider reporting this to the maintainers of mranderson049.orchard.v0v4v0
.dynapath.v0v2v5.dynapath.defaults$eval39549$fn__39550
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access
 operations
WARNING: All illegal access operations will be denied in a future release
```

i've been searching my deps. not sure what `mranderson049.orchard.v0v4v0.dynapath` is but seems related to &lt;https://github.com/clojure-emacs/orchard/issues/2&gt;</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T13:54:43.995100</ts>
    <user>Vinnie</user>
    <text>```java 11
clojure 1.10
lein 2.9.1
nrepl 0.6.0```</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:56:13.995300</ts>
    <user>Dann</user>
    <text>there's a jvm arg for the newer jvm versions that overrides the new module protection rules, and if I understand correctly that's what makes this reflection illegal now</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:56:51.995800</ts>
    <user>Janean</user>
    <text>bingo &lt;@Dann&gt; &lt;@Becki&gt; &lt;https://github.com/CharlesHD/chulper/blob/99c35dffb5e725a5dba08da5a70e053f9fb4bde4/src/chulper/bimap.cljc&gt;</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:56:53.995900</ts>
    <user>Vinnie</user>
    <text>ic. i wonder if the reflection is a necessary part of whatever lib that's causing it or if there is a better alternative</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T13:57:48.996400</ts>
    <user>Becki</user>
    <text>so it seems this one cannot express the secret sant problem</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:01:54.996800</ts>
    <user>Janean</user>
    <text>it’s missing a protocol and impl for reverse lookup</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:05:33.997700</ts>
    <user>Sixta</user>
    <text>the problem is that the jvm lies, it says these things are accessible, but they aren't. There's parts of clojure that can trigger this too.</text>
  </message>
  <message conversation_id="800">
    <ts>2019-03-14T14:05:59.998000</ts>
    <user>Vinnie</user>
    <text>is the solution to set a jvm flag to ignore it?</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:07:00.998800</ts>
    <user>Dann</user>
    <text>it's written such that one of the maps contains all keys and vals as keys, which is why it can't express secret-santa, unlike guava's version of bimap</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:07:20.999200</ts>
    <user>Dann</user>
    <text>but that also means that there's no distinct "reverse lookup" - lookup is just lookup</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:13:42.999600</ts>
    <user>Guy</user>
    <text>is there some way to figure out what are the exported fns from a package?</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:14:00.999700</ts>
    <user>Dann</user>
    <text>I'd need to know a lot more about mranderson (the lib that is causing this problem) to offer any other suggestion</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:14:10.999900</ts>
    <user>Dann</user>
    <text>and it would mean fixing mranderson</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:15:08.000100</ts>
    <user>Vinnie</user>
    <text>yeah i can't figure out what it is or where it's coming from. maybe `cider-nrepl`</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:15:34.000300</ts>
    <user>Vinnie</user>
    <text>it doesn't show up in `lein deps :tree` (at least by anything with `anderson`)</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:16:53.000600</ts>
    <user>Vinnie</user>
    <text>confirmed: it goes away if i remove `cider-nrepl` from my profiles.clj</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:25:03.001100</ts>
    <user>Dann</user>
    <text>by package do you mean namespace, dependency, ...</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T14:25:28.001600</ts>
    <user>Dann</user>
    <text>(jvm has a concept of packages but most don't contain anything implementing clojure.lang.IFn)</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:02:04.002000</ts>
    <user>Becki</user>
    <text>```
user&amp;gt; (bimap :a :b :b :c)
{:a :b, :b :c}
user&amp;gt; (get *1 :b)
:c
user&amp;gt; (get (inverse *2) :b)
:a
```
looks good actually</text>
  </message>
  <message conversation_id="801">
    <ts>2019-03-14T15:14:39.002600</ts>
    <user>Guy</user>
    <text>&lt;@Dann&gt; external lib/dependency  like compojure</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:20:12.003500</ts>
    <user>Rosaline</user>
    <text>libraries are just namespaces that are distributed together, there is no language level feature that distinguishes them as a group</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:21:20.004800</ts>
    <user>Rosaline</user>
    <text>everything def'ed in a namespace is available when you load the namespace (there is a way to flag a def as private, but meh)</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:21:56.005300</ts>
    <user>Isa</user>
    <text>```
#:foo{:bar 1}
=&amp;gt; #:foo{:bar 1}
(def foo {:bar 1})
=&amp;gt; #'user/foo
#:bar foo ;; how can I achieve it in the simplest way for first level keywords in the map? Something native in Clojure?
```</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:22:39.005800</ts>
    <user>Rosaline</user>
    <text>you have to traverse the map and re-create the keys with the namespace</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:23:07.006300</ts>
    <user>Isa</user>
    <text>ok, so there is no simple way with native solution. Thank you for confirmation.</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:24:08.007300</ts>
    <user>Rosaline</user>
    <text>#:foo{:bar 1} is syntax that works at read time, you are looking for something to happen at runtime</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:24:19.007700</ts>
    <user>Rosaline</user>
    <text>at read time, the symbol foo is the symbol foo</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:24:26.008000</ts>
    <user>Isa</user>
    <text>sure, just wanted to be sure if I didn’t miss something</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:24:58.008600</ts>
    <user>Isa</user>
    <text>Clojure sometimes come with crazy simple solutions with blow up my mind :slightly_smiling_face:</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:25:28.009200</ts>
    <user>Clarine</user>
    <text>probably not recommended, but when hiredman said his last sentence, I though of this:
```
cljs.user=&amp;gt; (cljs.reader/read-string (str "#:foo{:bar 1}"))
#:foo{:bar 1}
```</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:26:06.009600</ts>
    <user>Rosaline</user>
    <text>or, you know, use clojure.walk</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:26:10.009900</ts>
    <user>Isa</user>
    <text>too dirty</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:26:20.010100</ts>
    <user>Clarine</user>
    <text>```
cljs.user=&amp;gt; (defn foo-ize [m] (cljs.reader/read-string (str "#:foo" m)))
#'cljs.user/foo-ize
cljs.user=&amp;gt; (foo-ize {:bar 1})
#:foo{:bar 1}
```</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:26:39.010400</ts>
    <user>Clarine</user>
    <text>yes, dirty, agree :slightly_smiling_face:</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:28:54.011100</ts>
    <user>Guy</user>
    <text>&lt;@Rosaline&gt; so, I do ```(require '[selmer :as s])``` how do i iterate on `s`?</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:29:57.011400</ts>
    <user>Guy</user>
    <text>ho you are saying there isn’t a way</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:31:55.011800</ts>
    <user>Fredda</user>
    <text>&lt;@Isa&gt; something like `explicate` might work &lt;https://github.com/clojure/spec-alpha2/blob/master/src/main/clojure/clojure/spec_alpha2.clj#L334&gt;</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:32:05.012100</ts>
    <user>Clarine</user>
    <text>&lt;@Guy&gt; do you mean something like:
```
cljs.user=&amp;gt; (require '[planck.http :as p])
cljs.user=&amp;gt; (ns-publics 'planck.http)
{put #'planck.http/put, get #'planck.http/get, patch #'planck.http/patch, delete #'planck.http/delete, head #'planck.http/head, post #'planck.http/post}
```</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:33:41.012300</ts>
    <user>Isa</user>
    <text>Thanks. In the meantime I got an idea how to solve my issue on form level in UI :slightly_smiling_face:</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:34:58.014700</ts>
    <user>Dann</user>
    <text>I could imagine something more general that lists definitions in all files in some dep, I don't know if there's a tool that does that though</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:36:50.016000</ts>
    <user>Isa</user>
    <text>&lt;@Guy&gt; I don’t know the answer but you can see how clojure editors make hints for functions in namespace when you are writing `alias/my-fuction`</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:37:17.016400</ts>
    <user>Isa</user>
    <text>at least it should be accessible in REPL</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:37:34.016600</ts>
    <user>Clarine</user>
    <text>hi &lt;@Maren&gt; :slightly_smiling_face:</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:39:10.017000</ts>
    <user>Guy</user>
    <text>&lt;@Clarine&gt; ah yes nice</text>
  </message>
  <message conversation_id="802">
    <ts>2019-03-14T15:42:08.017400</ts>
    <user>Isa</user>
    <text>`(keyword (name :foo/bar))` no 1 function to get `:bar`?</text>
  </message>
  <message conversation_id="803">
    <ts>2019-03-14T15:42:38.017700</ts>
    <user>Becki</user>
    <text>`(comp name keyword)`</text>
  </message>
  <message conversation_id="803">
    <ts>2019-03-14T15:42:43.017900</ts>
    <user>Becki</user>
    <text>1 function :slightly_smiling_face:</text>
  </message>
  <message conversation_id="803">
    <ts>2019-03-14T15:43:01.018400</ts>
    <user>Becki</user>
    <text>or backwards. `(comp keyword name)`</text>
  </message>
  <message conversation_id="804">
    <ts>2019-03-14T16:54:31.018800</ts>
    <user>Sixta</user>
    <text>it is coming from cider-nrepl. mr.anderson isn't causing the issue, it's just a tool for inlining other deps, dynapath in this case.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:44:14.020700</ts>
    <user>Guy</user>
    <text>I am playing with sierras-component. My system component starts web server, db etc. how does compojure handler gets access to db connection instance?</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:46:14.021500</ts>
    <user>Tiffanie</user>
    <text>Anyone have luck getting Log4j2 JsonLayout working that actually outputs JSON in the `message` field?</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:48:34.021700</ts>
    <user>Celestine</user>
    <text>&lt;@Guy&gt; What I typically do is to have middleware that accepts the system component and puts it into the Ring `req`uest as `:app/system` for example, then each handler function can access it as `(-&amp;gt; req :app/system :database)` or something similar.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:50:17.021900</ts>
    <user>Celestine</user>
    <text>(and then I wrap that middleware around my routes as part of the Ring setup in the web server startup)</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:51:12.022100</ts>
    <user>Guy</user>
    <text>ok, so, you are creating a higher order fn</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:51:34.022300</ts>
    <user>Celestine</user>
    <text>That's what middleware is.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:52:27.022500</ts>
    <user>Celestine</user>
    <text>`(defn add-system [handler system] (fn [req] (handler (assoc req :app/system system))))`</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:53:30.022700</ts>
    <user>Celestine</user>
    <text>Then `(-&amp;gt; routes (add-system system) (other-middleware))` is how you build the app that you pass to the web server.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:54:43.022900</ts>
    <user>Celestine</user>
    <text>So I typically have an "application" component and a separate "webserver" component that has "application" as a dependency, so that when it `start`s, it can pass in the (already started) application component.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:54:46.023100</ts>
    <user>Celestine</user>
    <text>Does that make sense?</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:54:50.023300</ts>
    <user>Guy</user>
    <text>got it.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:55:42.023500</ts>
    <user>Celestine</user>
    <text>I tend to have a component for each "subsystem" that needs to be "started". So I'll have a DB component that builds a pooled datasource from the db-spec, and that DB component would be a dependency of the app component and so on.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:55:52.023700</ts>
    <user>Celestine</user>
    <text>That's where the real power of Component comes in.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:56:22.023900</ts>
    <user>Guy</user>
    <text>I was looking at the example here: &lt;http://www.luminusweb.net/docs/migrations.html&gt;

search for `*db*`</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:57:00.024100</ts>
    <user>Guy</user>
    <text>what they are doing there is, they are pinning the instance to a dynamic var and importing that everywhere.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:57:34.024300</ts>
    <user>Dann</user>
    <text>one of the main points of component is not doing that</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T18:58:59.024500</ts>
    <user>Guy</user>
    <text>right.</text>
  </message>
  <message conversation_id="805">
    <ts>2019-03-14T19:00:17.024700</ts>
    <user>Clarine</user>
    <text>I second &lt;@Celestine&gt;’s approach by adding it via a middleware. We do something like this in yada too.</text>
  </message>
  <message conversation_id="806">
    <ts>2019-03-14T20:51:18.026200</ts>
    <user>Antione</user>
    <text>&lt;@Tiffanie&gt; got any more info?</text>
  </message>
  <message conversation_id="806">
    <ts>2019-03-14T20:52:22.027600</ts>
    <user>Antione</user>
    <text>What does the config look like, what is it named, does it not work locally, when jarred up, what is in the message field if anything, etc. etc.</text>
  </message>
  <message conversation_id="806">
    <ts>2019-03-14T20:54:45.028700</ts>
    <user>Liliana</user>
    <text>is there any way to reify dynamically?
```
(defn my-reifier [classname]
(fn [f]
  (reify classname
        (invoke [args] (apply f args))))
```
There's a code that I'm trying to get running with AOT, and there's some series of eval that's preventing it from happening.</text>
  </message>
  <message conversation_id="806">
    <ts>2019-03-14T21:04:48.029000</ts>
    <user>Dann</user>
    <text>you could do that in a macro</text>
  </message>
  <message conversation_id="806">
    <ts>2019-03-14T21:05:39.029900</ts>
    <user>Dann</user>
    <text>```(defmacro my-reifier [classname f] `(reify ...))```</text>
  </message>
  <message conversation_id="806">
    <ts>2019-03-14T21:06:22.030400</ts>
    <user>Dann</user>
    <text>you likely need eval to retain the same functional abstraction</text>
  </message>
  <message conversation_id="806">
    <ts>2019-03-14T21:08:50.031800</ts>
    <user>Liliana</user>
    <text>yes the args as args# gensym doesn't seem to work well. I think all in all I'll abandon this idea. This is the clj-native library I'm trying to hack, and there are already much better ways to interact with jna than with this eval soup.</text>
  </message>
  <message conversation_id="806">
    <ts>2019-03-14T21:10:41.032500</ts>
    <user>Liliana</user>
    <text>like loading library into a gen-interface, seems to make the symbols predictable, rather that converting the name of the classname from string to a variable.</text>
  </message>
  <message conversation_id="807">
    <ts>2019-03-15T08:50:35.035600</ts>
    <user>Chester</user>
    <text>is this supposed to be happening?
```
(ns myns
  (:require
    [clojure.core.match :as m]
    [clojure.core.match.regex])

(let [a {:a :b}]
  (m/match [a]
    [{:a #"arst.*"}] 1
    :else 2))
Execution error (ClassCastException) at myns/eval13037 (form-init1389493813015240111.clj:2).
clojure.lang.Keyword cannot be cast to java.lang.CharSequence
```
shouldn't this, like, just not match?</text>
  </message>
  <message conversation_id="807">
    <ts>2019-03-15T10:28:30.036700</ts>
    <user>Britta</user>
    <text>&lt;@Chester&gt; you didn’t close your `ns` form</text>
  </message>
  <message conversation_id="808">
    <ts>2019-03-15T11:12:07.037300</ts>
    <user>Bart</user>
    <text>anybody got a nice way of listing all files in a given classpath directory?</text>
  </message>
  <message conversation_id="806">
    <ts>2019-03-15T11:12:29.037600</ts>
    <user>Bart</user>
    <text>perhaps even all files of a given extension while we're at it</text>
  </message>
  <message conversation_id="809">
    <ts>2019-03-15T11:37:36.037700</ts>
    <user>Tiffanie</user>
    <text>My base code is all here:
&lt;https://github.com/defndaines/argo&gt;
But I’ve been having trouble finding examples of people actually using this feature, even in Java. When I look at the original PR, it only tests passing a simple value (integer) and not a more complex map-structure or anything.</text>
  </message>
  <message conversation_id="809">
    <ts>2019-03-15T11:51:36.038200</ts>
    <user>Leeann</user>
    <text>&lt;https://clojuredocs.org/clojure.core/file-seq&gt;</text>
  </message>
  <message conversation_id="809">
    <ts>2019-03-15T11:55:29.038500</ts>
    <user>Jasmine</user>
    <text>classpath implies resources, not files</text>
  </message>
  <message conversation_id="809">
    <ts>2019-03-15T11:55:42.038900</ts>
    <user>Jasmine</user>
    <text>and I don't think there is any such support for resources</text>
  </message>
  <message conversation_id="809">
    <ts>2019-03-15T11:55:48.039100</ts>
    <user>Jasmine</user>
    <text>in the most general sense</text>
  </message>
  <message conversation_id="809">
    <ts>2019-03-15T11:56:21.039500</ts>
    <user>Jasmine</user>
    <text>but if you can detect the resource is really a dir, then you can fall back to files</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:47:27.042400</ts>
    <user>Dann</user>
    <text>&lt;@Bart&gt; if you search for "list resources java" there's examples of listing every resource visible inside a given classpath entry - for a folder on disk that corresponds to files in a directory</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:47:45.043000</ts>
    <user>Dann</user>
    <text>of course for physical directories there's also file-seq (and now I see that was already suggested)</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:48:09.043400</ts>
    <user>Bart</user>
    <text>yeah, if i can just get the directory i can use file-seq</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:48:53.044700</ts>
    <user>Bart</user>
    <text>but how to easily get the (context independent) root of your classpath?</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:49:01.045100</ts>
    <user>Dann</user>
    <text>there's no such thing</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:49:06.045400</ts>
    <user>Dann</user>
    <text>a class path is a list of roots</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:50:13.046100</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (System/getProperty "java.class.path")
"src:/Users/justin.smith/.m2/repository/org/clojure/clojure/1.10.0/clojure-1.10.0.jar:/Users/justin.smith/.m2/repository/org/clojure/spec.alpha/0.2.176/spec.alpha-0.2.176.jar:/Users/justin.smith/.m2/repository/org/clojure/core.specs.alpha/0.2.44/core.specs.alpha-0.2.44.jar"```</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:51:09.046800</ts>
    <user>Bart</user>
    <text>i mean, the problem i'm trying to solve is letting people stuff some resources in a given directory that gets built into the JAR</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:51:21.047200</ts>
    <user>Bart</user>
    <text>and the app should just read the contents of that directory</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:51:44.047900</ts>
    <user>Dann</user>
    <text>OK, than you want to list all resources under that directory, which should be a child of a classpath entry (your root jar for example)</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:52:09.048800</ts>
    <user>Bart</user>
    <text>and i'd prefer to avoid having hardcoded references to the files in the code as well (though that would fix the problem since you would then know the full path)</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:52:14.049000</ts>
    <user>Dann</user>
    <text>then if you have them put it in "foo/", ask the classpath resource finders for all resources under "foo/"</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:52:57.049800</ts>
    <user>Dann</user>
    <text>I think I have a clojure translation of that java code that lists resources under a path, one moment...</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:53:13.050100</ts>
    <user>Bart</user>
    <text>and i'd have to implement this resource finder myself? it doesn't seem to exist in the standard libraries</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:53:39.050700</ts>
    <user>Dann</user>
    <text>right, strangely enough it isn't in any lib I know of, but it's only four lines of code or so</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:54:41.051000</ts>
    <user>Bart</user>
    <text>None</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:55:03.051600</ts>
    <user>Bart</user>
    <text>that's the code i have right now, which obviously works just fine locally</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:55:31.052300</ts>
    <user>Bart</user>
    <text>what i need next is a context agnostic path for the server environment</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:55:42.052600</ts>
    <user>Dann</user>
    <text>yeah, the code for listing things inside resources is trickier</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:56:24.053200</ts>
    <user>Bart</user>
    <text>i'm looking at this now &lt;https://stackoverflow.com/questions/3923129/get-a-list-of-resources-from-classpath-directory&gt;, which was maybe what you referred to initially</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:57:06.053500</ts>
    <user>Dann</user>
    <text>&lt;https://stackoverflow.com/a/22363700&gt; - clojure solution</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:58:00.054700</ts>
    <user>Dann</user>
    <text>looks like you can hand it a jar file and list things inside, from there you could filter, and given that classpath will have all your visible jars, you can iterate and check them all...</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:59:28.056300</ts>
    <user>Rosaline</user>
    <text>using mapv like that is real gross</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:59:42.056600</ts>
    <user>Bart</user>
    <text>hm. feels weird that this would be such an ... intractable problem</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T13:59:53.056900</ts>
    <user>Rosaline</user>
    <text>you can't list resources on the classpath</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:00:11.057700</ts>
    <user>Jasmine</user>
    <text>classpath is not even the starting point to this story</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:00:14.057800</ts>
    <user>Rosaline</user>
    <text>you can only access resource via classloaders, classloaders provide a key/value like interface</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:00:42.058400</ts>
    <user>Jasmine</user>
    <text>the JVM has a hierarchy of classloaders, each of which can find resources based on arbitrary means</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:01:08.059300</ts>
    <user>Jasmine</user>
    <text>the classpath is just a list of roots for the system classloader to use</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:01:29.059800</ts>
    <user>Jasmine</user>
    <text>and can be made up of dirs, jars, etc by  default</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:02:45.061400</ts>
    <user>Jasmine</user>
    <text>but the provided URLClassloader can handle anything  you can make a URL for, which is itself a protocol open for extension</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:02:52.061600</ts>
    <user>Rosaline</user>
    <text>the general solution is to build some kind of manifest file with a well known name that contains a list of the resources</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:04:27.062900</ts>
    <user>Bart</user>
    <text>yes, that was the "fallback" solution I was thinking of. listing the resources so i can just map them as `(io/resource)`</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:05:08.064400</ts>
    <user>Jasmine</user>
    <text>the whole class loading / resource loading mechanism is intentionally built to not require enumerability -  it's like a map (keyed by resource name), not a seq.</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:05:21.064700</ts>
    <user>Bart</user>
    <text>otherwise i'd have to iterate through the entire classpath until I hit the directory i'm looking for</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:05:29.065000</ts>
    <user>Bart</user>
    <text>which leads to stuff like this</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:05:35.065200</ts>
    <user>Jasmine</user>
    <text>there are various classpath scanning libraries out there</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:05:40.065300</ts>
    <user>Bart</user>
    <text>None</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:06:31.066400</ts>
    <user>Jasmine</user>
    <text>stuff like &lt;https://github.com/classgraph/classgraph&gt;</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:06:57.066900</ts>
    <user>Jasmine</user>
    <text>^^ that has functions to do what you're asking for example (all  resources that match a path)</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:07:38.067700</ts>
    <user>Jasmine</user>
    <text>good list of alternatives in the readme too</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:08:19.067900</ts>
    <user>Rosaline</user>
    <text>but it isn't a general solution, because not all classloaders can be scanned</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:09:13.068200</ts>
    <user>Jasmine</user>
    <text>yep</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:09:28.068700</ts>
    <user>Jasmine</user>
    <text>but if it's stuff "on the classpath", that's a pretty good answer</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:11:08.070300</ts>
    <user>Rosaline</user>
    <text>yeah, like, if you are backed in to a corner by something else, I would look at that, but if you are building something from scratch as a library, code that other people might consume, it is far better not to rely on something like that, because at some point it will break for someone (maybe you)</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:16:35.073600</ts>
    <user>Jonelle</user>
    <text>```(defprotocol XMLParsable
  (parse-xml [this]))


(extend-protocol XMLParsable
  (Class/forName "[B")
  (xml-parse [xml-bytes] (with-open [r (io/reader xml-bytes)] (xml/parse r)))

  File
  (xml-parse [xml-file] (with-open [r (io/reader xml-file)] (xml/parse r)))

  String
  (xml-parse [xml-str] (xml/parse-str xml-str)))```

why doesn’t this work?  `Don't know how to create ISeq from: java.lang.Character`
I know i’ve used `Class/forName` to extend a protocol before</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:17:23.074700</ts>
    <user>Rosaline</user>
    <text>you have to def it, if I recall</text>
  </message>
  <message conversation_id="811">
    <ts>2019-03-15T14:17:43.075100</ts>
    <user>Jonelle</user>
    <text>like so? `(def Bytes (Class/forName "[B"))`</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:17:48.075300</ts>
    <user>Rosaline</user>
    <text>sure</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:17:55.075600</ts>
    <user>Rosaline</user>
    <text>it has been a while</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:18:10.075900</ts>
    <user>Jonelle</user>
    <text>I tried that and I get `Unable to resolve classname: Bytes`</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:19:06.076700</ts>
    <user>Jonelle</user>
    <text>I just came across  this SO answer that says it has to be the first class &lt;https://stackoverflow.com/questions/13924842/extend-clojure-protocol-to-a-primitive-array&gt;</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:19:56.077700</ts>
    <user>Jonelle</user>
    <text>which seems to work, but i’m assuming that’s a bug? or at least I don’t understand why it would have to be first</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:24:52.079100</ts>
    <user>Rosaline</user>
    <text>I don't think classes for array types were considered when the extend-protocol macro was written, and it just happens to work in certain ways, and people have just limped along on that</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:26:46.079400</ts>
    <user>Jasmine</user>
    <text>there's a ticket for t his</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:27:00.079800</ts>
    <user>Jasmine</user>
    <text>we've come back to it  a few times but never gotten it over the  line</text>
  </message>
  <message conversation_id="810">
    <ts>2019-03-15T14:27:52.080000</ts>
    <user>Jasmine</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1381&gt;</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:36:14.081400</ts>
    <user>Onita</user>
    <text>hey everyone, i’m interested in creating a data structure that is identical to a map, except behaves well with keys that are raw bytes.</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:36:24.081700</ts>
    <user>Onita</user>
    <text>is this feasible in clojure? what would it entail?</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:36:39.082000</ts>
    <user>Dann</user>
    <text>why would a map misbehave if a key were a byte?</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:37:09.082600</ts>
    <user>Onita</user>
    <text>based on my last experiment, equality doesn’t seem to work as i would expect</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:37:30.083100</ts>
    <user>Onita</user>
    <text>so merging two maps containing a key `(.getBytes "foo")` results in two keys</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:37:44.083500</ts>
    <user>Dann</user>
    <text>oh you mean arrays of bytes</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:37:47.083800</ts>
    <user>Onita</user>
    <text>so i’ve written a function called `bytes=`</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:37:48.084000</ts>
    <user>Onita</user>
    <text>yeah</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:37:51.084200</ts>
    <user>Dann</user>
    <text>yeah, those use pointer equality by default</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:38:05.084700</ts>
    <user>Onita</user>
    <text>right. so all i really need to do is change how equality is handled. “all”</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:38:23.085400</ts>
    <user>Dann</user>
    <text>the easy option is to use vec on the keys (it's cheap on an array and safe if you don't mutate)</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:38:42.085800</ts>
    <user>Jasmine</user>
    <text>for Clojure maps,  you can't change that</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:38:45.086100</ts>
    <user>Jasmine</user>
    <text>but there are various Java map implementations that can use identity or custom equality for  maps</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:38:58.086400</ts>
    <user>Jasmine</user>
    <text>guava has lots of options for this</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:39:23.086500</ts>
    <user>Onita</user>
    <text>sorry, could you elaborate?</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:39:47.087200</ts>
    <user>Onita</user>
    <text>cool, so then in theory i could wrap it as an associative collection to use with `merge`, for example</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:39:51.087300</ts>
    <user>Dann</user>
    <text>(vec b) makes a vector, it's cheap as it reuses the array, it has value rather than pointer equality</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:40:20.087500</ts>
    <user>Onita</user>
    <text>oh, that’s super cool, did not know that</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:40:33.087700</ts>
    <user>Onita</user>
    <text>thanks</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:40:40.087900</ts>
    <user>Dann</user>
    <text>and there's a method to get the backing array back out - also should be safe if you don't touch the vector other than comparison / reading</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:41:00.088300</ts>
    <user>Jasmine</user>
    <text>or  rather, you can just use IdentityHashMap  in the  jdk &lt;https://docs.oracle.com/javase/8/docs/api/java/util/IdentityHashMap.html&gt;</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:41:36.089100</ts>
    <user>Jasmine</user>
    <text>I think if you made two IdentityHashMaps and called `merge` on them in Clojure, it would do what you want</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:41:49.089700</ts>
    <user>Dann</user>
    <text>with any of the options mentioned, using value semantics plus any change to the array would have bad and wrong results</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:42:05.090000</ts>
    <user>Jasmine</user>
    <text>who would do such a monstrous thing :)</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:42:27.090500</ts>
    <user>Onita</user>
    <text>why, me of course</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:42:31.090800</ts>
    <user>Jasmine</user>
    <text>well, I guess you really want custom equality, not identity</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:42:40.091200</ts>
    <user>Onita</user>
    <text>right</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:42:41.091300</ts>
    <user>Jasmine</user>
    <text>so  IdentityHashMap isn't what you want</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:43:14.091900</ts>
    <user>Jasmine</user>
    <text>but same principle - if you can  find  a Java map impl with custom equality, then that's good  enough</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:43:48.092900</ts>
    <user>Jasmine</user>
    <text>you will need to be careful not t o mix those  with Clojure maps  though  or you're likely to have surprising things happen (like using Clojure equality semantics)</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:44:07.093400</ts>
    <user>Dann</user>
    <text>I think value equality and treating the keys as immutable is called for here, so why not just call vec on each byte-array before insertion / lookup?</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:44:45.094000</ts>
    <user>Onita</user>
    <text>yeah, i think that’s looking like my best option</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:45:11.094800</ts>
    <user>Onita</user>
    <text>although all this leads me to think i’ve made a wrong turn in my design choices to this point. so maybe i’ll have another look at that</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:45:29.095500</ts>
    <user>Onita</user>
    <text>all the same, appreciate the help</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:45:49.096000</ts>
    <user>Rosaline</user>
    <text>bytebuffer has slightly better behavior has a key</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:46:28.096700</ts>
    <user>Rosaline</user>
    <text>&lt;https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#equals(java.lang.Object)&gt;</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:47:47.097700</ts>
    <user>Rosaline</user>
    <text>depend on what you want raw bytes for, you might look at `(vector-of :byte)`</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:49:09.097900</ts>
    <user>Guy</user>
    <text>is there a replacement for clj-refactor? It is painful to keep typing the namespace. I couldn’t get clj-refactor to work with cider 21 and clojure 1.10</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:49:12.098100</ts>
    <user>Onita</user>
    <text>hm, interesting</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:50:10.099200</ts>
    <user>Rosaline</user>
    <text>I haven't used gvec much, I kind of find the ease of interop as a regular clojure vector alarming, I might accidentally lose my precious specialized vector of bytes</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:51:57.100200</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/hiredman/vbuffer&gt; is a thing that I kind of doubt is very useful in its self, but it might be some interesting wreckage to pick through</text>
  </message>
  <message conversation_id="812">
    <ts>2019-03-15T17:56:46.101100</ts>
    <user>Jasmine</user>
    <text>vector-of might be interesting thing to try here.  note that getting values from the vector will incur boxing</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T21:42:30.103600</ts>
    <user>Marylin</user>
    <text>can i require a namespace from a string, outside of the `ns` form? like, a message queue says “handle this task with function `f` in namespace `a.b.c`” - my mq handler says `(require '["a.b.c" :as executor])` or somesuch?</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T21:46:27.104300</ts>
    <user>Celestine</user>
    <text>&lt;@Marylin&gt; Yes, you can turn the string into a symbol and call the `require` function.</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T21:48:11.104500</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (require [(symbol "clojure.set") :as 'q])
nil
user=&amp;gt; (q/union #{1} #{2})
#{1 2}```</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T21:49:41.105100</ts>
    <user>Marylin</user>
    <text>awesome, thanks &lt;@Celestine&gt; - my personal clojurians slack guardian angel</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T21:49:56.105300</ts>
    <user>Celestine</user>
    <text>I just have no life :slightly_smiling_face:</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T21:50:02.105500</ts>
    <user>Marylin</user>
    <text>ha</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T21:51:21.106000</ts>
    <user>Marylin</user>
    <text>while i’m here, does anyone know of a task queue implementation any higher level than carmine message queue?</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T21:51:34.106300</ts>
    <user>Marylin</user>
    <text>like, priorities on the tasks, etc</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T22:00:37.106700</ts>
    <user>Celestine</user>
    <text>Carmine is just a wrapper for Redis, isn't it?</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T22:01:08.107500</ts>
    <user>Marylin</user>
    <text>yep, a little on top</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T22:01:45.108100</ts>
    <user>Celestine</user>
    <text>Maybe you'd want RabbitMQ and priority queues? Not sure if Langohr supports that aspect of RMQ?</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T22:01:47.108300</ts>
    <user>Marylin</user>
    <text>i mean, it has a message queue support</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T22:03:04.108800</ts>
    <user>Celestine</user>
    <text>Yeah, Redis is pretty basic tho', right?</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T22:03:41.109300</ts>
    <user>Marylin</user>
    <text>it is - there’s also this: &lt;https://github.com/b-ryan/farmhand&gt; , but it looks moderately abandoned (the webpage doesn’t work anymore…)</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T22:04:17.109600</ts>
    <user>Celestine</user>
    <text>&lt;https://github.com/gabfl/redis-priority-queue&gt;</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T22:04:48.110100</ts>
    <user>Celestine</user>
    <text>Seems to implement priority queues on Redis via the Lua scripting support...?</text>
  </message>
  <message conversation_id="813">
    <ts>2019-03-15T22:08:02.110700</ts>
    <user>Marylin</user>
    <text>ah! maybe i could use that - good idea</text>
  </message>
  <message conversation_id="814">
    <ts>2019-03-16T03:32:07.112200</ts>
    <user>Sheron</user>
    <text>any good links for maintained and working   larger-than-memory collections library for clojure ? (something that would keep maps or vectors efficiently on disk (as a temporary storage, not a full blown database))  i found spicerack   (and an apparently abandoned clj-mapdb)</text>
  </message>
  <message conversation_id="815">
    <ts>2019-03-16T05:08:40.112300</ts>
    <user>Tressa</user>
    <text>that description reminds me of datascript, might worth checking out?</text>
  </message>
  <message conversation_id="815">
    <ts>2019-03-16T05:19:30.112500</ts>
    <user>Stephen</user>
    <text>If you just need key/value rocksdb might be a good fit, &lt;https://github.com/kotyo/clj-rocksdb&gt; is recent, haven't used it myself.</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T05:47:37.112800</ts>
    <user>Stephen</user>
    <text>If performance it not (so) important you could also just write/read files. That's what I did for my current project. Also because With those files it's easy to generate the html files statically.</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T05:49:12.113000</ts>
    <user>Sheron</user>
    <text>rocksdb sort of falls into the same category as spicerack ... if you look under the hood your uberjar jumps by over 10 megabytes in size and you get native extensions ontop :disappointed:</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T05:51:31.113200</ts>
    <user>Sheron</user>
    <text>datascript is also not in the direction i'm looking at</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T05:52:21.113400</ts>
    <user>Stephen</user>
    <text>If the size of the application  is important writing/reading files might not be bad, you don't need any dependencies. It's to bad for the JVM we don't have something like Closure, removing/stripping unused stuff. Using a native image kind of does it, but kan be hard to get it to work.</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T05:53:37.113600</ts>
    <user>Sheron</user>
    <text>handling files on their own is not a problem for me, but i was hoping to skip a set of excess code :slightly_smiling_face:</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T05:56:48.113800</ts>
    <user>Sheron</user>
    <text>it would feel nice to just say something
`(let [persistent-map (make-a-file-backed-transient-map "datafile.dat")] ... )`  for writing things and in a similar way just say that hey, that file there contains a vector of data that i want to process, let's fly through it (obviously with lazy or iterator style functions only) :slightly_smiling_face:</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T05:59:29.114400</ts>
    <user>Epifania</user>
    <text>is there a way of getting the test results from `run-tests` as data rather than it's printing a report to stdout?</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:00:00.114900</ts>
    <user>Sixta</user>
    <text>&lt;@Epifania&gt; yes! this is what cider does, there's a multi-method you can rebind. I think it's clojure.test/report</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:03:03.116500</ts>
    <user>Sixta</user>
    <text>You could do this:

```
(let [events (atom [])]
  (binding [clojure.test/report (fn [evt] (swap! events conj evt))
    (run-tests …)
    @events)))
```</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:03:23.116600</ts>
    <user>Stephen</user>
    <text>I just store/get them as .edn but keeping them all in memory maks it real simple, cause I just need to read on start up, and then I only need a file-sync to keep the files in sync.</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:04:20.116800</ts>
    <user>Stephen</user>
    <text>```(defn- keys-&amp;gt;path
  [k key]
  (str (k file-map) (name key) ".edn"))

(defn- keys-&amp;gt;map
  "fetches the vector from a part, and turns is into a map"
  [k key]
  (let [full-path (keys-&amp;gt;path k key)
        [spec vec-values] (edn/read-string (slurp full-path))]
    [spec (de-ser-vector spec vec-values)]))

(defn- add-reference
  [k map reference]
  (let [reference-map (keys-&amp;gt;map k reference)]
    (assoc map reference reference-map)))

(defn- init-data
  "get the initial data from the file system"
  [k]
  (let [[spec-summary map-summary] (keys-&amp;gt;map k :summary)
        data {:summary [spec-summary map-summary]}]
    (reduce (partial add-reference k) data (keys (second (first map-summary))))))```</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:05:14.117000</ts>
    <user>Stephen</user>
    <text>I also so some stuff with spec to make the data more compact</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:09:07.117200</ts>
    <user>Stephen</user>
    <text>Another trick that's in there is that all the names/keys of the map are in the summary file.</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:13:21.117400</ts>
    <user>Stephen</user>
    <text>You could for example keep the keys in memory, so you now before trying to read if a file exists. And keep a weak reference to it, so when it's required soon after it's still in memory.</text>
  </message>
  <message conversation_id="817">
    <ts>2019-03-16T06:14:19.117900</ts>
    <user>Epifania</user>
    <text>oh, sweet. Thanks a lot &lt;@Sixta&gt;</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:15:18.118100</ts>
    <user>Epifania</user>
    <text>works perfectly! :thumbsup:</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:16:24.118200</ts>
    <user>Stephen</user>
    <text>This might clearify how it's working. Each folder is 'linked' to an atom to keep the content of the folder in sync. The names of the files are the keys in the map of the atom.</text>
  </message>
  <message conversation_id="816">
    <ts>2019-03-16T06:22:16.118900</ts>
    <user>Sixta</user>
    <text>I didn't even test it :see_no_evil: </text>
  </message>
  <message conversation_id="817">
    <ts>2019-03-16T07:00:28.119600</ts>
    <user>Epifania</user>
    <text>&lt;@Sixta&gt; well, to be honest, you missed a `]` in the binding :wink: But in general, the idea works well! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="817">
    <ts>2019-03-16T07:00:42.119900</ts>
    <user>Sixta</user>
    <text>phew! at least the world is right again :slightly_smiling_face:</text>
  </message>
  <message conversation_id="818">
    <ts>2019-03-16T08:15:04.122600</ts>
    <user>Jaimee</user>
    <text>Hi, I have a pipeline that batch processes files (using threadpool for concurrence) and I would like to make an interface that shows the progress for each file individually using &lt;https://github.com/ptaoussanis/sente&gt;
However given that the different files are processed in parallel, is it ok to share the socket across threads and have them all send stuff separately?</text>
  </message>
  <message conversation_id="817">
    <ts>2019-03-16T08:40:15.122800</ts>
    <user>Sheron</user>
    <text>my usage pattern will be indexing through a few gigabytes of data at time, storing the results into about 1 million subbuckets before i store it back to the real storage in batched form from the subbuckets ... it's a long story :smile:</text>
  </message>
  <message conversation_id="817">
    <ts>2019-03-16T08:42:06.123100</ts>
    <user>Sheron</user>
    <text>at first i thought i could open the million files around in the local filesystem but giving it some thought this is probably a terrible idea :slightly_smiling_face: from both the fopen&amp;amp;close overhead and also the local filesystem may not agree</text>
  </message>
  <message conversation_id="817">
    <ts>2019-03-16T10:52:22.125800</ts>
    <user>Tona</user>
    <text>&lt;@Sheron&gt; you might take a look at &lt;http://immutant.org/documentation/current/apidoc/guide-caching.html#h3205&gt;

I have used it outside of a container for larger than memory storage.</text>
  </message>
  <message conversation_id="819">
    <ts>2019-03-16T13:36:23.127100</ts>
    <user>Jeanne</user>
    <text>Can I have something like `dir` but for function internals or let macro ? E.g. is it possible to extract symbols from inside fn?</text>
  </message>
  <message conversation_id="817">
    <ts>2019-03-16T14:48:26.127300</ts>
    <user>Sheron</user>
    <text>o_O but that depends on some fancy jboss infinispan that claims to need 55mb in it's smaller form :smile:</text>
  </message>
  <message conversation_id="820">
    <ts>2019-03-16T16:26:25.128900</ts>
    <user>Jasmine</user>
    <text>You can if you use an analyzer like tools.analyzer on the source</text>
  </message>
  <message conversation_id="821">
    <ts>2019-03-16T19:14:38.129400</ts>
    <user>Jenni</user>
    <text>what is a simple clojure rest server?</text>
  </message>
  <message conversation_id="821">
    <ts>2019-03-16T20:54:45.130500</ts>
    <user>Celestine</user>
    <text>&lt;@Jenni&gt; You might want to look at Ring + Compojure API.</text>
  </message>
  <message conversation_id="821">
    <ts>2019-03-16T21:08:22.130800</ts>
    <user>Jenni</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:33:17.131700</ts>
    <user>Guy</user>
    <text>```(reduce (fn [x [k v]]
                               (str (name k) ":" v)) "foo" {:id 1 :name "foo"})``` =&amp;gt; “name:foo”</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:33:57.132400</ts>
    <user>Guy</user>
    <text>I was expecting this to return “fooid:1name:foo”</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:37:17.132800</ts>
    <user>Guy</user>
    <text>```(reduce (fn [x y]
                               (str x y)) "foo" '(:id 1 :name "foo"))``` =&amp;gt; “foo:id1:namefoo” as expected</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:38:54.133200</ts>
    <user>Guy</user>
    <text>could someone explain me what is the difference here?</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:40:08.134200</ts>
    <user>Guy</user>
    <text>one is a seq and another is a hashmap but both can be iterated</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:42:49.134500</ts>
    <user>Meagan</user>
    <text>in the first one, you never add on to your accumulator `x`</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:43:44.135400</ts>
    <user>Meagan</user>
    <text>so it is just returning the value of the last iteration `(str (name k) ":" v)`</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:44:55.136500</ts>
    <user>Guy</user>
    <text>the reducing fn doesn’t get the accumulator as argument, how do I concat?</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:45:19.137000</ts>
    <user>Guy</user>
    <text>how is that different for the second one?</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:45:36.137300</ts>
    <user>Meagan</user>
    <text>your reducing function does get the accumulator</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:45:45.137600</ts>
    <user>Meagan</user>
    <text>`(fn [x [k v]] ...`</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:45:56.137900</ts>
    <user>Meagan</user>
    <text>x is the accumulator, `[k v]` is the map entry</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:47:52.138200</ts>
    <user>Guy</user>
    <text>ah, I though I was destructing</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:49:05.138700</ts>
    <user>Meagan</user>
    <text>you are destructuring the map entry</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:49:46.139300</ts>
    <user>Meagan</user>
    <text>it helps to give your variables more explicit names</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:50:15.139900</ts>
    <user>Meagan</user>
    <text>```
(fn [accumulator [key value]]
  (str (name key) : value))
```</text>
  </message>
  <message conversation_id="822">
    <ts>2019-03-16T22:51:44.140900</ts>
    <user>Meagan</user>
    <text>when reduce is used on a hashmap, it passes the MapEntry value as the second argument which can be destructured as `[key value]`</text>
  </message>
  <message conversation_id="823">
    <ts>2019-03-17T01:07:06.141200</ts>
    <user>Tressa</user>
    <text>then there's reduce-kv</text>
  </message>
  <message conversation_id="824">
    <ts>2019-03-17T06:46:52.142200</ts>
    <user>Leatha</user>
    <text>Hi
i am using re-natal readme to generate new app (all deps install, and verified that they work)

after doing init i got
```Creating Leiningen project
Updating Leiningen project
Creating React Native skeleton.
Creating Re-Natal config
Compiling ClojureScript
Command failed: lein prod-build
```

so i read &lt;https://github.com/drapanjanas/re-natal/issues/108&gt;
and ran it manually but got this

```Could not transfer artifact re-frame:re-frame:jar:0.10.6 from/to central (&lt;https://repo1.maven.org/maven2/&gt;): Connect to  [localhost/127.0.0.1] failed: Connection refused (Connection refused)
Could not transfer artifact re-frame:re-frame:jar:0.10.6 from/to clojars (&lt;https://repo.clojars.org/&gt;): Connect to  [localhost/127.0.0.1] failed: Connection refused (Connection refused)
Could not transfer artifact re-frame:re-frame:pom:0.10.6 from/to central (&lt;https://repo1.maven.org/maven2/&gt;): Connect to  [localhost/127.0.0.1] failed: Connection refused (Connection refused)
This could be due to a typo in :dependencies, file system permissions, or network issues.
If you are behind a proxy, try setting the 'http_proxy' environment variable```

i am not behind proxy i asked in &lt;#C0E1SN0NM|cljsrn&gt; but they said to look for help here

edit: SOLVED &lt;https://github.com/technomancy/leiningen/issues/2368#issuecomment-451581572&gt;</text>
  </message>
  <message conversation_id="825">
    <ts>2019-03-17T08:29:26.143100</ts>
    <user>Epifania</user>
    <text>for the various `rand` functions like `rand-int`, is it possible to set the seed value somehow?</text>
  </message>
  <message conversation_id="825">
    <ts>2019-03-17T08:36:04.143400</ts>
    <user>Epifania</user>
    <text>looking through the source of clojure, I find no relevant mentions of `seed`</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T09:46:26.144100</ts>
    <user>Jasmine</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1452&gt;</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T09:46:32.144300</ts>
    <user>Jasmine</user>
    <text>Vote!</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T09:54:29.144700</ts>
    <user>Rudolph</user>
    <text>None</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T09:59:15.145100</ts>
    <user>Laurice</user>
    <text>probably what really happened =&amp;gt;</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T10:00:10.145600</ts>
    <user>Laurice</user>
    <text>```&amp;gt; (defrecord ConversionError [key val exception])
&amp;gt; (def -q- (-&amp;gt;ConversionError 1 2 3))

&amp;gt; (defrecord ConversionError [key val exception])
&amp;gt; (def -w- (-&amp;gt;ConversionError 1 2 3))

&amp;gt; (type -q-)
ConversionError

&amp;gt; (type -w-)
ConversionError

&amp;gt; (instance? ConversionError -q-)
false

&amp;gt; (instance? ConversionError -w-)
true```</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T10:01:14.146300</ts>
    <user>Rudolph</user>
    <text>as in the defrecords end up making different types with the same name?</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T10:01:29.146800</ts>
    <user>Rudolph</user>
    <text>if they get eval'ed twice</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T10:02:37.148100</ts>
    <user>Laurice</user>
    <text>yep, you have 2 types with the same name ..   and 2 instances; the 1st from the 1st type and the 2nd from the 2nd type   .. the type name being equal is throwing you off      `(= (class -q-) (class -w-)) =&amp;gt; false`</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T10:04:30.148400</ts>
    <user>Rudolph</user>
    <text>guess I'll rethink what I'm doing there</text>
  </message>
  <message conversation_id="826">
    <ts>2019-03-17T10:05:14.148800</ts>
    <user>Rudolph</user>
    <text>that is also the case</text>
  </message>
  <message conversation_id="827">
    <ts>2019-03-17T10:42:14.151800</ts>
    <user>Derick</user>
    <text>Hello, all!
When using &lt;#CEA3C7UG0|jackdaw&gt; `peek` to process the messages in a `KStream`,  is there any way to get message's offset?</text>
  </message>
  <message conversation_id="828">
    <ts>2019-03-17T14:50:22.152200</ts>
    <user>Mohamed</user>
    <text>how am I supposed to concat two transient vectors?</text>
  </message>
  <message conversation_id="828">
    <ts>2019-03-17T14:51:00.152700</ts>
    <user>Laurice</user>
    <text>IIRC reduce using conj! with 1st vector as `val` arg to reduce  ....actually you might be right; it's not clear how one reduce with a transient as `coll` arg .. hmmm x)</text>
  </message>
  <message conversation_id="828">
    <ts>2019-03-17T14:52:10.152900</ts>
    <user>Mohamed</user>
    <text>ah i see, thanks!</text>
  </message>
  <message conversation_id="828">
    <ts>2019-03-17T14:53:59.153900</ts>
    <user>Laurice</user>
    <text>`(persistent! (reduce conj! (transient [0 1]) (persistent! (transient [2 3]))))`    works of course, if you're ok with the early call to persistent! there (for the 2nd vector)</text>
  </message>
  <message conversation_id="829">
    <ts>2019-03-17T18:19:28.158900</ts>
    <user>Isa</user>
    <text>Any better method to select keys only in `spec`, than macro?
```
(s/def ::person (s/keys :req [::first-name ::last-name ::email]
                        :opt [::phone]))
```

So I want to validate it, but also I want to remove all other keys, which are not specified like `::phone2`, but pass `::phone`, `::first-name` …

I see developers did solutions like here &lt;https://stackoverflow.com/questions/47781002/reuse-structure-definition-code-from-clojure-spec-keys&gt;

Do we have common solution (function, library) which can I use? I can write my own macro to use also namespaced keys, but maybe we already have solution, which I can use :slightly_smiling_face:</text>
  </message>
  <message conversation_id="830">
    <ts>2019-03-17T18:48:55.159400</ts>
    <user>Meagan</user>
    <text>the general wisdom is that this is an antipattern</text>
  </message>
  <message conversation_id="830">
    <ts>2019-03-17T19:25:07.160100</ts>
    <user>Jasmine</user>
    <text>I wouldn’t say that, just that it’s not well supported yet</text>
  </message>
  <message conversation_id="831">
    <ts>2019-03-17T20:46:50.161200</ts>
    <user>Josue</user>
    <text>anyone know why `(bit-test 1 32)` returns false on the JVM and true in CLJS? estoy confundido…</text>
  </message>
  <message conversation_id="831">
    <ts>2019-03-17T20:56:00.162500</ts>
    <user>Josue</user>
    <text>off by one… 31 is the highest bit, not 32. good to know that still happens to me</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T02:41:40.168100</ts>
    <user>Phylicia</user>
    <text>Q: when using fn indirection for development I can use #‘get-person and this allows me to reload get-person from the repl - awesome!
But what if get-person is the result of a higher-order fn call and I still want that indirection? i.e. I want #’(get-person-factory)</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T02:41:49.168300</ts>
    <user>Phylicia</user>
    <text>Is this possible?</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T02:58:26.168600</ts>
    <user>Laurice</user>
    <text>you can call a var as is</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T02:58:53.169200</ts>
    <user>Laurice</user>
    <text>i.e.    `(let [my-fn #'+] (my-fn 3 2))` =&amp;gt; 5      ...maybe answers your Q ..          or maybe you want to go from + to #'+     ?   ..i don't think that's something people generally do, tho i might be wrong</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T03:23:32.170400</ts>
    <user>Phylicia</user>
    <text>I want to return an anonymous fn that behaves as if it was not anonymous and referenced via #'</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T03:25:05.171400</ts>
    <user>Phylicia</user>
    <text>the more I describe this, the more it seems impossible.</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T03:26:23.172100</ts>
    <user>Phylicia</user>
    <text>I had an idea. maybe I can have the anon fn call a #' ref. I’ll try that</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T03:40:18.173200</ts>
    <user>Isa</user>
    <text>&lt;@Phylicia&gt; not sure if I understand your issue, but maybe this help
```
(with-redefs [email/send-email! #(-&amp;gt;&amp;gt; (:body %2)
                                            (re-seq #"(?s)https://.*(/authentication/confirm-email/[a-z0-9-]+)")
                                            (first)
                                            (second)
                                            (reset! email-confirm-url))]
        (is (= 204 (-&amp;gt; (request-auth {:action "sign-up"
                                      :user/email "&lt;mailto:foo@example.com|foo@example.com&gt;"
                                      :user/password "qwaszx"})
                       (get-status)))
            "pass"))
```
`with-redefs` can change `fn` to different one under the hood</text>
  </message>
  <message conversation_id="833">
    <ts>2019-03-18T06:21:45.175400</ts>
    <user>Danna</user>
    <text>If I want to create a size-bounded list of size 50 I could just
```(take 50 (cons new-value size-bounded-list))```
every time I need to add an element
but I am wondering if there is a tidier/more idiomatic way</text>
  </message>
  <message conversation_id="833">
    <ts>2019-03-18T06:57:11.175600</ts>
    <user>Danna</user>
    <text>&lt;https://github.com/clj-commons/ring-buffer&gt;
is the thing</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T09:10:20.176100</ts>
    <user>Shanelle</user>
    <text>Hi there</text>
  </message>
  <message conversation_id="834">
    <ts>2019-03-18T09:54:45.177700</ts>
    <user>Tamisha</user>
    <text>hello, using pedestal, I'm having a problem because I have to deal with big auth tokens, they are causing trouble because the header goes over the size limit (431 (Request Header Fields Too Large)), does someone know how can I increase the max header size for local running pedestal server?</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T10:39:37.178200</ts>
    <user>Marlyn</user>
    <text>I don't think there is a straightforward way to do it</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T10:39:45.178400</ts>
    <user>Marlyn</user>
    <text>But here is a not straightforward way:</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T10:42:12.178600</ts>
    <user>Marlyn</user>
    <text>When you configure the server, pass a configurator to server/start `{:io.pedestal.http/container-options {:context-configurator f}`

In the function, grab the Server, map over .getConnectors, mapcat over .getConnectionFactories, filter the instances of HttpConnectorFactory, get their HttpConfiguration, and setRequestHeaderSize() on it

&lt;https://github.com/pedestal/pedestal/blob/master/jetty/src/io/pedestal/http/jetty.clj#L113-L125&gt;
ideally pedestal could add an option here to expose that config</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T10:42:27.178900</ts>
    <user>Marlyn</user>
    <text>You must be using JWTs :slightly_smiling_face:</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T10:42:52.179100</ts>
    <user>Tamisha</user>
    <text>yes, with ACL included, doesn't scale well... we moved away from it, but still supporting the old cases</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T10:45:40.179300</ts>
    <user>Tamisha</user>
    <text>thanks, I'll try this out</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T11:02:52.180100</ts>
    <user>Tamisha</user>
    <text>&lt;@Marlyn&gt; it worked, thank you so much!</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T11:03:01.180300</ts>
    <user>Tamisha</user>
    <text>and for anyone looking to do it, this is the fn to configure the context:</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T11:03:27.180500</ts>
    <user>Tamisha</user>
    <text>```(defn set-request-header-size [x max-size]
  (-&amp;gt;&amp;gt; x
       (.getServer)
       (.getConnectors)
       (mapcat #(.getConnectionFactories %))
       (filter #(instance? org.eclipse.jetty.server.HttpConnectionFactory %))
       (run! (fn [factory]
               (-&amp;gt; factory
                   (.getHttpConfiguration)
                   (.setRequestHeaderSize max-size))))))```</text>
  </message>
  <message conversation_id="832">
    <ts>2019-03-18T11:03:40.180700</ts>
    <user>Marlyn</user>
    <text>cool</text>
  </message>
  <message conversation_id="835">
    <ts>2019-03-18T12:09:26.181300</ts>
    <user>Emmie</user>
    <text>Did the URL for the Slack archives change? I'm not able to browse the archives via &lt;https://clojurians-log.clojureverse.org/&gt;</text>
  </message>
  <message conversation_id="835">
    <ts>2019-03-18T12:15:14.181800</ts>
    <user>Clarine</user>
    <text>I guess it was taken offline due to some privacy concerns</text>
  </message>
  <message conversation_id="835">
    <ts>2019-03-18T12:30:14.182800</ts>
    <user>Emmie</user>
    <text>Thanks &lt;@Clarine&gt; I hope something like it comes up again :disappointed: that was a good resource for documentation :slightly_smiling_face:</text>
  </message>
  <message conversation_id="835">
    <ts>2019-03-18T12:31:05.183500</ts>
    <user>Clarine</user>
    <text>The current suggestion is to move the community to Zulip because there all history is preserved. In fact, they are also saving these Slack chats there via some bot.</text>
  </message>
  <message conversation_id="835">
    <ts>2019-03-18T12:42:52.184500</ts>
    <user>Emmie</user>
    <text>Oh cool, I've heard about Zulip, are the messages here being replicated there currently?</text>
  </message>
  <message conversation_id="836">
    <ts>2019-03-18T12:44:20.185800</ts>
    <user>Fairy</user>
    <text>Not that I would actually do this, but if one were to leave an NREPL port open on a public instance, has anyone heard of hackers scanning for that port and if so, would they know to use a Clojure interpreter and would it be possible to pull in all the namespaces, functions, etc ?</text>
  </message>
  <message conversation_id="836">
    <ts>2019-03-18T12:50:22.186800</ts>
    <user>Jasmine</user>
    <text>with regard to the last, yes all state in the Clojure runtime is globally accessible. repl access should be controlled.</text>
  </message>
  <message conversation_id="836">
    <ts>2019-03-18T13:09:36.187600</ts>
    <user>Marlyn</user>
    <text>&lt;@Fairy&gt; make sure the port isn't listening on all interfaces, and make people use SSH forwarding to reach it</text>
  </message>
  <message conversation_id="835">
    <ts>2019-03-18T13:29:21.189200</ts>
    <user>Ciara</user>
    <text>&lt;@Emmie&gt; the slack-archive can be found at &lt;https://clojurians.zulipchat.com/#narrow/stream/180378-slack-archive&gt;</text>
  </message>
  <message conversation_id="835">
    <ts>2019-03-18T13:29:40.189500</ts>
    <user>Emmie</user>
    <text>Thank you!</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T15:58:53.193200</ts>
    <user>Muriel</user>
    <text>Is anyone attending Clojure North in Toronto? If so, you can meet the author of &lt;https://www.metosin.fi/blog/faster-and-friendlier-routing-with-reitit030&gt;. He's in a group that created Tilakone Finite State Machine, too.</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:01:42.194100</ts>
    <user>Clarine</user>
    <text>I’m also looking forward to the Juxt talk, introducing a new DB. Lots of exciting stuff in April I guess. Have fun over there!</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:03:35.195400</ts>
    <user>Cira</user>
    <text>I have a set of scored pairs as below and would like to identify the set of pairs that produce the highest score in total:
```
{#{0 1} 0.98,
 #{0 3} 0.62,
 #{1 3} 0.71,
 #{1 2} 0.01,
 #{0 2} 0.89,
 #{3 2} 0.16}
```
I assume this is a solved problem but am not sure what I should be searching for. If anyone could point me in the right direction that would be very appreciated :slightly_smiling_face: (guess maybe I should have gone to uni after all :smile:)</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:05:19.196000</ts>
    <user>Danyell</user>
    <text>cant you just sort the map and get the first two?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:06:48.196400</ts>
    <user>Clarine</user>
    <text>I might be understanding the problem wrong, but this returns:
```
(apply max-key val sp)
[#{0 1} 0.98]
```</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:08:07.197800</ts>
    <user>Cira</user>
    <text>&lt;@Danyell&gt; &lt;@Clarine&gt; probably doing a bad job at explaining :smile: The list above contains all permutations(?) of 4 items. I want to find the two pairs that produce the highest total value. N might be higher than 4 :slightly_smiling_face:</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:09:06.198800</ts>
    <user>Clarine</user>
    <text>or is this like x0 + x1 = 0.98, x0 + x3 = 0.62, … find max(xi + xj)?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:10:10.199500</ts>
    <user>Clarine</user>
    <text>from the above it’s not entirely clear what the equation is, it could also be x0*x1, etc.?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:12:30.199700</ts>
    <user>Clarine</user>
    <text>&lt;https://www.wolframalpha.com/input/?i=solve+x0+%2B+x1+%3D+0.98,+x0+%2B+x3+%3D+0.62,+x1+%2B+x3+%3D+0.71&gt;</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:18:36.201000</ts>
    <user>Danyell</user>
    <text>Yea I am not quite getting it then</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:20:53.201700</ts>
    <user>Cira</user>
    <text>the score is `score(pair)`. In the example above the optimal solution would be `[#{1 3} #{0 2}]` because the sum for the score of these pairs is the maximum that can be achieved</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:21:41.202300</ts>
    <user>Clarine</user>
    <text>ah, so that fact that these are sets of numbers is irrelevant?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:22:14.202600</ts>
    <user>Clarine</user>
    <text>then yes, you can simply sort and take the first two</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:23:08.204200</ts>
    <user>Dann</user>
    <text>but there has to be more to it, as #{0 1} had a high score and was ruled out</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:23:10.204300</ts>
    <user>Cira</user>
    <text>&lt;@Clarine&gt; sorting won't work because it might return an invalid result like `[#{1 3} #{0 1}]`</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:23:28.204900</ts>
    <user>Clarine</user>
    <text>ah so the sets have to be distinct</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:23:32.205200</ts>
    <user>Dann</user>
    <text>OK so you can only use a number once in the key sets?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:23:36.205400</ts>
    <user>Cira</user>
    <text>yes</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:24:59.206200</ts>
    <user>Clarine</user>
    <text>and there is no way to calculate the individual contribution of each id?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:25:20.206500</ts>
    <user>Cira</user>
    <text>no, they are always in relation to another</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:25:35.206900</ts>
    <user>Clarine</user>
    <text>nice Advent of Code puzzle :wink:</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:26:02.207800</ts>
    <user>Cira</user>
    <text>Glad to hear this is half-entertaining :smile:</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:26:57.208700</ts>
    <user>Isa</user>
    <text>```
(s/def ::address (s/keys :req-un [::recipient ::country ::postal-code ::city ::street]
                         :opt-un [::house-nr ::flat-nr ::phone]))
```
I want to write macro. How can I get by `::address` all keys from it?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:27:15.209000</ts>
    <user>Isa</user>
    <text>Is it possible to read this from macro definition?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:28:05.209700</ts>
    <user>Cira</user>
    <text>&lt;@Isa&gt; does it need to be a macro? this might be easier to extract from the spec registry</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:28:27.210200</ts>
    <user>Clarine</user>
    <text>&lt;@Cira&gt; I think you must enumerate all partitions of #{1 2 3 4} in subsets of two and then calculate the score of the partition and then take the max</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:28:46.210300</ts>
    <user>Isa</user>
    <text>whatever, If I can to id in fn, I can do it in macro. But how to get this data from `s/def`?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:29:19.210500</ts>
    <user>Cira</user>
    <text>take a look at `get-spec` (I think that's what it's called)</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:30:23.210700</ts>
    <user>Isa</user>
    <text>```
(s/get-spec ::address)
=&amp;gt;
#object[clojure.spec.alpha$map_spec_impl$reify__1997 0x29848e69 "clojure.spec.alpha$map_spec_impl$reify__1997@29848e69"]
```</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:31:17.211700</ts>
    <user>Hae</user>
    <text>is there any way to call getBasis() on a record without knowing the type of the record? I’m trying this, but it’s giving me an exception:
```(defrecord TestComposite [a b])
(let [x (TestComposite. "HI" 1)]
  (.getBasis ^clojure.lang.IRecord x))
```</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:31:18.211800</ts>
    <user>Isa</user>
    <text>hmm how to get keys from it?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:31:41.212100</ts>
    <user>Hae</user>
    <text>```IllegalArgumentException No matching method found: getBasis for class user.TestComposite  clojure.lang.Reflector.invokeMatchingMethod (Reflector.java:53)
```</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:31:44.212300</ts>
    <user>Hae</user>
    <text>is the error</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:32:04.212700</ts>
    <user>Dann</user>
    <text>is getBasis something you call on the instance, or the class?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:32:13.212900</ts>
    <user>Hae</user>
    <text>it’s on the class</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:32:23.213400</ts>
    <user>Dann</user>
    <text>than call it on the class of x</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:32:24.213600</ts>
    <user>Hae</user>
    <text>but i get a different exception when I try to call it on (class x)</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:33:37.213900</ts>
    <user>Cira</user>
    <text>I think `(meta (get-spec ,,,))` or something like that</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:33:39.214200</ts>
    <user>Isa</user>
    <text>`(s/form (s/get-spec ::address))`</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:33:39.214400</ts>
    <user>Dann</user>
    <text>it's static ```(cmd)user=&amp;gt; (defrecord Foo [a b])
user.Foo
(cmd)user=&amp;gt; (Foo/getBasis)
[a b]
(ins)user=&amp;gt; (. Foo getBasis)
[a b]
```</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:33:43.214700</ts>
    <user>Isa</user>
    <text>I found it</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:33:47.215000</ts>
    <user>Isa</user>
    <text>:beers:</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:33:48.215400</ts>
    <user>Cira</user>
    <text>sounds good</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:33:51.215600</ts>
    <user>Dann</user>
    <text>use (. (class x) getBasis)</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:34:34.215800</ts>
    <user>Isa</user>
    <text>Do you know if this registry I can read only during run app or I can do it during compilation?</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:34:53.216100</ts>
    <user>Isa</user>
    <text>Well, probably I have to try :slightly_smiling_face:</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:34:54.216300</ts>
    <user>Hae</user>
    <text>```(let [x (TestComposite. "HI" 1)]
  (. (class x) getBasis))```</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:35:20.216600</ts>
    <user>Hae</user>
    <text>that fails with `IllegalArgumentException No matching field found: getBasis for class java.lang.Class  clojure.lang.Reflector.getInstanceField (Reflector.java:271)`</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:35:38.217000</ts>
    <user>Hae</user>
    <text>also fails if I put getBasis in parens, as a method call</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:35:49.217300</ts>
    <user>Dann</user>
    <text>I wonder why it works with the class as a literal arg but not as the result of an expression</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:36:10.217900</ts>
    <user>Dann</user>
    <text>it's a method call as is, adding parens doesn't change that</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:36:17.218000</ts>
    <user>Cira</user>
    <text>It's available at runtime</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:36:43.218500</ts>
    <user>Hae</user>
    <text>yeah, i’m a bit confused about this aspect of java interop. Normally these things work just fine</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:38:21.218900</ts>
    <user>Dann</user>
    <text>oh, getBasis isn't on IRecord &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/IRecord.java&gt;</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:38:31.219300</ts>
    <user>Dann</user>
    <text>we need the interface that actually has that method</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:42:05.220000</ts>
    <user>Danyell</user>
    <text>I can only think of the brute force solution here</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:46:27.221000</ts>
    <user>Cira</user>
    <text>&lt;@Clarine&gt; the issue with generating all possible 2-pair combinations of `#{1 2 3 4}` is that with just 10 items the combinations explode</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:48:10.222300</ts>
    <user>Danyell</user>
    <text>You want to two points that do not intersect in neither the x or y direction</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:48:10.222400</ts>
    <user>Cira</user>
    <text>I mean maybe this is just the wrong approach to the problem :smile:</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:50:19.224000</ts>
    <user>Dann</user>
    <text>if the inputs lead to a combinatorial explosion, you either need to consume them lazily and hold the two highest found so far, or you need some other property of the index / scoring function that helps you narrow the space</text>
  </message>
  <message conversation_id="837">
    <ts>2019-03-18T16:57:05.225800</ts>
    <user>Dann</user>
    <text>&lt;@Hae&gt; I found where getBasis is added to the class: it's done while emitting bytecode, separately for each record / type rather than using an interface &lt;https://github.com/clojure/clojure/blob/2cc37bb56a9125a1829c73c505e32995e663059a/src/jvm/clojure/lang/Compiler.java#L8210&gt;</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T16:58:46.226400</ts>
    <user>Clarine</user>
    <text>&lt;@Cira&gt; quick REPL session:
```
$ clj -Sdeps '{:deps {org.clojure/math.combinatorics {:mvn/version "RELEASE"}}}'
Clojure 1.10.0
user=&amp;gt; (require '[clojure.math.combinatorics :as mc])
nil
user=&amp;gt; (mc/permutations (range 4))
([0 1 2 3] [0 1 3 2] [0 2 1 3] [0 2 3 1] [0 3 1 2] [0 3 2 1] [1 0 2 3] [1 0 3 2] [1 2 0 3] [1 2 3 0] [1 3 0 2] [1 3 2 0] [2 0 1 3] [2 0 3 1] [2 1 0 3] [2 1 3 0] [2 3 0 1] [2 3 1 0] [3 0 1 2] [3 0 2 1] [3 1 0 2] [3 1 2 0] [3 2 0 1] [3 2 1 0])
(def scores {#{0 1} 0.98,
 #{0 3} 0.62,
 #{1 3} 0.71,
 #{1 2} 0.01,
 #{0 2} 0.89,
 #{3 2} 0.16})
#'user/scores
user=&amp;gt; (def perms (mc/permutations (range 4)))
#'user/perms
(user=&amp;gt; (defn score [perm] (-&amp;gt;&amp;gt; perm (partition 2) (map set) (map scores)))
#'user/score
user=&amp;gt; (score [0 1 2 3])
(0.98 0.16)
user=&amp;gt; (defn score [perm] (-&amp;gt;&amp;gt; perm (partition 2) (map set) (map scores) (reduce +)))
#'user/score
user=&amp;gt; (score [0 1 2 3])
1.14
user=&amp;gt; (apply max-key score perms)
[3 1 2 0]
user=&amp;gt;
```</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T16:59:22.227100</ts>
    <user>Clarine</user>
    <text>you might leverage the fact that `[0 1 2 3]` and `[1 0 2 3]` is the same score so you can filter those out first.</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T16:59:32.227400</ts>
    <user>Clarine</user>
    <text>but with n = 10 you might still have a problem, I could test …</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:00:22.227700</ts>
    <user>Clarine</user>
    <text>if you have some test input for n = 10 :slightly_smiling_face:</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:02:10.228300</ts>
    <user>Cira</user>
    <text>&lt;@Clarine&gt; 1s</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:03:32.229200</ts>
    <user>Cira</user>
    <text>None</text>
  </message>
  <message conversation_id="839">
    <ts>2019-03-18T17:03:38.229500</ts>
    <user>Hae</user>
    <text>&lt;@Dann&gt; I see, thanks for the help.</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:04:57.230100</ts>
    <user>Cira</user>
    <text>&lt;@Clarine&gt; 6s for 10 items, I'll need to do this for maybe 50-hundreds</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:05:09.230500</ts>
    <user>Cira</user>
    <text>so I guess a new approach might be needed :smile:</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:05:22.230600</ts>
    <user>Dann</user>
    <text>if you search the clojure repo for `getBasis` I think one of the things that pops up is how to find that method - it requires explicit reflection rather than clojure's implicit reflection (?)</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:05:34.231000</ts>
    <user>Clarine</user>
    <text>what does this data represent?</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:10:05.231200</ts>
    <user>Cira</user>
    <text>I'll tell you over a beer some time :smile:</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:11:10.231700</ts>
    <user>Clarine</user>
    <text>fun :slightly_smiling_face: I mean, is this the real data or just some mock data?</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:11:58.232400</ts>
    <user>Cira</user>
    <text>it's a real problem and real data in that the numbers represent some kind of IDs</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:12:56.233000</ts>
    <user>Clarine</user>
    <text>the above code is the real data?</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:13:02.233200</ts>
    <user>Fredda</user>
    <text>I guess you don't need all permutations</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:13:11.233400</ts>
    <user>Fredda</user>
    <text>Just distinct ones</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:13:34.233600</ts>
    <user>Clarine</user>
    <text>&lt;@Fredda&gt; this?
&amp;gt; you might leverage the fact that `[0 1 2 3]` and `[1 0 2 3]` is the same score so you can filter those out first.</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:13:48.233800</ts>
    <user>Fredda</user>
    <text>right, just don't produce them</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:14:07.234200</ts>
    <user>Clarine</user>
    <text>that’s even better. I couldn’t find the right function for that yet</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:14:22.234700</ts>
    <user>Clarine</user>
    <text>subsets-of-2… or something</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:14:50.235000</ts>
    <user>Cira</user>
    <text>`(combinations (range 4) 2)`</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:16:10.236000</ts>
    <user>Clarine</user>
    <text>I mean `(partition-into-subsets-of-2 #{1 2 3 4}) =&amp;gt; [[#{1 2} #{3 4}] [#{1 3} #{2 4}] ...]` etc.</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T17:23:19.236300</ts>
    <user>Hae</user>
    <text>yeah, I see that. I’m assuming that’s why my reflection calls are all failing, but I don’t quite understand 100% why. I’m going to try a slightly modified approach to my problem, since I want to avoid reflection anyway.  I appreciate the help though, thank you.</text>
  </message>
  <message conversation_id="838">
    <ts>2019-03-18T18:17:44.237100</ts>
    <user>Cira</user>
    <text>&lt;@Clarine&gt; &lt;@Dann&gt; &lt;@Danyell&gt; I think this might be the "proper solution": &lt;https://en.wikipedia.org/wiki/Blossom_algorithm&gt;</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T19:47:07.237800</ts>
    <user>Vinnie</user>
    <text>how are people using rebl? using something like this? &lt;https://github.com/DaveWM/nrepl-rebl&gt;</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T19:47:26.238100</ts>
    <user>Vinnie</user>
    <text>(i haven't used it yet. just starting to figure out how)</text>
  </message>
  <message conversation_id="841">
    <ts>2019-03-18T20:43:42.238300</ts>
    <user>Marcia</user>
    <text>&lt;https://github.com/RickMoynihan/nrebl.middleware&gt;</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:20:48.238600</ts>
    <user>Vinnie</user>
    <text>thanks i'll try that next. `nrepl-rebl` was erroring out</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:21:08.238800</ts>
    <user>Vinnie</user>
    <text>i did manage to get a rebl launched but when i eval from vim-fireplace it doesn't auto show up in REBL. guessing that's what the middleware will help with :slightly_smiling_face:</text>
  </message>
  <message conversation_id="842">
    <ts>2019-03-18T21:32:26.239000</ts>
    <user>Celestine</user>
    <text>I use REBL all the time but I start a Socket REPL (via JVM options) and I connect my editor to that (Atom/Chlorine) so I avoid nREPL. Chlorine has support for "inspect" as well as "eval" -- the latter is just regular eval-in-REPL but the former additionally sends the form and the result to REBL (via `cognitect.rebl/submit`) so values show up in the browse/view panes.</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:32:56.239200</ts>
    <user>Vinnie</user>
    <text>interesting</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:33:02.239400</ts>
    <user>Celestine</user>
    <text>But, yes, the nrebl middleware should help you with automatically sending values to REBL as they are evaluated in nREPL.</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:33:13.239900</ts>
    <user>Vinnie</user>
    <text>will find out soon :slightly_smiling_face:</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:33:27.240400</ts>
    <user>Vinnie</user>
    <text>funny you popped up i was just reading your post &lt;@Celestine&gt; &lt;http://corfield.org/blog/2018/12/03/datafy-nav/&gt; :slightly_smiling_face:</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:33:55.241200</ts>
    <user>Celestine</user>
    <text>(I don't "inspect" every value but for anything complex that I want to be able to drill into and explore, REBL is great)</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:34:14.241700</ts>
    <user>Vinnie</user>
    <text>i'm guessing if i have as nrepl middleware i won't have the choice - everything will show up</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:34:18.242000</ts>
    <user>Vinnie</user>
    <text>which might be fine. not sure yet</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:34:28.242400</ts>
    <user>Celestine</user>
    <text>That's my understanding, yes.</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:34:51.242800</ts>
    <user>Celestine</user>
    <text>There's a &lt;#CEFN9UP8R|rebl&gt; channel here if you have more detailed questions...</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:35:01.243200</ts>
    <user>Vinnie</user>
    <text>oh, thanks. i missed that</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:35:02.243400</ts>
    <user>Celestine</user>
    <text>...especially about using the middleware.</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:42:08.245900</ts>
    <user>Vinnie</user>
    <text>works great. eval results show up in vim like usual and *also* shows up in REBL!</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:42:18.246100</ts>
    <user>Vinnie</user>
    <text>now to learn how to use this thing :slightly_smiling_face:</text>
  </message>
  <message conversation_id="840">
    <ts>2019-03-18T21:42:47.246300</ts>
    <user>Vinnie</user>
    <text>yetibot weather response</text>
  </message>
  <message conversation_id="843">
    <ts>2019-03-18T22:48:08.247000</ts>
    <user>Jaimee</user>
    <text>Is it possible to use sente with the hot reload of compojure?</text>
  </message>
  <message conversation_id="844">
    <ts>2019-03-18T22:57:24.249300</ts>
    <user>Diamond</user>
    <text>&lt;@Clarine&gt; Another option is k-combinations. I use k-combinations in meander to generate the search space used find to all possible pattern matches for set and map patterns containing variable keys: &lt;https://gist.github.com/noprompt/6a4624a81908baf60263dcd4efeda4d8&gt;</text>
  </message>
  <message conversation_id="844">
    <ts>2019-03-18T23:01:05.251200</ts>
    <user>Diamond</user>
    <text>Note, this solution requires realizing the input collection (it counts). In practice that hasn’t bit me because the collections I’m counting are cheap to count e.g. sets and maps.</text>
  </message>
  <message conversation_id="844">
    <ts>2019-03-19T01:09:16.253100</ts>
    <user>Cira</user>
    <text>&lt;@Diamond&gt; I think your `k-combinations` is the same as math combinatorics‘ `combinations` when you supply a second arg?</text>
  </message>
  <message conversation_id="844">
    <ts>2019-03-19T02:06:54.265100</ts>
    <user>Diamond</user>
    <text>&lt;@Cira&gt; no because my version has a different interpretation of the word “unique”. That version will give you unique selections via a `distinct` view of the input collection, my version doesn’t do that. It yields all the selections even if they produce duplicates. In my case, doing it that way ensures a full survey of the search space. Apart from that, I think they will also have different space and performance profiles depending on the context.</text>
  </message>
  <message conversation_id="844">
    <ts>2019-03-19T02:11:39.266200</ts>
    <user>Diamond</user>
    <text>I also notice now that the combinatorics solution also realizes the input up front.</text>
  </message>
  <message conversation_id="844">
    <ts>2019-03-19T02:12:01.266700</ts>
    <user>Diamond</user>
    <text>And here I was berating myself. :smile:</text>
  </message>
  <message conversation_id="845">
    <ts>2019-03-19T03:28:55.267700</ts>
    <user>Belia</user>
    <text>Does Clojure support Java 11 now? like reflection? I want to use JavaFX through library `cljfx` which has minimum Java 11 requirement.</text>
  </message>
  <message conversation_id="845">
    <ts>2019-03-19T03:37:55.268400</ts>
    <user>Chanelle</user>
    <text>if there is a clojure wrapper for a library which requires Java 11
I would assume support is there</text>
  </message>
  <message conversation_id="844">
    <ts>2019-03-19T03:40:27.268700</ts>
    <user>Belia</user>
    <text>I see.</text>
  </message>
  <message conversation_id="844">
    <ts>2019-03-19T03:45:34.269800</ts>
    <user>Roslyn</user>
    <text>&lt;@Belia&gt; clojure definitely supports java 11, I wrote cljfx in it :slightly_smiling_face: Join &lt;#CGHHJNENB|cljfx&gt;!</text>
  </message>
  <message conversation_id="845">
    <ts>2019-03-19T03:47:59.271900</ts>
    <user>Belia</user>
    <text>&lt;@Roslyn&gt; Thanks for your work!! I like it very much. After I switched Java version to 11, then I just runned `re-find.fx` which rely on `cljfx`. It works. BTW, I got an error in output: `Reflection warning, cljfx/fx/table_cell.clj:33:11 - call to method updateItem on javafx.scene.control.TableCell can't be resolved (no such method).` I think it should be cljfx issue. Do I need to post an issue on GitHub?</text>
  </message>
  <message conversation_id="845">
    <ts>2019-03-19T03:49:26.272300</ts>
    <user>Belia</user>
    <text>I use command
```
clj -Sdeps "{:deps                   {MageMasher/re-find.fx                      {:git/url \"&lt;https://github.com/MageMasher/re-find.fx\&gt;"                       :sha \"b29bde3519f7632b63eb71415943bf8a7cfa1462\"}}}" \    -m re-find.fx
```</text>
  </message>
  <message conversation_id="845">
    <ts>2019-03-19T03:50:54.273600</ts>
    <user>Belia</user>
    <text>I tested some of my usually used libraries, some libraries still have problem on Java 11. But I decide to switch to Java 11 now. I will report issue on library repo.</text>
  </message>
  <message conversation_id="845">
    <ts>2019-03-19T04:03:07.275400</ts>
    <user>Roslyn</user>
    <text>Yeah, it's a cljfx problem, I put reflection warnings to not lose on performance, but using proxies with proxy-super generates them. I should disable these warning in proxy-super calls. Please open an issue!</text>
  </message>
  <message conversation_id="846">
    <ts>2019-03-19T04:30:14.280400</ts>
    <user>Isidro</user>
    <text>a clojure design question. Assume I have a server side function which, when called, will make a (potentially large) number of async http requests, process the responses and return a value based on the responses. Requests form a tree in that a returned request, depending on the returned data, might lead to more requests. Let’s further assume both the time for request completion and the time to process a completed request is non-negligible. Clojure has a lot of async primitives, promise, future, channels, async pipelines, pmap, etc etc. What primitives would you choose for a scenario like this?</text>
  </message>
  <message conversation_id="845">
    <ts>2019-03-19T04:35:21.280800</ts>
    <user>Belia</user>
    <text>&lt;@Roslyn&gt; Ok. I will add a new issue on GitHub :slightly_smiling_face:</text>
  </message>
  <message conversation_id="847">
    <ts>2019-03-19T04:41:24.282100</ts>
    <user>Bart</user>
    <text>how is performance of `map` compared to `mapv`, especially on larger data?</text>
  </message>
  <message conversation_id="847">
    <ts>2019-03-19T04:43:19.283400</ts>
    <user>Bart</user>
    <text>i've heard claims that `mapv` is much faster than map, at least in the "core" case of `mapv f coll`</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T04:56:56.283500</ts>
    <user>Madeleine</user>
    <text>I'd benchmark it.</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T04:57:16.283700</ts>
    <user>Madeleine</user>
    <text>But, the major difference is mapv is eager, and map is lazy</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T05:04:30.283900</ts>
    <user>Madeleine</user>
    <text>You said the response processing is non negligible? That means it is CPU heavy? Or just doing a bunch of IO?</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T05:05:17.284200</ts>
    <user>Madeleine</user>
    <text>Basically, you need to see. Is there any.two things you could do concurrently?</text>
  </message>
  <message conversation_id="847">
    <ts>2019-03-19T05:09:35.285300</ts>
    <user>Clarine</user>
    <text>&lt;@Diamond&gt; Nice! Still k-combinations doesn’t yield all ways to partition a collection into 2-sized subsets. If you call `(k-combinations [1 2 3 4] 2)` you still have to figure that part out yourself</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T05:09:44.285600</ts>
    <user>Clarine</user>
    <text>and for n = 50 this will still explode :slightly_smiling_face:</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T05:10:25.286100</ts>
    <user>Clarine</user>
    <text>also it yields `[1 2] [2 1] ...` which are duplicates in &lt;@Cira&gt;’s problem</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T05:12:32.286500</ts>
    <user>Roslyn</user>
    <text>Thanks, I'll have a look at it today later when I'll be home</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T05:13:30.286700</ts>
    <user>Isidro</user>
    <text>yeah I certainly want to do both querying and processing in parallel</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T05:14:03.286900</ts>
    <user>Isidro</user>
    <text>I think I’m opting for just using promises, makes things simple. Less control than say async pipelines, but I think the clarity is worth it in this case</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T05:15:24.287100</ts>
    <user>Madeleine</user>
    <text>I mean, can you? Like is there a case where the next thing to do needs the answer to multiple prior requests?</text>
  </message>
  <message conversation_id="849">
    <ts>2019-03-19T05:33:50.287400</ts>
    <user>Isidro</user>
    <text>no</text>
  </message>
  <message conversation_id="849">
    <ts>2019-03-19T05:34:06.287600</ts>
    <user>Isidro</user>
    <text>each response will result in one answer, the function returns a collection of answers</text>
  </message>
  <message conversation_id="849">
    <ts>2019-03-19T05:34:58.287800</ts>
    <user>Isidro</user>
    <text>but each response can in addition to an answer also result in further requests, so it’s a “draining” kind of process…but I think promises will be good enough here</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T05:54:23.288000</ts>
    <user>Madeleine</user>
    <text>Hum, alright. I'm not tottally following, but promises are just a way to deliver a value between two places, threads normally. So they could work if your async http requests can deliver them on result. Otherwise you will probably need future instead.</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T06:00:02.288500</ts>
    <user>Clarine</user>
    <text>can I use &lt;https://github.com/clojure/tools.analyzer.jvm&gt; to analyze just one file from a project without loading an entire project on the classpath?</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T06:08:25.289400</ts>
    <user>Clarine</user>
    <text>it seems like tools.analyzer.jvm is meant to be run in process and isn’t that suitable to build a static linter with maybe?</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T06:18:42.289800</ts>
    <user>Clarine</user>
    <text>is there a way to make something like this work?
```
(-&amp;gt;&amp;gt; (ana.jvm/analyze '(ns foo (:require [bar :as b])))
       (ana.jvm/analyze '(b/func 1)))
```</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T06:22:09.290100</ts>
    <user>Clarine</user>
    <text>I guess it really needs a runtime for macro-expansion</text>
  </message>
  <message conversation_id="850">
    <ts>2019-03-19T07:03:42.290500</ts>
    <user>Epifania</user>
    <text>is there any visual tools to aid reading clojure/tools.trace output?</text>
  </message>
  <message conversation_id="850">
    <ts>2019-03-19T07:03:49.290700</ts>
    <user>Epifania</user>
    <text>some visualizer or similar</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T07:48:36.291500</ts>
    <user>Harris</user>
    <text>&lt;@Clarine&gt; there's `analyze-ns` but yes, that needs runtime evaluation</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T07:49:10.292200</ts>
    <user>Harris</user>
    <text>we could do without evaluation if clojure had clearly defined evaluation stages (a la CL or racket) , but alas, it's not the situation we are in</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T07:49:49.293000</ts>
    <user>Clarine</user>
    <text>I was thinking of making a simple linter that gives a warning when you use def inside def. But I think I can do this just on the literal s-expressions maybe</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T07:50:07.293200</ts>
    <user>Harris</user>
    <text>makes sense</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T07:53:12.295600</ts>
    <user>Sixta</user>
    <text>I never know what to think of those kinds of approach because of `(def def let)` kinds of thing (okay, less likely for this specific kind). It would be useful to have a way to know what a symbol resolves to in a file. If it's a local, that's fine too.</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T07:54:41.296500</ts>
    <user>Harris</user>
    <text>well for `def` in particular that's a bit easier since the only valid value of `x` in `(x new-var init)` is a _literal_ `def` (modulo macros)</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T07:54:53.296800</ts>
    <user>Clarine</user>
    <text>use case: personally I use def inside defn for debugging and my linter gives me an overview of where to remove these before committing.</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T07:55:30.297300</ts>
    <user>Harris</user>
    <text>but linters don't have to be 100% accurate so it's fine</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T08:02:51.298300</ts>
    <user>Sixta</user>
    <text>It's also useful for doing analysis of function calls. Who calls what &amp;amp; where. Using analyzer for that causes macro-expansion, so it would appear that you never once refer to clojure.core/ns</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T08:03:10.298600</ts>
    <user>Harris</user>
    <text>the analyzer keeps track of macroexpansions</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T08:04:35.299100</ts>
    <user>Sixta</user>
    <text>oh, I didn't see that in the output. How can I perform mappings to the original?</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T08:05:26.299900</ts>
    <user>Sixta</user>
    <text>That's a little ambiguous. How can I list things in the original only?</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T08:06:20.300800</ts>
    <user>Sixta</user>
    <text>I guess that's impossible without macro-expansion to some level :thinking_face: Because macros can make symbols special, so you have to track where they end up, and what they end up being used for?</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T08:13:09.301000</ts>
    <user>Harris</user>
    <text>you can't really perform mappings</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T08:14:08.301600</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; (defmacro m1 [] `(m2))
#'user/m1
user=&amp;gt; (defmacro m2 [] 1)
#'user/m2
user=&amp;gt; (select-keys (analyze `(m1)) [:val :raw-forms])
{:val 1, :raw-forms ((user/m1) (user/m2))}```</text>
  </message>
  <message conversation_id="848">
    <ts>2019-03-19T08:14:24.302000</ts>
    <user>Sixta</user>
    <text>oh, that's cool. How did I miss that :thinking_face:</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:43:45.304400</ts>
    <user>Tabitha</user>
    <text>Can someone help me understand the behavior of `sequence` when passed an xform and multiple collections?
I really don't understand what the documentation is getting at.
&amp;gt;returns a lazy sequence of applications of
&amp;gt;the transform to the items in coll(s), i.e. to the set of first
&amp;gt;items of each coll, followed by the set of second
&amp;gt;items in each coll, until any one of the colls is exhausted.  Any
&amp;gt;remaining items in other colls are ignored. The transform should accept
&amp;gt;number-of-colls arguments

example behavior that I dont understand at all
```
  (sequence (comp (map inc) (map inc) (map inc)) [1 2] [-1 -2] [0.1 0.2])
=&amp;gt; (4 5)
  (sequence (comp (map inc) (map inc) (map inc)) [1 2] [-1 -2] [0.1 0.2 0.3])
=&amp;gt; (4 5)
  (sequence (comp (map inc) (map inc) (map inc)) [1 2 3] [-1 -2 -3] [0.1 0.2 0.3])
=&amp;gt; (4 5 6)
```</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:45:06.305300</ts>
    <user>Harris</user>
    <text>which part of the doc are you not understanding?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:45:32.305900</ts>
    <user>Clarine</user>
    <text>I think it’s analogous to `map` with multiple seqs:
```
(sequence (comp (map vector)) [1 2] [-1 -2] [0.1 0.2])
;; =&amp;gt; ([1 -1 0.1] [2 -2 0.2])
```</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:46:56.307100</ts>
    <user>Harris</user>
    <text>those examples you pasted make no sense and are not valid, I have no idea how you got those results</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:47:20.308000</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; (sequence (comp (map inc) (map inc) (map inc)) [1 2] [-1 -2] [0.1 0.2])
Execution error (ArityException) at user/eval9 (REPL:1).
Wrong number of args (3) passed to: clojure.core/inc```</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:47:23.308300</ts>
    <user>Tabitha</user>
    <text>uh, well, I ran them in clojurescript, so thats probably how.</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:47:29.308700</ts>
    <user>Harris</user>
    <text>this is what should be happening, because you're trying to `(inc 1 -1 0.1)`</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:47:34.309000</ts>
    <user>Tabitha</user>
    <text>lol, clojurescript will chew on anything</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:47:41.309300</ts>
    <user>Harris</user>
    <text>ah right, clojurescript doesn't have strong arity checks</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:47:49.309700</ts>
    <user>Clarine</user>
    <text>that’s because JavaScript…</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:47:54.310000</ts>
    <user>Harris</user>
    <text>so in cljs `(inc 1 -1 0.1)` is 2 instead of an arityexception</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:47:58.310300</ts>
    <user>Harris</user>
    <text>which is what was confusing you I guess</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:48:04.310700</ts>
    <user>Tabitha</user>
    <text>right, yeah, thats exactly it</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T08:48:39.311600</ts>
    <user>Tabitha</user>
    <text>I see, I see.  okay, this is awesome, I get it now.  Thank you guys SO much.</text>
  </message>
  <message conversation_id="852">
    <ts>2019-03-19T11:26:55.312400</ts>
    <user>Tabitha</user>
    <text>Is this another clojurescript specific thing?
&lt;https://clojure.org/reference/transducers#_sequence&gt;
&amp;gt; The resulting sequence elements are incrementally computed. These sequences will consume input incrementally as needed and fully realize intermediate operations. This behavior *differs from the equivalent operations on lazy sequences*.

```
(type (sequence (comp (map inc) (map inc) (map inc)) [1]))
=&amp;gt; cljs.core/LazySeq
```</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:29:05.312900</ts>
    <user>Tabitha</user>
    <text>maybe I should ask that in the cljs channel...</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:30:22.313100</ts>
    <user>Harris</user>
    <text>no, it's a transducer specific thing (the part in the docs)</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:33:34.315300</ts>
    <user>Tabitha</user>
    <text>I'm referring to the fact that, despite what the documentation seems to imply, the sequence appears to be of type LazySeq.   So, I guess I'm asking if that LazySeq is special and works incrementally behind the scenes, or is it really just a LazySeq in clojurescript</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:34:56.316200</ts>
    <user>Esteban</user>
    <text>i've got this java method
```public int put(int row, int col, double... data) {```
how do i call it from clojure?
i tried `(.put a 1 1 (into-array Double [2.0]))` but it says `No matching method put found taking 3 args`</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:35:49.316300</ts>
    <user>Tabitha</user>
    <text>seems to also be of type LazySeq in clojure.  guess its just fancy under the hood</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:40:20.316500</ts>
    <user>Madeleine</user>
    <text>You might &lt;http://need.to|need.to&gt; type hint</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:40:36.316700</ts>
    <user>Madeleine</user>
    <text>The ints</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:42:55.317400</ts>
    <user>Jasmine</user>
    <text>`double...` is a varargs argument, which in the jvm is an array of &amp;lt;type&amp;gt;</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:43:00.317500</ts>
    <user>Madeleine</user>
    <text>Also I would try using `double-array` instead of into-array. In case it matters that it is a primitive double array</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:43:12.317900</ts>
    <user>Jasmine</user>
    <text>here, double is the primitive double, not the boxed Double</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:43:39.318300</ts>
    <user>Jasmine</user>
    <text>so you need to use `double-array`</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:43:41.318500</ts>
    <user>Esteban</user>
    <text>oh, `(.put a 1 1 (double-array [2.0]))` works</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:43:45.318700</ts>
    <user>Jasmine</user>
    <text>yep</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:43:50.318900</ts>
    <user>Esteban</user>
    <text>thank you, sir</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:43:56.319200</ts>
    <user>Jasmine</user>
    <text>np</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:44:12.319300</ts>
    <user>Esteban</user>
    <text>thank you</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:44:53.320100</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/guides/faq#varargs&gt; is missing the primitive aspect so I'll update that</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:50:39.320500</ts>
    <user>Madeleine</user>
    <text>&amp;gt; sequence
function
Usage: (sequence coll)
       (sequence xform coll)
       (sequence xform coll &amp;amp; colls)
Coerces coll to a (possibly empty) sequence, if it is not already
one. Will not force a lazy seq. (sequence nil) yields (), When a
transducer is supplied, returns a lazy sequence of applications of
the transform to the items in coll(s), i.e. to the set of first
items of each coll, followed by the set of second
items in each coll, until any one of the colls is exhausted.  Any
remaining items in other colls are ignored. The transform should accept
number-of-colls arguments</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:51:03.320700</ts>
    <user>Madeleine</user>
    <text>The doc mentions lazy-seq it seems</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:52:17.320900</ts>
    <user>Tabitha</user>
    <text>I think those docs are just saying that, e.g,  `(sequence (map inc [1 2 3]))` will not force realize the map operation like a `doall` would</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:53:34.321200</ts>
    <user>Madeleine</user>
    <text>Ya, I admit that part you highlighted in bold is confusing.</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:54:08.321400</ts>
    <user>Madeleine</user>
    <text>But sequence will not force realize a lazySeq as well</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:54:27.321600</ts>
    <user>Madeleine</user>
    <text>So I fail to see what is different about the transducer usage</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:54:42.321800</ts>
    <user>Tabitha</user>
    <text>yeah ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:55:50.322000</ts>
    <user>Tabitha</user>
    <text>the docs seem to suggest that the actual process of realizing a sequence is incremental, meaning it only computes one element at a time (which would be different from lazyseqs which realize in chunks)</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:56:28.322200</ts>
    <user>Madeleine</user>
    <text>Ya, but, somehow I doubt that :yum:</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:56:42.322400</ts>
    <user>Tabitha</user>
    <text>hahaha</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:56:53.322600</ts>
    <user>Tabitha</user>
    <text>&lt;@Jasmine&gt; any thoughts?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:57:10.322800</ts>
    <user>Madeleine</user>
    <text>If its just a lazySeq of applying xf to each element. That lazySeq would behave like any other I'd guess</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:59:16.323000</ts>
    <user>Jasmine</user>
    <text>sorry, what's the question?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T11:59:45.323200</ts>
    <user>Madeleine</user>
    <text>Is this another clojurescript specific thing?
&lt;https://clojure.org/reference/transducers#_sequence&gt;
&amp;gt; The resulting sequence elements are incrementally computed. These sequences will consume input incrementally as needed and fully realize intermediate operations. This behavior *differs from the equivalent operations on lazy sequences*.

```
(type (sequence (comp (map inc) (map inc) (map inc)) [1]))
=&amp;gt; cljs.core/LazySeq
```</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:00:03.323400</ts>
    <user>Jasmine</user>
    <text>no, same in Clojure</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:00:16.323600</ts>
    <user>Tabitha</user>
    <text>no, that part we know now</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:00:20.323800</ts>
    <user>Tabitha</user>
    <text>the question is:</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:00:25.324000</ts>
    <user>Madeleine</user>
    <text>Sorry, shouldn't have included the first bit </text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:01:10.324200</ts>
    <user>Madeleine</user>
    <text>What.differs about the transducer sequence over the normal one? What's that part in bold referring too?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:01:10.324400</ts>
    <user>Tabitha</user>
    <text>`sequence` returns a value of type `LazySeq`, the docs say that the behavior of sequence differs from equivelant operations on lazy sequences.   Is the LazySeq returned by sequence actually realizing values differently (i.e. incrementally rather than in chunks)</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:01:38.324600</ts>
    <user>Jasmine</user>
    <text>it's what it says - "These sequences will consume input incrementally as needed and fully realize intermediate operations. "</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:01:58.324800</ts>
    <user>Jasmine</user>
    <text>lazy seqs are fully lazy in their intermediate operations too</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:02:17.325000</ts>
    <user>Jasmine</user>
    <text>so  you  could  have a nested operation that creates an infinite sequence for example and just take some of i t</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:02:25.325200</ts>
    <user>Jasmine</user>
    <text>the transducer equivalent will never return</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:02:40.325400</ts>
    <user>Tabitha</user>
    <text>right, but the question is the difference between lazy seqs and sequence</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:02:54.325600</ts>
    <user>Tabitha</user>
    <text>not sequence and transduce</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:03:44.325800</ts>
    <user>Jasmine</user>
    <text>are you talking about concepts or specific function names?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:03:48.326000</ts>
    <user>Madeleine</user>
    <text>I think an example would help me. Or, what do we mean here by intermediate operations ?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:05:45.326200</ts>
    <user>Madeleine</user>
    <text>`(sequence (comp (map inc) (remove even?)) (range 10000))`</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:06:52.326500</ts>
    <user>Jasmine</user>
    <text>it's  easier to get with an expanding op</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:06:56.326700</ts>
    <user>Jasmine</user>
    <text>`(-&amp;gt;&amp;gt; (range 5) (mapcat #(range (+ 100 %))))`</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:07:20.326900</ts>
    <user>Jasmine</user>
    <text>will  create an output lazy sequence of 510 values</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:07:48.327100</ts>
    <user>Jasmine</user>
    <text>100 +  101 + 102 + 103 + 104 vals</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:08:22.327300</ts>
    <user>Jasmine</user>
    <text>`(take 5 (-&amp;gt;&amp;gt; (range 5) (mapcat #(range (+ 100 %)))))` can make and return just 5 values</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:08:28.327500</ts>
    <user>Jasmine</user>
    <text>(ignoring chunking  for the moment)</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:09:36.327700</ts>
    <user>Jasmine</user>
    <text>`(take 5 (sequence (mapcat #(range (+ 100 %)) (range 5))))` will return the same result</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:09:53.327900</ts>
    <user>Jasmine</user>
    <text>but must fully realize the first intermediate chunk of 100 values</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:10:36.328100</ts>
    <user>Jasmine</user>
    <text>lazy seqs are ok with an arbitrarily (infinitely) long intermediate sequence, the transducer equivalent is not</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:11:19.328300</ts>
    <user>Tabitha</user>
    <text>...wait, wouldn't taking 5 just realize the lazyseq value, which would then emit 5 values lazily?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:11:20.328500</ts>
    <user>Jasmine</user>
    <text>the result production model is different -  lazy  seqs are a fully "pull" driven  model where values are produced when needed (again, ignoring the wrinkle of chunking)</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:11:46.328700</ts>
    <user>Tabitha</user>
    <text>because range is lazy, right?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:11:51.328900</ts>
    <user>Jasmine</user>
    <text>`sequence` with a  transducer is pull  on the  outside level, but the transducer "push" model  inside</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:12:13.329100</ts>
    <user>Jasmine</user>
    <text>yes, range is lazy</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:12:56.329300</ts>
    <user>Jasmine</user>
    <text>consider `(take 5 (-&amp;gt;&amp;gt; (range 5) (mapcat (constantly (range)))))`</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:13:11.329500</ts>
    <user>Tabitha</user>
    <text>so, sequence is a lazyseq of lazyseqs, so if I take 5, wouldnt it only realize 5, because it would realize the first value, which is a lazyseq value, and then would consume 5 values from that?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:13:13.329700</ts>
    <user>Jasmine</user>
    <text>that concatenates five infinite sequences</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:13:39.329900</ts>
    <user>Jasmine</user>
    <text>ignoring chunking, yes it only realizes what it is being asked to produce</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:14:49.330100</ts>
    <user>Jasmine</user>
    <text>`(take 5 (sequence (mapcat (constantly (range))) (range 5)))` will never return because it will attempt to fully  realize the  first intermediate result (which is  infinite)</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:16:36.330300</ts>
    <user>Tabitha</user>
    <text>well how about that.  Thank you!  thats extremely helpful!</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:16:47.330500</ts>
    <user>Jasmine</user>
    <text>and that's  what the docstring is trying  to say: "The resulting sequence elements are incrementally computed. These sequences will consume input incrementally as needed and fully realize intermediate operations. This behavior differs from the equivalent operations on lazy sequences."</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:17:24.330800</ts>
    <user>Jasmine</user>
    <text>"incrementally computed" because still lazy, but avoiding the word "lazy"  b/c it's different than lazy sequences</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:18:07.331000</ts>
    <user>Jasmine</user>
    <text>still implemented by LazySeq but backed by transducer iteration instead</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:18:38.331200</ts>
    <user>Tabitha</user>
    <text>yeah, that distinction is crucial.  thank you so much.  that probably would have gotten me good</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:19:53.331600</ts>
    <user>Jasmine</user>
    <text>it's rare to actually need the `sequence` function at all. most things that are being used to produce  the initial collection are seqable and the consumers are calling `seq` on it automatically, so things  plumb together  automatically without needing this</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:21:46.331800</ts>
    <user>Tabitha</user>
    <text>when you bring chunking back into the discussion, does `sequence` have the performance benefit of fewer intermediate values for long chains of operations?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:23:06.332700</ts>
    <user>Tabitha</user>
    <text>im working in lambda so I'm trying to optimize on memory efficiency</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:29:20.336200</ts>
    <user>Madeleine</user>
    <text>Hum, I get it. But I need to take some time to internalize it :rolling_on_the_floor_laughing:</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:29:23.336400</ts>
    <user>Jasmine</user>
    <text>there are two levels here - the top level is lazy seq, unchunked, will be computed as needed</text>
  </message>
  <message conversation_id="853">
    <ts>2019-03-19T12:29:44.336600</ts>
    <user>Clint</user>
    <text>Hey, question with Lacinia, if I have a field such that
```:xs {:type (list :x)
     :resolve :my-resolver/get-xs}```
when I try to change the resolver to use an Async following the example here: &lt;https://lacinia.readthedocs.io/en/latest/resolve/async.html&gt;, it ends complaining because it was expecting a collection, not a single item. Using `resolve-as` works correctly

Is it not possible ?  or is the case that I am missing something?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:29:53.336700</ts>
    <user>Jasmine</user>
    <text>the  lower level is a transducer stack and will depend on what you're doing</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:30:21.336900</ts>
    <user>Jasmine</user>
    <text>generally yes, but depends a bit</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:31:24.337200</ts>
    <user>Jasmine</user>
    <text>depends what the source collection is, whether it's a seq, whether it's chunked, etc. and also what you do with the output</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:33:05.337400</ts>
    <user>Tabitha</user>
    <text>right, yeah.  If the sequence being realized is an infinite sequence, its obviously not going to be more memory efficient</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:34:04.337600</ts>
    <user>Jasmine</user>
    <text>no :)</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:34:27.337800</ts>
    <user>Jasmine</user>
    <text>whether or not you plan to use the full result is important.</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:35:27.338000</ts>
    <user>Jasmine</user>
    <text>and some tension between "memory efficient over time" vs "minimizing overall work"</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:35:55.338200</ts>
    <user>Tabitha</user>
    <text>I take it lazyseqs supply the latter in most cases?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:35:57.338400</ts>
    <user>Jasmine</user>
    <text>lazy seqs  generally being better at the former and transducers on the latter</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:36:02.338600</ts>
    <user>Tabitha</user>
    <text>oh, how about that</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:36:32.338800</ts>
    <user>Jasmine</user>
    <text>transducers avoid all intermediate seq caching so do less overall work (and consume less overall memory)</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:36:39.339000</ts>
    <user>Jasmine</user>
    <text>but they do it at one time</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:37:02.339200</ts>
    <user>Tabitha</user>
    <text>ahhhhh</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:37:12.339400</ts>
    <user>Jasmine</user>
    <text>rather than  smeared over consumption</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:37:13.339600</ts>
    <user>Madeleine</user>
    <text>Ok, I think it clicked. Each element is processed eagerly. Because the pipeline is a transducer. And sequence lazily applies the xf to each element. But the application of xf is eager. It's just that sequence will wait till you need the next element before applying xf to it. So its only lazy at the first level. And that level is unchunked as well.</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:37:28.339800</ts>
    <user>Jasmine</user>
    <text>right</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:38:01.340000</ts>
    <user>Jasmine</user>
    <text>seqs and transducers are both useful models  in different circumstances. `sequence` with transducers is  kind  of a mix</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:38:58.340200</ts>
    <user>Jasmine</user>
    <text>you could `map identity` over the top  to get chunking at that level</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:39:38.340900</ts>
    <user>Clint</user>
    <text>As it happens, three minutes later I discover that I was missing something. Oh well :slightly_smiling_face:</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:39:40.341000</ts>
    <user>Tabitha</user>
    <text>haha! thats interesting</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:39:58.341200</ts>
    <user>Jasmine</user>
    <text>chunking is its own set of tradeoffs from amortization</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:40:23.341400</ts>
    <user>Jasmine</user>
    <text>less memory and faster than unchunked  at the expense of less laziness</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:40:29.341600</ts>
    <user>Jasmine</user>
    <text>and less control</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:43:46.341800</ts>
    <user>Madeleine</user>
    <text>I think I had never really thought about nested lazy seq before. It seems like the nested lazynes only makes sense in a cat scenario no?</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:44:20.342000</ts>
    <user>Madeleine</user>
    <text>Otherwise, taking the next element requires full realization of the sequence in it as well </text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:45:22.342200</ts>
    <user>Madeleine</user>
    <text>Hum... or I guess that might be due to me printing the result. It would juat take a lazySeq I'm guessing.</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:46:10.342400</ts>
    <user>Jasmine</user>
    <text>only  really matters in an  expanding  intermediate op, `mapcat` being  the canonical example</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:46:26.342600</ts>
    <user>Jasmine</user>
    <text>but even things that collect and  report can be  affected, like `group-by`</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:46:55.342800</ts>
    <user>Jasmine</user>
    <text>`partition`, `dedupe`, etc</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:47:24.343000</ts>
    <user>Madeleine</user>
    <text>Right I see. Anytime where in theory, taking the next doesn't need everything in the next element to realize.</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:47:43.343200</ts>
    <user>Jasmine</user>
    <text>yeah</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:47:47.343400</ts>
    <user>Madeleine</user>
    <text>Its kind of mind boggling a bit hehe</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:48:29.343700</ts>
    <user>Jasmine</user>
    <text>fortunately, the majority of time it doesn't  matter :)</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:49:55.344700</ts>
    <user>Madeleine</user>
    <text>`(first (last (take 3 (-&amp;gt;&amp;gt; (range 5) (map #(map (fn[a] (println a) (inc a)) (range %)))))))`</text>
  </message>
  <message conversation_id="851">
    <ts>2019-03-19T12:50:08.344900</ts>
    <user>Madeleine</user>
    <text>Haha, its amazing to see.</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:14:15.346600</ts>
    <user>Clarine</user>
    <text>I’m now looking at rewrite-clj as an alternative for tools.analyzer to do some static analysis. It was perfect until I discovered that it doesn’t support ClojureScript and you don’t get line numbers with your tokens…</text>
  </message>
  <message conversation_id="855">
    <ts>2019-03-19T13:26:36.348600</ts>
    <user>Isidro</user>
    <text>another “opinion based” question as s.o. would phrase it - does anybody have any guidance/feelings/grudges/info between clj-http, http-kit, and aleph for production level async http client requests?</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:29:28.349100</ts>
    <user>Clarine</user>
    <text>one argument could be: if you’re already running a server with aleph or http-kit, you have the dependency anyway</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:34:00.350900</ts>
    <user>Lesa</user>
    <text>I'm using clj-http atm. One annoyance was a lack of mocking support for async requests but it otherwise has been quite painless to use, currently using client certs with it which was quite easy to setup</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:35:53.352600</ts>
    <user>Isidro</user>
    <text>read a reddit thread claiming that http-kit randomly stopped working in prod, and it seems that clj-http only does async via callbacks…guess I’m going with aleph until somebody tells me otherwise</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:36:49.353300</ts>
    <user>Isidro</user>
    <text>&lt;@Lesa&gt; async via callbacks or something like futures/promises?</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:38:51.355400</ts>
    <user>Lesa</user>
    <text>Using callbacks. We have a small wrapper that takes as arguments the specific clj-http function, the url, and any options, the wrapper creates a `promise-chan` which the callbacks push their return value onto, and we return that promise-chan to the caller</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:39:08.355800</ts>
    <user>Lesa</user>
    <text>which we can then consume using the usual core.async stuff</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:39:52.356100</ts>
    <user>Lesa</user>
    <text>```(defn- req! [func url options]
  (let [prom-chan (a/promise-chan)
        callback (fn [v] (a/&amp;gt;!! prom-chan v))]
    (func url options callback callback)
    prom-chan))```</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:39:54.356300</ts>
    <user>Isidro</user>
    <text>ok</text>
  </message>
  <message conversation_id="854">
    <ts>2019-03-19T13:41:00.357200</ts>
    <user>Lesa</user>
    <text>the calling code is then responsible for handling any exceptions that come out, but you could return separate result-chan / exception-chan promises as well</text>
  </message>
  <message conversation_id="856">
    <ts>2019-03-19T14:22:37.358600</ts>
    <user>Gina</user>
    <text>Hello! I'm writting a POC web app to learn clojure, and I was thinking on how to handle users. Since I'm going the easy way for now I thought about having a dynamic variable `*user*`, which would be set for every request in a middleware. Something like this (untested):

```
(ns a.vars)
(def ^:dynamic *user* nil)

(ns a.middlewares
  (:require [a.vars :refer [*user*]]))

(defn middleware-add-user [handler]
  (fn [request]
    (binding [*user* (get-user-from-request request)]
      (handler request))))

[...]
```

I'm using `luminus` lein template, which uses `ring` and `immutant/undertow` if I understood the config correctly. My question is: is the `with-bindings` safe to be used in a situation where multiple requests are arriving? In other words, will the binding be unique for each request context? Something like a thread-safe biding?

Thanks for the help :slightly_smiling_face:</text>
  </message>
  <message conversation_id="856">
    <ts>2019-03-19T14:28:00.359700</ts>
    <user>Dann</user>
    <text>&lt;@Gina&gt; it's normal to assoc data onto the `request` object itself - it's a hash map</text>
  </message>
  <message conversation_id="856">
    <ts>2019-03-19T14:28:30.360400</ts>
    <user>Dann</user>
    <text>also I think `with-bindings` there would just be `binding` (but passing the data is cleaner IMHO)</text>
  </message>
  <message conversation_id="856">
    <ts>2019-03-19T14:29:04.361100</ts>
    <user>Gina</user>
    <text>Yes, I imagined, it just feels that I'm gonna have to pass the `user` to virtually every function I call from the routes, so I was trying to be lazy :stuck_out_tongue:.</text>
  </message>
  <message conversation_id="856">
    <ts>2019-03-19T14:30:35.362200</ts>
    <user>Gina</user>
    <text>Regardless of whether it is a poor design (I agree with you), would it work? Is the binding request-specific?</text>
  </message>
  <message conversation_id="856">
    <ts>2019-03-19T14:32:17.363300</ts>
    <user>Dann</user>
    <text>yes, but certain scenarios can make you lose your dynamic binding where an explicit arg would be preserved</text>
  </message>
  <message conversation_id="856">
    <ts>2019-03-19T14:33:11.364500</ts>
    <user>Dann</user>
    <text>clojure's good about propagating bindings, but eg. if you interop with a lib from java that uses threads you can easily lose bindings</text>
  </message>
  <message conversation_id="856">
    <ts>2019-03-19T14:33:28.364700</ts>
    <user>Gina</user>
    <text>I see. Cool. I really appreciate the help &lt;@Dann&gt; :slightly_smiling_face:. Thanks</text>
  </message>
  <message conversation_id="857">
    <ts>2019-03-19T15:20:17.364800</ts>
    <user>Candis</user>
    <text>We (Amperity) use Aleph heavily in production and it’s been great to us so far.</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:07:07.366100</ts>
    <user>Valrie</user>
    <text>hey folks, Is there any protocol to implement in a type that makes it print friendly ?</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:09:22.366300</ts>
    <user>Clarine</user>
    <text>you mean like implementing the toString method of Object?</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:10:24.366800</ts>
    <user>Celestine</user>
    <text>&lt;@Valrie&gt; maybe you're thinking of &lt;https://clojuredocs.org/clojure.core/print-method&gt;</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:10:30.367000</ts>
    <user>Valrie</user>
    <text>maybe</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:11:12.367500</ts>
    <user>Valrie</user>
    <text>thanks &lt;@Celestine&gt; that's what i'm looking for</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:11:33.367900</ts>
    <user>Dann</user>
    <text>there's also print-dup for things that should explicitly be readable from the printed output</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:12:55.368200</ts>
    <user>Clarine</user>
    <text>what does `dup` stand for?</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:15:59.368400</ts>
    <user>Dann</user>
    <text>duplicate</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:16:09.368700</ts>
    <user>Dann</user>
    <text>as in, print, read, get the duplicate back</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:17:01.368900</ts>
    <user>Clarine</user>
    <text>right…</text>
  </message>
  <message conversation_id="859">
    <ts>2019-03-19T18:46:29.369000</ts>
    <user>Sixta</user>
    <text>&lt;@Clarine&gt; it does have a mode which includes line numbers</text>
  </message>
  <message conversation_id="858">
    <ts>2019-03-19T18:46:45.369200</ts>
    <user>Sixta</user>
    <text>But it's separate because it isn't compatible with clojure.zip</text>
  </message>
  <message conversation_id="859">
    <ts>2019-03-19T18:47:21.369400</ts>
    <user>Sixta</user>
    <text>Also see rewrite-cljs in clj commons</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:25:09.374500</ts>
    <user>Ahmad</user>
    <text> zipmap or rename keys does not maintain order same as input keys or map , seems it is due to assoc function which is used by them . Please Can someone suggest an way to rename keys with map key order maintained </text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:28:08.374900</ts>
    <user>Tammera</user>
    <text>I don’t think there is a guarantee that a maps keys remain ordered</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:28:55.375700</ts>
    <user>Tammera</user>
    <text>As in — as a datastructure</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:30:06.376600</ts>
    <user>Tammera</user>
    <text>I wonder what your usecase is, there are sorted-maps in core, and there are ordered-maps in libraries, I just wonder how you wish your map to remain ordered</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:36:59.382800</ts>
    <user>Ahmad</user>
    <text>I get an dictionary of [excel-number-date, values] from Java api . Convert result into sorted-map , similar to here let  [result ( into (sorted-map) java-dict-result)] , now  trying to rename the keys from number into ‘yyyy-mm-dd’ format </text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:37:54.383900</ts>
    <user>Ahmad</user>
    <text>When I rename the keys the order of keys gets changed </text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:38:37.384700</ts>
    <user>Ahmad</user>
    <text>Basically I believe it is due to assoc function used internally </text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:42:59.386100</ts>
    <user>Tammera</user>
    <text>I wonder whether the map you get from renaming keys is still a sorted map. Nevertheless, you could again convert it to a sorted map, can’t you?</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:48:42.390200</ts>
    <user>Ahmad</user>
    <text>Yes I can since new keys are of ‘yyyy-mm-dd’  sorting works fine here. But was checking if there are some way which maintains orders . </text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:56:42.393100</ts>
    <user>Zita</user>
    <text>&lt;@Ahmad&gt; Did you want to preserve the order of insertion, or ensure that they are sorted in key order when iterating?</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:58:51.395600</ts>
    <user>Zita</user>
    <text>for the latter, there's sorted-map:```
user=&amp;gt; (sorted-map :b 2 :d 4 :a 1 :c 3)
{:a 1, :b 2, :c 3, :d 4}```</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T03:59:52.397000</ts>
    <user>Ahmad</user>
    <text>I want to preserve order  while rename keys , Was trying zipmap and set/renames-keys </text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T04:00:14.397400</ts>
    <user>Zita</user>
    <text>for the former, I'm not aware anything native to clojure. you could try using java.util.LinkedHashMap</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T04:07:05.399800</ts>
    <user>Zita</user>
    <text>alternately, you could build your own using a list or vector of pairs; you'd lose the map syntax shortcuts and the sub-linear access time, but insertion order would be preserved</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T04:09:28.401900</ts>
    <user>Zita</user>
    <text>or: store insertion order in a list/vector and pairs in a map; you'd just need to keep the two structures synchronized</text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T04:10:09.402600</ts>
    <user>Ahmad</user>
    <text>Ok I sort my result again after rename , which works for my current scenario </text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T04:11:13.403900</ts>
    <user>Ahmad</user>
    <text>I would try you suggestions later and add them to my util , thx for your suggestion </text>
  </message>
  <message conversation_id="860">
    <ts>2019-03-20T04:12:25.404800</ts>
    <user>Zita</user>
    <text>note that LinkedHashMap is a mutable map</text>
  </message>
  <message conversation_id="861">
    <ts>2019-03-20T04:47:47.406300</ts>
    <user>Clarine</user>
    <text>&lt;@Sixta&gt; How do I turn the line numbers on? I can’t find any docs on this</text>
  </message>
  <message conversation_id="861">
    <ts>2019-03-20T04:51:52.406500</ts>
    <user>Clarine</user>
    <text>I found it. Like tools.reader it uses meta for this.</text>
  </message>
  <message conversation_id="861">
    <ts>2019-03-20T04:52:00.406700</ts>
    <user>Sixta</user>
    <text>Yep!</text>
  </message>
  <message conversation_id="861">
    <ts>2019-03-20T04:52:24.406900</ts>
    <user>Clarine</user>
    <text>Thanks! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="861">
    <ts>2019-03-20T04:55:28.407100</ts>
    <user>Sixta</user>
    <text>No problem, I'm excited to see what you come up with :)</text>
  </message>
  <message conversation_id="862">
    <ts>2019-03-20T05:59:36.409200</ts>
    <user>Karren</user>
    <text>&lt;@Ahmad&gt; I'm not sure I understand your issue - if you use `sorted-map` then the order is preserved after `assoc`, `rename-keys` et al.
If sorting after `rename-keys` would lead to a different order from what you want then I don't understand the "I sort my result again after rename" bit. However, in that case you could use &lt;https://github.com/flatland/ordered/blob/develop/src/flatland/ordered/map.clj#L140&gt;</text>
  </message>
  <message conversation_id="863">
    <ts>2019-03-20T10:33:08.410700</ts>
    <user>Sherril</user>
    <text>does anyone know if there is a java equivalent for this datastructure?</text>
  </message>
  <message conversation_id="863">
    <ts>2019-03-20T10:33:12.410900</ts>
    <user>Sherril</user>
    <text>&lt;https://github.com/michalmarczyk/psq.clj&gt;</text>
  </message>
  <message conversation_id="863">
    <ts>2019-03-20T11:03:05.411700</ts>
    <user>Holly</user>
    <text>&lt;@Sherril&gt; you could try adapting &lt;https://github.com/michalmarczyk/psq.clj/blob/master/src/main/java/psq/PersistentPrioritySearchQueue.java&gt; to pure java</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T12:39:42.414100</ts>
    <user>Clarine</user>
    <text>Graal native complains about:
```
Discovered unresolved type during parsing: rewrite_clj.node.protocols.Node
```
because I’m using that protocol somewhere. How can I resolve this?</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T12:52:35.416600</ts>
    <user>Clarine</user>
    <text>somehow moving the predicate in which I use this protocol to another namespace helps…
```
(ns ild.pred
  (:require [rewrite-clj.node.protocols :as node]))

(defn uneval? [node]
  (= :uneval (node/tag node)))
```</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T12:52:50.417100</ts>
    <user>Clarine</user>
    <text>it’s black magic to me</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T12:56:36.420000</ts>
    <user>Danna</user>
    <text>I am trying to make handling of Postgres enumtypes feel more idomatic.
I have writtten an `intern` function to help with this
```
(defn intern-enumobj
  [_ enum-obj]
  (println enum-obj)
  (let [start-ns *ns*
        the-ns (in-ns (symbol (str start-ns "." (namespace enum-obj))))
        objref (intern the-ns (symbol (name enum-obj)) enum-obj)]
    (in-ns (symbol (str start-ns)))
    objref))
```
this is called directly within a namespace

My problem is that I cannot refer to one of these dynamically created namespaces from a `(:require` clause; I get a the error ```CompilerException java.io.FileNotFoundException: Could not locate notifications/enumset/channel_type__init.class or notifications/enumset/channel_type.clj on classpath. Please check that namespaces with dashes use underscores in the Clojure file name., compiling:```

I can work around this by _instead_ making a call to `clojure.core/alias`
This feels a bit hacky though; is there a better way of doing this?</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T12:58:12.420500</ts>
    <user>Rosaline</user>
    <text>that function is just broken</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T12:59:30.421000</ts>
    <user>Rosaline</user>
    <text>using in-ns in code like that is never a great idea</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:00:24.422000</ts>
    <user>Rosaline</user>
    <text>I'd suggest starting with a `(def postgres-enum-objects (create-a-map-from-name-to-enum-object))`</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:00:42.422400</ts>
    <user>Danna</user>
    <text>yeah i did.</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:01:17.422900</ts>
    <user>Rosaline</user>
    <text>which will give you want you want, without creating namespaces</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:02:55.424000</ts>
    <user>Danna</user>
    <text>so it marginally nicer to refer code to the var
`enumset.comms_status/sent`
rather than to
`(:sent enumset/comms_status)`</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:03:42.424800</ts>
    <user>Danna</user>
    <text>but I accept that it is unimportant in the big scheme of things
and perhaps I should just get over it</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:04:32.425800</ts>
    <user>Danna</user>
    <text>it seemed worth investigating though;
In practice I will always need the map representation as well in order to process keywords</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:05:07.426200</ts>
    <user>Danna</user>
    <text>is this not the sort of this a self modifying LISP is supposed to be good at?</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:08:32.428100</ts>
    <user>Evonne</user>
    <text>What if you create the namespace the regular way, and just write a macro to automatically `def` the names you want based on the enum?</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:08:44.428400</ts>
    <user>Danna</user>
    <text>actually if I'm using plain old `alias` I can use `create-ns` instead of `in-ns` which is a little simpler but doens't address your fundamental point
```
(defn intern-enumobj
  [_ enum-obj]
  (let [the-ns (create-ns (symbol (str *ns* "." (namespace enum-obj))))]
    (intern the-ns (symbol (name enum-obj)) enum-obj)))```</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:09:21.428500</ts>
    <user>Danna</user>
    <text>so I have a single `enumset` namespace where I define the  enumtype/enumvals</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:09:51.428700</ts>
    <user>Danna</user>
    <text>I'd rather keep the 'enum type' definitions in one place</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:10:25.428900</ts>
    <user>Danna</user>
    <text>rather than have a ```(def comms_status (postgres-enumset "comms_status"
                                    #{"abandoned"
                                      "failed"
                                      "sent"
                                      "unsent"}))```
map in `enumset` and then seperate-and-distinct `enumset/comms_status.clj` file</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:12:17.429600</ts>
    <user>Danna</user>
    <text>but yeah perhaps
I'm just looking for raindows in a star filled sky</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:12:40.430100</ts>
    <user>Bee</user>
    <text>So what happens to the parts of your program that rely on `&amp;lt;ns&amp;gt;.&amp;lt;enum-obj&amp;gt;` when they try to load when the database connection isn't available yet?</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:13:05.430800</ts>
    <user>Danna</user>
    <text>well I've hard coded it as strings</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:13:15.431200</ts>
    <user>Danna</user>
    <text>so it does not rely on a database connection</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:13:22.431600</ts>
    <user>Danna</user>
    <text>tempting although that was</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:13:39.432000</ts>
    <user>Bee</user>
    <text>Oh so you just are aliasing data in some ns to vars in another ns?</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:13:43.432100</ts>
    <user>Danna</user>
    <text>hardcoded like ````(def comms_status (postgres-enumset "comms_status"
                                    #{"abandoned"
                                      "failed"
                                      "sent"
                                      "unsent"}))```</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:13:52.432400</ts>
    <user>Danna</user>
    <text>yeah</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:14:17.433100</ts>
    <user>Bee</user>
    <text>So 99 times out of 100 I'd never advise someone out of the blue to "use a macro instead"</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:14:24.433300</ts>
    <user>Evonne</user>
    <text>Right, I’m thinking you’d create the `enumset/comms_status.clj` file manually, give it a regular `(ns ...)` declaration, and then have a macro  that could do something like `(defenums comms_status)`</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:15:12.434400</ts>
    <user>Evonne</user>
    <text>just to save yourself the trouble of hooking everything up to keep the compiler happy.</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:15:33.435000</ts>
    <user>Bee</user>
    <text>But you've managed to work your way into the 1%. I really encourage you to write a macro that iterates over `comms_status` and defs the appropriate vars, and to invoke the macro in the namespace where you want the aliases to show up, because I predict it'll be more evident and less error prone than programmatically interacting with the ns api.</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:16:58.436000</ts>
    <user>Danna</user>
    <text>well. sticking just a
```(alias 'comms_status 'notifications.enumset.comms_status)
``` directly underneath the namespace declaration seems to solve the problem</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:17:21.436300</ts>
    <user>Danna</user>
    <text>and is simpler than a macro</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:20:54.436500</ts>
    <user>Evonne</user>
    <text>Interesting.</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:36:19.436700</ts>
    <user>Danna</user>
    <text>okay so I have a numpty macro question then: how do I return multiple S expressions from a macro?</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:36:35.436900</ts>
    <user>Danna</user>
    <text>```(defmacro generate-postgresenum
  [enum-type valset]
  (let [ns-name (symbol (str *ns* "." enum-type))
        enum-map (postgres-enummap enum-type valset)
        syms (into '() (map (fn [v] (list 'def (name v) v))) (vals enum-map))]
    (list* `(ns ~ns-name)
           `(def enum-map ~enum-map)
           syms)))```</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:38:29.437100</ts>
    <user>Danna</user>
    <text>```(macroexpand '(enumset/generate-postgresenum "comms_status"
                                             #{"abandoned"
                                               "failed"
                                               "sent"
                                               "unsent"}))```</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:39:01.437300</ts>
    <user>Danna</user>
    <text>then gives me a *list* of s-expressions
which I need to eviscerate</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:44:41.437700</ts>
    <user>Danna</user>
    <text>Hmm this might be one rabbithole too far
at this point</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:55:11.439900</ts>
    <user>Danna</user>
    <text>so a namespace is a sequence of s-expressions, starting with `(ns `
and I don't know you would get a macro to return a sequence of s-expressions; `unquote-splicing` looks it wants a single container to be run inside
which isn't compatible with the format of a `(ns`
Is it possible to do?</text>
  </message>
  <message conversation_id="865">
    <ts>2019-03-20T13:57:16.440900</ts>
    <user>Dann</user>
    <text>you can't return N items, but you can use one collection as if it were N items, and that's what unquote-splicing is for</text>
  </message>
  <message conversation_id="865">
    <ts>2019-03-20T13:58:29.442100</ts>
    <user>Dann</user>
    <text>so you don't write a magic macro that inserts multiple things into the parent (ns), you write a new top level form that expands to an ns call, and also expands some collection</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T13:59:02.442800</ts>
    <user>Jasmine</user>
    <text>And sometimes it’s useful to emit multiple things in a `do`</text>
  </message>
  <message conversation_id="865">
    <ts>2019-03-20T14:01:24.444100</ts>
    <user>Jasmine</user>
    <text>Although emitting an ns form + stuff in it is a classic issue aka “the Gilardi scenario”</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:02:43.444900</ts>
    <user>Jasmine</user>
    <text>Which, reading again is probably irrelevant for what you’re seeking to do</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:07:02.445800</ts>
    <user>Danna</user>
    <text>i'm starting to think that `(create-ns` and a few `alias` statements is comparatively quite simple</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:07:43.446300</ts>
    <user>Danna</user>
    <text>&amp;gt; Although emitting an ns form + stuff in it is a classic issue aka “the Gilardi scenario”
can you point me any discussions/blog posts on this?</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:08:36.446600</ts>
    <user>Jasmine</user>
    <text>Google is prob best</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:08:43.446900</ts>
    <user>Danna</user>
    <text>ok thanks</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:08:58.447700</ts>
    <user>Danna</user>
    <text>`Gilardi` is quite a Googleable phrase</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:09:16.448500</ts>
    <user>Jasmine</user>
    <text>But really it’s having a block of code that need to be broken up into multiple top level expressions to be properly evaluated </text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:09:57.449000</ts>
    <user>Dann</user>
    <text>&lt;@Danna&gt; how is using create-ns etc. better than using ns inside a macro? I don't fully understand your use case</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:15:39.449100</ts>
    <user>Danna</user>
    <text>so I would want write a macro that emitted a sequence of s-expressions like
```
(ns notifications.enumset.comms_status
  (:require [notifications.enumset :as enumset]))

(def enum-map (enumset/generate-postgresenum* "comms_status" #{"abandoned" "failed" "sent" "unsent"}))
(def abandoned (:abandoned enum-map))
(def failed (:failed enum-map))
(def sent (:sent enum-map))
(def unsent (:unsent enum-map))
```
and I don't know how I could get a single macro to do that</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:16:07.449300</ts>
    <user>Dann</user>
    <text>the normal thing is to put them all in a `do` block, as &lt;@Jasmine&gt; said</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:16:53.449700</ts>
    <user>Dann</user>
    <text>putting the forms at the top level is good style, but clojure doesn't require it</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:17:21.450600</ts>
    <user>Jasmine</user>
    <text>Yeah, this is the kind of thing that typically doesn’t work well in a single top level do</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:17:42.451200</ts>
    <user>Jasmine</user>
    <text>Specifically the ns part (the rest is fine)</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:20:55.451400</ts>
    <user>Danna</user>
    <text>can I nest the forms _inside_ the `ns` part</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:21:06.451600</ts>
    <user>Danna</user>
    <text>would be the other obvious thing to try</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:22:14.451800</ts>
    <user>Danna</user>
    <text>(I just tried wrapping that wole thing in a `do` in a .clj file; its weird)</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:23:11.452100</ts>
    <user>Danna</user>
    <text>this is a fairly frivolous piece of syntactic sugar for me</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:23:38.452300</ts>
    <user>Danna</user>
    <text>and I've probably spent enough time on it</text>
  </message>
  <message conversation_id="864">
    <ts>2019-03-20T14:23:49.452500</ts>
    <user>Danna</user>
    <text>thanks for your input</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:07:26.455000</ts>
    <user>Marlen</user>
    <text>Is it possible to read and transform EDN without evaluating the reader literals? I’m playing with programatically transforming a `duct` `config.edn`, and I need to be able to `read-&amp;gt;transform-&amp;gt;write` without evaluating some of the literals—since the output would contain, for example, expanded absolute file paths for resources, etc</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:11:00.455100</ts>
    <user>Marlen</user>
    <text>I supposed I could override the readers?</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:11:36.455800</ts>
    <user>Jasmine</user>
    <text>yes, for sure. it's all up to what your data readers do</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:11:46.456100</ts>
    <user>Jasmine</user>
    <text>they are passed read but unevaluated values</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:12:13.456600</ts>
    <user>Jasmine</user>
    <text>you can use the built-in `tagged-literal` function to read your data literals and  print back to the same data literal (without doing any eval)</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:13:22.457000</ts>
    <user>Marlen</user>
    <text>ah perfect, thanks Alex!</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:14:29.457300</ts>
    <user>Jasmine</user>
    <text>```user=&amp;gt; (def x (tagged-literal 'hi '[a b c]))
#'user/x
user=&amp;gt; x
#hi [a b c]
user=&amp;gt; (:tag x)
hi
user=&amp;gt; (:form x)
[a b c]```</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:15:28.458400</ts>
    <user>Jasmine</user>
    <text>tagged literals were designed specifically to support this case (flowing data through intermediaries without necessarily "understanding" it)</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:15:40.458700</ts>
    <user>Marlyn</user>
    <text>if the tag is `#inst` or `#uuid` -- you have to explicitly pass those in to override them</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:16:14.459100</ts>
    <user>Jasmine</user>
    <text>yes,  otherwise  you can  fall back to setting the `*default-data-reader-fn*`</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:16:56.459600</ts>
    <user>Jasmine</user>
    <text>`(binding [*default-data-reader-fn*  tagged-literal]   ...read-transform-write...  )`</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:17:58.459900</ts>
    <user>Marlyn</user>
    <text>```
user=&amp;gt; (edn/read-string {:readers {'inst #(tagged-literal 'inst %)} } "#inst \"what?\"")
#inst "what?"
```</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:18:06.460200</ts>
    <user>Marlyn</user>
    <text>inst and uuid are edge cases</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:20:28.460600</ts>
    <user>Marlen</user>
    <text>You guys are awesome, that was exactly what I needed. Thanks!</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:24:24.461300</ts>
    <user>Shayla</user>
    <text>i have a quick question about macros in tests. I want to get nice `expected: X actual: Y` output from calling `is` on a `re-find`</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:25:47.462100</ts>
    <user>Shayla</user>
    <text>I don't think I need to write a new reporter, I just need to compare the output of `re-find` with whatever I want to pass in</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:26:37.463200</ts>
    <user>Shayla</user>
    <text>however, i can't seem to write a macro (or function, if necessary) to take in the expected string and the actual string and compare them in such a way as the reporter will put them into the right places</text>
  </message>
  <message conversation_id="867">
    <ts>2019-03-20T16:26:45.463500</ts>
    <user>Shayla</user>
    <text>has anyone tried their hand at something like this?</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:30:57.464100</ts>
    <user>Shayla</user>
    <text>The best I've gotten is to double-print the error by embedding `do-report`:
```
(defmacro last-log-contains
  [state content]
  `(let [log# (-&amp;gt; @~state :log last :text)
         found# (re-find (re-pattern ~content) log#)]
     (do-report
       {:type (if found# :pass :fail)
        :actual log#
        :expected ~content})))
```</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:38:51.465000</ts>
    <user>Shayla</user>
    <text>after some more experimentation, i've found that returning `true` at the end works to suppress the secondary error but it then hides the comment at the end of the `is`</text>
  </message>
  <message conversation_id="867">
    <ts>2019-03-20T16:41:29.466400</ts>
    <user>Becki</user>
    <text>`is` is a macro so that you can tell it how to execute and compare the results of the test right?</text>
  </message>
  <message conversation_id="867">
    <ts>2019-03-20T16:41:59.466700</ts>
    <user>Jasmine</user>
    <text>are you aware that `is` takes assertions with an open multimethod `assert-expr`? you could probably define your own assertion type more easily than this</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:42:42.467200</ts>
    <user>Shayla</user>
    <text>I am not! that's super interesting</text>
  </message>
  <message conversation_id="867">
    <ts>2019-03-20T16:43:53.468600</ts>
    <user>Jasmine</user>
    <text>so you'd define `(defmethod clojure.test/assert-expr #'log-contains [state content] (...))` and use it like `(is (log-contains ...))`</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:44:07.469100</ts>
    <user>Shayla</user>
    <text>yeah, i see what you're saying, that's cool as heck</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:44:16.469300</ts>
    <user>Jasmine</user>
    <text>look at the definitions in clojure.test for more info</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:44:41.470000</ts>
    <user>Becki</user>
    <text>and the docstring for clojure.test namespace is excellent and a nice little novel of how to use it</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:44:50.470200</ts>
    <user>Shayla</user>
    <text>awesome, thank you so much</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:44:53.470400</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L492&gt;</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:45:08.470900</ts>
    <user>Jasmine</user>
    <text>around there - there's also a big inline comment  higher up in  the source that  explains some of this</text>
  </message>
  <message conversation_id="867">
    <ts>2019-03-20T16:46:11.471200</ts>
    <user>Jasmine</user>
    <text>oh yeah, like dpsutton says :)</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:53:28.471600</ts>
    <user>Shayla</user>
    <text>ooooooo yeah, that's awesome</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:53:45.472100</ts>
    <user>Shayla</user>
    <text>Thank you so much, &lt;@Becki&gt; and &lt;@Jasmine&gt;, y'all are great</text>
  </message>
  <message conversation_id="866">
    <ts>2019-03-20T16:55:12.472700</ts>
    <user>Shayla</user>
    <text>For those following along at home, here's my solution, thanks to some generous help:
```
(defmethod assert-expr 'last-log-contains
  [msg form]
  `(let [state# ~(nth form 1)
         content# ~(nth form 2)
         log# (-&amp;gt; @state# :log last :text)
         found# ~form]
     (do-report
       {:type (if found# :pass :fail)
        :actual log#
        :expected content#
        :message ~msg})
     found#))
```</text>
  </message>
  <message conversation_id="868">
    <ts>2019-03-20T18:49:23.474700</ts>
    <user>Guy</user>
    <text>My understanding of cider is that it starts the nrepl and sends the code I write in emacs to the nrepl; if that is correct, when I say `(doc doc)` in the `lein repl` that works but not in my cider repl.</text>
  </message>
  <message conversation_id="868">
    <ts>2019-03-20T18:51:25.475200</ts>
    <user>Dann</user>
    <text>doc is `clojure.repl/doc` and clojure.repl is only in scope in your initial ns (whichever that is) usually</text>
  </message>
  <message conversation_id="868">
    <ts>2019-03-20T18:51:49.475800</ts>
    <user>Dann</user>
    <text>so if you run it in a namespace other than the init, it usually won't find doc (but cider has its own tooling for pulling up docs)</text>
  </message>
  <message conversation_id="868">
    <ts>2019-03-20T18:54:41.476600</ts>
    <user>Guy</user>
    <text>&lt;@Dann&gt; thanks. Any pointers on why the cider’s tooling for pulling up the docs are not working?</text>
  </message>
  <message conversation_id="868">
    <ts>2019-03-20T18:55:00.476900</ts>
    <user>Dann</user>
    <text>&lt;#C0617A8PQ|cider&gt; is likely your best bet</text>
  </message>
  <message conversation_id="868">
    <ts>2019-03-20T18:55:27.477100</ts>
    <user>Guy</user>
    <text>thanks</text>
  </message>
  <message conversation_id="868">
    <ts>2019-03-20T19:03:10.477200</ts>
    <user>Clarine</user>
    <text>Made this today :slightly_smiling_face: &lt;https://github.com/borkdude/clj-kondo&gt;</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T06:54:37.479000</ts>
    <user>See</user>
    <text>Any ideas on where to find the fault? Slightly stumped by this stack trace</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T06:54:51.479500</ts>
    <user>See</user>
    <text>I get this when running lein midje</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T06:55:14.479700</ts>
    <user>See</user>
    <text>and after the tests have run</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T06:59:31.480400</ts>
    <user>Leeann</user>
    <text>have you forgotten to explicitly require `io` in one of your namespaces?</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T07:00:17.481400</ts>
    <user>Leeann</user>
    <text>Your code might be working because `io` might be loaded by another ns when running the code, but when running the tests, `io` might not be indirectly loaded.</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T07:00:26.481800</ts>
    <user>Leeann</user>
    <text>A recent version of Eastwood has a linter for this.</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T07:00:50.482000</ts>
    <user>Leeann</user>
    <text>&lt;https://github.com/jonase/eastwood/blob/master/src/eastwood/linters/implicit_dependencies.clj&gt;</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T07:01:28.482300</ts>
    <user>See</user>
    <text>Will give it a spin</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T07:03:20.482600</ts>
    <user>See</user>
    <text>Found it. Thanks &lt;@Leeann&gt;</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T07:05:32.483100</ts>
    <user>See</user>
    <text>He… big midje tests crashed eastwood when analalyzing the test code</text>
  </message>
  <message conversation_id="869">
    <ts>2019-03-21T07:25:36.483400</ts>
    <user>Leeann</user>
    <text>:sadpanda:</text>
  </message>
  <message conversation_id="870">
    <ts>2019-03-21T08:15:17.486400</ts>
    <user>Debi</user>
    <text>Question regarding cemerick.friend: the typical approach seems to be that you perform your authentication (including starting sessions) in middleware. However, I would like to start a session in handler body. Reason: in that handler body the user is created in the database, and I would like to associate that user with the session. Is there a way to do this?</text>
  </message>
  <message conversation_id="871">
    <ts>2019-03-21T09:36:58.487500</ts>
    <user>Sonny</user>
    <text>Does tools.alpha / deps.edn have capability of starting a repl in a given namespace like the :init-ns thing in lein?</text>
  </message>
  <message conversation_id="871">
    <ts>2019-03-21T09:42:00.488100</ts>
    <user>Jasmine</user>
    <text>not really, that's hardcoded in the default repl code</text>
  </message>
  <message conversation_id="871">
    <ts>2019-03-21T09:42:52.489000</ts>
    <user>Jasmine</user>
    <text>you could (instead of using the default repl start),  run a script that started the repl yourself with that part customized</text>
  </message>
  <message conversation_id="871">
    <ts>2019-03-21T09:43:14.489400</ts>
    <user>Jasmine</user>
    <text>clojure.main/repl is (annoyingly) customizable</text>
  </message>
  <message conversation_id="871">
    <ts>2019-03-21T09:43:33.489800</ts>
    <user>Jasmine</user>
    <text>I assume that's  more  trouble than it's worth though</text>
  </message>
  <message conversation_id="871">
    <ts>2019-03-21T09:47:31.492800</ts>
    <user>Sonny</user>
    <text>Yeah, most likely though I will take a look. I think this is a case of me trying to map my previous lein style onto tools.alpha. One thing I used to do quite a bit is create a repl namespace with all my fun little tools and have lein start the repl there. I can either switch every time I start (first world problems), or create the `user` namespace. The latter triggers my OCD a bit though since I like to have everything sit nicely in the project NS.

Not the end of the world by any means. Thanks Alex.</text>
  </message>
  <message conversation_id="871">
    <ts>2019-03-21T09:49:14.494200</ts>
    <user>Jasmine</user>
    <text>ultimately,  it's all  a matter of calling  clojure.main/repl  with the right stuff. so  just follow what clojure.main does  and  deviate where it's useful to you. you can bake that into an  alias with :main-opts  in your deps.edn.</text>
  </message>
  <message conversation_id="871">
    <ts>2019-03-21T09:55:04.495600</ts>
    <user>Sonny</user>
    <text>Ok, that doesn't sound too tricky on the surface of things. I will take a look. As I think about it though, i'd probably want it all to work smoothly with cursive and the REPL integration there too. It's probably easier to just get used to switching it.</text>
  </message>
  <message conversation_id="872">
    <ts>2019-03-21T10:56:37.496500</ts>
    <user>Holly</user>
    <text>is it possible to memoize a `deftype`'s proto impls?</text>
  </message>
  <message conversation_id="872">
    <ts>2019-03-21T11:06:39.497200</ts>
    <user>Harris</user>
    <text>no, but you can `(deftype T [] P (f [this arg] (memo-f this arg)))`</text>
  </message>
  <message conversation_id="872">
    <ts>2019-03-21T11:06:48.497400</ts>
    <user>Harris</user>
    <text>where `memo-f` is your concrete memozied impl</text>
  </message>
  <message conversation_id="872">
    <ts>2019-03-21T11:08:50.498300</ts>
    <user>Holly</user>
    <text>tks, thats what im doing. ideally the memoization would not be observable outside the deftype, but this works too</text>
  </message>
  <message conversation_id="872">
    <ts>2019-03-21T11:08:59.498500</ts>
    <user>Bart</user>
    <text>bah, why is my brain stuck on this ...</text>
  </message>
  <message conversation_id="872">
    <ts>2019-03-21T11:09:26.499100</ts>
    <user>Bart</user>
    <text>i have this long list of `true/false` conditions that should each be checked and if `true`, add a specific key to a vector</text>
  </message>
  <message conversation_id="872">
    <ts>2019-03-21T11:17:37.501100</ts>
    <user>Bart</user>
    <text>and the only way i came up with was stuffing `conditions` and `keys` into each their vector, `zipmap`-ing those, and filtering the resulting `map`. there must be something nice</text>
  </message>
  <message conversation_id="872">
    <ts>2019-03-21T11:17:47.501300</ts>
    <user>Bart</user>
    <text>*nicer</text>
  </message>
  <message conversation_id="873">
    <ts>2019-03-21T11:28:34.503000</ts>
    <user>Danna</user>
    <text>```(into {} (comp (filter (fn [{:keys [condition] ...)) (mapcat (fn [{:keys [keys vals]}] (map vector keys vals))) &amp;lt;&amp;lt;list of things...&amp;gt;&amp;gt;```
kinda thing?</text>
  </message>
  <message conversation_id="873">
    <ts>2019-03-21T11:29:12.503800</ts>
    <user>Danna</user>
    <text>it sounds like it _IS_ a filter and a map, fundamentally</text>
  </message>
  <message conversation_id="872">
    <ts>2019-03-21T11:33:49.504100</ts>
    <user>Bart</user>
    <text>None</text>
  </message>
  <message conversation_id="873">
    <ts>2019-03-21T11:34:16.504800</ts>
    <user>Bart</user>
    <text>maybe it is. this was my solution that I thought smelled a little funny.</text>
  </message>
  <message conversation_id="873">
    <ts>2019-03-21T11:58:37.506100</ts>
    <user>Danna</user>
    <text>well that call to `zipmap` does seem like wasted electricity</text>
  </message>
  <message conversation_id="873">
    <ts>2019-03-21T12:00:20.506500</ts>
    <user>Bart</user>
    <text>yup. i wanted a solution that avoided that and just worked on the original lists</text>
  </message>
  <message conversation_id="873">
    <ts>2019-03-21T12:10:13.506900</ts>
    <user>Danna</user>
    <text>something like ```(sequence (comp (map (fn [k c] (when (true? c) k)))
                (filter some?))
          (range 10) 
          (cycle [nil true nil]))``` maybe</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:07:42.509400</ts>
    <user>Coreen</user>
    <text>hello, is it possible that with large lists `rand-nth` can go in `stackoverflow`?</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:08:54.509900</ts>
    <user>Dann</user>
    <text>it uses nth, and nth doesn't consume more stack to get larger indexes</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:09:15.510800</ts>
    <user>Becki</user>
    <text>did you build up your large list with `concat`?</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:09:17.510900</ts>
    <user>Dann</user>
    <text>but if coll is defined pathologically, `(count coll)` can stack overflow</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:09:28.511300</ts>
    <user>Dann</user>
    <text>yeah, what &lt;@Becki&gt; said, that would be the s/o risk</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:09:31.511400</ts>
    <user>Coreen</user>
    <text>yep</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:09:55.511900</ts>
    <user>Becki</user>
    <text>anyone have the link?</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:10:00.512000</ts>
    <user>Clarine</user>
    <text>ah</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:10:08.512500</ts>
    <user>Dann</user>
    <text>&lt;https://stuartsierra.com/2015/04/26/clojure-donts-concat&gt;</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:11:01.513500</ts>
    <user>Dann</user>
    <text>it's not just about concat - it's also the more general problem of mixing strict execution and lazy functions in a way that matches up badly</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:11:15.514000</ts>
    <user>Dann</user>
    <text>but recursively calling concat is the common source of the problem</text>
  </message>
  <message conversation_id="874">
    <ts>2019-03-21T15:11:17.514100</ts>
    <user>Becki</user>
    <text>(common pitfall by the way, &lt;@Coreen&gt;) its the best dicussion of what's going on</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:23:02.521000</ts>
    <user>Adelia</user>
    <text>Earlier, I submitted &lt;https://dev.clojure.org/jira/browse/CLJ-2493&gt;, a fix for clojure.java.browse/browse-url hanging on systems that use xdg-open. If there's agreement that my diagnosis makes sense, I would be willing to also submit some code, but I'm unfamiliar with the process for Clojure. I know there's the CA &amp;amp; some sort of patch format. Maybe it's GitHub-like (Fork, branch, make changes, git diff), but I'd appreciate some guidance.</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:24:07.522000</ts>
    <user>Latonya</user>
    <text>You can also ask on the clojure-dev channel here, but the process for developing and creating patches is documented.  Finding link ...</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:24:11.522100</ts>
    <user>Dann</user>
    <text>there's a git command that creates a patch, I think there's a clojure doc that outlines the steps; the git command is `git format-patch`</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:25:39.522400</ts>
    <user>Latonya</user>
    <text>&lt;https://clojure.org/community/developing_patches&gt;</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:26:19.523100</ts>
    <user>Latonya</user>
    <text>Not sure of your expectations, but just realize that code review and patch submission proceed at a pace comfortable for the maintainers, not necessarily the submitters.</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:27:54.524400</ts>
    <user>Jasmine</user>
    <text>ticket and approach seem reasonable</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:28:36.524900</ts>
    <user>Adelia</user>
    <text>Thanks to all. New to this Slack thing also (just signed up). I don't see a clojure-dev channel</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:28:43.525100</ts>
    <user>Jasmine</user>
    <text>CA: &lt;https://secure.na1.echosign.com/public/hostedForm?formid=95YMDL576B336E&gt;</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:28:52.525400</ts>
    <user>Jasmine</user>
    <text>&lt;#C06E3HYPR|clojure-dev&gt;</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:35:48.526000</ts>
    <user>Adelia</user>
    <text>CA signed. Now to see about the patch :slightly_smiling_face:</text>
  </message>
  <message conversation_id="876">
    <ts>2019-03-21T17:48:53.526400</ts>
    <user>Clarine</user>
    <text>Maybe multiple `:as` should be prohibited by the ns/require spec?
```
(ns foo (:require [clojure.set :as s :as set]))
```
It seems the last `:as` wins</text>
  </message>
  <message conversation_id="875">
    <ts>2019-03-21T17:53:56.526800</ts>
    <user>Dann</user>
    <text>I think it comes down to this ```user=&amp;gt; ((fn [&amp;amp; {as :as}] as) :as 'a :as 'b)
b```</text>
  </message>
  <message conversation_id="876">
    <ts>2019-03-21T18:53:48.529200</ts>
    <user>Adelia</user>
    <text>Proposed patch for CLJ-2493 attached. Apologies for anything non-standard. It _is_ my first patch. (Hopefully not my last)</text>
  </message>
  <message conversation_id="876">
    <ts>2019-03-21T20:18:11.529600</ts>
    <user>Latonya</user>
    <text>Tried it out and added comments with results on the ticket.</text>
  </message>
  <message conversation_id="877">
    <ts>2019-03-21T20:22:43.529900</ts>
    <user>Jasmine</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="877">
    <ts>2019-03-21T20:23:00.530300</ts>
    <user>Jasmine</user>
    <text>btw, &lt;#C06E3HYPR|clojure-dev&gt; is prob better channel for this stuff, but no biggie</text>
  </message>
  <message conversation_id="878">
    <ts>2019-03-22T00:21:27.531000</ts>
    <user>Faustino</user>
    <text>where can I find the COC for this channel?</text>
  </message>
  <message conversation_id="878">
    <ts>2019-03-22T00:51:56.531800</ts>
    <user>Celestine</user>
    <text>&lt;@Faustino&gt; Look at the Channel Details for this channel (click the `(i)` button top right to get the sidebar, then expand Channel Details)</text>
  </message>
  <message conversation_id="879">
    <ts>2019-03-22T02:44:26.532500</ts>
    <user>Guy</user>
    <text>I am using postgres, Is there some lib that does type conversion like hashmap to json?</text>
  </message>
  <message conversation_id="879">
    <ts>2019-03-22T02:46:04.533200</ts>
    <user>Tammera</user>
    <text>ehm, what do you mean. Do you want to store a hashmap in clojure as a JSON(B) column in postgres?</text>
  </message>
  <message conversation_id="879">
    <ts>2019-03-22T02:46:29.533500</ts>
    <user>Guy</user>
    <text>yes</text>
  </message>
  <message conversation_id="879">
    <ts>2019-03-22T02:47:02.534000</ts>
    <user>Guy</user>
    <text>and vice versa.</text>
  </message>
  <message conversation_id="879">
    <ts>2019-03-22T02:47:45.534500</ts>
    <user>Guy</user>
    <text>array to vector</text>
  </message>
  <message conversation_id="879">
    <ts>2019-03-22T02:48:25.534600</ts>
    <user>Tammera</user>
    <text>yeah ofcourse, would be stupid if you could store something in postgres but not get it out right x)</text>
  </message>
  <message conversation_id="879">
    <ts>2019-03-22T02:52:04.535200</ts>
    <user>Tammera</user>
    <text>but sadly, this is where my knowledge ends, I did find this: &lt;https://github.com/jeffpsherman/postgres-jsonb-clojure&gt;, but I can’t say that I tried</text>
  </message>
  <message conversation_id="880">
    <ts>2019-03-22T03:10:35.535700</ts>
    <user>Guy</user>
    <text>nice, that was helpful. Thank you</text>
  </message>
  <message conversation_id="881">
    <ts>2019-03-22T03:17:40.536900</ts>
    <user>Tressa</user>
    <text>i got this bit from luminus
```
(extend-protocol jdbc/IResultSetReadColumn
  org.postgresql.jdbc.PgArray
  (result-set-read-column [value metadata index]
    (vec (.getArray value))))
```</text>
  </message>
  <message conversation_id="881">
    <ts>2019-03-22T03:18:11.537200</ts>
    <user>Tressa</user>
    <text>it works with array/vector</text>
  </message>
  <message conversation_id="881">
    <ts>2019-03-22T04:53:35.538600</ts>
    <user>Mariela</user>
    <text>any reason why macroexpand-1 would not work in a the context of a `clojure.core/deftest`?

My test is in the form

```
(testing "The macro expands to a known-good form"
    (is (= '(foo ...)
           (macroexpand-1 '(foobarize ...)))))
```</text>
  </message>
  <message conversation_id="881">
    <ts>2019-03-22T04:54:25.539500</ts>
    <user>Mariela</user>
    <text>if run it from the repl, the test passes. But as I run the test suite, `macroexpand-1` expands nothing, so the equality fails</text>
  </message>
  <message conversation_id="881">
    <ts>2019-03-22T04:55:35.539700</ts>
    <user>Mariela</user>
    <text>(...I have written such tests in the past so this issue surprises me)</text>
  </message>
  <message conversation_id="881">
    <ts>2019-03-22T04:58:59.539900</ts>
    <user>Mariela</user>
    <text>ahhh. got it. inside the macroexpand I was using an alias:

`(macroexpand-1 (sut/foobarize ...))`

I replaced `sut/` with the FQN and voila</text>
  </message>
  <message conversation_id="882">
    <ts>2019-03-22T08:39:26.545000</ts>
    <user>Laveta</user>
    <text>Hi! I write a compiler for a query language in Clojure. The idea is not to interpret the expressions from the query language. Instead the compiler generates Clojure code at runtime and uses `eval` to compile it to byte code. So far it works very well. But now I have the problem that every compilation step creates new classes which go into the metaspace of the JVM. If I restrict the metaspace to a certain size, the GC stops my app for more than 10 seconds. Does someone use `eval` in production and has an idea to improve the GC behaviour?</text>
  </message>
  <message conversation_id="883">
    <ts>2019-03-22T08:40:30.545400</ts>
    <user>Jasmine</user>
    <text>Why are you restricting the metaspace size?</text>
  </message>
  <message conversation_id="883">
    <ts>2019-03-22T08:40:59.545900</ts>
    <user>Laveta</user>
    <text>Because if I don’t, it grows unlimited.</text>
  </message>
  <message conversation_id="883">
    <ts>2019-03-22T08:44:58.548600</ts>
    <user>Jasmine</user>
    <text>when and how classes get unloaded depends on the garbage collector you're using. I noticed that Java 12, which just came out, has support in the ZGC for concurrent class unloading, not sure about the others</text>
  </message>
  <message conversation_id="883">
    <ts>2019-03-22T08:46:11.549200</ts>
    <user>Jasmine</user>
    <text>you may need to do some research on how to choose and configure the best garbage collector for this application given its unique constraints.</text>
  </message>
  <message conversation_id="883">
    <ts>2019-03-22T08:48:33.551800</ts>
    <user>Laveta</user>
    <text>thanks! you wouldn’t recommend against using `eval` in production? I see compilation vs. interpretation as a big plus for my use-case.</text>
  </message>
  <message conversation_id="883">
    <ts>2019-03-22T08:54:37.552800</ts>
    <user>Jasmine</user>
    <text>No, I wouldn't recommend against it out of hand.</text>
  </message>
  <message conversation_id="884">
    <ts>2019-03-22T09:11:58.554300</ts>
    <user>Sixta</user>
    <text>I have a list of net changes, e.g. `[1 -3 5 -10]`, and I'd like to get the totals at each point, so `[1 -2 3 -7]`. My immediate thought for this is `reduce`, but that doesn't feel particularly natural even here.

Any other ideas?</text>
  </message>
  <message conversation_id="884">
    <ts>2019-03-22T09:12:51.554500</ts>
    <user>Becki</user>
    <text>reductions jumps out at me</text>
  </message>
  <message conversation_id="884">
    <ts>2019-03-22T09:13:36.554800</ts>
    <user>Becki</user>
    <text>`(reductions + 0 [1 -3 5 -10])`</text>
  </message>
  <message conversation_id="884">
    <ts>2019-03-22T09:13:56.555300</ts>
    <user>Sixta</user>
    <text>I hadn't made the link for how good that was, perfect</text>
  </message>
  <message conversation_id="884">
    <ts>2019-03-22T09:14:50.555700</ts>
    <user>Becki</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="885">
    <ts>2019-03-22T10:35:12.556400</ts>
    <user>Tonya</user>
    <text>how would I specify a relation between keys in spec?</text>
  </message>
  <message conversation_id="885">
    <ts>2019-03-22T10:35:47.557100</ts>
    <user>Tonya</user>
    <text>That is something like (s/and (s/keys :req [::k1 ::k2]) #(= ::k1 ::k2))?</text>
  </message>
  <message conversation_id="885">
    <ts>2019-03-22T10:35:56.557400</ts>
    <user>Tonya</user>
    <text>saying that the value of two keys must be equal</text>
  </message>
  <message conversation_id="885">
    <ts>2019-03-22T10:38:00.557900</ts>
    <user>Jasmine</user>
    <text>well you're almost there,  just fix the last pred</text>
  </message>
  <message conversation_id="885">
    <ts>2019-03-22T10:38:19.558300</ts>
    <user>Jasmine</user>
    <text>`(s/and (s/keys :req [::k1 ::k2]) #(= (::k1 %) (::k2  %)))`</text>
  </message>
  <message conversation_id="886">
    <ts>2019-03-22T11:33:05.558900</ts>
    <user>Deb</user>
    <text>How do you do OOP with inheritance hierarchies and overriding in Clojure? It looks like `deftype` does not allow you to specify a superclass. I know OOP is not popular in Clojure, but there is one situation where I like it: when defining UI components. I want to define behavior for a base class/type, and inherit and override that behavior in specific component subclasses. (I'm using ClojureScript so I want to use pure Clojure, not some JVM interop thing.)  The only way I see to do this is with `defmulti/defmethod`, and my `objects` would be some map or record with a type field.</text>
  </message>
  <message conversation_id="886">
    <ts>2019-03-22T11:37:03.559800</ts>
    <user>Meagan</user>
    <text>&lt;@Deb&gt; inheritance just isn’t something that is well supported outside of multimethods and the ability to `derive` keywords</text>
  </message>
  <message conversation_id="886">
    <ts>2019-03-22T11:37:55.560700</ts>
    <user>Meagan</user>
    <text>even that isn’t popular. composition is usually favored over inheritance</text>
  </message>
  <message conversation_id="886">
    <ts>2019-03-22T11:45:11.561900</ts>
    <user>Deb</user>
    <text>&lt;@Meagan&gt; Okay, thanks. That may work fine; I'm just not used to it.</text>
  </message>
  <message conversation_id="886">
    <ts>2019-03-22T11:47:06.563000</ts>
    <user>Meagan</user>
    <text>I would highly suggest using composition. reagent, Rum and other frameworks are well set up to support complex composition of UI components in ClojureScript</text>
  </message>
  <message conversation_id="887">
    <ts>2019-03-22T12:15:29.564800</ts>
    <user>Rico</user>
    <text>Hi, we are planning on migrating from RabbitMQ to Kafka to increase the throughput of our services. I'm working on a proof of concept, would anyone recommend any particular library?</text>
  </message>
  <message conversation_id="887">
    <ts>2019-03-22T12:17:58.565000</ts>
    <user>Gilberto</user>
    <text>&lt;https://github.com/dvlopt/kafka.clj&gt;</text>
  </message>
  <message conversation_id="887">
    <ts>2019-03-22T12:23:10.565300</ts>
    <user>Rico</user>
    <text>Thanks! how does it compare with "jackdaw" and "kinsky"?</text>
  </message>
  <message conversation_id="887">
    <ts>2019-03-22T12:26:47.565500</ts>
    <user>Gilberto</user>
    <text>I prefer it to `jackdaw`, having seen/worked with that library before, and I haven't used `kinsky`. This is just a thin wrapper around the standard Java SDK which is why I like it so much.</text>
  </message>
  <message conversation_id="887">
    <ts>2019-03-22T12:37:57.565700</ts>
    <user>Rico</user>
    <text>I'll give it a go, thanks</text>
  </message>
  <message conversation_id="888">
    <ts>2019-03-22T12:43:39.567000</ts>
    <user>Ashlea</user>
    <text>I vaguely recall that there were some blog posts about the major differences between Clojure 1.9 and Clojure 1.10. Specifically one that mentioned a change in reflection</text>
  </message>
  <message conversation_id="888">
    <ts>2019-03-22T12:54:51.567300</ts>
    <user>Jasmine</user>
    <text>You can find a detailed change log at &lt;https://github.com/clojure/clojure/blob/master/changes.md&gt;</text>
  </message>
  <message conversation_id="888">
    <ts>2019-03-22T12:55:13.567700</ts>
    <user>Jasmine</user>
    <text>and this is probably the thing you're thinking about: &lt;https://clojure.org/guides/faq#illegal_access&gt;</text>
  </message>
  <message conversation_id="888">
    <ts>2019-03-22T12:59:18.568800</ts>
    <user>Lemuel</user>
    <text>What's the most efficient way to get a sequence with *one copy* of an element removed?  I'm using `sequence` with a custom xf, but it's rather verbose.</text>
  </message>
  <message conversation_id="888">
    <ts>2019-03-22T13:03:55.569000</ts>
    <user>Jasmine</user>
    <text>is `dedupe` useful?</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T13:44:38.569700</ts>
    <user>Ana</user>
    <text>hi, has anyone invoke a lambda function yet? (with clojure)</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T13:45:54.569900</ts>
    <user>Tammera</user>
    <text>assuming aws lambda instead of mathematical lambda :stuck_out_tongue:?</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T13:51:39.570100</ts>
    <user>Ana</user>
    <text>so, i need call a function lambda on aws. Today i called through of API Gateway, but my service stay in amazon ECR, so is better use the invoke than API GATEWAY. The call is made internal and not external</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:09:06.570900</ts>
    <user>Ashlea</user>
    <text>Ugh, looks like I’m hitting &lt;https://groups.google.com/d/msg/clojure/pxLN9tYti4c/zbhLCOrTBgAJ&gt;</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:10:07.571800</ts>
    <user>Ashlea</user>
    <text>Are there plans backport the fix for the JDK regression to Clojure 1.9 or 1.8? Or will that be a 1.10-only fix</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:15:03.572700</ts>
    <user>Marlyn</user>
    <text>&lt;@Ashlea&gt; I think only 1.10</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:25:16.573500</ts>
    <user>Dann</user>
    <text>&lt;@Ashlea&gt; it shouldn't be hard to update your project to use 1.10, clojure upgrades cleaner than any other compiler I've used</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:25:24.573900</ts>
    <user>Ashlea</user>
    <text>nope</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:25:41.574700</ts>
    <user>Ashlea</user>
    <text>it’s not usually hard, but we’re having trouble with a particular bug</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:28:16.577000</ts>
    <user>Becki</user>
    <text>Ran into an issue where a lib has an invalid ns import under 1.10 and not 1.9 :(</text>
  </message>
  <message conversation_id="890">
    <ts>2019-03-22T14:29:35.577700</ts>
    <user>Becki</user>
    <text>So couldn't test the beta at work</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:38:28.578400</ts>
    <user>Marlyn</user>
    <text>&lt;@Ashlea&gt; can you remove the meta from the symbol?</text>
  </message>
  <message conversation_id="891">
    <ts>2019-03-22T14:43:24.578700</ts>
    <user>Marlyn</user>
    <text>Or it is within a dependency</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:47:56.579100</ts>
    <user>Ashlea</user>
    <text>It’s an internal dependency, I think we can remove the meta</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:48:04.579400</ts>
    <user>Ashlea</user>
    <text>Trying it out now, will report back</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:48:24.579700</ts>
    <user>Jasmine</user>
    <text>I'm not sure anyone ever filed the jira for that mailing list message</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:48:59.579800</ts>
    <user>Candis</user>
    <text>I would :-1: kinsky - in our experience it didn’t provide enough functionality and it’s full of reflection issues</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:51:18.580400</ts>
    <user>Ashlea</user>
    <text>I don’t think they did. I will as soon as I can</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:51:22.580600</ts>
    <user>Jasmine</user>
    <text>so wasn't on my radar, but certainly seems like a candidate for 1.10.1</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:51:27.580800</ts>
    <user>Jasmine</user>
    <text>I'll take care of it</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:51:34.581100</ts>
    <user>Ashlea</user>
    <text>:heart_eyes:</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:51:38.581300</ts>
    <user>Ashlea</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="889">
    <ts>2019-03-22T14:52:54.581800</ts>
    <user>Jasmine</user>
    <text>first I will try to decide if it is actually a bug :)</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:27:53.583400</ts>
    <user>Melynda</user>
    <text>Hi!  Does Clojure have a short form for the following?
```
(if-let [a ...]
  (if-let [b ...]
    (if-let [c ...]
      (f a b c)
      default)
    default)
 default)
```</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:28:42.583800</ts>
    <user>Marlyn</user>
    <text>nope</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:29:01.584200</ts>
    <user>Marlyn</user>
    <text>`some-&amp;gt;` is in the ballpark, but it doesn't do binding</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:32:55.585800</ts>
    <user>Melynda</user>
    <text>In my case I would have to wildly mix `some-&amp;gt;` and `some-&amp;gt;&amp;gt;`, so that would not be better. Even though conceptually it would be the right tool (`c` depends on `b` depends on `a`).</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:35:24.586100</ts>
    <user>Melynda</user>
    <text>&lt;@Marlyn&gt; Thanks!</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:48:21.586900</ts>
    <user>Ashlea</user>
    <text>&lt;@Jasmine&gt; I put together a minimal reproduction of the issue here: &lt;https://github.com/nwjsmith/meta-regression&gt;</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:49:22.587200</ts>
    <user>Marlyn</user>
    <text>very minimal :slightly_smiling_face:</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:49:48.587800</ts>
    <user>Marlyn</user>
    <text>thanks &lt;@Ashlea&gt;.  Would that happen in practice, or would the result of reflect get shredded for the juicy bits?</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:51:49.589600</ts>
    <user>Ashlea</user>
    <text>It’s happening in practice for us. We have a macro that reflects on some Java Protobuf objects to generate functions to translate from Clojure maps into said objects.</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:53:36.590700</ts>
    <user>Jasmine</user>
    <text>thx, the stuff that was in the google groups message was sufficient so didn't really need that</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:55:15.592200</ts>
    <user>Ashlea</user>
    <text>:+1: please let me know if I can provide any more context or other help</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:55:16.592300</ts>
    <user>Jasmine</user>
    <text>a more minimal repro: ```(eval `~(clojure.reflect/reflect String))```</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:55:28.592700</ts>
    <user>Ashlea</user>
    <text>repro golf!</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:56:08.593700</ts>
    <user>Marlyn</user>
    <text>you can invoke the lambda directly through the API</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:56:44.594100</ts>
    <user>Marlyn</user>
    <text>I'll post an example in &lt;#C09N0H1RB|aws&gt;</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T15:57:16.594300</ts>
    <user>Britteny</user>
    <text>&lt;@Melynda&gt; Was thinking maybe better-cond could help: &lt;https://github.com/Engelberg/better-cond&gt;</text>
  </message>
  <message conversation_id="893">
    <ts>2019-03-22T15:58:34.594600</ts>
    <user>Melynda</user>
    <text>&lt;@Britteny&gt; Thanks!</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T16:00:03.594800</ts>
    <user>Britteny</user>
    <text>Slightly odd, but golfed around this:
```
user=&amp;gt; (or (b/cond
  #_=&amp;gt;       :when-let [a 1
  #_=&amp;gt;                  b 2
  #_=&amp;gt;                  c 3]
  #_=&amp;gt;       (+ a b c))
  #_=&amp;gt;     :default)
6
user=&amp;gt; (or (b/cond
  #_=&amp;gt;       :when-let [a 1
  #_=&amp;gt;                  b nil
  #_=&amp;gt;                  c 3]
  #_=&amp;gt;       (+ a b c))
  #_=&amp;gt;     :default)
:default
```</text>
  </message>
  <message conversation_id="892">
    <ts>2019-03-22T16:01:44.595400</ts>
    <user>Ashlea</user>
    <text>We have a workaround for now: strip the datafy metadata</text>
  </message>
  <message conversation_id="894">
    <ts>2019-03-22T16:48:31.596400</ts>
    <user>Jasmine</user>
    <text>logged at &lt;https://dev.clojure.org/jira/browse/CLJ-2494&gt;, may not make much headway on it  for the next week. Need to think about this one a bit.</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T18:39:24.597000</ts>
    <user>Clarine</user>
    <text>I wanted to copy some metadata to all objects in a tree:
```
(defn copy-meta [tree m]
  (clojure.walk/postwalk
   #(if (instance? clojure.lang.IObj %)
      (with-meta % m) m) tree))
```
Why do I get a stackoverflow when using prewalk?</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T18:43:52.597900</ts>
    <user>Jasmine</user>
    <text>sounds like it's walking into the object you replaced recursively</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T18:47:44.598300</ts>
    <user>Clarine</user>
    <text>what was the setting again to not load core specs?</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T18:48:41.598600</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/guides/faq#skip_macros&gt;</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T18:49:07.598800</ts>
    <user>Clarine</user>
    <text>ah thanks</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T18:51:36.599300</ts>
    <user>Clarine</user>
    <text>I hoped to avoid running into this error with GraalVM (native) with it:
```
Call path from entry point to clojure.spec.gen.alpha$dynaload$fn__2628.invoke():
	at clojure.spec.gen.alpha$dynaload$fn__2628.invoke(alpha.clj:21)
```
but it doesn’t help</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T19:02:51.599700</ts>
    <user>Candis</user>
    <text>I just ran into that with edn-tool and had to drop back to 1.9.0 :disappointed:</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T19:03:27.599900</ts>
    <user>Candis</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1472&gt;</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T19:15:24.600700</ts>
    <user>Clarine</user>
    <text>Either `(read-string "(-&amp;gt; 1 inc inc)")` or `(macroexpand '(-&amp;gt; 1 inc inc))` don’t work for me in GraalVM native, I end up with the above error. Maybe too dynamic.</text>
  </message>
  <message conversation_id="896">
    <ts>2019-03-22T19:29:18.601200</ts>
    <user>Nguyet</user>
    <text>Cleanest way to log an exception stack trace in a single line? (for line-based log consumers)</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T19:30:47.602300</ts>
    <user>Dann</user>
    <text>maybe `(clojure.string/join separator (.getStackTrace e))` - but you want the `getMessage` in there too</text>
  </message>
  <message conversation_id="896">
    <ts>2019-03-22T19:31:20.602900</ts>
    <user>Dann</user>
    <text>or just some variation of `(pr-str e)` which has all that stuff and escaped newlines</text>
  </message>
  <message conversation_id="895">
    <ts>2019-03-22T19:34:09.603100</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (try (throw (ex-info "foo" {:a 0 :b 1})) (catch Exception e (pr-str e)))
"#error {\n :cause \"foo\"\n :data {:a 0, :b 1}\n :via\n [{:type clojure.lang.ExceptionInfo\n   :message \"foo\"\n   :data {:a 0, :b 1}\n   :at [user$eval149 invokeStatic \"NO_SOURCE_FILE\" 1]}]\n :trace\n [[user$eval149 invokeStatic \"NO_SOURCE_FILE\" 1]\n  [user$eval149 invoke \"NO_SOURCE_FILE\" 1]\n  [clojure.lang.Compiler eval \"Compiler.java\" 7176]\n  [clojure.lang.Compiler eval \"Compiler.java\" 7131]\n  [clojure.core$eval invokeStatic \"core.clj\" 3214]\n  [clojure.core$eval invoke \"core.clj\" 3210]\n  [clojure.main$repl$read_eval_print__9068$fn__9071 invoke \"main.clj\" 414]\n  [clojure.main$repl$read_eval_print__9068 invoke \"main.clj\" 414]\n  [clojure.main$repl$fn__9077 invoke \"main.clj\" 435]\n  [clojure.main$repl invokeStatic \"main.clj\" 435]\n  [clojure.main$repl_opt invokeStatic \"main.clj\" 499]\n  [clojure.main$main invokeStatic \"main.clj\" 598]\n  [clojure.main$main doInvoke \"main.clj\" 561]\n  [clojure.lang.RestFn invoke \"RestFn.java\" 397]\n  [clojure.lang.AFn applyToHelper \"AFn.java\" 152]\n  [clojure.lang.RestFn applyTo \"RestFn.java\" 132]\n  [clojure.lang.Var applyTo \"Var.java\" 705]\n  [clojure.main main \"main.java\" 37]]}"```</text>
  </message>
  <message conversation_id="896">
    <ts>2019-03-22T19:34:26.603500</ts>
    <user>Dann</user>
    <text>it's ugly, but it's one line, and knows what to do with ex-info</text>
  </message>
  <message conversation_id="896">
    <ts>2019-03-22T19:35:34.604400</ts>
    <user>Nguyet</user>
    <text>&lt;@Dann&gt; That seems to be exactly the cost/benefit ratio I’m looking for tonight :slightly_smiling_face: thanks!</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-22T20:33:45.605700</ts>
    <user>Fernande</user>
    <text>&lt;@Jasmine&gt; regarding 1.10.1-beta1, the documentation for prepl mentions :clojure.error/phase but didn't this change to :exception?</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-22T20:50:32.606400</ts>
    <user>Jasmine</user>
    <text>What documentation for prepl?</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-22T21:24:56.606900</ts>
    <user>Fernande</user>
    <text>&lt;@Jasmine&gt; the docstring for prepl mentions the 4 types of maps that prepl can return</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-22T22:18:05.607200</ts>
    <user>Jasmine</user>
    <text>yep,  possible that drifted, will   check it</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-22T22:19:30.607500</ts>
    <user>Jasmine</user>
    <text>oh, actually these are separate things</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-22T22:20:00.608100</ts>
    <user>Jasmine</user>
    <text>:exception is a boolean flag indicating that a :ret map is  from an exception</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-22T22:20:52.608600</ts>
    <user>Jasmine</user>
    <text>ah, yeah the docstring is wrong, probably my bad</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-22T22:31:36.608800</ts>
    <user>Jasmine</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-2495&gt;</text>
  </message>
  <message conversation_id="898">
    <ts>2019-03-22T22:51:33.609000</ts>
    <user>Fernande</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="899">
    <ts>2019-03-23T08:03:41.613200</ts>
    <user>Isa</user>
    <text>```
;; ::s-common
(s/def ::email (s/with-gen (s/and string? (partial re-matches #"^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}$"))
                           (partial gen/fmap #(str % "@example.com") (s/gen string?))))

;; ns where I define user

(s/def :user/email ::s-common/email)
(s/def ::create-user (s/keys :req [:user/email :user/password]))
```

`(s/explain-data ::create-user {:user/email "foo"})` return
```
({:path [:user/email],
  :pred (clojure.core/partial clojure.core/re-matches #"^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}$"),
  :val "foo",
  :via [:api.auth.db/create-user :spec.common/email],
  :in [:user/email]})
```

here is an issue `[:api.auth.db/create-user :spec.common/email]`. Why there is no `:user/email` here from `(s/def :user/email ::s-common/email)`?
It makes issue to translate it into human understandable message. Normally I would find `:user/email` in `:via` and could return proper message.

Why is it done in this way? Can I consider it as a bug?</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-23T09:06:19.613800</ts>
    <user>Isa</user>
    <text>I can trick it doing `(s/def :user/email (s/and ::s-common/email))` but it is dirty</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-23T09:06:31.614000</ts>
    <user>Isa</user>
    <text>Any better way?</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-23T09:07:12.614500</ts>
    <user>Isa</user>
    <text>Personally I would say it is a bug, not a feature :wink: Unless I miss something big about it.</text>
  </message>
  <message conversation_id="900">
    <ts>2019-03-23T11:46:43.615100</ts>
    <user>Latrina</user>
    <text>Check out this blog post &lt;https://blog.skyliner.io/fourteen-months-with-clojure-beb8b3e4bf00&gt;</text>
  </message>
  <message conversation_id="897">
    <ts>2019-03-23T11:47:08.616100</ts>
    <user>Latrina</user>
    <text>Their solution was to use the cats lib either monad</text>
  </message>
  <message conversation_id="901">
    <ts>2019-03-23T18:20:54.617500</ts>
    <user>Jasmine</user>
    <text>some of this has to do with when resolution via the registry occurs in spec, would be fine to jira it</text>
  </message>
  <message conversation_id="902">
    <ts>2019-03-23T22:33:54.621900</ts>
    <user>Mariela</user>
    <text>```
(defn example []
  "")

(defn uses-example [] ;; reflection warning!
  (-&amp;gt; (example) (.endsWith "omg")))
```

Wondering, how come the Clojure compiler doesn't try to attach a `:tag String` to var metas (at least in easy cases)?

Might result in automatically performant code</text>
  </message>
  <message conversation_id="903">
    <ts>2019-03-23T23:16:42.622600</ts>
    <user>Rosaline</user>
    <text>what happens in the repl if change the definition of example to return a boolean in your hypothetical?</text>
  </message>
  <message conversation_id="902">
    <ts>2019-03-23T23:47:40.622700</ts>
    <user>Mariela</user>
    <text>I think I get what you mean.

But under a good Reloaded workflow, dependent vars are also recompiled...</text>
  </message>
  <message conversation_id="903">
    <ts>2019-03-24T03:58:28.627600</ts>
    <user>Leeann</user>
    <text>&lt;@Milford&gt; has done quite a bit of work on this in Clojurescript, and as &lt;@Rosaline&gt; points out, it has implications as to what needs to be re-evaluated on, well, re-evaluation. I think &lt;@Milford&gt; discussed that on a defn podcast. </text>
  </message>
  <message conversation_id="902">
    <ts>2019-03-24T04:01:00.627700</ts>
    <user>Mariela</user>
    <text>interesting! this one I assume? &lt;https://soundcloud.com/defn-771544745/defn3-repls&gt;</text>
  </message>
  <message conversation_id="904">
    <ts>2019-03-24T05:09:56.629500</ts>
    <user>Isa</user>
    <text>Is it time to move to &lt;https://github.com/clojure/spec-alpha2&gt; vs &lt;https://github.com/clojure/spec.alpha&gt; ? Is it stable and ready to switch in clj and cljs? Or should I wait?</text>
  </message>
  <message conversation_id="904">
    <ts>2019-03-24T05:54:25.630500</ts>
    <user>Isa</user>
    <text>&lt;@Jasmine&gt;

I am not super familiar with JIRA. I did typo when reporting in bug explanation and I don’t see any way to edit it. I can’t also add comment about it. Am I right there is no edit option and comment?

“So `(s/def :foo/email (s/and ::common-email))` is totally omit here.”

But should be “So `(s/def :foo/email ::common-email)` is totally omit here.”

&lt;https://dev.clojure.org/jira/browse/CLJ-2496?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#issue-tabs&gt;

I made it so ugly. I used to github issues. Sorry :slightly_smiling_face:</text>
  </message>
  <message conversation_id="904">
    <ts>2019-03-24T06:17:26.630900</ts>
    <user>Isa</user>
    <text>What should I do to correct my issue?</text>
  </message>
  <message conversation_id="903">
    <ts>2019-03-24T08:12:48.631600</ts>
    <user>Milford</user>
    <text>I think Erik may have been referring to &lt;https://www.therepl.net/episodes/3/&gt;</text>
  </message>
  <message conversation_id="904">
    <ts>2019-03-24T08:48:15.632800</ts>
    <user>Jasmine</user>
    <text>I just needed to bump up your permissions - should be able to now </text>
  </message>
  <message conversation_id="904">
    <ts>2019-03-24T08:49:06.633300</ts>
    <user>Jasmine</user>
    <text>No. You should wait.</text>
  </message>
  <message conversation_id="904">
    <ts>2019-03-24T08:54:22.634400</ts>
    <user>Leeann</user>
    <text>That might just be. It’s hard to keep track, you’re all over the place these days :)</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:31:08.636100</ts>
    <user>Isa</user>
    <text>```
(s/def :user/password (s/and string? #(&amp;lt;= 6 (count %) 32)))
(s/def :db/user (s/keys :req [:user/uuid :user/email :user/updated_at :user/created_at]))
; there is no :user/password in :db/user !
```
```
(s/assert :db/user {:user/uuid (uuid/v0)
                      :user/password "0"
                      :user/email "&lt;mailto:foo@example.com|foo@example.com&gt;"
                      :user/updated_at #inst"2019-03-24T13:19:45.150875000-00:00"
                      :user/created_at #inst"2019-03-24T13:19:45.150875000-00:00"})
```
```
Spec assertion failed
"0" - failed: (&amp;lt;= 6 (count %) 32) in: [:user/password] at: [:user/password] spec: :user/password
```

Hmm again I think I found a bug in spec and it is not a future. Am I right?</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:32:39.637600</ts>
    <user>Isa</user>
    <text>Situation when it start to be issue: plain password has another rules vs encrypted password. Assert check all data expect :user/password by :db/user but it fail because of encrypted :user/password anyway :disappointed:</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:32:52.637800</ts>
    <user>Isa</user>
    <text>Jira it &lt;@Jasmine&gt;?</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:34:24.638700</ts>
    <user>Elyse</user>
    <text>Pretty sure that's not a bug. `s/keys` checks all namespaced keywords in the map against their specs. (Check out the docstring.)</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:35:05.639200</ts>
    <user>Isa</user>
    <text>So what is the point of `(s/def :db/user (s/keys :req [:user/uuid :user/email :user/updated_at :user/created_at]))` then?</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:35:22.639600</ts>
    <user>Isa</user>
    <text>if it check `:user/password` even if I don’t want</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:37:04.640700</ts>
    <user>Isa</user>
    <text>assert function get spec definition to validate. If it doesn’t care about definition what is the point of it. It should be just `(assert data)` then.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:38:34.642000</ts>
    <user>Elyse</user>
    <text>If I understand correctly, the purpose of `s/keys` is to express that a certain set of keys are required. So if you were to check a map missing one of the required keys which had all of its keyword conforming to their specs, it would fail due to that missing required key.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:39:20.642800</ts>
    <user>Isa</user>
    <text>So what the purpose of `:opt` then for `s/keys`?</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:39:37.643300</ts>
    <user>Elyse</user>
    <text>It's for documentation only (and for spec generation).</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:41:02.644100</ts>
    <user>Isa</user>
    <text>Sounds like a hell. Somebody will add in his library `:user/password` and will affect whole app.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:41:41.644600</ts>
    <user>Isa</user>
    <text>All spec will start to validate even if I have never say it in code of the app</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:42:06.645100</ts>
    <user>Isa</user>
    <text>Maybe it is an intention, but it sounds so evil :wink:</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:42:33.645700</ts>
    <user>Elyse</user>
    <text>Good motivation to use keys namespaced by your app's namespaces, which dependent libraries shouldn't be touching.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:43:19.646100</ts>
    <user>Isa</user>
    <text>yeah, but even in my app I would like to have control on it</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:44:37.647100</ts>
    <user>Isa</user>
    <text>There is no simple way to use namespace with keywords for database purpose when think about FE+BE and separate services which should use consistent structure.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:45:14.647800</ts>
    <user>Isa</user>
    <text>I mean I can simple use `:user/password` but `::ns-for-user/password` is not a thing to do simple</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:46:36.648500</ts>
    <user>Elyse</user>
    <text>At work we have a separate library of specs defined in cljc files consumed by our backend and frontend so they're speaking the same language; that is one solution.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:47:33.649200</ts>
    <user>Isa</user>
    <text>yeah, but even then people use mobile app etc. Using spec on BE shouldn’t force me to use Clojure / ClojureScript in all services and app in BE / FE.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:48:37.649800</ts>
    <user>Isa</user>
    <text>At least it is my opinion. Bug, not a future :wink:</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:51:39.650600</ts>
    <user>Elyse</user>
    <text>Not sure I understand how spec is forcing you to use clojure/clojurescript in all services.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:52:08.651100</ts>
    <user>Isa</user>
    <text>How will I use `::ns-for-user/password` in PHP? :wink:</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:53:13.652300</ts>
    <user>Isa</user>
    <text>Sure I can use full form, but then instead of `:user/password` developers will have to use `:cool-name-of-the-app.users.spec/password` or something like that for all values</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:53:34.652600</ts>
    <user>Isa</user>
    <text>Looks terrible :slightly_smiling_face:</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:54:26.653100</ts>
    <user>Isa</user>
    <text>Because by API using JSON I send namespaced data</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:55:19.654000</ts>
    <user>Isa</user>
    <text>there is no `email`, everything belongs to namespaces and I know if it is `:user/email` or `:company/email` etc. It has connection to database, validation etc.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:57:26.655600</ts>
    <user>Tressa</user>
    <text>it's the "if it's present, it has to be this shape" thing</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:58:02.655900</ts>
    <user>Elyse</user>
    <text>If namespaced keywords are painful for your use case, you don't have to use them. You could either use un-namespaced keywords or add/remove the namespaces at system boundaries.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T09:59:20.657000</ts>
    <user>Isa</user>
    <text>namespaced keywords are solution for me, not an issue. But validation on keywrods which are not in definition of `s/keys` is unexpected thing.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T10:04:18.658800</ts>
    <user>Isa</user>
    <text>but who knows, maybe I miss big picture of it</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T10:04:28.659200</ts>
    <user>Jasmine</user>
    <text>That namespaced attributes carry global semantics is a core tenet of spec and is laced throughout the design</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T10:05:09.660200</ts>
    <user>Isa</user>
    <text>Yeah I see, but why design in the way to validate keywords, which are not in definition of `s/keys`?</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T10:05:52.661000</ts>
    <user>Jasmine</user>
    <text>Because we want to verify the global semantics throughout the system</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T10:07:23.662500</ts>
    <user>Jasmine</user>
    <text>s/keys is being replaced in spec 2 with schema and select so some of the details you mention above are changing, but this aspect is not</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T10:08:57.663600</ts>
    <user>Isa</user>
    <text>hmm then I have to think about spec validation architecture once again. I totally miss info about `s/keys` and validation values outside definition.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T10:09:12.663900</ts>
    <user>Isa</user>
    <text>Thank you all for explanation.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T11:53:00.666400</ts>
    <user>Mariela</user>
    <text>&lt;@Isa&gt;, if you use `:req-un [::ns-for-user/password]`, PHP consumers will simply pass `password`, while your spec will be checked against your namespace's spec, unmistakably</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T11:56:17.666500</ts>
    <user>Isa</user>
    <text>I want to use namespaces</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T11:56:51.666700</ts>
    <user>Isa</user>
    <text>The main point of discussion was about validate keywords, which are not in definition of `s/keys`</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T11:57:11.666900</ts>
    <user>Isa</user>
    <text>namespaces is connected to this topic, but not issue itself</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T12:19:38.667100</ts>
    <user>Mariela</user>
    <text>Understood, here a minimal reproduction of the bug-feature

```
(spec/def ::password string?)

(spec/def ::user (spec/keys))

(spec/valid? ::user {::password 1}) ;; false!
```

I wasn't aware of it to be honest.

One possible approach is to strip extra keys at the system boundaries... It's what reitit does, see the bottom &lt;https://github.com/metosin/reitit/blob/master/doc/coercion/clojure_spec_coercion.md&gt;</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T12:20:39.667400</ts>
    <user>Mariela</user>
    <text>Another approach, obviously would be to stop using qualifed keywords if you don't want them to be always checked. The bug-feature doesn't happen for unqualifed `:password`.</text>
  </message>
  <message conversation_id="906">
    <ts>2019-03-24T12:27:08.667900</ts>
    <user>Mariela</user>
    <text>Awesome stuff, ty both! :cljs:</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T13:04:17.668500</ts>
    <user>Isa</user>
    <text>At that moment I changed it to `select-keys` before validate. It works, but it change architecture and made me confuse how should I change the app.</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T13:05:21.668700</ts>
    <user>Isa</user>
    <text>Also I started to use `(confrom (s/keys) data)` and `(assert (s/keys) data)`</text>
  </message>
  <message conversation_id="905">
    <ts>2019-03-24T13:06:35.668900</ts>
    <user>Isa</user>
    <text>I mean after learned about this it makes spec different tool for me</text>
  </message>
  <message conversation_id="907">
    <ts>2019-03-25T11:12:48.673400</ts>
    <user>Dulcie</user>
    <text>I have some code:
`(HashMap. {"edgePackage" (::common/list-item-tid notification)})`
... which warns me with:
`Reflection warning, av_connector/util/notifications.clj:73:60 - call to java.util.HashMap ctor can't be resolved.`
How can this be? And why do I still get warnings if I do this:
`(HashMap. ^Map {"edgePackage" (::common/list-item-tid notification)})`</text>
  </message>
  <message conversation_id="907">
    <ts>2019-03-25T11:13:40.673900</ts>
    <user>Dulcie</user>
    <text>Perusing the list of HashMap constructors, I can't see how this would fail the reflection check</text>
  </message>
  <message conversation_id="907">
    <ts>2019-03-25T11:15:56.674500</ts>
    <user>Harris</user>
    <text>&lt;@Dulcie&gt; `(let [^Map m {..}] (HashMap. m))`</text>
  </message>
  <message conversation_id="907">
    <ts>2019-03-25T11:16:08.674800</ts>
    <user>Harris</user>
    <text>the reason why your version doesn't work is a bug</text>
  </message>
  <message conversation_id="907">
    <ts>2019-03-25T11:17:00.675100</ts>
    <user>Dulcie</user>
    <text>OK, well at least I know I'm not going crazy :slightly_smiling_face:</text>
  </message>
  <message conversation_id="907">
    <ts>2019-03-25T11:18:16.675300</ts>
    <user>Harris</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1929&gt;</text>
  </message>
  <message conversation_id="907">
    <ts>2019-03-25T11:18:58.675500</ts>
    <user>Harris</user>
    <text>vote or leave a comment on it</text>
  </message>
  <message conversation_id="907">
    <ts>2019-03-25T11:19:54.675800</ts>
    <user>Dulcie</user>
    <text>Done</text>
  </message>
  <message conversation_id="908">
    <ts>2019-03-25T15:50:10.677700</ts>
    <user>Kenda</user>
    <text>Kind of a newbie question here, but if I have `[:cat :bird :dog]`, what's the easiest way to get the infinite lazy sequence `(:cat bird :dog :cat :bird :dog :cat ...)`?</text>
  </message>
  <message conversation_id="908">
    <ts>2019-03-25T15:50:58.678000</ts>
    <user>Rachele</user>
    <text>Looks like you want &lt;https://clojuredocs.org/clojure.core/cycle&gt;</text>
  </message>
  <message conversation_id="908">
    <ts>2019-03-25T15:51:22.678300</ts>
    <user>Kenda</user>
    <text>Aha! I knew I wasn't remembering something</text>
  </message>
  <message conversation_id="908">
    <ts>2019-03-25T15:51:28.678500</ts>
    <user>Kenda</user>
    <text>Thanks, that's it</text>
  </message>
  <message conversation_id="909">
    <ts>2019-03-25T19:03:00.682400</ts>
    <user>Alejandro</user>
    <text>anybody know of a library I can use to convert `"100MB"` -&amp;gt; `100000000` … i.e from a string representation to its equivalent in bytes as a long ?</text>
  </message>
  <message conversation_id="909">
    <ts>2019-03-25T19:03:59.682700</ts>
    <user>Meagan</user>
    <text>sounds like something you might not need a library to do</text>
  </message>
  <message conversation_id="909">
    <ts>2019-03-25T19:07:40.684800</ts>
    <user>Jasmine</user>
    <text>cl-format does everything, maybe it does this too :)</text>
  </message>
  <message conversation_id="909">
    <ts>2019-03-25T19:13:00.685300</ts>
    <user>Meagan</user>
    <text>```
(require '[clojure.string :as s])

(def unit-table {"MB" 1000000})

(let [[_ amount units] (re-matches #"(\d+)(.+)" "100MB")]
   (-&amp;gt; (Long/parseLong amount)
     (* (unit-table units))))
```</text>
  </message>
  <message conversation_id="909">
    <ts>2019-03-25T19:24:57.686900</ts>
    <user>Alejandro</user>
    <text>&lt;@Meagan&gt; that code looks like the beginning of a library :slightly_smiling_face: … yeah, it is simple enough for one case, but as the units add up a library would make sense</text>
  </message>
  <message conversation_id="909">
    <ts>2019-03-25T19:26:05.687700</ts>
    <user>Meagan</user>
    <text>Just saying, some code that handles 20+ different units would probably only be ~30 lines of code. not worth adding a lib to my dependency tree IMO</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:01:04.688000</ts>
    <user>Roselia</user>
    <text>Can somebody explain assignment of the null reference to *this* in a closure?
What effects does it have?
I assume it's part of `closed-over local clearing` feature, but not sure how it looks from JVM stand point.</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:03:22.689700</ts>
    <user>Simonne</user>
    <text>&lt;@Roselia&gt; Is there some other context here? Is this decompiled clojure bytecode?</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:03:26.689800</ts>
    <user>Dann</user>
    <text>if `this` is your only reference to `coll`'s head, then the vm can free it for garbage collection</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:03:42.690400</ts>
    <user>Roselia</user>
    <text>&lt;@Simonne&gt; not really, just educating myself</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:04:03.690800</ts>
    <user>Dann</user>
    <text>which means you can do `(let [coll (range)] (run! frob coll))` without running out of heap</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:05:01.691600</ts>
    <user>Dann</user>
    <text>I mean I assumed this is decompiled clojure bytecode, that's what it typically looks like :D</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:05:37.692300</ts>
    <user>Simonne</user>
    <text>same, was curious what the source code looks like</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:05:54.692900</ts>
    <user>Roselia</user>
    <text>so nullifying *this* invalidates any other references to that instance?</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:06:10.693600</ts>
    <user>Simonne</user>
    <text>&lt;@Roselia&gt; I was just thinking through that. That can’t be the case….</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:06:13.693800</ts>
    <user>Simonne</user>
    <text>I don’t think.</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:06:29.694400</ts>
    <user>Dann</user>
    <text>something like `(fn [coll pred step] (step pred coll))`</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:06:30.694500</ts>
    <user>Roselia</user>
    <text>yeah that's kinda bothers me, how nullifying this related to other references to target instance</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:07:17.695600</ts>
    <user>Dann</user>
    <text>&lt;@Roselia&gt; it frees the resources visible only to this object in this context</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:07:33.695900</ts>
    <user>Roselia</user>
    <text>interesting</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:07:45.696200</ts>
    <user>Dann</user>
    <text>or more technically, marks them as reclaimable</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:08:06.696500</ts>
    <user>Roselia</user>
    <text>is it documented somewhere?</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:08:27.696900</ts>
    <user>Dann</user>
    <text>I'm really not sure - `locals clearing` is definitely the thing to search for here</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:08:47.697800</ts>
    <user>Marlyn</user>
    <text>It’s tail clearing and I implemented it :)</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:09:00.698500</ts>
    <user>Dann</user>
    <text>oh! thanks</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:09:01.698600</ts>
    <user>Marlyn</user>
    <text>Here is a link for reference</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:09:02.698700</ts>
    <user>Alix</user>
    <text>How do I specify this type in clojure: `Map&amp;lt;String, Object&amp;gt;`?</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:09:21.699100</ts>
    <user>Marlyn</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1250&gt;</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:09:31.699600</ts>
    <user>Dann</user>
    <text>&lt;@Alix&gt; `Map` -the rest is fictional</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:09:48.700100</ts>
    <user>Roselia</user>
    <text>&lt;@Marlyn&gt; &lt;@Dann&gt; thanks guys</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:10:18.700900</ts>
    <user>Marlyn</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1793&gt; another follow up</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:12:17.701200</ts>
    <user>Roselia</user>
    <text>really appreciate it</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:12:43.702100</ts>
    <user>Marlyn</user>
    <text>tail clearing is needed because closures store their closed over values in instance variables</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:13:14.703200</ts>
    <user>Marlyn</user>
    <text>And if the reference to this isn’t nullified, it remains reachable in a local variable slot </text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:13:26.703800</ts>
    <user>Marlyn</user>
    <text>Which keeps the closed over values alive</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:13:41.704000</ts>
    <user>Roselia</user>
    <text>yeah i understood the reason, missing part was the jvm &amp;amp; gc behavior for this == null</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:13:56.704400</ts>
    <user>Roselia</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:14:56.704700</ts>
    <user>Simonne</user>
    <text>&lt;@Marlyn&gt; is there some part of the JVM spec you know of that defines the behavior for `this` assignment?</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:15:03.704900</ts>
    <user>Simonne</user>
    <text>`javac` will not allow it</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:15:41.705800</ts>
    <user>Marlyn</user>
    <text>It’s in there somewhere, maybe search for method calls or local variables </text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:16:32.706300</ts>
    <user>Marlyn</user>
    <text>2.6.1 last para &lt;@Simonne&gt; </text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:16:38.706600</ts>
    <user>Marlyn</user>
    <text>&lt;https://docs.oracle.com/javase/specs/jvms/se12/html/jvms-2.html#jvms-2.6.1&gt;</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:18:50.706800</ts>
    <user>Simonne</user>
    <text>so the implication being that, because `this` is passed as a local variable, it’s assignable like a local variable?</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:21:27.707000</ts>
    <user>Dann</user>
    <text>it seems like since it's of type `reference`, assigning it to null means you no longer consider the referenced object visible in this scope</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:25:10.707200</ts>
    <user>Marlyn</user>
    <text>Yeah, only in instance methods</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:25:21.707400</ts>
    <user>Marlyn</user>
    <text>And like you said javac won't let you</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:28:53.707600</ts>
    <user>Simonne</user>
    <text>&lt;@Roselia&gt; Is this an inner class? I’m really curious the code that generated this.</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:30:02.707800</ts>
    <user>Marlyn</user>
    <text>Any fn that closes over something will generate it</text>
  </message>
  <message conversation_id="911">
    <ts>2019-03-25T21:30:29.708000</ts>
    <user>Simonne</user>
    <text>cool, ty</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T21:31:20.708200</ts>
    <user>Roselia</user>
    <text>&lt;@Simonne&gt; you can use this lib to play with it yourself &lt;https://github.com/clojure-goes-fast/clj-java-decompiler&gt;</text>
  </message>
  <message conversation_id="911">
    <ts>2019-03-25T21:32:05.708500</ts>
    <user>Simonne</user>
    <text>cool :slightly_smiling_face:</text>
  </message>
  <message conversation_id="910">
    <ts>2019-03-25T22:04:22.708700</ts>
    <user>Simonne</user>
    <text>:whoa: &lt;https://stackoverflow.com/a/22175621&gt;</text>
  </message>
  <message conversation_id="911">
    <ts>2019-03-25T22:05:26.709000</ts>
    <user>Simonne</user>
    <text>I’m actually a little surprised that the JVM allows that.</text>
  </message>
  <message conversation_id="911">
    <ts>2019-03-25T22:05:41.709200</ts>
    <user>Simonne</user>
    <text>Well. Surprised and not surprised. Bunch of lisp weenies.</text>
  </message>
  <message conversation_id="911">
    <ts>2019-03-25T22:06:39.709400</ts>
    <user>Roselia</user>
    <text>:rolling_on_the_floor_laughing:</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T22:57:31.710200</ts>
    <user>Arnoldo</user>
    <text>why am i getting “no matching ctor” for the following snippet? `(String. somebytes "UTF-8")`</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:06:19.711000</ts>
    <user>Shavonda</user>
    <text>&lt;@Arnoldo&gt; probably because there are multiple 2 arity constructors for string and clojure isn't sure which to pick</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:14:30.711400</ts>
    <user>Arnoldo</user>
    <text>i don’t typically do much java interop … is the way to handle that type hinting?</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:21:31.712300</ts>
    <user>Celestine</user>
    <text>&lt;@Arnoldo&gt; what is `somebytes` in the above? I'm trying to repro your situation but the "obvious" things I've tried all just work :neutral_face:</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:24:40.712700</ts>
    <user>Arnoldo</user>
    <text>the result of .readPassword</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:24:51.713000</ts>
    <user>Arnoldo</user>
    <text>which i’m also having bizarre issues with</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:25:52.713600</ts>
    <user>Arnoldo</user>
    <text>calling it without the third argument, e.g. just `(String. (.readPassword (System/console)))` works fine</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:26:05.714000</ts>
    <user>Arnoldo</user>
    <text>err second arg</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:27:54.714800</ts>
    <user>Celestine</user>
    <text>Ah, OK, let me try that....</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:28:58.715300</ts>
    <user>Celestine</user>
    <text>So `.readPassword` returns an array of `char` from the look of it?</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:31:58.716000</ts>
    <user>Celestine</user>
    <text>String does not have a constructor that takes an array of char and an encoding. That's why it fails.</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:32:41.716600</ts>
    <user>Celestine</user>
    <text>`char[]` is already encoded (UTF-8 by default) I believe. So the 1-arg constructor is what you want.</text>
  </message>
  <message conversation_id="912">
    <ts>2019-03-25T23:35:30.717000</ts>
    <user>Arnoldo</user>
    <text>ahhh i see - thanks!</text>
  </message>
  <message conversation_id="913">
    <ts>2019-03-26T06:24:16.720700</ts>
    <user>Clarice</user>
    <text>What would you prefer in Clojure library *documentation*, to see the usage demonstrated when the namespaces were pulled in via:
- `use`
- `require ... :all`
- `require some.namespace.foo :as foo` … foo/bar
Thanks</text>
  </message>
  <message conversation_id="913">
    <ts>2019-03-26T06:25:03.720900</ts>
    <user>Harris</user>
    <text>the last</text>
  </message>
  <message conversation_id="913">
    <ts>2019-03-26T07:44:59.726500</ts>
    <user>Clarice</user>
    <text>Thanks for that &lt;@Harris&gt; and all the others who reacted with an emoji.
I’m collecting this for a pull request (which I don’t want to share here) but I’m sharing the link to this response.

The reason that I even asked this is because I remember stumbling upon a comment somewhere that went something like:
“Why do we discourage the use of `use` and yet in a lot of the documentation examples for libraries, it’s still prevalent?”</text>
  </message>
  <message conversation_id="914">
    <ts>2019-03-26T07:59:27.727200</ts>
    <user>Roslyn</user>
    <text>I think actual arguments would be better then slack polls :smile:</text>
  </message>
  <message conversation_id="914">
    <ts>2019-03-26T08:01:37.727400</ts>
    <user>Roslyn</user>
    <text>see &lt;https://stackoverflow.com/questions/22982303/why-should-you-prefer-require-refer-all-over-use-in-clojure&gt;</text>
  </message>
  <message conversation_id="914">
    <ts>2019-03-26T08:23:00.727700</ts>
    <user>Magdalena</user>
    <text>[ANN] Cognitect Labs' aws-api 0.8.280 is now available! &lt;https://groups.google.com/forum/#!topic/clojure/644yYo_qgwM&gt;</text>
  </message>
  <message conversation_id="914">
    <ts>2019-03-26T09:22:50.730800</ts>
    <user>Clarice</user>
    <text>&lt;@Roslyn&gt; that SO post talks about the use in the actual code. Whereas I’m talking about how to show the library usage in documentation.
My argument is to show it with the good practices, as per the style guide, so that there isn’t a discrepancy between what is shown in a README and how you’d really use the library in production code. Part of the reason is less of a gap between real usage and part of the reason is not to use deprecated practice. Hope that makes sense…</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T10:48:49.731700</ts>
    <user>Meagan</user>
    <text>does anyone know what I’m supposed to pass into the `env` arg when using tools.analyzer.jvm?</text>
  </message>
  <message conversation_id="914">
    <ts>2019-03-26T10:49:29.732200</ts>
    <user>Meagan</user>
    <text>I was hoping I could do something like:
```
(defmacro asdf [f]
  (prn &amp;amp;env)
  (prn (ana/analyze f &amp;amp;env)))

(let [[ a b c ] [ 1 2 3 ]]
  (asdf (a b c)))
```</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T10:58:15.732400</ts>
    <user>Becki</user>
    <text>does this help?
```
user&amp;gt; (-&amp;gt; '(let [a a] a)
        (ana.jvm/analyze (assoc (ana.jvm/empty-env)
                           :locals '{a {:op    :binding
                                        :name  a
                                        :form  a
                                        :local :let}}))
        e/emit-hygienic-form)
(let* [a__#0 a] a__#0)
```</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:02:51.733000</ts>
    <user>Marlyn</user>
    <text>you need to pass in an environment &lt;@Meagan&gt;, see the README</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:03:03.733300</ts>
    <user>Marlyn</user>
    <text>`empty-env` is one way of constructing one</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:03:37.733700</ts>
    <user>Meagan</user>
    <text>it’s not clear to me at all how to construct one</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:03:45.734000</ts>
    <user>Marlyn</user>
    <text>call `empty-env`</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:04:09.734600</ts>
    <user>Meagan</user>
    <text>I see that now. how would I populate it with the context of &amp;amp;env in a macro?</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:04:42.734700</ts>
    <user>Meagan</user>
    <text>I think so! I might be able to work forward from that</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:12:35.735600</ts>
    <user>Meagan</user>
    <text>what I ultimately want to do (which might be foolhardy) is try and discover all of the symbols that are used in a form</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:14:00.736900</ts>
    <user>Meagan</user>
    <text>e.g. I want to be able to output something like:
```
(my-macro (do (+ 1 1) (send-message "foo") (fn [] "callback")))
;; =&amp;gt; [do + send-message fn]
```</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:16:08.737500</ts>
    <user>Raelene</user>
    <text>&lt;@Meagan&gt; Have a look at &lt;https://github.com/ztellman/potemkin/blob/e8c64802b8772a90110434d1b515ce35b78b961b/src/potemkin/macros.clj#L29&gt;</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:18:04.739000</ts>
    <user>Raelene</user>
    <text>&lt;@Meagan&gt; Simply walk over the body form and collect symbols. But of course, it does not utilize tools.analyzer.jvm</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:19:39.739300</ts>
    <user>Meagan</user>
    <text>I thought of that but I was worried about handling things like maps etc.</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:19:51.739600</ts>
    <user>Meagan</user>
    <text>I forget how powerful clojure.walk is sometimes :stuck_out_tongue:</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:20:42.740500</ts>
    <user>Meagan</user>
    <text>I also want to make sure that the symbol is in fact a binding/var and not an _actual_ symbol the user might be using in their code</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:20:55.740800</ts>
    <user>Meagan</user>
    <text>I guess what I could do is walk over the body and then do an intersection with the keys of &amp;amp;env</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:21:03.741100</ts>
    <user>Becki</user>
    <text>there's also a t.a version of walk</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:24:38.742300</ts>
    <user>Raelene</user>
    <text>&lt;@Meagan&gt; I am not sure what you actually are about to do, e.g. what is an "actual symbol"? But postwalk works with maps as well, yes.</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:25:51.742900</ts>
    <user>Meagan</user>
    <text>what I’m trying to do is get a list of all of the bindings/vars a form depends on</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:26:23.743300</ts>
    <user>Meagan</user>
    <text>I’m then going to write them out in the returning form</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:27:10.744300</ts>
    <user>Becki</user>
    <text>&lt;https://github.com/clojure/tools.analyzer/blob/master/src/main/clojure/clojure/tools/analyzer/ast.clj#L84&gt;</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:29:23.746700</ts>
    <user>Meagan</user>
    <text>for example:
```
;; use macro here
(do-effect-only-when-deps-change
  (send-message message-to-be-sent)
  (prn "sent message"))

;; will write out the following:
(do-effect
  (fn effect []
    (send-message message-to-be-sent)
    (prn "sent message"))
  ;; list the bindings/vars that should trigger the effect again if they change
  [send-message message-to-be-sent])
```</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:31:06.747600</ts>
    <user>Meagan</user>
    <text>the `do-effect` works fine it’s just annoying to have to enumerate all of the things that might change by hand</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:31:15.747800</ts>
    <user>Meagan</user>
    <text>so I want a macro to do it for me :stuck_out_tongue:</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:32:10.748500</ts>
    <user>Raelene</user>
    <text>OK, got it. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:32:17.748800</ts>
    <user>Meagan</user>
    <text>it seems like using regular walk should work</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:33:01.750000</ts>
    <user>Meagan</user>
    <text>oh, and what I meant by an “actual symbol” was if I did something like:
`(do-effect-only-when-deps-change (send-data ['foo 'bar]))`</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:33:26.750500</ts>
    <user>Meagan</user>
    <text>I wouldn’t want `'foo 'bar` to show up in the list of bindings/vars because they don’t exist</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:36:57.752200</ts>
    <user>Raelene</user>
    <text>Yea, then you should ignore any calls to `quote`. Still wondering why you would need this, just for convenience during development?</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:38:06.752800</ts>
    <user>Meagan</user>
    <text>why I would need the macro? or the part where the function fires if its dependent bindings/vars change?</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:38:53.753100</ts>
    <user>Raelene</user>
    <text>the latter.</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:40:45.754200</ts>
    <user>Meagan</user>
    <text>it’s firstly going to be a wrapper around useEffect in ClojureScript: &lt;https://reactjs.org/docs/hooks-reference.html#useeffect&gt;</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:42:06.755400</ts>
    <user>Meagan</user>
    <text>useEffect already has that behavior. when you update state, and trigger a re-render, it will check it’s dependencies array to see if they have changed since last render and if so, fire the effect</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:42:21.755800</ts>
    <user>Meagan</user>
    <text>but also I intend to use this to enable more reloadable workflows in Clojure too yes :stuck_out_tongue:</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:43:31.756400</ts>
    <user>Meagan</user>
    <text>hmm. It looks like I don’t get global vars in `&amp;amp;env`</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:44:59.756900</ts>
    <user>Raelene</user>
    <text>Ah, interesting. :slightly_smiling_face: Nonetheless, I feel one should not do that during "runtime" :slightly_smiling_face:</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:47:12.757100</ts>
    <user>Meagan</user>
    <text>“runtime”? :thinking_face:</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:54:11.760600</ts>
    <user>Raelene</user>
    <text>What I meant was production, maybe I still haven't got you but I cannot imagine a good case for using var/binding-watching for something else than development. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:55:22.761500</ts>
    <user>Meagan</user>
    <text>yeah it would probably be inert when deployed. purely a mechanism for reloaded workflow</text>
  </message>
  <message conversation_id="915">
    <ts>2019-03-26T11:56:03.761700</ts>
    <user>Raelene</user>
    <text>If react does this, I might miss something :thinking_face:  Have to investigate :slightly_smiling_face:</text>
  </message>
  <message conversation_id="916">
    <ts>2019-03-26T15:13:07.762500</ts>
    <user>Isidro</user>
    <text>saw this thread a tad late. Very good to know, thank you! Aleph looks really promising, will stick on top of the pile and see where things land.</text>
  </message>
  <message conversation_id="917">
    <ts>2019-03-26T17:37:31.764000</ts>
    <user>Becki</user>
    <text>drawing a blank. ` (into [] distinct [:a :b :c])` is not working. what am i missing</text>
  </message>
  <message conversation_id="917">
    <ts>2019-03-26T17:39:17.764500</ts>
    <user>Sixta</user>
    <text>Is it a stateful transducer?</text>
  </message>
  <message conversation_id="917">
    <ts>2019-03-26T17:39:40.764900</ts>
    <user>Sixta</user>
    <text>Yep, you need to do (distinct)</text>
  </message>
  <message conversation_id="917">
    <ts>2019-03-26T17:39:45.765100</ts>
    <user>Becki</user>
    <text>ah thanks</text>
  </message>
  <message conversation_id="917">
    <ts>2019-03-26T17:41:33.765400</ts>
    <user>Isidro</user>
    <text>found another solution which removes the recursion (which could potentially blow the stack):
```
(defn nest-by
  [ks coll]
  (reduce
   (fn [m x]
     (update-in m ((apply juxt ks) x) (fnil conj []) x))
   {}
   coll))
```
I personally find both solutions quite attractive. This one uses the fact that update-in already does most of what we want</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:06:26.767800</ts>
    <user>Lesa</user>
    <text>I'm tearing my hair out trying to figure out why `com.stuartsierra.component` isn't shutting down one of my components. I have other components that shut down just fine. I can't spot any material difference in this one. I'm about to start trying to expose some details from within component itself but thought I would ask here if there are any common tripping hazards I might not be thinking of</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:08:36.768200</ts>
    <user>Dann</user>
    <text>you need to return a valid component map from both startup and teardown of each component</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:08:48.768600</ts>
    <user>Dann</user>
    <text>that's the most common reason that teardowns get short-circuited</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:13:35.769100</ts>
    <user>Lesa</user>
    <text>yeah that looks fine. everything starts up properly and inspecting the component in the system it's all well and good</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:14:09.770000</ts>
    <user>Lesa</user>
    <text>i've got a log statement (and heck, a println, to rule out a logging issue) on the first line of the `(stop)` function and that never gets called</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:17:27.770900</ts>
    <user>Rosaline</user>
    <text>most likely you do some operation on the record that turns it in to a normal map</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:17:46.771300</ts>
    <user>Rosaline</user>
    <text>in which case the nop stop function that component defines for Object is called</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:18:00.771600</ts>
    <user>Rosaline</user>
    <text>(some operation in your start function)</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:19:27.772200</ts>
    <user>Rosaline</user>
    <text>a common thing that does that is dissoc'ing a field a record is defined as having, but here are other things that do it too</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:19:40.772500</ts>
    <user>Lesa</user>
    <text>I was just about to ask...does `dissoc` do it?</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:19:49.772700</ts>
    <user>Lesa</user>
    <text>:facepalm:</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:20:22.772900</ts>
    <user>Rosaline</user>
    <text>```
user=&amp;gt; (defrecord Foo [a])
user.Foo
user=&amp;gt; (assoc (-&amp;gt;Foo {}) :a 1 :b 2)
#user.Foo{:a 1, :b 2}
user=&amp;gt; (dissoc (assoc (-&amp;gt;Foo {}) :a 1 :b 2) :b)
#user.Foo{:a 1}
user=&amp;gt; (dissoc (assoc (-&amp;gt;Foo {}) :a 1 :b 2) :a)
{:b 2}
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:21:32.773300</ts>
    <user>Lesa</user>
    <text>well, you saved my considerable head of hair from losing (any more) hairs</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:21:37.773600</ts>
    <user>Lesa</user>
    <text>have been tearing them out for the past hour</text>
  </message>
  <message conversation_id="918">
    <ts>2019-03-26T20:21:40.773800</ts>
    <user>Lesa</user>
    <text>thanks</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-26T20:37:53.774800</ts>
    <user>Loria</user>
    <text>Why does `group-by` return a map of vectors instead of respecting the original collection type?</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-26T20:39:45.776100</ts>
    <user>Loria</user>
    <text>eg. I would expect `(group-by even? #{1 2 3 4 5})` to return a map of hash sets</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-26T20:50:47.777600</ts>
    <user>Loria</user>
    <text>it's easy enough to roll my own version which does that:
```
(defn group-by*
  "Like `group-by` but preserves the original collection type"
  [f coll]
  (let [emp (empty coll)]
    (persistent!
      (reduce
        (fn [ret x]
          (let [k (f x)]
            (assoc! ret k (conj (get ret k emp) x))))
        (transient {}) coll))))
```</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-26T20:51:55.778500</ts>
    <user>Loria</user>
    <text>but I'm wondering why the default implementation does it that way</text>
  </message>
  <message conversation_id="920">
    <ts>2019-03-27T08:48:10.782100</ts>
    <user>Laveta</user>
    <text>Is there a way to control the name of a `reify` class? I like to have that for profiling to be able to see which implementation I have in the profiler.</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T08:53:17.782300</ts>
    <user>Jasmine</user>
    <text>no</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T08:54:34.783200</ts>
    <user>Laveta</user>
    <text>ok but it would be helpful.</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T08:57:24.785500</ts>
    <user>Laveta</user>
    <text>By the way: Using ZGC in Java 12 was not suchessful for my compiled code. I still had 5 sec pauses. So I droped the idea to evaluate code during runtime. Now I just use good old protocol dispatch for my expressions. The protocol dispatch is so fast that it’s not slower than directly compiled code.</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T08:58:56.786900</ts>
    <user>Patrice</user>
    <text>what do you prefer for the name of a &lt;http://micrometer.io|micrometer.io&gt; wrapper: clj-micrometer or micrometer-clj?</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T08:58:59.787000</ts>
    <user>Jasmine</user>
    <text>reify needs to gen a unique classes every time so you wouldn't want to force a particular name</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T08:59:55.787600</ts>
    <user>Jasmine</user>
    <text>protocol dispatch is designed for speed, for sure</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T09:00:52.788300</ts>
    <user>Laveta</user>
    <text>but a named prefix like in `(fn my-fn [x])` would be possible?</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T09:01:27.788600</ts>
    <user>Jasmine</user>
    <text>you could just use a deftype?</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T09:02:34.789700</ts>
    <user>Laveta</user>
    <text>yes I could. I also could use defrecord. But for me the code is more readable using reify.</text>
  </message>
  <message conversation_id="921">
    <ts>2019-03-27T09:20:56.790100</ts>
    <user>Harris</user>
    <text>then you can implement your own `named-reify` macro on top of `deftype` and `new`</text>
  </message>
  <message conversation_id="919">
    <ts>2019-03-27T09:27:19.791400</ts>
    <user>Laveta</user>
    <text>it’s ok. I’m not totally lost in the profiler. I only liked to ask if I was missing something. But thanks.</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:32:17.793500</ts>
    <user>Malika</user>
    <text>&lt;https://medium.com/dartlang/making-dart-a-better-language-for-ui-f1ccaf9f546c&gt; is there a way to do something like this in clojure?
tldr: interpolate values into a list like so:
```
[:item-1
 (add-when condition?
   :optional-item-1
   :optional-item-2)
 :item-2]
```</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:33:06.794000</ts>
    <user>Malika</user>
    <text>assuming its impossible as macros can't expand to multiple expressions as far as I know?</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:33:14.794200</ts>
    <user>Laveta</user>
    <text>`cond-&amp;gt;`</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:34:08.795700</ts>
    <user>Merna</user>
    <text>I use `(concat [:item-1] (when condition? [:item-3 :item-4]) [:item5])`</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:34:30.796400</ts>
    <user>Merna</user>
    <text>you can do stuff with macros and splicing but its unidiomatic imo</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:34:51.797200</ts>
    <user>Harris</user>
    <text>less performant but I also like ````[:item-1 ~@(when cond? [:item-3 :item-4]) :item-5]```</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:35:00.797700</ts>
    <user>Merna</user>
    <text>^ like this guy :stuck_out_tongue:</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:35:15.798000</ts>
    <user>Laveta</user>
    <text>```(cond-&amp;gt; [:item-1] 
  condition? 
  (conj :optional-item-1 :optional-item-2)
  :always
  (conj :item-2))```</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:35:15.798100</ts>
    <user>Harris</user>
    <text>s/macros/syntax-quote/</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:35:35.798500</ts>
    <user>Merna</user>
    <text>okokok</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:38:06.799200</ts>
    <user>Malika</user>
    <text>thanks</text>
  </message>
  <message conversation_id="922">
    <ts>2019-03-27T10:38:28.799500</ts>
    <user>Malika</user>
    <text>going to give the concat a go for now, seems reasonably nice</text>
  </message>
  <message conversation_id="923">
    <ts>2019-03-27T10:52:29.800100</ts>
    <user>Patrice</user>
    <text>I still don’t understand why `clojure.datafy.nav` needs both `k` and `v`</text>
  </message>
  <message conversation_id="923">
    <ts>2019-03-27T11:05:53.800400</ts>
    <user>Marlyn</user>
    <text>to transform v</text>
  </message>
  <message conversation_id="923">
    <ts>2019-03-27T11:06:06.800600</ts>
    <user>Marlyn</user>
    <text>rather, to return a transformed v</text>
  </message>
  <message conversation_id="923">
    <ts>2019-03-27T11:06:31.800800</ts>
    <user>Marlyn</user>
    <text>see this &lt;@Patrice&gt; &lt;https://github.com/stuarthalloway/reflector/blob/master/src/com/stuarthalloway/reflector.clj&gt;</text>
  </message>
  <message conversation_id="923">
    <ts>2019-03-27T11:06:54.801300</ts>
    <user>Patrice</user>
    <text>&lt;@Marlyn&gt; thanks!</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:22:25.802400</ts>
    <user>Nguyet</user>
    <text>`java-time/interval` is in the doc but somehow it looks like it can’t be found (I’m on clojure 1.10)</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:23:27.802900</ts>
    <user>Nguyet</user>
    <text>`java-time/minus` can be found without problem</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:28:09.803400</ts>
    <user>Dann</user>
    <text>&lt;@Nguyet&gt; surely this would be a question of your java-time version, and not your clojure version?</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:29:22.803500</ts>
    <user>Lesa</user>
    <text>I feel like I see many more `clj-*` names than `*-clj`</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:31:06.803900</ts>
    <user>Tammera</user>
    <text>is that `clojure.java-time`-the-library?</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:31:33.804300</ts>
    <user>Tammera</user>
    <text>In that case, you will need to add &lt;https://www.threeten.org/threeten-extra/&gt; before you get interval’s</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:32:41.805400</ts>
    <user>Tammera</user>
    <text>(they didn’t make it into `java.time.*` but were included in an “extra” library made available by the original proposers of the java.time rework)</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:42:51.806000</ts>
    <user>Nguyet</user>
    <text>Thanks for that! Somehow I missed it in the doc</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:42:53.806200</ts>
    <user>Nguyet</user>
    <text>cheers!</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:50:51.806600</ts>
    <user>Tammera</user>
    <text>Yeah, I missed it the first few times too</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:51:31.807400</ts>
    <user>Tammera</user>
    <text>Also, I like that clojure.java-time is correct and such, but it doesn’t feel very idiomatic to use from clojure. I looked at juxt/tick, but thats just not complete and/or mature…</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:52:18.807900</ts>
    <user>Tammera</user>
    <text>are there other libraries I should be looking at? That are both correct and have nice clojure APIs?</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T13:59:21.808600</ts>
    <user>Marlyn</user>
    <text>My 2c: learn the java time api</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:01:27.809600</ts>
    <user>Marlyn</user>
    <text>All the clojure wrapper libraries get some things fundamentally wrong</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:08:59.809700</ts>
    <user>Sixta</user>
    <text>Have you evaluated tick at all? I think it has a novel twist</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:15:22.809900</ts>
    <user>Marlyn</user>
    <text>nope</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:15:32.810200</ts>
    <user>Marlyn</user>
    <text>what's the twist &lt;@Sixta&gt;?</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:15:45.810400</ts>
    <user>Sixta</user>
    <text>It works in clojurescript</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:16:21.810800</ts>
    <user>Sixta</user>
    <text>I can't speak too much about the design, as I've just been peripheral to it.</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:16:58.811000</ts>
    <user>Tammera</user>
    <text>(btw, not trying to offend, tick just doesn’t feel “done” to me just yet)</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:17:19.811200</ts>
    <user>Marlyn</user>
    <text>java.time fits all my needs</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:18:16.811400</ts>
    <user>Sixta</user>
    <text>Tick is trying to stick to the java.time api. </text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:18:52.812000</ts>
    <user>Sixta</user>
    <text>&lt;@Tammera&gt; we're using it in production with several clients, but you're right that there's still some gaps. </text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:22:11.812200</ts>
    <user>Tammera</user>
    <text>Right, I like its way of doing things tho, feels less like a direct wrapper around a java api. Thats why I was asking, I was hoping that I completely missed something as elaborate as clojure.java-time, but with a more clojure-esque API</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:24:22.812400</ts>
    <user>Tammera</user>
    <text>And thats in the little things right, for example, clojure.java-time does a lot of “java-style” overloading</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:25:53.812600</ts>
    <user>Sixta</user>
    <text>&lt;@Tammera&gt; are there any particular gaps that are a problem for you?</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:46:56.817800</ts>
    <user>Tammera</user>
    <text>It’s been a while, can’t come up with specifics sadly</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:47:50.818000</ts>
    <user>Sixta</user>
    <text>If you check it out again, please feel free to open issues for anything you're missing.</text>
  </message>
  <message conversation_id="924">
    <ts>2019-03-27T14:48:27.818600</ts>
    <user>Tammera</user>
    <text>Will do!</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T15:55:15.821700</ts>
    <user>Rosia</user>
    <text>I'm generating the following code using reflection on a javaclass to generate a reify that will implement all methods on the class. The end result looks like this:
&lt;https://gist.github.com/jjttjj/95ff42fedd49893d51a4333da3abe436&gt;
The type hints on return values and arguments are needed to avoid ambiguity.
Currently I'm generating the code as a quoted list of symbols, spitting it to a source file, and reading it. Is there a better way to do this? Is it possible to generate an elaborate reify like this with a macro?</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T15:57:27.822400</ts>
    <user>Dann</user>
    <text>most macros return a list of symbols (the quoting is done so they remain symbols)</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T15:58:19.823000</ts>
    <user>Dann</user>
    <text>the gotcha is that for metadata like type hints you can't just use the metadata reader macro, you need to return a call to `with-meta`</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T15:58:55.823700</ts>
    <user>Dann</user>
    <text>so instead of `^void foo` you'd have `(with-meta foo {:tag void})`</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T16:02:07.824300</ts>
    <user>Rosia</user>
    <text>ok so ```
(^void currentTime [this ^long time]
          (cb {:time time, :type :currentTime}))
```

would become
```
((with-meta current-time {'void true}
            [this (with-meta {'long true} time)]
                    (cb {:time time, :type :currentTime}))
                    ```
and that should work fine?</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T16:02:54.825300</ts>
    <user>Dann</user>
    <text>I edited the metadata after checking in my repl</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T16:03:02.825500</ts>
    <user>Rosia</user>
    <text>ok cool</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T16:03:06.825800</ts>
    <user>Rosia</user>
    <text>got it thanks</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T16:03:39.826400</ts>
    <user>Dann</user>
    <text>the with-meta call should only wrap the symbol, and the macro quoting would mean it needs to look different from that</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T16:03:59.826900</ts>
    <user>Dann</user>
    <text>but that's the basic idea - you need to return a list that has the right metadata on the symbols in it</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T16:04:16.827200</ts>
    <user>Rosia</user>
    <text>ok thanks</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T18:00:08.828200</ts>
    <user>Shanell</user>
    <text>I think people have forgotten or don't know, but, Insomnia, the REST client ( &lt;https://insomnia.rest/&gt;) has been supporting EDN without any add-on since some months ago</text>
  </message>
  <message conversation_id="925">
    <ts>2019-03-27T18:00:35.828900</ts>
    <user>Shanell</user>
    <text>just thought it was worth a mention. I know about this because I added the feature :stuck_out_tongue:</text>
  </message>
  <message conversation_id="926">
    <ts>2019-03-28T03:00:14.003600</ts>
    <user>Mariela</user>
    <text>Trying an 'official' reducers example, but adding a println:

```
    (-&amp;gt;&amp;gt; (range 100000)
         (r/map (fn [x]
                  (println (Thread/currentThread))
                  x))
         (r/filter even?)
         r/foldcat)
```

...how come it always prints the same thread? I'd expect things to use all available cores</text>
  </message>
  <message conversation_id="926">
    <ts>2019-03-28T03:03:11.004100</ts>
    <user>Mariela</user>
    <text>Should have googled :slightly_smiling_face: &lt;https://stackoverflow.com/a/26291136/569050&gt;</text>
  </message>
  <message conversation_id="926">
    <ts>2019-03-28T03:16:35.004700</ts>
    <user>Sixta</user>
    <text>Range is reducible though :thinking_face: </text>
  </message>
  <message conversation_id="926">
    <ts>2019-03-28T05:34:58.007600</ts>
    <user>Mariela</user>
    <text>how do I get reducers to process each member of the coll in a separate thread?

I tried with `(fold 1 ...)` but no luck. The forkjoin pool _is_ used, but each member is processed in the same thread, which proves sequentiality

(I might be better off with pmap. But reducers might give some flexibility)</text>
  </message>
  <message conversation_id="926">
    <ts>2019-03-28T05:35:54.007700</ts>
    <user>Mariela</user>
    <text>Maybe this is my answer:

&amp;gt; . Similarly, reducers is elegant, but we can't control its level of parallelism.

&lt;https://github.com/TheClimateCorporation/claypoole&gt;</text>
  </message>
  <message conversation_id="927">
    <ts>2019-03-28T06:31:53.008800</ts>
    <user>Eufemia</user>
    <text>Hi, Im new to docker and have to add a clojurescript project to an existing Dockerfile. It uses the ubuntu:latest. Adding `leiningen` to apt-get install fails. Does anyone have a basic configuration to show how to do this in ubuntu image?</text>
  </message>
  <message conversation_id="927">
    <ts>2019-03-28T06:32:59.010300</ts>
    <user>Clarine</user>
    <text>I need something like this: &lt;http://jsondb.io/&gt; with a focus on performance.

But with the ability to query JSON/EDN without parsing the whole database up front (performance).
And the ability to write objects very fast, without re-indexing the whole database.

Right now I’m doing the naive thing: read a giant EDN file, query it and write a giant EDN file.</text>
  </message>
  <message conversation_id="927">
    <ts>2019-03-28T06:33:44.011400</ts>
    <user>Clarine</user>
    <text>One way of optimizing this is to split the EDN file into multiple partitions and only read/write the necessary partitions, but there might already be a tool which does this.
Another requirement: it must run with GraalVM. I already tried nippy/codox which currently doesn’t run with that.</text>
  </message>
  <message conversation_id="927">
    <ts>2019-03-28T06:34:22.011600</ts>
    <user>Clarine</user>
    <text>More info: &lt;https://github.com/borkdude/clj-kondo/issues/22&gt;</text>
  </message>
  <message conversation_id="928">
    <ts>2019-03-28T07:05:58.012900</ts>
    <user>Epifania</user>
    <text>here is a dockerfile that has leiningen + nodejs &lt;https://github.com/ipfs-shipyard/cube/blob/master/Dockerfile&gt;</text>
  </message>
  <message conversation_id="928">
    <ts>2019-03-28T07:06:12.013300</ts>
    <user>Epifania</user>
    <text>based on the official clojure image rather than ubuntu though</text>
  </message>
  <message conversation_id="928">
    <ts>2019-03-28T07:06:41.014000</ts>
    <user>Epifania</user>
    <text>if you're planning to use in production, you probably want to lock down the dependency versions, as they are not in the example linked above</text>
  </message>
  <message conversation_id="928">
    <ts>2019-03-28T07:06:59.014300</ts>
    <user>Roslyn</user>
    <text>smartest function composition I ever wrote:
```
(defn- wrap-dedupe-args [f]
  (let [dedupe-fn ((dedupe) (fn [_ args] (apply f args)))]
    (fn [&amp;amp; args]
      (dedupe-fn nil args))))

(let [f (wrap-dedupe-args prn)]
  (f 2)
  (f 2)
  (f 2)
  (f 3)
  (f 3))
2
3
=&amp;gt; nil
```</text>
  </message>
  <message conversation_id="928">
    <ts>2019-03-28T07:12:23.015000</ts>
    <user>Roslyn</user>
    <text>[ab]using transducers to deduplicate side-effecting calls by their args</text>
  </message>
  <message conversation_id="929">
    <ts>2019-03-28T08:19:26.019300</ts>
    <user>Joette</user>
    <text>Does anyone know of a library that normalises local variables? `clojure.tools.analyzer.passes.jvm.emit-form/emit-hygienic-form` seems to be the closet, but just appends a `__#&amp;lt;int&amp;gt;` to the var labels. I would like to rewrite variables into the form `x__#&amp;lt;int&amp;gt;` where `x` is an arbitrary constant. This would mean that `(defn f [a b] (let [a (+ a b)] a))` would become `(def f (fn* [x__#0 x__#1] (let* [x__#2 (+ x__#0 x__#1)] x__#2)))`</text>
  </message>
  <message conversation_id="929">
    <ts>2019-03-28T08:35:02.020500</ts>
    <user>Becki</user>
    <text>you could walk the ast and rename them probably? take inspiration from tools.analyzer.passes.uniquify</text>
  </message>
  <message conversation_id="929">
    <ts>2019-03-28T08:38:05.022000</ts>
    <user>Joette</user>
    <text>yeah, that’s exactly what I have been doing, was having some problems with dynamic bindings so I just thought I would see if someone had already written this…</text>
  </message>
  <message conversation_id="930">
    <ts>2019-03-28T10:28:12.025100</ts>
    <user>Darci</user>
    <text>The key to this is to get the 'right' chunk size for fork/join packets. If it is too small you will just context switch. Too large (for your collection size) won't make enough packets to cover the available cores. Have a look at this &lt;https://github.com/jsa-aerial/aerial.utils/blob/d451f81fc308a7fbae2ca1de22890c2e4f726880/src/aerial/utils/coll.clj#L468&gt;, it has worked very well for me.</text>
  </message>
  <message conversation_id="930">
    <ts>2019-03-28T10:33:09.025400</ts>
    <user>Mariela</user>
    <text>Super interesting! Will study it</text>
  </message>
  <message conversation_id="930">
    <ts>2019-03-28T10:35:21.025600</ts>
    <user>Eufemia</user>
    <text>i needed to use the ubuntu image, finally i've solved that putting this</text>
  </message>
  <message conversation_id="930">
    <ts>2019-03-28T10:35:21.025800</ts>
    <user>Eufemia</user>
    <text>RUN wget &lt;https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein&gt;
RUN chmod +x lein
RUN mv lein /usr/local/bin</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:09:22.026100</ts>
    <user>Faustino</user>
    <text>Is dynamic binding the same as calling a function by variable name?</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:12:35.026300</ts>
    <user>Faustino</user>
    <text>It is formatted very nicely... but I don't understand what it does</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:13:02.026500</ts>
    <user>Faustino</user>
    <text>What does prn mean?</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:15:12.028800</ts>
    <user>Onita</user>
    <text>hey everyone, i was wondering if there a consensus on the best pattern for a fn defn that can: either perform an operation on one thing or an operation on a collection of those things</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:15:36.029400</ts>
    <user>Onita</user>
    <text>i guess the front runner in my mind is `defn operation [ &amp;amp; args ] ` and then either `(operation thing)` or `(apply operation things)`</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:16:30.030000</ts>
    <user>Mariela</user>
    <text>Worth pointing out, `apply` isn't efficient</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:16:40.030200</ts>
    <user>Onita</user>
    <text>oh yeah? how so?</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:16:52.030500</ts>
    <user>Onita</user>
    <text>i’m not super concerned with that at the moment, but it’d be good to know in the periphery</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:19:16.031400</ts>
    <user>Mariela</user>
    <text>IIRC it boils down to the fact that you are creating short-lived lists in runtime, adding pressure to the GC</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:19:31.031600</ts>
    <user>Mariela</user>
    <text>Maybe relevant: &lt;https://stuartsierra.com/2015/06/10/clojure-donts-heisenparameter&gt;</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:19:32.031800</ts>
    <user>Onita</user>
    <text>hmm, cool</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:20:47.032200</ts>
    <user>Faustino</user>
    <text>I like your way better... but someone made a ppa...</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:20:50.032400</ts>
    <user>Faustino</user>
    <text>sudo apt-add-repository ppa:/mikegedelman/leiningen-git-stable
sudo apt-get update
sudo apt-get install leiningen</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:21:23.032900</ts>
    <user>Jasmine</user>
    <text>my advice would be not to do that</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:21:25.033000</ts>
    <user>Faustino</user>
    <text>It just tracks the stable lein repo on github</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:21:38.033400</ts>
    <user>Jasmine</user>
    <text>in that, every time I've ever done that, I regretted it later</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:22:26.034200</ts>
    <user>Jasmine</user>
    <text>either pick "one thing" and use it with seq ops like  map/filter  etc or  make it take a coll</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:22:43.034300</ts>
    <user>Faustino</user>
    <text>&lt;@Epifania&gt; is 100% correct. Lock the clojure version, lein version and dependencies versions... or you could be in dependency hell if just 1 library version changes</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:24:01.034800</ts>
    <user>Onita</user>
    <text>interesting. that’s what i have now, but it feels kind of gross</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:24:12.035000</ts>
    <user>Onita</user>
    <text>could be lack of experience, though</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:24:25.035200</ts>
    <user>Onita</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:30:48.036100</ts>
    <user>Faustino</user>
    <text>Does '''apply''' operate 1 by 1, on each thing?</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:31:14.036800</ts>
    <user>Faustino</user>
    <text>Or just apply the new list of arguments to the function?</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:31:57.037600</ts>
    <user>Faustino</user>
    <text>Reading the docs... it looks like it applies new args to the function</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:33:28.037900</ts>
    <user>Becki</user>
    <text>Hard to parse what you are getting at</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:34:14.038200</ts>
    <user>Faustino</user>
    <text>Function overloading? Argument overloading</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:36:34.039200</ts>
    <user>Faustino</user>
    <text>(apply + 1 2 3)</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:37:15.039500</ts>
    <user>Gillian</user>
    <text>that wouldn't work</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:37:25.039900</ts>
    <user>Gillian</user>
    <text>you need to do `(apply + [1 2 3])`</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:37:36.040200</ts>
    <user>Gillian</user>
    <text>which is the same thing as `(+ 1 2 3)`</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:38:51.040700</ts>
    <user>Faustino</user>
    <text>ahhhh ok, so it does apply the arguments as a whole</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:38:53.040900</ts>
    <user>Faustino</user>
    <text>not 1 by 1</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:39:57.041800</ts>
    <user>Faustino</user>
    <text>I was thinking that apply operated on each argument, 1 at a time</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:40:10.042300</ts>
    <user>Faustino</user>
    <text>e.g. apply the function to each argument</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:40:36.042700</ts>
    <user>Onita</user>
    <text>sorry i think i made a mistake</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:40:36.042800</ts>
    <user>Gillian</user>
    <text>yeah you will also see sometimes `(reduce + [1 2 3])` which is something like `(+ (+ 1 2) 3)`</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:40:56.043500</ts>
    <user>Onita</user>
    <text>generally i’m looking for the optimal way to write one or more functions that do the same thing but either operate on one item or several</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:41:12.043800</ts>
    <user>Onita</user>
    <text>[idiomatic|optimal]</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:41:30.044400</ts>
    <user>Onita</user>
    <text>sounds like two functions has worked well</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:42:00.044700</ts>
    <user>Gillian</user>
    <text>you can use multi arity functions for that</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:42:05.044900</ts>
    <user>Faustino</user>
    <text>you need a map</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:42:39.045600</ts>
    <user>Onita</user>
    <text>i don’t think multi arity functions would work; i should have specified the ‘several’ is a collection</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:42:43.045900</ts>
    <user>Faustino</user>
    <text>&lt;https://clojuredocs.org/clojure.core/map&gt;</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:42:54.046600</ts>
    <user>Faustino</user>
    <text>map is used to work on collections</text>
  </message>
  <message conversation_id="931">
    <ts>2019-03-28T11:43:14.047400</ts>
    <user>Meagan</user>
    <text>&lt;@Onita&gt; I think the idiomatic thing to do is to define a function that operates on one, and then compose that with the various seq operations like `map` `reduce` `transduce` etc.</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:43:20.047800</ts>
    <user>Faustino</user>
    <text>&lt;@Jasmine&gt; suggested map</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:43:40.048500</ts>
    <user>Onita</user>
    <text>right, i guess normally that would be the answer. i guess my question is too abstract. i’m specifically looking at database inserts.</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:43:43.048600</ts>
    <user>Gillian</user>
    <text>gotcha not sure what you're trying to do maybe i missed an earlier convo</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:44:13.049400</ts>
    <user>Onita</user>
    <text>nope, i deliberately asked the question a little too abstractly. my bad</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:44:37.050300</ts>
    <user>Meagan</user>
    <text>so you have a fn like `insert-item!` that you might call like `(insert-item! item1)` or `(insert-item! [item1 item2])`?</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:44:38.050400</ts>
    <user>Onita</user>
    <text>so, in particular, either way i’d be calling `jdbc/insert-multi!`</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:44:51.050900</ts>
    <user>Onita</user>
    <text>right</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:44:57.051100</ts>
    <user>Faustino</user>
    <text>personally, I thought you were just trying to apply a new set of arguments to the same function… method overloading</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:45:10.051300</ts>
    <user>Faustino</user>
    <text>but you mean a collection</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:45:11.051500</ts>
    <user>Onita</user>
    <text>yeah, not quite</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:45:47.052400</ts>
    <user>Onita</user>
    <text>in the case of the single item, i’d be looking at `insert multi! [item]`, in the other `insert-multi! items`</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:45:54.052700</ts>
    <user>Onita</user>
    <text>and was trying to avoid `seq? item`</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:46:11.053100</ts>
    <user>Meagan</user>
    <text>personally I think that “overloading” your function signature like that is usually a bad idea</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:46:24.053600</ts>
    <user>Meagan</user>
    <text>and I would consider it un-idiomatic</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:46:35.053900</ts>
    <user>Faustino</user>
    <text>I agree… be careful with overloading, especially multi arity</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:46:58.054800</ts>
    <user>Faustino</user>
    <text>in my opinion, multi arity is really object orienated style</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:47:07.055300</ts>
    <user>Onita</user>
    <text>“overloading,” meaning have it accept either a collection or a single item</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:47:11.055500</ts>
    <user>Meagan</user>
    <text>right</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:47:24.056300</ts>
    <user>Onita</user>
    <text>ok, makes sense. sounds like that is the consensus</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:47:45.057200</ts>
    <user>Meagan</user>
    <text>I would prefer it to always operate on colls. I agree with Alex, I’ve done stuff like that before and usually come to regret it :grimacing:</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:48:11.057600</ts>
    <user>Onita</user>
    <text>yeah that’s interesting. could you elaborate a bit on how, if any details come to mind?</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:48:16.057800</ts>
    <user>Roslyn</user>
    <text>&lt;@Faustino&gt; `prn` is similar to `println` which prints it's arguments, and the difference is `prn` prints objects so they can be read back. In practice it usually means that `prn` prints some additional data that helps to understand what exactly is being printed. For example, `(prn false "false")` will print `false "false"`, making it easy to understand what exactly these printed values are (compare to `(println false "false")` that will print `false false`).</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:48:23.058100</ts>
    <user>Faustino</user>
    <text>could you just put the single item into a collection?</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:48:31.058500</ts>
    <user>Faustino</user>
    <text>so that the function always takes the same type</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:48:35.058700</ts>
    <user>Onita</user>
    <text>i could, yes. just call it as `do-thing [item]`</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:48:41.058900</ts>
    <user>Onita</user>
    <text>but i’d rather not have to remember to do that</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:48:55.059100</ts>
    <user>Onita</user>
    <text>or, rather force others to remember to do that</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:49:30.059400</ts>
    <user>Faustino</user>
    <text>could just convert it, inside the function? no?</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:50:02.060400</ts>
    <user>Onita</user>
    <text>yup. but i would also like to avoid `seq? item`. which, again, is kind of a personal aesthetic preference, i guess.</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:50:12.060800</ts>
    <user>Jasmine</user>
    <text>`run!` is like `map`, but for applying the same side-effecting function</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:50:15.061000</ts>
    <user>Faustino</user>
    <text>ahhh ,gotcha, avoid type checking</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:51:00.061800</ts>
    <user>Gillian</user>
    <text>are you trying to do a bulk insert operation?</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:51:04.062100</ts>
    <user>Onita</user>
    <text>&lt;@Jasmine&gt;, that’s cool, didn’t know that. i would have reached for `doseq`.</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:51:06.062300</ts>
    <user>Gillian</user>
    <text>instead of inserting 1 by 1</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:51:06.062400</ts>
    <user>Onita</user>
    <text>yeah.</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:52:12.063600</ts>
    <user>Onita</user>
    <text>so, anything map-like is not particularly desirable</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:54:00.063800</ts>
    <user>Faustino</user>
    <text>ahh, it makes it more readable</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:55:52.064700</ts>
    <user>Gillian</user>
    <text>if it's a bulk insert i think it should only work on a collection</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T11:56:21.065100</ts>
    <user>Gillian</user>
    <text>well that's the assumption i would make if i saw something called insert-multi</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:00:09.066200</ts>
    <user>Faustino</user>
    <text>what about looking for a batch insert? are you just trying to make the map for efficient?</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:00:23.066500</ts>
    <user>Faustino</user>
    <text>in ruby, we would batch insert with map</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:00:31.066700</ts>
    <user>Faustino</user>
    <text>since ruby is very slow</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:01:38.067000</ts>
    <user>Onita</user>
    <text>there’s definitely a batch insert. my concern was more around how to wrap it.</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:01:46.067200</ts>
    <user>Onita</user>
    <text>i’ll just go with two functions</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:01:57.067400</ts>
    <user>Faustino</user>
    <text>&lt;https://clojuredocs.org/clojure.core/partition&gt;</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:02:12.067800</ts>
    <user>Faustino</user>
    <text>there is partition if you want to break the collection into smaller chunks</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:02:23.068100</ts>
    <user>Onita</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:02:48.068700</ts>
    <user>Faustino</user>
    <text>just in case you have millions of items in the collection, and don’t want to suck up all your JVM’s memory… since JVM can use a ton of memory</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:03:51.069100</ts>
    <user>Faustino</user>
    <text>can I ask a question though? why would a type check be bad in this case?</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:04:17.069600</ts>
    <user>Onita</user>
    <text>i can’t say i have a super rigorous backing for that preference</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:05:01.070400</ts>
    <user>Onita</user>
    <text>one thing is i just find that, if i can completely avoid it, it reduces the number of code paths i could be looking at</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:05:51.071800</ts>
    <user>Onita</user>
    <text>which is definitely an argument for more than one function</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:07:58.072200</ts>
    <user>Faustino</user>
    <text>ya, the type check is also coupling… still thinking</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:08:40.072600</ts>
    <user>Faustino</user>
    <text>my thought, comparing this to OOP, is to use dependency injection</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:09:01.073000</ts>
    <user>Faustino</user>
    <text>but only use that pattern if you find that you need lots of duplicate functions</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:10:21.073500</ts>
    <user>Faustino</user>
    <text>build yourself a to_collection function, that can turn any other single data into collection type</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:11:28.074200</ts>
    <user>Faustino</user>
    <text>but that’s only going to be good, if it’s readable, and 1 to_collection function can save you from writing dozens of duplicate code</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:11:42.074500</ts>
    <user>Faustino</user>
    <text>so it’s a little premmature to use the pattern</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:14:05.074900</ts>
    <user>Onita</user>
    <text>yeah, also a great idea</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:14:06.075100</ts>
    <user>Onita</user>
    <text>seeing how this one plays out may be a good indication</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:24:46.076300</ts>
    <user>Jasmine</user>
    <text>in general, Clojure rewards "thinking in collections". you have a huge library of seqable-&amp;gt;seqable functions for doing so, threading macros like -&amp;gt;&amp;gt; built to create pipelines, etc</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:25:38.077300</ts>
    <user>Jasmine</user>
    <text>many functions tend to be a predicate (takes a single element and returns logical result) or a transformation (element -&amp;gt; element)</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:26:12.078000</ts>
    <user>Jasmine</user>
    <text>generally I find you should mostly  do those, and use sequence functions to transform from collections of elements to collections of elements</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:27:44.079800</ts>
    <user>Jasmine</user>
    <text>when I've created functions that take 1 or N, it's usually because I haven't thought enough about how the function is going to be used.  and when I  have created it, I have ultimately had it break down because my single element actually turns out to be a collection itself and I can no longer distinguish</text>
  </message>
  <message conversation_id="932">
    <ts>2019-03-28T12:28:54.080900</ts>
    <user>Jasmine</user>
    <text>if the function you're writing is "insert-multi", I can't imagine it makes sense to take anything but a coll</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:29:06.081700</ts>
    <user>Sixta</user>
    <text>The other place I see it used us as an attempt at aesthetics.</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:29:15.082100</ts>
    <user>Jasmine</user>
    <text>which, imo, is false</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:29:29.082600</ts>
    <user>Jasmine</user>
    <text>much better aesthetically to have a single calling convention than 1 or N</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:29:54.083600</ts>
    <user>Latonya</user>
    <text>Not being able to later distinguish between 1 vs. N case, because the 1 case is itself a collection, is certainly a bad place to end up.</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:30:01.084000</ts>
    <user>Jasmine</user>
    <text>I always end up there</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:30:22.084900</ts>
    <user>Jasmine</user>
    <text>one place that makes this stuff visible is creating specs</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:30:48.086300</ts>
    <user>Jasmine</user>
    <text>if writing the spec for the function args is hard, then that's a good sign that you have possibly introduced unnecessary complexity</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:31:06.087000</ts>
    <user>Latonya</user>
    <text>On the comment earlier of "could be called as (do-join [thing]), but would prefer not to remember that", I don't want to sound too forceful, but if the doc of the function says that it _always_ takes a sequence of 'thing', then in Clojure the syntactic overhead of putting thing into a sequence like a vector is very very light, and common in Clojure code.</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:31:16.087300</ts>
    <user>Celestine</user>
    <text>I'll +1 Alex here. Early on in our Clojure development (2011), we wrote quite a few functions that could either take a collection or a single element -- and that code has been an albatross ever since, until we rewrote it to either always take a collection (and pass `[item]` in calls that had a single item) or to always take a single item (and call `map` on it for places that wanted a collection processed). In other words, Stuart Sierra's "heisenparameter" recommendation is what you should be doing :slightly_smiling_face: (or rather "don't").</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:33:23.088100</ts>
    <user>Jasmine</user>
    <text>I still have angst about stest/instrument for  example &lt;https://clojure.github.io/spec.alpha/clojure.spec.test.alpha-api.html#clojure.spec.test.alpha/instrument&gt;</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:34:04.088800</ts>
    <user>Jasmine</user>
    <text>arguably done in the sake of aesthetics, but it makes me deeply  uncomfortable</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:36:56.089500</ts>
    <user>Ronald</user>
    <text>Is `instrument` + `instrument-multiple` bad for aesthetics? It sounds good to me</text>
  </message>
  <message conversation_id="933">
    <ts>2019-03-28T12:39:27.090400</ts>
    <user>Jasmine</user>
    <text>arguably multi is more primary here, so I'd probably argue just doing `instrument` that takes a coll</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:13:59.091500</ts>
    <user>Faustino</user>
    <text>I am new. So it’s better to just convert the single item into a collection type? then pass it to the function. So the function always expects the same type (collection)?</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:14:19.091900</ts>
    <user>Faustino</user>
    <text>and rely on function doc comments to know what to pass to it?</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:15:02.092200</ts>
    <user>Jasmine</user>
    <text>imo, yes</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:17:04.093100</ts>
    <user>Faustino</user>
    <text>I definately in favor of functions taking only 1 type and returning 1 type</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:18:16.095400</ts>
    <user>Faustino</user>
    <text>Because functions calling other functions... if just 1 function in the chained calls, stack, messes up, you have to trace it, then possibly refactor code all over the place</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:18:55.096500</ts>
    <user>Faustino</user>
    <text>Func1.func2.func3.fun4 oops... func4 wanted a collection, not a string</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:20:29.097400</ts>
    <user>Faustino</user>
    <text>In ruby... they say... just don't use more than 3 chained calls :rolling_on_the_floor_laughing:</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:21:35.098300</ts>
    <user>Faustino</user>
    <text>I started writing the return type into my function names, to make code readable...</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:21:59.099000</ts>
    <user>Faustino</user>
    <text>func_coll.func_str.func_int</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:25:26.099300</ts>
    <user>Celestine</user>
    <text>In general, yes, but if you have a function that just calls `map` on its argument, it's probably better to name the function that is being applied, and to have callers use `map` on that instead.</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:26:25.099700</ts>
    <user>Jasmine</user>
    <text>well I can't endorse that :)</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:27:23.100200</ts>
    <user>Becki</user>
    <text>that notion is called Hungarian notation i think.</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:27:42.100600</ts>
    <user>Becki</user>
    <text>and the only popular vestiges that I know of are in interface names</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:28:28.101700</ts>
    <user>Faustino</user>
    <text>So its ok for Clojure functions to handle multiple types? Please correct me</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:29:02.102200</ts>
    <user>Jasmine</user>
    <text>it's possible. whether it's "ok" is entirely contextual</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:29:32.102800</ts>
    <user>Jasmine</user>
    <text>certainly there are many polymorphic functions in the core lib</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:30:37.103500</ts>
    <user>Dann</user>
    <text>for comparison, OCaml has different math functions for floating point vs. fixed point (calling `+` on a float is an error, calling `+.` on an int is an error)</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:31:19.104000</ts>
    <user>Dann</user>
    <text>clojure is pretty deeply polymorphic, it's one of my favorite things about the language</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:31:28.104200</ts>
    <user>Meagan</user>
    <text>probably one of the most annoying things about OCaml IMO</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:31:44.104900</ts>
    <user>Meagan</user>
    <text>not specifically the +/+. thing but the general lack of modular implicits</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:31:55.105400</ts>
    <user>Faustino</user>
    <text>OCaml is pretty strict on types?</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:32:02.105700</ts>
    <user>Dann</user>
    <text>they also have different fold (aka reduce) for different sequential collection types - very annoying</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:32:30.105900</ts>
    <user>Dann</user>
    <text>extremely so - ML set the paradigm for modern type-safe languages</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:33:03.106600</ts>
    <user>Becki</user>
    <text>F# was annoying like that as well</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:33:08.106800</ts>
    <user>Faustino</user>
    <text>Everyone keeps praising Haskell strict types.</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:33:28.107200</ts>
    <user>Faustino</user>
    <text>But then people say opposite. That inferred types is bad</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:33:42.107700</ts>
    <user>Dann</user>
    <text>but back to Clojure - polymorphism is normal, and it works well - especially the way of writing code to interfaces / protocols</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:33:50.107800</ts>
    <user>Faustino</user>
    <text>I have no idea. I do think a lack of polymorphic duct typing is annoying. With the + operator</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:34:05.108000</ts>
    <user>Dann</user>
    <text>yeah, F# was explicitly an attempt to copy OCaml for the CLR</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:34:21.108200</ts>
    <user>Jasmine</user>
    <text>wasn't it even a strict superset originally?</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:35:17.108500</ts>
    <user>Dann</user>
    <text>type inference is just a convenience for strict typing - if your system is strict enough the compiler can know which type has to be used</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:35:42.109300</ts>
    <user>Dann</user>
    <text>OCaml has an object system that is 100% duck typed, but the percentage of people writing OO code in OCaml is small</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:36:20.110500</ts>
    <user>Faustino</user>
    <text>Regarding earlier... I think he just needs an implicit type... e.g. single string converts into collection with 1 string element.</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:36:35.110900</ts>
    <user>Dann</user>
    <text>I think interface dispatch / polymorphism is the good part of OO and I'm glad Clojure embraces it while avoiding concrete inheritance and enterprise design patterns</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:36:52.111800</ts>
    <user>Faustino</user>
    <text>Can clojure do implicit conversions? Or is that bad idea?</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:43:05.113500</ts>
    <user>Faustino</user>
    <text>Hmmm. Scala and C++ seem to be against implicit type conversions. Not sure about Clojure.</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:43:18.113900</ts>
    <user>Clarine</user>
    <text>it’s basically a lack of type classes what makes this annoying (if I’m not mistaking?)</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:43:52.114300</ts>
    <user>Clarine</user>
    <text>implicit type conversions is something different from polymorphism</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:43:58.114500</ts>
    <user>Joette</user>
    <text>exactly - or just a value ie using `binding` form</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:44:16.115000</ts>
    <user>Clarine</user>
    <text>Clojure doesn’t convert a string to an integer automatically</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:47:02.116600</ts>
    <user>Latonya</user>
    <text>nor a string into a list of strings, nor vice versa.  I certainly wouldn't want it to automatically do so.</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:47:08.116800</ts>
    <user>Faustino</user>
    <text>Ya... (+ "a" "b") gives me a cast error</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:48:02.117600</ts>
    <user>Clarine</user>
    <text>I kinda don’t like functions who deal with either 1 thing or a list of things. It begets a lot of checks like: am I dealing with a collection here?</text>
  </message>
  <message conversation_id="934">
    <ts>2019-03-28T13:57:19.117900</ts>
    <user>Dann</user>
    <text>that sounds right but I'm not sure</text>
  </message>
  <message conversation_id="935">
    <ts>2019-03-28T14:40:43.118500</ts>
    <user>Faustino</user>
    <text>&lt;http://xahlee.info/clojure/clojure_binding_forms.html&gt;</text>
  </message>
  <message conversation_id="935">
    <ts>2019-03-28T14:40:56.118700</ts>
    <user>Faustino</user>
    <text>How does it know what nth is?</text>
  </message>
  <message conversation_id="935">
    <ts>2019-03-28T15:04:40.119000</ts>
    <user>Dillon</user>
    <text>I like to work with a single unit and find a way to arrange that function in a way that can process more volume if necessary. Sometimes just map of course :slightly_smiling_face:</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:36:42.120500</ts>
    <user>Joette</user>
    <text>```
(defn f [])
(def g #())
```
Is there any reason why calling `g` returns a `clojure.lang.PersistentList$EmptyList` where as calling `f` returns `nil`?</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:37:58.121100</ts>
    <user>Marlyn</user>
    <text>I think you mean the opposite &lt;@Joette&gt;</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:38:04.121300</ts>
    <user>Joette</user>
    <text>:smile:</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:38:11.121600</ts>
    <user>Marlyn</user>
    <text>oops you edited :slightly_smiling_face:</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:38:16.121800</ts>
    <user>Marlyn</user>
    <text>```user=&amp;gt; (macroexpand '#())
(fn* [] ())```</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:39:00.122300</ts>
    <user>Joette</user>
    <text>Was this a conscious design decision?</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:39:51.122900</ts>
    <user>Rosaline</user>
    <text>`#` means "a function that has the following form as its body"</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:40:06.123300</ts>
    <user>Joette</user>
    <text>ah a meant &lt;https://clojuredocs.org/clojure.core/binding&gt;</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:40:09.123500</ts>
    <user>Rosaline</user>
    <text>so for `#()` the following form is `()` the empty list</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:40:42.124300</ts>
    <user>Joette</user>
    <text>ah, ok</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:40:47.124500</ts>
    <user>Rosaline</user>
    <text>for `#(+ 1 2)` the following form is `(+ 1 2)` which is invoking the function + with the args 1 and 2</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:41:16.124900</ts>
    <user>Joette</user>
    <text>but then again `()` is an invalid form unless it is a macro</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:41:26.125200</ts>
    <user>Joette</user>
    <text>sorry - quoted `'()`</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:41:35.125600</ts>
    <user>Rosaline</user>
    <text>nope</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:41:54.126000</ts>
    <user>Rosaline</user>
    <text>```
user=&amp;gt; ()
()
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:41:58.126200</ts>
    <user>Joette</user>
    <text>where did I get that from?</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:42:07.126600</ts>
    <user>Joette</user>
    <text>I was certain :sweat_smile:</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:42:07.126700</ts>
    <user>Rosaline</user>
    <text>some other lisps are like that</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:45:10.127900</ts>
    <user>Becki</user>
    <text>coworker had a question about `reduce-kv`: is this purely convenience? Seems like a strange function for core (despite us using it a bunch)</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:47:02.128600</ts>
    <user>Marlyn</user>
    <text>`reduce-kv` allows consuming a map without boxing the entries `[k v]`</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:47:42.129300</ts>
    <user>Becki</user>
    <text>```
 clojure.lang.IPersistentMap
 (kv-reduce 
  [amap f init]
  (reduce (fn [ret [k v]] (f ret k v)) init amap))
```
is in core. isn't this the naive thing?</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:48:54.129800</ts>
    <user>Marlyn</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1879&gt;</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:49:05.130000</ts>
    <user>Shanell</user>
    <text>sorry for breaking the discussion but Stuart talked about the `(if (coll? arg) arg [arg])` antipattern here &lt;https://stuartsierra.com/2015/06/10/clojure-donts-heisenparameter&gt;</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T15:49:37.130400</ts>
    <user>Becki</user>
    <text>thanks &lt;@Marlyn&gt;. gonna read over and mull this.</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T16:05:06.131700</ts>
    <user>Faustino</user>
    <text>It is basically a more robust way to encapsulate lexical scope of vars</text>
  </message>
  <message conversation_id="936">
    <ts>2019-03-28T16:05:28.131900</ts>
    <user>Faustino</user>
    <text>And then return control back to the original scope</text>
  </message>
  <message conversation_id="937">
    <ts>2019-03-28T16:05:41.132100</ts>
    <user>Faustino</user>
    <text>Or no?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:30:43.133300</ts>
    <user>Adolph</user>
    <text>so, I can start a rebel-readline like this:
```
  clojure -Sdeps '{:deps {com.bhauman/rebel-readline {:mvn/version "0.1.4"}}}' \
  -m rebel-readline.main
```
and an nrepl like this:
```
  clj -Sdeps '{:deps {nrepl {:mvn/version "0.6.0"}}}' -m nrepl.cmdline --interactive
```
but, how do I do an nrepl + rebel-readline?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:54:27.133600</ts>
    <user>Dillon</user>
    <text>&lt;@Adolph&gt; perhaps aliases? &lt;https://clojure.org/reference/deps_and_cli#_aliases&gt;</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:55:05.133800</ts>
    <user>Dillon</user>
    <text>sorry if not related :slightly_smiling_face:</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:55:11.134000</ts>
    <user>Adolph</user>
    <text>is there an inline way to express it without needing to make changes to `deps.edn`?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:55:54.134600</ts>
    <user>Meagan</user>
    <text>there's probably something fancy you can do with `-e` but it's not going to be fun to type</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:58:02.136000</ts>
    <user>Reiko</user>
    <text>What is the idiomatic way of generating a list or map from a starting value that has some function applied to it iteratively? This would be the equivalent of an imperative for loop where the end condition is that the initial value has reached or dropped below 0.</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:58:20.136300</ts>
    <user>Reiko</user>
    <text>For example, a credit card payment calculator</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:58:51.136500</ts>
    <user>Ashlea</user>
    <text>`iterate`</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:59:18.136700</ts>
    <user>Ashlea</user>
    <text>```</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:59:23.136900</ts>
    <user>Ashlea</user>
    <text>```
user=&amp;gt; (doc iterate)
-------------------------
clojure.core/iterate
([f x])
  Returns a lazy sequence of x, (f x), (f (f x)) etc. f must be free of side-effects
```</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T16:59:24.137000</ts>
    <user>Dillon</user>
    <text>do you mean like `clj -A:1.7:bench:test...` where 1.7, bench, and test are three separate aliases you have set up?

you just use the -A flag</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:00:10.137500</ts>
    <user>Rosaline</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1906&gt; is also a thing</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:00:11.137600</ts>
    <user>Dillon</user>
    <text>that's all I have, might need to ask again if that isn't what you need :slightly_smiling_face:</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:03:30.139100</ts>
    <user>Shawanda</user>
    <text>&amp;gt; Is there a way to control the name of a `reify` class? I like to have that for profiling to be able to see which implementation I have in the profiler.

&lt;@Laveta&gt; have you found any workaround?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:04:09.139600</ts>
    <user>Dann</user>
    <text>I think at that point you can just use `deftype` right? or does it lack some advantage reify has?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:05:40.140700</ts>
    <user>Dann</user>
    <text>(it doesn't capture scope like reify, but you can translate that into field(s))</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:07:29.142500</ts>
    <user>Reiko</user>
    <text>Ok, so I looked over the docs and they aren't very clear in how exactly it works. Specifically I have an issue where the examples use `partial`, but that seems to only work when the unknown argument is not the first argument. In a simple function where one number is subtracted from the other this won't work because it's the first number that is unknown, not the second.</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:09:38.143800</ts>
    <user>Reiko</user>
    <text>For example, let's create a simple function for paying off a 0 interest balance so the function would be `(- balance payment)`. It's `balance` that needs to be replaced; not `payment`.</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:09:45.144200</ts>
    <user>Adolph</user>
    <text>in my case, I have a docker container with clojure/clj binaries in it and no access to the filesystem and can't mound things in ... if I want to string together multiple deps and two main entrypoints (e.g.: rebel-readline and nrepl mains), how would I do that?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:10:18.144900</ts>
    <user>Shawanda</user>
    <text>I've never thought about it, but longish classnames generated by `reify` are indeed inconvenient. Yeah, no scope capturing would be a downside. Maybe one could also try overriding `toString` inside `reify`, but then it's probably impossible to `defmethod print-method` for such instance..</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:11:58.145700</ts>
    <user>Dann</user>
    <text>you could probably `defmethod` print-method for `(class my-reify)`</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:12:25.146100</ts>
    <user>Dann</user>
    <text>and yeah, overriding toString does also work iirc</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:13:20.146500</ts>
    <user>Reiko</user>
    <text>Is there a way to use `partial` when the first argument is the one you want to replace?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:13:37.146700</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (reify java.io.Closeable (close [this]) (toString [this] "my closable"))
#object[user$eval138$reify__139 0x37ddb69a "my closable"]
```</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:13:50.147000</ts>
    <user>Dann</user>
    <text>&lt;@Reiko&gt; you can define it, the hard part is a good name</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:13:58.147200</ts>
    <user>Reiko</user>
    <text>?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:14:00.147300</ts>
    <user>Marlyn</user>
    <text>post a full example of what you're looking for</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:14:16.147800</ts>
    <user>Reiko</user>
    <text>I just gave a specific example</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:14:34.148500</ts>
    <user>Marlyn</user>
    <text>what is the input, and what is the full sequence that you want to get out?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:14:47.149100</ts>
    <user>Becki</user>
    <text>also `(partial #(func % second-arg))` if you don't want to think of a good name</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:15:24.149800</ts>
    <user>Dann</user>
    <text>fair enough - a cute name for it that I've seen is qartial (since q is a backward p)</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:16:04.150500</ts>
    <user>Becki</user>
    <text>that's fantastic</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:17:06.151200</ts>
    <user>Dann</user>
    <text>I can't take credit, and in practice I came back and found it used and forgot what it meant and expected it to be some kind of polynomial function</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:17:35.151300</ts>
    <user>Dann</user>
    <text>so ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:21:11.151700</ts>
    <user>Dillon</user>
    <text>I see what you mean now, you are referring to the command line argument for the entrypoint for each dep.

what is your reason for trying to use two entrypoints at the same time?</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:23:33.151900</ts>
    <user>Shawanda</user>
    <text>yeah, cool! not ideal, but better than the default</text>
  </message>
  <message conversation_id="938">
    <ts>2019-03-28T17:25:07.152100</ts>
    <user>Dillon</user>
    <text>Could you specify your own entry point and call into your dependencies' entry points from there?</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T17:57:25.152600</ts>
    <user>Clarine</user>
    <text>What’s the difference between fressian and nippy?</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T17:57:44.153100</ts>
    <user>Clarine</user>
    <text>are they conceptually the same but different implementations, or cover entirely different use cases?</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:00:40.154100</ts>
    <user>Dann</user>
    <text>&lt;@Clarine&gt; maybe this helps - seems like nippy is trying to be faster &lt;https://github.com/ptaoussanis/nippy/blob/master/src/taoensso/nippy/benchmarks.clj&gt;</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:00:54.154700</ts>
    <user>Dann</user>
    <text>it tests and records speed of both</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:01:15.155100</ts>
    <user>Rosaline</user>
    <text>nippy is like: what if we made bytes out of things instead of printing them and gzipped those bytes</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:02:24.156500</ts>
    <user>Clarine</user>
    <text>so fressian is better for reading/writing EDN to disk and nippy may be a bit faster than that?</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:02:24.156600</ts>
    <user>Adolph</user>
    <text>well, I want the readline capabilities of rebel-readline and I want the nrepl port listening at the same time</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:02:28.156800</ts>
    <user>Rosaline</user>
    <text>fressian is like: lets take a survey of serialization formats, find one that matches what we want for clojure, and include some features like caching to improve performance</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:02:48.157200</ts>
    <user>Adolph</user>
    <text>so, I guess maybe that's where that fancy `-e` work would need to come in</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:03:19.158300</ts>
    <user>Clarine</user>
    <text>if I have a command line app that needs to read and write EDN data from disk and there is no long-running process, does fressian still make sense?</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:03:34.158700</ts>
    <user>Rosaline</user>
    <text>I have only used nippy in the context of using libraries that brought nippy along for the ride, and in ever case formed an unfavorable opinion of those libraries, which has rubbed off on nippy</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:04:00.158900</ts>
    <user>Rosaline</user>
    <text>how much data?</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:04:40.159800</ts>
    <user>Clarine</user>
    <text>the max edn file I’ve seen right now is about 2MB. but I’m going to split it into multiple EDN files anyway, so probably smaller</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:04:57.160100</ts>
    <user>Rosaline</user>
    <text>I would go down a list something like pr &amp;gt; transit &amp;gt; fressian</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:05:53.161100</ts>
    <user>Rosaline</user>
    <text>but very likely somewhere between pr and transit I would switch to using apache derby</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:06:39.161800</ts>
    <user>Clarine</user>
    <text>I’ve tried Derby but that doesn’t compile with GraalVM :disappointed:</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:06:44.162000</ts>
    <user>Jasmine</user>
    <text>I think Stu's fressian talk  from years ago did a pretty good job at highlighting the goals and tradeoffs of fressian (pre-dated transit, which has different tradeoffs)</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:07:02.162200</ts>
    <user>Jasmine</user>
    <text>&lt;https://www.youtube.com/watch?v=JArZqMqsaB0&gt;</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:07:27.162700</ts>
    <user>Jasmine</user>
    <text>plus, that's like peak mullet Stu</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:07:33.162900</ts>
    <user>Clarine</user>
    <text>haha. thanks</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:18:47.163200</ts>
    <user>Ashlea</user>
    <text>&lt;@Reiko&gt; how about:
```
user=&amp;gt; (let [payment 2] (take-while pos? (iterate #(- % payment) 11)))
(11 9 7 5 3 1)
```
?</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:19:59.163400</ts>
    <user>Reiko</user>
    <text>Ended up with something very similar, but instead of `pos?` I'm using `(&amp;gt;= 0 %)`</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:21:49.163600</ts>
    <user>Reiko</user>
    <text>Though it actually makes more sense to use `pos?` thinking about it more as depending on the last balance and payment amount it may be less than the usual monthly payment</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:21:53.163800</ts>
    <user>Joette</user>
    <text>`binding` is used when you want to redefine the value of a variable within a code block. The variable needs to have been the `^:dynamic` meta - so lets say you have a variable that is defined in some other namespace. I think this example should make sense: ```analysis.core&amp;gt; (def ^:dynamic hello "hello")
#'analysis.core/hello
analysis.core&amp;gt; (defn print-hello []
                 (println hello))
#'analysis.core/print-hello
analysis.core&amp;gt; 
analysis.analysis&amp;gt; (binding [analysis.core/hello "bye"]
                     (analysis.core/print-hello))
bye
nil
analysis.analysis&amp;gt; ```</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:23:45.164200</ts>
    <user>Joette</user>
    <text>It is thread local - the macro expansion makes this clearer: ```analysis.analysis&amp;gt; (macroexpand '(binding [analysis.core/hello "bye"]
                                   (analysis.core/print-hello)))
(let*
 []
 (clojure.core/push-thread-bindings
  (clojure.core/hash-map #'analysis.core/hello "bye"))
 (try (analysis.core/print-hello) (finally (clojure.core/pop-thread-bindings))))```</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:24:07.164700</ts>
    <user>Celestine</user>
    <text>Can I just say how much I love `tap&amp;gt;`? :heart:</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:24:16.164900</ts>
    <user>Celestine</user>
    <text>(and REBL :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="939">
    <ts>2019-03-28T18:25:04.165100</ts>
    <user>Jasmine</user>
    <text>sure :)</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T18:52:11.166700</ts>
    <user>Dillon</user>
    <text>It's probably a subjective question, when and where to start nrepl/rebl - so you may just want to ask again in the main chat :slightly_smiling_face:</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T18:52:56.167700</ts>
    <user>Clarine</user>
    <text>I did a quick comparison between pr-str, fressian and transit.
Reading: EDN 100ms, Fressian 20ms, Transit 20ms
Writing: EDN 74ms, Fressian 50ms, Transit between 1000 and 2000 ms.
So it seems that Fressian is the clear winner here, and I don’t know why Transit writing takes that long…</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T18:53:18.168100</ts>
    <user>Clarine</user>
    <text>The map has 799 keys and is about 1.8MB in raw EDN.</text>
  </message>
  <message conversation_id="941">
    <ts>2019-03-28T19:04:29.169300</ts>
    <user>Marlyn</user>
    <text>Kinda hard to say without code</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:05:30.169500</ts>
    <user>Clarine</user>
    <text>&lt;@Marlyn&gt; &lt;https://github.com/borkdude/clj-kondo/blob/fressian/src/clj_kondo/main.clj#L14&gt;</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:07:35.170100</ts>
    <user>Clarine</user>
    <text>if you want, I can provide you with the data</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:08:52.170800</ts>
    <user>Marlyn</user>
    <text>Offhand, it is benchmarking file io</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:10:03.171100</ts>
    <user>Rosaline</user>
    <text>/tmp maybe a fast in memory filesystem, etc</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:10:20.171300</ts>
    <user>Clarine</user>
    <text>this is my home folder</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:10:51.172000</ts>
    <user>Clarine</user>
    <text>oh hmm, I’ll try to write fressian not to /tmp</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:11:03.172400</ts>
    <user>Marlyn</user>
    <text>It is also not accounting for JIT warmup</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:11:43.173500</ts>
    <user>Rosaline</user>
    <text>also, not related to performance, doing defs like that is super gross</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:12:10.174500</ts>
    <user>Rosaline</user>
    <text>clojure is not scheme, def always creates a global name, no matter where it is nested</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:12:25.175100</ts>
    <user>Clarine</user>
    <text>it is, that’s the point of this tool: &lt;https://github.com/borkdude/clj-kondo/#rationale&gt; :slightly_smiling_face:</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:12:48.175900</ts>
    <user>Rosaline</user>
    <text>don't do that though</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:12:53.176400</ts>
    <user>Clarine</user>
    <text>I know that it’s doing that, I wanted to inspect the value after the run, this is throwaway code</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:12:54.176500</ts>
    <user>Shawanda</user>
    <text>I'd suggest also trying Jsonista</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:13:26.177700</ts>
    <user>Marlyn</user>
    <text>Anyway, we use transit at work all the time, it's fast.</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:13:36.178300</ts>
    <user>Marlyn</user>
    <text>Something is wrong with the benchmark</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:13:50.178800</ts>
    <user>Rosaline</user>
    <text>like, it is entirely possible to build and operate large complex clojure code bases without inline defs to debug things</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:14:05.179300</ts>
    <user>Marlyn</user>
    <text>I would try to eliminate file IO and account for JIT and then recompare</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:14:25.180200</ts>
    <user>Marlyn</user>
    <text>My assumption is that transit is faster than edn and slower than fressian</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:14:31.180400</ts>
    <user>Rosaline</user>
    <text>the idea that you do it so often that you need a tool to make it easier is just, I dunno, what are we doing here</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:15:46.181500</ts>
    <user>Clarine</user>
    <text>I don’t make it easier, I just don’t want to commit it if I’ve done it. I find it easy to capture e.g. requests and then inspect them. Works for me. You can also use an atom for this, or scope-capture, I don’t care.</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:16:19.181800</ts>
    <user>Clarine</user>
    <text>I’ll re-benchmark tomorrow, it’s getting late here.</text>
  </message>
  <message conversation_id="942">
    <ts>2019-03-28T19:37:46.183100</ts>
    <user>Clarine</user>
    <text>I updated the benchmark so I can run it with either edn, fressian or transit from a cold JVM as a cmd line invocation.
These are the numbers (code is above it): &lt;https://github.com/borkdude/clj-kondo/blob/fressian/src/clj_kondo/main.clj#L59&gt;
This is the test file: &lt;https://www.dropbox.com/s/qkhcm5x9fkhvw1f/test.edn?dl=0&gt;
I’m seeing the same thing with transit.</text>
  </message>
  <message conversation_id="940">
    <ts>2019-03-28T19:43:27.184100</ts>
    <user>Clarine</user>
    <text>I’d be curious to hear if any one of you can reproduce this. I’m afk now. Goodnight.</text>
  </message>
  <message conversation_id="943">
    <ts>2019-03-28T21:03:08.185200</ts>
    <user>Loria</user>
    <text>what's a simple way of testing if a given object is a clojure function? (as defined by `defn`/`fn`)</text>
  </message>
  <message conversation_id="943">
    <ts>2019-03-28T21:12:13.185500</ts>
    <user>Simonne</user>
    <text>&lt;@Loria&gt; `fn?`</text>
  </message>
  <message conversation_id="943">
    <ts>2019-03-28T21:21:33.185800</ts>
    <user>Loria</user>
    <text>oops, how did I ever miss that :sweat_smile:</text>
  </message>
  <message conversation_id="943">
    <ts>2019-03-28T21:22:58.186400</ts>
    <user>Loria</user>
    <text>ah, so it's testing for `instance?` of `clojure.lang.Fn` instead of `clojure.lang.IFn`</text>
  </message>
  <message conversation_id="944">
    <ts>2019-03-28T22:04:28.187500</ts>
    <user>Simonne</user>
    <text>Yeah the docstring explains the diff. Also available: `ifn?`</text>
  </message>
  <message conversation_id="945">
    <ts>2019-03-28T22:28:20.187900</ts>
    <user>Jasmine</user>
    <text>`ifn?` is almost always preferable</text>
  </message>
  <message conversation_id="945">
    <ts>2019-03-28T22:46:10.192000</ts>
    <user>Jasmine</user>
    <text>&lt;@Clarine&gt; it would be worth double-checking that all these paths are buffered.  your edn code goes through io/reader and spit which are both buffered, but I'm not sure about the others. certainly the transit perf seems higher than I'd expect, if it's not buffering, then might be worth a check to make sure there's not a bug that's crept in. I doubt this has been profiled in a long while.</text>
  </message>
  <message conversation_id="945">
    <ts>2019-03-28T22:46:42.192500</ts>
    <user>Jasmine</user>
    <text>also, for a big file like this you could probably use larger buffers than the default</text>
  </message>
  <message conversation_id="946">
    <ts>2019-03-29T01:21:12.193300</ts>
    <user>Felix</user>
    <text>What is the data structure behind Clojure persistent maps? (I need to port them to another language.)</text>
  </message>
  <message conversation_id="946">
    <ts>2019-03-29T01:42:39.195400</ts>
    <user>Sebrina</user>
    <text>&lt;https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L379&gt; `hash-map` -&amp;gt; `clojure.lang.PersistentHashMap` -&amp;gt; `clojure.lang.APersistentMap` -&amp;gt; `Map` if I’m following your question and inheritance chain correctly.</text>
  </message>
  <message conversation_id="946">
    <ts>2019-03-29T01:50:41.197300</ts>
    <user>Faustino</user>
    <text>I just watched Rich's video... vectors are based on tries (trees). Hash maps are probably similar. They also use shared data.</text>
  </message>
  <message conversation_id="946">
    <ts>2019-03-29T01:52:04.197500</ts>
    <user>Faustino</user>
    <text>&lt;https://clojure.org/reference/data_structures&gt;</text>
  </message>
  <message conversation_id="946">
    <ts>2019-03-29T01:53:18.199500</ts>
    <user>Faustino</user>
    <text>There is hashed and sorted maps. I am not 100% certain they use tries. But probably some kind of branching data structure similar to what underlies vectors.</text>
  </message>
  <message conversation_id="946">
    <ts>2019-03-29T01:53:50.199600</ts>
    <user>Faustino</user>
    <text>Which language?</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T03:13:58.200300</ts>
    <user>Clarine</user>
    <text>&lt;@Jasmine&gt; when I write to a `(java.io.ByteArrayOutputStream.)` it’s already much faster</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T04:01:55.201100</ts>
    <user>Clarine</user>
    <text>I tried to use fressian with GraalVM native. This code works:
```
(fressian/create-reader (io/input-stream (io/file clj-cache-file)))
```
but this didn’t:
```
(fressian/read-object (fressian/create-reader (io/input-stream (io/file clj-cache-file))))
```
This is the output: &lt;https://gist.github.com/borkdude/5f19d6bb0c3f180273786ae34f63f60f&gt;</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T04:03:42.202100</ts>
    <user>Clarine</user>
    <text>I see spec being mentioned in the error message, I see it often with Clojure libs compiled with GraalVM, but it’s weird how this can be triggered by only adding `fressian/read-object`</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T04:17:07.202800</ts>
    <user>Alyce</user>
    <text>I believe this is a problem with Clojure 1.10.0 and Spec 0.2.176+</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T04:17:16.203100</ts>
    <user>Alyce</user>
    <text>It's referenced, indirectly here: &lt;https://dev.clojure.org/jira/browse/CLJ-1472&gt; (ignore the bit about android, the juicy bit is at the end)</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T04:17:48.203800</ts>
    <user>Alyce</user>
    <text>I hit the same issue yesterday, doing some experimentation with Graal and Clojure. I had to go back to Clojure 1.9.0 to compile a native image.</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T04:44:54.204300</ts>
    <user>Clarine</user>
    <text>thank you, I’ll try 1.9.0</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T04:46:02.205000</ts>
    <user>Clarine</user>
    <text>At least Transit JSON works with Graal and 1.10. I couldn’t get MessagePack working:
```
Mar 29, 2019 9:41:43 AM org.msgpack.template.builder.TemplateBuilderChain createForceTemplateBuilder
WARNING: Failed to create a TemplateBuilder reflectively
```</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:01:17.207000</ts>
    <user>Clarine</user>
    <text>Confirmed, I can get fressian working when dropping back to Clojure 1.9.0 and adding some type hints about FressianWriter + running with `--report-unsupported-elements-at-runtime`. But since Fressian and Transit are pretty close in performance, I’m going with 1.10 and without the flag.</text>
  </message>
  <message conversation_id="948">
    <ts>2019-03-29T05:04:36.208800</ts>
    <user>Marvin</user>
    <text>hey clojurians, how you guys usually do the follow
I have one business rule function ( create-invoice ) which could create an invoice or based on some business rule fail.
should my function return two different shapes ( on success the invoice and on error a map with ::error key  ) ?
should my function throw an exception and my handler dispatch properly to handle that ?

how you guys normally do that ?</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:22:47.209400</ts>
    <user>Clarine</user>
    <text>&lt;@Alyce&gt; did you try a fork of Clojure with that patch applied btw? With tools.deps that should be possible I think?</text>
  </message>
  <message conversation_id="948">
    <ts>2019-03-29T05:25:24.210000</ts>
    <user>Toby</user>
    <text>&lt;@Marvin&gt; use pure data and avoid Exceptions whenever you can</text>
  </message>
  <message conversation_id="948">
    <ts>2019-03-29T05:31:12.210700</ts>
    <user>Marvin</user>
    <text>&lt;@Toby&gt; yeah, so you mean create a wrapper result ?</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:31:43.211300</ts>
    <user>Clarine</user>
    <text>re: &lt;https://clojurians.slack.com/archives/C03S1KBA2/p1553827570192000&gt;
what should I do to buffer the writing to a file?
I currently have something like:
```
(let [writer (transit/writer (java.io.BufferedOutputStream. (io/output-stream (io/file "/Users/Borkdude/temp/transit.json")) (* 1024 1024)) :json)]
                      (time (transit/write writer edn)))
````
But I still get very slow writes</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:38:19.211800</ts>
    <user>Clarine</user>
    <text>I’m not seeing any difference with older transit versions, so it must be something on my side</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:42:10.212200</ts>
    <user>Clarine</user>
    <text>If I need a `BufferedWriter` I’m not sure how to do this with transit</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:46:26.212300</ts>
    <user>Alyce</user>
    <text>Hi, no. Didn't get round to it sorry.</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:49:26.212500</ts>
    <user>Nicki</user>
    <text>I think it would be fine to always return a map.</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:49:45.212700</ts>
    <user>Nicki</user>
    <text>either ```{:invoice {}}```</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:50:08.212900</ts>
    <user>Nicki</user>
    <text>or ```{:error "I am broken"}```</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:50:25.213300</ts>
    <user>Clarine</user>
    <text>As a workaround I can first write to a bytearrayoutputstream.</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:50:28.213400</ts>
    <user>Nicki</user>
    <text>And then surrounding code can easily check for the presence of an error.</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T05:51:41.213600</ts>
    <user>Nicki</user>
    <text>But like most things it comes down to style and possibly what else is happening nearby in the code.</text>
  </message>
  <message conversation_id="947">
    <ts>2019-03-29T06:22:18.213800</ts>
    <user>Marvin</user>
    <text>Yeah, I see &lt;@Nicki&gt; . I’m wrapping inside my Result map format</text>
  </message>
  <message conversation_id="949">
    <ts>2019-03-29T06:59:35.218700</ts>
    <user>Sophie</user>
    <text>Hello clojurians, I’m looking for a tutorial project implementing simple CRUD API powered by Datomic (ideally with front end in cljs) to use for training purposes with some newcomers. I went through some awesome-clojure lists, with no luck. My next best option would be to write something on top of mbrainz.</text>
  </message>
  <message conversation_id="949">
    <ts>2019-03-29T07:16:06.219500</ts>
    <user>Stasia</user>
    <text>This is the only one that I can think of , off hand: &lt;https://github.com/robert-stuttaford/bridge&gt; cc &lt;@Korey&gt;</text>
  </message>
  <message conversation_id="950">
    <ts>2019-03-29T07:22:27.219900</ts>
    <user>Simonne</user>
    <text>&amp;gt; A persistent rendition of Phil Bagwell’s Hash Array Mapped Trie</text>
  </message>
  <message conversation_id="950">
    <ts>2019-03-29T07:22:29.220100</ts>
    <user>Simonne</user>
    <text>&lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/PersistentHashMap.java&gt;</text>
  </message>
  <message conversation_id="950">
    <ts>2019-03-29T07:23:19.220400</ts>
    <user>Sophie</user>
    <text>thanks, that looks promising</text>
  </message>
  <message conversation_id="951">
    <ts>2019-03-29T07:41:28.222200</ts>
    <user>Jeannette</user>
    <text>what is the equivalent of the following in core.async?
foobar :: (a -&amp;gt; b) -&amp;gt; (Chan a) -&amp;gt; (Chan b)</text>
  </message>
  <message conversation_id="951">
    <ts>2019-03-29T07:58:16.223200</ts>
    <user>Danna</user>
    <text>&lt;http://clojure.github.io/core.async/#clojure.core.async/chan&gt;
lets you pass a transform transducer into the channel itself, if you are in control of constructing the channel</text>
  </message>
  <message conversation_id="951">
    <ts>2019-03-29T07:58:56.224000</ts>
    <user>Danna</user>
    <text>if you have been given a pre-existing channel then I think you would have to use
&lt;http://clojure.github.io/core.async/#clojure.core.async/pipe&gt;</text>
  </message>
  <message conversation_id="951">
    <ts>2019-03-29T08:06:06.225600</ts>
    <user>Jeannette</user>
    <text>None</text>
  </message>
  <message conversation_id="951">
    <ts>2019-03-29T08:06:16.226100</ts>
    <user>Jeannette</user>
    <text>correct?</text>
  </message>
  <message conversation_id="951">
    <ts>2019-03-29T08:07:39.226500</ts>
    <user>Danna</user>
    <text>that sort of thing</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T08:55:08.230100</ts>
    <user>Aubrey</user>
    <text>Depends on the context — if you can’t really do anything about it, you might throw an exception and let your top-level error handle deal with that (wrap it in a nice HTTP status, for example). Don’t forget `ex-info` which allows you to put arbitrary data in the exception so you can do further dispatching there as well.</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T11:04:33.232300</ts>
    <user>Marvin</user>
    <text>so &lt;@Aubrey&gt; , Yeah, I tend to not control my flow using exceptions . business case rules I’m returing a Result Wrapper map which the caller should if the   ::error key exists or not …
can you enumerate some cases of ` if you can't really do anything about it` ?</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T11:08:15.234400</ts>
    <user>Faustino</user>
    <text>In ruby we use {  } for a code block. It has a local scope but also has access to outside scope (closure). But I don't think Ruby can access different namespace scopes like Clojure bind appears to be doing.</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T11:15:30.234700</ts>
    <user>Faustino</user>
    <text>So instead of passing parameters to a function, you just bind new variable values to the namespace before running code block or functions. It's almost like a global var but probably immutable?</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T12:44:50.238400</ts>
    <user>Candis</user>
    <text>&lt;@Clarine&gt; I’ll throw CBOR’s hat into the ring if you’re looking for binary serialization formats: &lt;https://github.com/greglook/clj-cbor&gt;</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T12:47:37.239400</ts>
    <user>Candis</user>
    <text>haven’t specifically tried it with Graal yet, but it has no dependencies outside Clojure itself, so it ought to work.</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T12:47:55.240100</ts>
    <user>Candis</user>
    <text>Also it’s an open standard, so there are other tools out there for working with the data. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T12:48:12.240400</ts>
    <user>Meagan</user>
    <text>how much of an anti-pattern is it to run `clojure.test/is` in a seq? like:
```
(doseq [ex examples]
  (t/is (f ex))
```</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T12:48:57.240800</ts>
    <user>Candis</user>
    <text>`is` is side-effecting, so that is not unusual from what I’ve seen</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T12:49:42.241000</ts>
    <user>Becki</user>
    <text>maybe use `are`?</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T12:53:21.241200</ts>
    <user>Meagan</user>
    <text>hm yeah that might be better</text>
  </message>
  <message conversation_id="952">
    <ts>2019-03-29T13:04:07.242100</ts>
    <user>Clarine</user>
    <text>&lt;@Candis&gt; Cool, thank you.</text>
  </message>
  <message conversation_id="953">
    <ts>2019-03-29T13:21:35.243000</ts>
    <user>Clarine</user>
    <text>I’m still a bit unsatisfied with this:
&lt;https://clojurians.slack.com/archives/C03S1KBA2/p1553851903211300&gt;
Anyone got a better alternative?</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T13:43:18.243600</ts>
    <user>Candis</user>
    <text>Don’t the `&lt;http://clojure.java.io|clojure.java.io&gt;` functions already return buffered streams?</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T13:43:24.243800</ts>
    <user>Candis</user>
    <text>you’re going to have a small buffer in front of your big buffer</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T13:49:22.245400</ts>
    <user>Clarine</user>
    <text>&lt;@Candis&gt; I’m now taking a workaround by first writing to a ByteArrayOutputBuffer and then copy that to a file, which is a bit insane. But that only took 45ms whereas directly writing to a file took 1s (EDN read from a 2MB .edn file)</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T13:53:29.245900</ts>
    <user>Candis</user>
    <text>have you tried making a `FileOutputStream` directly?</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T13:53:48.246100</ts>
    <user>Candis</user>
    <text>(then wrapping in a large buffer as above)</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T13:59:36.247100</ts>
    <user>Candis</user>
    <text>FWIW:
```
% ls -lh bench/reddit.edn
-rw-r--r--  1 greg  staff   123K Jan  9 09:31 bench/reddit.edn
```
```
=&amp;gt; (def reddit-data (clojure.edn/read-string (slurp "bench/reddit.edn")))
=&amp;gt; (time (cbor/spit-all "reddit.cbor" (repeat 17 reddit-data)))
"Elapsed time: 158.625145 msecs"
1683493
```</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:02:58.247900</ts>
    <user>Clarine</user>
    <text>I was preparing a full repro. Here it is:
```
$ wget &lt;https://www.dropbox.com/s/qkhcm5x9fkhvw1f/test.edn\?dl\=0&gt; -O test.edn 
$ clj -Sdeps '{:deps {com.cognitect/transit-clj {:mvn/version "0.8.313"}}}'
Clojure 1.10.0
user=&amp;gt;  (require '[clojure.edn :as edn])
nil
user=&amp;gt; (def edn (edn/read-string (slurp "test.edn")))
#'user/edn
user=&amp;gt;  (count (keys edn))
799
user=&amp;gt; (require '[cognitect.transit :as transit])
nil
user=&amp;gt; (require '[&lt;http://clojure.java.io|clojure.java.io&gt; :as io])
nil
user=&amp;gt; (def writer (transit/writer (io/output-stream (io/file "transit.json")) :json))
#'user/writer
user=&amp;gt; (time (transit/write writer edn))
"Elapsed time: 1151.116438 msecs"
nil
```</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:03:07.248100</ts>
    <user>Clarine</user>
    <text>Now I can look at your suggestion…</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:05:30.248900</ts>
    <user>Candis</user>
    <text>now I’m pretty curious how cbor would do - I tried to copy enough of the sample dataset I had to make ~2 MB, but maybe there’s something gnarly in your data :man-shrugging:</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:05:58.249100</ts>
    <user>Clarine</user>
    <text>2MB is right :slightly_smiling_face:</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:06:51.249400</ts>
    <user>Clarine</user>
    <text>&lt;@Candis&gt; worse:
```
user=&amp;gt; (def writer (transit/writer (java.io.FileOutputStream. "transit.json") :json))
#'user/writer
user=&amp;gt; (time (transit/write writer edn))
"Elapsed time: 2039.522802 msecs"
```</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:07:09.249700</ts>
    <user>Candis</user>
    <text>I meant to also wrap your own buffered stream around that</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:07:18.250100</ts>
    <user>Clarine</user>
    <text>ok, I’ll try now</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:07:41.250600</ts>
    <user>Candis</user>
    <text>because `io/output-stream` is going to return you a `FileOutputStream` wrapped in a `BufferedOutputStream` with the default buffer size, so wrapping a larger buffer _around_ that isn’t going to help you</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:08:06.251000</ts>
    <user>Clarine</user>
    <text>something like this?
```
user=&amp;gt; (def writer (transit/writer (java.io.BufferedOutputStream. (java.io.FileOutputStream. "transit.json") 1024) :json))
#'user/writer
user=&amp;gt; (time (transit/write writer edn))
"Elapsed time: 1078.45894 msecs"
```</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:08:21.251200</ts>
    <user>Candis</user>
    <text>yeah, but with a larger buffer size</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:08:45.251400</ts>
    <user>Clarine</user>
    <text>```
user=&amp;gt; (def writer (transit/writer (java.io.BufferedOutputStream. (java.io.FileOutputStream. "transit.json") (* 1024 1024)) :json))
#'user/writer
user=&amp;gt; (time (transit/write writer edn))
"Elapsed time: 1016.702847 msecs"
```</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:10:54.251800</ts>
    <user>Candis</user>
    <text>well that’s surprising</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:11:03.252000</ts>
    <user>Clarine</user>
    <text>Note:
```
user=&amp;gt; (def bos (java.io.ByteArrayOutputStream. (* 1024 1024)))
#'user/bos
user=&amp;gt; (def writer (transit/writer bos :json))
#'user/writer
user=&amp;gt; (time (transit/write writer edn))
"Elapsed time: 31.144918 msecs"
nil
user=&amp;gt; (time (io/copy (.toByteArray bos) (io/file "transit.json")))
"Elapsed time: 16.471751 msecs"
nil
```</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:15:08.253000</ts>
    <user>Clarine</user>
    <text>btw, the size for the `bos` buffer didn’t matter very much here</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:42:39.253400</ts>
    <user>Clarine</user>
    <text>If desired, I can make an issue for this, but first I’d like to know if I’m not overseeing something</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:52:40.254000</ts>
    <user>Marlyn</user>
    <text>I don't understand what the problem is &lt;@Clarine&gt;</text>
  </message>
  <message conversation_id="955">
    <ts>2019-03-29T14:53:28.254400</ts>
    <user>Marlyn</user>
    <text>the file writing being slow?</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:55:36.255200</ts>
    <user>Clarine</user>
    <text>when I write directly to a file it’s slow (1s). when I write via a bytearrayoutputstream and then to a file it’s 47ms.</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T14:55:51.255500</ts>
    <user>Clarine</user>
    <text>so yeah, the file writing</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:02:49.256600</ts>
    <user>Marlyn</user>
    <text>&lt;@Clarine&gt; try to add a call to `.flush()` on the File outputstream on your _other_ (non-Transit) benchmarks and see if it makes them 1sec</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:09:49.257000</ts>
    <user>Clarine</user>
    <text>&lt;@Marlyn&gt; Like this?
```
user=&amp;gt; (time (let [fos (java.io.FileOutputStream. "/tmp/foo.edn") w (io/writer fos)] (.write w (str edn)) (.flush fos)))
"Elapsed time: 77.273308 msecs"
```</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:10:31.257300</ts>
    <user>Marlyn</user>
    <text>yeah, need close the stream too</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:10:34.257600</ts>
    <user>Marlyn</user>
    <text>`with-open`</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:10:52.258000</ts>
    <user>Marlyn</user>
    <text>There's a flush() in transit I'm trying to understand</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:11:13.258400</ts>
    <user>Clarine</user>
    <text>```
user=&amp;gt; (time (with-open [fos (java.io.FileOutputStream. "/tmp/foo.edn")] (let [w (io/writer fos)] (.write w (str edn)) (.flush fos))))
"Elapsed time: 73.316135 msecs"
```</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:13:41.258700</ts>
    <user>Marlyn</user>
    <text>ok... I can't explain this yet.</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:15:44.258900</ts>
    <user>Jasmine</user>
    <text>sorry, no time to look atm</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:17:48.259000</ts>
    <user>Roslyn</user>
    <text>&lt;@Clarine&gt; have you tried profiling it with clj-async-profiler?</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:18:32.259300</ts>
    <user>Clarine</user>
    <text>I just used that tool an hour ago, but not for this problem. I could try it now :slightly_smiling_face:</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:23:27.259500</ts>
    <user>Clarine</user>
    <text>Here’s the flamegraph: &lt;https://www.dropbox.com/s/4wv7bnvdrnhd5u9/Screenshot%202019-03-29%2020.23.16.png?dl=0&gt;</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:24:51.260300</ts>
    <user>Marlyn</user>
    <text>neat tool, how does it contrast with the other code?</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:28:54.261000</ts>
    <user>Tammera</user>
    <text>(what are you profiling, cpu samples?)</text>
  </message>
  <message conversation_id="956">
    <ts>2019-03-29T15:29:11.261400</ts>
    <user>Tammera</user>
    <text>(you can change what is profiled ^^)</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:29:13.261600</ts>
    <user>Clarine</user>
    <text>This is the EDN code from above:
&lt;https://www.dropbox.com/s/e0viq6lnquavi0i/Screenshot%202019-03-29%2020.28.25.png?dl=0&gt;</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:29:22.261900</ts>
    <user>Clarine</user>
    <text>yes, this is CPU</text>
  </message>
  <message conversation_id="956">
    <ts>2019-03-29T15:30:07.262100</ts>
    <user>Aubrey</user>
    <text>If the caller can recover from that error, and is expected to be able to, then perhaps an exception is not a good fit. If the caller can’t really handle the error, but have to deal with it anyway to avoid things like nils or errors maps propagating throughout the system, then an exception is perhaps better suited?</text>
  </message>
  <message conversation_id="956">
    <ts>2019-03-29T15:30:20.262600</ts>
    <user>Holly</user>
    <text>do you have the file graph?</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:30:44.263100</ts>
    <user>Clarine</user>
    <text>The purple here is `flush`: &lt;https://www.dropbox.com/s/2x8ovkcbjfszmgl/Screenshot%202019-03-29%2020.30.34.png?dl=0&gt;</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:32:07.263700</ts>
    <user>Clarine</user>
    <text>Here’s the EDN flamegraph (as data): &lt;https://www.dropbox.com/s/2kd67lbhycw2gj9/edn-flamegraph.svg?dl=0&gt;
Here transit: &lt;https://www.dropbox.com/s/3dfh77wnvbqkkgv/transit-flamegraph.svg?dl=0&gt;</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:33:30.265000</ts>
    <user>Clarine</user>
    <text>it seems indeed that transit spends most of its time flushing…</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:33:33.265100</ts>
    <user>Marlyn</user>
    <text>clearly FileOutputStream.flush() is slow (the red is a native method).  What I don't understand is why we can't make the EDN writing incur the same cost</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:35:09.266600</ts>
    <user>Marlyn</user>
    <text>by explicitly flushing. (Mind opening a ticket to cognitect/transit-java &lt;@Clarine&gt;?)</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:35:22.266800</ts>
    <user>Clarine</user>
    <text>is that in JIRA?</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:35:59.267000</ts>
    <user>Marlyn</user>
    <text>no github</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:36:16.267300</ts>
    <user>Clarine</user>
    <text>ok</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:36:20.267500</ts>
    <user>Marlyn</user>
    <text>maybe transit-clj might be better</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:36:27.267800</ts>
    <user>Clarine</user>
    <text>ok</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:36:33.268100</ts>
    <user>Marlyn</user>
    <text>until we know more about what the source of the problem is</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:36:38.268400</ts>
    <user>Marlyn</user>
    <text>I suspect flush</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:44:04.268900</ts>
    <user>Clarine</user>
    <text>a’ight: &lt;https://github.com/cognitect/transit-clj/issues/43&gt;</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:45:26.269300</ts>
    <user>Magdalena</user>
    <text>[ANN] Cognitect Labs' aws-api 0.8.283 is now available! &lt;https://groups.google.com/forum/#!topic/clojure/cOIF5cjAecI&gt;</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T15:55:48.270400</ts>
    <user>Candis</user>
    <text>flame graphs are pretty nifty - I was using the same tool while profiling clj-cbor :male-scientist: :bar_chart:</text>
  </message>
  <message conversation_id="957">
    <ts>2019-03-29T15:57:21.271000</ts>
    <user>Tammera</user>
    <text>I am so amazed in what you can put in a svg</text>
  </message>
  <message conversation_id="957">
    <ts>2019-03-29T15:57:35.271400</ts>
    <user>Tammera</user>
    <text>also, terrified, why does it support scripts :’)</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T16:02:02.271700</ts>
    <user>Clarine</user>
    <text>and why does my computer open .svg files as text in Atom</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T16:04:05.272300</ts>
    <user>Clarine</user>
    <text>this is absolutely great for deciding what to optimize. fuzzing about details that only contribute to a small gain is a risk</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T16:08:36.272700</ts>
    <user>Clarine</user>
    <text>does this also exist for cljs?</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T16:09:25.273000</ts>
    <user>Tammera</user>
    <text>its built on a java library iirc</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T16:12:05.273700</ts>
    <user>Meagan</user>
    <text>I would imagine in CLJS it would be more useful to use e.g. the Chrome profiler</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T16:12:26.274100</ts>
    <user>Meagan</user>
    <text>or the React DevTools profiler if you're doing React</text>
  </message>
  <message conversation_id="954">
    <ts>2019-03-29T16:43:48.274500</ts>
    <user>Dann</user>
    <text>there are definitely graphs in that style available with chrome/react</text>
  </message>
  <message conversation_id="958">
    <ts>2019-03-29T17:10:48.274900</ts>
    <user>Clarine</user>
    <text>just opened youtube and I saw this: &lt;https://www.youtube.com/watch?v=yqNLDpooFjw&gt;</text>
  </message>
  <message conversation_id="959">
    <ts>2019-03-30T01:18:29.278000</ts>
    <user>Gene</user>
    <text>I think I remember seeing that someone put together a searchable list of companies using Clojure. Is that still live?</text>
  </message>
  <message conversation_id="959">
    <ts>2019-03-30T01:55:33.278200</ts>
    <user>Becki</user>
    <text>&lt;https://clojure.org/community/companies&gt;</text>
  </message>
  <message conversation_id="959">
    <ts>2019-03-30T03:14:51.278400</ts>
    <user>Gene</user>
    <text>Cheers &lt;@Becki&gt; </text>
  </message>
  <message conversation_id="959">
    <ts>2019-03-30T03:15:57.279600</ts>
    <user>Gene</user>
    <text>I did find that. But I thought there was a seperate site. I think it was just the google sheets that the community created to collect more</text>
  </message>
  <message conversation_id="959">
    <ts>2019-03-30T03:20:42.280400</ts>
    <user>Becki</user>
    <text>Oh yeah I remember that now</text>
  </message>
  <message conversation_id="959">
    <ts>2019-03-30T03:22:10.280700</ts>
    <user>Becki</user>
    <text>&lt;@Gene&gt; &lt;https://clojureverse.org/t/crowdsourcing-list-of-clojure-companies/2825&gt;</text>
  </message>
  <message conversation_id="960">
    <ts>2019-03-30T04:21:47.281200</ts>
    <user>Jeannette</user>
    <text>how do I find the interfaces/protocols a certain value implements?</text>
  </message>
  <message conversation_id="961">
    <ts>2019-03-30T04:52:22.282400</ts>
    <user>Min</user>
    <text>You can use (ancestors (class x)) and extenders maybe?</text>
  </message>
  <message conversation_id="960">
    <ts>2019-03-30T08:43:37.285700</ts>
    <user>Jeannette</user>
    <text>how do I consume a channel? should i just go-loop over it or is there a more idiomatic pattern?</text>
  </message>
  <message conversation_id="960">
    <ts>2019-03-30T09:13:45.287100</ts>
    <user>Lane</user>
    <text>&lt;@Jeannette&gt; go-loop is good, you will just need a mechanism to stop the loop by having another channel to signal stop or a special value posted on the same channel.</text>
  </message>
  <message conversation_id="962">
    <ts>2019-03-30T09:22:01.287500</ts>
    <user>Lane</user>
    <text>Or just detect when the input channel closes.</text>
  </message>
  <message conversation_id="961">
    <ts>2019-03-30T09:54:49.287600</ts>
    <user>Grace</user>
    <text>n</text>
  </message>
  <message conversation_id="963">
    <ts>2019-03-30T12:54:36.288600</ts>
    <user>Roslyn</user>
    <text>I wrote a post about question mark suffixes, not sure it's worth &lt;#C06MAR553|announcements&gt; , so I'll post it here: &lt;https://vlaaad.github.io/2019-03-30/question-marks-in-clojure&gt;</text>
  </message>
  <message conversation_id="964">
    <ts>2019-03-30T18:59:59.290100</ts>
    <user>Clarine</user>
    <text>is there a reliable way to lock an entire directory (for reading and writing) over multiple processes in Java?
a simple but maybe not reliable way would be to write a “pid” or “lock” file and wait for the process which created that file to remove it</text>
  </message>
  <message conversation_id="964">
    <ts>2019-03-30T19:37:45.290500</ts>
    <user>Simonne</user>
    <text>&lt;@Clarine&gt; Is there a way to do that in _any_ lang?</text>
  </message>
  <message conversation_id="964">
    <ts>2019-03-30T19:38:15.291000</ts>
    <user>Simonne</user>
    <text>Seems like something that would have to be OS enforced. I’ve not heard of anything like that.</text>
  </message>
  <message conversation_id="961">
    <ts>2019-03-30T21:50:14.292000</ts>
    <user>Latrina</user>
    <text>A pid file should be reliable</text>
  </message>
  <message conversation_id="965">
    <ts>2019-03-30T22:55:29.293500</ts>
    <user>Latonya</user>
    <text>Many Linux/Unix variants have `mktemp` commands with guarantees of safety if many processes are trying to do so at once.  I wouldn't be surprised if there are other related system calls and/or even utility commands that apply for creating and removing lock files.</text>
  </message>
  <message conversation_id="965">
    <ts>2019-03-30T23:00:21.293600</ts>
    <user>Latonya</user>
    <text>This may have some pointers to such commands that are on at least some Linux systems: &lt;https://stackoverflow.com/questions/185451/quick-and-dirty-way-to-ensure-only-one-instance-of-a-shell-script-is-running-at&gt;</text>
  </message>
  <message conversation_id="964">
    <ts>2019-03-31T04:26:19.296000</ts>
    <user>Clarine</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="961">
    <ts>2019-03-31T04:37:18.296200</ts>
    <user>Karren</user>
    <text>There's FileLock class which you can use on top of "lock file" ("exclusive lock" I guess): &lt;https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileLock.html&gt;</text>
  </message>
  <message conversation_id="964">
    <ts>2019-03-31T05:02:59.296400</ts>
    <user>Clarine</user>
    <text>awesome!</text>
  </message>
  <message conversation_id="966">
    <ts>2019-03-31T15:45:28.300900</ts>
    <user>Suanne</user>
    <text>Why doesn’t this Java interop work?

```
(String/format "Hello, %s!" "Larry")
```

I get this error message:

```
Execution error (ClassCastException) at bg-clj.core/eval2010 (form-init14869047494885852816.clj:1).
class java.lang.String cannot be cast to class [Ljava.lang.Object; (java.lang.String and [Ljava.lang.Object; are in module java.base of loader 'bootstrap')
```</text>
  </message>
  <message conversation_id="966">
    <ts>2019-03-31T15:46:52.301100</ts>
    <user>Simonne</user>
    <text>&lt;https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String,%20java.lang.Object...)&gt;</text>
  </message>
  <message conversation_id="966">
    <ts>2019-03-31T15:47:33.301900</ts>
    <user>Simonne</user>
    <text>`String#format` takes a `String` and _and array of `Object`_</text>
  </message>
  <message conversation_id="966">
    <ts>2019-03-31T15:48:57.303400</ts>
    <user>Simonne</user>
    <text>The `Classname...` syntax in Java means “varargs”, but it actually unpacks to an array in the compiler. So `Object...`means “Object array”</text>
  </message>
  <message conversation_id="966">
    <ts>2019-03-31T15:49:06.303700</ts>
    <user>Simonne</user>
    <text>&lt;@Suanne&gt; ^</text>
  </message>
  <message conversation_id="966">
    <ts>2019-03-31T15:49:57.304400</ts>
    <user>Simonne</user>
    <text>So if you want to use `String#format`, you must do something like: `(String/format "Hello, %s!" (object-array ["Larry"]))`</text>
  </message>
  <message conversation_id="966">
    <ts>2019-03-31T15:50:42.305100</ts>
    <user>Simonne</user>
    <text>OR (and this is the preferred route), use `clojure.core/format` (&lt;https://clojuredocs.org/clojure.core/format&gt;)</text>
  </message>
  <message conversation_id="966">
    <ts>2019-03-31T15:51:20.305400</ts>
    <user>Simonne</user>
    <text>which does the exact same for you</text>
  </message>
  <message conversation_id="966">
    <ts>2019-03-31T15:55:34.306700</ts>
    <user>Suanne</user>
    <text>&lt;@Simonne&gt; Ah ok, thanks for the explanation! I’m trying to do a bit of interop right now just learn how to do it properly. I’d use the Clojure format function otherwise.</text>
  </message>
  <message conversation_id="967">
    <ts>2019-03-31T17:44:41.307300</ts>
    <user>Pamelia</user>
    <text>What are the best options for parsing BNFs?</text>
  </message>
  <message conversation_id="967">
    <ts>2019-03-31T17:45:26.307500</ts>
    <user>Becki</user>
    <text>there's something right up your alley: &lt;https://github.com/Engelberg/instaparse&gt;</text>
  </message>
  <message conversation_id="967">
    <ts>2019-03-31T17:50:36.309000</ts>
    <user>Suanne</user>
    <text>`(:name person)` and `(person :name)` where `person` is a map seem to do the same thing. Is one preferable over the other stylistically? They both seem a little bit magic over using `(get person :name)`.</text>
  </message>
  <message conversation_id="967">
    <ts>2019-03-31T17:55:58.310400</ts>
    <user>Becki</user>
    <text>not magic they just implement IFn. Also extremely common. There is a difference: a literal won't be null, the `person` binding might be. A null in the first position will throw whereas a lookup in null will return null</text>
  </message>
  <message conversation_id="967">
    <ts>2019-03-31T17:56:53.310900</ts>
    <user>Becki</user>
    <text>contrast `(:a nil)` versus `(nil :a)` in your repl.</text>
  </message>
  <message conversation_id="967">
    <ts>2019-03-31T18:27:26.312100</ts>
    <user>Elfriede</user>
    <text>generally I don't see maps used as functions unless it's being leveraged in a higher-order function, like `(map person list-of-keys-i-want-to-lookup)`.</text>
  </message>
  <message conversation_id="968">
    <ts>2019-03-31T20:32:28.313300</ts>
    <user>Simonne</user>
    <text>I see it in local scope for picking out options.</text>
  </message>
  <message conversation_id="968">
    <ts>2019-03-31T20:34:19.314500</ts>
    <user>Simonne</user>
    <text>`(let [things ({:a [1 2 3], :b [4 5 6]} opt)] ...)`</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T21:53:19.317900</ts>
    <user>Bernardine</user>
    <text>newb here w/ an aot question.    i'm compiling a `(defrecord Foo ...)` producing a jar containing the `Foo.class` then depending upon that jar from a java project
i can successfully load `Foo.class` (ie, `Class.forName("Foo")`) _dynamically_ from the java project
but attempting to compile/`javac` statically against Foo (ie, `import Foo` from java), i get a compile error that the symbol can't be found</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T21:54:03.318600</ts>
    <user>Bernardine</user>
    <text>`javap Foo.class` shows nothing suspicious.  maybe something obvious, but i'm banging my head here..</text>
  </message>
  <message conversation_id="970">
    <ts>2019-03-31T22:17:21.319000</ts>
    <user>Simonne</user>
    <text>lotta variables there :slightly_smiling_face:</text>
  </message>
  <message conversation_id="968">
    <ts>2019-03-31T22:18:00.319700</ts>
    <user>Simonne</user>
    <text>Is there a package? I can’t remember for sure, but I think Java disallows using the default package.</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:19:08.319900</ts>
    <user>Bernardine</user>
    <text>ha, there is a package</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:19:23.320200</ts>
    <user>Jasmine</user>
    <text>java doesn't disallow it, it's just discouraged</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:19:41.320700</ts>
    <user>Jasmine</user>
    <text>maybe post the full compilation error?</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:19:44.320800</ts>
    <user>Bernardine</user>
    <text>i used default package just to keep the question shorter :slightly_smiling_face:</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:20:22.321000</ts>
    <user>Simonne</user>
    <text>&lt;https://stackoverflow.com/questions/283816/how-to-access-java-classes-in-the-default-package&gt;</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:21:07.321800</ts>
    <user>Simonne</user>
    <text>next q: is the classpath properly set for the `javac` command?</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:23:22.323100</ts>
    <user>Bernardine</user>
    <text>```
Error:(6, 30) java: cannot find symbol
  symbol:   class Foo
  location: class com.example
```</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:23:28.323400</ts>
    <user>Simonne</user>
    <text>it seems clear it’s properly set for the `java` command (since you’re able to access it via reflection), but it could be improperly set for the `javac` command</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:23:31.323600</ts>
    <user>Bernardine</user>
    <text>yes the `javac -cp ...` is set</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:23:44.323900</ts>
    <user>Bernardine</user>
    <text>i'm able to link against other .class files</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:24:03.324400</ts>
    <user>Bernardine</user>
    <text>it makes me thing the .class generated by compiling the defrecord is special somehow</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:24:45.324800</ts>
    <user>Simonne</user>
    <text>to my knowledge, it is not</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:27:29.325900</ts>
    <user>Bernardine</user>
    <text>this yields a successful compile/javac:
```
import com.example.*;
class Bar { public static void main(String[] args) throws Exception { System.out.println("hello"); } }
```
this doesn't:
```
import com.example.Foo;
class Bar { public static void main(String[] args) throws Exception { System.out.println("hello"); } }
```</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:28:12.326300</ts>
    <user>Bernardine</user>
    <text>this compiles and runs w/o exception:
```
import com.example.*;
class Bar { public static void main(String[] args) throws Exception { System.out.println("hello"); Class.forName("com.example.Foo"); } }
```</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:28:34.326700</ts>
    <user>Simonne</user>
    <text>Are you overriding the classname? `class Foo`</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:29:22.327400</ts>
    <user>Bernardine</user>
    <text>oh good question -no ..</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:29:35.327700</ts>
    <user>Bernardine</user>
    <text>(i just edit my slack examples)</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:30:20.328200</ts>
    <user>Simonne</user>
    <text>Like I said, the last one is mostly irrelevant. It says nothing about the compilation.</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:30:33.328600</ts>
    <user>Bernardine</user>
    <text>fair.</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:30:46.329100</ts>
    <user>Bernardine</user>
    <text>the one that succeeds of course doesn't if i get the `javac -cp` wrong</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:32:53.329600</ts>
    <user>Bernardine</user>
    <text>and...
```
$ javap com/example/Foo.class 
Compiled from "model.clj"
public final class com.example.Foo implements clojure.lang.IRecord,clojure.lang.IHashEq...
```</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:35:06.329800</ts>
    <user>Simonne</user>
    <text>Yeah I dunno. Would probably need a full example.</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:35:13.330100</ts>
    <user>Simonne</user>
    <text>Good luck :confused:</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:36:19.330900</ts>
    <user>Bernardine</user>
    <text>hmm actually i might be on to something</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:36:36.331200</ts>
    <user>Bernardine</user>
    <text>i think i have package and a class w/ the same name</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:37:23.331400</ts>
    <user>Bernardine</user>
    <text>ok that seemed to be it</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:37:45.332000</ts>
    <user>Bernardine</user>
    <text>however -- this seems like it'd be a common type of collision in clojure compiles ??</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:38:34.332600</ts>
    <user>Bernardine</user>
    <text>...ie i `(defrecord Foo...` within `(ns com.example)`</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:38:57.333100</ts>
    <user>Bernardine</user>
    <text>compiling yields a `com/example.class` and a `com/example/Foo.class`</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:39:53.334100</ts>
    <user>Bernardine</user>
    <text>a `javac` / static compile finds `import com.example.Foo`
and doesn't like it b/c `com.example` is a class
...this explains why the `.forName("")` worked and not the static compile</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:40:21.334600</ts>
    <user>Bernardine</user>
    <text>but i guess i'm having trouble seeing why this wouldn't be a common thing</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:43:15.336100</ts>
    <user>Bernardine</user>
    <text>...okay so i do have a `(:gen-class)` on the `(ns com.example)`
so perhaps a slightly or much less common sitch?</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:44:53.337200</ts>
    <user>Bernardine</user>
    <text>after many years of java coding i did not realize you couldn't safely have a package and class w/ the same name
```
...
com/example.class
com/example/Foo.class
...
```
^bad for javac apparently</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:46:35.337400</ts>
    <user>Bernardine</user>
    <text>#til</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:49:07.338400</ts>
    <user>Bernardine</user>
    <text>removing the `(:gen-class)` fixes the issue
i guess the lesson is don't `:gen-class` ns's containing `defrecord`'s?</text>
  </message>
  <message conversation_id="969">
    <ts>2019-03-31T22:54:58.339100</ts>
    <user>Bernardine</user>
    <text>...revision: explicitly specify non-conflicting `:name` to gen-class will solve it too</text>
  </message>
  <message conversation_id="971">
    <ts>2019-04-01T00:44:40.340900</ts>
    <user>Elly</user>
    <text>Hey guys, I asked thi sin disc but none seems to know what's going on.
I'm getting:
```
SEVERE: Error creating DB connection for {:classname "com.mysql.jdbc.Driver", :subprotocol "mysql", :subname "//&amp;lt;ip&amp;gt;:3306/proj_dev", :user "root", :password "A&amp;lt;censored&amp;gt;"}
java.sql.SQLException: No suitable driver found for jdbc:mysql://&amp;lt;ip&amp;gt;:3306/proj_dev
```
for migratus when running `lein migratus migrate`
the db is completely empty, first time trying to migrate anything
```
With this in project.clj
  :migratus 
  {:store :database
    :migration-dir "migrations"
    :db {:classname "com.mysql.jdbc.Driver"
          :subprotocol "mysql"
          :subname "//&amp;lt;ip&amp;gt;:3306/proj_dev"
          :user "root"
          :password "*"}})
```
I'm not sure what I'm doing wrong
I have connected to the server with MySQL Workbench</text>
  </message>
  <message conversation_id="971">
    <ts>2019-04-01T00:45:58.341400</ts>
    <user>Elly</user>
    <text>I'm trying to connect to a Google Cloud MySQL instance...</text>
  </message>
  <message conversation_id="971">
    <ts>2019-04-01T00:46:09.341600</ts>
    <user>Elly</user>
    <text>any ideas?</text>
  </message>
  <message conversation_id="972">
    <ts>2019-04-01T02:44:37.344600</ts>
    <user>Jake</user>
    <text>Hi every one, I wrote this utility as an alternative to `with-redefs` such that the redefinition is done only on that thread and not others (ie, the global definition remains the same and redefinitions are per-thread). This is a fork from &lt;@Ferne&gt;’s original solution &lt;https://gist.github.com/gfredericks/7143494&gt;.

Would appreciate if you could check it out to suggest improvements/corrections: &lt;https://gist.github.com/mourjo/c7fc03e59eb96f8a342dfcabd350a927&gt;

cc &lt;@Merilyn&gt;</text>
  </message>
  <message conversation_id="973">
    <ts>2019-04-01T02:59:05.345300</ts>
    <user>Kandra</user>
    <text>Hmm. Has anyone else noticed a really slow startup times with `lein repl` when using JDK12?</text>
  </message>
  <message conversation_id="973">
    <ts>2019-04-01T02:59:33.345900</ts>
    <user>Kandra</user>
    <text>My REPL timeouts almost always with JDK12, maybe 1 out of 10 succeeds to connect. With JDK10 it works normally</text>
  </message>
  <message conversation_id="973">
    <ts>2019-04-01T03:01:58.346400</ts>
    <user>Roslyn</user>
    <text>try clojure 1.10.1-beta1</text>
  </message>
  <message conversation_id="973">
    <ts>2019-04-01T03:03:31.347000</ts>
    <user>Roslyn</user>
    <text>there was a performance regression regaring user.clj that 1.10.1-beta1 addressed: &lt;https://dev.clojure.org/jira/browse/CLJ-2484&gt;</text>
  </message>
  <message conversation_id="973">
    <ts>2019-04-01T03:09:15.347200</ts>
    <user>Kandra</user>
    <text>Oh, that has to be it! Cheers</text>
  </message>
  <message conversation_id="973">
    <ts>2019-04-01T03:13:56.347700</ts>
    <user>Kandra</user>
    <text>Yeah, I can confirm that after changing to 1.10.1-beta1 REPL starts up normally</text>
  </message>
  <message conversation_id="974">
    <ts>2019-04-01T06:47:04.349900</ts>
    <user>Vada</user>
    <text>hi all, i'm looking for a good API client HTTP project for reading the source code and design as muster</text>
  </message>
  <message conversation_id="974">
    <ts>2019-04-01T06:47:47.350800</ts>
    <user>Vada</user>
    <text>do you have any example in the `clojure` ecosystem and lib in the opensource word?  like it could be dunno, any library with rest-client</text>
  </message>
  <message conversation_id="974">
    <ts>2019-04-01T07:04:14.351400</ts>
    <user>Xiao</user>
    <text>Anyone using nginx-clojure and got it running with openjdk 10+? Project doesn't really seem maintained anymore.</text>
  </message>
  <message conversation_id="974">
    <ts>2019-04-01T07:04:37.352000</ts>
    <user>Xiao</user>
    <text>Or perhaps someone can advise a better deployment method these days, with high performance?</text>
  </message>
  <message conversation_id="975">
    <ts>2019-04-01T07:41:37.352300</ts>
    <user>Min</user>
    <text>define high performance? what's the use case</text>
  </message>
  <message conversation_id="975">
    <ts>2019-04-01T07:43:43.354000</ts>
    <user>Xiao</user>
    <text>Real time bidding, just want to squeeze out as much performance as possible, and nginx-clojure had decent benchmarks.</text>
  </message>
  <message conversation_id="975">
    <ts>2019-04-01T07:43:45.354100</ts>
    <user>Min</user>
    <text>most of the time aleph or jetty is good enough. Not sure nginx-clojure performs better at all</text>
  </message>
  <message conversation_id="975">
    <ts>2019-04-01T07:47:41.355500</ts>
    <user>Xiao</user>
    <text>You're probably right, the difference isn't extreme &lt;https://github.com/ptaoussanis/clojure-web-server-benchmarks/tree/master/results/60k-non-keepalive#60k-non-keepalive&gt;</text>
  </message>
  <message conversation_id="975">
    <ts>2019-04-01T07:48:47.356600</ts>
    <user>Tawnya</user>
    <text>Hey guys, I just downloaded clojure via the installer for windows (it downloaded as powershell module). I need help getting it started.</text>
  </message>
  <message conversation_id="975">
    <ts>2019-04-01T07:50:11.357800</ts>
    <user>Min</user>
    <text>aleph also scores better than openresty (same models as nginx-clojure I think) on other benchmarks, anyway I bet the kind of platform you're building will likely not have a bottleneck at this level</text>
  </message>
  <message conversation_id="975">
    <ts>2019-04-01T08:07:56.358400</ts>
    <user>Jasmine</user>
    <text>Please ask in &lt;#CFN4QDHPS|clj-on-windows&gt; for help...</text>
  </message>
  <message conversation_id="975">
    <ts>2019-04-01T10:18:39.359200</ts>
    <user>Vita</user>
    <text>I use nginx-clojure but i think it doesn’t handle java versions above 8 right now. I don’t think there’s much active development happening but it’s been stable for us.</text>
  </message>
  <message conversation_id="976">
    <ts>2019-04-01T10:33:08.359500</ts>
    <user>Lesha</user>
    <text>Anybody have experiences to share using Akka with Clojure? I found a couple of small wrapper projects which look inactive. My main concern would be around the requirement that actor classes be serializable, so I'd think you would have to be cautious about typical Clojurisms like grabbing state in a closure.</text>
  </message>
  <message conversation_id="977">
    <ts>2019-04-01T12:07:00.363300</ts>
    <user>Lana</user>
    <text>I was trying to point some of my users at the Clojure documentation to show all the options for `spit`, and hit a brick wall. The `spit` doc string does not list them, &lt;https://clojuredocs.org/clojure.core/spit&gt; and even if they are resourceful enough to look up the entry for `writer` that does not list them. I basically would need to teach them how to bring up a REPL and spelunk through the source code in order to get a definitive list. And they are mostly not software developers. This seems… unfortunate?</text>
  </message>
  <message conversation_id="977">
    <ts>2019-04-01T12:17:14.363600</ts>
    <user>Jasmine</user>
    <text>jira welcome, I don't think there is one I'm aware of</text>
  </message>
  <message conversation_id="977">
    <ts>2019-04-01T14:18:24.000500</ts>
    <user>Jonas</user>
    <text>I'm looking for a way to manage state reactively, where the crucial thing is that invalidations are eager and computing the new value is lazy (ie. on deref)</text>
  </message>
  <message conversation_id="976">
    <ts>2019-04-01T14:18:34.000700</ts>
    <user>Jonas</user>
    <text>I was thinking an agent with for each chunk of state I care about, that eagerly invalidate their listeners. but how can I override the deref behavior?</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:29:37.001700</ts>
    <user>Dann</user>
    <text>does this match the semantics of a cache at all? with core.cache you can easily get custom access / lookup behaviors</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:29:57.002100</ts>
    <user>Dann</user>
    <text>(while storing the cache itself in an atom, agent, whatever's apropriate)</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:31:04.003000</ts>
    <user>Jonas</user>
    <text>hm, I wasn't thinking of it in terms of a cache at all. it's not a typical cache, but perhaps I could (ab)use hundreds of 1-element caches for this.</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:31:36.003700</ts>
    <user>Jonas</user>
    <text>the use case is a large reactive system, containing many hundreds of entities and links between them, but where only a handful of entities are "live" at any given time.</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:32:16.004600</ts>
    <user>Jonas</user>
    <text>if the invalidations are eager, the views for the few things that are live will know they need to rerender. meanwhile, the rest of the world might be invalid but that's harmless.</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:33:39.005000</ts>
    <user>Dann</user>
    <text>hmm, sounds a lot like what react does under the hood actually</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:34:16.005700</ts>
    <user>Jonas</user>
    <text>not dissimilar in principle.</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:34:21.006000</ts>
    <user>Dann</user>
    <text>what's the difference between "hundereds of 1-element caches" and "a cache with an index"</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:35:02.007000</ts>
    <user>Jonas</user>
    <text>depends on whether invalidation happens at the entry level or the cache level, I guess. I'm reading the core.cache docs now.</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:37:07.008700</ts>
    <user>Dann</user>
    <text>I guess you'd need it loop it through - the cache forcing function would need to look up its data sources in the cache and invalidate it's descendents? now that I think about it you probably want a proper reactive system and not hacking it direclty out of cache / agent building blocks(?)</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:40:20.009800</ts>
    <user>Jonas</user>
    <text>well, I mentioned agents because that's what it felt like when I was vaguely thinking about it last night. but I think there's a bunch of extra bookkeeping to do that pushes me to use a default implementation. I'll probably end up building each reactive block out of a handful of refs I transact over, I guess.</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:40:50.010300</ts>
    <user>Dann</user>
    <text>there's a whole book about this btw &lt;https://www.amazon.com/Clojure-Reactive-Programming-Asynchronous-Applications/dp/1783986662&gt;</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:41:24.011000</ts>
    <user>Dann</user>
    <text>it uses rxjava iirc</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:41:39.011300</ts>
    <user>Rosaline</user>
    <text>react, if I understand, doesn't actually use caches(so avoids figuring out cache invalidation), but diffs the virtual dom to determine what needs doing</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:42:48.012100</ts>
    <user>Dann</user>
    <text>yeah, by extension you could use it to turn data dependency in a data flow app into smart invalidations, but that's still a stretch I think</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:44:17.013400</ts>
    <user>Jonas</user>
    <text>for my purposes, the wiring of dependencies is explicit, so I don't need to infer it. I just want to avoid having to unwire and rewire things as the user navigates.</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:44:56.014000</ts>
    <user>Jonas</user>
    <text>anyway, I'm just building a prototype, so I'll just hack something together and not sweat it too hard for this first POC.</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:45:24.014100</ts>
    <user>Lana</user>
    <text>OK, I created one. I forgot that I even had an account on the JIRA. Thanks! Hopefully it was formatted correctly and sufficiently informative.</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T14:46:32.014300</ts>
    <user>Dann</user>
    <text>it uses rxjava, futures, and core.async in various examples</text>
  </message>
  <message conversation_id="979">
    <ts>2019-04-01T15:05:20.014500</ts>
    <user>Jasmine</user>
    <text>thx, I added a patch</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:13:23.014900</ts>
    <user>Loria</user>
    <text>Is there any way to dynamically un-extend a protocol?</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:13:29.015000</ts>
    <user>Lana</user>
    <text>Wow, that was fast! :smile:</text>
  </message>
  <message conversation_id="978">
    <ts>2019-04-01T15:14:23.015900</ts>
    <user>Dann</user>
    <text>assign method implementations that all throw unimplementederror?</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:16:34.016900</ts>
    <user>Loria</user>
    <text>use-case: I have a default `java.lang.Object` implementation of a `Foo` protocol</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:16:55.017300</ts>
    <user>Loria</user>
    <text>then I extend it to `clojure.lang.Seqable` in the REPL</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:18:17.018400</ts>
    <user>Loria</user>
    <text>afterwards I realise I don't want that implementation to include hash maps, so I change that to a `clojure.lang.Sequential`</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:19:13.019300</ts>
    <user>Loria</user>
    <text>how do I disassociate `Seqable` so that calling a Foo method on a hash map falls back to the default `Object` implementation?</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:20:11.020100</ts>
    <user>Loria</user>
    <text>(without restarting the entire REPL)</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:26:38.022000</ts>
    <user>Dann</user>
    <text>&lt;@Loria&gt; the extension of the method is stored with the protocol implementation (iirc in the var itself or its metadata) and can in theory be removed, I don't know if there's anything that would be portable though</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:29:26.022800</ts>
    <user>Dann</user>
    <text>&lt;@Loria&gt; this should be enough info for a short term hack, but no promises it would work with the next clojure release ```(ins)user=&amp;gt; IFoo
{:on user.IFoo, :on-interface user.IFoo, :sigs {:frob {:name frob, :arglists ([this]), :doc nil}}, :var #'user/IFoo, :method-map {:frob :frob}, :method-builders {#'user/frob #object[user$eval145$fn__146 0x42f33b5d "user$eval145$fn__146@42f33b5d"]}}
(ins)user=&amp;gt; (extend Object IFoo {:frob (fn [x] [:obj x])})
nil
(ins)user=&amp;gt; IFoo
{:on user.IFoo, :on-interface user.IFoo, :sigs {:frob {:name frob, :arglists ([this]), :doc nil}}, :var #'user/IFoo, :method-map {:frob :frob}, :method-builders {#'user/frob #object[user$eval145$fn__146 0x42f33b5d "user$eval145$fn__146@42f33b5d"]}, :impls {java.lang.Object {:frob #object[user$eval162$fn__163 0x3e14c16d "user$eval162$fn__163@3e14c16d"]}}}```</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:31:06.024000</ts>
    <user>Dann</user>
    <text>usually protocol / interface / multimethod changes are the one reason I do an unconditional repl restart, and I try to work on my design in such a way that those would change extremely rarely (which makes sense, as they are all meant to be top level entry points for other code)</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:43:22.024500</ts>
    <user>Loria</user>
    <text>tried doing `(def Foo (update Foo :impls #(dissoc % clojure.lang.Seqable)))`, but that didn't work</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:47:35.026500</ts>
    <user>Loria</user>
    <text>guess I'll just have to restart the repl.. had lots of "testing data" state built up from evaluating commented forms which I didn't want to lose, but that's probably another sign of general sloppiness</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T15:54:53.027400</ts>
    <user>Dann</user>
    <text>I'd suspect `alter-var-root` rather than def/update to be the right path, if anything worked</text>
  </message>
  <message conversation_id="980">
    <ts>2019-04-01T16:06:52.028000</ts>
    <user>Loria</user>
    <text>hmm, that doesn't do the trick either</text>
  </message>
  <message conversation_id="981">
    <ts>2019-04-01T16:22:09.028800</ts>
    <user>Jasmine</user>
    <text>protocol choices get baked into per-call-site caches so it's probably difficult to do this fully without restarting your repl</text>
  </message>
  <message conversation_id="981">
    <ts>2019-04-01T16:24:17.028900</ts>
    <user>Jasmine</user>
    <text>easier to do it now before I forget about it :)</text>
  </message>
  <message conversation_id="982">
    <ts>2019-04-01T18:28:09.030100</ts>
    <user>Carita</user>
    <text>Hello, I’m having some issues working with mutable Java arrays and can’t find what is going on.

This code is supposed to return `5` but returns `0`

```
(let [m (to-array [0 0 0])
      _ (for [i (range 3)]
          (aset m i 5))
      x (aget m 2)]
  x)
;; =&amp;gt; 0
```

Now, when I eval it one form at a time it correctly returns `5`

```
(def m (to-array [0 0 0]))
;; =&amp;gt; #'user/m
(for [i (range 3)]
  (aset m i 5))
;; =&amp;gt; (5 5 5)
(aget m 2)
;; =&amp;gt; 5
```

Maybe I’m missing something obvious :thinking_face:</text>
  </message>
  <message conversation_id="982">
    <ts>2019-04-01T18:30:57.031400</ts>
    <user>Becki</user>
    <text>classic laziness. `for` returns a lazy collection and is not a good choice for performing side effects like mutating an array. What you are seeing is that nothing is realizing the collection so no work is ever done. the result is that the original array contains 0s rather than 5s</text>
  </message>
  <message conversation_id="982">
    <ts>2019-04-01T18:31:32.032000</ts>
    <user>Carita</user>
    <text>right, of course, thanks!</text>
  </message>
  <message conversation_id="982">
    <ts>2019-04-01T18:31:50.032400</ts>
    <user>Becki</user>
    <text>do you know the best way to fix it or want to ponder/work at it some more?</text>
  </message>
  <message conversation_id="982">
    <ts>2019-04-01T18:31:56.032600</ts>
    <user>Becki</user>
    <text>(or already know the answer :)</text>
  </message>
  <message conversation_id="982">
    <ts>2019-04-01T18:32:54.032900</ts>
    <user>Carita</user>
    <text>I was going to try a `doseq`, is that enough? :thinking_face:</text>
  </message>
  <message conversation_id="982">
    <ts>2019-04-01T18:34:35.033300</ts>
    <user>Becki</user>
    <text>that's what i would do</text>
  </message>
  <message conversation_id="982">
    <ts>2019-04-01T18:34:42.033500</ts>
    <user>Carita</user>
    <text>cool!, thanks :+1:</text>
  </message>
  <message conversation_id="983">
    <ts>2019-04-01T18:49:50.035600</ts>
    <user>Shawanda</user>
    <text>&amp;gt; if the invalidations are eager, the views for the few things that are live will know they need to rerender. meanwhile, the rest of the world might be invalid but that's harmless.
&lt;@Jonas&gt; isn't this how some CLJS view libs work? E.g see Reagent (`reaction` and `ratom`), Rum (reactive components and derived atoms), hoplon+javelin, etc.</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:25:05.036400</ts>
    <user>Debora</user>
    <text>hey guys, whats the cleanest way to append something to the end of a vector within a thread last macro</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:26:35.037800</ts>
    <user>Debora</user>
    <text>`(-&amp;gt;&amp;gt; v (conj e))` and `(-&amp;gt;&amp;gt; v (concat [e]))` don't work for obvious reasons</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:26:57.038400</ts>
    <user>Debora</user>
    <text>am i stuck having to create a let binding for this?</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:30:56.039000</ts>
    <user>Suanne</user>
    <text>Are there any compelling reasons to prefer the `loop` and `recur` pattern over recursive function calls?</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:43:08.039800</ts>
    <user>Shawanda</user>
    <text>&lt;@Debora&gt;could be the case for `as-&amp;gt;` instead of `-&amp;gt;&amp;gt;`</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:52:56.040500</ts>
    <user>Otelia</user>
    <text>&lt;@Debora&gt; I don't understand why you say your first example doesn't work, this works for me:
```
(let [c [1 2], v 3] (-&amp;gt;&amp;gt; v (conj c)))
=&amp;gt; [1 2 3]
```</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:55:11.041200</ts>
    <user>Otelia</user>
    <text>Oh, v is the vector not the value. Never mind.</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:55:43.041900</ts>
    <user>Dann</user>
    <text>&lt;@Debora&gt; -&amp;gt;&amp;gt; and as-&amp;gt; are written so they can be nested inside -&amp;gt;</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:56:17.042700</ts>
    <user>Dann</user>
    <text>you can use -&amp;gt; at the top level, and use -&amp;gt;&amp;gt; / as-&amp;gt; for parts of the pipeline inside that need to use the tread-last behavior</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T19:57:01.042900</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (-&amp;gt; [] (conj [:a 0]) (-&amp;gt;&amp;gt; (into {})))
{:a 0}```</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:02:34.043800</ts>
    <user>Otelia</user>
    <text>&lt;@Dann&gt;, that is really good to know! But undocumented, right?</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:03:05.044400</ts>
    <user>Dann</user>
    <text>hmm... I thought I saw it documented somewhere, let me see if I can dig it up</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:05:04.045100</ts>
    <user>Dann</user>
    <text>there are examples here and there, but I don't find anything mentioning that all the -&amp;gt; related macros are designed to work inside -&amp;gt; &lt;http://clojuredocs.org/clojure.core/as-%3E#example-568eeddae4b0f37b65a3c280&gt;</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:05:52.045500</ts>
    <user>Dann</user>
    <text>oh wow this one - I never thought of using `as-&amp;gt;` with destructuring &lt;http://clojuredocs.org/clojure.core/as-%3E#example-5b5e08e9e4b00ac801ed9e3a&gt;</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:13:16.046000</ts>
    <user>Otelia</user>
    <text>I guess it's implied that nesting would work, since it isn't prohibited.</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:19:45.051300</ts>
    <user>Otelia</user>
    <text>That is an interesting one with as-&amp;gt; and :as.</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:21:36.053000</ts>
    <user>Bernardine</user>
    <text>i'd like to use clojure to generate some `defrecord` classes (and some helper methods) that i intend to consume from Java... eg:
```
(ns my.core
  (:gen-class :name my.core.Support :methods [^:static [getEvents [] ...]]))

(defrecord Event [^String name ^Date date_])
(def -getEvents [] ...seq of Events...)
```
from Java i should be able to stuff like this:
```
import my.core.Event;
import my.core.Support;
...
public static void main(String[] args) {
   events = new ArrayList&amp;lt;Event&amp;gt;(Support.getEvents()); 
   // ^^ i get ClassCastException here b/c the imported Event is loaded by AppClassLoader
   //     but the Events produced by the clojure-compiled gen-class are loaded by clojure's DynamicClassLoader
   //  ... what's the best way to do this kind of thing
}
```</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:25:51.053400</ts>
    <user>Dann</user>
    <text>don't you have to load Support before Event at the very least?</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:30:31.054500</ts>
    <user>Dann</user>
    <text>I've found calling Clojure via Java to be much easier with the clojure.lang.RT static methods (var, require, etc.) rather than trying to use gen-class namespaces as classes</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:36:19.056200</ts>
    <user>Bernardine</user>
    <text>hmm i do need to statically link/compile in my case.. .. wondering if there's a way to tell Clojure to load certain classes like these instead of dynamically complie them</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:37:10.056600</ts>
    <user>Dann</user>
    <text>you can't call the clojure API from the java code?</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:37:53.057400</ts>
    <user>Dann</user>
    <text>if you properly aot-compiled you will be able to import the classes, and the classes will in turn initialize clojure if it isn't initialized yet</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:54:42.059500</ts>
    <user>Debora</user>
    <text>oh sweet &lt;@Dann&gt; didn't know you could nest `-&amp;gt;&amp;gt;` and `as-&amp;gt;` inside a `-&amp;gt;`... feel like i'm gonna overuse this thoroughly now</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:55:01.059900</ts>
    <user>Dann</user>
    <text>(a gotcha is that with eg. lein, it assumes that your java needs to be compiled before your clojure, and here I think you really want the opposite)</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T20:57:53.060400</ts>
    <user>Dann</user>
    <text>that's fixed with ~`:prep-tasks ["javac" "compile"]`~ `:prep-tasks ["compile" "javac"]` (fixed)</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T21:10:54.063200</ts>
    <user>Dann</user>
    <text>&lt;@Bernardine&gt; what type are you defining for getEvents to return in gen-class btw?</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T21:11:05.063500</ts>
    <user>Dann</user>
    <text>(I assume java.util.Collection by context)</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T21:15:02.063800</ts>
    <user>Dann</user>
    <text>&lt;@Bernardine&gt; this compiles:</text>
  </message>
  <message conversation_id="985">
    <ts>2019-04-01T22:08:41.064900</ts>
    <user>Bernardine</user>
    <text>interesting thx for that noisesmith, let me try something
incidentally i'm using clojure-maven-plugin not lein so let me what i can find out here</text>
  </message>
  <message conversation_id="984">
    <ts>2019-04-01T22:31:27.068400</ts>
    <user>Bernardine</user>
    <text>&lt;@Dann&gt; very cool. thank you for doing that repro. it led me to a fix... while `lein` excludes the `.clj` sources from the built target/jar files, `clojure-maven-plugin` (what i'm using) does not do this by default
so the presence of my `clj` source was causing clojure to prefer loading the defrecord by dynamic compilation rather than using the `.class` file that the static/linker was using - so the `Event` loaded by the java compiled code was not the same as the `Event` getting dynamically produced by clojure/DynamicClassLoader
anyway i'm able to configure out the clj sources so that all is getting loaded by the AppClassLoader and now i'm working---thx again !</text>
  </message>
  <message conversation_id="986">
    <ts>2019-04-01T23:35:46.068900</ts>
    <user>Jasmine</user>
    <text>note that this is not a public api and you should not rely on it. Instead, you should use the Clojure Java API - &lt;http://clojure.github.io/clojure/javadoc/&gt;</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T04:23:51.069900</ts>
    <user>Xiao</user>
    <text>Anyone had issues with `lein deps` constantly failing with something like `Could not transfer artifact amazonica:amazonica:pom:0.3.123 from/to clojars (&lt;https://repo.clojars.org/&gt;): Connection reset` during `docker build` and remember a solution?</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T04:24:58.070600</ts>
    <user>Xiao</user>
    <text>This particular dependency doesn't seem like the issue, it's different every time. Works fine outside of docker.</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T05:46:27.071100</ts>
    <user>Isa</user>
    <text>sounds like issue about docker environment</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T05:46:55.071300</ts>
    <user>Isa</user>
    <text>or your Internet connection</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T05:49:16.072900</ts>
    <user>Isa</user>
    <text>How to figure out how to mute logging for Java dependency? I use `flyway` and it make so huge mess in REPL by printing even debug info. In the past this was working `(.setLevel (Logger/getLogger "org.flywaydb") Level/WARNING)`, but not today (new ver. of flyway? I guess they changed logger or something). How to deal with such situations?</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T06:33:34.073700</ts>
    <user>Isa</user>
    <text>on the end jdbc use logback, flyway use who knows what, how to deal with this mess?</text>
  </message>
  <message conversation_id="988">
    <ts>2019-04-02T08:19:24.074700</ts>
    <user>Isa</user>
    <text>I mean what is the one right way to set level for logging? I have to do it separately for slf4j, log4j, logback etc. or is the way to do it in one consistent way? Should I use slf4j or logback?</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T08:19:48.074900</ts>
    <user>Isa</user>
    <text>or maybe &lt;https://github.com/fzakaria/slf4j-timbre&gt; ?</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T08:21:22.075300</ts>
    <user>Isa</user>
    <text>In most of examples I see people set this levels by logback, not in slf4j even if they use it</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T08:23:00.075500</ts>
    <user>Isa</user>
    <text>another question: If one of my dependency use log4j, but another use logback I guess logback will capture log4j input as facade.</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T08:23:12.075700</ts>
    <user>Isa</user>
    <text>How to control it?</text>
  </message>
  <message conversation_id="987">
    <ts>2019-04-02T08:41:42.076200</ts>
    <user>Isa</user>
    <text>Personally I use timbre as logger, but Java libraries make a mess sometimes</text>
  </message>
  <message conversation_id="989">
    <ts>2019-04-02T09:30:33.076500</ts>
    <user>Xiao</user>
    <text>I ended up using a multi-stage build and compiling the uberjar outside of the runtime environment. Was able to get it to work then, and with a smaller final image, so yay</text>
  </message>
  <message conversation_id="990">
    <ts>2019-04-02T10:19:04.077600</ts>
    <user>Benedict</user>
    <text>Ages ago I think I saw some people talking about the &lt;http://4clojure.com|4clojure.com&gt; site. I'd like to contribute and get it working well, e.g. this &lt;https://github.com/4clojure/4clojure/issues/309&gt; would be good to fix.</text>
  </message>
  <message conversation_id="990">
    <ts>2019-04-02T10:19:09.078000</ts>
    <user>Benedict</user>
    <text>Anyone have any pointers?</text>
  </message>
  <message conversation_id="991">
    <ts>2019-04-02T14:23:01.079300</ts>
    <user>Lyda</user>
    <text>On &lt;http://repl.it|repl.it&gt; one can write clojure programs, if that's what you ask.</text>
  </message>
  <message conversation_id="992">
    <ts>2019-04-02T14:51:26.080500</ts>
    <user>Mireille</user>
    <text>has anyone used ions in production and can vouch for it? considering using it for a small production project</text>
  </message>
  <message conversation_id="992">
    <ts>2019-04-02T14:55:01.080600</ts>
    <user>Benedict</user>
    <text>Not quite. 4clojure is a learning platform, which works well but has some shortcomings and it seems to have been abandoned. I wondering if anyone knows the authors or has tried to get it active.</text>
  </message>
  <message conversation_id="992">
    <ts>2019-04-02T14:55:45.080800</ts>
    <user>Lyda</user>
    <text>aaah, I thought that you want a replacement for &lt;http://try-clojure.org|try-clojure.org&gt;</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T15:55:51.081400</ts>
    <user>Tamika</user>
    <text>Does clojure have some command-line tools which are required by some clojure projects to run?</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T15:56:16.081600</ts>
    <user>Tammera</user>
    <text>some projects depend on leiningen</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T15:58:05.083400</ts>
    <user>Tamika</user>
    <text>More specifically, I am trying to run 'lein repl' in one such project's root, and I get 'clojure.lang.ExceptionInfo: Could not find clojure executable {:tried-paths ["/usr/local/bin/clojure"]}'  which seems to indicate I should have /usr/local/bin/clojure</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T16:00:44.084000</ts>
    <user>Tammera</user>
    <text>`/usr/local/bin/clojure` is installed by homebrew on my macos system. What are you using?</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T16:00:54.084200</ts>
    <user>Tammera</user>
    <text>its part of clojure itself</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T16:01:25.084600</ts>
    <user>Tamika</user>
    <text>I was trying Fulcro (following this documentation here: &lt;http://book.fulcrologic.com/#_about_this_book&gt;)</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T16:03:03.086100</ts>
    <user>Tamika</user>
    <text>So it seems it's not related to leiningen actually but how that Fulcro template is set up</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T16:09:37.086900</ts>
    <user>Tammera</user>
    <text>I am sorry, but I don’t know.</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T16:10:41.087200</ts>
    <user>Tammera</user>
    <text>maybe ask in &lt;#C68M60S4F|fulcro&gt; ^^!</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T16:13:00.087500</ts>
    <user>Tamika</user>
    <text>Yeah! good idea, thanks Lennart :slightly_smiling_face:</text>
  </message>
  <message conversation_id="994">
    <ts>2019-04-02T17:07:47.087900</ts>
    <user>Dann</user>
    <text>yes, the core clojure project has cli-tools that are installable via your package manager (eg. homebrew on a mac)</text>
  </message>
  <message conversation_id="995">
    <ts>2019-04-02T21:42:19.089300</ts>
    <user>Ruthann</user>
    <text>Hi. How can i use com.cognitect.aws/email to use email on AWS?</text>
  </message>
  <message conversation_id="993">
    <ts>2019-04-02T21:48:05.090000</ts>
    <user>Jasmine</user>
    <text>&lt;#C09N0H1RB|aws&gt; is a good place to ask this</text>
  </message>
  <message conversation_id="995">
    <ts>2019-04-02T21:51:10.090300</ts>
    <user>Ruthann</user>
    <text>Thanks &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="996">
    <ts>2019-04-03T08:10:40.097800</ts>
    <user>Fran</user>
    <text>Hi. I'm trying to use `compile` with a gen-class. I get a class not found exception when the constructor is defined taking a class from a lib I'm using. I can import that same class, and changing the type to eg String makes compile work. Any caveat about types for constructor args and class path etc?</text>
  </message>
  <message conversation_id="996">
    <ts>2019-04-03T08:22:58.097900</ts>
    <user>Adria</user>
    <text>Looks like flyway uses slf4j bindings, so if you use logback, you should be able to set the flyway log level in your logback.xml (or whatever method you use). I haven’t tried it myself though</text>
  </message>
  <message conversation_id="996">
    <ts>2019-04-03T08:30:45.099000</ts>
    <user>Fran</user>
    <text>Hm. This was with tools.deps - if I instead try with lein all is well.</text>
  </message>
  <message conversation_id="997">
    <ts>2019-04-03T08:37:39.099100</ts>
    <user>Cindie</user>
    <text>there's also the channel &lt;#C6QH853H8|tools-deps&gt; where you might have more luck than here :smile:</text>
  </message>
  <message conversation_id="996">
    <ts>2019-04-03T08:47:31.099300</ts>
    <user>Fran</user>
    <text>Yep, realized this after testing it with lein.</text>
  </message>
  <message conversation_id="998">
    <ts>2019-04-03T09:01:25.100900</ts>
    <user>Star</user>
    <text>what would be closest and cleanest way to have "cron jobs" in Clojure. Something to run every some time from within web app. Like @Scheduled in Java Spring...</text>
  </message>
  <message conversation_id="998">
    <ts>2019-04-03T09:04:53.102600</ts>
    <user>Lane</user>
    <text>&lt;@Star&gt; Java's ScheduledExecutorService works well but you can also write something custom with a core async go loop and timeout</text>
  </message>
  <message conversation_id="999">
    <ts>2019-04-03T09:22:01.102900</ts>
    <user>Shanell</user>
    <text>quartz via clojurewerkz/quartzite is quite popular</text>
  </message>
  <message conversation_id="997">
    <ts>2019-04-03T10:06:48.107200</ts>
    <user>Aubrey</user>
    <text>There’s also juxt/tick</text>
  </message>
  <message conversation_id="1000">
    <ts>2019-04-03T10:24:29.107900</ts>
    <user>Tammera</user>
    <text>and `chime` and `at-at`</text>
  </message>
  <message conversation_id="997">
    <ts>2019-04-03T10:34:22.108500</ts>
    <user>Aubrey</user>
    <text>Someone should write a comparison for those!</text>
  </message>
  <message conversation_id="997">
    <ts>2019-04-03T10:45:23.108800</ts>
    <user>Meagan</user>
    <text>I've used tick before and found it worked well :+1:</text>
  </message>
  <message conversation_id="999">
    <ts>2019-04-03T10:46:50.110200</ts>
    <user>Tammera</user>
    <text>yeah, the scheduling part of tick is deprecated tho :disappointed:</text>
  </message>
  <message conversation_id="1001">
    <ts>2019-04-03T11:17:08.113000</ts>
    <user>Brent</user>
    <text>Is there a better way to split a list of pairs into lists of the firsts and seconds than `[(map first pairs) (map second pairs)] `? Thank you!</text>
  </message>
  <message conversation_id="997">
    <ts>2019-04-03T11:29:48.113100</ts>
    <user>Isa</user>
    <text>Finally I did `(.setLevel (org.slf4j.LoggerFactory/getLogger "org.flywaydb") Level/WARN)` but still I don’t feel it :slightly_smiling_face:</text>
  </message>
  <message conversation_id="999">
    <ts>2019-04-03T11:30:17.113300</ts>
    <user>Isa</user>
    <text>Also I have logback because jdbc use it</text>
  </message>
  <message conversation_id="999">
    <ts>2019-04-03T11:30:55.113500</ts>
    <user>Isa</user>
    <text>So probably dependency from jdbc (logback) bind slf4j to logback… who knows how this hell works :slightly_smiling_face:</text>
  </message>
  <message conversation_id="999">
    <ts>2019-04-03T11:31:16.113700</ts>
    <user>Isa</user>
    <text>I use timbre in my code</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T11:46:21.115100</ts>
    <user>Emmie</user>
    <text>I've used quartzite before, while it works great, it's a bit heavy with some learning curve as you kind of need to know how Quartz works.</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:03:22.115800</ts>
    <user>Aubrey</user>
    <text>Oh. Good to know. They advocate using tick over quartz in the readme...</text>
  </message>
  <message conversation_id="1003">
    <ts>2019-04-03T12:18:38.116400</ts>
    <user>Lemuel</user>
    <text>Is there a stateful transducer like "reductions"?</text>
  </message>
  <message conversation_id="1003">
    <ts>2019-04-03T12:22:44.117400</ts>
    <user>Meagan</user>
    <text>i'm trying to bundle a Clojure desktop app to be executed stand-alone on macOS &amp;amp; Windows. anyone know of some resources on how best to do that with JDK 11?</text>
  </message>
  <message conversation_id="1003">
    <ts>2019-04-03T12:23:08.117700</ts>
    <user>Meagan</user>
    <text>I want to supply my own JRE with the app</text>
  </message>
  <message conversation_id="1003">
    <ts>2019-04-03T12:23:23.118100</ts>
    <user>Meagan</user>
    <text>I tried packr but I can't figure out how to use it with JDK 11 yet</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:35:15.118600</ts>
    <user>Isa</user>
    <text>`(map (juxt first second) [[1 2 3] [4 5 6] [7 8 9]])`</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:36:23.118800</ts>
    <user>Isa</user>
    <text>or `(map (partial take 2) [[1 2 3] [4 5 6] [7 8 9]])`</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:36:49.119000</ts>
    <user>Isa</user>
    <text>ah no, sorry you want it to have in different way</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:36:51.119200</ts>
    <user>Brent</user>
    <text>thx but I want the opposite: `([1 2] [4 5] [7 8])` -&amp;gt; `([1 4 7] [2 5 8])`</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:38:52.119400</ts>
    <user>Sixta</user>
    <text>Plan is to undeprecate later</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:46:31.119600</ts>
    <user>Dorla</user>
    <text>There's one in cgrand's `xforms` library along with many other transducers:
&lt;https://github.com/cgrand/xforms/blob/master/src/net/cgrand/xforms.cljc#L491&gt;

Repo: &lt;https://github.com/cgrand/xforms&gt;</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:48:01.120700</ts>
    <user>Shawanda</user>
    <text>I used `javapackager` for this (a long time ago though so not sure about JDK 11)</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:48:40.121400</ts>
    <user>Angelita</user>
    <text>Is "Clojure Programming: Practical Lisp for the Java World" still a relevant book to learn clojure?</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:49:04.121700</ts>
    <user>Meagan</user>
    <text>it looks like javapackager was removed from JDK 11 :confused:</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:49:10.121900</ts>
    <user>Meagan</user>
    <text>ugh</text>
  </message>
  <message conversation_id="1004">
    <ts>2019-04-03T12:55:05.122900</ts>
    <user>Meagan</user>
    <text>hm. looks like I might be able to use a backported version</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T12:55:12.123100</ts>
    <user>Meagan</user>
    <text>that's being worked on for JDK 13</text>
  </message>
  <message conversation_id="1004">
    <ts>2019-04-03T13:00:16.123900</ts>
    <user>Antione</user>
    <text>i seem to recall a new-ish clojure lib for building UIs (not seesaw)</text>
  </message>
  <message conversation_id="1004">
    <ts>2019-04-03T13:00:19.124100</ts>
    <user>Antione</user>
    <text>anyone know the name of it?</text>
  </message>
  <message conversation_id="1004">
    <ts>2019-04-03T13:00:47.124300</ts>
    <user>Angelita</user>
    <text>fn-fx?</text>
  </message>
  <message conversation_id="1004">
    <ts>2019-04-03T13:01:24.124500</ts>
    <user>Meagan</user>
    <text>cljfx</text>
  </message>
  <message conversation_id="1004">
    <ts>2019-04-03T13:01:40.124800</ts>
    <user>Antione</user>
    <text>that's the one, thanks</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T13:02:27.125200</ts>
    <user>Meagan</user>
    <text>yeah. just got done creating a simple app; seems good, still don't understand a lot</text>
  </message>
  <message conversation_id="1002">
    <ts>2019-04-03T13:02:46.125600</ts>
    <user>Meagan</user>
    <text>now I'm trying to figure it out how to distribute it to my coworkers who might not have JDK 11 :grimacing:</text>
  </message>
  <message conversation_id="1005">
    <ts>2019-04-03T13:45:05.125700</ts>
    <user>Roslyn</user>
    <text>&lt;@Antione&gt; join &lt;#CGHHJNENB|cljfx&gt; :smiley_cat:</text>
  </message>
  <message conversation_id="1006">
    <ts>2019-04-03T15:15:50.126500</ts>
    <user>Isidro</user>
    <text>High level noob question: would using datomic ions for a normal page serving ring app (i.e. not an api or event triggered code etc) be a bad fit for some reason?</text>
  </message>
  <message conversation_id="1005">
    <ts>2019-04-03T16:40:06.127600</ts>
    <user>Vinnie</user>
    <text>has anyone encountered any sort of linting / analysis tools that could detect whether a change on a clj codebase maintains some notion of backward compatibility?</text>
  </message>
  <message conversation_id="1005">
    <ts>2019-04-03T16:43:56.129400</ts>
    <user>Sixta</user>
    <text>I think that's Rich Hickey's research project, when I asked a while ago, I was told it's not close to fruition yet.</text>
  </message>
  <message conversation_id="1005">
    <ts>2019-04-03T16:44:44.130100</ts>
    <user>Vinnie</user>
    <text>will be very interested to see what he comes up with :slightly_smiling_face:
coincidentally, this question came up after thinking about the spec-ulation talk</text>
  </message>
  <message conversation_id="1005">
    <ts>2019-04-03T16:44:55.130400</ts>
    <user>Vinnie</user>
    <text>and thinking about how i want to do versioning in my clj projects</text>
  </message>
  <message conversation_id="1005">
    <ts>2019-04-03T16:48:39.131600</ts>
    <user>Isreal</user>
    <text>My little hobby app was macOS only. FWIW I used &lt;https://github.com/Jorl17/jar2app&gt; along with JavaAppLauncher built from &lt;https://bitbucket.org/infinitekind/appbundler/&gt;</text>
  </message>
  <message conversation_id="1007">
    <ts>2019-04-03T17:24:25.132100</ts>
    <user>Lemuel</user>
    <text>ah!  thanks!</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:35:04.132800</ts>
    <user>Antione</user>
    <text>anyone know who runs the logging? seems broken</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:39:31.133700</ts>
    <user>Becki</user>
    <text>&lt;https://twitter.com/plexus/status/1110594418573230085&gt;</text>
  </message>
  <message conversation_id="1005">
    <ts>2019-04-03T19:39:48.134200</ts>
    <user>Becki</user>
    <text>from a while ago. possible you could reach out to &lt;@Charlyn&gt;</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:44:56.135200</ts>
    <user>Celestine</user>
    <text>&lt;@Antione&gt; Most channels here are mirrored into Zulip via &lt;@Silvana&gt; (which you can invite to any channel it isn't already a member of). &lt;https://clojurians.zulipchat.com/#narrow/stream/180378-slack-archive&gt;</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:48:52.135800</ts>
    <user>Antione</user>
    <text>thanks &lt;@Becki&gt; and &lt;@Celestine&gt;</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:51:31.138400</ts>
    <user>Antione</user>
    <text>other question for ya: I remember alex miller saying something about some interesting business required to get constant-time dispatch in `case`. I've been reading over it, but wondered if anyone here knew the details well enough to give their take on what's going on here.

the deeper i dig, the more questions i have</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:53:22.139600</ts>
    <user>Antione</user>
    <text>`max-switch-table-size`, `case-map`, `prep-ints`, `prep-hashes`, `max-mask-bits`, `maybe-min-hash`, etc. etc.</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:54:27.141000</ts>
    <user>Antione</user>
    <text>curious about why `case-map` builds a `sorted-map`, where the value for `max-mask-bits` comes from</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:54:36.141500</ts>
    <user>Antione</user>
    <text>and other curious bits</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:54:40.141600</ts>
    <user>Dann</user>
    <text>so as I understand it the big picture is constructing  a lookup table out of your case call at compile time (you probably know that part already)</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:55:18.142200</ts>
    <user>Antione</user>
    <text>yeah, i might be misremembering, but i feel like there was some relation to the bytecode that's emitted maybe?</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:55:51.142900</ts>
    <user>Dann</user>
    <text>right, case is a special form, that means it takes your form as input, and produces byte code as output</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:56:44.143900</ts>
    <user>Dann</user>
    <text>and the job with case is to turn the whole call into one table lookup (which is why all dispatch must be compile time literals - you can't calculate the dispatch correctly otherwise)</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:57:18.144500</ts>
    <user>Dann</user>
    <text>the rest of what you find there is implementation of that concept (as I understand it)</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:57:22.144700</ts>
    <user>Antione</user>
    <text>err, is `case` a special? i didn't think it was</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:57:29.144900</ts>
    <user>Antione</user>
    <text>it's a macro</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:57:48.145200</ts>
    <user>Dann</user>
    <text>oh, right, `case*` is the special</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:58:21.145500</ts>
    <user>Antione</user>
    <text>ahhhh, ok, i missed that earmuff</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:58:55.145800</ts>
    <user>Dann</user>
    <text>yeah, I elided that distinction above as well</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T19:59:47.147000</ts>
    <user>Dann</user>
    <text>so the `case` macro does a bunch of prep work with the input form, and produces data that's tied to the implementation details of the `case*` special form (bit-mask, hash implementations ...)</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:00:58.147700</ts>
    <user>Rosaline</user>
    <text>there are two constant time jvm dispatch instructions tableswitch and lookupswitch, and case ends up being one or the other</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:01:44.148400</ts>
    <user>Rosaline</user>
    <text>lookupswitches need things ordered, which I guess is the purpose of the sorted map</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:01:47.148600</ts>
    <user>Dann</user>
    <text>&lt;@Antione&gt; &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Compiler.java#L8754&gt;</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:01:57.148900</ts>
    <user>Antione</user>
    <text>&lt;https://github.com/clojure/clojure/blob/2cc37bb56a9125a1829c73c505e32995e663059a/src/jvm/clojure/lang/Compiler.java#L8754&gt; for anyone following along</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:02:00.149200</ts>
    <user>Antione</user>
    <text>jinx</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:02:55.150200</ts>
    <user>Antione</user>
    <text>&lt;@Rosaline&gt; do you know offhand which one gets picked when?</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:02:58.150300</ts>
    <user>Dann</user>
    <text>that's a big class...</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:03:09.150700</ts>
    <user>Rosaline</user>
    <text>no</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:03:23.151200</ts>
    <user>Rosaline</user>
    <text>tableswitch is for a dense jump table</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:03:26.151400</ts>
    <user>Antione</user>
    <text>(btw, none of this is necessarily important for me to know, but i love a good mystery)</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:04:03.151900</ts>
    <user>Rosaline</user>
    <text>basically you are dispatching contiguous numbers</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:04:29.152400</ts>
    <user>Rosaline</user>
    <text>lookupswitch is for  sparse</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:05:15.153300</ts>
    <user>Rosaline</user>
    <text>so a good deal of case's complexity is likely trying to massage things in to a dense table if it can, falling back to sparse</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:08:18.154800</ts>
    <user>Rosaline</user>
    <text>the jvm instructions are also all for numbers, so case has to decide on a strategy for turning things that aren't numbers in to numbers</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:08:28.155000</ts>
    <user>Antione</user>
    <text>gotcha, have been banging on it trying the number of tests and variation in types to produce :sparse version</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:08:38.155500</ts>
    <user>Antione</user>
    <text>but have only been able to find :compact so far</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:10:15.155800</ts>
    <user>Antione</user>
    <text>&lt;@Rosaline&gt; and &lt;@Dann&gt; thanks very much for the explanation</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:11:43.156600</ts>
    <user>Rosaline</user>
    <text>actually I vaguely remember rhickey talking about min-hashing on irc around the time case was added now that I look at it</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:12:30.157400</ts>
    <user>Antione</user>
    <text>prep-hashes and prep-ints only go sparse if the mask is 0</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:12:52.158000</ts>
    <user>Rosaline</user>
    <text>min-hashing is, I think, the technique for constructing a dense dispatch table</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:17:46.158200</ts>
    <user>Rosaline</user>
    <text>&lt;http://clojure-log.n01se.net/date/2009-10-28.html#15:54a&gt;</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:18:07.158800</ts>
    <user>Antione</user>
    <text>taken it way back</text>
  </message>
  <message conversation_id="1009">
    <ts>2019-04-03T20:18:11.159000</ts>
    <user>Antione</user>
    <text>takin'*</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:18:13.159200</ts>
    <user>Rosaline</user>
    <text>perfect minimum hashing, googling min-hashing gets you other interesting things</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:33:00.160700</ts>
    <user>Antione</user>
    <text>what im struggling to do: find a situation where `(maybe-min-hash (map int tests))` or `(maybe-min-hash hashes)` produce `[anything 0]`</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:34:13.160900</ts>
    <user>Antione</user>
    <text>ah, there we go</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:35:30.161100</ts>
    <user>Antione</user>
    <text>`(or (maybe-min-hash (range 8193)) [0 0])`</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:37:03.162100</ts>
    <user>Antione</user>
    <text>maybe-min-hash produces `nil`, and then we get a `0` mask, which causes `:sparse`, which gets us a `lookupswitch`</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:54:13.164200</ts>
    <user>Antione</user>
    <text>though i'll admit i still don't totally understand what scenario would cause prep-ints to get to the final branch "; compact case ints, with shift-mask". perhaps `tests` and `thens` which are massive?</text>
  </message>
  <message conversation_id="1008">
    <ts>2019-04-03T20:55:49.164500</ts>
    <user>Antione</user>
    <text>i've managed to kill my repl, so i'll leave it there :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-03T23:33:53.165600</ts>
    <user>Deann</user>
    <text>Can someone explain in simple terms why errors are so cryptic in Clojure?</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-03T23:44:04.166100</ts>
    <user>Celestine</user>
    <text>Which version of Clojure are you using? They're much improved in Clojure 1.10.</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-03T23:44:37.166700</ts>
    <user>Celestine</user>
    <text>But it's also very subjective and it really depends on what languages you've used before you come to Clojure.</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-03T23:46:26.168500</ts>
    <user>Celestine</user>
    <text>My background was C/C++/Java so Clojure was just "regular stacktraces" for me and it included a message and the filename / line number of each piece of the call stack so -- for me, based on past language experience -- it was easy to find the bits that referred to my code and therefore figure out what the error was.</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-03T23:47:12.169300</ts>
    <user>Celestine</user>
    <text>There are some messages that seem odd at first but you quickly learn to translate from "the error message you get" to "the mistake you made in your code".</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-03T23:47:25.169700</ts>
    <user>Celestine</user>
    <text>&lt;@Deann&gt; Can you give some specific examples?</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T00:20:26.172200</ts>
    <user>Deann</user>
    <text>I guess that is true as I am coming from writing Python Django which can have long stack traces. I am using 1.10, but I keep watching videos of clojure and people typically joke about the error messages.</text>
  </message>
  <message conversation_id="1011">
    <ts>2019-04-04T00:21:22.173200</ts>
    <user>Deann</user>
    <text>I was wondering if there was a reason that people joked about it. Like is it an unsolvable problem, or was it just a low priority in past versions?</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T00:22:26.174600</ts>
    <user>Deann</user>
    <text>Many times the error message doesn’t filter my error to the top, so I have to filter through the filename, line ref to find where my code is breaking.</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:06:06.175800</ts>
    <user>Celestine</user>
    <text>&lt;@Deann&gt; Yeah, the long stack traces have been a long-standing (bad) joke in Clojure...</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:07:36.176500</ts>
    <user>Celestine</user>
    <text>There have always been lots of tools to "improve" the output but I think it was always a bit of an overblown joke :neutral_face:</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:09:55.178500</ts>
    <user>Suanne</user>
    <text>I’d like to use `(case (type thing) ...)` and match on whether it’s a string or a long, but I can’t figure out how to indicate either.</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:11:44.179100</ts>
    <user>Celestine</user>
    <text>Because Clojure mostly attracted more experienced developers in the early days, the stack traces weren't a big deal really... and they only became an issue as Clojure started to get more popular, IMO :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:12:33.179200</ts>
    <user>Katherina</user>
    <text>&lt;@Suanne&gt; Try the instance? function.
```
(instance? String "hello")
true
```</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:15:02.179400</ts>
    <user>Katherina</user>
    <text>also using `cond` here could be  better.
```
(cond
    (instance? String var) "a string"
    (instance? Long var) "a long"
    :else "no idea")
```</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:15:05.179600</ts>
    <user>Suanne</user>
    <text>&lt;@Katherina&gt; Thanks! Is there a way to avoid the deep nesting that happens when doing a bunch of if/else ifs, or is it unavoidable?

```
(defn get-port
  [port]
  (if (instance? String port)
    "it was a string"
    (if (instance? Long port)
      "it was a number"
      "it was something else")))
```</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:15:20.179800</ts>
    <user>Suanne</user>
    <text>&lt;@Katherina&gt; Ah, you answered my question. Thank you!</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:16:00.180100</ts>
    <user>Katherina</user>
    <text>:smile:</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:34:28.182400</ts>
    <user>Suanne</user>
    <text>A bit confused how to output an error message and stop function execution when I’m given some bad data since there is no early return ability.

```
  (let [port (get-port (first args))]
    (if (= port nil) ; function returns nil if data bad
      nil ; early return
      (do (println (format "Listening for connections on port %d." port))
             (run-jetty handler {:port port}))))
```

I could do something like this but it seems pretty ugly. Especially if there was a bunch more data being validated.</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:35:36.183100</ts>
    <user>Shavonda</user>
    <text>You could throw an exception </text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:36:38.184600</ts>
    <user>Suanne</user>
    <text>So inside of `(get-port)` I could throw an exception for whatever kind of error took place (out of range, wrong data type, bad format), catch it inside the same function to output the relevant error message, and then throw another exception that the caller doesn’t catch?</text>
  </message>
  <message conversation_id="1012">
    <ts>2019-04-04T01:37:17.185500</ts>
    <user>Shavonda</user>
    <text>Also check out ‘if-let’. </text>
  </message>
  <message conversation_id="1012">
    <ts>2019-04-04T01:37:47.186000</ts>
    <user>Tammera</user>
    <text>(and `when-let`, which is `if-let` with only the positive branch and a convenient do block inside ^^)</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:40:14.188500</ts>
    <user>Shavonda</user>
    <text>If you want to print a message and exit the function you could put a println and throw in a do block. It might help to see the full function here though. </text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:41:26.189100</ts>
    <user>Tammera</user>
    <text>the other alternative is monadic error handling with something like promenade or cats</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:41:47.189600</ts>
    <user>Suanne</user>
    <text>Thanks for the suggestions, I will explore these recommendations tomorrow and might ask some more questions. Have a good night.</text>
  </message>
  <message conversation_id="1010">
    <ts>2019-04-04T01:41:48.189700</ts>
    <user>Tammera</user>
    <text>but monads can be scary</text>
  </message>
  <message conversation_id="1013">
    <ts>2019-04-04T03:21:54.190200</ts>
    <user>Brent</user>
    <text>You could also use clojure spec to define what you expect of your arguments and check them all at once (with e.g. spec/valid?) and output a message with spec/explain (though you might want to include the library Expound for more human-friendly errors)</text>
  </message>
  <message conversation_id="1013">
    <ts>2019-04-04T03:23:30.190500</ts>
    <user>Brent</user>
    <text>What is your use case? If it is a main function, just throw the exception, JVM will catch it and print. If it is to be called by others, why should you print an error? Just include it in the exception, throw it, and let the caller handle it in any way it likes.</text>
  </message>
  <message conversation_id="1013">
    <ts>2019-04-04T03:29:12.190800</ts>
    <user>Brent</user>
    <text>If you want to check multiple errors, you could ```
(cond
  (nil? port) (ex-info "Illegal argument: no port" {:id :illegal-argument :arg :port :val :missing})
  (not (int? port)) (ex-info "Illegal argument: port must be an int" {:id :illegal-argument :arg :port :val port})
;; ...
:else ; all checks passed, we can proceed
(run-jetty ...))``` A little silly example but you get the point.</text>
  </message>
  <message conversation_id="1014">
    <ts>2019-04-04T04:21:14.191100</ts>
    <user>Tiesha</user>
    <text>since `map` takes multiple collections, you can do:
```(-&amp;gt;&amp;gt; [[1 2] [4 5] [7 8]]
     (apply map vector))
=&amp;gt; ([1 4 7] [2 5 8])```</text>
  </message>
  <message conversation_id="1013">
    <ts>2019-04-04T11:24:51.191800</ts>
    <user>Brent</user>
    <text>Nice! But it will break if there are too many elements, map isn't defined for any number of args</text>
  </message>
  <message conversation_id="1015">
    <ts>2019-04-04T11:26:37.192500</ts>
    <user>Onita</user>
    <text>hey everyone. has there been any work toward developing a debugger along the lines of the common lisp one? i don’t know a lot about the jvm, so maybe this isn’t even a possibility in clojure.</text>
  </message>
  <message conversation_id="1015">
    <ts>2019-04-04T11:30:27.192800</ts>
    <user>Onita</user>
    <text>found this, gonna play around with it: &lt;https://github.com/gfredericks/debug-repl&gt;</text>
  </message>
  <message conversation_id="1016">
    <ts>2019-04-04T11:45:55.193500</ts>
    <user>Cherise</user>
    <text>Hi, is it recommended to run `clj -m myproject.core` in a Docker container in production? Or better to use an uberjar?</text>
  </message>
  <message conversation_id="1016">
    <ts>2019-04-04T11:49:01.193600</ts>
    <user>Tiesha</user>
    <text>I don’t see that limitation… just ran it for a vector of 50000 pairs without issue…
`(apply map vector (partition-all 2 (range 100000)))`</text>
  </message>
  <message conversation_id="1016">
    <ts>2019-04-04T11:49:22.193800</ts>
    <user>Tiesha</user>
    <text>am I misunderstanding what you mean by too many elements?</text>
  </message>
  <message conversation_id="1015">
    <ts>2019-04-04T12:54:48.195500</ts>
    <user>Marlyn</user>
    <text>&lt;@Cherise&gt; there are tradeoffs to both approaches. AOT compilation can get faster load times.  You can AOT with an uberjar, or not, or with `clj` or not.  I don't recommend running `clj` but instead use `clojure` in Docker</text>
  </message>
  <message conversation_id="1015">
    <ts>2019-04-04T12:55:02.195900</ts>
    <user>Marlyn</user>
    <text>(clj == rlwrap clojure)</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:30:19.196200</ts>
    <user>Clarine</user>
    <text>What’s the meaning of the hash sign here?
&lt;https://github.com/juxt/yada/blob/master/ext/multipart/src/yada/multipart.clj#L37&gt;</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:31:05.196700</ts>
    <user>Clarine</user>
    <text>Below it is a function without it, just ^bytes</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:31:14.197000</ts>
    <user>Dann</user>
    <text>`#^` is an old syntax for metadata</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:33:56.197200</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (meta #^:foo {})
{:foo true}``` &lt;@Clarine&gt;</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:34:30.197400</ts>
    <user>Clarine</user>
    <text>cool, so it’s optional now.</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:36:29.198300</ts>
    <user>Jasmine</user>
    <text>I still find it jarring when I run across this now</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:36:31.198400</ts>
    <user>Dann</user>
    <text>yeah, it's the same as `^` as far as I can tell</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:36:39.198600</ts>
    <user>Jasmine</user>
    <text>it is the same</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:36:50.198800</ts>
    <user>Jasmine</user>
    <text>the syntax was simplified</text>
  </message>
  <message conversation_id="1018">
    <ts>2019-04-04T13:46:48.199100</ts>
    <user>Brent</user>
    <text>Does map take up to 50k arguments or am I missing something? Or does apply do something else than (map fn pair1... pair50000)?</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T13:51:59.200100</ts>
    <user>Clarine</user>
    <text>Someone hinted that this issue &lt;https://dev.clojure.org/jira/browse/CLJ-1472&gt; would also be relevant for GraalVM native.
I tested the patch but alas, I still could not compile code using spec with it.</text>
  </message>
  <message conversation_id="1018">
    <ts>2019-04-04T14:03:21.200500</ts>
    <user>Brent</user>
    <text>Ah I see &lt;https://stackoverflow.com/questions/2735600/why-is-there-a-limit-of-max-20-parameters-to-a-clojure-function&gt;
&amp;gt; First of all, the limit only applies to required positional arguments; you can always use the variable arity case (&amp;amp; more-args in the function's signature) to handle as many arguments as you want to
Thanks, today I learned 2 useful things!</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T14:03:53.201300</ts>
    <user>Jasmine</user>
    <text>note that there is a cycle between clojure depending on spec and spec depending on clojure, so verifying something like this is probably a little challenging</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T14:04:10.201600</ts>
    <user>Jasmine</user>
    <text>or at least more challenging than it appears at first :)</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T14:06:45.202300</ts>
    <user>Clarine</user>
    <text>what I did was build the clojure git checkout with the patch applied. That yielded clojure 1.11.0-master-SNAPSHOT and I depended on that one in my other project.</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T14:07:02.202500</ts>
    <user>Clarine</user>
    <text>gotta go now</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T14:09:37.203100</ts>
    <user>Jasmine</user>
    <text>yeah, you need to recompile spec based on that Clojure, then depend on both the modified Clojure and the modified spec.alpha</text>
  </message>
  <message conversation_id="1017">
    <ts>2019-04-04T14:10:00.203600</ts>
    <user>Jasmine</user>
    <text>spec.alpha is aot compiled so has bytecode emitted according to the old Clojure core</text>
  </message>
  <message conversation_id="1019">
    <ts>2019-04-04T14:24:56.204500</ts>
    <user>Clarine</user>
    <text>Thanks, I’ll try when I get home </text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T14:53:29.206100</ts>
    <user>Suanne</user>
    <text>Hey, I’m trying to write a simple `ring` application. In the REPL, when I execute `(run-jetty)`, the function takes over and is impossible to get out of. The only way is to kill the entire REPL process.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T14:58:34.207000</ts>
    <user>Evonne</user>
    <text>&lt;@Suanne&gt; IIRC there’s a `:join` setting you can set to false to keep it from taking over your repl</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T14:58:36.207100</ts>
    <user>Dann</user>
    <text>`:join false` should help there</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T14:59:09.208000</ts>
    <user>Suanne</user>
    <text>Ah yes I discovered that option. Now the problem I’m facing is starting and stopping that function now that it’s been executed.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T14:59:33.208400</ts>
    <user>Dann</user>
    <text>the call should return an object you can access and ask it to shut down</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T14:59:51.208900</ts>
    <user>Dann</user>
    <text>also if you provide your handler function as a var, you can redefine the handler without restarting the server</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:03:01.209800</ts>
    <user>Suanne</user>
    <text>Alright so I’m seeing that this object returned is a `org.eclipse.jetty.server.Server`. How do I determine how to interact with this? Do I look up the Java documentation? Or is this something Clojure specific?</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:03:45.210800</ts>
    <user>Dann</user>
    <text>the javadoc for that object should be useful, iirc it has a `.stop` method, anything clojure itself provides will start with `org.clojure...`</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:04:02.211300</ts>
    <user>Suanne</user>
    <text>Also where was I supposed to find out that this returns an object other than just asking people who already know here? It’s not obvious in the docs at all?</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:04:33.211800</ts>
    <user>Dann</user>
    <text>This should be covered in the clj-http docs somewhere. Perhaps in a non-obvious way...</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:05:23.212400</ts>
    <user>Dann</user>
    <text>&lt;@Suanne&gt; &lt;https://ring-clojure.github.io/ring/ring.adapter.jetty.html&gt; - in general clojure functions return something useful, when in doubt I'd check :D</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:05:53.212700</ts>
    <user>Dann</user>
    <text>```Adapters are used to convert Ring handlers into running web servers.``` - that might imply "returns the server"</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:06:12.213200</ts>
    <user>Suanne</user>
    <text>That’s the page I was looking at. Alright, well that’s definitely not obvious at all to me. Thanks for pointing it out.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:06:46.213800</ts>
    <user>Dann</user>
    <text>I would be surprised to see something that has the job of "creating an x" that doesn't return it</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:07:22.214500</ts>
    <user>Dann</user>
    <text>(not to say this doesn't exist, but it seems inconvenient and I'm not thinking of examples except maybe "signal handler" or "default uncaught exception handler")</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:07:40.214700</ts>
    <user>Suanne</user>
    <text>Yeah agreed. I should have thought of it.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:08:07.215100</ts>
    <user>Dann</user>
    <text>also good to remember if you implement a function meant to create something</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:09:35.216400</ts>
    <user>Suanne</user>
    <text>As far as ring is concerned, would the `handler` passed to `run-jetty` be a reasonable place to implement a router that would pass control off to different functions based on the requested URI?</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:09:52.216600</ts>
    <user>Dann</user>
    <text>that's precisely where that belongs, yes</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:10:41.217500</ts>
    <user>Dann</user>
    <text>there are multiple routing libs (I like bidi and polaris myself, compojure is probably the most popular)</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:11:10.218200</ts>
    <user>Suanne</user>
    <text>Alright thanks! I’m probably going to implement a simple one myself as a learning experience.</text>
  </message>
  <message conversation_id="1021">
    <ts>2019-04-04T15:19:49.219200</ts>
    <user>Somer</user>
    <text>Is it possible to get the symbol of a `defn` in that `defn`'s body?</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:21:44.220500</ts>
    <user>Dann</user>
    <text>if there's a way I'm sure it's not a public feature and would be liable to break in future releases - why not a wrapper macro for defn that passes in or otherwise exposes the var symbol?</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:23:12.221700</ts>
    <user>Somer</user>
    <text>I could but I am already using a wrapper defn for certain things (i.e. APM tracing) and I'd need to throw more stuff into that. It seems like it'd be useful to get the name of the current function.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:23:21.221900</ts>
    <user>Dann</user>
    <text>```(ins)user=&amp;gt; (defmacro ndefn [n &amp;amp; all] `(let [~'var-name '~n] (defn ~n ~@all)))
#'user/ndefn
(ins)user=&amp;gt; (ndefn foo [x] (println "calling" var-name) x)
#'user/foo
(ins)user=&amp;gt; (foo 1)
calling foo
1
```</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:23:30.222200</ts>
    <user>Dann</user>
    <text>it's useful, clojure doesn't provide it</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:24:43.222500</ts>
    <user>Somer</user>
    <text>This is interesting... &lt;https://www.mail-archive.com/clojure@googlegroups.com/msg13017.html&gt;</text>
  </message>
  <message conversation_id="1021">
    <ts>2019-04-04T15:24:51.222700</ts>
    <user>Somer</user>
    <text>Essentially:
```
(-&amp;gt; (Throwable.)
      (.getStackTrace)
      (first)
      (.getClassName))
```</text>
  </message>
  <message conversation_id="1021">
    <ts>2019-04-04T15:26:25.224100</ts>
    <user>Becki</user>
    <text>can you explain what you are trying to solve? Often a different approach can help. But there for sure are real necessities like this</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:26:44.224700</ts>
    <user>Suanne</user>
    <text>I’m trying to make a function that will kill the previous server if it is defined, but there’s a problem in that the first time `server` isn’t defined. Is there a way to change a symbol `'server` to an identifier at runtime?

```
(defn start-server
  []
  (if (resolve 'server)
    (.stop server))
  (def server (run-jetty handler {:port 8080 :join? false})))
```</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:27:53.226400</ts>
    <user>Dann</user>
    <text>you could consider `(def server)` at the top level for clarity, then `alter-var-root` which can use the previous value of the var while redefining</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:27:55.226500</ts>
    <user>Somer</user>
    <text>I want to write a spec-assert function that will have the function's name in the error message string. Obviously you can figure out function's name from the stack trace but it'd be nice to make it super obvious.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:28:49.227100</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; (defmacro fname [] `'~(-&amp;gt; @clojure.lang.Compiler/METHOD .objx .name clojure.repl/demunge symbol name symbol))
#'user/fname
user=&amp;gt; (defn foo [] (fname))
#'user/foo
user=&amp;gt; (foo)
foo
```</text>
  </message>
  <message conversation_id="1021">
    <ts>2019-04-04T15:28:52.227300</ts>
    <user>Harris</user>
    <text>:upside_down_face:</text>
  </message>
  <message conversation_id="1021">
    <ts>2019-04-04T15:29:22.227900</ts>
    <user>Harris</user>
    <text>don't use it for real</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:29:31.228100</ts>
    <user>Dann</user>
    <text>&lt;@Harris&gt; that's fascinating - how likely would it be to work in the next clojure release?</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:29:44.228400</ts>
    <user>Harris</user>
    <text>hasn't changed at least in the past 5 years</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:30:05.228700</ts>
    <user>Harris</user>
    <text>but it has lots of caveats :P</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:30:41.229000</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; (defmacro fname [] `'~(-&amp;gt; @clojure.lang.Compiler/METHOD .objx .name clojure.repl/demunge symbol name symbol))
#'user/fname
user=&amp;gt; (defn foo [s] (for [_ s] (fname)))
#'user/foo
user=&amp;gt; (foo [1])
(foo/iter--157--161/fn--162/fn--163)
```</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:31:08.229800</ts>
    <user>Harris</user>
    <text>the only safe way to use it is `(defn foo [..] (let [fname (fname)] ..))`</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:31:10.230000</ts>
    <user>Dann</user>
    <text>ahh because for creates nested fn instances</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:39:42.231200</ts>
    <user>Meagan</user>
    <text>FWIW it was not obvious to me at all either. I hunted around for examples until I found one that called `.stop` on it</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:43:18.231700</ts>
    <user>Suanne</user>
    <text>Ok here is what I did and it works:

```
(def server nil)

(defn start-server
  ([port]
   (if server
     (.stop server))
   (alter-var-root #'server (fn [&amp;amp; args] (run-jetty handler {:port port :join? false}))))
  ([]
   (start-server 8080)))
```</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:45:34.233000</ts>
    <user>Dann</user>
    <text>my though was more like `(def server nil) (defn start-server ([port] (alter-var-root #'server (fn [s] (when s (.stop s)) (run-jetty ...))) ([] ...))`</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:45:47.233300</ts>
    <user>Dann</user>
    <text>but effectively the same result</text>
  </message>
  <message conversation_id="1022">
    <ts>2019-04-04T15:46:17.233800</ts>
    <user>Suanne</user>
    <text>Ah I see, so I’d have access to the original value of the var there.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:46:43.234300</ts>
    <user>Dann</user>
    <text>yeah, that's the premise of alter-var-root, is insuring when you redefine you have access to the latest value</text>
  </message>
  <message conversation_id="1023">
    <ts>2019-04-04T15:51:46.234700</ts>
    <user>Suanne</user>
    <text>Much nicer!</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T15:56:33.236200</ts>
    <user>Suanne</user>
    <text>That’s weird, I accidentally typed port 80 and it worked. And my browser was able to connect to it. Isn’t that not supposed to work for security reasons (ports under a certain number)? As far as I am aware, I’m not running the process with super user permissions. Although this is on macOS so perhaps I’m not fully understanding how it gives processes permissions.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:00:12.236500</ts>
    <user>Suanne</user>
    <text>Not really relevant to Clojure though.</text>
  </message>
  <message conversation_id="1024">
    <ts>2019-04-04T16:12:16.238300</ts>
    <user>Derick</user>
    <text>hello guys
may you help me...
I need to compile a little library of mine to be used for an webapp that runs on JDK 7... can I use Clojure 1.9 and just set the Java path to that old version of JDK?</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:13:25.240100</ts>
    <user>Clarine</user>
    <text>&lt;@Jasmine&gt; Tried your suggestion. Still getting that error. Full output here: &lt;https://gist.github.com/borkdude/73634b2e2ea8e22a7d39c06dc7c628f0&gt;</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:15:59.241600</ts>
    <user>Suanne</user>
    <text>It seems that my REPL executes `(def server nil)` whenever my editor saves the source file, messing up the code since the server reference is lost. Is that expected behaviour?</text>
  </message>
  <message conversation_id="1024">
    <ts>2019-04-04T16:16:03.241700</ts>
    <user>Clarine</user>
    <text>The relevant bit is probably this:
```
Error: unbalanced monitors: mismatch at monitorexit, 96|LoadField#lockee__5436__auto__ != 3|LoadField#lockee__5436__auto__
Detailed message:
Error: unbalanced monitors: mismatch at monitorexit, 96|LoadField#lockee__5436__auto__ != 3|LoadField#lockee__5436__auto__
Call path from entry point to clojure.spec.gen.alpha$dynaload$fn__2628.invoke():
```</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:16:36.242500</ts>
    <user>Dann</user>
    <text>&lt;@Suanne&gt; oh yeah, ring's `wrap-reload` would do that, the easy workaround is to use `defonce` instead of `def`</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:18:40.243000</ts>
    <user>Suanne</user>
    <text>Ok that worked. This is something that ring is doing?</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:19:25.243600</ts>
    <user>Dann</user>
    <text>yeah, the wrap-reload middleware wraps your handler in a function that checks for changed files and reloads them when each request comes through</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:20:15.243900</ts>
    <user>Suanne</user>
    <text>Ok interesting.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:20:35.244400</ts>
    <user>Suanne</user>
    <text>Previously you said if you “provide your handler function as a var, you can redefine the handler without restarting the server”, can you explain a bit more about this?</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:21:56.245300</ts>
    <user>Celestine</user>
    <text>&lt;@Suanne&gt; If you use `#'handler` instead of just `handler`, you pass a `Var` so that introduces another level of indirection.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:22:07.245600</ts>
    <user>Emmie</user>
    <text>I believe you can, just make sure you're compiling and running with the same version to be on the safe side. The best way to find out is to try it :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:22:27.246100</ts>
    <user>Celestine</user>
    <text>That allows you to redefine `handler` (in the REPL) and the wrapped `Var` will point to the updated function.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:23:37.246400</ts>
    <user>Suanne</user>
    <text>That is very useful. Thanks!</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:24:05.246900</ts>
    <user>Suanne</user>
    <text>I have to learn exactly what `#'variable` does.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:24:56.248000</ts>
    <user>Dann</user>
    <text>it's precisely what &lt;@Celestine&gt; said - it is a reader macro that instead of looking up the value in `variable` gets the var object that currently stores it</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:25:13.248500</ts>
    <user>Dann</user>
    <text>when you run `def` and the var already exists, the var is reused and a new value is put into it</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:25:25.248900</ts>
    <user>Dann</user>
    <text>and when you call a var, it is looked up and the contents are called</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:25:42.249300</ts>
    <user>Dann</user>
    <text>I was looking for an article for a full explanation of this pattern... might find one</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:25:57.249500</ts>
    <user>Suanne</user>
    <text>Thanks for the explanation.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:26:11.250000</ts>
    <user>Dann</user>
    <text>this might help &lt;https://clojuredocs.org/clojure.core/var&gt;</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:26:22.250300</ts>
    <user>Suanne</user>
    <text>Are most people coming in to Clojure with a deep knowledge of Java? I know how to write software in Java but I’m not fully familiar with the libraries and such.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:26:51.250900</ts>
    <user>Derick</user>
    <text>I'm trying, now, a safer path: leiningen + clojure 1.8</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:26:51.251100</ts>
    <user>Dann</user>
    <text>hmm, that above article on `var` should also include passing a var to a long-running higher order function (I might fill that in today...)</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:27:19.251700</ts>
    <user>Dann</user>
    <text>I learned java via Clojure, there's a benefit to at least learning how to read javadoc and convert to clojure interop</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:27:25.251900</ts>
    <user>Derick</user>
    <text>initially I was planing to use 1.9 and deps.clj</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:27:34.252300</ts>
    <user>Dann</user>
    <text>because often using a java lib directly is better than a wrapper</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:28:47.252900</ts>
    <user>Celestine</user>
    <text>&lt;@Suanne&gt; People come to Clojure from a variety of backgrounds. There are certainly a lot of people coming to Clojure with next to no knowledge of Java.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:29:06.253500</ts>
    <user>Celestine</user>
    <text>(and there are people coming in with _lots_ of knowledge of Java too)</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:29:08.253600</ts>
    <user>Clarine</user>
    <text>I saw Clojure as a fun way to learn more about the JVM/Java, since I had to deal with it at work :wink:</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:31:06.255900</ts>
    <user>Suanne</user>
    <text>I’m just a bit confused about how much Java I should be learning in addition to Clojure. An example of my recent confusion is why a lot of ring stuff seems to end in documentation of Java classes. Is it software written in Java that has Clojure wrapper library making it more palatable for Clojure? But then you still have to drop out of Clojure here and then to do stuff (like stop a server for example).</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:32:52.257600</ts>
    <user>Clarine</user>
    <text>&lt;@Suanne&gt; Ring itself is a representation for requests and responses and functions dealing with those, in Clojure. But a webserver is usually not written in Clojure from scratch. That’s where you’ll see a adapter layer that translates back and forth from the Java world. E.g. ring-jetty-adapter.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:34:33.258900</ts>
    <user>Farrah</user>
    <text>I just started Clojure/ClojureScript and I almost feel like its totally opposite to Java from what I've seen</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:34:46.259000</ts>
    <user>Farrah</user>
    <text>A lot more fun tho haha</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:37:45.261600</ts>
    <user>Celestine</user>
    <text>&lt;@Suanne&gt; How much Java interop you see in Clojure will depend on exactly what libraries you use. Re: stopping a server in a Ring application, the default Jetty adapter exposes a Java class in the Jetty library that you have to call `.stop` on, but if you use `http-kit` instead, calling `run-server` returns a handle on the running server and to stop it you just call the handle as a function, for example &lt;https://github.com/framework-one/fw1-clj/blob/master/examples/usermanager/main.clj#L101-L123&gt;</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:40:05.262800</ts>
    <user>Celestine</user>
    <text>I came to Clojure sort of via Java. I started doing Java back in 1997. Picked up Groovy in 2007, picked up Scala in 2009, and then Clojure in 2010 and I've been using it in production since 2011.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:40:40.263500</ts>
    <user>Celestine</user>
    <text>(in among all that was CFML -- ColdFusion -- running on JVM for years, since I worked at Macromedia/Adobe for seven years!)</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:42:01.263600</ts>
    <user>Emmie</user>
    <text>Personally, I haven't seen issues compiling a jar with an older jdk and running it with a newer version, but it's usually safer to not mix and match</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:42:55.263800</ts>
    <user>Jasmine</user>
    <text>if you have feedback, put it on the jira. not something I'm working on right now.</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:44:57.265700</ts>
    <user>Michael</user>
    <text>i'm seeing what seems like counterintuitive behavior with into, wondering if anyone has any insight. this returns a hash map (losing original order) instead of an array map
```
(into (array-map) (for [i (range 10)] [(keyword (str i)) i]))
```</text>
  </message>
  <message conversation_id="1020">
    <ts>2019-04-04T16:45:03.265900</ts>
    <user>Tammera</user>
    <text>I think that Clojure runs on the JVM is one of its benefits. The JVM is such a great platform</text>
  </message>
  <message conversation_id="1025">
    <ts>2019-04-04T16:48:06.266700</ts>
    <user>Suanne</user>
    <text>Alright thanks for the insights.</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:48:15.267000</ts>
    <user>Milford</user>
    <text>&lt;@Michael&gt; Beyond a certain size, `conj`ing onto a map will cause it to become a hash map for perf reasons.</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:48:38.267300</ts>
    <user>Michael</user>
    <text>oh interesting</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:48:47.267600</ts>
    <user>Michael</user>
    <text>didn't know that could change the map type</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:52:00.267800</ts>
    <user>Milford</user>
    <text>&lt;@Michael&gt; See last sentence of &lt;https://clojure.org/reference/data_structures#ArrayMaps&gt;</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:53:50.268100</ts>
    <user>Michael</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:54:01.268500</ts>
    <user>Michael</user>
    <text>i suppose i just want (apply array-map...)</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:54:36.268700</ts>
    <user>Milford</user>
    <text>Or, perhaps a sorted map?</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:55:05.269300</ts>
    <user>Milford</user>
    <text>That would base things on the keys, instead of insertion order</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:55:50.270100</ts>
    <user>Michael</user>
    <text>yeah i'm consuming data from another api and need to maintain the original order which is likely sorted but not something i really want to assume and rely on</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:57:49.271600</ts>
    <user>Celestine</user>
    <text>&lt;@Michael&gt; Something to consider: maintain two data structures -- a fast (unordered) hash map for lookup and a vector of the keys in the order you need them. That way you can produce the ordered set of key/value data whenever you need it, but you benefit from normal hash map ops when you don't.</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:58:32.272200</ts>
    <user>Dann</user>
    <text>also APIs that break if the keys in a map are in unexpected order shouldn't exist and are much more common than they should be</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:59:33.272800</ts>
    <user>Michael</user>
    <text>well its not that really, more just that the order coming back from the api is meaningful</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:59:51.273300</ts>
    <user>Michael</user>
    <text>this should be a map of less than like 10 items</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T16:59:57.273600</ts>
    <user>Tammera</user>
    <text>at some point I am going to write a test helper that deliberately reorders sets and maps</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:00:04.274100</ts>
    <user>Dann</user>
    <text>oh, I'm dealing with a JSON api right now where changing key order does break it</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:00:07.274200</ts>
    <user>Michael</user>
    <text>but the switch from array to hash happens between six and 10 items haha</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:00:12.274400</ts>
    <user>Michael</user>
    <text>sounds fun</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:00:24.274500</ts>
    <user>Dann</user>
    <text>that's a good idea</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:01:04.275100</ts>
    <user>Celestine</user>
    <text>&lt;@Michael&gt; How exactly is the API returning the data? JSON?</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:01:12.275300</ts>
    <user>Michael</user>
    <text>yeah</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:01:44.275900</ts>
    <user>Celestine</user>
    <text>I'm not sure how you're going to get from JSON to any Clojure data structure and retain the ordering from the JSON object :disappointed:</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:02:03.276400</ts>
    <user>Celestine</user>
    <text>(short of writing a custom JSON parser?)</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:02:26.277000</ts>
    <user>Michael</user>
    <text>well its a json array, i'm converting the json array to a lookup map for internal use and using the lookup map also as an ordering reference</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:02:32.277200</ts>
    <user>Michael</user>
    <text>basically i should probably do what you suggested</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:04:50.278100</ts>
    <user>Celestine</user>
    <text>Yeah, I would keep the array for ordering and create a hash map for fast (unordered) lookup in that case.</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:06:11.278600</ts>
    <user>Michael</user>
    <text>:thumbsup:</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:06:50.279100</ts>
    <user>Michael</user>
    <text>probably a good opportunity for some linting rules around that</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T17:24:22.280600</ts>
    <user>Antione</user>
    <text>&lt;@Celestine&gt; i puzzle a bit when I hear you're still rockin' the CFML. are you still actually using it? i surfed over to the 2018 release page and see features added like NEW: string literals and NEW: NULL support, which seems kind of crazy to me.</text>
  </message>
  <message conversation_id="1026">
    <ts>2019-04-04T17:25:49.282000</ts>
    <user>Antione</user>
    <text>no judgement, to each their own, just curious if there's something specifically that keeps you using it beside your familiarity</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:18:00.283500</ts>
    <user>Celestine</user>
    <text>&lt;@Antione&gt; We recently retired our primary CFML app at World Singles Networks, in favor of the React.js frontend / Clojure backend we've been working on for a few years (we starting migrating sites to the new platform ages ago but we had about 100 sites to migrate so it took a while :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:18:49.284300</ts>
    <user>Celestine</user>
    <text>We still have two more CFML apps -- one internal only that is already partly rewritten in Clojure, and one small external app that is scheduled for a rewrite in Clojure "soon".</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:19:10.284700</ts>
    <user>Celestine</user>
    <text>We've been slowly migrating from CFML to Clojure since 2011 :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:20:29.286500</ts>
    <user>Celestine</user>
    <text>We've used a free, open source CFML engine since 2009 BTW, not the Adobe implementation. And the FOSS engine had a lot of modern features long before Adobe added them too...</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:20:43.286700</ts>
    <user>Antione</user>
    <text>gotcha. i messed with coldfusion in i wanna say 97? but i remember almost nothing about that experience.</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:21:41.288500</ts>
    <user>Celestine</user>
    <text>Ah, back then it was all `&amp;lt;TAG&amp;gt;`-based and a proprietary C++ engine (interpreter). Since 2001 it's run on the JVM and evolved into quite a nice dynamic scripting engine with closures and metaprogramming etc.</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:21:44.288600</ts>
    <user>Antione</user>
    <text>i was wondering if you'd pop in with: "CFML is nice because ____________"</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:22:10.289400</ts>
    <user>Antione</user>
    <text>but sounds like it's not nice enough to not port it</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:22:33.289800</ts>
    <user>Celestine</user>
    <text>Back in 2011, I created a library that allowed CFML engines to load Clojure code and call it seamlessly (`cfmljure` -- of course!) and that's how we've migrated away from CFML, from the bottom up.</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:23:20.290400</ts>
    <user>Celestine</user>
    <text>So our CFML code can include stuff like ```			variables._fb = JavaJDBC.find_by_keys(
				core.get_in(
					application.clojure_component,
					core.vector(
						core.keyword( "database" ), core.keyword( "pooled-db" )
					)
				),
				core.keyword( "facebook_member" ),
				core.hash_map(
					core.keyword( "site_id" ), this.getSiteId(),
					core.keyword( "member_id" ), this.getId()
				)
			);
``` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:23:46.291400</ts>
    <user>Antione</user>
    <text>yeah, i've been aware of that, but didn't know if the idea was to keep it around instead of using it to slowly strangle the CFML out of it</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:24:04.291800</ts>
    <user>Celestine</user>
    <text>`(jdbc/find-by-keys (get-in app [:database :pooled-db]) :facebook_member {:site_id site-id :member_id id})`</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:41:31.295400</ts>
    <user>Emmie</user>
    <text>On a previous job, we introduced Clojure in a similar fashion, we had a Java class with a main method, that would make RT calls to load namespaces and then invoke the entry point of the Clojure application.

It wasn't pretty, but it looked like a classic Java Maven app with a Clojure library :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:44:52.297800</ts>
    <user>Celestine</user>
    <text>We have about a dozen standalone Clojure apps now and a lot of the code in those apps started as "library code" called from our CFML code base, so it's been a very smooth migration from CFML to Clojure since we could rewrite everything piecemeal without any service impact for our customers.</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:45:21.298500</ts>
    <user>Celestine</user>
    <text>And being able to REPL into running CFML apps to apply patches occasionally has also been very useful :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T18:59:43.299300</ts>
    <user>Emmie</user>
    <text>YES! They thought we were wizards, that application did eventually become a proper Clojure application, but the words "functional programming" and "clojure" triggered some people ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T22:28:36.300500</ts>
    <user>Chandra</user>
    <text>Trying to use `lein kibit` with a dependency that uses `.cljc` files, getting `No namespace: foo.bar.baz found` as an error. Does anyone know how to resolve this?</text>
  </message>
  <message conversation_id="1027">
    <ts>2019-04-04T22:30:22.301700</ts>
    <user>Chandra</user>
    <text>I am tracing it back, `kibit` uses `org.clojure/tools.reader`, and `[clojure.tools.reader$read_namespaced_map invokeStatic "reader.clj" 760]` is where it is crashing, but I’m not very familiar with this reader lib, and it is not clear to me that `cljc` support is provided…</text>
  </message>
  <message conversation_id="1028">
    <ts>2019-04-05T00:51:51.302200</ts>
    <user>Yoko</user>
    <text>&lt;@Meagan&gt; &lt;https://mail.openjdk.java.net/pipermail/openjfx-dev/2018-September/022500.html&gt;</text>
  </message>
  <message conversation_id="1028">
    <ts>2019-04-05T00:54:58.302700</ts>
    <user>Yoko</user>
    <text>javapackager distro for JDK 11</text>
  </message>
  <message conversation_id="1028">
    <ts>2019-04-05T00:55:54.302800</ts>
    <user>Georgina</user>
    <text>Devious</text>
  </message>
  <message conversation_id="1028">
    <ts>2019-04-05T00:55:55.303000</ts>
    <user>Georgina</user>
    <text>I like it</text>
  </message>
  <message conversation_id="1029">
    <ts>2019-04-05T02:14:03.303500</ts>
    <user>Cherise</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="1030">
    <ts>2019-04-05T02:44:46.305600</ts>
    <user>Karren</user>
    <text>I've just run `jcmd &amp;lt;pid&amp;gt; &lt;http://VM.info|VM.info&gt;` in a docker container running our Clojure application on OpenJDK 11 (Ubuntu).
In the "Internal exceptions" section I've found a few instances of this exception:
```
Event: 4103.838 Thread 0x00007f800400c800 Exception &amp;lt;a 'java/lang/ClassCastException'{0x00000000c78ba0b0}: class clojure.lang.Keyword cannot be cast to class java.lang.CharSequence (clojure.lang.Keyword is in unnamed module of loader 'app'; java.lang.CharSequence is in module java.base of loader
```
I couldn't find any info about this one (or what exactly the "Internal exceptions" mean in this context) so I'm wondering if it's something I should worry about.</text>
  </message>
  <message conversation_id="1030">
    <ts>2019-04-05T04:56:02.309000</ts>
    <user>Jaimee</user>
    <text>I've just encountered a strange bug:
`labels-probs (sort-by :score &amp;gt;= (map #(do {:score %2 :label %1}) labels clean-probs))`

This was crashing for one of my inputs (`clean-probs` is a list of double) with a comparison not respecting contract error. Yet I checked the data, all the elements of the list are valid floats (just, some extremely small, goes to E-39 iirc).
So I figured I might as well do `(map #(if (&amp;lt; % 0.001) 0 %)` to `clean-probs` and it worked, it doesn't crash anymore</text>
  </message>
  <message conversation_id="1030">
    <ts>2019-04-05T04:57:05.309800</ts>
    <user>Jaimee</user>
    <text>But I don't understand why `&amp;gt;=` was crashing and not `&amp;lt;`.</text>
  </message>
  <message conversation_id="1030">
    <ts>2019-04-05T05:06:10.310100</ts>
    <user>Sixta</user>
    <text>&lt;@Jaimee&gt; your stack trace would probably be useful :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1031">
    <ts>2019-04-05T05:13:14.310700</ts>
    <user>Tiesha</user>
    <text>sweet! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1030">
    <ts>2019-04-05T05:23:31.311500</ts>
    <user>Jaimee</user>
    <text>ok I'll get it (it's not accessible anymore, but I can rollback to a commit that had this problem)</text>
  </message>
  <message conversation_id="1032">
    <ts>2019-04-05T06:28:05.312700</ts>
    <user>Bart</user>
    <text>i've got a list of tables, and would like to "merge" them in a way such that the new table orders them by element order, i.e</text>
  </message>
  <message conversation_id="1032">
    <ts>2019-04-05T06:31:43.312800</ts>
    <user>Bart</user>
    <text>Table merging</text>
  </message>
  <message conversation_id="1032">
    <ts>2019-04-05T06:32:14.313500</ts>
    <user>Bart</user>
    <text>so my three 3x2 tables turn into one 9x2 merged by element. racking my brain on how to do this</text>
  </message>
  <message conversation_id="1031">
    <ts>2019-04-05T06:49:18.314500</ts>
    <user>Loria</user>
    <text>your example shows a 9×2 result table, not 3×6?</text>
  </message>
  <message conversation_id="1032">
    <ts>2019-04-05T06:51:07.314700</ts>
    <user>Bart</user>
    <text>oh yeah, i changed the result. it should be 9x2 like it is now</text>
  </message>
  <message conversation_id="1032">
    <ts>2019-04-05T06:51:40.314900</ts>
    <user>Bart</user>
    <text>so merging the nth vector in each table together in a new vector</text>
  </message>
  <message conversation_id="1032">
    <ts>2019-04-05T06:52:33.315200</ts>
    <user>Loria</user>
    <text>`(apply map concat list-of-tables)` should do it</text>
  </message>
  <message conversation_id="1032">
    <ts>2019-04-05T06:53:11.315400</ts>
    <user>Loria</user>
    <text>the multi-arity versions of map and mapcat can come in useful in these situations</text>
  </message>
  <message conversation_id="1032">
    <ts>2019-04-05T06:53:33.315600</ts>
    <user>Bart</user>
    <text>aaaah, damn. that's nice :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T07:49:35.316200</ts>
    <user>Emmy</user>
    <text>does anyone know why this might behave differently in prod (heroku) to local dev?
```
(defn fn-name
  [f]
  (as-&amp;gt; (str f) $
    (clojure.main/demunge $)
    (or (re-find #"(.+)--\d+@" $)
        (re-find #"(.+)@" $))
    (last $)))
```</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T07:50:04.316700</ts>
    <user>Emmy</user>
    <text>(am using it to publish the name of a routing handler in monitoring)</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T07:52:38.317200</ts>
    <user>Emmy</user>
    <text>locally it correctly knows the function name but in prod it seems to produce `:`</text>
  </message>
  <message conversation_id="1034">
    <ts>2019-04-05T10:28:04.317300</ts>
    <user>Chandra</user>
    <text>Turns out, this is because I was using `#foo.bar.baz{:a 1}`, and I don’t think the reader knows how to handle it.</text>
  </message>
  <message conversation_id="1032">
    <ts>2019-04-05T10:28:20.317500</ts>
    <user>Chandra</user>
    <text>Fix was to use `{:foo.bar.baz/a 1}` instead</text>
  </message>
  <message conversation_id="1035">
    <ts>2019-04-05T11:44:17.317700</ts>
    <user>Otelia</user>
    <text>Since it seems to be a pure function, it must be getting a different input param in production. I suggest printing the input param in production, and then you can use that value to reproduce it locally and debug it.</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T12:47:28.318300</ts>
    <user>Dann</user>
    <text>this means that some code is trying to do string operations on keywords (maybe you already know this)</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T12:48:57.318500</ts>
    <user>Dann</user>
    <text>from your stack overflow thread:
&amp;gt; I suppose, neither your application nor the JDK code would ever deal with a clojure.lang.Keyword
this is wrong, of course, we use keywords all the time</text>
  </message>
  <message conversation_id="1036">
    <ts>2019-04-05T13:10:59.319500</ts>
    <user>Lemuel</user>
    <text>Is there a function available somewhere to abbreviate namespace/package names?  e.g.  net.eraserhead.foo.bar -&amp;gt; n.e.foo.bar?</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T13:12:14.320600</ts>
    <user>Dann</user>
    <text>&lt;@Lemuel&gt; what's the use case for abbreviating? require with :as allows that for clojure namespaces, but there's no equivalent for java packages</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T13:12:35.320900</ts>
    <user>Dann</user>
    <text>`(require '[clojure.string :as c.s])`</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T13:14:15.321900</ts>
    <user>Lemuel</user>
    <text>This is for logging.  I have fully qualified symbols for rule names, and I'm logging a table of fire counts.  With the full namespace, it pushes the counts off the screen.</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T13:14:48.322500</ts>
    <user>Lemuel</user>
    <text>I've seen it in logging excpetions before...  I guess it wasn't in the new pretty errors, huh?</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T14:39:55.323800</ts>
    <user>Dann</user>
    <text>&lt;@Lemuel&gt; I know there are libraries that change default stack trace printing, and I'm sure each logging library has some way to alter how it prints packages</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T15:32:33.324500</ts>
    <user>Shonda</user>
    <text>&lt;@Lemuel&gt; that's default type behavior with logback setups. We have that here.</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T15:50:07.326400</ts>
    <user>Suanne</user>
    <text>I’m having a bit of trouble understanding why this code continues to realize the sequence:

&lt;https://pastebin.com/raw/XSsdrLqS&gt;

You can see a REPL session and clarifying question at the bottom.</text>
  </message>
  <message conversation_id="1033">
    <ts>2019-04-05T15:54:12.327100</ts>
    <user>Meagan</user>
    <text>```
(filter vampire?
           (map get-details ids))
```
`filter` forces the first lazy seq created by `map` to be realized</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T15:54:41.327400</ts>
    <user>Meagan</user>
    <text>IIRC how it works</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T15:54:52.327700</ts>
    <user>Meagan</user>
    <text>you'll need to use transducers if you want to chain them without realizing the whole seq</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T15:55:38.328100</ts>
    <user>Suanne</user>
    <text>Ok, I do not know what a transducer is at this point.</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T15:57:19.330000</ts>
    <user>Meagan</user>
    <text>transducers are a way of composing operations on lazy sequences like `map` `filter` etc.</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T15:57:52.330900</ts>
    <user>Evonne</user>
    <text>&lt;@Suanne&gt; See also “chunking”: &lt;http://www.tianxiangxiong.com/2016/11/05/chunking-and-laziness-in-clojure.html&gt;</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T15:59:12.332200</ts>
    <user>Suanne</user>
    <text>&lt;@Evonne&gt; Ah ok I think I see some chunking happening. Because if I give a very large range it only seems to realize the first 32 elements.</text>
  </message>
  <message conversation_id="1038">
    <ts>2019-04-05T16:20:23.332600</ts>
    <user>Faustino</user>
    <text>check this out… I wrote the Fibonacci Sequence in 3 different langs…</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T16:20:33.332900</ts>
    <user>Faustino</user>
    <text>&lt;https://github.com/natetech333/algorithms/blob/master/README.md&gt;</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T16:20:52.333300</ts>
    <user>Faustino</user>
    <text>feel free to comment on the github and improve it</text>
  </message>
  <message conversation_id="1039">
    <ts>2019-04-05T17:25:06.334500</ts>
    <user>Rosanna</user>
    <text>Are there any good clojure.tools.deps parallel test runners out there? Can’t seem to find any with a google search.</text>
  </message>
  <message conversation_id="1039">
    <ts>2019-04-05T17:28:00.334900</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/clojure/tools.deps.alpha/wiki/Tools&gt; collects a bunch of stuff</text>
  </message>
  <message conversation_id="1039">
    <ts>2019-04-05T18:00:14.335200</ts>
    <user>Rosanna</user>
    <text>Thanks! I’d looked in there but neither of the options for clojure supported running tests in parallel unfortunately.</text>
  </message>
  <message conversation_id="1037">
    <ts>2019-04-05T18:18:04.336800</ts>
    <user>Nedra</user>
    <text>has anyone ever ran `codox` from the command line, or otherwise in the absence of `boot` or `lein`?</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:51:53.338200</ts>
    <user>Lura</user>
    <text>How can I implement a protocol on a value (map with many keys) and retain the ability to update the map without losing the protocol?</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:53:48.338400</ts>
    <user>Dann</user>
    <text>this is what defrecord is for</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:54:48.338800</ts>
    <user>Lura</user>
    <text>The keys are namespaced, and optional, and numerous, the type of thing you would spec</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:55:04.339200</ts>
    <user>Lura</user>
    <text>Or are you suggesting (defrecord [m] …)</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:55:06.339400</ts>
    <user>Dann</user>
    <text>why would defrecord care about that?</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:55:44.340100</ts>
    <user>Dann</user>
    <text>what I mean, is you use defrecord to define a new map type which extends the protocols / interfaces you are targetting</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:56:09.340700</ts>
    <user>Dann</user>
    <text>it doesn't need to define any of those keys in its declaration - you are free to add any key you like</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:57:13.340900</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (defrecord Foo [x] Object (toString [this] (str "foo with x:" x)))
user.Foo
user=&amp;gt; (map-&amp;gt;Foo {:x 42 :bar/y 4 :z 22})
#user.Foo{:x 42, :bar/y 4, :z 22}
user=&amp;gt; (str *1)
"foo with x:42"

``` (fixed to include a namespaced key)</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:58:47.341300</ts>
    <user>Lura</user>
    <text>Thanks, you are right</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T19:59:00.341600</ts>
    <user>Lura</user>
    <text>(assoc *1 ::bar 43)
=&amp;gt; #user.Foo{:x 42, :y 4, :z 22, :user/bar 43}

I did not expect this to work</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T20:00:26.342100</ts>
    <user>Dann</user>
    <text>if you dissoc x, it downgrades to a hash-map, last I checked</text>
  </message>
  <message conversation_id="1040">
    <ts>2019-04-05T20:00:52.342400</ts>
    <user>Lura</user>
    <text>Yeah, so (defrecord [mandatory-id]…) and then we good</text>
  </message>
  <message conversation_id="1041">
    <ts>2019-04-05T21:27:35.343800</ts>
    <user>Elaine</user>
    <text>When I start &lt;#C03RZMDSH|datomic&gt; -ions + &lt;#C6N245JGG|shadow-cljs&gt; in the same repl, my JVM just freezes.
How can I debug this? I think that I'm running out of threads</text>
  </message>
  <message conversation_id="1042">
    <ts>2019-04-06T01:45:22.344000</ts>
    <user>Sixta</user>
    <text>I'm using eftest</text>
  </message>
  <message conversation_id="1042">
    <ts>2019-04-06T01:45:54.344200</ts>
    <user>Sixta</user>
    <text>Libraries don't need to explicitly support tools.deps, they just need to be a clojure library</text>
  </message>
  <message conversation_id="1042">
    <ts>2019-04-06T01:48:10.344400</ts>
    <user>Sixta</user>
    <text>&lt;https://github.com/weavejester/eftest/pull/51&gt; might help you</text>
  </message>
  <message conversation_id="1043">
    <ts>2019-04-06T06:19:00.344800</ts>
    <user>Johnson</user>
    <text>which platform does that run on? JVM can take quite a few threads so its unlikely you are running out?</text>
  </message>
  <message conversation_id="1041">
    <ts>2019-04-06T08:20:23.345000</ts>
    <user>Elaine</user>
    <text>It's a jvm11@linux. I'm using a i7 so there is 8vcpu.
When jvm freeze, it keep at "0%" of cpu usage.
When I query first, the start shadow, it keep compiling forever (web UI works, but do nothing about stop/start builds )
When I start shadow first, then query, the query freezes / lock my repl</text>
  </message>
  <message conversation_id="1041">
    <ts>2019-04-06T08:35:20.345200</ts>
    <user>Johnson</user>
    <text>can you be a bit more detailed and tell me what code exactly you execute?</text>
  </message>
  <message conversation_id="1041">
    <ts>2019-04-06T08:35:49.345400</ts>
    <user>Johnson</user>
    <text>I have basically never seen a JVM freeze so that sounds very weird to me</text>
  </message>
  <message conversation_id="1041">
    <ts>2019-04-06T08:41:23.345600</ts>
    <user>Johnson</user>
    <text>but in general: why are you running shadow-cljs as part of a datomic ion? that makes little sense to me?</text>
  </message>
  <message conversation_id="1041">
    <ts>2019-04-06T08:43:29.345800</ts>
    <user>Elaine</user>
    <text>It's just my dev setup. I like to keep everything in one repl.
At home I will try to make something reproducible</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:28:41.348300</ts>
    <user>Sebrina</user>
    <text>I could use a little help designing an algorithm. How would you go about transforming between the two formats? ```{:logger {:name :logger
          :deps [:render]}
 :render {:name :render
          :deps [:store]}
 :store {:name :store
         :deps [:router]}
 :router {:name :router
          :deps []}}

;; Would like to format as:

[[:router []]
 [:store  [:router]]
 [:render [:store]]
 [:logger [:render]]]
```</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:30:40.351000</ts>
    <user>Sebrina</user>
    <text>I implemented a gross solution in JS by first transforming the input into `{:router {:store {:render {:logger {}}}}}` then walking it again to build a list like the bottom. However, I feel like I’m making it messier\more complicated than it needs to be.</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:37:28.351600</ts>
    <user>Guy</user>
    <text>I am using the &lt;https://github.com/metosin/compojure-api/wiki/Component-integration#using-closures&gt; but how does this work in development env? In the case of `defroutes` it is a var and evaling(c-x c-e) changes just works. In the case of closure, I have to keep restarting the server.</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:41:13.351700</ts>
    <user>Fatima</user>
    <text>```
(reduce-kv (fn [res k v] (conj res [k (:deps v)])) [] input-map)
```</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:49:59.352000</ts>
    <user>Fatima</user>
    <text>```
(mapv (fn [[k v]] [k (:deps v)]) input-map)
```</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:54:47.352200</ts>
    <user>Fatima</user>
    <text>```
(mapv (juxt first (comp :deps second)) input-map)
```</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:57:00.352400</ts>
    <user>Alleen</user>
    <text>this doesn't give the right order &lt;@Fatima&gt;</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:57:33.352600</ts>
    <user>Fatima</user>
    <text>Ahh, order matters?</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:58:09.352800</ts>
    <user>Alleen</user>
    <text>I guess so, but can't speak for the OP</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T10:58:31.353000</ts>
    <user>Alleen</user>
    <text>the problem being solved here is topological sorting</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T11:00:43.353200</ts>
    <user>Alleen</user>
    <text>there's generic solutions e.g in loom &lt;https://cljdoc.org/d/aysylu/loom/1.0.2/api/loom.alg#topsort&gt;</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T11:02:00.353500</ts>
    <user>Fatima</user>
    <text>Ahhh, I thought it was simply transforming data format to another, which is quite trivial though. It’s likely that I didn’t get the point from the example. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T11:03:43.353800</ts>
    <user>Fatima</user>
    <text>But yeah, now looking at it it makes sense. I’d maybe look how integrant or component does that.</text>
  </message>
  <message conversation_id="1044">
    <ts>2019-04-06T11:04:06.354000</ts>
    <user>Alleen</user>
    <text>the algorithm is not very complex so it's not rare too see ad-hoc implementations in libraries having to do some kind of dependency resolution</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T11:26:14.358800</ts>
    <user>Tonya</user>
    <text>&lt;@Guy&gt; Component out-of-the-box needs a little setup to have it work well in a hot-reloading environment. I'm assuming you're using CIDER + Emacs, my setup defines reloading functionality for component called user/reset in dev/user.clj. Then I have key chord C-x C-r setup to call user/reset, which refreshes component. It works perfectly. For example, I could define some new functionality for a closure, test it with C-x C-e, and then hit C-x C-r to see the changes appear.</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T11:29:51.359400</ts>
    <user>Tonya</user>
    <text>&lt;@Guy&gt; This isn't my own idea it's based off the article: &lt;http://thinkrelevance.com/blog/2013/06/04/clojure-workflow-reloaded&gt;. Though the article won't get you all the way, if you follow through it and tinker with your emacs config for a bit, you'll be able to find a good solution. If you want to check out my .emacs config file I can send it over in a private message.</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T11:31:47.360200</ts>
    <user>Guy</user>
    <text>&lt;@Tonya&gt; Thanks for the link</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T11:32:55.361400</ts>
    <user>Guy</user>
    <text>I doing the same thing. I though there could be a better way since I have to keep firing (reset) all the time.</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T11:36:16.362700</ts>
    <user>Tonya</user>
    <text>&lt;@Guy&gt; yeah I hoped as well, if you find one message me about it. Though I think it's unsolvable due to components use of protocols.</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T11:41:37.364100</ts>
    <user>Tonya</user>
    <text>Here's my elisp code for resetting component.</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T11:48:52.364400</ts>
    <user>Sebrina</user>
    <text>Oops sorry for not being clear but yes, order does matter.</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T11:52:17.364600</ts>
    <user>Sebrina</user>
    <text>Thanks for the help, finding out the name of the algo for it is a ton of help!</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T12:49:41.365700</ts>
    <user>Guy</user>
    <text>&lt;@Tonya&gt; &lt;https://github.com/clojure-emacs/cider/blob/master/doc/miscellaneous_features.md#reloading-code&gt;</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T12:49:49.366000</ts>
    <user>Guy</user>
    <text>&lt;https://lambdaisland.com/blog/2018-02-09-reloading-woes&gt;</text>
  </message>
  <message conversation_id="1046">
    <ts>2019-04-06T12:51:36.366200</ts>
    <user>Guy</user>
    <text>None</text>
  </message>
  <message conversation_id="1046">
    <ts>2019-04-06T12:51:51.366600</ts>
    <user>Guy</user>
    <text>worked</text>
  </message>
  <message conversation_id="1046">
    <ts>2019-04-06T12:54:12.367500</ts>
    <user>Tonya</user>
    <text>&lt;@Guy&gt; so this will save and refresh component every time you reset buffer?</text>
  </message>
  <message conversation_id="1045">
    <ts>2019-04-06T12:54:16.367700</ts>
    <user>Tonya</user>
    <text>Thank you for the link.</text>
  </message>
  <message conversation_id="1046">
    <ts>2019-04-06T12:54:34.368200</ts>
    <user>Tonya</user>
    <text>Also what happens when there are errors in the saved buffer?</text>
  </message>
  <message conversation_id="1046">
    <ts>2019-04-06T12:59:19.368500</ts>
    <user>Guy</user>
    <text>&lt;@Tonya&gt; you can turn the logger on `*cider-ns-refresh-log*`</text>
  </message>
  <message conversation_id="1046">
    <ts>2019-04-06T13:00:22.369400</ts>
    <user>Guy</user>
    <text>now I change my code, do C-M-r, that does the magic.</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:07:28.371300</ts>
    <user>Sonny</user>
    <text>Is it possible to compose aliases in deps.edn? For example, if my `~/.clojure/deps.edn` contains a test alias (adding test directory to the path) and a cider alias (adding some cider libs), can I create a dev alias in my main project deps.edn which says, "switch on the test and cider aliases when dev is used"?</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:08:20.371500</ts>
    <user>Meagan</user>
    <text>I don’t believe so</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:08:45.372100</ts>
    <user>Meagan</user>
    <text>you can add them both in the args. e.g. `-A:test:cider`</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:08:51.372300</ts>
    <user>Meagan</user>
    <text>but you can’t create aggregates</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:09:29.372800</ts>
    <user>Meagan</user>
    <text>that would combine them by name like `-A:test-cider` like you’re saying</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:14:38.376400</ts>
    <user>Sonny</user>
    <text>Ok, thanks. What I was really trying to do here was to configure cider to start with the dev alias by setting `cider-clojure-cli-global-options` to `-A:dev` and then configure the dev profile on a per project basis. I suppose I can either just put all of the config in the project dev alias (little duplication, but nothing too worry too much about), or get into `.dir-locals.el` stuff, though emacs seems to complain about setting this the `cider-clojure-cli-global-options` variable in dir locals. Apparently it "may not be safe", but I am not sure exactly what determines that. Probably simpler to do the first thing I suppose.</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:15:27.376700</ts>
    <user>Meagan</user>
    <text>yeah. it’s super annoying to set those options right now in CIDER</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:15:32.376900</ts>
    <user>Meagan</user>
    <text>we should open up a ticket</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:15:43.377200</ts>
    <user>Meagan</user>
    <text>I hate that message that pops up everytime I open a new file :anguished:</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:17:05.378400</ts>
    <user>Sonny</user>
    <text>It does seem to give me an option to say, "Mark this variable as safe in the future", but I am not sure I understand _why_ it is unsafe. Something makes me anxious about overriding a message like this without fully understanding it :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:17:31.378700</ts>
    <user>Meagan</user>
    <text>one of the things I’ve noticed is sometimes those settings bleed between projects</text>
  </message>
  <message conversation_id="1047">
    <ts>2019-04-06T14:17:59.379100</ts>
    <user>Sonny</user>
    <text>Ahhh... yeah, that would be a little unsafe I guess :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1048">
    <ts>2019-04-06T15:23:52.380800</ts>
    <user>Becki</user>
    <text>If you cider jack in with a prefix argument you can edit the actual startup form. Makes it easy to tweak those without knowing which config to set</text>
  </message>
  <message conversation_id="1048">
    <ts>2019-04-06T15:30:27.381100</ts>
    <user>Meagan</user>
    <text>I just want to `SPC m '` and not think about it :upside_down_face:</text>
  </message>
  <message conversation_id="1049">
    <ts>2019-04-06T16:22:23.383300</ts>
    <user>Nieves</user>
    <text>Hello. I want to present you yet another nobody needed Clojure gebugging library :slightly_smiling_face: Which channel would be right for it?</text>
  </message>
  <message conversation_id="1050">
    <ts>2019-04-06T16:49:50.383800</ts>
    <user>Aubrey</user>
    <text>&lt;#C06MAR553|announcements&gt; ?</text>
  </message>
  <message conversation_id="1049">
    <ts>2019-04-06T16:51:01.384600</ts>
    <user>Nieves</user>
    <text>maybe, I'm not sure. thanks, I'l post it there</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T00:20:15.385500</ts>
    <user>Donetta</user>
    <text>quil looks neat - reminds me of SDL - is there anyone out there combining openjfx + quil in some way? (maybe with the new cljfx lib?)</text>
  </message>
  <message conversation_id="1052">
    <ts>2019-04-07T01:09:07.385800</ts>
    <user>Rosanna</user>
    <text>This is great. Thank you.</text>
  </message>
  <message conversation_id="1053">
    <ts>2019-04-07T11:46:12.388500</ts>
    <user>Valrie</user>
    <text>hey folks, just out of curiosity, why the indentation on clojure source code is so weird ? for example &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Ref.java&gt;</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:39:05.390300</ts>
    <user>Rosaline</user>
    <text>it is the style rich prefers, any in some places other slightly different formatted code has been patched in, and in general rich doesn't like patches that just fiddle with formatting</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:39:18.390500</ts>
    <user>Rosaline</user>
    <text>I forget the name of the style</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:41:12.391000</ts>
    <user>Rosaline</user>
    <text>it is vaguely similar to &lt;https://en.wikipedia.org/wiki/Indentation_style#GNU_style&gt;</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:42:06.391400</ts>
    <user>Valrie</user>
    <text>even gnu style has some indentation</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:42:54.392100</ts>
    <user>Rosaline</user>
    <text>that is why I said vaguely similar, I forget if it is exactly one of the named styles, or just an idiosyncratic style rich picked up</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:43:26.392600</ts>
    <user>Rosaline</user>
    <text>maybe more like whitesmith's above it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:44:14.392800</ts>
    <user>Valrie</user>
    <text>it's weird</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:44:45.393600</ts>
    <user>Valrie</user>
    <text>ofcourse it should looks fine to the author</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:45:04.394200</ts>
    <user>Rosaline</user>
    <text>it is not a modern style, sure</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:45:46.394800</ts>
    <user>Rosaline</user>
    <text>although, I guess what people usually use these days is basically k&amp;amp;r style which would hardly be called a "modern" style</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:47:22.395700</ts>
    <user>Valrie</user>
    <text>yeah but i never saw a style with no indentation. it just drive the programmer crazy i guess</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:49:58.397900</ts>
    <user>Rosaline</user>
    <text>Compiler.java is way worse on that front, because of patches with slightly different styles, and sometimes rich will put a block (like an if condition) around some code without re-indenting it, which I guess maybe makes diffs easier to read? I dunno</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:50:25.398400</ts>
    <user>Rosaline</user>
    <text>I think maybe the compiler even mixes tabs and spaces due to patches</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:51:17.398900</ts>
    <user>Valrie</user>
    <text>hmmm i'm kinda disappointed, i expected much more from clojure in this regard</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:52:00.400300</ts>
    <user>Rosaline</user>
    <text>it is there, it works well</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:52:51.401600</ts>
    <user>Valrie</user>
    <text>yeah , but it discourage other people to contribute or even read the code, and honestly clojure is not doing well in documentation so for some stuff you have to look at the code</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:53:05.401800</ts>
    <user>Rosaline</user>
    <text>then go write some docs</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:53:46.403000</ts>
    <user>Valrie</user>
    <text>yeah i know, but as far as i talked with people, clojure is not welcoming in regard to documentation specially in source code level</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:53:56.403400</ts>
    <user>Rosaline</user>
    <text>you are upset that someone did work and made it available to you for free, and you don't like the internals of it?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:54:34.404100</ts>
    <user>Valrie</user>
    <text>no i'm upset because clojure contribution policy is not friendly enough to people who willing to help</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:54:49.404700</ts>
    <user>Rosaline</user>
    <text>that is complicated</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:55:20.405800</ts>
    <user>Rosaline</user>
    <text>rich has different priorities from other people, and it is his party, so other people are unhappy about his decisions</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:55:26.406000</ts>
    <user>Valrie</user>
    <text>i'm reading the code anyway for my own sake, why not to fix it as i go along and even right some comments in the source code for the next guy ( which i common ) but yet ....</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:56:28.407500</ts>
    <user>Valrie</user>
    <text>you know, i'm wondering how other programming languages handle this situation  ?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:57:10.408600</ts>
    <user>Rosaline</user>
    <text>basically, you say "willing to help" but rich disgrees that help is needed or wanted in that direction (or that he wants to spend time managing the "help"), and that is taken as being hostile to contribution</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:57:28.409000</ts>
    <user>Valrie</user>
    <text>and at the end of the day it is simple, a guy like me make some patches and you as the author merge it if you like it and ask for change if you don't like it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:57:47.409300</ts>
    <user>Rosaline</user>
    <text>there is a third option there of course</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:58:02.409700</ts>
    <user>Rosaline</user>
    <text>just ignore you because I have other things to do</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:58:21.410400</ts>
    <user>Rosaline</user>
    <text>both of your options make a demand on the time of the author</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:58:22.410500</ts>
    <user>Valrie</user>
    <text>yeah unfortunately that's the current situation</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:58:35.410900</ts>
    <user>Rosaline</user>
    <text>to merge your work, or engage in dialog with you about it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:58:51.411500</ts>
    <user>Valrie</user>
    <text>but that's how free/open source software works</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T12:59:15.412100</ts>
    <user>Rosaline</user>
    <text>that is complicated</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:00:46.413500</ts>
    <user>Rosaline</user>
    <text>it is easy to see why you (or I) might prefer one of those two options, but it requires the maintainer of the project to pour even more time in to their project, and be managing contributions instead of developing their project</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:01:12.413900</ts>
    <user>Valrie</user>
    <text>i can see your point, but it's not a new problem</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:01:27.414400</ts>
    <user>Rosaline</user>
    <text>of course not</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:01:31.414600</ts>
    <user>Valrie</user>
    <text>there are bigger projects that have the same problem.</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:01:37.414800</ts>
    <user>Valrie</user>
    <text>linux kernel for example</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:02:02.415400</ts>
    <user>Valrie</user>
    <text>it's massive but they handle it much better that clojure</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:02:22.415900</ts>
    <user>Valrie</user>
    <text>i guess clojure core team can do a similar thing</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:02:43.416500</ts>
    <user>Valrie</user>
    <text>after all contribution can lead to good things</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:03:06.417000</ts>
    <user>Rosaline</user>
    <text>the linux kernel actually has companies that employee people entirely to work on it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:03:31.417700</ts>
    <user>Valrie</user>
    <text>yeah but they way they handle contribution is good</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:03:54.418500</ts>
    <user>Rosaline</user>
    <text>because they have the resources to devote to it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:04:28.419300</ts>
    <user>Rosaline</user>
    <text>clojure is many orders of magnitude smaller, and has, I think no full time resources whatsoever</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:04:53.419800</ts>
    <user>Rosaline</user>
    <text>maybe one person</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:05:03.420100</ts>
    <user>Rosaline</user>
    <text>but it isn't rich's job</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:05:55.421400</ts>
    <user>Valrie</user>
    <text>hmmm, it isn't rich's job, but at the same time he is the one that has the final saying on it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:06:04.421800</ts>
    <user>Valrie</user>
    <text>you can see the problem , right ?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:06:33.422500</ts>
    <user>Rosaline</user>
    <text>but you also see how it isn't a problem for rich, right?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:06:42.422700</ts>
    <user>Valrie</user>
    <text>yeah</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:06:53.423000</ts>
    <user>Valrie</user>
    <text>that's why i'm saying what linux does make sense here</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:07:00.423300</ts>
    <user>Rosaline</user>
    <text>it doesn't</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:07:26.424300</ts>
    <user>Rosaline</user>
    <text>organizational structure isn't free</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:07:51.424900</ts>
    <user>Valrie</user>
    <text>it does friend. in linux, Linus has the final saying, but there is subsystem who has several leaders who are responsible for managing the contributions and patches</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:08:09.425400</ts>
    <user>Valrie</user>
    <text>clojure can do the same</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:10:16.427000</ts>
    <user>Rosaline</user>
    <text>linus for example says he trusts most of the subsystem maintainers because he has been working with them for 5-15 years, clojure is 11 years old at this point</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:10:45.427700</ts>
    <user>Rosaline</user>
    <text>linus also spends most of time still managing those contributions</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:10:56.428000</ts>
    <user>Valrie</user>
    <text>yeah but even now there are people around rich who at least i know they are very involved with clojure</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:11:26.428500</ts>
    <user>Rosaline</user>
    <text>and linus is, as far as I know, paid to work on that fulltime</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:11:41.429100</ts>
    <user>Valrie</user>
    <text>yeah he is</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:13:05.429900</ts>
    <user>Rosaline</user>
    <text>it would be great if rich could work on clojure fulltime</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:13:46.430600</ts>
    <user>Rosaline</user>
    <text>he did spend maybe one or two years at the start(before it was made public?) working on it fulltime living off of his savings</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:15:30.432000</ts>
    <user>Rosaline</user>
    <text>which, in my experience, feels terrible. so I completely understand reluctance to be in a similar situation again.</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:15:55.432500</ts>
    <user>Valrie</user>
    <text>i can understand every thing you said</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:16:54.434000</ts>
    <user>Valrie</user>
    <text>but at the end of the day I'm pretty sure community will be helpful here, if he let them.</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:17:09.434200</ts>
    <user>Rosaline</user>
    <text>but it isn't that simple</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:18:48.435900</ts>
    <user>Rosaline</user>
    <text>"the community" wants a bigger stake in it, and wants rich to do more work, but the community hasn't bothered to figure out how it is going to pay him</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:18:49.436000</ts>
    <user>Valrie</user>
    <text>i agree</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:19:44.436800</ts>
    <user>Rosaline</user>
    <text>just figure out the latter part, the former part is nothing, as you say there are plenty of examples, etc to follow there</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:21:06.438300</ts>
    <user>Valrie</user>
    <text>hmm i'm not sure what you meant by "but the community hasn't bothered to figure out how it is going to pay him"</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:21:42.439000</ts>
    <user>Rosaline</user>
    <text>until then, it doesn't surprise me that when people charge in demanding change at the center nothing happens, but when people go out and build what they want without trying to make it some official project, good things happen (clojuredocs, this slack)</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:22:28.439900</ts>
    <user>Rosaline</user>
    <text>I mean this is an exchange right? you are demanding an awful lot without figuring out first what you are willing to exchang to get it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:22:49.440200</ts>
    <user>Valrie</user>
    <text>hmmm i don't know about that</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:23:10.440800</ts>
    <user>Rosaline</user>
    <text>you want something right?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:23:15.441100</ts>
    <user>Valrie</user>
    <text>I'm not demanding anything, I'm offering</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:23:31.441700</ts>
    <user>Rosaline</user>
    <text>but you are not happy when your offer isn't taken?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:23:41.442000</ts>
    <user>Valrie</user>
    <text>the source code has a problem, or somebody else has a good idea to add to clojure,</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:24:01.442800</ts>
    <user>Valrie</user>
    <text>it's not a demand though</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:24:12.443500</ts>
    <user>Rosaline</user>
    <text>but rich disagrees that it is a problem or that it is a good idea, or doesn't have the time to review it so ignores it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:24:13.443600</ts>
    <user>Leticia</user>
    <text>what  could be  the reason  for  httpkit to throw timeout  exception  on  a perfectly healthy request?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:24:30.444200</ts>
    <user>Leticia</user>
    <text>curl works just fine</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:24:59.444900</ts>
    <user>Rosaline</user>
    <text>people basically don't make offers like a queue though</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:25:09.445300</ts>
    <user>Rosaline</user>
    <text>if you offer to a queue, it either takes it or it doesn't</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:25:29.445900</ts>
    <user>Rosaline</user>
    <text>people make an "offer" and it is a demand on the attention of the person the offer is being made to</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:25:48.446400</ts>
    <user>Rosaline</user>
    <text>and people get offended when their "offer" is summarily rejected</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:26:06.447300</ts>
    <user>Rosaline</user>
    <text>so when people make an "offer" it is clearly more of a "demand"</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:26:34.448400</ts>
    <user>Rosaline</user>
    <text>and then their "offer" is summarily rejected, they want the process to change in some way</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:28:14.452100</ts>
    <user>Valrie</user>
    <text>hmmm, it doesn't seem right</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:28:55.454200</ts>
    <user>Rosaline</user>
    <text>basically what it comes down to is you want the process to change, rich is comfortable with the current process, and you won't offer him anything to induce him to change it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:29:19.455100</ts>
    <user>Valrie</user>
    <text>for example, i can read the code, after some struggles to understand it, i can just do my thing and forget about it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:29:21.455200</ts>
    <user>Marcia</user>
    <text>:100: :point_up:to everything &lt;@Rosaline&gt; said</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:29:25.455400</ts>
    <user>Marcia</user>
    <text>&amp;gt; It’s complicated</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:29:33.455800</ts>
    <user>Marcia</user>
    <text>&lt;@Rosaline&gt; also brings up another good point &lt;@Valrie&gt; -&amp;gt; if you see a certain benefit to changing the indentation / docs, why not make a separate project that will auto-indent Clojure core (ala `gofmt`)? That way, anybody interested can use your new tool, while it in no way breaks existing JIRA patches, etc. and doesn’t take up mental/time bandwidth of people who are not concerned about the indentation.</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:30:26.457700</ts>
    <user>Valrie</user>
    <text>I can ignore it but i can spend some time on it  ( for free and without any demand ) and make offer some improvements.</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:30:53.458400</ts>
    <user>Rosaline</user>
    <text>I think some kind of annotated source for clojure would be really great, I have a branch on my fork of the clojure repo on github where I started something like that, many years ago, but just didn't have the time/attention/whatever to finish it and keep it up</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:31:16.458800</ts>
    <user>Rosaline</user>
    <text>improvements from your point of view</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:31:47.459900</ts>
    <user>Valrie</user>
    <text>yes, but i'm not going to merge it you  know, like many other open sources projects, people can review it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:31:51.460100</ts>
    <user>Valrie</user>
    <text>it's so simple</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:32:23.461100</ts>
    <user>Valrie</user>
    <text>clojure is not a special case or anything, it's not the first FOSS project facing this problem nor the last one</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:32:48.461800</ts>
    <user>Valrie</user>
    <text>but there is a point to learn from history of other projects</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:32:55.462100</ts>
    <user>Valrie</user>
    <text>how they handled this case ?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:33:27.463100</ts>
    <user>Rosaline</user>
    <text>that is your perspective on it though, you see it has some kind of natural progression of a project</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:33:44.463400</ts>
    <user>Valrie</user>
    <text>&lt;@Marcia&gt; you have a point, but it doesn't summarized only in indentation</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:34:29.464800</ts>
    <user>Rosaline</user>
    <text>or keep an up to date branch with lots of comments that is so valuable that everyone references it all the time</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:35:46.466600</ts>
    <user>Valrie</user>
    <text>yeah i don't think me adding code to my own fork without review would be valuable for others to refer to</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:36:23.467500</ts>
    <user>Rosaline</user>
    <text>but you are willing to ask rich to maintain your comments</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:36:34.467900</ts>
    <user>Valrie</user>
    <text>no,</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:36:42.468400</ts>
    <user>Rosaline</user>
    <text>that is what your pr would be</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:36:48.468600</ts>
    <user>Valrie</user>
    <text>anyone who knows about clojure or an specific subject can review them</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:36:58.468900</ts>
    <user>Jasmine</user>
    <text>Let me make it really easy. This is not something that Rich or I want to spend time on, including spending time to explain or debate why we don’t want to spend time on it. We realize this probably makes some people unhappy. </text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:38:02.469200</ts>
    <user>Valrie</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:39:27.470400</ts>
    <user>Valrie</user>
    <text>good use of "end of discussion" :laughing: (joking)</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:39:48.471500</ts>
    <user>Jasmine</user>
    <text>Feel free to discuss all you like :)</text>
  </message>
  <message conversation_id="1054">
    <ts>2019-04-07T13:40:57.472800</ts>
    <user>Rosaline</user>
    <text>I think it is to some degree very telling, that none of the proposals are like "hey, rich laid a gold egg in clojure, how do we get him nice and happy and continuing to give us more eggs" and are all like "that goose that laid the golden egg is in the way of me doing what I want, how do we change the process so I can do what I want"</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:41:30.473600</ts>
    <user>Rosaline</user>
    <text>we can keep discussing it, because, for example, this slack isn't run by rich or alex</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:41:50.474000</ts>
    <user>Rosaline</user>
    <text>someone in the clojure community thought it would be neat and made it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:42:25.474800</ts>
    <user>Valrie</user>
    <text>yeah but there is no point discussing it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:42:43.475600</ts>
    <user>Valrie</user>
    <text>contribution is something that people in charge have to care about it to begin with</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:42:59.476200</ts>
    <user>Valrie</user>
    <text>us talking, wouldn't change anything</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:43:06.476300</ts>
    <user>Rosaline</user>
    <text>in charge of what?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:43:15.476700</ts>
    <user>Valrie</user>
    <text>source code and clojure in general</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:44:12.477500</ts>
    <user>Rosaline</user>
    <text>clojuredocs, for example was started and run for a long time without any connection with rich or "the people in charge"</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:44:32.478000</ts>
    <user>Rosaline</user>
    <text>(it may still be, I am not sure)</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:46:38.480100</ts>
    <user>Valrie</user>
    <text>hmmm what can i say, clojure "project" is not in any way special in compare to other FOSS projects. I'm pretty sure other projects faced the same issue. We ( i don't think i can say we anymore ) can either learn from them and open the door to other people who wants to help or can keep going like this and hope for the best.</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:47:11.480700</ts>
    <user>Valrie</user>
    <text>I hope that I'm wrong and the current workflow is the best way to do it</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:49:44.482800</ts>
    <user>Rosaline</user>
    <text>No project starts that way, so the question is, at what point did all the projects you are suggesting as examples change to allow for more delegation, and I would be shocked if that doesn't coincide with the fortunes of the original creator becoming more secure (via sponsorship, or patronage)</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:51:22.484900</ts>
    <user>Leticia</user>
    <text>i feel out of place with  my  down to  earth  questions, but  here’s another one: anybody had this problem when  &amp;lt;!! while blocked would prevent the shell  from responding to os sugnals, like ^C?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:51:25.485000</ts>
    <user>Valrie</user>
    <text>i don't know what to say anymore friend. you're putting a question mark on top of lots of FOSS software out there</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:53:14.486100</ts>
    <user>Rosaline</user>
    <text>no, I am just suggesting that if you want to see change the thing to work on is some way to pay rich and others to work on clojure fulltime, not lobbying them to change their process without offering anything in return</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:53:55.486800</ts>
    <user>Rosaline</user>
    <text>&lt;@Leticia&gt; the behavior will depend a lot on the repl you are using</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:55:09.488900</ts>
    <user>Rosaline</user>
    <text>for example nrepl repls are typically split in to client and server jvms, where you code is actually execute on the server jvm</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:55:17.489300</ts>
    <user>Valrie</user>
    <text>ok so you're saying that i should spend my time improving the code base, and pay the core members to consider my contribution ?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:55:24.489500</ts>
    <user>Rosaline</user>
    <text>so ^C on the client jvm may not do what you want</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:55:39.490100</ts>
    <user>Leticia</user>
    <text>it’s lein repl in a shell on macos</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:55:59.490500</ts>
    <user>Leticia</user>
    <text>pretty  default setup i think</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:56:03.490600</ts>
    <user>Rosaline</user>
    <text>&lt;@Valrie&gt; again, improving in your point of view</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:57:29.492200</ts>
    <user>Rosaline</user>
    <text>you've already made the judgment that your changes are good, so if they are not considered or not well received something is wrong</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:57:44.492500</ts>
    <user>Valrie</user>
    <text>no, i didn't say that</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:58:04.493200</ts>
    <user>Valrie</user>
    <text>as i mentioned before "reviewing the changes" is really important</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:58:06.493400</ts>
    <user>Rosaline</user>
    <text>you have used the word improve or improvement over and over again</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:59:04.495200</ts>
    <user>Valrie</user>
    <text>hmmmm i don't know any other word to use in this context</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T13:59:22.495600</ts>
    <user>Rosaline</user>
    <text>you are have a set of changes you would like someone to spend time reviewing and determining if they represent an improvement, and if the improvement covers the cost of maintenance</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:00:01.496500</ts>
    <user>Rosaline</user>
    <text>that is review is valuable work, for example it is part of the job I am paid to do</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:00:13.497200</ts>
    <user>Valrie</user>
    <text>hmmm you're missing the point of FOSS</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:00:38.497900</ts>
    <user>Rosaline</user>
    <text>is the point of foss that when you do work for free you get to demand that other people do work for free?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:00:59.498500</ts>
    <user>Valrie</user>
    <text>did i as for money ?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:01:09.499100</ts>
    <user>Rosaline</user>
    <text>I didn't say you did</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:01:10.499200</ts>
    <user>Valrie</user>
    <text>or did anybody asked anything in return ?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:01:31.500500</ts>
    <user>Rosaline</user>
    <text>I said you did work for free (your set of changes) and you are demanding that others do work for free (review those changes)</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:01:47.500900</ts>
    <user>Leticia</user>
    <text>speaking of code improvements and reviewing - linus had stopped looking at other people’s code directly  long time ago, he would only  pull updates from few trusted top-level maintainers. there’s just too many “improvements” everybody would like to suggest and only  24 hours in a day.</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:03:20.502200</ts>
    <user>Rosaline</user>
    <text>I would suggest you are missing the point of f/oss, in that the entire point is to give your the source to empower you to make the changes you want, it says nothing about forcing upstream to take in your changes</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:04:28.503000</ts>
    <user>Rosaline</user>
    <text>to quote the fsf's definition "“Free software” means software that respects users' freedom and community. Roughly, it means that the users have the freedom to run, copy, distribute, study, change and improve the software."</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:06:20.503800</ts>
    <user>Valrie</user>
    <text>hmmm we have a different perspective then</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:08:14.505100</ts>
    <user>Rosaline</user>
    <text>if your perspective is at odds with the fsf's view on the definition of free software then I wonder where it comes from</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:08:29.505600</ts>
    <user>Tammera</user>
    <text>Lein repl uses nREPl, so that should be interruptible </text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:11:50.509500</ts>
    <user>Valrie</user>
    <text>i believe in free software and everything in fact i'm a gnu contributor. but the way clojure source code is going forward is far from community base development. you're saying rich's time is important and other people have to pay him to review their changes which are made out of the desire to help</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:15:37.512900</ts>
    <user>Rosaline</user>
    <text>I am not say they have to, I am saying your perspective is completely ignoring the fact that he is a finite person and needs to work to live, and you are make demands on his time without in turn offering anything to him</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:16:28.514300</ts>
    <user>Valrie</user>
    <text>i'm aware of that, what i'm saying is "it's not have to be like it"</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:17:16.515400</ts>
    <user>Rosaline</user>
    <text>and I am saying that change is also something that takes review and work to achieve, and you are asking for it without providing any inducements</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:17:48.515800</ts>
    <user>Rosaline</user>
    <text>(changes to code, and changes to organization)</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:18:25.516300</ts>
    <user>Rosaline</user>
    <text>everyone wants to suggest changes, no one wants to provide a means to support those changes</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:19:39.516700</ts>
    <user>Valrie</user>
    <text>what type of support ? financial ?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:19:47.517000</ts>
    <user>Rosaline</user>
    <text>basically, yes</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:20:08.517700</ts>
    <user>Valrie</user>
    <text>that's where we are different</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:20:44.518800</ts>
    <user>Valrie</user>
    <text>If i had a company that uses clojure , I wouldn't hesitate to sponsor clojure</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:20:48.519100</ts>
    <user>Valrie</user>
    <text>in some degree</text>
  </message>
  <message conversation_id="1055">
    <ts>2019-04-07T14:21:27.520500</ts>
    <user>Rosaline</user>
    <text>like, it is easy to say, "hey linux has this structure, we shuld copy it"  but no one has said "hey, the X key figures in linux development are supported in ways Z, W, and Y, how can we do that for the X key clojure figures so clojure can have a process like linux's"</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:21:29.520600</ts>
    <user>Valrie</user>
    <text>but you shouldn't expect people to pay money to the author in return for considering some patches</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:21:52.520800</ts>
    <user>Rosaline</user>
    <text>why not though?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:22:51.522600</ts>
    <user>Valrie</user>
    <text>because the fact that i spend my free time working on clojure to help it grow ( even if i'm the only one thinking like this ) is enough. I have to live as well.</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:23:08.523100</ts>
    <user>Valrie</user>
    <text>i want to help others by any mean.</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:23:34.524100</ts>
    <user>Rosaline</user>
    <text>rich has already, as discussed, spent years of doing that fulltime, and continues to do that (but I guess not fulltime)</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:23:43.524500</ts>
    <user>Valrie</user>
    <text>if every FOSS project start charging thier contributors there would not be any FOSS project left anymore</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:23:54.524800</ts>
    <user>Rosaline</user>
    <text>so why can you demand he give more of his free time to review your change?</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:24:57.525900</ts>
    <user>Valrie</user>
    <text>what i'm saying is that like other project the author can trust some people and let them deal with these kind of stuff. or even</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:25:21.526600</ts>
    <user>Valrie</user>
    <text>like many other projects a third person can review the change first and leave his review</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:25:33.527200</ts>
    <user>Valrie</user>
    <text>it's not have to be just one person</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:25:36.527400</ts>
    <user>Rosaline</user>
    <text>what I am saying is you are doing the same thing again, just at another level removed</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:26:11.528600</ts>
    <user>Rosaline</user>
    <text>e.g. from the code level to the social/org level</text>
  </message>
  <message conversation_id="1051">
    <ts>2019-04-07T14:32:00.530500</ts>
    <user>Valrie</user>
    <text>anyway, we were discussing something that is not going to change.</text>
  </message>
  <message conversation_id="1056">
    <ts>2019-04-07T14:59:40.531400</ts>
    <user>Marguerita</user>
    <text>hey, does Clojure have a big boring web framework yet? something like Django or Rails</text>
  </message>
  <message conversation_id="1056">
    <ts>2019-04-07T15:00:24.531900</ts>
    <user>Valrie</user>
    <text>as far as i know luminus is the closest to what you're asking for</text>
  </message>
  <message conversation_id="1056">
    <ts>2019-04-07T15:05:51.532300</ts>
    <user>Marguerita</user>
    <text>thanks, I'll check it out :)</text>
  </message>
  <message conversation_id="1056">
    <ts>2019-04-07T15:18:06.532600</ts>
    <user>Jasmine</user>
    <text>Coast is a new thing like that</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:06:22.533400</ts>
    <user>Malik</user>
    <text>is there an equivalent in clojure for elixir's IO.inspect? &lt;https://hexdocs.pm/elixir/IO.html#inspect/2&gt;</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:06:50.534000</ts>
    <user>Malik</user>
    <text>something that prints the representation of a value and then also returns that value, so you can inject it in chains of calls to inspect values</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:07:12.534400</ts>
    <user>Malik</user>
    <text>I wrote my own but I figured there might be some way that already exists</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:07:14.534600</ts>
    <user>Malik</user>
    <text>```(defn- inspect
  ([v]
   (println v)
   v)
  ([message v]
   (println message v)
   v))
```</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:07:40.534800</ts>
    <user>Meagan</user>
    <text>i wish :upside_down_face:</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:08:23.535500</ts>
    <user>Malik</user>
    <text>I guess we're always cursed to miss things from other languages</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:08:32.535800</ts>
    <user>Meagan</user>
    <text>I write it in almost every project.</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:08:39.536000</ts>
    <user>Meagan</user>
    <text>I wish that’s what `tap&amp;gt;` did</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:10:09.536600</ts>
    <user>Malik</user>
    <text>organization-wise, do you keep like a util namespace in your projects for this sort of thing?</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:10:33.537000</ts>
    <user>Malik</user>
    <text>there are a bunch of simple useful things like this that I find myself adding</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:11:12.537600</ts>
    <user>Meagan</user>
    <text>i usually just define it kind of ad-hoc since I usually only need it while debugging</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:11:56.538500</ts>
    <user>Meagan</user>
    <text>in one of my projects I have it in a common `test.utils` ns because the test runner rarely prints helpful things, so I use it for finer-grained debugging in my tests</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:12:31.538700</ts>
    <user>Malik</user>
    <text>ahhh ok</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:12:38.538900</ts>
    <user>Malik</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1057">
    <ts>2019-04-07T17:12:45.539200</ts>
    <user>Malik</user>
    <text>that sounds reasonable</text>
  </message>
  <message conversation_id="1058">
    <ts>2019-04-07T17:59:07.540200</ts>
    <user>Tammera</user>
    <text>&lt;https://github.com/clojure/tools.trace&gt;</text>
  </message>
  <message conversation_id="1058">
    <ts>2019-04-07T18:00:05.540800</ts>
    <user>Tammera</user>
    <text>Is that what you are looking for ^^?</text>
  </message>
  <message conversation_id="1059">
    <ts>2019-04-07T20:03:49.545000</ts>
    <user>Suanne</user>
    <text>Can someone help me understand if I have found an error in Brave Clojure?

It gives an implementation of `partial`:

```
(defn my-partial
  [partialized-fn &amp;amp; args]
  (fn [&amp;amp; more-args]
    (apply partialized-fn (into args more-args))))
```

I wrote this function to use with it:

```
(defn print-args
  [&amp;amp; args]
  (loop [index 0]
    (println (format "arg #%d: %s" index (nth args index)))
    (if (&amp;lt; index (dec (count args)))
      (recur (inc index)))))
```

But it doesn’t seem to behave like the built-in `partial` and gives arguments out of order:

```
=&amp;gt; ((my-partial print-args "Today" "was" "a") "good" "day")
arg #0: day
arg #1: good
arg #2: Today
arg #3: was
arg #4: a
nil
```

As opposed to:

```
=&amp;gt; ((partial print-args "Today" "was" "a") "good" "day")
arg #0: Today
arg #1: was
arg #2: a
arg #3: good
arg #4: day
nil
```

I don’t understand why this happens because the implementation of `my-partial` seems correct to me. I don’t understand why the arguments are given out of order. The relevant line is `(into args more-args)`.</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:11:01.546000</ts>
    <user>Meagan</user>
    <text>`into` uses the semantics of whatever collection it’s collecting into. `&amp;amp; args` is a seq</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:11:44.546900</ts>
    <user>Suanne</user>
    <text>&lt;@Meagan&gt; And seqs have stuff pushed onto them?</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:11:51.547100</ts>
    <user>Meagan</user>
    <text>so when elements are added to the `args` seq, it adds them to the head</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:11:52.547300</ts>
    <user>Meagan</user>
    <text>yeah</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:12:34.547700</ts>
    <user>Suanne</user>
    <text>&lt;@Meagan&gt; Hmm. So the implementation in the book is actually wrong?</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:12:53.547900</ts>
    <user>Meagan</user>
    <text>could be</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:14:42.548500</ts>
    <user>Suanne</user>
    <text>&lt;@Meagan&gt; Here is the usage example in the book:

```
(def add20 (my-partial + 20))
(add20 3) 
; =&amp;gt; 23
```

This example works because addition is commutative, right? So either the author flubbed it or purposefully didn’t complicate the implementation and purposefully used a simple example where order didn’t matter.</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:14:58.548700</ts>
    <user>Meagan</user>
    <text>also they’re not using many args</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:15:14.549100</ts>
    <user>Meagan</user>
    <text>but yeah, pretty much</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:15:31.549400</ts>
    <user>Meagan</user>
    <text>I’m guessing it’s a mistake</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:16:16.550200</ts>
    <user>Suanne</user>
    <text>Yeah I would hope so because I’ve sank way too much time into trying to understand why I don’t get it. It’s probably a mistake.</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:17:57.550900</ts>
    <user>Meagan</user>
    <text>I think the easiest fix is to change `into` -&amp;gt; `concat`</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:20:14.551100</ts>
    <user>Suanne</user>
    <text>Yes, that does the trick!</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:20:20.551400</ts>
    <user>Suanne</user>
    <text>Thanks for the help.</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T20:31:22.553000</ts>
    <user>Suanne</user>
    <text>&lt;@Meagan&gt; I was about to submit a message to the repository of the book but it has dozens of issues and pull requests that haven’t been addressed in years, doesn’t seem worth the time. Now I’m starting to doubt the quality of this resource. But it’s been helpful so far so I guess I’ll stick with it a bit longer.</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T22:14:28.553400</ts>
    <user>Harold</user>
    <text>maybe you can repeat your question in the ghost town that is the &lt;#C0FM7N1SM|quil&gt; channel .</text>
  </message>
  <message conversation_id="1060">
    <ts>2019-04-07T23:01:30.554100</ts>
    <user>Shonda</user>
    <text>&lt;@Suanne&gt; it's a good resource, stick with it.</text>
  </message>
  <message conversation_id="1061">
    <ts>2019-04-08T04:18:28.555400</ts>
    <user>Clarine</user>
    <text>I’m trying to use `print-stack-trace` with GraalVM, but that doesn’t work since it has reflection issues (which can be resolved using type hints)</text>
  </message>
  <message conversation_id="1061">
    <ts>2019-04-08T04:30:25.555700</ts>
    <user>Clarine</user>
    <text>I’ll post a JIRA</text>
  </message>
  <message conversation_id="1061">
    <ts>2019-04-08T04:33:08.555900</ts>
    <user>Clarine</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-2502&gt;</text>
  </message>
  <message conversation_id="1062">
    <ts>2019-04-08T05:20:00.558100</ts>
    <user>Margit</user>
    <text>Does anybody know what is the motivation for having single-argument `=` arity in Clojure which always returns `true`? Is this a technical detail or is there a mathematical reason for it?</text>
  </message>
  <message conversation_id="1063">
    <ts>2019-04-08T07:00:36.561300</ts>
    <user>Jeannette</user>
    <text>how to spec a hashmap, whose keys are not specs themselves? say I need to provide spec for a hashmap whose keys are string literals and not keywords?  should I be using something other than spec/keys?</text>
  </message>
  <message conversation_id="1063">
    <ts>2019-04-08T07:04:29.563400</ts>
    <user>Jeannette</user>
    <text>I am using a multimethod that dispatches based on deriving the spec of an incoming message.</text>
  </message>
  <message conversation_id="1063">
    <ts>2019-04-08T07:05:39.563800</ts>
    <user>Jeannette</user>
    <text>should I just roll my own spec (with contains?) or is there something in the std library or a simple way of working with spec/keys that i am not aware of?</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:45:36.565200</ts>
    <user>Loria</user>
    <text>I suppose it's so you can do things like `(apply = coll)` to mean "are all elements in `coll` equal?" without having to treat the trivial 1-element case differently</text>
  </message>
  <message conversation_id="1062">
    <ts>2019-04-08T07:48:54.565500</ts>
    <user>Margit</user>
    <text>However, you still have to handle 0-element case explicitly, so I don't know if the victory is huge here.</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:49:53.565700</ts>
    <user>Loria</user>
    <text>yeah, I was about to say that "mathematically" it makes sense to have a 0-argument arity that always returns true also</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:50:18.565900</ts>
    <user>Margit</user>
    <text>I'm not sure it is obvious what 0 or 1-argument `=` should return.</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:50:53.566200</ts>
    <user>Loria</user>
    <text>but it might be problematic to have `=` not be the complement of `not=`</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:51:30.566400</ts>
    <user>Margit</user>
    <text>`not=` is derivative from `=`, it just follows suit</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:51:52.566600</ts>
    <user>Loria</user>
    <text>I think of `=` as saying "are my arguments all equal?"</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:51:54.566800</ts>
    <user>Margit</user>
    <text>However, `(not= 1) =&amp;gt; false` makes even less sense to me.</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:52:08.567000</ts>
    <user>Margit</user>
    <text>&amp;gt; I think of `=` as saying "are my arguments all equal?"
Are equal to what?</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:52:14.567200</ts>
    <user>Loria</user>
    <text>to each other</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:52:21.567400</ts>
    <user>Margit</user>
    <text>What if there is no other?</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:52:43.567600</ts>
    <user>Loria</user>
    <text>then it's trivially true</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:53:08.567800</ts>
    <user>Loria</user>
    <text>same reason why `&amp;lt;` has a 1-argument arity</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:53:35.568000</ts>
    <user>Loria</user>
    <text>which should make even less sense unless you think of it as saying "are my arguments all in ascending order?"</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:54:08.568300</ts>
    <user>Margit</user>
    <text>What you describe is actually different, it's "Doesn't the collection contain distinct elements?"</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:54:38.568500</ts>
    <user>Margit</user>
    <text>There is a place for a function that behaves like that, but it's a stretch to link that and `=`</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:55:16.568700</ts>
    <user>Margit</user>
    <text>&amp;gt; are my arguments all in ascending order?
That interpretation of &amp;lt; makes sense, so I don't question it.</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:58:04.568900</ts>
    <user>Loria</user>
    <text>well, the alternative would be to throw an exception, which makes things harder to reason about</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T07:59:00.569100</ts>
    <user>Loria</user>
    <text>I think it's also convention among other lisps to define `=` in this way</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T08:00:06.569300</ts>
    <user>Margit</user>
    <text>In contrast, it would catch mistakes like `(= value #_missing-comparison)`.</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T08:00:28.569500</ts>
    <user>Margit</user>
    <text>&amp;gt; I think it's also convention among other lisps to define `=` in this way
Yeah, that is a valid argument.</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T08:01:12.569700</ts>
    <user>Margit</user>
    <text>However, all from eq/eql/equal variety expect exactly 2 arguments.</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T08:11:21.571100</ts>
    <user>Jasmine</user>
    <text>You could use s/conformer to keywordize, then use s/keys</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T08:11:52.571900</ts>
    <user>Jasmine</user>
    <text>Right now, we don’t have anything to specifically support keys as strings</text>
  </message>
  <message conversation_id="1064">
    <ts>2019-04-08T08:19:11.572100</ts>
    <user>Jeannette</user>
    <text>thx</text>
  </message>
  <message conversation_id="1065">
    <ts>2019-04-08T10:07:43.574100</ts>
    <user>Mariela</user>
    <text>```
&amp;gt; (-&amp;gt; '[^int? ^some? a] first meta)
{:tag int?}
```

Is `^some?` swallowed (lost) here?

(I realise it is not expected to pass functions as metadata, but I'm developing a little sth)</text>
  </message>
  <message conversation_id="1065">
    <ts>2019-04-08T10:10:16.575400</ts>
    <user>Harris</user>
    <text>well, `^foo bar` is the same as `^{:tag 'foo} bar`, and `^foo bar baz` is the same as `^{:tag 'foo} ^{:tag 'bar} baz`, which is semantically `(with-meta (with-meta baz {:tag 'bar}) {:tag 'foo})`</text>
  </message>
  <message conversation_id="1065">
    <ts>2019-04-08T10:10:29.575800</ts>
    <user>Harris</user>
    <text>so it's not "lost", you're overriding it</text>
  </message>
  <message conversation_id="1065">
    <ts>2019-04-08T10:10:52.576200</ts>
    <user>Harris</user>
    <text>(same as doing `(assoc (assoc {} :foo 1) :foo 2)`)</text>
  </message>
  <message conversation_id="1065">
    <ts>2019-04-08T10:12:00.576500</ts>
    <user>Deb</user>
    <text>I think the tools.logging library has a functions like that called `spy` and `spyf`. &lt;@Malik&gt;</text>
  </message>
  <message conversation_id="1066">
    <ts>2019-04-08T10:15:37.577000</ts>
    <user>Deb</user>
    <text>&lt;@Valrie&gt; Maybe the author was traumatized by OOP, and in order to repress the painful memories, indents the code as if the `class` line does not exist.</text>
  </message>
  <message conversation_id="1065">
    <ts>2019-04-08T10:16:05.577200</ts>
    <user>Mariela</user>
    <text>Great expl! Thanks</text>
  </message>
  <message conversation_id="1067">
    <ts>2019-04-08T10:47:51.577900</ts>
    <user>Latonya</user>
    <text>If you wanted to start a repository that was a fork of the Clojure source code, retaining its original license, and added comments and reformatted code, and added documentation, you may be able to find others interested in answering questions or providing review comments, or even contributing to such a repository.  It seems unlikely that Rich Hickey would be one of the people willing to spend time on that project, though.</text>
  </message>
  <message conversation_id="1067">
    <ts>2019-04-08T10:48:13.578100</ts>
    <user>Latonya</user>
    <text>There are other people besides Rich who know at least parts of that implementation quite well.</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T10:57:47.578300</ts>
    <user>Malik</user>
    <text>ahhh cool, very similar to what I want</text>
  </message>
  <message conversation_id="1067">
    <ts>2019-04-08T10:58:14.578500</ts>
    <user>Valrie</user>
    <text>Yeah i wanted to do that but kinda think that the problem is in people's view of the whole thing</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:30:45.579300</ts>
    <user>Wilford</user>
    <text>I’m trying to pass a custom deftype over a core.async channel, and it seems to coming out of the other side as a seq, losing its type information and structure.</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:30:59.579700</ts>
    <user>Wilford</user>
    <text>Is this a known thing, or is there something I’m missing?</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:32:17.579900</ts>
    <user>Jasmine</user>
    <text>doesn't ring a bell</text>
  </message>
  <message conversation_id="1069">
    <ts>2019-04-08T11:35:47.580100</ts>
    <user>Jasmine</user>
    <text>```user=&amp;gt; (require '[clojure.core.async :as a])
nil
user=&amp;gt; (deftype Foo [x])
user.Foo
user=&amp;gt; (def c (a/chan 1))
#'user/c
user=&amp;gt; (a/&amp;gt;!! c (-&amp;gt;Foo 1))
true
user=&amp;gt; (def c2 (a/&amp;lt;!! c))
#'user/c2
user=&amp;gt; (class c2)
user.Foo
user=&amp;gt; (ancestors (class c2))
#{clojure.lang.IType java.lang.Object}
user=&amp;gt; (.-x c2)
1
```</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:35:53.580300</ts>
    <user>Jasmine</user>
    <text>looks fine to me with a simple test</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:37:12.580600</ts>
    <user>Wilford</user>
    <text>Yeah, I think I’ve worked it out</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:37:27.581000</ts>
    <user>Wilford</user>
    <text>this particular deftype implements ISeq</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:37:56.581600</ts>
    <user>Wilford</user>
    <text>That seems to be enough for it to treated as one — if I remove that implementation it makes it through intact</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:38:24.581900</ts>
    <user>Harris</user>
    <text>I think I know what's going on</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:39:06.582200</ts>
    <user>Harris</user>
    <text>can you give me a small repro for this?</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:39:45.582400</ts>
    <user>Wilford</user>
    <text>hold on</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:43:15.582700</ts>
    <user>Wilford</user>
    <text>&lt;https://gist.github.com/clarkema/48da41fb5cf720f7f5bbba2428d5299a&gt;</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:43:27.583000</ts>
    <user>Wilford</user>
    <text>try that as is, and then comment out the iseq implementation</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:45:03.583200</ts>
    <user>Harris</user>
    <text>ty</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:45:58.583600</ts>
    <user>Harris</user>
    <text>yeah so this is not what it appears to be ;)</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:46:05.583800</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; (-&amp;gt;Segment 0 :foo [1 2 3])
(1 2 3)
user=&amp;gt; (class (-&amp;gt;Segment 0 :foo [1 2 3]))
user.Segment```</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:46:10.584000</ts>
    <user>Harris</user>
    <text>nothing at all with `core.async`</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:46:27.584400</ts>
    <user>Harris</user>
    <text>it's just that print-dup gives priority to `ISeq` over `IType`</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:46:34.584700</ts>
    <user>Harris</user>
    <text>so the object is printed as if it was a seq</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:47:03.585200</ts>
    <user>Harris</user>
    <text>print-dup or whatever is responsible for printing here, I can never remember what does what</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:47:12.585400</ts>
    <user>Harris</user>
    <text>one of those multimethods anyway</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:47:25.585600</ts>
    <user>Wilford</user>
    <text>hmm</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:47:36.586100</ts>
    <user>Harris</user>
    <text>which is weird because I thought there were appropriate prefer-methods</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:47:38.586400</ts>
    <user>Harris</user>
    <text>let me check</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:47:41.586500</ts>
    <user>Wilford</user>
    <text>this actually cropped up because I’m trying to match on it (using core.match) on the other side of the channel</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:48:17.587200</ts>
    <user>Harris</user>
    <text>looks like the prefer-methods is just for records, not types</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:48:29.587600</ts>
    <user>Marlyn</user>
    <text>printing what you took out of the channel can make it look like types are being lost</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:49:03.588300</ts>
    <user>Marlyn</user>
    <text>but they're not</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:49:59.588700</ts>
    <user>Wilford</user>
    <text>yeah, it does still have the correct type</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:50:08.589200</ts>
    <user>Wilford</user>
    <text>so something else is being weird</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:50:26.589600</ts>
    <user>Harris</user>
    <text>well you've told clojure that Segment is a seq so it's printing it using the seq printer</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:50:39.590100</ts>
    <user>Harris</user>
    <text>arguably not the best behavior but that's how it works now</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:51:11.590600</ts>
    <user>Harris</user>
    <text>if the type is definitely getting lost maybe you have something that tries to pr-str/read-string the value?</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:51:49.591000</ts>
    <user>Wilford</user>
    <text>it’s possible that it’s actually to do with the match treating it as a seq</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:52:08.591200</ts>
    <user>Harris</user>
    <text>likely</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:52:21.591500</ts>
    <user>Harris</user>
    <text>you should probably make that type seqable instead of a seq directly if you can</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:54:01.591800</ts>
    <user>Wilford</user>
    <text>I think I can live without it being a seq; it was mostly for completness</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:54:07.592000</ts>
    <user>Wilford</user>
    <text>Kind of a weird interaction though</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T11:55:58.592200</ts>
    <user>Wilford</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1070">
    <ts>2019-04-08T12:51:14.593500</ts>
    <user>Becki</user>
    <text>I guess that explains why a lot of things implement a “to seq” style rather than directly implement seq </text>
  </message>
  <message conversation_id="1070">
    <ts>2019-04-08T12:52:00.594700</ts>
    <user>Becki</user>
    <text>I remember a comment in core match about destructing problems since the types implemented both seq and assoc protocols</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T13:22:22.595100</ts>
    <user>Dann</user>
    <text>if you use `Control-\` or use jstack you can trigger a dump of the stack traces of all running threads. My hunch is that something is running and not getting expected input.</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T13:27:05.595300</ts>
    <user>Dann</user>
    <text>If it helps, this is very close to being an adjacency-list / tree transform, which is well studied and well documented. And loom itself has code that turns a tree into an adjacency list and visa versa (every tree can be converted to an adjacency list, an adjacency list can only be converted to a tree if its graph is non-cyclical, directed, and each node has only one incoming link)</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T13:40:43.597100</ts>
    <user>Harris</user>
    <text>yes, the general advice is to make types ISeqable instead of ISeq, when you care about them being more than simple seqs</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T13:41:38.598400</ts>
    <user>Harris</user>
    <text>which doesn't really make the type less powerful since most collections operate on seqables instead of just on seqs</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T14:44:11.598600</ts>
    <user>Sebrina</user>
    <text>Thanks &lt;@Dann&gt;. Learning the term helped me find a section about it in an algorithms text book I impulsively bought but never used. After reading that section then watching a youtube talk on topological sorting I was able to implement a depth-first-search topological sort for directed-acyclic-graphs on my own :smile:</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T14:44:38.598800</ts>
    <user>Dann</user>
    <text>nice</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T14:45:59.599000</ts>
    <user>Dann</user>
    <text>adjacency-lists are especially useful in a language with immutable data structures, as they allow cycles and complex nested updates without doing a tree worth of mutations</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T14:48:27.599200</ts>
    <user>Sebrina</user>
    <text>Ah that makes sense, the book’s solution used an AdjacencyList but it also used a mutable list to track what was visited. I’m not quite sure how to handle that part in an immutable language without something like an atom.</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T14:49:12.599400</ts>
    <user>Sebrina</user>
    <text>Actually I take that back. The recursive function would need to return the updated sorted list and the updated visited list is all.</text>
  </message>
  <message conversation_id="1068">
    <ts>2019-04-08T15:01:21.599600</ts>
    <user>Dann</user>
    <text>precisely - we can use normal updating / recursion tricks, and it's simplified since it's flattened</text>
  </message>
  <message conversation_id="1071">
    <ts>2019-04-08T16:40:26.602400</ts>
    <user>Margit</user>
    <text>Did anyone ever have a problem that JVM doesn't flush SoftReferences even when the heap is 99% occupied, and everything is spinning in FullGC most of the time? I'm using hot Java recompilation heavily which inflates DynamicClassLoader's `classCache`, and it never clears.</text>
  </message>
  <message conversation_id="1072">
    <ts>2019-04-08T17:00:48.603100</ts>
    <user>Rosaline</user>
    <text>the simplest explanation is your soft refs are being held strongly somewhere</text>
  </message>
  <message conversation_id="1071">
    <ts>2019-04-08T17:12:11.603600</ts>
    <user>Margit</user>
    <text>Nope, they are not. Explicitly triggering OutOfMemoryError clears them out.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:15:28.603900</ts>
    <user>Jasmine</user>
    <text>well DCL only clears cache when you define a new class</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:15:39.604200</ts>
    <user>Jasmine</user>
    <text>due to Java recomp are you never defining new classes?</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:15:53.604400</ts>
    <user>Jasmine</user>
    <text>and thus never triggering a clear?</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:17:14.605100</ts>
    <user>Margit</user>
    <text>&amp;gt; due to Java recomp are you never defining new classes?
It's the opposite, I define new classes all the time with `defineClass`.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:18:35.605400</ts>
    <user>Margit</user>
    <text>I'm using Virgil, here's how a class gets defined there: &lt;https://github.com/ztellman/virgil/blob/master/src/virgil/compile.clj#L129&gt;</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:21:15.607600</ts>
    <user>Margit</user>
    <text>In fact it might not even be related to Virgil/Java compilation as I'm using tools.namespace too, and the main contributors to inflated heap seem to be some big data objects that are referenced by Clojure function classes, which are in turn kept around by `classCache`.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:22:32.609100</ts>
    <user>Margit</user>
    <text>I took a heap dump of the application, and MAT couldn't find any live paths to GC roots from those big objects. FullGC was doing nothing. However, as soon as manually triggered OOM, those softrefs successfully disappeared.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:28:21.610400</ts>
    <user>Rosaline</user>
    <text>when you say "explicitly triggering an outofmemoryerror" what mechanism are you using to do that?</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:28:37.610800</ts>
    <user>Margit</user>
    <text>&lt;@Jasmine&gt; Interestingly enough, right now the `DynamicClassLoader.rq` is empty, but those SoftReferences are still there.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:28:44.611300</ts>
    <user>Margit</user>
    <text>&lt;@Rosaline&gt; `(long-array 5e8)`</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:28:57.611600</ts>
    <user>Rosaline</user>
    <text>and on what thread are you raising that exception, and what happens if you raise a different exception on that thread?</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:30:43.612300</ts>
    <user>Margit</user>
    <text>Just the REPL thread. Other exceptions won't do anything.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:30:48.612500</ts>
    <user>Margit</user>
    <text>I learned that trick here: &lt;https://stackoverflow.com/questions/3785713/how-to-make-the-java-system-release-soft-references/3810234#3810234&gt;</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:33:48.614700</ts>
    <user>Rosaline</user>
    <text>it sounds like you are allocating small enough amounts of memory that the full gc recovers a very small amount about that seems to be enough so refs aren't cleared, and then you allocate again, so full gc runs again, etc</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:34:12.615200</ts>
    <user>Rosaline</user>
    <text>either increase or decrease your heap size</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:34:16.615300</ts>
    <user>Margit</user>
    <text>Yep, it looks exactly like what is happening.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:34:55.616000</ts>
    <user>Rosaline</user>
    <text>(or fiddle with gc tuning params)</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:37:10.618300</ts>
    <user>Margit</user>
    <text>I doubt changing the heap size would work here, it's currently set to 7g for devtime, and the leak manifests itself very slowly, it takes hundreds of reloads before the heap becomes occupied enough to cause lags and hangups. And it never goes past it, I was at 100% OldGen util, and it still refused to give up those SoftRefs.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:38:25.620100</ts>
    <user>Margit</user>
    <text>&amp;gt; (or fiddle with GC tuning params)
That one could possibly work, yet it is still strange to me that such behavior could be the default. Maybe switching a GC would help, but I don't want to move away from ParGC during development.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:39:10.620900</ts>
    <user>Rosaline</user>
    <text>if it is what I described the issue is in the relationship between the gc cycles and the mutator cycles, it isn't an issue of heap size per se, but changing the heap size will change the gc cycle and hopefully break the relationship</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:40:37.622100</ts>
    <user>Rosaline</user>
    <text>you may want to try g1</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:41:58.623000</ts>
    <user>Margit</user>
    <text>I prefer a predictable GC in development, but this is subjective and another story. Thanks for the help, anyway.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:41:59.623100</ts>
    <user>Rosaline</user>
    <text>as of java 9 g1 is the default collector</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-08T17:51:59.623800</ts>
    <user>Jasmine</user>
    <text>in java 12, I know the new ZGC actually has support for parallel class unloading, which might be helpful for you</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:52:32.624400</ts>
    <user>Jasmine</user>
    <text>in general though, I'd say this is a level of gc tuning that I am aware of, but not an expert in :)</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:57:07.626700</ts>
    <user>Margit</user>
    <text>Interesting, I didn't link this problem to class unloading. They could indeed be related. I gonna study the GC logs, see if there's a mention of it there.</text>
  </message>
  <message conversation_id="1073">
    <ts>2019-04-08T17:59:12.627600</ts>
    <user>Margit</user>
    <text>On a different note, I had a huge success running Clojure with ShenandoahGC, hope to write about it someday.</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-08T18:04:41.627800</ts>
    <user>Jasmine</user>
    <text>would love to read that</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-08T18:04:56.628100</ts>
    <user>Jasmine</user>
    <text>would make a great conj talk ;)</text>
  </message>
  <message conversation_id="1075">
    <ts>2019-04-09T04:35:10.631600</ts>
    <user>Aubrey</user>
    <text>Hot damn the cognitect-aws API is good! Never before had done any AWS API work (I barely even know how AWS works), and I managed to cobble together a working Route53 utlity namespace in about an hour. Love it!</text>
  </message>
  <message conversation_id="1075">
    <ts>2019-04-09T04:41:31.633100</ts>
    <user>Latonya</user>
    <text>There was a project years back where someone did such a thing, and in particular they were trying to create a "literate programming" version of the Clojure source code.  They made some progress, and their work is probably still available in the public somewhere, but it is likely for a version of Clojure that is not the most recent, e.g. maybe the part that was done is up to date for Clojure 1.4 or so.  I may be misunderstanding what your goal is, but realize that detailed documentation of such a code base is many, many person-months of effort.  Not everyone may share your desire to spend such time on it.</text>
  </message>
  <message conversation_id="1075">
    <ts>2019-04-09T04:44:29.633300</ts>
    <user>Latonya</user>
    <text>Here is a link to the one I have heard about, last updated in 2012: &lt;https://github.com/daly/literateclojure&gt;   You can search for Tim Daly's name on the Clojure Google group for messages from around that time for some discussion of it.</text>
  </message>
  <message conversation_id="1076">
    <ts>2019-04-09T05:25:32.633700</ts>
    <user>Valrie</user>
    <text>Thanks man. But it is not going to work. The vision of people is wrong about FOSS that's why it is not going to work.</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T05:53:24.634900</ts>
    <user>Jaimee</user>
    <text>So, this:
```
        labels-probs (sort-by :score &amp;gt;=
                              (map #(do {:score %2 :label %1})
                                   labels clean-probs))
```

gives me a
```
java.lang.IllegalArgumentException: Comparison method violates its general contract!
        at java.util.TimSort.mergeHi(TimSort.java:899)
        at java.util.TimSort.mergeAt(TimSort.java:516)
        at java.util.TimSort.mergeCollapse(TimSort.java:439)
        at java.util.TimSort.sort(TimSort.java:245)
        at java.util.Arrays.sort(Arrays.java:1438)
        at clojure.core$sort.invokeStatic(core.clj:3115)
        at clojure.core$sort_by.invokeStatic(core.clj:3119)
        at clojure.core$sort_by.invoke(core.clj:3119)
        at closs.stages.classifiers$parse_results_threshold.invokeStatic(classifiers.clj:26)
```

error, but clean-probs is entirely made of floats, I'm confused...</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T05:54:17.635300</ts>
    <user>Margit</user>
    <text>&lt;@Jaimee&gt; There must be a NaN somewhere in the values.</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T05:55:29.635900</ts>
    <user>Margit</user>
    <text>NaN's cannot be compared, so the sorting algorithm freaks out.
```
user=&amp;gt; [(= ##NaN ##NaN) (&amp;gt; ##NaN ##NaN) (&amp;lt; ##NaN ##NaN)]
[false false false]
```</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T05:56:14.636300</ts>
    <user>Jaimee</user>
    <text>Ok I will try using Double/isNaN to filter them out</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T05:56:17.636500</ts>
    <user>Jaimee</user>
    <text>thank you</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:01:08.637000</ts>
    <user>Jaimee</user>
    <text>&lt;@Margit&gt; can an underflow error lead to this also ?</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:01:54.637800</ts>
    <user>Jaimee</user>
    <text>Because even if I filter the NaN out, it still crashes, I printed the vector I have no NaN in my vector, but `8.690312E-37` (among other)</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:04:26.638700</ts>
    <user>Margit</user>
    <text>I don't know if underflow can cause this, but this doesn't look like an underflow to me. This number is within float range it seems.
```
user=&amp;gt; Float/MIN_VALUE
1.4E-45
```</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:04:35.639100</ts>
    <user>Margit</user>
    <text>Could you post your vector?</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:05:00.639700</ts>
    <user>Jaimee</user>
    <text>```
(0.0 0.0 0.0 0.0 0.0 3.6712243E-31 0.0 0.0 0.0 1.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 3.2708435E-36 0.0 0.0 0.0 0.0 1.6565916E-12 0.0 1.0 0.0 8.690312E-37 0.0 1.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0)
(0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0 0.0 5.2775614E-29 1.0 6.7907166E-7 0.0 0.0 0.0 0.0 3.689431E-32 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0)
```</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:05:34.640400</ts>
    <user>Jaimee</user>
    <text>Can it be that `println` replaces values randomly ?</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:06:34.641000</ts>
    <user>Margit</user>
    <text>Could as well exclude that possibility, try `pr` instead of `println`</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:07:47.641500</ts>
    <user>Margit</user>
    <text>Try sorting `(take 10 ...)` of your sequence, will it still fail?</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:11:27.641700</ts>
    <user>Jaimee</user>
    <text>No</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:13:02.643200</ts>
    <user>Margit</user>
    <text>I would do a poor man's binary search here to try to figure out who's to blame. Something like `(-&amp;gt;&amp;gt; (partition-all 10 values) (map #(do (println "Sorting %") (sort %)))`.</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:13:46.643500</ts>
    <user>Jaimee</user>
    <text>I will try that, thank you for the help</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:14:13.644000</ts>
    <user>Margit</user>
    <text>You are welcome, will be interesting to know what was the problem in the end</text>
  </message>
  <message conversation_id="1074">
    <ts>2019-04-09T06:15:29.644800</ts>
    <user>Jaimee</user>
    <text>Yeah I think I won't have a choice than diving in because the problem is not even determinist it seems</text>
  </message>
  <message conversation_id="1077">
    <ts>2019-04-09T07:21:45.645500</ts>
    <user>Latonya</user>
    <text>You may want to check for Float/isNaN, too.  I think maybe Double/isNaN only checks for NaN's of type Double, so will not find any Float NaN values, if you have any in your data.</text>
  </message>
  <message conversation_id="1077">
    <ts>2019-04-09T07:23:49.646200</ts>
    <user>Latonya</user>
    <text>Never mind, some experiments I just ran at the REPL indicate that Double/isNaN returns true regardless of whether you give it a NaN of type Double or Float.</text>
  </message>
  <message conversation_id="1077">
    <ts>2019-04-09T07:35:33.647700</ts>
    <user>Latonya</user>
    <text>This StackOverflow answer mentions that someone encountered this exception when sorting float and/or double values, but that seems odd to me that the floating point values are not given a total order by the default comparator: &lt;https://stackoverflow.com/a/33971198&gt;</text>
  </message>
  <message conversation_id="1077">
    <ts>2019-04-09T07:36:35.648100</ts>
    <user>Latonya</user>
    <text>Do you perhaps have a mix of some Float and some Double values in your data?</text>
  </message>
  <message conversation_id="1078">
    <ts>2019-04-09T08:06:32.648500</ts>
    <user>Cherise</user>
    <text>Does anyone have experience logging to Stackdriver using clojure.tools/logging?</text>
  </message>
  <message conversation_id="1078">
    <ts>2019-04-09T08:07:51.649400</ts>
    <user>Cherise</user>
    <text>Using the standard appender does not do anything

Dependencies:
```
                 [ch.qos.logback/logback-classic "1.2.3" :exclusions [org.slf4j/slf4j-api]]
                 [org.slf4j/slf4j-api "1.7.26"]
                 [org.slf4j/jul-to-slf4j "1.7.25"]
                 [org.slf4j/jcl-over-slf4j "1.7.25"]
                 [org.slf4j/log4j-over-slf4j "1.7.26"]
                 [org.clojure/tools.logging "0.4.1"]

                 ;; Stackdriver
                 [com.google.cloud/google-cloud-logging-logback "0.87.0-alpha"]]
```

Logback.xml:
```
&amp;lt;!-- &lt;https://cloud.google.com/logging/docs/setup/java&gt; --&amp;gt;
&amp;lt;appender name="STACKDRIVER" class="com.google.cloud.logging.logback.LoggingAppender"&amp;gt;
  &amp;lt;!-- Optional : filter logs at or above a level --&amp;gt;
  &amp;lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&amp;gt;
    &amp;lt;level&amp;gt;INFO&amp;lt;/level&amp;gt;
  &amp;lt;/filter&amp;gt;
  &amp;lt;!-- Batched logging requests get immediately flushed for logs at or above this level --&amp;gt;
  &amp;lt;flushLevel&amp;gt;WARN&amp;lt;/flushLevel&amp;gt;
&amp;lt;/appender&amp;gt;
```</text>
  </message>
  <message conversation_id="1078">
    <ts>2019-04-09T08:11:14.649700</ts>
    <user>Cherise</user>
    <text>Nevermind they do show up, but in another log</text>
  </message>
  <message conversation_id="1078">
    <ts>2019-04-09T08:11:30.650100</ts>
    <user>Cherise</user>
    <text>The default “java.log”</text>
  </message>
  <message conversation_id="1078">
    <ts>2019-04-09T08:11:37.650400</ts>
    <user>Cherise</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="1078">
    <ts>2019-04-09T08:23:40.651100</ts>
    <user>Latonya</user>
    <text>If it is convenient to determine the distribution of types of values in the collection you are sorting, I would be curious to see the output of `(frequencies (map type c1))`, where `c1` is your collection of values.</text>
  </message>
  <message conversation_id="1079">
    <ts>2019-04-09T10:52:11.652300</ts>
    <user>Jaimee</user>
    <text>&lt;@Latonya&gt; so I tried something:
```
  (let [clean-probs (into [] (aget result-array 0))
        labels-probs (try (sort-by
                           :score &amp;gt;=
                           (keep identity
                                 (map #(when (&amp;gt;= %2 0.0001)
                                         {:score %2 :label %1})
                                      labels clean-probs)))
                          (catch Exception e
                            (println e)))
```
this somehow works with no error</text>
  </message>
  <message conversation_id="1080">
    <ts>2019-04-09T12:24:48.654000</ts>
    <user>Shayla</user>
    <text>Quick question, if I’m looking to build a somewhat simple event queue or pipeline for processing changes to app state, is it worth using core.async? </text>
  </message>
  <message conversation_id="1080">
    <ts>2019-04-09T12:31:03.654800</ts>
    <user>Jasmine</user>
    <text>If it’s just a series of fns, probably not</text>
  </message>
  <message conversation_id="1080">
    <ts>2019-04-09T12:31:39.655700</ts>
    <user>Jasmine</user>
    <text>If you want queuing and possibly stage concurrency, maybe so</text>
  </message>
  <message conversation_id="1081">
    <ts>2019-04-09T13:31:45.656200</ts>
    <user>Shayla</user>
    <text>cool, thanks!</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:33:45.658100</ts>
    <user>Tamie</user>
    <text>```(def nested-map {:a {:b 1}})
(defn my-func [m]
  ;; some magic
  )
(my-func nested-map)
;; =&amp;gt; 1
```</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:34:27.658600</ts>
    <user>Tamie</user>
    <text>how to achieve the `;; some magic` part?</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:35:57.659100</ts>
    <user>Shayla</user>
    <text>`(:b (:a m))` is the simplest</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:36:16.659700</ts>
    <user>Tamie</user>
    <text>right...ok</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:36:24.660300</ts>
    <user>Shayla</user>
    <text>also `(get-in m [:a :b])`</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:38:41.660500</ts>
    <user>Deb</user>
    <text>Wondering if people have stories of using the STM in 'real world' code. I have used atoms a lot but have yet to see a use for the STM. I see some old Java code where it looks like it could be useful, if I could ever port it, but I'd need a way to coordinate the in-memory var changes with an external commit to a DB. Some online examples of STM show "bank accounts", but with no way to connect the transaction to external storage, I don't see how that would really work past a simple demo.</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:39:43.661700</ts>
    <user>Tamie</user>
    <text>`(comp :a :b)`</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:40:23.662600</ts>
    <user>Tanesha</user>
    <text>I usually rely on a handler being called after the DB trx commits. Your memory changes could still fail though but the assumption is that the DB holds the Truth anyways </text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:40:48.663000</ts>
    <user>Tanesha</user>
    <text>Ie. It’s not a proper 2 phase commit </text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:42:26.663700</ts>
    <user>Jasmine</user>
    <text>&lt;@Shayla&gt; don't forget `(-&amp;gt; m :a :b)` too :)</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:42:47.664000</ts>
    <user>Shayla</user>
    <text>ha I thought of it but didn't post! glad you did</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:43:54.664800</ts>
    <user>Jasmine</user>
    <text>macroexpands to `(:b (:a m))` but reads left to right. prob faster than `get-in`.</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:44:59.665200</ts>
    <user>Shayla</user>
    <text>oh wow, really?</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:45:02.665400</ts>
    <user>Shayla</user>
    <text>I didn't know that!</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:45:40.666000</ts>
    <user>Jasmine</user>
    <text>not a difference that would likely matter, but last time I checked, yeah</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:46:03.666400</ts>
    <user>Jasmine</user>
    <text>you're basically adding another var deref/invoke so kind of has to be</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:46:51.667000</ts>
    <user>Jasmine</user>
    <text>I think either -&amp;gt; or get-in read the best, and I think that trumps other considerations</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:47:18.667600</ts>
    <user>Jasmine</user>
    <text>(:b (:a m)) has to be read inside-out, and comp is imo always the worst thing to read</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:48:56.668800</ts>
    <user>Deb</user>
    <text>A digression from `-&amp;gt;` but I saw this recently and was laughing at the names of the macros. The diamond wand, the trystero furcula, etc., ...  &lt;https://github.com/rplevy/swiss-arrows&gt;</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:49:50.669200</ts>
    <user>Shayla</user>
    <text>Agreed. Reading comp feels very awkward</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:50:36.670000</ts>
    <user>Jasmine</user>
    <text>many have died on the hill of arrow fetishization - this is but one of many</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:50:53.670400</ts>
    <user>Jasmine</user>
    <text>as the greeks said, moderation in all things</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:51:31.670700</ts>
    <user>Jasmine</user>
    <text>less is more, etc</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:52:40.671500</ts>
    <user>Deb</user>
    <text>Haha. :slightly_smiling_face: Yup. I found the first few (similar to `as-&amp;gt;`) useful at least.</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T13:54:16.672800</ts>
    <user>Jasmine</user>
    <text>I draw the line at understanding the word "furcula"</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T14:06:11.674400</ts>
    <user>Lavonia</user>
    <text>^^ The last arrow macro you'll need :rolling_on_the_floor_laughing:
&lt;https://github.com/randomcorp/thread-first-thread-last-backwards-question-mark-as-arrow-cond-arrow-bang&gt;</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T14:06:38.674700</ts>
    <user>Jasmine</user>
    <text>now that one makes sense</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T14:06:54.674900</ts>
    <user>Jasmine</user>
    <text>we're going to add that to core</text>
  </message>
  <message conversation_id="1082">
    <ts>2019-04-09T14:10:55.675600</ts>
    <user>Deb</user>
    <text>If you relax your eyes, it becomes a 3D diagram of the data flow, like those magic eye stereograms.</text>
  </message>
  <message conversation_id="1083">
    <ts>2019-04-09T14:11:54.675700</ts>
    <user>Tamie</user>
    <text>i needed a quick snappy creation of a function...what do u guys prefer?
```#(-&amp;gt; % :a :b)
(comp :a :b)
```</text>
  </message>
  <message conversation_id="1083">
    <ts>2019-04-09T14:12:17.675900</ts>
    <user>Shayla</user>
    <text>those are different, which is the issue</text>
  </message>
  <message conversation_id="1083">
    <ts>2019-04-09T14:12:34.676100</ts>
    <user>Shayla</user>
    <text>to match, the second should be `(comp :b :a)`</text>
  </message>
  <message conversation_id="1083">
    <ts>2019-04-09T14:13:15.676800</ts>
    <user>Tamie</user>
    <text>sure, but which do you prefer to read?</text>
  </message>
  <message conversation_id="1083">
    <ts>2019-04-09T14:13:43.677000</ts>
    <user>Tamie</user>
    <text>`(map (juxt :total (comp :login :author)))`</text>
  </message>
  <message conversation_id="1083">
    <ts>2019-04-09T14:13:52.677200</ts>
    <user>Shayla</user>
    <text>that looks readable</text>
  </message>
  <message conversation_id="1083">
    <ts>2019-04-09T14:14:24.677400</ts>
    <user>Tamie</user>
    <text>is that better than: `(map (juxt :total #(-&amp;gt; % :author :login)`</text>
  </message>
  <message conversation_id="1083">
    <ts>2019-04-09T14:17:05.677600</ts>
    <user>Jasmine</user>
    <text>I prefer everything to `comp` :)</text>
  </message>
  <message conversation_id="1083">
    <ts>2019-04-09T14:17:50.677800</ts>
    <user>Tamie</user>
    <text>:arrow_right:  thx guys! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1084">
    <ts>2019-04-09T17:58:14.684800</ts>
    <user>Brent</user>
    <text>Hi! I need to merge a bunch of maps but the merge fn depends on the key. I couldn't find a shorter, simpler, easier to understand solution than copying `merge-with` to `merge-with-kvv`  that invokes the merge fn as `(f key val1 val2)` instead of just with the two values. Or is there a better way?</text>
  </message>
  <message conversation_id="1084">
    <ts>2019-04-09T20:03:23.689100</ts>
    <user>Kacy</user>
    <text>The arrow I've probably heard requested most frequently is a version of `cond-&amp;gt;` that threads the value through the tests too</text>
  </message>
  <message conversation_id="1084">
    <ts>2019-04-09T23:17:22.690300</ts>
    <user>Celestine</user>
    <text>&lt;@Kacy&gt; &lt;https://github.com/worldsingles/commons/blob/master/src/ws/clojure/extensions.clj&gt; (pulled out of our code base at work) `[worldsingles/ws-commons "0.1.1"]`</text>
  </message>
  <message conversation_id="1084">
    <ts>2019-04-09T23:19:43.690900</ts>
    <user>Kacy</user>
    <text>&lt;@Celestine&gt; oh nice, I like that one</text>
  </message>
  <message conversation_id="1084">
    <ts>2019-04-09T23:19:47.691100</ts>
    <user>Kacy</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1084">
    <ts>2019-04-09T23:22:04.691200</ts>
    <user>Lana</user>
    <text>Interesting! And it looks like they are making good progress on the one they are going to release officially. Until then I am getting by fine using my JDK 8 javapackager pointed at a current OpenJDK distro to build my Mac app, and one of my kind Windows users has set up an sftp server that uses a third-party tool to create a nice MSI installer.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-09T23:46:07.691600</ts>
    <user>Celestine</user>
    <text>And heavily production-tested :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:52:30.693700</ts>
    <user>Celestine</user>
    <text>&lt;@Suanne&gt; Have you asked in &lt;#C099W16KZ|emacs&gt; ?</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:52:48.694200</ts>
    <user>Celestine</user>
    <text>(It's been too long since I used Emacs to be able to remember, I'm afraid)</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:53:43.695000</ts>
    <user>Suanne</user>
    <text>&lt;@Celestine&gt; No I have not, will do. How can I discover what channels exist on this workspace? Also, what editor are you using for Clojure if you don’t mind me asking?</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:54:27.695900</ts>
    <user>Celestine</user>
    <text>Depending on the Slack client, there should be a label on the left `Channels` which you can click to browse all the hundreds of channels...</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:54:55.696700</ts>
    <user>Suanne</user>
    <text>&lt;@Celestine&gt; Ah ok I just found that, thanks!</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:55:02.697000</ts>
    <user>Celestine</user>
    <text>...but it's a fair rule of thumb to assume "There's a channel for that!" and just use the switcher (control-k) and start typing :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:55:24.697500</ts>
    <user>Celestine</user>
    <text>(and there's &lt;#C04V84U7G|slack-help&gt; if you need to ask more detailed questions about how-to-slack :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:56:15.698300</ts>
    <user>Celestine</user>
    <text>I switched from Emacs to Atom (+ ProtoREPL) after using Emacs for years... and at the end of last year I switched to Atom + Chlorine.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:57:11.699300</ts>
    <user>Celestine</user>
    <text>I talk a bit about that journey here &lt;http://corfield.org/blog/2018/12/19/atom-chlorine/&gt;</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:57:27.699800</ts>
    <user>Suanne</user>
    <text>&lt;@Celestine&gt; Ok, I’ve been using VS Code which has decent integration with Clojure and the REPL. Why did you switch? I find Emacs might be so complicated that I’m spending too much time configuring it and not enough time learning.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:57:39.700300</ts>
    <user>Suanne</user>
    <text>&lt;@Celestine&gt; I’ll check that out.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:57:41.700400</ts>
    <user>Celestine</user>
    <text>Yup. That. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:58:07.701000</ts>
    <user>Celestine</user>
    <text>I've tried VSCode several times. Calva is coming along nicely. But I just prefer Atom.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T00:58:43.701500</ts>
    <user>Celestine</user>
    <text>(I have an Insider build of VS Code which I dip into from time to time)</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:00:04.702600</ts>
    <user>Celestine</user>
    <text>My workflow these days is to fire up Cognitect's REBL with a Socket REPL and then connect Atom/Chlorine to it and run them side-by-side, so I can "inspect" values directly into REBL, and take advantage of `tap&amp;gt;` for debugging.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:02:02.703400</ts>
    <user>Suanne</user>
    <text>I’ll check these things out. I tried out Atom before. VS Code seems very similar to me. I don’t mind either of them.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:02:53.704100</ts>
    <user>Celestine</user>
    <text>Part of what I love about Chlorine is that it's written in ClojureScript and I can hack on it live while I'm editing my work projects :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:06:37.704700</ts>
    <user>Suanne</user>
    <text>That’s the beauty of this stack. I’m still a bit of a beginner, haven’t tried ClojureScript yet.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:10:13.706000</ts>
    <user>Celestine</user>
    <text>We tried cljs at work about four years ago and it was a pretty rough experience back then so we decided to move forward with JS and React.js on our front end for the time being. But things have changed a lot and cljs is much, much more mature these days so we might look at it again for some projects in future.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:10:45.706400</ts>
    <user>Celestine</user>
    <text>(we've been doing Clojure in production since 2011)</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:11:59.706900</ts>
    <user>Suanne</user>
    <text>What specific industry is that?</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:12:45.707400</ts>
    <user>Celestine</user>
    <text>Online dating. World Singles Networks.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:13:27.708100</ts>
    <user>Celestine</user>
    <text>We have dozens of dating websites, all powered by Clojure on the back end and React.js on the front end.</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:13:52.708400</ts>
    <user>Celestine</user>
    <text>Over 80k lines of Clojure.</text>
  </message>
  <message conversation_id="1086">
    <ts>2019-04-10T01:32:44.709600</ts>
    <user>Loria</user>
    <text>Is there a better way of writing this function?
```
(defn lazy-distinct
  "return a lazy sequence of coll that terminates
  when a repeated value is encountered"
  [coll]
  (-&amp;gt;&amp;gt; coll
    (reductions (fn [[seen _] x]
                  (if (contains? seen x)
                    (reduced :end)
                    [(conj seen x) x]))
      [#{} :start])
    ;; drop :start and :end markers
    (drop 1)
    (drop-last 1)
    (map second)))
```</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:37:58.711500</ts>
    <user>Celestine</user>
    <text>That seems very complicated... What's with the start/end markers? Aren't you just going to return the original sequence up to the first item that you've already seen?</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:38:27.712500</ts>
    <user>Loria</user>
    <text>yeah, seems like I'm missing something very simple here :sweat_smile:</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:39:11.713600</ts>
    <user>Celestine</user>
    <text>`(reduce (fn [[seen coll] x] (if (seen x) (reduced coll) [(conj seen x) (conj coll x)])) [#{} []] coll)`</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:39:51.714000</ts>
    <user>Celestine</user>
    <text>It's not lazy but...</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:40:54.714800</ts>
    <user>Loria</user>
    <text>yeah, for my purposes I need it to be lazy</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:41:58.715600</ts>
    <user>Loria</user>
    <text>i.e. the iterator might be infinite but if it does ever cycle back to a repeated value I want it to terminate</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:42:57.716200</ts>
    <user>Celestine</user>
    <text>Hmm... interesting... So you'd have to track a potentially near-infinite set of "seen" values?</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:44:01.717000</ts>
    <user>Loria</user>
    <text>I guess so, but practically I'm only using the first couple of elements off the seq</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:44:20.717600</ts>
    <user>Loria</user>
    <text>so for performance reasons I also don't want the whole thing to be realized</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:44:21.717700</ts>
    <user>Celestine</user>
    <text>In which case, why do you care whether it's lazy or eager?</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:44:26.717900</ts>
    <user>Celestine</user>
    <text>Oh, gotcha.</text>
  </message>
  <message conversation_id="1087">
    <ts>2019-04-10T01:55:26.720100</ts>
    <user>Adria</user>
    <text>You can use clojure.core’s distinct transducer, except return a reduced value when a repeated value is encountered.
```
(defn take-unique []
  (fn [rf]
    (let [seen (volatile! #{})]
      (fn
        ([] (rf))
        ([result] (rf result))
        ([result input]
         (if (contains? @seen input)
           (rf (reduced input))
           (do (vswap! seen conj input)
               (rf result input))))))))

(sequence (take-unique) coll)
```</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T01:55:58.720500</ts>
    <user>Celestine</user>
    <text>Or this `lazy-seq`-based version with a helper: ```user=&amp;gt; (defn ld [coll seen] (cond (empty? coll) [] (seen (first coll)) [] :else (lazy-seq (cons (first coll) (ld (rest coll) (conj seen (first coll)))))))
#'user/ld
user=&amp;gt; (defn lazy-distinct [coll] (ld coll #{}))
#'user/lazy-distinct```</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T02:08:28.720700</ts>
    <user>Sixta</user>
    <text>I think tools.does.alpha has a helper like that</text>
  </message>
  <message conversation_id="1088">
    <ts>2019-04-10T02:27:16.721400</ts>
    <user>Loria</user>
    <text>Thanks for both those approaches! I learnt a bit more about transducers from this :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T02:40:42.722400</ts>
    <user>Celestine</user>
    <text>`sequence` of a transducing function is a good approach (but a bit more code that a simple lazy seq).</text>
  </message>
  <message conversation_id="1085">
    <ts>2019-04-10T02:41:04.722900</ts>
    <user>Celestine</user>
    <text>One day all processes will be made that way (transducers) :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1088">
    <ts>2019-04-10T02:43:03.723600</ts>
    <user>Loria</user>
    <text>I'm still finding it hard to gain intuition about what transducers are "doing" under the hood</text>
  </message>
  <message conversation_id="1088">
    <ts>2019-04-10T02:45:34.726000</ts>
    <user>Loria</user>
    <text>or rather what mental model to use when thinking about them - even though I can follow the logic it's still seems like this magical passing around of higher-order-functions</text>
  </message>
  <message conversation_id="1088">
    <ts>2019-04-10T02:46:45.726500</ts>
    <user>Loria</user>
    <text>`comp` of transducers behaving in a "backwards" manner being one of the more confusing things</text>
  </message>
  <message conversation_id="1088">
    <ts>2019-04-10T02:47:25.727300</ts>
    <user>Celestine</user>
    <text>Yeah, they definitely take some getting used to. Especially since it's very hard to exercise all _three_ arities.</text>
  </message>
  <message conversation_id="1088">
    <ts>2019-04-10T04:02:10.731400</ts>
    <user>Lavonia</user>
    <text>&lt;@Loria&gt; I found it useful to watch the *Transducers* talk Rich gave at Strange Loop a couple of times.
I also found it helpful to understand `IReduceInit` first, then move on to transducers.</text>
  </message>
  <message conversation_id="1088">
    <ts>2019-04-10T05:29:02.732200</ts>
    <user>Danna</user>
    <text>I can't shake off the feeling that its confusing design to use  different arities for different lifecycle moments</text>
  </message>
  <message conversation_id="1088">
    <ts>2019-04-10T05:29:26.732400</ts>
    <user>Danna</user>
    <text>I understand that its the most efficient way to work with the jvm and is thefore a good pragmatic choice</text>
  </message>
  <message conversation_id="1088">
    <ts>2019-04-10T05:31:17.732600</ts>
    <user>Danna</user>
    <text>but transducers would be easier-to-grasp if they were defined using a record
`(defrecord Transducer [init-val iterate-fn wrapup-fn])`
IMHO</text>
  </message>
  <message conversation_id="1089">
    <ts>2019-04-10T05:36:34.733700</ts>
    <user>Chiquita</user>
    <text>can anyone tell me how to learn clojure openscad. Thanks</text>
  </message>
  <message conversation_id="1090">
    <ts>2019-04-10T06:23:20.738500</ts>
    <user>Shawnta</user>
    <text>Hi there!
I solving "Sum of the first nth term of Series" from &lt;http://codewars.com|codewars.com&gt; on clojure, and when I write solution I recived like "time out execution error".
I solve the same problem on haskell and take execute time, it's about 0.166972266s on 25000 value of nth series.
This is a clojure and haskell code that does the same thing.
```clojure
(defn series-sum [n]
  (-&amp;gt;&amp;gt; (map #(/ 1 %) (range 1 (java.lang.Integer/MAX_VALUE) 3))
    (take n)
    (reduce +)
    double
    (format "%.2f")))
```
```haskell
import Text.Printf

series :: [Double]
series = map (1/) [1, 4 ..]

seriesSum :: Integer -&amp;gt; String
seriesSum n = printf "%.2f" $ sum $ take (fromInteger n) series
```
Can anyone tell me, who I can solve this problem on clojure faster? Thank you in advance.</text>
  </message>
  <message conversation_id="1090">
    <ts>2019-04-10T06:26:44.738800</ts>
    <user>Shawnta</user>
    <text>As example on clojure with 3000 of nth series execute time is 7971.811645 msecs versus 0.002140344s on haskell</text>
  </message>
  <message conversation_id="1090">
    <ts>2019-04-10T06:34:52.739200</ts>
    <user>Loria</user>
    <text>does it help if you change it to `#(/ 1.0 %)`?</text>
  </message>
  <message conversation_id="1090">
    <ts>2019-04-10T06:35:21.739400</ts>
    <user>Loria</user>
    <text>currently it's doing rational arithmetic instead of floating-point</text>
  </message>
  <message conversation_id="1090">
    <ts>2019-04-10T06:39:00.739700</ts>
    <user>Margit</user>
    <text>I can confirm that it's 3ms-ish this way.</text>
  </message>
  <message conversation_id="1090">
    <ts>2019-04-10T06:39:16.739900</ts>
    <user>Shawnta</user>
    <text>Yes. It helped.
I guess I do not know something. :hushed:</text>
  </message>
  <message conversation_id="1090">
    <ts>2019-04-10T06:42:41.740300</ts>
    <user>Loria</user>
    <text>I'd be interested how Haskell compares with its Rational implementation</text>
  </message>
  <message conversation_id="1090">
    <ts>2019-04-10T07:02:24.740600</ts>
    <user>Margit</user>
    <text>Rational arithmetic being the default for division in Clojure has bitten a lot of people, you are not the first one, unfortunately.</text>
  </message>
  <message conversation_id="1091">
    <ts>2019-04-10T07:14:46.740800</ts>
    <user>Sena</user>
    <text>Just curious. Did the answers match?</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:12:05.741000</ts>
    <user>Min</user>
    <text>``` 
(defn series-sum
  [n]
  (-&amp;gt;&amp;gt; (range 1 (java.lang.Integer/MAX_VALUE) 3)
       (transduce (comp (map #(/ 1.0 %)) (take n))
                  +
                  0.0)
       (format "%.2f")))
```
^ should be slightly faster</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:15:40.741400</ts>
    <user>Min</user>
    <text>after warmup it clocks at 1.2 ms on my laptop for 25k vs 3.6 for the slightly modified version of yours</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:16:50.741600</ts>
    <user>Nieves</user>
    <text>now it is time to test `loop` variant :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:22:00.741800</ts>
    <user>Margit</user>
    <text>If run enough times, first solution is 0.4ms vs 0.1ms for &lt;@Min&gt; solution.</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:22:39.742000</ts>
    <user>Min</user>
    <text>unrolling the whole mess in loop for sure is faster, but too much stuff to type :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:22:56.742200</ts>
    <user>Min</user>
    <text>transduce version is close enough to the haskell version in terms of syntax</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:24:56.742400</ts>
    <user>Nieves</user>
    <text>of course. but how said one haskeller - better way do make an unefficient programs is to write code on lazy languages as on the strict ones and do the opposit way :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:26:35.742600</ts>
    <user>Nieves</user>
    <text>anyway naive recursion in haskell in this task will be slower an take a HUGE amount of ram )</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:27:58.742800</ts>
    <user>Min</user>
    <text>won't ghc optimize away the lazy parts since the return value will force computation?</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:28:54.743000</ts>
    <user>Nieves</user>
    <text>it depends on compiler O option )</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:29:05.743200</ts>
    <user>Nieves</user>
    <text>by default - not )</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:29:05.743400</ts>
    <user>Min</user>
    <text>I thought this is where its type system could help with :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:29:07.743600</ts>
    <user>Min</user>
    <text>got it</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:30:34.744000</ts>
    <user>Nieves</user>
    <text>but you can always add strict evaluation thru $! or any else, but it is needed to remember )</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:31:07.744200</ts>
    <user>Margit</user>
    <text>For those interested, this compiles pretty much to identical Java code, and takes ~20us.
```
(defn series-sum [n]
  (loop [i 1, j 1, acc 0.0]
    (if (&amp;lt; i n)
      (recur (unchecked-inc-int i) (unchecked-add-int j 3) (unchecked-add acc (/ 1.0 j)))
      (format "%.2f" acc))))
```</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:31:32.744400</ts>
    <user>Min</user>
    <text>yeah, I tend to prefer explicitness in these cases. Too much magic kills the magic</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:32:41.744600</ts>
    <user>Min</user>
    <text>20ms? that's way too much no? error in unit?</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:33:14.744800</ts>
    <user>Margit</user>
    <text>```
(decompile
(defn series-sum [n]
  (loop [i 1, j 1, acc 0.0]
    (if (&amp;lt; i n)
      (recur (unchecked-inc i) (unchecked-add j 3) (unchecked-add acc (/ 1.0 j)))
      (format "%.2f" acc)))))
```

```
    public static Object invokeStatic(final Object n) {
        long i = 1L;
        long j = 1L;
        double acc = 0.0;
        while (&lt;http://Numbers.lt|Numbers.lt&gt;(i, n)) {
            final long n2 = i + 1L;
            final long n3 = j + 3L;
            acc += Numbers.divide(1.0, j);
            j = n3;
            i = n2;
        }
        return ((IFn)const__8.getRawRoot()).invoke((Object)"%.2f", (Object)acc);
    }
```</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:33:18.745000</ts>
    <user>Margit</user>
    <text>Yes, sorry, 20us</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:33:37.745300</ts>
    <user>Min</user>
    <text>nice</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:34:37.745500</ts>
    <user>Nieves</user>
    <text>loop wins as usual :grin:</text>
  </message>
  <message conversation_id="1092">
    <ts>2019-04-10T08:35:22.745700</ts>
    <user>Nieves</user>
    <text>and about haskell you can uncomment and compare time and memory peak :wink:
&lt;https://rextester.com/KONQV13764&gt;</text>
  </message>
  <message conversation_id="1093">
    <ts>2019-04-10T10:52:59.747600</ts>
    <user>Colette</user>
    <text>The API Docs link at the bottom of of spec-alpha2 README is broken. Is this a known bug? &lt;https://github.com/clojure/spec-alpha2&gt;</text>
  </message>
  <message conversation_id="1093">
    <ts>2019-04-10T11:05:48.748000</ts>
    <user>Jasmine</user>
    <text>yeah, I've never got around to building it</text>
  </message>
  <message conversation_id="1093">
    <ts>2019-04-10T11:05:58.748400</ts>
    <user>Jasmine</user>
    <text>typically it builds off releases and we haven't done one</text>
  </message>
  <message conversation_id="1093">
    <ts>2019-04-10T11:24:38.749000</ts>
    <user>Jasmine</user>
    <text>&lt;@Colette&gt; I generated it, waiting on github to publish, but should eventually show up at &lt;https://clojure.github.io/spec-alpha2/&gt;</text>
  </message>
  <message conversation_id="1093">
    <ts>2019-04-10T11:26:32.749300</ts>
    <user>Colette</user>
    <text>Thanks &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="1094">
    <ts>2019-04-10T15:56:00.751400</ts>
    <user>Coletta</user>
    <text>Looks like `&lt;https://clojurians-log.clojureverse.org&gt;` archives are down, showing a Null Pointer Exception</text>
  </message>
  <message conversation_id="1094">
    <ts>2019-04-10T15:56:38.751800</ts>
    <user>Coletta</user>
    <text>Perhaps only certain routes &lt;https://clojurians-log.clojureverse.org/datomic/2017-09-19&gt; for example</text>
  </message>
  <message conversation_id="1094">
    <ts>2019-04-10T15:58:02.752100</ts>
    <user>Tammera</user>
    <text>&lt;@Charlyn&gt; you are maintaining that right?</text>
  </message>
  <message conversation_id="1094">
    <ts>2019-04-10T16:00:45.752200</ts>
    <user>Tammera</user>
    <text>He is not in this channel, but I think through the magic of ambigous slack options I have maybe summoned him :’). Some parts of clojurians slack log appears to be down.</text>
  </message>
  <message conversation_id="1095">
    <ts>2019-04-10T16:25:35.752600</ts>
    <user>Celestine</user>
    <text>This was raised in &lt;#C04V84U7G|slack-help&gt; and I tagged him there as well.</text>
  </message>
  <message conversation_id="1095">
    <ts>2019-04-10T16:33:49.752800</ts>
    <user>Tammera</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:06:49.754000</ts>
    <user>Clarine</user>
    <text>when do I need `requiring-resolve`? I am loading some namespaces lazily (for performance, I don’t need them every instance of the program).</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:13:15.754700</ts>
    <user>Jasmine</user>
    <text>are there likely to be multiple threads doing same ns at the same time?</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:13:15.754800</ts>
    <user>Dann</user>
    <text>~I thought it was a convenience for the lazy-loaded require/resolve pattern~</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:15:47.755200</ts>
    <user>Jasmine</user>
    <text>it is ^^</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:16:15.755800</ts>
    <user>Dann</user>
    <text>nice - but now I see the thread safety thing too, which is nice</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:16:20.755900</ts>
    <user>Jasmine</user>
    <text>it has the added benefit of using the (private) `serialized-require`</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:16:44.756600</ts>
    <user>Jasmine</user>
    <text>which is a temporary crutch until we can better fix `require`</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:17:35.757200</ts>
    <user>Jasmine</user>
    <text>eventually, `serialized-require` should just revert to `require`</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:28:32.757400</ts>
    <user>Clarine</user>
    <text>multiple threads? at the moment, no</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:29:37.757800</ts>
    <user>Jasmine</user>
    <text>then, just `require`</text>
  </message>
  <message conversation_id="1097">
    <ts>2019-04-10T17:30:16.758900</ts>
    <user>Clarine</user>
    <text>I’m hitting the locking issue with GraalVM again when using requiring-resolve, which can be patched, but if I don’t have to :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:30:31.759100</ts>
    <user>Jasmine</user>
    <text>no need to</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:35:10.760300</ts>
    <user>Clarine</user>
    <text>hmm, I think this lazy require approach isn’t working at all with GraalVM since it needs eval basically right. so I’ll scratch that idea</text>
  </message>
  <message conversation_id="1096">
    <ts>2019-04-10T17:41:24.760500</ts>
    <user>Jasmine</user>
    <text>yeah, I was wondering how that worked :)</text>
  </message>
  <message conversation_id="1098">
    <ts>2019-04-10T17:59:07.760900</ts>
    <user>Dann</user>
    <text>can you use the var method via interop?</text>
  </message>
  <message conversation_id="1098">
    <ts>2019-04-10T18:06:49.762900</ts>
    <user>Marlyn</user>
    <text>You're gonna want to make sure Graal sees the classes so that it can compile them all</text>
  </message>
  <message conversation_id="1098">
    <ts>2019-04-10T18:07:57.763200</ts>
    <user>Marlyn</user>
    <text>by preloading them</text>
  </message>
  <message conversation_id="1098">
    <ts>2019-04-10T18:10:54.763600</ts>
    <user>Dann</user>
    <text>ahh right, which means the whole "last minute lazy require" thing is pointless anyway, I think</text>
  </message>
  <message conversation_id="1099">
    <ts>2019-04-10T18:42:26.763800</ts>
    <user>Mariela</user>
    <text>I'm late to the party, but I heavily use something I called `rcomp` which is simply reverse + comp. That way things read left-to-right, just like with OOP dot notation

...and specifically, things keep flowing left-to-right in -&amp;gt; and -&amp;gt;&amp;gt; chains</text>
  </message>
  <message conversation_id="1100">
    <ts>2019-04-11T01:45:35.765400</ts>
    <user>Suanne</user>
    <text>Is it possible to get ParEdit working in the Clojure REPL (the one invoked with `lein repl`)?</text>
  </message>
  <message conversation_id="1100">
    <ts>2019-04-11T03:15:44.766500</ts>
    <user>Deb</user>
    <text>&lt;@Suanne&gt; Which editor are you using? I can turn on paredit-mode in the REPL in Emacs.</text>
  </message>
  <message conversation_id="1100">
    <ts>2019-04-11T03:16:18.767100</ts>
    <user>Suanne</user>
    <text>&lt;@Deb&gt; I’m not using an editor, I’m using a terminal.</text>
  </message>
  <message conversation_id="1100">
    <ts>2019-04-11T03:17:20.767600</ts>
    <user>Deb</user>
    <text>Oh, okay. Without an editor wrapping the terminal/repl, then I don't know the answer.</text>
  </message>
  <message conversation_id="1100">
    <ts>2019-04-11T03:58:33.769100</ts>
    <user>Suanne</user>
    <text>&lt;@Deb&gt; I’ve also got it working in the CIDER REPL with ParEdit in Emacs, but I’m trying to transition away from Emacs in favor of VS Code, which I run a regular terminal inside of with the REPL. I’ve got pretty much everything working for my own workflow as it would be in Emacs with CIDER, but I can’t figure out this one minor thing.</text>
  </message>
  <message conversation_id="1100">
    <ts>2019-04-11T04:20:34.769900</ts>
    <user>Sixta</user>
    <text>&lt;@Suanne&gt; I think rebel-readline does paredit.</text>
  </message>
  <message conversation_id="1100">
    <ts>2019-04-11T05:17:36.770100</ts>
    <user>Deb</user>
    <text>&lt;@Suanne&gt; I wanted to try that too (VS Code). Do you have key combos to quickly eval/reload things in the REPL, without having to cut-n-paste? In Emacs, commands like `cider-eval-defun-at-point`, `cider-eval-sexp-at-point`, `cider-load-buffer`.</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:08:20.771200</ts>
    <user>Wilford</user>
    <text>I have a little golfing challenge if anyone's feeling bored on a Thursday afternoon:  &lt;https://gist.github.com/clarkema/61464cb52ba107047c28cdff0539d030&gt;</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:08:37.771600</ts>
    <user>Wilford</user>
    <text>I'm looking for the absolute _fastest_ way to loop over an index from 1 to n</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:23:44.771800</ts>
    <user>Jasmine</user>
    <text>loop should be fastest</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:23:54.772100</ts>
    <user>Jasmine</user>
    <text>you're ruining  it with the boxed constant prob</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:24:03.772300</ts>
    <user>Jasmine</user>
    <text>up-to</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:25:47.773000</ts>
    <user>Jasmine</user>
    <text>```(time (loop [i 1]
        (inc i)
        (if (&amp;lt; i 100000000)
          (recur (inc i)))))```</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:25:53.773200</ts>
    <user>Jasmine</user>
    <text>is like 45ms</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:26:50.773500</ts>
    <user>Jasmine</user>
    <text>alternately, this should have similar effect:</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:26:54.773700</ts>
    <user>Jasmine</user>
    <text>```(def ^long ^:const up-to 100000000)```</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:27:24.774000</ts>
    <user>Jasmine</user>
    <text>might help the other timings too</text>
  </message>
  <message conversation_id="1102">
    <ts>2019-04-11T09:34:24.775400</ts>
    <user>Jasmine</user>
    <text>and actually the inc i would be even faster if using unchecked math. you can turn that on as the default AND get warnings about boxed usage like this:</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:34:34.775600</ts>
    <user>Jasmine</user>
    <text>```user=&amp;gt; (set! *unchecked-math* :warn-on-boxed)
:warn-on-boxed```</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:35:04.775900</ts>
    <user>Jasmine</user>
    <text>```user=&amp;gt; (time (loop [i 1]
        (inc i)
        (if (&amp;lt; i up-to)
          (recur (inc i)))))
Boxed math warning, NO_SOURCE_PATH:3:13 - call: public static boolean &lt;http://clojure.lang.Numbers.lt|clojure.lang.Numbers.lt&gt;(long,java.lang.Object).```</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:35:21.776200</ts>
    <user>Wilford</user>
    <text>&lt;@Jasmine&gt; That's really interesting, thanks!</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:35:54.776800</ts>
    <user>Jasmine</user>
    <text>with unchecked math and avoiding boxing, more like 32 ms</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:37:24.777800</ts>
    <user>Jasmine</user>
    <text>should basically be emitted as essentially the same bytecode you'd get from a tight java numeric loop on a long counter (although more natural in Java to use ints)</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:38:25.778400</ts>
    <user>Wilford</user>
    <text>I'll have a go with that in the real example (up-to in real life is actually the result of .size on a java.util.ArrayList</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T09:53:19.779400</ts>
    <user>Jasmine</user>
    <text>you can type-hint it or coerce it at point-of-use too - result of .size is an int, and a coercion to primitive long will be required somewhere. best to do it explicitly once, then every time through the loop if possible.</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T10:00:47.779700</ts>
    <user>Wilford</user>
    <text>yup, that's shaved a pretty nice chunk off</text>
  </message>
  <message conversation_id="1101">
    <ts>2019-04-11T10:00:49.779900</ts>
    <user>Wilford</user>
    <text>thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1103">
    <ts>2019-04-11T11:48:40.782100</ts>
    <user>Noemi</user>
    <text>I need to add a content-type/application-json header to a luminus swagger endpoint that looks like
```["/json" {:get (constantly (ok (json/write-str {:foo "bar"})))}]```
any thoughts?</text>
  </message>
  <message conversation_id="1103">
    <ts>2019-04-11T11:51:21.782900</ts>
    <user>Noemi</user>
    <text>I'm getting
  ```"content-type": "application/octet-stream",```
instead.</text>
  </message>
  <message conversation_id="1103">
    <ts>2019-04-11T11:53:20.783400</ts>
    <user>Noemi</user>
    <text>the new luminus/swagger uses reitit so I think things may be different than before.</text>
  </message>
  <message conversation_id="1103">
    <ts>2019-04-11T11:53:37.783600</ts>
    <user>Michael</user>
    <text>can you call defmacro within defmacro?</text>
  </message>
  <message conversation_id="1104">
    <ts>2019-04-11T12:08:39.783900</ts>
    <user>Meagan</user>
    <text>I would not :stuck_out_tongue: what’s the use case?</text>
  </message>
  <message conversation_id="1104">
    <ts>2019-04-11T12:43:59.784700</ts>
    <user>Sixta</user>
    <text>You can do it though, might be a little tricky.</text>
  </message>
  <message conversation_id="1105">
    <ts>2019-04-11T12:59:06.785100</ts>
    <user>Jasmine</user>
    <text>do you mean emit or call?</text>
  </message>
  <message conversation_id="1105">
    <ts>2019-04-11T12:59:35.785700</ts>
    <user>Jasmine</user>
    <text>defmacro-emitting macros are definitely possible and useful. also quite painful to write.</text>
  </message>
  <message conversation_id="1106">
    <ts>2019-04-11T13:26:51.788700</ts>
    <user>Shayna</user>
    <text>&lt;@Noemi&gt; if you have a content-negotiation middleware in the mw chain, it should do the formatting for you, there is a example here: &lt;https://github.com/metosin/reitit/blob/master/examples/ring-spec-swagger/src/example/server.clj#L82&gt;</text>
  </message>
  <message conversation_id="1105">
    <ts>2019-04-11T13:29:01.789300</ts>
    <user>Suanne</user>
    <text>Yes I believe those are all available.</text>
  </message>
  <message conversation_id="1105">
    <ts>2019-04-11T13:40:03.790400</ts>
    <user>Jasmine</user>
    <text>still looking for more experience reports feedback on the Clojure 1.10.1-beta2 changes in error reporting if anyone has the opportunity to live with it for a bit. See &lt;https://www.reddit.com/r/Clojure/comments/bc264v/clojure_1101beta2_is_now_available/ekn9qr3/&gt; for an example.</text>
  </message>
  <message conversation_id="1105">
    <ts>2019-04-11T14:55:02.791400</ts>
    <user>Celestine</user>
    <text>I just updated our code base to use Beta 2 and all tests pass (of course) -- the next failure that I hit will make me appreciate CLJ-2497 being fixed :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:27:57.793700</ts>
    <user>Xiao</user>
    <text>Anyone fancy a 4clojure type exercise? A function that takes a vector and an item in that vector and shifts the item right or left by one.</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:29:05.794000</ts>
    <user>Becki</user>
    <text>items in the vector are distinct?</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:30:39.794800</ts>
    <user>Becki</user>
    <text>ie, `(shift :left :a [:x :x :a :x :a :x])` returns what?</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:31:08.795100</ts>
    <user>Xiao</user>
    <text>Yep, distinct</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:32:16.795700</ts>
    <user>Xiao</user>
    <text>`(shift :left 1 [1 2 3 4 5])` -&amp;gt; `[5 2 3 4 1]`</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:33:01.796100</ts>
    <user>Xiao</user>
    <text>`(shift :left 3 [1 2 3 4 5])` -&amp;gt; `[1 3 2 4 5]`</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:40:55.798200</ts>
    <user>Suanne</user>
    <text>Check out the Calva package for VS Code.</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:41:03.798500</ts>
    <user>Jasmine</user>
    <text>cycle, drop x, take n handles that (computing x appropriately for right/left)</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:41:36.799100</ts>
    <user>Jasmine</user>
    <text>oh, shifts single item not the whole thing</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:41:54.799600</ts>
    <user>Becki</user>
    <text>i was looking at `split-with #(not= e %)` and then recombining based on left or right</text>
  </message>
  <message conversation_id="1107">
    <ts>2019-04-11T15:42:07.799800</ts>
    <user>Becki</user>
    <text>`(let [[before [_ &amp;amp; after]] (split-with #(not= e %) coll)` and  play from there</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:07:38.800400</ts>
    <user>Xiao</user>
    <text>```
(defn shift [direction i coll]
  (let [[before [_ &amp;amp; after]] (split-with #(not= i %) coll)]
    (if (= direction :left)
      (if (butlast before)
        (vec (concat (butlast before) [i] (take-last 1 before) after))
        (vec (concat (take-last 1 before) after [i])))
      (if (empty? (rest after))
        (vec (flatten (concat [i] before)))
        (vec (flatten (concat before [(first after)] [i] [(rest after)])))))))
```
Pretty ugly but it works</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:08:06.800600</ts>
    <user>Xiao</user>
    <text>Can tidy it up a bit</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:09:10.801300</ts>
    <user>Dann</user>
    <text>if this was 4clojure I would make [[1] [2] [3]] an input (to rule out using flatten)</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:10:49.801700</ts>
    <user>Xiao</user>
    <text>I think it still works, because i flatten after splitting</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:11:06.802300</ts>
    <user>Dann</user>
    <text>it would return the wrong output</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:11:14.802500</ts>
    <user>Xiao</user>
    <text>Flatten just lets me make everything a seq so that concat doesnt blow up</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:11:31.803000</ts>
    <user>Dann</user>
    <text>there are solutions that don't force you to destroy the structure of your input</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:11:39.803200</ts>
    <user>Xiao</user>
    <text>You're right, it breaks when using flatten</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:11:51.803400</ts>
    <user>Xiao</user>
    <text>i.e. `:right`</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:14:02.804900</ts>
    <user>Xiao</user>
    <text>I'm sure there are, what i have is very inelegant</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:15:20.805600</ts>
    <user>Jasmine</user>
    <text>I'd get rid of :right / :left and use  +/- in index</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:17:52.807400</ts>
    <user>Jasmine</user>
    <text>is i an index? or is that a value to match?</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:18:34.807900</ts>
    <user>Jasmine</user>
    <text>I guess value, so nvm. I totally misunderstood (twice now) what this is doing. :)</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:20:05.808300</ts>
    <user>Xiao</user>
    <text>Yes, bad naming, sorry</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:20:14.808600</ts>
    <user>Xiao</user>
    <text>`x` would be more idiomatic?</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:22:51.809100</ts>
    <user>Jasmine</user>
    <text>well, `i` was confusing :)</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:23:14.809500</ts>
    <user>Dann</user>
    <text>`el` `elt` or `needle` might be good</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:23:49.809900</ts>
    <user>Jasmine</user>
    <text>`cheese` ("who moved my cheese?")</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:34:11.812700</ts>
    <user>Xiao</user>
    <text>I'll have to try again tomorrow, brain is tired. :sleeping_accommodation:</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:35:06.813000</ts>
    <user>Dulcie</user>
    <text>Can I use a bit of java interop?
```
(defn shift [direction item coll]
  (let [f (case direction :left dec :right inc)
        pos (.indexOf coll item)]
    (when (not (neg-int? pos))
      (let [target-pos (mod (f pos) (count coll))
            overlay {target-pos item, pos (nth coll target-pos)}]
        (reduce (fn [coll [position new-value]] (assoc coll position new-value)) coll overlay)))))
```</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:36:21.813600</ts>
    <user>Xiao</user>
    <text>Sure, I asked in the &lt;#C03S1KBA2|clojure&gt; channel after all. Too bad i'm wanting it for clojurescript, oops :man-facepalming:</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:36:53.814100</ts>
    <user>Xiao</user>
    <text>Looks like it can translate fairly easily</text>
  </message>
  <message conversation_id="1108">
    <ts>2019-04-11T16:37:10.814800</ts>
    <user>Xiao</user>
    <text>`(.indexOf (make-array coll) item)` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:10:39.816500</ts>
    <user>Dann</user>
    <text>&lt;@Dulcie&gt; doesn't that when ensure that you return nil if ~you step past the index~ the item isn't found?</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:12:29.816800</ts>
    <user>Dulcie</user>
    <text>It does</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:12:40.817100</ts>
    <user>Dulcie</user>
    <text>I wasn't sure what the requirement was for that</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:12:44.817300</ts>
    <user>Dulcie</user>
    <text>¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="1110">
    <ts>2019-04-11T17:28:04.818900</ts>
    <user>Suanne</user>
    <text>Is there a more semantic way to do a catch all in a `cond`?</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:28:30.819400</ts>
    <user>Jasmine</user>
    <text>`:else` is traditional</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:28:40.819700</ts>
    <user>Jasmine</user>
    <text>all keywords are logically true</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:28:59.820200</ts>
    <user>Tammera</user>
    <text>oh! today I learned</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:29:05.820400</ts>
    <user>Jasmine</user>
    <text>so you could also just say `:catch-all` if you wanted :)</text>
  </message>
  <message conversation_id="1110">
    <ts>2019-04-11T17:29:18.821000</ts>
    <user>Suanne</user>
    <text>Ahh interesting, thanks!</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:29:31.821400</ts>
    <user>Suanne</user>
    <text>`:else` is the convention then.</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:29:34.821600</ts>
    <user>Jasmine</user>
    <text>it is</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:29:43.821900</ts>
    <user>Jasmine</user>
    <text>on occasion, I add a bit of whimsy</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:29:53.822100</ts>
    <user>Tammera</user>
    <text>I just kinda assumed `:else` was something `cond` understood</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:30:06.822500</ts>
    <user>Suanne</user>
    <text>I like the word `:otherwise`, so I’ll probably go with that.</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:30:16.822600</ts>
    <user>Tammera</user>
    <text>but … ofcourse not</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:33:31.823000</ts>
    <user>Dann</user>
    <text>there are linters that accept :else but not :otherwise</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:34:53.823300</ts>
    <user>Tammera</user>
    <text>always make code the least surprising right :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:37:27.823500</ts>
    <user>Suanne</user>
    <text>Ok, you’ve convinced me.</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:43:20.824200</ts>
    <user>Becki</user>
    <text>i like a convention in `cond-&amp;gt;` to use `:always`</text>
  </message>
  <message conversation_id="1111">
    <ts>2019-04-11T17:48:01.824500</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (cond-&amp;gt; 1
:please inc
:don't  inc
:do     inc
:this   inc)
5
user=&amp;gt; 
``` (runs away)</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:48:44.825200</ts>
    <user>Tammera</user>
    <text>Even apostrophes in keywords, you madman</text>
  </message>
  <message conversation_id="1111">
    <ts>2019-04-11T17:49:46.825400</ts>
    <user>Celestine</user>
    <text>`:&amp;lt;&amp;gt;&amp;lt;` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1111">
    <ts>2019-04-11T17:50:48.825600</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; :&amp;lt;&amp;gt;:&amp;lt;&amp;gt;:&amp;lt;&amp;gt;
:&amp;lt;&amp;gt;:&amp;lt;&amp;gt;:&amp;lt;&amp;gt;
user=&amp;gt;``` (I was a bit surprised multiple `:` were accepted!)</text>
  </message>
  <message conversation_id="1111">
    <ts>2019-04-11T17:52:25.826000</ts>
    <user>Jasmine</user>
    <text>"A symbol can contain one or more non-repeating ':'s" and "Keywords are like symbols"</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T17:53:01.826200</ts>
    <user>Jasmine</user>
    <text>that said, I wouldn't recommend it :)</text>
  </message>
  <message conversation_id="1111">
    <ts>2019-04-11T18:06:21.826400</ts>
    <user>Celestine</user>
    <text>Ah, thank you. I'm sometimes not quite sure whether something is intentionally accepted (and documented) or not when it comes to literal keywords :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T18:07:52.826600</ts>
    <user>Celestine</user>
    <text>(and UTF-8 just adds a whole newer layer of fun on top of all this!)</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T18:08:07.826800</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (let [💩 42] (* 💩 💩))
1764```</text>
  </message>
  <message conversation_id="1112">
    <ts>2019-04-11T18:14:24.827200</ts>
    <user>Faustino</user>
    <text>I forgot what the -&amp;gt; does</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T18:17:45.828100</ts>
    <user>Celestine</user>
    <text>`-&amp;gt;` is "thread first" so it threads the value (initially `1`) into each of the expressions for which the test expression is truthy.</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T18:18:23.828900</ts>
    <user>Celestine</user>
    <text>So it ends up being `(-&amp;gt; 1 inc inc inc inc)` (because all those keywords are truthy) which is `(inc (inc (inc (inc 1))))`</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T18:18:58.829100</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/guides/threading_macros&gt;</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T18:19:44.829500</ts>
    <user>Jasmine</user>
    <text>although that page probably needs some better examples</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T18:20:41.830000</ts>
    <user>Celestine</user>
    <text>Yeah, especially around the use of `as-&amp;gt;` since it doesn't show it nested inside `-&amp;gt;` :disappointed:</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T18:21:14.830500</ts>
    <user>Celestine</user>
    <text>`(-&amp;gt; 42 inc (as-&amp;gt; x (* x x)) dec)`</text>
  </message>
  <message conversation_id="1109">
    <ts>2019-04-11T18:26:05.833500</ts>
    <user>Tammera</user>
    <text>Well that makes more sense in non Latin scripts ^^. I kinda wonder whether there are many people using bindings with non-Latin names</text>
  </message>
  <message conversation_id="1113">
    <ts>2019-04-11T18:43:53.834200</ts>
    <user>Gonzalo</user>
    <text>is there any way to combine regexes, other than combining strings and then using re-pattern?</text>
  </message>
  <message conversation_id="1113">
    <ts>2019-04-11T18:44:31.834800</ts>
    <user>Gonzalo</user>
    <text>I already have regexes and i need to concatenate them to find a larger pattern</text>
  </message>
  <message conversation_id="1113">
    <ts>2019-04-11T18:49:26.835700</ts>
    <user>Dann</user>
    <text>&lt;@Gonzalo&gt; this is the full API - I think making strings, combining, then making a new pattern is the most direct thing &lt;https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html&gt;</text>
  </message>
  <message conversation_id="1113">
    <ts>2019-04-11T18:52:49.836100</ts>
    <user>Gonzalo</user>
    <text>Thanks &lt;@Dann&gt;</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:42:05.839200</ts>
    <user>Vinnie</user>
    <text>I have a curious situation where attempting to evaluate any expressions (even something as simple as `1`) inside of a Clojail sandbox on an app running inside a Docker container trips an exception:
```
Exception in thread "async-dispatch-8" java.security.AccessControlException: access denied ("java.io.FilePermission" "/var/log/yetibot/yetibot.log" "read")
```
the app is completely crippled after this point (any sort of IO will fail), even outside of the sandbox.

this *only* happens when running the Docker container on Digital Ocean.
I run the same image on an internal VM at work and it works fine. it also works locally (outside of Docker).

ideas? :thinking_face:</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:43:10.839300</ts>
    <user>Vinnie</user>
    <text>code is really basic &lt;https://github.com/yetibot/yetibot/blob/b71d354d6868942bb860b3e6772a18601daf39d9/src/yetibot/commands/clojure.clj#L15-L16&gt;</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:43:41.839600</ts>
    <user>Celestine</user>
    <text>I assume it is tripping up trying to write the log file...?</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:43:53.839800</ts>
    <user>Celestine</user>
    <text>(although it says "read")</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:44:03.840000</ts>
    <user>Vinnie</user>
    <text>yes, though writing logs should happen outside of the sandbox, and normally works fine</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:44:11.840200</ts>
    <user>Vinnie</user>
    <text>it's only when i try invoking the sandbox that it starts happening.</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:44:19.840400</ts>
    <user>Vinnie</user>
    <text>and once it happens, any http request also trips the same exception</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:44:45.840600</ts>
    <user>Vinnie</user>
    <text>only way to recover is to restart the docker container as far as i know</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:45:02.840800</ts>
    <user>Vinnie</user>
    <text>i also put a very permissive java policy file inside the docker image. i don't know much about java policy though.</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:45:59.841000</ts>
    <user>Vinnie</user>
    <text>this is what it looks like when attempting to make an http request after it's been crippled:

```
java.security.AccessControlException: access denied ("java.net.NetPermission" "getProxySelector")
        at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)
        at java.base/java.security.AccessController.checkPermission(AccessController.java:895)
        at java.base/java.lang.SecurityManager.checkPermission(SecurityManager.java:322)
        at java.base/java.net.ProxySelector.getDefault(ProxySelector.java:96)
        at clj_http.core$get_route_planner.invokeStatic(core.clj:227)
```</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:46:38.841200</ts>
    <user>Vinnie</user>
    <text>the very mysterious part is why the same docker image works on one VM but not on a DigitalOcean VM.</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:48:38.841400</ts>
    <user>Celestine</user>
    <text>I'd be tempted to follow a Digital Ocean support path at that point I think... ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="1114">
    <ts>2019-04-11T19:49:12.841600</ts>
    <user>Vinnie</user>
    <text>yeah. i might try that. i'm pretty baffled</text>
  </message>
  <message conversation_id="1115">
    <ts>2019-04-12T04:26:26.002200</ts>
    <user>Clarine</user>
    <text>Best way to get the butlast element of a seq?
```
(first (take-last 2 coll))
```
?</text>
  </message>
  <message conversation_id="1115">
    <ts>2019-04-12T04:45:12.003200</ts>
    <user>Lavonia</user>
    <text>```(first (rest (reverse coll)))``` maybe?
and ```(first (rest (rseq coll)))``` for a vector I think</text>
  </message>
  <message conversation_id="1115">
    <ts>2019-04-12T04:46:58.003800</ts>
    <user>Clarine</user>
    <text>`reverse` is not lazy, so I think that would be worse than take-last</text>
  </message>
  <message conversation_id="1116">
    <ts>2019-04-12T05:19:25.005600</ts>
    <user>Tarsha</user>
    <text>`(last (drop-last col))` ?. also linear though i’m not sure you can prevent that</text>
  </message>
  <message conversation_id="1115">
    <ts>2019-04-12T05:35:31.006300</ts>
    <user>Clarine</user>
    <text>last + drop last is going to walk through the collection twice I think</text>
  </message>
  <message conversation_id="1117">
    <ts>2019-04-12T05:40:13.008300</ts>
    <user>Jeannette</user>
    <text>am I doing something unidiomatic if I end up with a channel inside a channel?</text>
  </message>
  <message conversation_id="1118">
    <ts>2019-04-12T06:14:13.009200</ts>
    <user>Merna</user>
    <text>I don't know about unidiomatic but I think I'd struggle to understand what was going on of I came across something like that</text>
  </message>
  <message conversation_id="1118">
    <ts>2019-04-12T06:15:58.010000</ts>
    <user>Henry</user>
    <text>If you're doing request-reply over channels, putting a reply-to channel along with the request is a reasonable way to do it I think.</text>
  </message>
  <message conversation_id="1115">
    <ts>2019-04-12T06:23:40.010800</ts>
    <user>Adria</user>
    <text>&lt;@Clarine&gt; There's `take-last`</text>
  </message>
  <message conversation_id="1115">
    <ts>2019-04-12T06:24:07.011000</ts>
    <user>Clarine</user>
    <text>yeah, see above :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1115">
    <ts>2019-04-12T07:09:44.012100</ts>
    <user>Leeann</user>
    <text>Got stung by `sort-by` today :disappointed:</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:10:24.012600</ts>
    <user>Leeann</user>
    <text>It has two arities, one with, and one without a comparator:</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:10:25.012800</ts>
    <user>Leeann</user>
    <text>&lt;https://clojuredocs.org/clojure.core/sort-by&gt;</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:11:39.014100</ts>
    <user>Leeann</user>
    <text>What stung me is that the one without the comparator, uses `compare` which returns -1, 0, 1 (as one would expect) as a comparator, whereas the arity with a user-supplied comparator expects a comparator which returns a boolean value.</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:13:24.014800</ts>
    <user>Leeann</user>
    <text>Hmm, reading through the implementation, this seems even stranger, that indicates that I’m wrong :disappointed:</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:16:23.015300</ts>
    <user>Leeann</user>
    <text>Ok, so the problem isn’t there it’s that I had big numbers :confused:</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:17:45.015500</ts>
    <user>Leeann</user>
    <text>```
user=&amp;gt; (sort - [23413461236412630 10000000000000000 1 0 -1])
(-1 0 1 23413461236412630 10000000000000000)
user=&amp;gt;
```</text>
  </message>
  <message conversation_id="1115">
    <ts>2019-04-12T07:24:18.016500</ts>
    <user>Justin</user>
    <text>I don’t understand the `(sort -)`, that’s not proper comparator. Do you want `(sort &amp;gt;)` perhaps?</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:24:29.016800</ts>
    <user>Leeann</user>
    <text>Yeah,</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:25:02.017800</ts>
    <user>Leeann</user>
    <text>I guess I was thinking in terms of the result of running a comparator on two things, and not on a thing that implemented `Comparator` in java.</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:25:08.018100</ts>
    <user>Leeann</user>
    <text>(as the doc clearly stated, my bad)</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:25:39.019100</ts>
    <user>Leeann</user>
    <text>a (untyped) comparator is a binary operation that returns -1, 0, 1</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:25:48.019400</ts>
    <user>Justin</user>
    <text>Alright :) `-`  just happens to work, a function of two numbers returning an int…</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:26:41.020300</ts>
    <user>Leeann</user>
    <text>I guess a comparator is a `(whatever, whatever) -&amp;gt; negative, 0, positive`</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:27:38.021400</ts>
    <user>Leeann</user>
    <text>I think that’s the standard way of doing sorting chars  in C. Just subtract the chars from each other and you’re good.</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:28:47.022700</ts>
    <user>Leeann</user>
    <text>What’s funny is that `-` seems to work as a comparator for numbers that are integers, but not for longs…</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:29:20.023200</ts>
    <user>Justin</user>
    <text>pretty much, Java already comes with that, Clojure builds on top. `(sort #(compare %2 %1) [\a \b \c])`</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:29:37.023500</ts>
    <user>Leeann</user>
    <text>```
user=&amp;gt; (sort - [1, 2 -3, 0, 5, 10, 100, -1000])
(-1000 -3 0 1 2 5 10 100)
user=&amp;gt;
```</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T07:45:52.024100</ts>
    <user>Justin</user>
    <text>that’s likely integer truncation in action, you can see with `(map (memfn intValue) [23413461236412630 10000000000000000 1 0 -1])`</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:19:12.029200</ts>
    <user>Leeann</user>
    <text>`sort` seems to bottom out with this `let` here:</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:19:20.029500</ts>
    <user>Leeann</user>
    <text>```
     (let [a (to-array coll)]
       (. java.util.Arrays (sort a comp))
       (with-meta (seq a) (meta coll)))
```</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:20:00.030000</ts>
    <user>Leeann</user>
    <text>And I guess I’m not able to parse ` (. java.util.Arrays (sort a comp))`</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:20:43.030400</ts>
    <user>Leeann</user>
    <text>which `sort` is the `sort` in ` (. java.util.Arrays (sort a comp))` referring to?</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:22:21.031000</ts>
    <user>Leeann</user>
    <text>It should be referring to this:</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:22:22.031100</ts>
    <user>Leeann</user>
    <text>&lt;https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort(T[],%20java.util.Comparator)&gt;</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:24:57.031400</ts>
    <user>Leeann</user>
    <text>The plot thickens :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:25:01.031600</ts>
    <user>Leeann</user>
    <text>`public abstract class AFunction extends AFn implements IObj, Comparator, Fn, Serializable `</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:32:58.032800</ts>
    <user>Leeann</user>
    <text>and becomes even thicker:</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:33:09.033200</ts>
    <user>Leeann</user>
    <text>```
public int compare(Object o1, Object o2){
        Object o = invoke(o1, o2);

        if(o instanceof Boolean)
                {
                if(RT.booleanCast(o))
                        return -1;
                return RT.booleanCast(invoke(o2,o1))? 1 : 0;
                }

        Number n = (Number) o;
        return n.intValue();
}
```</text>
  </message>
  <message conversation_id="1119">
    <ts>2019-04-12T08:34:36.034200</ts>
    <user>Leeann</user>
    <text>which probably means that sorting by a function which can return numbers which are bigger than `Integers` may or may not work. I guess.</text>
  </message>
  <message conversation_id="1120">
    <ts>2019-04-12T09:06:53.035000</ts>
    <user>Clarine</user>
    <text>any good clojure wrappers for lmdb-java?</text>
  </message>
  <message conversation_id="1121">
    <ts>2019-04-12T09:52:58.035100</ts>
    <user>Ming</user>
    <text>&lt;https://github.com/shriphani/clj-lmdb&gt;

&lt;https://github.com/hiteshjasani/clj-lmdbj&gt;

I found these</text>
  </message>
  <message conversation_id="1121">
    <ts>2019-04-12T09:53:15.035500</ts>
    <user>Clarine</user>
    <text>Just tried the latter one</text>
  </message>
  <message conversation_id="1121">
    <ts>2019-04-12T09:53:17.035700</ts>
    <user>Clarine</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1121">
    <ts>2019-04-12T09:54:40.036700</ts>
    <user>Epifania</user>
    <text>anyone have any good recommendations for a library to help doing benchmarks of external binaries?</text>
  </message>
  <message conversation_id="1121">
    <ts>2019-04-12T09:55:44.037500</ts>
    <user>Epifania</user>
    <text>(I don't want to benchmark things that are written in clojure/java, so basically will be using `java.shell` to run the programs but like to use clojure for setup/timing/teardown)</text>
  </message>
  <message conversation_id="1121">
    <ts>2019-04-12T10:21:58.038000</ts>
    <user>Clarine</user>
    <text>&lt;@Epifania&gt; you mean record the time of external processes?</text>
  </message>
  <message conversation_id="1121">
    <ts>2019-04-12T10:22:26.038300</ts>
    <user>Clarine</user>
    <text>&lt;https://github.com/clj-commons/conch&gt; is convenient for scripting</text>
  </message>
  <message conversation_id="1121">
    <ts>2019-04-12T10:23:55.039300</ts>
    <user>Epifania</user>
    <text>&lt;@Clarine&gt; was looking for a framework-like tool to help me structure the tests themselves, but thinking about it, wouldn't be hard to do myself. Conch looks very helpful for other things, so thanks for sharing that</text>
  </message>
  <message conversation_id="1122">
    <ts>2019-04-12T11:03:29.040500</ts>
    <user>Priscila</user>
    <text>anyone uses cloudfoundry?</text>
  </message>
  <message conversation_id="1122">
    <ts>2019-04-12T12:56:25.042200</ts>
    <user>Ana</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1123">
    <ts>2019-04-12T13:25:46.044000</ts>
    <user>Ivana</user>
    <text>For those interested in writing fast scripts in Clojure this might be interesting &lt;https://github.com/jeroenvandijk/clojure-scripting&gt;</text>
  </message>
  <message conversation_id="1123">
    <ts>2019-04-12T13:27:59.044400</ts>
    <user>Arvilla</user>
    <text>Hey all, learn-awesome is an open-source, community effort towards collecting links to awesome learning resources categorized by topics, formats, &amp;amp; difficulty. The idea is to build humanity's universal skills graph. The page about Clojure could use some work though. Would appreciate people here sending pull requests :slightly_smiling_face: &lt;https://github.com/learn-awesome/learn-awesome/blob/master/programming-languages/clojure.md&gt;</text>
  </message>
  <message conversation_id="1124">
    <ts>2019-04-12T13:51:32.044900</ts>
    <user>Maximina</user>
    <text>Anyone tried to use &lt;https://www.testcontainers.org/&gt; for their integration tests but for Clojure?</text>
  </message>
  <message conversation_id="1124">
    <ts>2019-04-12T13:52:12.045000</ts>
    <user>Maximina</user>
    <text>I only found a java library (which we can use i guess)</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:28:34.049800</ts>
    <user>Onita</user>
    <text>not sure if this would be better in beginners, but it looks like my repl in cider is actively running some computation and blocking others. is there any way to tell what’s going on, or do i need to profile the jvm activity?</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:31:30.050500</ts>
    <user>Rosaline</user>
    <text>That is very unlikely</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:32:21.051600</ts>
    <user>Rosaline</user>
    <text>well, I guess it depends on how you read your statement</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:32:30.052200</ts>
    <user>Dann</user>
    <text>you can get all the stacktraces in a vm without a profiler</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:32:42.052600</ts>
    <user>Rosaline</user>
    <text>I read it has "nrepl is blocking other threads from doing things"</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:33:02.053200</ts>
    <user>Onita</user>
    <text>no, not quite</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:33:08.053700</ts>
    <user>Rosaline</user>
    <text>if you mean "I sent something to nrepl and it is still running, and I can send anything else to nrepl until it is done, what do I do?"</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:33:09.053800</ts>
    <user>Onita</user>
    <text>just the repl is unresponsive, presumably because it’s doing something else</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:33:46.055000</ts>
    <user>Dann</user>
    <text>with jstack, or even sending the process a signal, you can get the stack traces, and it should be pretty straightforward to see which one would be blocking io for the repl thread</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:33:57.055300</ts>
    <user>Rosaline</user>
    <text>a lot of it is going to highly specific to the nrepl client, and any middleware you are using</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:34:09.055800</ts>
    <user>Dann</user>
    <text>but you can also get the impression it's blocked because of unclosed parens or strings</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:34:21.056000</ts>
    <user>Rosaline</user>
    <text>so you might be better off asking in &lt;#C0617A8PQ|cider&gt;</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:34:53.056700</ts>
    <user>Dann</user>
    <text>also, nrepl itself is a threaded implementation of a network protocol, you can disconnect or reconnect, no matter what the active IO is doing in one client</text>
  </message>
  <message conversation_id="1125">
    <ts>2019-04-12T16:37:40.057400</ts>
    <user>Onita</user>
    <text>gah, ok. it looks like my panacea of mashing c-c has reached its end-of-life. thanks</text>
  </message>
  <message conversation_id="1126">
    <ts>2019-04-12T17:00:36.057600</ts>
    <user>Magdalena</user>
    <text>[ANN] Cognitect Labs' aws-api 0.8.292 &lt;https://groups.google.com/forum/#!topic/clojure/uvOzyfBrbyc&gt;</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:29:46.058400</ts>
    <user>Clarine</user>
    <text>I’m running this code on Java source code from OpenJDK in a Java 11 environment:
```
$ clj
Clojure 1.10.0
user=&amp;gt; (import '[javax.tools ToolProvider DocumentationTool])
javax.tools.DocumentationTool
(let [dt (ToolProvider/getSystemDocumentationTool)]
    (.run dt nil nil nil
          (into-array ["-public"
                       "--source-path" "/Users/Borkdude/git/openjdk-jdk11/src/java.base/share/classes"
                       "java.lang"])))
/Users/Borkdude/git/openjdk-jdk11/src/java.base/share/classes/module-info.java:307: error: ';' expected
        &lt;http://jdk.crypto.ec|jdk.crypto.ec&gt;
                     ^
/Users/Borkdude/git/openjdk-jdk11/src/java.base/share/classes/module-info.java:309: error: ';' expected
        &lt;http://jdk.crypto.ec|jdk.crypto.ec&gt;
                     ^
2 errors
1
```
What’s wrong here?</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:31:17.058800</ts>
    <user>Rosaline</user>
    <text>module-info.java is not actually java source, if I recall</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:31:57.059100</ts>
    <user>Clarine</user>
    <text>I would expect that java tools could cope with this?</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:32:09.059400</ts>
    <user>Clarine</user>
    <text>or should I blacklist these files somehow</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:34:41.060200</ts>
    <user>Rosaline</user>
    <text>it may depend on if the tools version you are using understands modules</text>
  </message>
  <message conversation_id="1128">
    <ts>2019-04-12T17:43:54.060600</ts>
    <user>Jasmine</user>
    <text>module-info and package-info are intentionally invalid java source filenames</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:44:22.061100</ts>
    <user>Jasmine</user>
    <text>such that their addition was guaranteed not to collide with existing source files</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:48:20.061700</ts>
    <user>Clarine</user>
    <text>what should I do with this?
```
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by clojure.lang.InjectedInvoker/0x0000000800232040 (file:/Users/Borkdude/.m2/repository/org/clojure/clojure/1.10.0/clojure-1.10.0.jar) to method com.sun.tools.javac.file.JavacFileManager.getJavaFileObjects(java.io.File[])
```</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:49:07.062100</ts>
    <user>Clarine</user>
    <text>the code looks like this inside a  `let`:
```
dt (ToolProvider/getSystemDocumentationTool)
fm (.getStandardFileManager dt nil nil nil)
files (.getJavaFileObjects fm (into-array java.io.File [f]))
```</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:49:08.062300</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/guides/faq#illegal_access&gt;</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:49:57.062800</ts>
    <user>Marlyn</user>
    <text>`--illegal-access=debug` will give you a trace</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:50:01.062900</ts>
    <user>Jasmine</user>
    <text>making it non-reflective is prob your best bet</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:50:04.063100</ts>
    <user>Marlyn</user>
    <text>^</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:50:28.063500</ts>
    <user>Jasmine</user>
    <text>`(.getJavaFileObjects fm (into-array java.io.File [f]))` is reflective</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:50:41.063800</ts>
    <user>Jasmine</user>
    <text>type hint fm to the generic interface and you're probably  good</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:50:58.064100</ts>
    <user>Jasmine</user>
    <text>fm  is probably typed as the concrete actual type</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:52:20.064700</ts>
    <user>Jasmine</user>
    <text>`(.getJavaFileObjects ^javax.tools.StandardJavaFileManager fm (into-array java.io.File [f]))`</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:53:41.065200</ts>
    <user>Clarine</user>
    <text>well, the warning from warn-on-reflection says:
```
Reflection warning, clj_kondo/Doclet.clj:62:15 - call to method getJavaFileObjects on javax.tools.StandardJavaFileManager can't be resolved (argument types: unknown)
```</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:54:59.065600</ts>
    <user>Clarine</user>
    <text>it’s this method: &lt;https://docs.oracle.com/javase/9/docs/api/javax/tools/StandardJavaFileManager.html#getJavaFileObjects-java.io.File...-&gt;</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:56:05.066300</ts>
    <user>Jasmine</user>
    <text>which has File[], Path[], and String[] overrides</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:56:37.066800</ts>
    <user>Jasmine</user>
    <text>it does seem like it should know enough to work there but maybe the reflection stuff isn't matching componentype?</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:57:02.067300</ts>
    <user>Clarine</user>
    <text>actually this works too:
```
files (.getJavaFileObjectsFromFiles fm [f])
```
without a warning</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:57:56.067600</ts>
    <user>Jasmine</user>
    <text>I'd have to look more deeply to understand why</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T17:58:15.068000</ts>
    <user>Jasmine</user>
    <text>could maybe hint `^"[Ljava.io.File;"`</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:13:46.069300</ts>
    <user>Onita</user>
    <text>could you guys help me decipher what is going on here? i got this from a thread dump, and i feel like i may have my jetty server configured incorrectly
```
"qtp247078080-91" #91 prio=5 os_prio=31 tid=0x00007fd0b02d1800 nid=0xea03 waiting for monitor entry [0x0000700012c87000]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at ring.middleware.reload$reloader$fn__5707.invoke(reload.clj:10)
        - waiting to lock &amp;lt;0x0000000789c20aa0&amp;gt; (a java.util.concurrent.LinkedBlockingQueue)
        at ring.middleware.reload$wrap_reload$fn__5718.invoke(reload.clj:38)
        at common.server$wrap_exception_handling$fn__6898.invoke(server.clj:35)
        at ring.middleware.ratelimit$wrap_ratelimit$fn__5858.invoke(ratelimit.clj:50)
        at ring.middleware.json$wrap_json_response$fn__5126.invoke(json.clj:87)
        at ring.middleware.json$wrap_json_body$fn__5101.invoke(json.clj:44)
        at ring.middleware.content_type$wrap_content_type$fn__5078.invoke(content_type.clj:34)
        at ring.middleware.not_modified$wrap_not_modified$fn__5178.invoke(not_modified.clj:53)
        at ring.middleware.keyword_params$wrap_keyword_params$fn__5158.invoke(keyword_params.clj:36)
        at ring.middleware.params$wrap_params$fn__5196.invoke(params.clj:67)
        at ring.middleware.cors$handle_cors.invokeStatic(cors.clj:171)
        at ring.middleware.cors$handle_cors.invoke(cors.clj:160)
        at ring.middleware.cors$wrap_cors$fn__8210.invoke(cors.clj:185)
        at ring.middleware.session$wrap_session$fn__6847.invoke(session.clj:108)
        at ring.adapter.jetty$proxy_handler$fn__5043.invoke(jetty.clj:25)
        at ring.adapter.jetty.proxy$org.eclipse.jetty.server.handler.AbstractHandler$ff19274a.handle(Unknown Source)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
        at org.eclipse.jetty.server.Server.handle(Server.java:499)
        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)
        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:258)
        at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)
        at java.lang.Thread.run(Thread.java:748)
```</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T18:14:46.069900</ts>
    <user>Onita</user>
    <text>i have an api being served with a series of middlewares, but i’m not sure where in this stack the problem actually is</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T18:15:30.070300</ts>
    <user>Marlyn</user>
    <text>looks like a deadlock here: &lt;https://github.com/ring-clojure/ring/blob/master/ring-devel/src/ring/middleware/reload.clj#L11&gt;</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T18:17:27.071200</ts>
    <user>Onita</user>
    <text>hmm. so perhaps i tried to reload code too many times?</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:17:46.071500</ts>
    <user>Onita</user>
    <text>it seems like this middleware shouldn’t be in production. is that correct?</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:20:25.071700</ts>
    <user>Rosaline</user>
    <text>yes</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:20:41.071900</ts>
    <user>Onita</user>
    <text>cool.</text>
  </message>
  <message conversation_id="1127">
    <ts>2019-04-12T18:24:43.073600</ts>
    <user>Rosaline</user>
    <text>if that is actually a deadlock there should be another thread in the stacktrace in the critical section and not leaving it for some reason</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:25:43.074000</ts>
    <user>Onita</user>
    <text>yeah there’s one other mention of it in the dump</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:26:04.074400</ts>
    <user>Rosaline</user>
    <text>but if you got a single dump that is just where the threads where at that time</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:26:23.074700</ts>
    <user>Rosaline</user>
    <text>it isn't an indication of anything</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:26:46.075200</ts>
    <user>Onita</user>
    <text>i took it again and it showed the same thing; in addition the application isn’t responding anymore</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:26:56.075400</ts>
    <user>Onita</user>
    <text>forgot to mention that</text>
  </message>
  <message conversation_id="1129">
    <ts>2019-04-12T18:28:50.076300</ts>
    <user>Rosaline</user>
    <text>I would expect to see a lot more threads stuck then, I think the jetty default threadpool might be 50? every single one would stop in the same place</text>
  </message>
  <message conversation_id="1130">
    <ts>2019-04-12T21:41:55.078200</ts>
    <user>Faustino</user>
    <text>I just learned that Clojure and Scala are both using tries for their list data types (persistent/immutable). But Elixir uses linked lists which can be spread all over the RAM (inefficient). Could this contribute to Clojure/Scala being better at data crunching? And Elixir is more for horizontal scaling because it doesn’t share memory.</text>
  </message>
  <message conversation_id="1130">
    <ts>2019-04-12T21:44:26.078400</ts>
    <user>Rosaline</user>
    <text>No</text>
  </message>
  <message conversation_id="1131">
    <ts>2019-04-12T23:04:07.079100</ts>
    <user>Faustino</user>
    <text>I made a mistake. Actually, Elixir can do vertical and horizontal scaling. It’s just not made for sharing memory (number crunching) like Clojure can do?</text>
  </message>
  <message conversation_id="1132">
    <ts>2019-04-13T02:29:29.080400</ts>
    <user>Suanne</user>
    <text>What is the difference between using `require` and `:require`?

This code using `require` returns an error:

```
(ns hello-world.core
  (require [clojure.set :as set])
  (:gen-class))
```

The error message is “syntax error macroexpanding clojure.core/ns”.

But this code using `:require` compiles just fine:

```
(ns hello-world.core
  (:require [clojure.set :as set])
  (:gen-class))
```</text>
  </message>
  <message conversation_id="1132">
    <ts>2019-04-13T02:34:15.081400</ts>
    <user>Sixta</user>
    <text>&lt;@Suanne&gt; the first is invalid inside of ns, it used to work by coincidence, now it doesn't.</text>
  </message>
  <message conversation_id="1132">
    <ts>2019-04-13T02:36:20.082300</ts>
    <user>Suanne</user>
    <text>&lt;@Sixta&gt; And which is conventional to use, `:require` inside of `ns` or `require` outside of it?</text>
  </message>
  <message conversation_id="1130">
    <ts>2019-04-13T02:41:07.082800</ts>
    <user>Andera</user>
    <text>What's the ":-"</text>
  </message>
  <message conversation_id="1130">
    <ts>2019-04-13T02:41:30.083200</ts>
    <user>Andera</user>
    <text>Is it part of spec?</text>
  </message>
  <message conversation_id="1130">
    <ts>2019-04-13T02:42:01.083800</ts>
    <user>Andera</user>
    <text>It seems it's some kind of type hinting?</text>
  </message>
  <message conversation_id="1130">
    <ts>2019-04-13T02:46:43.085300</ts>
    <user>Andera</user>
    <text>E.g. (s/defn make-consumer :- FranzConsumer 
...)</text>
  </message>
  <message conversation_id="1132">
    <ts>2019-04-13T03:15:10.085400</ts>
    <user>Sixta</user>
    <text>Inside of ns is conventional</text>
  </message>
  <message conversation_id="1132">
    <ts>2019-04-13T03:15:31.085600</ts>
    <user>Sixta</user>
    <text>It's a type hint in the library schema</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T07:11:07.086900</ts>
    <user>Clarine</user>
    <text>Is it safe to assume that Clojure aliases dominate over Java class imports?
```
(ns foo (:import [java.lang Thread]) (:require [clojure.core :as Thread]))
(Thread/+ 1 2 3) ;;=&amp;gt; 6
```</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T07:46:11.089100</ts>
    <user>Justin</user>
    <text>They seem to integrate “nicely” &lt;@Clarine&gt; but wouldn’t put that in my code. Do you have an use case in mind?
```
(ns foo (:require [clojure.core :as Thread]))
(Thread/+ 1 1) ;; 2
(Thread. "Hello") ;; java.lang.Thread 0x49872d67
```
(BTW No need to import Thread)</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T07:46:41.089500</ts>
    <user>Clarine</user>
    <text>well, it clashes when you call a static method on Thread</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T07:47:02.090100</ts>
    <user>Clarine</user>
    <text>I have no use case, but when analyzing code it’s good to know what to expect</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T07:47:28.090300</ts>
    <user>Justin</user>
    <text>yeah, just tried. So no nice integration.</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T07:47:55.090800</ts>
    <user>Clarine</user>
    <text>I think Clojure requires/aliases are prioritized, so I’ll assume that for now</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T07:48:11.091000</ts>
    <user>Justin</user>
    <text>evidence seems to confirm that</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T13:40:33.091700</ts>
    <user>Meagan</user>
    <text>so I’m thinking of doing a dirty thing and making some breaking changes to a library I maintain</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T13:41:54.092800</ts>
    <user>Meagan</user>
    <text>mainly re-naming some functions. I’m curious if anyone’s ever done work on creating syntax transforms for Clojure that can be run on projects to help with migrations like this.</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T14:47:59.093500</ts>
    <user>Macy</user>
    <text>&lt;@Meagan&gt; perhaps something like this: &lt;https://github.com/boot-clj/boot/blob/master/boot/core/src/boot/core.clj#L343-L351&gt;</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T14:48:14.093900</ts>
    <user>Macy</user>
    <text>you can see it in use on line 357 of that file, for example</text>
  </message>
  <message conversation_id="1134">
    <ts>2019-04-13T14:54:11.094000</ts>
    <user>Lavonia</user>
    <text>I believe the mainstream opinion is, don't break consumers. Have you considered deprecating instead of breaking?</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T14:55:41.094200</ts>
    <user>Meagan</user>
    <text>I have :slightly_smiling_face: these functions are really a part of a set of idioms and naming conventions that I want to change for users of my library</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T14:58:03.094400</ts>
    <user>Meagan</user>
    <text>I’d prefer to rename them and then give my consumers a utility to convert their code from the old naming contention to the new naming convention</text>
  </message>
  <message conversation_id="1135">
    <ts>2019-04-13T15:43:57.094700</ts>
    <user>Faustino</user>
    <text>I think it’s a deadlock too. After reviewing some videos on C concurrency… I can see the monitoring thread in the error. I am curious though… I thought Clojure tries to avoid using synchronization locking concurrency? Is the Clojure code using some Java locking code?</text>
  </message>
  <message conversation_id="1135">
    <ts>2019-04-13T15:44:35.094900</ts>
    <user>Celestine</user>
    <text>I would strongly recommend introducing a new namespace with the new API and announcing to your users that the original API namespace is deprecated and encourage them to switch to the new namespace.</text>
  </message>
  <message conversation_id="1135">
    <ts>2019-04-13T15:45:14.095100</ts>
    <user>Celestine</user>
    <text>But then keep the old API namespace around for a long time (just don't maintain it).</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T16:05:55.095300</ts>
    <user>Meagan</user>
    <text>I think even with deprecation, it would still be cool to have utilities that could help refactor code when API migrations occur. it sounds like this hasn’t been something people have done in Clojure</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T16:10:24.095600</ts>
    <user>Meagan</user>
    <text>hah, and then I recalled &lt;https://github.com/xsc/rewrite-clj&gt; :smile:</text>
  </message>
  <message conversation_id="1133">
    <ts>2019-04-13T16:28:29.096400</ts>
    <user>Celestine</user>
    <text>Yeah, a migration utility could well be a good idea, depending on how much code out there depends on your library.</text>
  </message>
  <message conversation_id="1136">
    <ts>2019-04-13T17:03:18.096900</ts>
    <user>Tammera</user>
    <text>does it make sense to use leiningen and tools.deps side-by-side?</text>
  </message>
  <message conversation_id="1136">
    <ts>2019-04-13T17:04:13.097000</ts>
    <user>Tammera</user>
    <text>like with lein-tool-deps. I am asking because tool.deps has nice git integration</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-13T17:30:38.097600</ts>
    <user>Celestine</user>
    <text>Based on my experience writing and using `boot-tools-deps` -- Boot + `deps.edn` -- I would say that, ultimately, you'd be better off just switching to `clj` completely.</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-13T17:31:21.097800</ts>
    <user>Celestine</user>
    <text>These integrations tend to have limits. Basic stuff works well. More complex stuff tends to have weird behaviors.</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-13T17:34:01.098000</ts>
    <user>Celestine</user>
    <text>Boot and Leiningen might be different enough that the limitations I hit with Boot don't impact you in Leiningen in the same way... If I were you, I'd chat with Rick about any known limitations (when he's around).</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-13T17:35:36.098200</ts>
    <user>Tammera</user>
    <text>right, thanks! I must admit that I spent as little time as possible dealing with _configuring_ tooling, but I start to see that not having Git deps is starting to be a nuisance</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-13T17:35:37.098400</ts>
    <user>Celestine</user>
    <text>At work, we started with Leiningen back in 2011, switched to Boot at the end of 2015, and then introduced `deps.edn` last year, via `boot-tools-deps`, at first, but then switched completely to `clj`. We've been very happy with the switch.</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-13T17:38:04.098700</ts>
    <user>Tammera</user>
    <text>yeah at my work all of our projects use lein, but… to be quite honest, I don’t know why. I’ll investigate some more</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-13T17:41:02.098900</ts>
    <user>Tammera</user>
    <text>maybe switching whole makes more sense!</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-13T17:49:14.099100</ts>
    <user>Celestine</user>
    <text>Chat to Rich when he's around, and see what limitations he's aware of with the `lein` integration.</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-13T17:52:10.099300</ts>
    <user>Celestine</user>
    <text>As the author of `boot-tools-deps`, I wouldn't recommend the hybrid approach with Boot, except as a bridge to migrating from Boot to `clj`. Some of that is to do with how Boot deals with dependencies, the classpath, pods, and so on.</text>
  </message>
  <message conversation_id="1138">
    <ts>2019-04-13T17:58:11.101000</ts>
    <user>Mariela</user>
    <text>&lt;@Meagan&gt; although slightly hacky, I think one also can do that sort of thing with &lt;https://github.com/clojure-emacs/refactor-nrepl/#find-symbol&gt;. I've used both tools (refactor-nrepl + rewrite-clj) and the latter can be a bit low-level.</text>
  </message>
  <message conversation_id="1139">
    <ts>2019-04-13T19:16:24.101400</ts>
    <user>Ruthann</user>
    <text>Anyone have experience with enums in lacinia?</text>
  </message>
  <message conversation_id="1140">
    <ts>2019-04-14T00:08:47.103100</ts>
    <user>Loria</user>
    <text>Is this guaranteed to match up elements in a set `s` with their mapped ones?
`(zipmap s (map f s))`</text>
  </message>
  <message conversation_id="1137">
    <ts>2019-04-14T00:19:48.104200</ts>
    <user>Celestine</user>
    <text>&lt;@Loria&gt; Yes, both `zipmap` and `map` call `seq` on their argument -- and `seq` returns the same ordering on repeated calls for the same object (collection).</text>
  </message>
  <message conversation_id="1140">
    <ts>2019-04-14T00:24:22.105100</ts>
    <user>Loria</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1141">
    <ts>2019-04-14T04:38:15.105300</ts>
    <user>Andera</user>
    <text>Thanks Dominicm!</text>
  </message>
  <message conversation_id="1142">
    <ts>2019-04-14T07:22:18.106400</ts>
    <user>Adria</user>
    <text>The following probably happens because of something in `with-in-str`. What would be the best workaround?
```
(with-in-str (str (char 13))
  (.read *in*))
; =&amp;gt; 10
```</text>
  </message>
  <message conversation_id="1142">
    <ts>2019-04-14T07:32:59.108200</ts>
    <user>Adria</user>
    <text>Got it by binding `*in*` to a StringReader manually.</text>
  </message>
  <message conversation_id="1143">
    <ts>2019-04-14T08:24:57.109300</ts>
    <user>Arturo</user>
    <text>what are the implications of using clojure values as keys in a `java.util.WeakHashMap`?</text>
  </message>
  <message conversation_id="1143">
    <ts>2019-04-14T08:26:42.109800</ts>
    <user>Arturo</user>
    <text>actually, think i just answered my own question - guess they will be GC’d as usual, with no particular guarantees</text>
  </message>
  <message conversation_id="1144">
    <ts>2019-04-14T09:45:54.112000</ts>
    <user>Jasmine</user>
    <text>In general, Clojure values are just Java objects, so nothing special. One possible exception are keywords, which are interned and shared across the runtime</text>
  </message>
  <message conversation_id="1145">
    <ts>2019-04-14T10:06:01.114500</ts>
    <user>Adrianne</user>
    <text>what is the current recommended way to do desktop GUI in clojure? Still seeaw? I would like to avoid the clojurescript/electron route as much as possible. Also, are there any GUI designer tools that work with either seesaw/whatever is more recommended now?</text>
  </message>
  <message conversation_id="1143">
    <ts>2019-04-14T10:20:23.116300</ts>
    <user>Shaneka</user>
    <text>there are couple other viable options:
- &lt;https://github.com/cljfx/cljfx&gt;
- &lt;https://github.com/fn-fx/fn-fx&gt;
but I haven’t done any Clojure GUI work, so can’t compare</text>
  </message>
  <message conversation_id="1146">
    <ts>2019-04-14T11:10:58.118400</ts>
    <user>Cira</user>
    <text>hey there :slightly_smiling_face: Anyone know a small real-world code snippet that demonstrates why Clojure can't be statically analysed? (e.g. something `def`ing things based on a data file or similar)</text>
  </message>
  <message conversation_id="1146">
    <ts>2019-04-14T11:17:03.118600</ts>
    <user>Roslyn</user>
    <text>There is a library that generates defs from files with sql queries, don't remember what's it's name</text>
  </message>
  <message conversation_id="1146">
    <ts>2019-04-14T11:18:38.118700</ts>
    <user>Roslyn</user>
    <text>yesql!</text>
  </message>
  <message conversation_id="1146">
    <ts>2019-04-14T11:19:11.119100</ts>
    <user>Cira</user>
    <text>oh right, that's a good one</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:24:04.120500</ts>
    <user>Malik</user>
    <text>is it expensive to convert a vector to a sequence?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:24:45.121500</ts>
    <user>Malik</user>
    <text>it seems like (hashmap|vector|set) -&amp;gt; sequence happens *a lot* and I don't have a sense for how expensive that is</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:24:57.121900</ts>
    <user>Malik</user>
    <text>and not sure how to get a sense of that</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:27:35.123400</ts>
    <user>Becki</user>
    <text>```
	public Seq(IPersistentVector v, int i){
		this.v = v;
		this.i = i;
	}
```
seems to be about it</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:27:41.123700</ts>
    <user>Becki</user>
    <text>two pointer assignments</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:28:39.124200</ts>
    <user>Fredda</user>
    <text>I'm not sure if a conversion takes place. IIUC, 'sequence' is an abstraction that collections implement. So certain functions will treat it sequentially</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:29:15.124800</ts>
    <user>Malik</user>
    <text>so first and rest and next just index into the vector?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:29:49.125500</ts>
    <user>Fredda</user>
    <text>Well, it's a trie underneath, so there's a sort of conversion for any operation (depending on the size)</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:30:49.127100</ts>
    <user>Fredda</user>
    <text>But, yeah, IMO it's not like a "conversion" to an different thing... Moreso a particular view over it.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:30:56.127600</ts>
    <user>Faustino</user>
    <text>The docs say that the vector is contiguous… does that mean they are placed side by side in memory?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:30:57.127700</ts>
    <user>Malik</user>
    <text>ah, ok</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:31:19.128100</ts>
    <user>Malik</user>
    <text>I was hoping it was something like that</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:31:36.128600</ts>
    <user>Malik</user>
    <text>I couldn't imagine how expensive it would be without that being the case</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:32:41.129300</ts>
    <user>Fredda</user>
    <text>&lt;@Faustino&gt; persistent collections are rich collections of 32 element arrays</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:33:30.130500</ts>
    <user>Faustino</user>
    <text>is 32 element the same as 32 bits?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:33:32.130700</ts>
    <user>Fredda</user>
    <text>So it's more likely the elements with one of those arrays are contiguous in mem, than in other parts</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:33:55.131100</ts>
    <user>Fredda</user>
    <text>No, in java and js, those arrays are not typed</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:34:46.131500</ts>
    <user>Faustino</user>
    <text>It says the sequence is based on the ISeq, IPersistentList</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:36:53.133100</ts>
    <user>Fredda</user>
    <text>Perhaps I'm wrong and there is a significant cost to using a collection as a sequence. But I didn't think it was any heavier than than its most efficient ability to iterate across the collection.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:37:46.133900</ts>
    <user>Faustino</user>
    <text>My guess is you are correct. Because I’d guess that the sequence is just the edge nodes of the trie data tree structure in memory</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:38:13.134300</ts>
    <user>Fredda</user>
    <text>Like, a seq is printed as a list, but that's not to say the vector is being converted into a list first.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:39:03.134800</ts>
    <user>Faustino</user>
    <text>1 notable different though in the docs… conj adds to the front of a sequence. but adds to the end of a vector</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:44:55.135700</ts>
    <user>Faustino</user>
    <text>I am highly interested in this… let’s thread the conversation</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:45:26.135800</ts>
    <user>Faustino</user>
    <text>I am reading the docs. How lists and vectors are FIFO or LIFO</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:45:40.136000</ts>
    <user>Faustino</user>
    <text>&lt;https://purelyfunctional.tv/guide/clojure-collections/#fifo&gt;</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:46:53.137100</ts>
    <user>Jasmine</user>
    <text>Seqs on vectors are just views into the vector and are highly efficient</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:48:10.138200</ts>
    <user>Faustino</user>
    <text>&lt;@Jasmine&gt; so the sequence just walks down the edge of the trie?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:48:39.139000</ts>
    <user>Jasmine</user>
    <text>Effectively, yes. I mean you can read the code, it’s pretty straightforward I think</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:49:07.139400</ts>
    <user>Fredda</user>
    <text>Aye</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:49:31.140400</ts>
    <user>Jasmine</user>
    <text>Normally seqs have some overhead in caching the resulting sequence (effectively a linked or chunked linked list)</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:49:52.141100</ts>
    <user>Jasmine</user>
    <text>Vectors seq is more efficient as it just piggybacks the vector</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:50:35.141500</ts>
    <user>Faustino</user>
    <text>but Clojure doesn’t use any linked lists underneath? Right?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:50:48.141900</ts>
    <user>Jasmine</user>
    <text>Clojure lists are linked lists</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:51:06.142500</ts>
    <user>Faustino</user>
    <text>wow… I thought they were array based</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:51:06.142600</ts>
    <user>Jasmine</user>
    <text>Sequences are usually linked lists</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:51:21.143000</ts>
    <user>Jasmine</user>
    <text>Chunked seqs are links of arrays</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:51:30.143300</ts>
    <user>Fredda</user>
    <text>32?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:51:34.143600</ts>
    <user>Jasmine</user>
    <text>So more memory efficient</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:51:39.143900</ts>
    <user>Jasmine</user>
    <text>Yes</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:51:41.144000</ts>
    <user>Faustino</user>
    <text>ahhh ok. I must be reading conflicting info from the web</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:52:02.144500</ts>
    <user>Faustino</user>
    <text>because some docs said that Clojure lists were array based, next to each other in memory, touching</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:53:20.146700</ts>
    <user>Fredda</user>
    <text>Are Java or js arrays really guaranteed to be contiguous in physical memory?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:53:32.147200</ts>
    <user>Jasmine</user>
    <text>Java arrays are</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:53:39.147500</ts>
    <user>Faustino</user>
    <text>wait a second… why don’t I see any middle insertion methods on the Clojure ISeq (lists) if they are linked lists?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:54:11.148200</ts>
    <user>Faustino</user>
    <text>there is only conj, adding at begining and end… which would point to using an array structure</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:54:37.148800</ts>
    <user>Jasmine</user>
    <text>In general Clojure provides only “efficient” operations</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:54:55.149400</ts>
    <user>Jasmine</user>
    <text>The efficient place to add elements to a linked list is at the head</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:55:17.149800</ts>
    <user>Faustino</user>
    <text>I thought a linked list can have insertion done at any point, in constant time?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:55:24.150100</ts>
    <user>Faustino</user>
    <text>because it just looks up the memory address</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:55:53.150800</ts>
    <user>Becki</user>
    <text>if you have a linked list you have a node and a pointer to the rest</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:56:19.151400</ts>
    <user>Becki</user>
    <text>so to insert in the middle you have to start following the links</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:56:43.151800</ts>
    <user>Faustino</user>
    <text>I can’t just insert based on the nth term?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:56:51.152100</ts>
    <user>Becki</user>
    <text>sure. but first ya gotta get there</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:57:01.152500</ts>
    <user>Tammera</user>
    <text>a linked list is really just a node pointing to another node</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:57:11.152700</ts>
    <user>Faustino</user>
    <text>so I have to walk the linked list to find the nth term?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:57:15.153000</ts>
    <user>Becki</user>
    <text>yup</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:57:15.153100</ts>
    <user>Tammera</user>
    <text>yep!</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:57:23.153500</ts>
    <user>Becki</user>
    <text>its like a scavenger hunt</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:57:32.153700</ts>
    <user>Faustino</user>
    <text>wow. I was really confused about that.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:57:58.153900</ts>
    <user>Tammera</user>
    <text>its a tree without branching :wink:</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:58:21.154300</ts>
    <user>Fredda</user>
    <text>It's a vine ;)</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:58:42.154700</ts>
    <user>Tammera</user>
    <text>I am coining “unary tree”</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:58:45.154900</ts>
    <user>Faustino</user>
    <text>why would anyone want to use one?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:59:02.155500</ts>
    <user>Faustino</user>
    <text>if the insertion writes are linear complexity… makes no sense to me</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:59:06.155700</ts>
    <user>Fredda</user>
    <text>For function application ;)</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:59:49.156700</ts>
    <user>Faustino</user>
    <text>ahh, so you use them to chain functions together?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T15:59:50.156800</ts>
    <user>Fredda</user>
    <text>Really, vectors are almost always preferred</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:01:15.160200</ts>
    <user>Fredda</user>
    <text>No, I just mean that because Clojure is a lisp we always use lists to apply functions, with the function in the operator position of the list</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:01:35.160600</ts>
    <user>Tammera</user>
    <text>well unless you want to prepend, thats `O(n)` in an vec and `O(1)` in a list. The moral of the story, different datastructures have different trade offs</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:02:49.162400</ts>
    <user>Faustino</user>
    <text>I must have read some erroroneus docs… that said Clojure uses arrays, contiguous, for sequences… when I was comparing it to Elixir</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:02:52.162500</ts>
    <user>Becki</user>
    <text>&lt;https://clojure.org/reference/sequences&gt; read up on sequences here.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:03:27.163500</ts>
    <user>Faustino</user>
    <text>I think Lennart was the one who pointed out linked lists don’t do well on the CPU l1, l2 cache</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:03:34.163900</ts>
    <user>Jasmine</user>
    <text>&lt;http://insideclojure.org/2015/01/02/sequences/&gt; and &lt;http://insideclojure.org/2016/03/16/collections/&gt; are some longer things I’ve written that you might find useful</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:03:45.164300</ts>
    <user>Faustino</user>
    <text>because they can be spread all over RAM and can’t be loaded in 1 step like arrays can, contigous</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:03:56.164600</ts>
    <user>Tammera</user>
    <text>I did not, but I have read it sometimes</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:05:05.166800</ts>
    <user>Jasmine</user>
    <text>And some of the faq entries &lt;https://clojure.org/guides/faq&gt;</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:05:10.166900</ts>
    <user>Becki</user>
    <text>that's true. and Clojure does some tricks mentioned earlier (chunking) to bridge this gap. The gain you get is that lazy sequences can be used interchangeably with standard collection types when this interface is pervasive.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:06:26.167900</ts>
    <user>Tammera</user>
    <text>if you care about cache misses, you are fairly deep into optimising tho, first write code, then make it fast :wink:</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:06:57.168400</ts>
    <user>Faustino</user>
    <text>Elixir uses linked lists as their basic type, for lists… and because the CPU can’t grab the data in 1 step… it makes threading less efficient… when the CPU has to lock memory… and do several steps to get the linked lists from all over RAM</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:07:17.168900</ts>
    <user>Faustino</user>
    <text>I think this is a reason why Clojure is faster and has lower level threading models</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:09:28.170100</ts>
    <user>Faustino</user>
    <text>&lt;@Tammera&gt; but you posted that info on Java Fibers… Which is like Actors… but it sounds lower level too. If clojure takes advantage of Fibers… I think that will be fantastic</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:09:51.170600</ts>
    <user>Fredda</user>
    <text>Does Elixir have shared memory between processes?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:10:02.171000</ts>
    <user>Faustino</user>
    <text>&lt;@Rosalia&gt; no shared memory</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:10:10.171500</ts>
    <user>Faustino</user>
    <text>the only way to share is off-site</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:10:30.171900</ts>
    <user>Faustino</user>
    <text>or through message passing</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:11:08.172800</ts>
    <user>Faustino</user>
    <text>this is a big reason I love clojure. We can thread stuff with shared memory… and we can also setup the actor model</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:13:03.173600</ts>
    <user>Faustino</user>
    <text>This is the reason Clojure is better at number crunching… But can also handle horizontal scaling with Actors. And Fibers can be a game changer for us.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:13:57.174700</ts>
    <user>Fredda</user>
    <text>Aye, I don't think elixir is designed for high performance, local number crunching</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:14:07.175100</ts>
    <user>Fredda</user>
    <text>Which is fine</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:14:20.175500</ts>
    <user>Faustino</user>
    <text>correct. Elixir is setup for distributed computing</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:15:05.176200</ts>
    <user>Faustino</user>
    <text>I am not knocking it. It’s great for its purpose. But I do think Clojure is more robust for number crunching, and horitzontal and vertical scale</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:15:38.176700</ts>
    <user>Fredda</user>
    <text>Fibers / project loom will be interesting</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:16:16.177500</ts>
    <user>Faustino</user>
    <text>ya, it could make Clojure scale horizontally from day 1, without extra setup… just like Elixir</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:16:20.177600</ts>
    <user>Becki</user>
    <text>i remember tim baldridge recently laying out why Clojure is not great for number crunching. I think it was on a reddit post about game design in Clojure?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:18:27.178000</ts>
    <user>Faustino</user>
    <text>&lt;@Becki&gt; Clojure isn’t good for number crunching?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:18:38.178200</ts>
    <user>Becki</user>
    <text>i'm looking for his post</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:19:29.178600</ts>
    <user>Becki</user>
    <text>read the discussion here: &lt;https://www.reddit.com/r/Clojure/comments/b7zymd/sean_murray_at_gdc_2019_a_new_perspective/&gt;  tim's username is halgari</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:21:14.179400</ts>
    <user>Becki</user>
    <text>i've never done heavy number crunching in clojure. so i like to listen to arguments and experiences from people much smarter than me :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:22:15.180000</ts>
    <user>Meagan</user>
    <text>immutable data structures will always be at a disadvantage when it comes to raw efficiency</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:25:21.181200</ts>
    <user>Faustino</user>
    <text>&lt;@Becki&gt; he is talking about game programming (C, C++)</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:25:55.182500</ts>
    <user>Fredda</user>
    <text>Well, the flexibility of persistent data structures is never going to be as fast as typed arrays</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:26:01.182700</ts>
    <user>Faustino</user>
    <text>Games can’t handle the pauses in Garbage Collectors</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:26:27.183400</ts>
    <user>Kate</user>
    <text>:sideeye:</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:26:40.183700</ts>
    <user>Fredda</user>
    <text>What lilactown said</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:27:03.184200</ts>
    <user>Faustino</user>
    <text>I agree with &lt;@Meagan&gt;</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:27:36.184900</ts>
    <user>Faustino</user>
    <text>Clojure uses tricks though… like lazy-seq</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:27:37.185000</ts>
    <user>Kate</user>
    <text>Games aren't unique in realtime programming. Any allocation strategy is going to fail if you abuse it.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:28:07.185500</ts>
    <user>Faustino</user>
    <text>I think pauses in the garbage collector is ok for non user facing stuff, e.g. machine learning</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:28:27.186000</ts>
    <user>Faustino</user>
    <text>I’d glady make the trade off if it means I don’t code it in C</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:28:33.186100</ts>
    <user>Kate</user>
    <text>sure, obviously batch processing is just a race to the finish line.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:28:57.186500</ts>
    <user>Faustino</user>
    <text>I benchmarked a small test. Clojure lazy seq is as fast as C.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:29:29.187400</ts>
    <user>Fredda</user>
    <text>Yeah, despite being super flexible, Clojure is pretty fast</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:29:39.187600</ts>
    <user>Becki</user>
    <text>i don't believe you. (re: lazy seq is as fast as C)</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:30:04.188200</ts>
    <user>Faustino</user>
    <text>&lt;https://github.com/starchild33/algorithms&gt;</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:30:05.188400</ts>
    <user>Becki</user>
    <text>i'm assuming your terminal printing was the same speed in a C program as with clojure :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:30:21.189100</ts>
    <user>Faustino</user>
    <text>my clojure lazy seq on the nth term of fibonacci was as fast as C</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:30:41.189800</ts>
    <user>Faustino</user>
    <text>around 1 second to find the 40th nth term</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:31:14.190600</ts>
    <user>Faustino</user>
    <text>well, I did use cython, from python recursion script</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:31:18.190800</ts>
    <user>Faustino</user>
    <text>I didn’t write it in raw C</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:31:25.190900</ts>
    <user>Tammera</user>
    <text>also, comparisons of language A is as fast as language B usually highly depends on your implementations in A &amp;amp; B. I can write number crunching Python thats faster than C if I butcher the C impl.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:31:41.191100</ts>
    <user>Kate</user>
    <text>i heard PyPy is faster than cython</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:31:53.191600</ts>
    <user>Kate</user>
    <text>(implementations matter)</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:31:57.191800</ts>
    <user>Becki</user>
    <text>i don't see any C in there</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:32:05.192100</ts>
    <user>Faustino</user>
    <text>I am going to write it in Raw C. then compare it to clojure.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:32:44.193400</ts>
    <user>Becki</user>
    <text>the python version is the naive recursive solution</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:32:51.193800</ts>
    <user>Faustino</user>
    <text>yea</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:33:06.194700</ts>
    <user>Faustino</user>
    <text>but Clojure optimizes recursion with a lazy-seq. So I cheated a little.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:33:20.195200</ts>
    <user>Fredda</user>
    <text>I wonder if/how clojure's concurrency abstractions will fit with loom/fibers</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:34:09.196100</ts>
    <user>Faustino</user>
    <text>let me write some more today… and try a naive recurssion in Clojure compared to C. I am sure C is faster in that case though</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:34:10.196200</ts>
    <user>Becki</user>
    <text>it's a totally different algo. you did the count up version in clojure and the naive exponential version in python</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:34:27.196500</ts>
    <user>Faustino</user>
    <text>ya, it’s not accurate enough. I cheated.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:34:58.197300</ts>
    <user>Becki</user>
    <text>lol. well lets not claim Clojure is as fast as C if there is 1) no C and 2) different algos used in the python versus clojure verions :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:35:17.198100</ts>
    <user>Becki</user>
    <text>but i like your enthusiasm and willingness to actually benchmark</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:35:24.198500</ts>
    <user>Faustino</user>
    <text>I think I should restate it as… Clojure can use tricks to speed up to C level performance</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:36:06.199400</ts>
    <user>Faustino</user>
    <text>I’ll rewrite it today, with a more accurate comparison… and share it</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:36:28.200000</ts>
    <user>Becki</user>
    <text>i look forward to it.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:36:34.200300</ts>
    <user>Faustino</user>
    <text>I am biased towards Clojure… you can see my bias</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:36:38.200600</ts>
    <user>Becki</user>
    <text>i am too :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:38:29.204800</ts>
    <user>Fredda</user>
    <text>Like, could a fiber backed atom be as simple as a cljs atom? Or does interruptibility on the jvm complicate that?</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:39:40.206300</ts>
    <user>Jasmine</user>
    <text>In general, Clojure should be approximately as fast as Java. jit optimized Java is generally fast enough for the majority of programming uses. Where it’s not, there are options to use faster libs as a consumer. </text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:40:49.206800</ts>
    <user>Jasmine</user>
    <text>99% of users never need that though</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:44:41.206900</ts>
    <user>Erna</user>
    <text>The main issue I ran into when using `lein-tools-deps` was that the dependency resolution for `lein` is similar, but not the same as `tools.deps`. So, even with the same dependencies, the resolutions might be different if you use (for example) `lein uberjar` you could potentially get different versions of some libraries than if you ran the `clojure` script. I would second &lt;@Celestine&gt; in recommending that a hybrid approach only be used during transition.</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:52:46.208200</ts>
    <user>Kate</user>
    <text>My very sloppy Clojure use is 80-99% as fast as Java. Once in a while I tune it up with just a tiny bit of effort. Mostly it is sufficient.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:52:51.208400</ts>
    <user>Faustino</user>
    <text>omg. I mis-spoke. Clojure Binet Formula is as fast as C recursion</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:55:18.212000</ts>
    <user>Becki</user>
    <text>ha. can you find the point where clojure's single computation is faster than c's recursion?</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:55:26.212300</ts>
    <user>Fredda</user>
    <text>There may be certain kinds of problems where persistent data structures are already the most performant abstraction. Like an editor that can edit files larger than what's in memory. I think have to implement some shared structure thing anyway.</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:56:50.213000</ts>
    <user>Faustino</user>
    <text>&lt;@Becki&gt; hahahaha this is an interesting comparison.. working on it now</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:57:03.213600</ts>
    <user>Becki</user>
    <text>you were using 40 earlier i think.</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:57:28.214800</ts>
    <user>Kate</user>
    <text>persistent data structures are a convenience for programmers to ensure certain types of design correctness</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:57:32.215000</ts>
    <user>Fredda</user>
    <text>Or if you were trying simulate a universe of stars that don't fit in memory all at once</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:57:59.215500</ts>
    <user>Kate</user>
    <text>that convenience is overhead</text>
  </message>
  <message conversation_id="1147">
    <ts>2019-04-14T16:58:14.215900</ts>
    <user>Kate</user>
    <text>it's not going to pay off except in time correctness</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:58:21.216200</ts>
    <user>Kate</user>
    <text>time to correctness</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:59:00.218000</ts>
    <user>Fredda</user>
    <text>Unless the problem itself looks embarrassingly like a persistent data structure problem</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:59:17.218300</ts>
    <user>Kate</user>
    <text>there are lower overhead ways of ensuring correctness but they cost developers more at design/review time</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T16:59:48.219000</ts>
    <user>Kate</user>
    <text>what is a persistent data structure problem?</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:00:16.219600</ts>
    <user>Fredda</user>
    <text>It doesn't have to be only about correctness. the shared structure of persistent data structures allows for efficiencies that are harder to achieve without that shared structure.</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:00:23.220000</ts>
    <user>Fredda</user>
    <text>Especially over infinite data sets for instance</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:00:37.220500</ts>
    <user>Kacy</user>
    <text>a "convenience for programmers" - doesn't this describe every single tool?</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:00:42.220600</ts>
    <user>Kate</user>
    <text>harder how? in developer effort? that's what i've been saying.</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:00:56.221200</ts>
    <user>Kate</user>
    <text>mg: as in the opposite of fundamental to computation</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:01:03.221400</ts>
    <user>Kacy</user>
    <text>compilers are "convenience for programmers", you should be writing assembler yourself</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:01:10.221600</ts>
    <user>Kate</user>
    <text>ok, no</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:01:22.222100</ts>
    <user>Kate</user>
    <text>that's asinine</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:01:53.223000</ts>
    <user>Fredda</user>
    <text>Harder to reason about, sure. But in terms of polynomial difficulty,</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:02:09.223400</ts>
    <user>Fredda</user>
    <text>persistent data structures may be the minimal polynomial complexity for certain kinds of problems that have shared structure</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:02:40.224000</ts>
    <user>Kate</user>
    <text>Can you be little more concrete about that?</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:02:48.224200</ts>
    <user>Kacy</user>
    <text>well I think the premise of the question fundamentally kind of silly</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:03:03.224600</ts>
    <user>Kate</user>
    <text>Polynomial complexity as I usually hear it refers to computational complexity</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:03:26.225100</ts>
    <user>Fredda</user>
    <text>Navigating a procedurally generated universe of stars that don't fit in memory</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:03:46.225400</ts>
    <user>Kate</user>
    <text>that sounds like an application not a computation problem</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:04:04.225700</ts>
    <user>Fredda</user>
    <text>Hmm, perhaps</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:05:10.227000</ts>
    <user>Fredda</user>
    <text>There's this YouTube video of a guy that built an editor using persistent data structures implemented in c++. They call them postmodern data structures lol</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:05:47.227800</ts>
    <user>Fredda</user>
    <text>It'd be pretty interesting to see that implemented in clojure</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:05:56.228000</ts>
    <user>Kate</user>
    <text>cool</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:06:16.228600</ts>
    <user>Fredda</user>
    <text>Def check out that video sometime! It's worth a watch</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:17:14.229000</ts>
    <user>Fredda</user>
    <text>This might be it &lt;https://youtu.be/sPhpelUfu8Q&gt;</text>
  </message>
  <message conversation_id="1148">
    <ts>2019-04-14T17:55:52.231000</ts>
    <user>Fredda</user>
    <text>another efficiency perk of Clojure's persistent data structures: snapshots. So if you have some problem that needs a consistent view of snapshots of data across some threads, mid-computation, then persistent data structures already solved the problem for you. People rarely use the snapshot capability though AFAIAA</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:31:10.232300</ts>
    <user>Suanne</user>
    <text>Why would a function have a `*` at the end of its name? My guess is that it’s a convention indicating that the function generates a lazy sequence. For example `evens*`.</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:33:48.232900</ts>
    <user>Celestine</user>
    <text>It's often used to indicate an "implementation" function. You'll often see it as the name of a function behind a macro.</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:35:03.234300</ts>
    <user>Celestine</user>
    <text>You'll also see it for the implementation of some special forms in Clojure itself. Both `fn` and `let` are technically "Special Forms" but they are implemented as macros that expand to "calls" to `fn*` and `let*` respectively (which are implemented directly in the compiler).</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:35:51.235300</ts>
    <user>Celestine</user>
    <text>Where I've also seen it used a lot is for functions that implement a cache: if `foo` is the cached version of the function, it will often be implemented in terms of `foo*` which will be the uncached version of the function.</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:35:57.235500</ts>
    <user>Celestine</user>
    <text>Does that help &lt;@Suanne&gt; ?</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:37:47.237000</ts>
    <user>Suanne</user>
    <text>&lt;@Celestine&gt; Hmm. I think I understand. In other languages I would expose the modules function with a friendly name and then have another function behind the scenes that does the actual work (because it needs extra parameters for example). So this is a convention for that sort of pattern?</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:38:41.237900</ts>
    <user>Celestine</user>
    <text>Yes, it's a fairly common pattern for implementation detail functions.</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:39:18.238700</ts>
    <user>Suanne</user>
    <text>&lt;@Celestine&gt; In JavaScript I would usually pre- or post-fix an `_` for this same purpose.</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:39:46.239300</ts>
    <user>Celestine</user>
    <text>Yeah, I've seen that convention in C/C++ as well.</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T18:40:33.240300</ts>
    <user>Suanne</user>
    <text>Side note, something I love about Lisps is using a dash as-a-separator for names. It’s by far the most natural way to do this in my view and it’s a shame most other languages don’t do the same.</text>
  </message>
  <message conversation_id="1150">
    <ts>2019-04-14T20:32:24.242800</ts>
    <user>Ermelinda</user>
    <text>Any idea how I can achieve this in Compojure:
```
(def app
  (-&amp;gt; (wrap-defaults (get-app-routes handler) site-defaults)
```
I want to define the routes based on the hostname. The problem of course is `handler` above is not defined.</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T20:34:33.243300</ts>
    <user>Latrice</user>
    <text>I beleive you’re missing a closing parens or 2</text>
  </message>
  <message conversation_id="1150">
    <ts>2019-04-14T20:35:35.243700</ts>
    <user>Latrice</user>
    <text>but other than that, what is get-app-routes?</text>
  </message>
  <message conversation_id="1149">
    <ts>2019-04-14T20:38:31.246700</ts>
    <user>Ermelinda</user>
    <text>I am not missing parens. I just omitted some middleware. get-app-routes looks like this for now:
```
(defn get-app-routes [handler]
  (defroutes app-routes
    (GET "/" [] "Hello")))
```</text>
  </message>
  <message conversation_id="1150">
    <ts>2019-04-14T20:39:31.248500</ts>
    <user>Latrice</user>
    <text>you don’t seem to use the handler, do you need to do something odd and dynamic?</text>
  </message>
  <message conversation_id="1150">
    <ts>2019-04-14T20:39:40.249000</ts>
    <user>Ermelinda</user>
    <text>The idea is to return different `app-routes` based on the hostname that I can get from the handler request object</text>
  </message>
  <message conversation_id="1150">
    <ts>2019-04-14T20:39:51.249200</ts>
    <user>Latrice</user>
    <text>aaaaahh.. I see..</text>
  </message>
  <message conversation_id="1150">
    <ts>2019-04-14T20:52:16.254500</ts>
    <user>Latrice</user>
    <text>I can’t think of any clear solution for this since I don’t understand the case very well.
My last bit of advice is you might be able to get away with just using routes instead of defroutes because it doesn’t seem like you’ll use app-routes directly anyway.</text>
  </message>
  <message conversation_id="1150">
    <ts>2019-04-14T20:53:25.255700</ts>
    <user>Latrice</user>
    <text>maybe middleware might be the way, maybe just a conditional in the routes themselves. :sweat_smile:  sorry I can’t be more useful, hope someone else can help.</text>
  </message>
  <message conversation_id="1150">
    <ts>2019-04-14T20:57:09.256400</ts>
    <user>Ermelinda</user>
    <text>Thanks, I guess I'll keep trying.</text>
  </message>
  <message conversation_id="1150">
    <ts>2019-04-14T23:03:42.257200</ts>
    <user>Faustino</user>
    <text>I finished my results of comparing Clojure, C, Python/Jython/Cython, Ruby/Jruby for the nth term of Fibonacci.</text>
  </message>
  <message conversation_id="1151">
    <ts>2019-04-14T23:04:04.257400</ts>
    <user>Faustino</user>
    <text>&lt;https://github.com/starchild33/algorithms/blob/master/README.md&gt;</text>
  </message>
  <message conversation_id="1152">
    <ts>2019-04-15T06:33:49.268200</ts>
    <user>Frederick</user>
    <text>Hi, I have a simple TTL cache built around an `(atom {})` the logic that gets a value either finds an entry or gets a new one if the entry was missing or already expired (the loading of the entry involves a short Redis IO op). Dead simple.
Now, I want to improve it and make it thread-safe. It is not _not entirely_ thread safe because 2 threads can find a missing/expired entry and trigger a load (redis call) simultaneously.
How would you recommend locking the IO per key?
1. `(locking cache-key ...)` comes to mind but is not so the Clojure way (also, I’ll have to maintain an additional map of locks)
2. maintaining a map of entry as ‘loading’ `ref`s where every load from DB is a transaction on the corresponding ref. This also sounds overly complex.
Any more inspirations?</text>
  </message>
  <message conversation_id="1153">
    <ts>2019-04-15T07:15:29.269000</ts>
    <user>Toccara</user>
    <text>Hello guys, is it possible to overwrite the functionality of default protected java method from clojure?</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T07:21:33.269300</ts>
    <user>Holly</user>
    <text>Hi guys, what do you use for queuing? Ideally redis-based?</text>
  </message>
  <message conversation_id="1153">
    <ts>2019-04-15T07:21:42.269600</ts>
    <user>Holly</user>
    <text>I was checking farmhand but it's a bit buggy</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T07:26:07.270000</ts>
    <user>Frederick</user>
    <text>&lt;@Holly&gt; out of process queuing?</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T07:28:43.270300</ts>
    <user>Holly</user>
    <text>&lt;@Frederick&gt; yep</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T07:29:59.271100</ts>
    <user>Frederick</user>
    <text>if you are looking at redis libraries i would recommend carmine</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T07:31:30.271300</ts>
    <user>Toccara</user>
    <text>clojure.lang.PersistentQueue/EMPTY</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T07:34:53.271600</ts>
    <user>Frederick</user>
    <text>that’s in-process ^</text>
  </message>
  <message conversation_id="1155">
    <ts>2019-04-15T08:13:53.271700</ts>
    <user>Vita</user>
    <text>core.cache has composable caches and the ability to define a custom cache. I wonder if you implemented a custom cache that uses redis to back it and then composed it with the built-in ttl cache if that would give what you want &lt;https://github.com/clojure/core.cache/wiki/Extending&gt;</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T08:48:05.272300</ts>
    <user>Holly</user>
    <text>&lt;@Frederick&gt; carmine looks great, but I would need some kind of ui to check the data, as well as retries and such</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T08:48:13.272600</ts>
    <user>Holly</user>
    <text>I'm looking for something like sidekiq</text>
  </message>
  <message conversation_id="1156">
    <ts>2019-04-15T09:53:22.274400</ts>
    <user>Cira</user>
    <text>is there a nicer way to write this:

```(defmacro define-multiple [things]
  (into []
        (for [[k v] things]
          `(def ~(symbol (name k)) ~v))))

(define-multiple {:a 3 :b 2})
```</text>
  </message>
  <message conversation_id="1156">
    <ts>2019-04-15T09:59:52.274900</ts>
    <user>Jasmine</user>
    <text>I don't think that's doing what you want</text>
  </message>
  <message conversation_id="1156">
    <ts>2019-04-15T10:00:33.275300</ts>
    <user>Jasmine</user>
    <text>usually if you're emitting multiple top-level things, it's best to wrap it in a `do`</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T10:49:27.277000</ts>
    <user>Zona</user>
    <text>```(defmacro defmany 
  [definitions]
  `(do ~@(for [[k v] definitions]
           `(def ~(symbol (name k)) ~v))))```</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T10:49:42.277200</ts>
    <user>Zona</user>
    <text>something like that maybe ?</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T10:50:32.277400</ts>
    <user>Zona</user>
    <text>`for` returns a list of forms, e.g. `((def a 1) (def b 2))`, so using `~@` splices the outer set of parens away</text>
  </message>
  <message conversation_id="1154">
    <ts>2019-04-15T10:52:32.277600</ts>
    <user>Zona</user>
    <text>```(macroexpand-1 '(defmany {:a 1 :b 1}))
=&amp;gt; (do (def a 1) (def b 1))```</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T14:58:21.280600</ts>
    <user>Ermelinda</user>
    <text>Is there a way in a Ring web app to get the hostname *before* defining Ring's handler?</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:01:49.281400</ts>
    <user>Dann</user>
    <text>if the result of `(clojure.java.shell/sh "hostname")` is correct, that would be one way to get it</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:02:11.281800</ts>
    <user>Dann</user>
    <text>you could also ensure that it's set in the environment or passed as an arg to -main</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:08:42.283100</ts>
    <user>Rosaline</user>
    <text>the server-name that you get in a ring request is from the value of the client sent Host header, and not your hostname</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:09:37.284200</ts>
    <user>Ermelinda</user>
    <text>Yeah, I want to determine the subdomain the request is coming from before creating Ring's handler</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:09:46.284400</ts>
    <user>Rosaline</user>
    <text>basically "this is who the client thinks you are"</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:09:56.284800</ts>
    <user>Rosaline</user>
    <text>so without a client, you can't have that</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:11:13.286000</ts>
    <user>Ermelinda</user>
    <text>It's for a SaaS system using subdomain but the company offers multiple products. For that reason, I need to set a different set of routes based on the subdomain.</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:13:29.288100</ts>
    <user>Ermelinda</user>
    <text>I thought I could get it to work like this: `(as-&amp;gt; handler x (wrap-defaults (get-routes x) site-defaults)` but it turned out the routes are parsed on the startup only.</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:15:26.290900</ts>
    <user>Rosaline</user>
    <text>It doesn't matter what it is for though, right? You are asking to get the value of the host header,  which is sent by clients each request, and can vary, before a request has been sent, which is impossible</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:16:46.292600</ts>
    <user>Rosaline</user>
    <text>What routing library are you using? Most of them can route base on the host header</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:17:06.292900</ts>
    <user>Ermelinda</user>
    <text>I tried Compojure and bidi</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:17:55.293600</ts>
    <user>Ermelinda</user>
    <text>bidi has subdomain facilities but they need to be hardcoded</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:18:16.294000</ts>
    <user>Rosaline</user>
    <text>You will have to hard code them</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:18:37.294600</ts>
    <user>Ermelinda</user>
    <text>There are hundred if not thousands of them</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:19:09.295500</ts>
    <user>Ermelinda</user>
    <text>I will need to ping the DB to see which app to use for the provided subdomain before creating the routes</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:20:37.297500</ts>
    <user>Rosaline</user>
    <text>You'll need you create a handler, which takes a request, hits the DB, looks up base on the host header, then generates the routes and applies them to the request</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:22:16.299400</ts>
    <user>Rosaline</user>
    <text>Basically stop def'ing routes as global(which is terrible any way), because you need to parameterize them</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:25:28.302400</ts>
    <user>Rosaline</user>
    <text>Def'ing routes as a global value (as seen in lots of docs and tutorials) means 1. Parameterizing your routes doesn't work 2. Your handlers have to globals too</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:27:27.303200</ts>
    <user>Ermelinda</user>
    <text>When can I define them if not globally? That's all I saw in the docs like you mentioned.</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:27:47.303500</ts>
    <user>Ermelinda</user>
    <text>Any bits of code I can refer to?</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:31:52.304100</ts>
    <user>Rosaline</user>
    <text>Use routes instead of defroutes</text>
  </message>
  <message conversation_id="1157">
    <ts>2019-04-15T15:32:32.304600</ts>
    <user>Ermelinda</user>
    <text>Ok, I will give that a try. Thanks.</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:12:07.305800</ts>
    <user>Adrianne</user>
    <text>when should I use `partial` rather than the `#(func arg1 arg2 %)` syntax?</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:17:51.306300</ts>
    <user>Malik</user>
    <text>maybe when it's `#(func % arg1 arg2)`?</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:18:00.306600</ts>
    <user>Malik</user>
    <text>err don't use partial for that</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:18:02.306800</ts>
    <user>Malik</user>
    <text>rather</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:18:34.307900</ts>
    <user>Adrianne</user>
    <text>that's the thing, I use the `#()` syntax all the time, and I'm not sure where I should use partial instead</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:18:40.308200</ts>
    <user>Becki</user>
    <text>I think people prefer to read the anonymous function version rather than the partial. but partial isn't out of place i don't think</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:18:45.308400</ts>
    <user>Adrianne</user>
    <text>`#()` looks cleaner to me</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:18:59.308900</ts>
    <user>Malik</user>
    <text>I tend to just use `#()` all the time, too</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:19:09.309200</ts>
    <user>Becki</user>
    <text>there is no should. I think someone mentioned that had the anonymous version been around earlier in Clojure's life `partial` might not have been made</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:21:18.310500</ts>
    <user>Shayla</user>
    <text>`partial` is nice cuz it very plainly says, "i'm returning a function that is just waiting on final input"</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:21:43.311100</ts>
    <user>Shayla</user>
    <text>`#()` to me says, "this is an anonymous function" and requires a different kind of parsing</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:22:09.311700</ts>
    <user>Shayla</user>
    <text>`partial` feels like clojure's version of currying</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:22:14.311900</ts>
    <user>Jasmine</user>
    <text>My advice would be, don't use `partial`</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:22:25.312200</ts>
    <user>Shayla</user>
    <text>oh? well, okay then!</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:23:09.312800</ts>
    <user>Jasmine</user>
    <text>which is not to say that people don't, and it's fine that they do, but `#()` is imo the Clojure way to do this</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:24:11.313500</ts>
    <user>Jasmine</user>
    <text>just my own opinion and it's ok for others to have their own preferences :)</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:24:31.314000</ts>
    <user>Shayla</user>
    <text>What feels more "Clojure" to you about `#()`?</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:31:40.317700</ts>
    <user>Becki</user>
    <text>one thing a partial obscures the remaining calling convention whereas `#(func %1 :foo %2)` is clear that it expects two more args. Also, if you refactor the signature of the function `partial` might no longer be up to the task leading to needless churn in a diff. For instance, `(defn foo [a b c])` you can use `(partial foo a b)` but if you change the signature to `(defn foo [a c b])` you can no longer partial this application and you would have to switch to `#(foo a % b)` instead of just changing the position of the `%` and the `b`</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:39:00.319000</ts>
    <user>Ermelinda</user>
    <text>I got it to work based on the tips you provided. Thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:40:53.320200</ts>
    <user>Celestine</user>
    <text>Also `#(func 1 2 %)` compiles to a function directly whereas `(partial func 1 2)` compiles to a call (to `partial`) that returns a function. The performance difference is tiny -- I'm mentioning this more to highlight there is a runtime element to `partial` whereas the anonymous function is a compile-time expression.</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:41:53.320900</ts>
    <user>Celestine</user>
    <text>(I'm one of those folks who still tends to use `partial` but I admit that I'm moving away from it...)</text>
  </message>
  <message conversation_id="1158">
    <ts>2019-04-15T16:42:51.321800</ts>
    <user>Becki</user>
    <text>it has an elegance to me sometimes but i'm moving away from it as well.</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:06:20.322500</ts>
    <user>Harris</user>
    <text>`partial` also captures the var value instead of the var, so it can lead to surprising behavior when using dynamic vars for example</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:07:29.323100</ts>
    <user>Onita</user>
    <text>a poll: should you ever use a macro if you can use a function?</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:08:04.323600</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; (def ^:dynamic *a*)
#'user/*a*
user=&amp;gt; (def f (partial + *a*))
#'user/f
user=&amp;gt; (def g #(+ *a* %))
#'user/g
user=&amp;gt; (binding [*a* 1] (g 1))
2
user=&amp;gt; (binding [*a* 1] (f 1))
Execution error (ClassCastException) at user$eval164/invokeStatic (REPL:1).
clojure.lang.Var$Unbound cannot be cast to java.lang.Number
```</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:08:54.324600</ts>
    <user>Harris</user>
    <text>&lt;@Onita&gt; if it's convinent, yes, but you should also have the function version for when you want to use it in a higher-order context, or when the value needs to be resolved at runtime</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:09:35.325400</ts>
    <user>Becki</user>
    <text>what's the best reaction for "that's a good point i hadn't considered. thanks"</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:09:47.326000</ts>
    <user>Harris</user>
    <text>e.g. clojure has `with-binding` and `with-binding*`</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:09:51.326300</ts>
    <user>Harris</user>
    <text>one is a macro on top of the function</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:10:04.326800</ts>
    <user>Harris</user>
    <text>sometimes you need to use the function version when the binding map is built at runtime</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:10:19.327300</ts>
    <user>Harris</user>
    <text>but often it's not and the macro version is just less verbose to use</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:13:32.329000</ts>
    <user>Harris</user>
    <text>to add on this, `partial` also causes the stacktrace to point at `partial$fn&amp;lt;whatever&amp;gt;` instead of making acustom class, which can make debugging way harder</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:13:41.329600</ts>
    <user>Onita</user>
    <text>hmm, ok</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:14:19.330200</ts>
    <user>Mariela</user>
    <text>Interesting points in favor of `#()`. Normally I favor `partial` because `#(% ...)` looks like someone swearing in a comic book

But yeah looks like I should switch</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:21:02.330900</ts>
    <user>Adrianne</user>
    <text>if I have a lazy `repeat` in clojure, can I turn it into a lazy vector I can use with `assoc`?</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:21:38.331500</ts>
    <user>Marlyn</user>
    <text>vectors are not lazy -- they have a fixed length</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:23:43.332100</ts>
    <user>Adrianne</user>
    <text>is there an equivalent of assoc that can be done on a lazy seq?</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:24:19.332700</ts>
    <user>Becki</user>
    <text>what are you trying to achieve. often its best to take a step back and figure out if there's a better way</text>
  </message>
  <message conversation_id="1159">
    <ts>2019-04-15T17:24:40.333100</ts>
    <user>Adrianne</user>
    <text>I'm trying to create a brainf**k interpreter, as an exercise. This is for the tape.</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:29:18.334200</ts>
    <user>Becki</user>
    <text>you could use `map-indexed` and something like
```
(let [index 3]
 (map-indexed (fn [i x]
                (if (= i index) :replaced-value x))
              (range 6)))
(0 1 2 :replaced-value 4 5)
```</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:29:37.334500</ts>
    <user>Rosaline</user>
    <text>use a map</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:30:08.335000</ts>
    <user>Rosaline</user>
    <text>a map is a better model for the tape</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:30:49.335300</ts>
    <user>Becki</user>
    <text>if you can drop your lazy requirement, which you probably can?</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:31:17.336100</ts>
    <user>Rosaline</user>
    <text>the lazy requirement is nonsensical</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:31:32.336500</ts>
    <user>Adrianne</user>
    <text>I don't really see how a map makes a better tape model than a vector when the tape is a sequence?</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:31:48.337300</ts>
    <user>Becki</user>
    <text>your current woe would be solved</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:31:49.337400</ts>
    <user>Rosaline</user>
    <text>a map allows for a sparse representation</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:32:00.337900</ts>
    <user>Adrianne</user>
    <text>the lazy thing was because I thought doing a lazy tape was elegent and solves the bf interpreter problem of running out of tape</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:32:21.338400</ts>
    <user>Rosaline</user>
    <text>e.g. with a map you can assoc a value in for 1e3 without needing a value in the map for everything between 0 and that</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:32:46.338700</ts>
    <user>Adrianne</user>
    <text>that actually makes more sense</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:32:49.338900</ts>
    <user>Adrianne</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1161">
    <ts>2019-04-15T17:45:06.340600</ts>
    <user>Suanne</user>
    <text>Can you help me understand the difference between these two forms of generating a lazy sequence?

```
(defn evens-v1
  ([]
   (evens-v1 2))
  ([n]
   (lazy-seq (cons n (evens-v1 (+ n 2))))))
```

```
(defn evens-v2
  ([]
   (evens-v2 2))
  ([n]
   (cons n (lazy-seq (evens-v2 (+ n 2))))))
```

As far as I can tell, these both behave identically. Their return types are `LazySeq`.</text>
  </message>
  <message conversation_id="1161">
    <ts>2019-04-15T17:46:07.341400</ts>
    <user>Rosaline</user>
    <text>the boundary of laziness is lazy-seq, so you would say evens-v1 is slightly more lazy and evens-v2 is slightly more eager</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:47:40.343200</ts>
    <user>Rosaline</user>
    <text>so with evens-v1, when you call it returns a lazy seq, and when you call first or rest on it, the body of the lazy-seq call is executed and cached, and first or rest is called on it</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:48:42.344400</ts>
    <user>Rosaline</user>
    <text>with even-v2 when you call it, it cons's n on to the unforced lazy seq constructed by lazy-seq and returns that</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:50:08.345900</ts>
    <user>Rosaline</user>
    <text>the type of a lazy seq doesn't change, regardless of if it has been forced or not</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:50:41.346600</ts>
    <user>Suanne</user>
    <text>Ok, so the difference is basically negligible but version 1 is truly lazy since v2 starts creating that sequence (albeit a single element of it) when you call it even before it is realized.</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:51:33.347400</ts>
    <user>Rosaline</user>
    <text>correct, the difference in this case is negligible, but it can be larger, it depends on the amount of computing required to construct that initial element</text>
  </message>
  <message conversation_id="1161">
    <ts>2019-04-15T17:51:54.347600</ts>
    <user>Suanne</user>
    <text>Thanks for the explanation!</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:52:48.348400</ts>
    <user>Rosaline</user>
    <text>I am not sure I have come across a case where it mattered a lot, but in general I try and hoist lazy-seq calls up as high as possible so they wrap as much of the function body as possible</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T17:53:05.348700</ts>
    <user>Suanne</user>
    <text>That makes sense.</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:04:51.351500</ts>
    <user>Kayce</user>
    <text>can someone help me with a bit complex regex/replace problem.
I need anything that matches to be wrapped one way, anything that doesn’t match the other way, e.g.: if given string like:
“Donec vitae dolor color or sotamayor” I want to highlight everything that matches “or”, basically I want it to become something like:

```
[:span "Donec vitae dol"
 [:span.h "or"] [:span "col"] [:span.h "or"] [:span " "] [:span.h "or"] [:span "sotamay"] [:span.h "or"]
```</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:09:41.352800</ts>
    <user>Kayce</user>
    <text>matching part is relatively easy… but I can’t figure out how to replace things that do not match</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:09:47.353000</ts>
    <user>Dann</user>
    <text>&lt;@Kayce&gt; I'd be inclined to use the `.find` `.end` methods, each returns a numeric index you can use with subs</text>
  </message>
  <message conversation_id="1162">
    <ts>2019-04-15T18:10:25.353700</ts>
    <user>Dann</user>
    <text>and then use cons and recursive calls (maybe with lazy-seq even)</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:11:22.354300</ts>
    <user>Dann</user>
    <text>take string, call `.find` get a start index, call `.end` get end index, cons two strings, then self-call</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:12:13.354900</ts>
    <user>Kayce</user>
    <text>hmm… but why can’t it be two pass string/replace?</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:12:43.355700</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/ztellman/automat&gt; could be useful</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:12:46.356000</ts>
    <user>Dann</user>
    <text>string/replace could be possible, but I think the self-call cons approach is easier to think about</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:14:17.357200</ts>
    <user>Kayce</user>
    <text>so like if I want for example wrap anything that doesn’t match “or” and place it between “^” and “$”… :
```
(clojure.string/replace
 "Donec vitae dolor color sotamayor"
 #"(?!or)"
 #(str "^" %1 "$"))
```
except it’s not working as I would like it to ;(</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:16:44.358000</ts>
    <user>Rosaline</user>
    <text>I am not sure regex syntax is flexible enough for what you want</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:17:06.358500</ts>
    <user>Rosaline</user>
    <text>but a regex is a kind of finite state automata, and automat is a more flexible way to construct those</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:18:30.360200</ts>
    <user>Rosaline</user>
    <text>I am no regex wiz, but I think your issue is, regex is a character by character scan, and you are trying to say, chunk things in to groups that are not this two character sequence</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:19:01.361000</ts>
    <user>Rosaline</user>
    <text>but a regex would only match the character sequence at a time, so even if it did work, you would get lots of two character slices</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:20:00.361500</ts>
    <user>Rosaline</user>
    <text>which is actually almost what you get with your ^$ example</text>
  </message>
  <message conversation_id="1162">
    <ts>2019-04-15T18:29:29.363200</ts>
    <user>Becki</user>
    <text>```
(let [states {\o {:string :o}
              \O {:string :o}
              \r {:o :or}
              \R {:o :or}}]
  (reduce (fn [[acc [state buffer or-buffer]] c]
            (let [new-state (get-in states [c state] :string)]
              (case new-state
                :string [acc [:string (str buffer or-buffer c) ""]]
                :o      [acc [:o buffer (str c)]]
                :or     [(conj acc buffer (str or-buffer c)) [:string "" ""]])))
          [[] [:string ""]]
          "Donec vitae dolor color or sotamayor"))

[["Donec vitae dol" "or" " col" "or" " " "or" " sotamay" "or"]
 [:string "" ""]]
```</text>
  </message>
  <message conversation_id="1162">
    <ts>2019-04-15T18:31:54.363500</ts>
    <user>Dann</user>
    <text>```egret.run=&amp;gt; (re-split-seq "Donec vitae dolor color or sotamayor" #"or" (fn [x] [:span.h x]) (fn [x] [:span x]))
([:span "Donec vitae dol"] [:span.h "or"] [:span " col"] [:span.h "or"] [:span " "] [:span.h "or"] [:span " sotamay"] [:span.h "or"] [:span ""])
```</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:32:05.363700</ts>
    <user>Dann</user>
    <text>imperfect, but it's a start</text>
  </message>
  <message conversation_id="1162">
    <ts>2019-04-15T18:32:50.363900</ts>
    <user>Dann</user>
    <text>```(defn re-split-seq
  ([s re marked unmarked]
   (let [matcher (re-matcher re s)]
     (re-split-seq s re marked unmarked matcher 0)))
  ([s re marked unmarked matcher unmatched]
   (let [found? (.find matcher)
         start (when found? (.start matcher))
         end (when found? (.end matcher))]
     (if found?
       (cons (unmarked  (subs s unmatched start))
             (cons (marked (subs s start end))
                   (re-split-seq s re marked unmarked matcher end)))
       (list (unmarked (subs s unmatched)))))))```</text>
  </message>
  <message conversation_id="1162">
    <ts>2019-04-15T18:34:01.364300</ts>
    <user>Rosaline</user>
    <text>(or use java.util.Scanner)</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:35:53.364700</ts>
    <user>Kayce</user>
    <text>I need it to work in Clojurescript (preferably)</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:36:06.365000</ts>
    <user>Rosaline</user>
    <text>use automat</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:38:57.365900</ts>
    <user>Dann</user>
    <text>in js you'd want `.search` (returns index of start of match) and `.lastIndex`</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:39:49.366700</ts>
    <user>Dann</user>
    <text>and you'd use a RegExp instead of matcher (I assume in cljs #"" is already a RegExp)</text>
  </message>
  <message conversation_id="1160">
    <ts>2019-04-15T18:45:00.368700</ts>
    <user>Kayce</user>
    <text>sorry guys… I got dragged into fixing an issue in an RC. Thank you all for your suggestions, I will try them!
:spock-hand: &lt;@Dann&gt; &lt;@Rosaline&gt; &lt;@Becki&gt;</text>
  </message>
  <message conversation_id="1163">
    <ts>2019-04-15T22:04:20.371200</ts>
    <user>Leisa</user>
    <text>Looking for Clojure-scriptable 3D/physics environments. Know about Arcadia and &lt;#C0FM7N1SM|quil&gt; but want to know what else is out there. Big plus if a world/system can be created entirely in code, ideally all Clojure/script.</text>
  </message>
  <message conversation_id="1163">
    <ts>2019-04-15T22:13:06.378300</ts>
    <user>Wesley</user>
    <text>Hi &lt;@Leisa&gt; .  I don't have the answer but wonder if Zulip would be a good place to ask.  (Do I remember that you used to to ABM modeling in Clojure?  I've been working on a little library to make it easier to use MASON in Clojure.)</text>
  </message>
  <message conversation_id="1163">
    <ts>2019-04-15T22:13:17.378500</ts>
    <user>Wesley</user>
    <text>Would someone be willing to post a pointer to instructions for deploying to Clojars with Leiningen without signing?  I'm sure the info is there somewhere, but the `lein` help on this is not very clear to me give what I don't know, and the docs on the web seem to focus on signing.  I may be overlooking the crucial bit ....</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:47:17.379300</ts>
    <user>Malik</user>
    <text>why is clojure's destructuring of maps so weird? ```user=&amp;gt; (def artist-map {:painter :monet :novelist :austen})
#'user/artist-map
user=&amp;gt; (let [{painter :painter writer :novelist} artist-map] (println "The painter is" painter) (println "The novelist is" writer))
The painter is :monet
The novelist is :austen```</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:47:34.379600</ts>
    <user>Malik</user>
    <text>in elixir/erlang and other languages it's more like: ```iex(4)&amp;gt; %{:painter =&amp;gt; painter, :novelist =&amp;gt; writer} = %{:painter =&amp;gt; :monet, :novelist =&amp;gt; :austen}
%{novelist: :austen, painter: :monet}
iex(5)&amp;gt; painter
:monet
iex(6)&amp;gt; writer
:austen```</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:48:08.380400</ts>
    <user>Malik</user>
    <text>but clojure goes `{symbol keyword}` instead of `{keyword symbol}`</text>
  </message>
  <message conversation_id="1163">
    <ts>2019-04-15T23:49:18.381600</ts>
    <user>Celestine</user>
    <text>&lt;@Wesley&gt; You'll need something like ```:repositories {"clojars" {:url "&lt;https://repo.clojars.org&gt;" :sign-releases false}}``` in your `project.clj` file.</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:50:29.382900</ts>
    <user>Celestine</user>
    <text>(or your `~/.lein/profiles.clj` file)</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:50:35.383100</ts>
    <user>Malik</user>
    <text>javascript works the same way as elixir/erlang, apparently</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:51:05.383700</ts>
    <user>Malik</user>
    <text>I'm used to things being done differently but usually they make some kind of sense to me. this really doesn't</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:51:36.384300</ts>
    <user>Celestine</user>
    <text>&lt;@Malik&gt; you can do `(let [{:keys [painter novelist]} artist-map] ...)`</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:52:36.384600</ts>
    <user>Malik</user>
    <text>say what now?</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:53:38.385200</ts>
    <user>Celestine</user>
    <text>You only need the form you showed if you want to rename the matches (as you did with `writer`)</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:53:39.385300</ts>
    <user>Malik</user>
    <text>oh, found it in the docs</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:54:15.386400</ts>
    <user>Malik</user>
    <text>that's cool and all, but I'm still stumped as to why it's in the form `{symbol keyword}`</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:54:38.387100</ts>
    <user>Celestine</user>
    <text>I pretty much always use the `:keys` form -- I just the other day used the long form because I was renaming a substructure match.</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:54:41.387200</ts>
    <user>Malik</user>
    <text>it's so counterintuitive to me</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:54:59.387600</ts>
    <user>Celestine</user>
    <text>Because you normal bind `symbol` to `expression`.</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:55:28.388100</ts>
    <user>Celestine</user>
    <text>So destructuring binds `symbol`s to `keyword` selections from the right hand side expression.</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:55:37.388300</ts>
    <user>Malik</user>
    <text>ohhhhhh</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:55:58.388900</ts>
    <user>Malik</user>
    <text>because you can call `(:keyword artist-map)`</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-15T23:57:35.389000</ts>
    <user>Frederick</user>
    <text>&lt;@Vita&gt; I wonder where are you aiming at. The core.cache implementation does not ensure that a fetch for a single key is called once. on the contrary:
```(defn get-data [key]
  (cache/lookup (swap! cache-store
                       #(if (cache/has? % key)
                          (cache/hit % key)
                          (cache/miss % key (retrieve-data key))))
                key))```
assumes that `retrieve-data` can be called multiple times since if multiple threads race on the missing key branch than the `atom` implementation will trigger a retry for the ‘loosing’ thread. Since the eviction policy I implemented is very naive (and that is quite okay for me), what I am looking for is just to ensure that `retrieve-data` is ensured to be called once per TTL expiry and not more. This is since I want to protect my DB against a flood of requests once the TTL of many object expires. &lt;@Celestine&gt; maybe you have some ideas?</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-16T00:02:24.389300</ts>
    <user>Celestine</user>
    <text>&lt;@Frederick&gt; Check through the open issues on the repo: there's discussion of exactly that issue and an example of how to ensure `retrieve-data` is only called exactly once.</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-16T00:07:07.389500</ts>
    <user>Frederick</user>
    <text>&lt;@Celestine&gt; no issues on that github page: &lt;https://github.com/clojure/core.cache&gt;
what m i  missing?</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-16T00:13:41.391600</ts>
    <user>Wesley</user>
    <text>&lt;@Celestine&gt; great--thanks much.  I wasn't even sure what config file I should be looking at.</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-16T00:15:54.391700</ts>
    <user>Frederick</user>
    <text>&lt;@Celestine&gt; no issues on that github page: &lt;https://github.com/clojure/core.cache&gt;
what m i  missing?</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-16T00:20:40.392000</ts>
    <user>Frederick</user>
    <text>I think that the issues are not open. is there an open jira sute for those?</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-16T00:27:15.392200</ts>
    <user>Frederick</user>
    <text>&lt;@Celestine&gt; I think I found it here: &lt;https://dev.clojure.org/jira/browse/CCACHE-50&gt;</text>
  </message>
  <message conversation_id="1164">
    <ts>2019-04-16T00:31:46.392400</ts>
    <user>Celestine</user>
    <text>Right. I have a notebook with ideas about how to make higher-level usage of the caches easier. There are some gotchas with TTL as well because `lookup` can cause cache expiry so the simple, obvious usage can return `nil` -- which `cache.memoize` has to deal with.</text>
  </message>
  <message conversation_id="1165">
    <ts>2019-04-16T07:11:17.394400</ts>
    <user>Leticia</user>
    <text>what’s idiomatic way to deduplicate messages from one channel into another within some window of X messages?</text>
  </message>
  <message conversation_id="1166">
    <ts>2019-04-16T07:38:34.395800</ts>
    <user>Rita</user>
    <text>Would anybody know why I'm getting this error message getting the Client for Datomic cloud ```Unable to resolve entry point, make sure you have the correct version of com.datomic/client on your classpath```</text>
  </message>
  <message conversation_id="1167">
    <ts>2019-04-16T08:58:09.398100</ts>
    <user>Leisa</user>
    <text>&lt;@Wesley&gt; Just looked into Zulip but not sure how to get started and find where you're suggesting I ask about this. Pointers? Clojure-scripted MASON might indeed be useful for me, especially if it could really all be done from Clojure.</text>
  </message>
  <message conversation_id="1167">
    <ts>2019-04-16T08:59:31.399600</ts>
    <user>Leisa</user>
    <text>If anyone else has pointers to Clojure/script-scriptable environments for 3D simulations/physics, beyond Arcadia and &lt;#C0FM7N1SM|quil&gt;, I'd love to hear about them!</text>
  </message>
  <message conversation_id="1167">
    <ts>2019-04-16T09:01:23.399900</ts>
    <user>Evonne</user>
    <text>Have you looked at &lt;https://github.com/oakes/play-cljc&gt; ?</text>
  </message>
  <message conversation_id="1167">
    <ts>2019-04-16T09:02:23.400300</ts>
    <user>Evonne</user>
    <text>(Successor to &lt;https://github.com/oakes/play-clj&gt;)</text>
  </message>
  <message conversation_id="1168">
    <ts>2019-04-16T09:11:19.400500</ts>
    <user>Otelia</user>
    <text>try &lt;#C03RZMDSH|datomic&gt; channel?</text>
  </message>
  <message conversation_id="1167">
    <ts>2019-04-16T09:58:40.403500</ts>
    <user>Ciara</user>
    <text>&lt;@Leisa&gt; searching on Zulip yields results from streams you're subscribed to. Searching for 'quil' yields results from the following streams for me: *clojure-stl* (&lt;https://clojurians.zulipchat.com/#narrow/stream/152255-clojure-stl&gt;), *data-science* (&lt;https://clojurians.zulipchat.com/#narrow/stream/151924-data-science&gt;) and the *slack-archive* (&lt;https://clojurians.zulipchat.com/#narrow/stream/180378-slack-archive&gt;)</text>
  </message>
  <message conversation_id="1167">
    <ts>2019-04-16T10:08:27.404100</ts>
    <user>Leisa</user>
    <text>Thanks &lt;@Ciara&gt;</text>
  </message>
  <message conversation_id="1169">
    <ts>2019-04-16T10:22:28.408500</ts>
    <user>Brent</user>
    <text>Hello! Any tips how to stop symbol included inside ` from being fully qualified? See ``` (let [s 'hello] `(defn ~s [] nil))``` produces `(defn myns.core/hello [] nil) ` Thank you!</text>
  </message>
  <message conversation_id="1169">
    <ts>2019-04-16T10:32:52.408800</ts>
    <user>Harris</user>
    <text>````(defn ~'hello [] nil)```</text>
  </message>
  <message conversation_id="1170">
    <ts>2019-04-16T11:39:39.410400</ts>
    <user>Shayla</user>
    <text>Are the macro characters processed from left to right/outer to inner?</text>
  </message>
  <message conversation_id="1170">
    <ts>2019-04-16T11:42:17.410700</ts>
    <user>Meagan</user>
    <text>what do you mean by “macro characters”?</text>
  </message>
  <message conversation_id="1170">
    <ts>2019-04-16T11:44:26.411400</ts>
    <user>Shayla</user>
    <text>sorry, didn't want to say symbols, I mean the tilde and apostrophe and others</text>
  </message>
  <message conversation_id="1170">
    <ts>2019-04-16T11:45:48.412000</ts>
    <user>Meagan</user>
    <text>still not sure I completely understand the question, but syntax quotes and other symbols operate the same as any other clojure form</text>
  </message>
  <message conversation_id="1170">
    <ts>2019-04-16T11:46:36.412700</ts>
    <user>Meagan</user>
    <text>e.g. ` will syntax quote the following _form_ and everything inside it</text>
  </message>
  <message conversation_id="1170">
    <ts>2019-04-16T11:47:25.413700</ts>
    <user>Meagan</user>
    <text>another way of thinking about it: `'(foo bar)` is the same thing as `(quote (foo bar))`</text>
  </message>
  <message conversation_id="1170">
    <ts>2019-04-16T11:47:58.414100</ts>
    <user>Meagan</user>
    <text>` and ~ operate the same</text>
  </message>
  <message conversation_id="1171">
    <ts>2019-04-16T12:41:31.414500</ts>
    <user>Jasmine</user>
    <text>All of them operate on the next read form</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T12:55:40.414600</ts>
    <user>Dann</user>
    <text>another reason is that the destructuring form is a hash-map, and you can't have a hash map that uses the same key multiple times

there are valid reasons to destructure on the same key twice in one destructure</text>
  </message>
  <message conversation_id="1171">
    <ts>2019-04-16T15:40:29.417500</ts>
    <user>Wesley</user>
    <text>&lt;@Leisa&gt;, well there are a bunch of data science people hanging out on Zulip lately, mostly in the data science section, but posting elsewhere.  What you're asking about isn't data science per se, I suppose, but there may be some overlap, and if nothing else, the data science people are interested in graphical representations such as quil.  Yes, you can do everything in MASON from Clojure, although there have to be parts that smell of Java.  More soon.</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T15:42:37.418500</ts>
    <user>Wesley</user>
    <text>Also, I haven't done anything with 3D MASON.  It's possible that my library has some 2D bias, but I don't think so.  If so, I'll fix it.</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T15:43:51.418800</ts>
    <user>Wesley</user>
    <text>Ah, I see, eval2020 responded usefully.</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:08:10.422200</ts>
    <user>Tammera</user>
    <text>Spec question: Say that I have a graph of _nodes_ and _edges_ modelled as a map with those keys. Now lets say that I want to spec that all nodes are connected. I can write a predicate `is-connected?` that takes the entire graph, and says whether it is connected yes or no. But for large graphs, that will be hard to track down. Is there a way to _also_ be able to spec it in such a way that I can also explain which node was not connected?</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:10:23.423500</ts>
    <user>Tammera</user>
    <text>Example: `{:nodes [:a :b :c :d] :edges [[:c :d]]}` is invalid because `:a` and `:b` are non-connected</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:12:22.424500</ts>
    <user>Lane</user>
    <text>What about `{:nodes [:a :b :c :d] :edges [[:c :d] [:a :b]]}`?</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:13:15.425000</ts>
    <user>Lane</user>
    <text>What I mean is that you might need a more precise definition of connected.</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:19:56.427800</ts>
    <user>Tammera</user>
    <text>Right, in reality I am interested in their degree, I am however struggling with writing a spec that is evaluated for each node with the graph as “context”. There is no way to determine the degree of a node without knowing to which other nodes it is connected to.</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:23:04.428700</ts>
    <user>Jasmine</user>
    <text>you are really just in the land of writing a function I think</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:23:13.429000</ts>
    <user>Jasmine</user>
    <text>spec is not going to help you with this problem much</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:23:51.429700</ts>
    <user>Jasmine</user>
    <text>there is not currently a way for predicates to give a more precise answer than valid/invalid</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:24:24.430700</ts>
    <user>Lane</user>
    <text>Yes, you should write a predicate that test whether the graph is connected and use it in your spec for the whole graph. If it is not you can write another functions that will return the potential "culprits".</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:24:41.431000</ts>
    <user>Jasmine</user>
    <text>explain can potentially tell you a more detailed reason why</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:25:12.431700</ts>
    <user>Jasmine</user>
    <text>or a set of "problems"</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:25:23.431900</ts>
    <user>Tammera</user>
    <text>I can attach a custom explanation, right? Because saying that it failed `is-connected?` is the thing that I am trying to avoid</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:26:44.433000</ts>
    <user>Tammera</user>
    <text>or… I want to be more specific than that</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:27:11.434000</ts>
    <user>Lane</user>
    <text>But you don't have to do this inside spec. You can detect that the graph is not connected by applying your spec and in a second time call a function that will identify the subgraphs.</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:27:40.434500</ts>
    <user>Jasmine</user>
    <text>I'm not sure that spec is giving you any value in what you're describing over just writing functions</text>
  </message>
  <message conversation_id="1172">
    <ts>2019-04-16T16:30:02.436200</ts>
    <user>Tammera</user>
    <text>right, yeah I just wanted to add it to the other things being checked with specs, but maybe I indeed shouldn’t. Such that checking with `s/valid?` gives you the “entire” picture. I’ll hammock over that, thanks as always!</text>
  </message>
  <message conversation_id="1173">
    <ts>2019-04-16T16:40:00.438600</ts>
    <user>Huey</user>
    <text>Has anyone had issues using `scroll` from clojurewerkz/elastisch API pointing to ES version 6.4.2? This method works fine for ES 5.x.</text>
  </message>
  <message conversation_id="1174">
    <ts>2019-04-16T18:19:18.439500</ts>
    <user>Faustino</user>
    <text>@jp are you trying to do infinite scroll?</text>
  </message>
  <message conversation_id="1174">
    <ts>2019-04-16T18:19:28.439600</ts>
    <user>Faustino</user>
    <text>are you implementing infinite scroll?</text>
  </message>
  <message conversation_id="1174">
    <ts>2019-04-16T18:20:07.439800</ts>
    <user>Faustino</user>
    <text>I wrote those from scratch in JS. Saving the position on the page and loading it…. is a deal breaker in terms of UX. I don’t like infinite scroll for that reason.</text>
  </message>
  <message conversation_id="1174">
    <ts>2019-04-16T18:21:07.440000</ts>
    <user>Faustino</user>
    <text>Infinite scroll does not add value to UX… You could just write an ajax pagination if you want a better user experience. If you are just trying to save the user from needing to refresh a web page/</text>
  </message>
  <message conversation_id="1175">
    <ts>2019-04-16T20:36:19.440200</ts>
    <user>Dann</user>
    <text>&lt;https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-scroll.html&gt;</text>
  </message>
  <message conversation_id="1175">
    <ts>2019-04-16T20:39:32.442200</ts>
    <user>Mohamed</user>
    <text>I have in coming datastructures for requests like this
```
[{(ucv.ui.root.signon/login {:email "&lt;mailto:admin@foobar.com|admin@foobar.com&gt;", :password "letmein"})
  [:session-key :logged-in? :user-id :firm-id :pos/id :user/id :firm/id]} :com.wsscode.pathom/trace]
```
And I want to log them, but omit any whitelisted keys (like `:password`), but otherwise log the datastructure completely as is (don’t want to change vectors to lists or anything). What the recommended way of doing that?</text>
  </message>
  <message conversation_id="1175">
    <ts>2019-04-16T20:42:51.442300</ts>
    <user>Mohamed</user>
    <text>I tried `clojure.walk/poswalk` but even with `identity` that changes the datastructure</text>
  </message>
  <message conversation_id="1175">
    <ts>2019-04-16T20:43:48.442500</ts>
    <user>Mohamed</user>
    <text>oh wait no, i forgot to prevent the list from being treated as code</text>
  </message>
  <message conversation_id="1175">
    <ts>2019-04-16T20:44:22.442700</ts>
    <user>Mohamed</user>
    <text>so, seems like postwalk can work, is that the recommended approach for something like this?</text>
  </message>
  <message conversation_id="1176">
    <ts>2019-04-16T21:09:17.443100</ts>
    <user>Tonya</user>
    <text>what do you want to log them to? plaintext?</text>
  </message>
  <message conversation_id="1176">
    <ts>2019-04-16T21:15:43.443300</ts>
    <user>Faustino</user>
    <text>Why can’t you just query the search page by page… instead of setting a scroll timeout parameter?</text>
  </message>
  <message conversation_id="1176">
    <ts>2019-04-16T21:16:13.443500</ts>
    <user>Faustino</user>
    <text>Solr/ElasticSearch should be able to paginate your search</text>
  </message>
  <message conversation_id="1176">
    <ts>2019-04-16T21:17:50.443700</ts>
    <user>Faustino</user>
    <text>it sounds like scroll is for clients that cannot keep track of the same search url</text>
  </message>
  <message conversation_id="1176">
    <ts>2019-04-16T21:18:08.443900</ts>
    <user>Mohamed</user>
    <text>just logging with timbre</text>
  </message>
  <message conversation_id="1177">
    <ts>2019-04-16T22:27:18.444200</ts>
    <user>Tonya</user>
    <text>yeah to remove the :password field in an arbitrarily nested structure postwalk is your best bet</text>
  </message>
  <message conversation_id="1178">
    <ts>2019-04-16T23:58:26.444400</ts>
    <user>Lavonia</user>
    <text>`postwalk` should do well. If you want to preserve the datastructure though (i.e, not everything should be coerced to seqs which print as lists) check out the library `specter`. Code for things like this also ends up being faster and less ceremonious.</text>
  </message>
  <message conversation_id="1179">
    <ts>2019-04-17T02:31:56.453200</ts>
    <user>Alleen</user>
    <text>I want to write a clojure function in java, and that function may throw an exception that is unknown at compile time.

in clojure I can throw anything, anywhere :
```
(fn [error] (throw error))
```
So clearly the JVM bytecode allows this and it does the expected thing at runtime. But if I try to do that in java, `javac` gives the finger :
```
new AFn() {
            public Object invoke(Object error) {
                throw (Throwable) error;
            }
        };
```
`unreported exception java.lang.Throwable; must be caught or declared to be thrown`

is there a compiler or language trick to make `javac` happy there ?</text>
  </message>
  <message conversation_id="1179">
    <ts>2019-04-17T03:49:05.453500</ts>
    <user>Alleen</user>
    <text>found my answer &lt;https://stackoverflow.com/questions/4519557/is-there-a-way-to-throw-an-exception-without-adding-the-throws-declaration&gt;</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:07:54.455300</ts>
    <user>Clarine</user>
    <text>With clojure.tools.reader, how do I set the “current ns” when reading auto-namespaced keywords?
```
(binding [r/*alias-map* {? 'foo}] (read-expressions "(ns foo) #::{:b 1}"))
```</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:09:22.455700</ts>
    <user>Clarine</user>
    <text>or do I set `*ns*` to `'foo`?</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:10:37.456400</ts>
    <user>Clarine</user>
    <text>that works:
```
(binding [*ns* (create-ns 'foo)
            r/*alias-map* {'foo 'foo}] (read-expressions "(ns foo) #::{:b 1}"))
```
but I’ve no idea if that’s how it should work</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:13:55.456800</ts>
    <user>Harris</user>
    <text>`read-expressions` can't really work consistently in clojure jvm</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:14:40.457800</ts>
    <user>Harris</user>
    <text>consider `"(ns foo (:use bar)) (foo)  #::{:b 1}"` with `(ns bar) (defn foo [] (in-ns 'bar))`</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:15:08.458500</ts>
    <user>Harris</user>
    <text>if you accept this limitaion, then yes, bind `*ns*` manually</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:15:14.458700</ts>
    <user>Harris</user>
    <text>no need for alias-map</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:15:38.459200</ts>
    <user>Harris</user>
    <text>but the model of clojure is read-eval-loop</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:15:45.459600</ts>
    <user>Harris</user>
    <text>not read-loop</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:15:55.459900</ts>
    <user>Clarine</user>
    <text>read-expressions is my own function, which should emulate the read-eval loop</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:16:09.460200</ts>
    <user>Clarine</user>
    <text>so I’m going to mess with `*ns*` there</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:16:28.460600</ts>
    <user>Harris</user>
    <text>then if you eval the `ns` form before reading the map it should `set! *ns*` automatically</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:16:42.461000</ts>
    <user>Harris</user>
    <text>and there should be no need to bind it</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:17:02.461400</ts>
    <user>Clarine</user>
    <text>I’m not going to eval anything, just static code analysis</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:17:10.461600</ts>
    <user>Harris</user>
    <text>ok, that's what I'm saying</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:17:17.461900</ts>
    <user>Harris</user>
    <text>it cannot work in the general case in clojure</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:17:33.462300</ts>
    <user>Harris</user>
    <text>because clojure is not static like clojurescript</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:17:43.462800</ts>
    <user>Harris</user>
    <text>and the read/eval phases are not split</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:17:51.463100</ts>
    <user>Clarine</user>
    <text>because there can be non-top-level in-ns expressions you mean?</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:18:03.463400</ts>
    <user>Harris</user>
    <text>same reason why you can't macroexpand a full file w/o step by step evaluation</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:18:18.463600</ts>
    <user>Harris</user>
    <text>this can work in clojurescript, not in clojure</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:18:29.463900</ts>
    <user>Harris</user>
    <text>it can work in clojure for the 90% of the real world code, but by convention</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:18:42.464200</ts>
    <user>Clarine</user>
    <text>yeah, I guess I’m going to have to live with that</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:19:11.464900</ts>
    <user>Harris</user>
    <text>right, then yes, `(binding [*ns* (create-ns ..)] ..)` is the best you can do</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:19:36.465300</ts>
    <user>Harris</user>
    <text>modulo doing some crazy analysis but I don't think you want to go there</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:19:50.465500</ts>
    <user>Harris</user>
    <text>yes</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:19:50.465700</ts>
    <user>Clarine</user>
    <text>90% is good for now</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:20:05.466000</ts>
    <user>Harris</user>
    <text>I'm just inventing that % btw :)</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:20:13.466200</ts>
    <user>Clarine</user>
    <text>I think you’re not far off :wink:</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:21:14.466700</ts>
    <user>Harris</user>
    <text>being able to do this stuff is why CL has `eval-when` and racket has defined phases</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:21:25.467000</ts>
    <user>Harris</user>
    <text>clojure has nothing equivalent</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:21:52.467400</ts>
    <user>Harris</user>
    <text>it's not the easiest language to build tooling/analysis for</text>
  </message>
  <message conversation_id="1180">
    <ts>2019-04-17T07:22:15.467700</ts>
    <user>Harris</user>
    <text>but often it doesn't really matter to be fair</text>
  </message>
  <message conversation_id="1181">
    <ts>2019-04-17T07:45:46.468000</ts>
    <user>Toccara</user>
    <text>Hello guys</text>
  </message>
  <message conversation_id="1181">
    <ts>2019-04-17T07:46:19.468600</ts>
    <user>Toccara</user>
    <text>what is the best way to override protected java method ?</text>
  </message>
  <message conversation_id="1181">
    <ts>2019-04-17T07:47:04.468800</ts>
    <user>Toccara</user>
    <text>for example:</text>
  </message>
  <message conversation_id="1181">
    <ts>2019-04-17T07:47:38.468900</ts>
    <user>Toccara</user>
    <text>None</text>
  </message>
  <message conversation_id="1181">
    <ts>2019-04-17T07:47:53.469400</ts>
    <user>Toccara</user>
    <text>i would like to write this piece of java in clojure</text>
  </message>
  <message conversation_id="1181">
    <ts>2019-04-17T07:50:52.470300</ts>
    <user>Min</user>
    <text>In theory with gen-class I think, in practice writing it in java feels cleaner/faster</text>
  </message>
  <message conversation_id="1181">
    <ts>2019-04-17T07:51:32.470800</ts>
    <user>Min</user>
    <text>there was also once a discussion about this on jira, but it's gathering dust: &lt;https://dev.clojure.org/jira/browse/CLJ-1255&gt;</text>
  </message>
  <message conversation_id="1182">
    <ts>2019-04-17T08:10:56.471500</ts>
    <user>Jasmine</user>
    <text>Well aware of it, hoping to consider for 1.11 when we get there</text>
  </message>
  <message conversation_id="1182">
    <ts>2019-04-17T08:12:50.472600</ts>
    <user>Jasmine</user>
    <text>You can find various utilities Clojure uses for this in clojure.lang.Util, like the sneakyThrow() method.</text>
  </message>
  <message conversation_id="1182">
    <ts>2019-04-17T08:13:06.473000</ts>
    <user>Min</user>
    <text>excellent</text>
  </message>
  <message conversation_id="1183">
    <ts>2019-04-17T08:23:15.473400</ts>
    <user>Alleen</user>
    <text>exactly what I need, thanks !</text>
  </message>
  <message conversation_id="1184">
    <ts>2019-04-17T09:21:17.474100</ts>
    <user>Toccara</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="1185">
    <ts>2019-04-17T09:55:41.475600</ts>
    <user>Zona</user>
    <text>how useful are code reloading libraries like Component, Mount or Integrant? I worry that I'm diving into using a workflow I don't really need.</text>
  </message>
  <message conversation_id="1185">
    <ts>2019-04-17T10:00:13.477100</ts>
    <user>Aubrey</user>
    <text>You could start with just an atom holding your database connection pool - then go with one of those libraries when you need a second atom and dependencies between them. </text>
  </message>
  <message conversation_id="1185">
    <ts>2019-04-17T10:06:28.477500</ts>
    <user>Patrice</user>
    <text>as soon as you have resources that need to be initialized and restarted (database connection pools, HTTP server, job scheduler etc), it starts to make sense to use this pattern. I found Component to have too much bureaucracy and mount to be too “magical”, so these days I feel that integrant is a very good middle way</text>
  </message>
  <message conversation_id="1186">
    <ts>2019-04-17T10:32:28.486700</ts>
    <user>Huey</user>
    <text>&lt;@Faustino&gt; thanks for your response! I am not trying to implement anything UX related- I simply want to retrieve all the data from a given index which is too much data to fetch at once (more than 10K records). I can definitely look into pagination instead. `clojurewerks.elasticsch` did a good job with `scroll-seq` in that it was very simple to retrieve all data with one call so I was hoping to use it in in a newer ES version.</text>
  </message>
  <message conversation_id="1186">
    <ts>2019-04-17T10:35:10.488800</ts>
    <user>Alysa</user>
    <text>Just throwing this out there as a GUI alternative. I'm slow, still learning Clojure, time-constrained  but I think a productive exercise is to translate  the guiserver.lsp file written in newlisp to clojure. The actual GUI part is written in Java and spun up separately from a jar and the guiserver.lsp talks to it over a socket. I think it would be a very nice addition as a clojure librsry. If you play with it first in newlisp, you'll find its plenty responsive and complete enough.</text>
  </message>
  <message conversation_id="1186">
    <ts>2019-04-17T10:54:32.492300</ts>
    <user>Faustino</user>
    <text>hmm. thinking. When I worked with Solr Lucene, I remember just iterating through the pages by page number in the get url portion.</text>
  </message>
  <message conversation_id="1187">
    <ts>2019-04-17T12:41:40.493800</ts>
    <user>Madeleine</user>
    <text>They're not very useful to be honest</text>
  </message>
  <message conversation_id="1187">
    <ts>2019-04-17T12:41:55.494000</ts>
    <user>Madeleine</user>
    <text>Don't use them until you feel a need for it</text>
  </message>
  <message conversation_id="1187">
    <ts>2019-04-17T12:43:25.494300</ts>
    <user>Madeleine</user>
    <text>Especially if.you have this worry, it probably means you don't need them.</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:51:21.495400</ts>
    <user>Fausto</user>
    <text>Anyone know of something like `clojure.core/eduction` except where the *input* is itself a reducible?</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:52:09.496300</ts>
    <user>Fausto</user>
    <text>Another way to say it would maybe be “something that could wrap a given reducible with a transducer xform”</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:52:41.496500</ts>
    <user>Rosaline</user>
    <text>that is what eduction does</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:55:08.498000</ts>
    <user>Rosaline</user>
    <text>my mistake, actually eduction doesn't call seq when printed either</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:55:42.498500</ts>
    <user>Marlyn</user>
    <text>it's the print mechanism that calls seq on it</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:55:47.498700</ts>
    <user>Rosaline</user>
    <text>oh, yes it does</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:55:48.498800</ts>
    <user>Marlyn</user>
    <text>I think I logged a bug on this</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:55:54.499000</ts>
    <user>Rosaline</user>
    <text>yeah, print-sequential</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:56:18.499200</ts>
    <user>Marlyn</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1747&gt;</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:58:06.000600</ts>
    <user>Marlyn</user>
    <text>```
(defn less-promises-eduction [xform coll]
  (reify clojure.lang.IReduceInit
   (reduce [_ f init]
     ;; NB (completing f) isolates completion of inner rf from outer rf
      (transduce xform (completing f) init coll)))
```</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:58:41.001200</ts>
    <user>Fausto</user>
    <text>&lt;@Rosaline&gt; Heh, how about that. I assumed from the docstring it needed a coll, and I saw that error when trying it at the repl :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1188">
    <ts>2019-04-17T12:58:56.001500</ts>
    <user>Fausto</user>
    <text>Thanks very much</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:16:34.004500</ts>
    <user>Raina</user>
    <text>I have a function that returns a lazy sequence, and I want to lazily concat invocations of this function. So I wanted to use `concat`, but I heard that it has performance issues and that each concatenation deepens the call stack. Is there some other way I can achieve this?</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:18:09.005800</ts>
    <user>Raina</user>
    <text>For instance if you had a function `(get-page n)` and it returns 10 items or nil, and you wanted to return a sequence of items that lazily calls `get-page` in the background as needed, what would you do?</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:19:08.006500</ts>
    <user>Raina</user>
    <text>and each call has a cost so you don't want to chunked-seq 32 calls at a time</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:19:28.006800</ts>
    <user>Jasmine</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1906&gt; is a longer exploration of this problem</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:23:10.008300</ts>
    <user>Rosaline</user>
    <text>there are kind of 2 things there: 1. paginated api calls 2. concat</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:23:22.008800</ts>
    <user>Rosaline</user>
    <text>for concat I wouldn't worry</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:23:43.009400</ts>
    <user>Raina</user>
    <text>I heard a couple of people complain about that</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:24:16.010500</ts>
    <user>Rosaline</user>
    <text>the problem with concat occurs when you use it in particular ways, but for example `(apply concat (get-pages ...))` is generally safe</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:24:43.011100</ts>
    <user>Raina</user>
    <text>And it's not `(concat ...seqs...)` it's really `(concat page 1 (lazy-seq (concat page2 (lazy-seq (concat page-3...`</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:25:05.011800</ts>
    <user>Raina</user>
    <text>A sequence of concats on 2 args</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:25:12.012000</ts>
    <user>Rosaline</user>
    <text>yeah, don't do it that way</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:25:23.012300</ts>
    <user>Rosaline</user>
    <text>build a seq of seqs, then apply concat</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:25:43.012700</ts>
    <user>Raina</user>
    <text>but I don't know in advance how many subsequences I need to fetch</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:25:54.013200</ts>
    <user>Rosaline</user>
    <text>that is fine</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:25:56.013400</ts>
    <user>Raina</user>
    <text>I'm not going to load all pages then apply</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:26:14.013800</ts>
    <user>Rosaline</user>
    <text>apply won't load all the pages</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:26:15.013900</ts>
    <user>Raina</user>
    <text>that defeats the purpose altogether</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:29:28.016300</ts>
    <user>Rosaline</user>
    <text>`(apply concat s)` forces the first two elements of s (the first two pages) and then the rest will be forced as you walk the seq</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:30:21.017300</ts>
    <user>Rosaline</user>
    <text>but in general, lazy-seqs are not the best abstraction for io, which is why in my initial proposal on CLJ-1906 linked above I suggested something that just implements IReduceInit</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:31:42.018600</ts>
    <user>Rosaline</user>
    <text>exactly how and when pages are forced if you use lazy-seqs will also depend a lot on where/if you put the `(lazy-seq ...)` inside get-page (assuming it has one)</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:32:24.019200</ts>
    <user>Raina</user>
    <text>yeah I am aware of that</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:32:38.019800</ts>
    <user>Raina</user>
    <text>I think I'll read the discussion in that ticket</text>
  </message>
  <message conversation_id="1189">
    <ts>2019-04-17T14:33:27.020700</ts>
    <user>Rosaline</user>
    <text>&lt;https://ce2144dc-f7c9-4f54-8fb6-7321a4c318db.s3.amazonaws.com/reducers.html&gt; is a thing I wrote a while ago about using reduce for this kind of thing, it talks about reducers which are kind of old news these days, clojure has grown even more reduce related features since then (transducers, the interfaces Reduce and ReduceInit)</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:08:18.021500</ts>
    <user>Tamie</user>
    <text>i seem to recall that there was a way to inspect or print out the intermediate values of the threading macros...  like an audit or something...  does that ring a bell for anyone?</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:12:32.022200</ts>
    <user>Dann</user>
    <text>`(-&amp;gt; foo (f) (doto println) (g))` is one pattern for a quick hack</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:13:26.022400</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (-&amp;gt; 42 (+ 10) (doto println) (* 2))
52
104```</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:26:52.022900</ts>
    <user>Tamie</user>
    <text>How do I add metadata, this doesn't work:
```
(-&amp;gt; (map (fn [x] ^{:a 1} x) [1 2 3])
    first
    meta)
;; ==&amp;gt; nil
```</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:27:40.023300</ts>
    <user>Dann</user>
    <text>numbers don't accept metadata, you need a type which supports it</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:28:23.024000</ts>
    <user>Dann</user>
    <text>the metadata is implemented as a field on the object that has it, if the object doesn't define the field there's nowhere for metadata to go</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:30:39.025400</ts>
    <user>Dann</user>
    <text>it might be more straightforward to use `(fn [x] {:a 1 :val x})` and then use `(map :val)` at the last step, rather than putting the metadata on the thing, you mix the thing in with the metadata</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T15:33:54.026300</ts>
    <user>Onita</user>
    <text>hey everyone. i noticed that my heap usage according to visualvm has been increasing monotonically since i launched my application in the repl. is there anything going on under the hood that could be contributing to this outside of my application, or do i definitely have a leak somewhere?</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T15:34:13.026500</ts>
    <user>Onita</user>
    <text>about 1mb every two seconds or so</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:36:03.027000</ts>
    <user>Dann</user>
    <text>the biggest gotcha I can think of is an indefinite lazy-seq where you hold onto a reference to the head</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T15:36:37.028000</ts>
    <user>Onita</user>
    <text>oh, weird. it just dropped to about half and started increasing again</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:36:45.028200</ts>
    <user>Dann</user>
    <text>but also it's normal for the jvm gc to let your app usage ramp up indefinitely until some limit is hit - you can test this by specifying a lower max usage</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:37:03.028600</ts>
    <user>Dann</user>
    <text>OK, that's normal jvm behavior, it's batching some things for perf reasons</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T15:37:10.028800</ts>
    <user>Onita</user>
    <text>interesting</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T15:37:33.029400</ts>
    <user>Onita</user>
    <text>so this isn’t indicative of a problem?</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:37:45.029700</ts>
    <user>Dann</user>
    <text>a normal run of a well-behaved app will look like a sawtooth, where garbage slowly accumulates then all goes down at once</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T15:37:52.030000</ts>
    <user>Onita</user>
    <text>yeah, that’s exactly what it looks like</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:38:02.030200</ts>
    <user>Onita</user>
    <text>cool. thanks</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:41:15.030600</ts>
    <user>Onita</user>
    <text>so i wonder if i need to keep my maximum steady-state usage to less than the vertical offset of this sawtooth</text>
  </message>
  <message conversation_id="1190">
    <ts>2019-04-17T15:41:40.030900</ts>
    <user>Onita</user>
    <text>or if it’ll clean up before pushing me over the edge</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T15:46:53.031800</ts>
    <user>Jasmine</user>
    <text>depends a lot on your app. how much resident memory does the app actually need? how fast does it produce garbage objects? etc. there are a few hundred knobs to turn for GC.</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T15:54:05.032500</ts>
    <user>Onita</user>
    <text>hmm, ok. are there any resources you could point me to in learning to formulate the right questions to ask here?</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T15:57:10.033200</ts>
    <user>Jasmine</user>
    <text>it's a big topic, probably worth doing some googling. I don't have a canonical resource to point you to.</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T16:01:34.035600</ts>
    <user>Celestine</user>
    <text>&lt;@Onita&gt; Folks who are new to the JVM are often shocked by how much memory it takes up but it's a highly tuned platform and its ability to transparently use and release memory is part of what gives it the power it has... In production, we run processes with between 1GB and 4GB max heap typically -- mostly toward the low end of that -- and those are pretty high traffic processes.</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T16:03:17.037000</ts>
    <user>Celestine</user>
    <text>(we have multiple, small services in Clojure now -- previously we had a monolithic web app in a different tech on the JVM and it needed 10-15GB of heap to stay high performance)</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T16:04:30.037300</ts>
    <user>Onita</user>
    <text>cool, much appreciated</text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T16:06:44.037600</ts>
    <user>Malik</user>
    <text>ohhh interesting </text>
  </message>
  <message conversation_id="1191">
    <ts>2019-04-17T16:06:52.037900</ts>
    <user>Malik</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1192">
    <ts>2019-04-17T17:12:44.038600</ts>
    <user>Madeleine</user>
    <text>The default GC for the JVM are optimized for performance, not for memory</text>
  </message>
  <message conversation_id="1192">
    <ts>2019-04-17T17:13:43.039800</ts>
    <user>Madeleine</user>
    <text>Every GC run, that is, having to loop over objects, identify garbage, and clean it up, takes CPU away from your app</text>
  </message>
  <message conversation_id="1192">
    <ts>2019-04-17T17:14:18.040700</ts>
    <user>Madeleine</user>
    <text>And also will hit your CPU caches and all. Making them cold again for your own computations</text>
  </message>
  <message conversation_id="1192">
    <ts>2019-04-17T17:14:54.041500</ts>
    <user>Madeleine</user>
    <text>Thus what it generally does is wait until absolutely necessary before cleaning up</text>
  </message>
  <message conversation_id="1192">
    <ts>2019-04-17T17:15:14.042000</ts>
    <user>Madeleine</user>
    <text>So it'll just let garbage accumulate until you run out of memory</text>
  </message>
  <message conversation_id="1192">
    <ts>2019-04-17T17:16:23.043600</ts>
    <user>Madeleine</user>
    <text>That's a typical server workload style. Where it assumes your process is the main thing your OS is running, and thus it's better to maximise all your memory use and trade it for better performance</text>
  </message>
  <message conversation_id="1193">
    <ts>2019-04-17T17:45:21.043700</ts>
    <user>Faustino</user>
    <text>What kind of tech did you have on the JVM to run the monolith? A web framework? I am just wondering which stack takes 15 GB to run.</text>
  </message>
  <message conversation_id="1192">
    <ts>2019-04-17T18:35:53.044300</ts>
    <user>Tanisha</user>
    <text>&lt;@Onita&gt; This is a good overview of the GC options: &lt;https://dzone.com/articles/choosing-the-right-gc&gt;</text>
  </message>
  <message conversation_id="1192">
    <ts>2019-04-17T18:38:40.045400</ts>
    <user>Tanisha</user>
    <text>It's a bit old, so it's leaving out a new GC coming in Java 11 (&lt;https://www.opsian.com/blog/javas-new-zgc-is-very-exciting/&gt;)</text>
  </message>
  <message conversation_id="1194">
    <ts>2019-04-17T19:01:52.050300</ts>
    <user>Donetta</user>
    <text>Is there any concept of inheritance ala common lisp CLOS defclass extending another class and fulfilling its type checks of the parent (particularly for multi method dispatch)?  Like, if I have a defrecord Person, and want multi dispatched on class. And want an Employee to extend person defrecord without redundant list of field names in arg vector,  and would like a defmethod foo Person to work on an Employee instance</text>
  </message>
  <message conversation_id="1194">
    <ts>2019-04-17T19:04:09.051900</ts>
    <user>Rosaline</user>
    <text>no</text>
  </message>
  <message conversation_id="1194">
    <ts>2019-04-17T19:05:08.052900</ts>
    <user>Celestine</user>
    <text>CFML. It would run in a lot less, but the best performance was when we cranked the heap up to 15GB, so the GC had plenty of leeway to do its work (we we using the G1 collector so we could minimize pauses and have reliable throughput).</text>
  </message>
  <message conversation_id="1194">
    <ts>2019-04-17T19:06:06.054100</ts>
    <user>Rosaline</user>
    <text>what you are describe is a typical oop type/class hierarchy, which to some degree clojure rejects(while still having to interop with that kind of thing on the java side) as a good way to organize data.</text>
  </message>
  <message conversation_id="1194">
    <ts>2019-04-17T19:07:37.054600</ts>
    <user>Rosaline</user>
    <text>&lt;https://clojure.org/about/rationale#_object_orientation_is_overrated&gt;</text>
  </message>
  <message conversation_id="1194">
    <ts>2019-04-17T19:11:42.055100</ts>
    <user>Jasmine</user>
    <text>Clojure rejects concrete inheritance</text>
  </message>
  <message conversation_id="1194">
    <ts>2019-04-17T19:15:33.055600</ts>
    <user>Malik</user>
    <text>why someone would be inheriting concrete is another question entirely</text>
  </message>
  <message conversation_id="1194">
    <ts>2019-04-17T19:23:15.055900</ts>
    <user>Faustino</user>
    <text>wow, Cold Fusion. I remember that framework. It was just before Rails started gaining traction.</text>
  </message>
  <message conversation_id="1195">
    <ts>2019-04-17T20:20:24.056800</ts>
    <user>Celestine</user>
    <text>These days CFML has both a commercial implementation (Adobe) and an open source implementation (Lucee). It evolved into a JS-like scripting language that compiles-on-demand to JVM bytecode (like Clojure), with a traditional OO model (unlike JS's prototype stuff), and it supports some metaprogramming, closures, map/filter/reduce etc. And it changed from Cold Fusion to ColdFusion some time in the 90's :slightly_smiling_face: I first encountered it when I worked at Macromedia and they bought Allaire (who created it in '95).</text>
  </message>
  <message conversation_id="1195">
    <ts>2019-04-17T20:22:39.057000</ts>
    <user>Celestine</user>
    <text>We migrated piecemeal to Clojure -- I wrote a small CFML library that did some classpath "magic" and used Clojure's Java API to `require` and call into arbitrary Clojure code: ```;; Clojure code
(some.namespace/func arg1 arg2)

// CFML code
clj.some.namespace.func( arg1, arg2 );``` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1195">
    <ts>2019-04-17T20:24:06.057200</ts>
    <user>Celestine</user>
    <text>Then we rewrote our code from the bottom up, until we had enough built to start spinning off individual Ring/Compojure apps.</text>
  </message>
  <message conversation_id="1195">
    <ts>2019-04-17T20:25:42.057400</ts>
    <user>Celestine</user>
    <text>I even have an adapter, written in CFML, that can call Ring handlers written in Clojure, and bridges cookies and session management across the two, so we can rewrite our remaining app one controller method at a time :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1195">
    <ts>2019-04-17T20:34:46.057700</ts>
    <user>Onita</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1196">
    <ts>2019-04-17T21:04:45.057900</ts>
    <user>Faustino</user>
    <text>I know that companies will hire you on the spot for Cold Fusion… because the talent pool is so tiny.</text>
  </message>
  <message conversation_id="1196">
    <ts>2019-04-17T21:06:24.058100</ts>
    <user>Celestine</user>
    <text>That's how I got hired into my current company -- where I introduced Clojure to replace CFML :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1196">
    <ts>2019-04-17T21:16:55.058300</ts>
    <user>Faustino</user>
    <text>is it a good strategy as one grows in their career? Opposed to working for startups just doing full stack dev?</text>
  </message>
  <message conversation_id="1196">
    <ts>2019-04-17T21:46:26.059500</ts>
    <user>Celestine</user>
    <text>I'm server side only and I don't like startup / Silicon Valley culture :upside_down_face:</text>
  </message>
  <message conversation_id="1196">
    <ts>2019-04-17T21:47:37.060500</ts>
    <user>Celestine</user>
    <text>Front end stuff is just too annoying for an old dog like me to want to put up with!</text>
  </message>
  <message conversation_id="1196">
    <ts>2019-04-17T21:59:12.060700</ts>
    <user>Faustino</user>
    <text>ohhh believe me too… JS fatigue is hitting me too. I think JS is driving tons of people nuts.</text>
  </message>
  <message conversation_id="1196">
    <ts>2019-04-17T22:00:47.060900</ts>
    <user>Faustino</user>
    <text>&lt;https://dmitripavlutin.com/6-ways-to-declare-javascript-functions/&gt;</text>
  </message>
  <message conversation_id="1196">
    <ts>2019-04-17T22:00:55.061200</ts>
    <user>Faustino</user>
    <text>6 ways… omg wow</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:28:23.070700</ts>
    <user>Wesley</user>
    <text>If the lib you need requires concrete inheritance, then you have to do it anyway.  In a specialized domain, you may not have a choice.  And the Java programmers who wrote it are just doing what makes sense in that world.  I personally would rather Clojure was a little more accommodating of this situation, but I accept that this is probably unlikely to change.  (I have fought the `gen-class` and contained it.)</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:30:11.071700</ts>
    <user>Wesley</user>
    <text>Ah, got it.  Too tired.  Feet stuck in it.</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:30:47.072300</ts>
    <user>Donetta</user>
    <text>I like the fact that I can use a class from defrecord as an early guard against invalid inputs to calls I want to make on it, for instance:
```
         (defmulti alive? class)
         (defmethod alive? UnitModel [{:keys [hp]}]
           (&amp;gt; hp 0))
```</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:31:46.073200</ts>
    <user>Donetta</user>
    <text>But, if there was any CL CLOS like facility, it would be even nicer if I could have a more specialized call like:
```
(defmethod alive? UndeadModel [{:keys [hp]}]
  (&amp;lt; hp 1))
```</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:32:39.074000</ts>
    <user>Donetta</user>
    <text>to me, its nicer to read a very small specialized/dispatching function, rather than a big case/cond within a defn that has to hold all current and future logic</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:34:06.074600</ts>
    <user>Rosaline</user>
    <text>`(defn alive? [{:keys [hp]}] (&amp;lt; hp 1))`</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:36:38.075800</ts>
    <user>Rosaline</user>
    <text>in general, using defrecords purely as data containers is kind of gross, use a map</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:36:49.076100</ts>
    <user>Donetta</user>
    <text>I want flip flopped alive logic - if the unit is normal, hp &amp;gt; 0, if its undead, hp less than 1.  If its some future type, like "plant", maybe its alive or dead based on which season of the year it is</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:37:47.076600</ts>
    <user>Donetta</user>
    <text>I mean I could just use a 'type' key in a map and a case to choose which fn to dispatch to</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:37:53.076800</ts>
    <user>Donetta</user>
    <text>just seems odd there is no built in facility to handle it</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:38:12.077300</ts>
    <user>Rosaline</user>
    <text>you could do that, and you can use the hierarchy facility to do whatever</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:39:18.078300</ts>
    <user>Rosaline</user>
    <text>&lt;https://clojure.org/reference/multimethods&gt;</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:40:23.079300</ts>
    <user>Rosaline</user>
    <text>but using it is kind of gross and weird, it is very rare to come across</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:40:28.079400</ts>
    <user>Donetta</user>
    <text>Started with a plain map, was attempting to refactor for cleaner code</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:41:00.080200</ts>
    <user>Donetta</user>
    <text>basically, a combo of defrecord / spec and a custom factory fn (`make`) so I can ensure I always have valid state units in game</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:43:14.081100</ts>
    <user>Donetta</user>
    <text>I was just hoping to branch it out into MobModel and PlayerModel actually, so I could keep AI logic separate from player specific functionality - in current iteration it is just plain maps and mobs become mob by having the :mob key added to their map</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:43:41.081800</ts>
    <user>Donetta</user>
    <text>just seems kind of fast and loose and future error prone (when I have to backtrack through 100 function calls in the future and identify all fields a unit should have)</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:44:43.082400</ts>
    <user>Rosaline</user>
    <text>spec works much nicer with plain maps vs records</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:45:14.083200</ts>
    <user>Rosaline</user>
    <text>I am not sure what you mean about back tracking through 100 function calls, if you have a spec that says what should be in a map, you have a spec</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:45:31.083700</ts>
    <user>Donetta</user>
    <text>sorry that was under the current iteration where I didn't really bother with it</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:45:36.084000</ts>
    <user>Rosaline</user>
    <text>you can insert validation where you want it</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:45:51.084800</ts>
    <user>Rosaline</user>
    <text>or leave it out, or only validate when running tests, or whatever</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:49:27.085900</ts>
    <user>Celestine</user>
    <text>I'm so out of touch -- I know only two ways in JS! :rolling_on_the_floor_laughing:</text>
  </message>
  <message conversation_id="1198">
    <ts>2019-04-17T22:57:47.086900</ts>
    <user>Donetta</user>
    <text>What am I screwing up on the spec here?</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:58:03.087600</ts>
    <user>Wesley</user>
    <text>A defrecord is simpler than spec if you don't need spec for other reasons.</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T22:58:08.087800</ts>
    <user>Donetta</user>
    <text>The error is:
         Execution error (ExceptionInfo) at expound.paths/in-with-kps (paths.cljc:183).
         Cannot convert path. This can be caused by using conformers to transform values, which is not supported in Expound</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:01:17.089700</ts>
    <user>Donetta</user>
    <text>I'm assuming my args have to be wrapped in s/cat or something</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:02:29.090700</ts>
    <user>Oleta</user>
    <text>Yeah I think you’re correct - you need an ‘s/cat’ for args </text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:02:46.091800</ts>
    <user>Donetta</user>
    <text>So, even with s/cat it works now, with good input</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:02:50.092400</ts>
    <user>Donetta</user>
    <text>but bad map, it just throws that error</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:02:53.092700</ts>
    <user>Rosaline</user>
    <text>Also it is better to use namespaces keys</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:02:54.092800</ts>
    <user>Donetta</user>
    <text>vs letting me know a bad instrumentation</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:03:12.093500</ts>
    <user>Donetta</user>
    <text>namespaced keys is a lot of work when its user inbound json populating the keys though</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:03:21.094000</ts>
    <user>Donetta</user>
    <text>well, maybe there is a wrapper for namespace keys to/from json</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:03:26.094100</ts>
    <user>Celestine</user>
    <text>Articles like that are why I detest JavaScript :upside_down_face: (but I now know a lot more about JS than I did before I read that!).</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:03:37.094700</ts>
    <user>Donetta</user>
    <text>i remember looking and flat maps, not terrible, nested ones, bad</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:04:28.097400</ts>
    <user>Rosaline</user>
    <text>I dunno about the expound stuff, I think I am using it somewhere to get some nicer spec errors in one place, but otherwise I am not familiar with it</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:04:43.097800</ts>
    <user>Oleta</user>
    <text>Hm, that might be a bug in Expound then related to errors on ‘fspec’ if this is happening on latest expound. </text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:05:09.099000</ts>
    <user>Donetta</user>
    <text>afaik, i'm not explicitly calling it explicitly anywhere, unless cider (Emacs) is injecting some call - I am on clojure 1.10</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:05:44.099900</ts>
    <user>Oleta</user>
    <text>Perhaps a dependency is using it?</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:05:53.100100</ts>
    <user>Donetta</user>
    <text>`(alive? {:hp 30 :name "Bob"})` - that call is fine, works alright.  This one: `(alive? {:xhp 30 :name "Bob"})` error</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:06:47.101600</ts>
    <user>Oleta</user>
    <text>(I saw something similar with return values for fspec, that are keys, so I think it might be expound bug). Feel free to file a bug and I’ll look into it. </text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:07:20.102400</ts>
    <user>Rosaline</user>
    <text>Something is pulling expound for you, and overwriting specs error reporting with it</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:12:41.105500</ts>
    <user>Oleta</user>
    <text>It’d be best to find what is doing that (maybe look at deps tree to start) but in a pinch you could reset the default printer. I’m on my phone but something like ‘set! s/*explain-out* s/explain-printer’</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:13:46.105600</ts>
    <user>Faustino</user>
    <text>I spent half the day looking for a Javascript function in the codebase… only to find out that some weird function definition was used… so ya… JS is a pain in that regard. I think that’s why so many people love TypeScript.</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:14:32.105900</ts>
    <user>Donetta</user>
    <text>ty</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:15:36.106300</ts>
    <user>Donetta</user>
    <text>I guess that's what I get for running code I didn't fully read yet :slightly_smiling_face: (luminus lein template)</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:15:40.106500</ts>
    <user>Donetta</user>
    <text>`(alter-var-root #'s/*explain-out* (constantly expound/printer))`</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:17:23.107000</ts>
    <user>Oleta</user>
    <text>Ah, yeah, that’ll do it :)</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:19:23.107100</ts>
    <user>Faustino</user>
    <text>I was feeling older today too. But a girl cheered me up. She said that us seniors are actually very valuable. The reason we feel like a small group is that the industry is on a 30% growth rate. So you and I started out when the entire workforce was smaller. She pointed out there’s a huge population size skew. My dad always felt like his age was against him. But it’s simply not true. Experience matters a ton in this field. Looking back, I’ve made so many mistakes that only a senior version of me could understand now. For starters… jumping on a technology too soon only to end up using it for six months. Mostly JS tech stuff that keeps changing.</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:24:35.108100</ts>
    <user>Oleta</user>
    <text>&lt;@Donetta&gt; do you have expound 7.2 as a dep?</text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:26:16.110000</ts>
    <user>Oleta</user>
    <text>I looked closer at that code and now I’m not so sure why you’re getting that error. Just curious if you happen to have an earlier version. </text>
  </message>
  <message conversation_id="1197">
    <ts>2019-04-17T23:34:38.110700</ts>
    <user>Donetta</user>
    <text>It was 7.1, a definite PEBKAC error (I altered the templated clojure version from 1.9 to 1.10 and nothing else) :disappointed: 7.2 does seem to fix it, thanks again!</text>
  </message>
  <message conversation_id="1199">
    <ts>2019-04-18T00:19:35.110900</ts>
    <user>Fredda</user>
    <text>can't you do that with hierarchies?</text>
  </message>
  <message conversation_id="1199">
    <ts>2019-04-18T00:28:54.112000</ts>
    <user>Fredda</user>
    <text>For dispatching, you may have fun with polymethods and dispatching off of `s/valid?` or whatever &lt;https://github.com/johnmn3/dispacio#spec-validation-dispatch&gt;</text>
  </message>
  <message conversation_id="1200">
    <ts>2019-04-18T06:16:53.113200</ts>
    <user>Stasia</user>
    <text>just roll your own version of component, it's very easy, focusing just on getting a minimal system map. i've found it useful in all my projects. it helps things not to get out of hand, and makes testing simpler</text>
  </message>
  <message conversation_id="1200">
    <ts>2019-04-18T06:17:26.113400</ts>
    <user>Stasia</user>
    <text>but as with anything, try it out, and see if it helps you</text>
  </message>
  <message conversation_id="1200">
    <ts>2019-04-18T06:17:58.113600</ts>
    <user>Stasia</user>
    <text>you probably can't just rely on people's opinions, because like this thread, some people will say don't use them, others will swear by them. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1200">
    <ts>2019-04-18T09:16:24.114300</ts>
    <user>Zona</user>
    <text>at the moment I'm defining `start` and `stop` functions in a top level namespace, and putting stuff like my http server into atoms using `defonce`</text>
  </message>
  <message conversation_id="1201">
    <ts>2019-04-18T09:16:26.114500</ts>
    <user>Zona</user>
    <text>it seems to work</text>
  </message>
  <message conversation_id="1201">
    <ts>2019-04-18T09:25:09.116400</ts>
    <user>Kristine</user>
    <text>If I have a clj-time date-time (which is UTC), say `(date-time 2019 4 18 12 0 0)`, but I want it to become the same date in Europe/Amsterdam, ie, it should be:
`2019-04-18T12:00:00.000+02:00`, how do I do that</text>
  </message>
  <message conversation_id="1201">
    <ts>2019-04-18T09:25:54.117200</ts>
    <user>Kristine</user>
    <text>ie. i don’t want it to shift hours, ie. I _don’t_ want to end up with `2019-04-18T14:00:00.000+02:00`</text>
  </message>
  <message conversation_id="1201">
    <ts>2019-04-18T09:29:09.118400</ts>
    <user>Jolanda</user>
    <text>&lt;https://www.joda.org/joda-time/userguide.html#Changing_TimeZone&gt;</text>
  </message>
  <message conversation_id="1201">
    <ts>2019-04-18T09:32:53.119100</ts>
    <user>Kristine</user>
    <text>aah no it’s this: `(.withZoneRetainFields input-date (DateTimeZone/forID "Europe/Amsterdam"))`</text>
  </message>
  <message conversation_id="1201">
    <ts>2019-04-18T09:32:58.119300</ts>
    <user>Kristine</user>
    <text>thanks &lt;@Jolanda&gt;</text>
  </message>
  <message conversation_id="1202">
    <ts>2019-04-18T09:47:17.119600</ts>
    <user>Patrice</user>
    <text>but I guess you have to start and stop them in a particular order, right?</text>
  </message>
  <message conversation_id="1203">
    <ts>2019-04-18T10:10:00.119900</ts>
    <user>Zona</user>
    <text>I suppose so. Isn't that built into the order I evaluate the start functions?</text>
  </message>
  <message conversation_id="1203">
    <ts>2019-04-18T10:15:27.120100</ts>
    <user>Zona</user>
    <text>I can see where there'd be a tipping point in system size, and it's just simpler to define integrant keys</text>
  </message>
  <message conversation_id="1204">
    <ts>2019-04-18T12:06:42.120800</ts>
    <user>Rolanda</user>
    <text>Who here uses &lt;https://github.com/cognitect-labs/transcriptor&gt; in anger?</text>
  </message>
  <message conversation_id="1205">
    <ts>2019-04-18T12:49:12.121500</ts>
    <user>Tamie</user>
    <text>```(meta ((fn [x] ^{:k 9} x) {:a 1})) ;; ==&amp;gt; nil 
(meta ^{:k 9} {:a 1})              ;; ==&amp;gt; {:k 9} 
(-&amp;gt; {:a 1} ^{:k 9} meta)           ;; ==&amp;gt; nil
```</text>
  </message>
  <message conversation_id="1205">
    <ts>2019-04-18T12:51:56.122300</ts>
    <user>Jasmine</user>
    <text>the `^` syntax is applied *at read time* to the next read form</text>
  </message>
  <message conversation_id="1205">
    <ts>2019-04-18T12:52:22.122900</ts>
    <user>Becki</user>
    <text>`(-&amp;gt; {:a 1} ^{:k 9})` will throw a read error meaning you are putting it on the meta form</text>
  </message>
  <message conversation_id="1205">
    <ts>2019-04-18T12:53:50.124000</ts>
    <user>Jasmine</user>
    <text>so in the first line, it's applied to the symbol x, which is not going to be ignored when compiling the fn.
in the second line, it's  applied to the literal map `{:a 1}`
in the third line, it's applied to the symbol `meta`, where it won't do anything</text>
  </message>
  <message conversation_id="1205">
    <ts>2019-04-18T12:54:04.124400</ts>
    <user>Jasmine</user>
    <text>if you want to apply metadata to things at runtime, it's better to use `with-meta`</text>
  </message>
  <message conversation_id="1205">
    <ts>2019-04-18T12:56:07.126000</ts>
    <user>Jasmine</user>
    <text>```(meta ((fn [x] (with-meta x {:k 9})) {:a 1}))  ;; ==&amp;gt; {:k 9}
(meta (with-meta {:a 1} {:k 9}))               ;; ==&amp;gt; {:k 9}
(-&amp;gt; {:a 1} (with-meta {:k 9}) meta)            ;; ==&amp;gt; {:k 9}```</text>
  </message>
  <message conversation_id="1206">
    <ts>2019-04-18T13:09:28.126400</ts>
    <user>Tamie</user>
    <text>okay...thank you!</text>
  </message>
  <message conversation_id="1205">
    <ts>2019-04-18T13:16:17.126500</ts>
    <user>Jasmine</user>
    <text>this throws a read error because there is no "next" form to apply it to</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:45:21.126900</ts>
    <user>Yuri</user>
    <text>Are there any weird gotchas I need to know if I'm combining `clojure.core.async` code with promises?</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:45:47.127100</ts>
    <user>Rosaline</user>
    <text>don't</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:46:30.127500</ts>
    <user>Rosaline</user>
    <text>are you talking about clojurescript and js promises?</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:47:03.127600</ts>
    <user>Yuri</user>
    <text>No, JVM clojure and Java Promises</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:47:21.127800</ts>
    <user>Yuri</user>
    <text>I want to combine async code with http-kit because I had problems with Java blocking IO hanging</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:48:00.128100</ts>
    <user>Rosaline</user>
    <text>well, java doesn't have promises (at least not in the jdk)</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:48:56.129300</ts>
    <user>Rosaline</user>
    <text>if you are having trouble with blocking io, switch to non-blocking is only going to make your io problem harder to debug</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:50:25.130800</ts>
    <user>Yuri</user>
    <text>The information I've found seems to imply that the trouble with blocking IO is inherent to blocking IO, an unreliability in linux's blocking select call, and that async IO will react to that unreliability better</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:50:34.131300</ts>
    <user>Dann</user>
    <text>&lt;@Yuri&gt; a Clojure promise is just a container that starts empty and can only have a value assigned once - it's hypothetically useful to communicate between async operations, but has very few features</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:50:52.131900</ts>
    <user>Dann</user>
    <text>and really a channel is a better fit if using core.async</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:51:34.132900</ts>
    <user>Rosaline</user>
    <text>clojure's promise is built around blocking (it blocks execution when deref'ed) so while combining it with core.async is possible (and core.async uses them under the hood here and there), in general you pickup core.async because you don't want threads to hang around blocked which is at odds with promises</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:51:46.133200</ts>
    <user>Dann</user>
    <text>waiting on a promise can introduce the kind of deadlock core.async is designed to eliminate</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:51:57.133300</ts>
    <user>Yuri</user>
    <text>Yeah, so no derefing in a go block</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:52:09.133400</ts>
    <user>Yuri</user>
    <text>Got it</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:55:11.134800</ts>
    <user>Dann</user>
    <text>a go block using channels is a much nicer alternative to js promise chaining, with the same semantics (each channel read or write in a go block is conceptually equivalent to a `.then` invocation)</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:55:50.134900</ts>
    <user>Yuri</user>
    <text>Yeah, but the pure core.async HTTP client implementations are a tad barebones? Maybe a little immature</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:56:50.135700</ts>
    <user>Dann</user>
    <text>you might want to look at aleph, which is dedicated to nonblocking IO with an abstraction that's very similar to core.async channels</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:57:07.135900</ts>
    <user>Dann</user>
    <text>&lt;https://github.com/ztellman/aleph&gt;</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:57:50.136300</ts>
    <user>Yuri</user>
    <text>Oh, cool</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:57:56.136500</ts>
    <user>Dann</user>
    <text>aleph uses manifold, which integrates directly with core.async as well</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:59:25.136600</ts>
    <user>Yuri</user>
    <text>Nice, that works perfectly</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T13:59:44.136700</ts>
    <user>Yuri</user>
    <text>I ran into it when looking at web servers, but glossed over that it integrates with core.async</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:12:12.138300</ts>
    <user>Rosaline</user>
    <text>cognitect's aws-api library make's use of cognitect http client library which seems to have a core.async interface which I haven't been able to find the source for, but seems to be get'able from maven, and appears to be apache licensed</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:12:41.138600</ts>
    <user>Rosaline</user>
    <text>&lt;https://mvnrepository.com/artifact/com.cognitect/http-client/0.1.87&gt; &lt;https://github.com/cognitect-labs/aws-api/blob/master/src/cognitect/aws/client/api.clj#L9&gt;</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:14:32.139000</ts>
    <user>Sixta</user>
    <text>I think it is closed source</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:14:44.139300</ts>
    <user>Sixta</user>
    <text>I think this was mentioned in the talk</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:15:07.139800</ts>
    <user>Rosaline</user>
    <text>ah, I haven't seen the talk</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:15:08.139900</ts>
    <user>Marlyn</user>
    <text>what &lt;@Rosaline&gt; said is true</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:15:13.140200</ts>
    <user>Marlyn</user>
    <text>it is not closed source</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:18:34.140800</ts>
    <user>Rosaline</user>
    <text>so if you felt adventurous you could grab that library and make some wild guesses at how to use it</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:22:07.140900</ts>
    <user>Yuri</user>
    <text>That sounds very interesting, but somewhat fraught</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:23:24.141500</ts>
    <user>Marlyn</user>
    <text>there are a few limitations of the cognitect http-client (streaming support being the largest one)</text>
  </message>
  <message conversation_id="1207">
    <ts>2019-04-18T14:23:49.142000</ts>
    <user>Marlyn</user>
    <text>we're thinking about whether/how to support that for aws-api</text>
  </message>
  <message conversation_id="1208">
    <ts>2019-04-18T15:50:39.142700</ts>
    <user>Donetta</user>
    <text>Very nice, thanks</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:36:55.143900</ts>
    <user>Becki</user>
    <text>i thought java defaulted strings beginning with a zero to base 8 when parsing? ie, `(Integer/parseInt "09")` should throw?</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:37:05.144100</ts>
    <user>Becki</user>
    <text>is that cljs or am i just confused?</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:40:45.144400</ts>
    <user>Dann</user>
    <text>that's for literals in source code, not parsing</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:41:15.145000</ts>
    <user>Becki</user>
    <text>yes just remembered that's a read-string and literal issue. thanks &lt;@Dann&gt;</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:41:53.145600</ts>
    <user>Jasmine</user>
    <text>the `Integer/decode` method can do  this</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:42:02.145900</ts>
    <user>Dann</user>
    <text>also since clojure defaults to longs, I almost always use Long/parseLong for such use cases</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:43:25.146700</ts>
    <user>Becki</user>
    <text>was about to ask a question :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:43:37.147000</ts>
    <user>Becki</user>
    <text>just making sure parseInt wasn't a footgun with radix</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:43:53.147300</ts>
    <user>Jasmine</user>
    <text>yeah, that one assumes you know the radix</text>
  </message>
  <message conversation_id="1209">
    <ts>2019-04-18T17:44:35.147500</ts>
    <user>Dann</user>
    <text>```=&amp;gt; (Long/parseLong "100" 32)
1024
```</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T18:34:09.151500</ts>
    <user>Adelaida</user>
    <text>for those that use `clojurewerkz.elastisch`, my team recently moved from elasticsearch `5.6` to `6.4` and a majority of the functions broke, but were fixed by passing in `{:content-type :json}` when calling `clojurewerkz.elastisch.rest.connect` i.e. ```(esr/connect host {:content-type :json})```</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T18:35:47.153000</ts>
    <user>Adelaida</user>
    <text>Apparently `clojurewerkz.elastisch.rest.document.scroll-seq` had a similar issue but i eventually fixed it by actually just copying the `scroll` and `scroll-seq` function from their github and just pasting it into the same .clj file</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T18:37:46.154500</ts>
    <user>Adelaida</user>
    <text>Since `scroll-seq` returns a lazy sequence i think there's some weirdness with *fully* evaluating the rest calls which causes the `content-type` to be lost since the exception i was getting indicated a json parser error</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T18:38:31.155200</ts>
    <user>Adelaida</user>
    <text>i verify this by doing a `(take 5 (esd/scroll-seq ...`</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T18:39:29.156400</ts>
    <user>Adelaida</user>
    <text>figure i share in case some else out in the clojure community is also using the `clojurewerkz.elastisch` library and `scroll-seq`</text>
  </message>
  <message conversation_id="1211">
    <ts>2019-04-18T18:51:06.157400</ts>
    <user>Malik</user>
    <text>does anyone know of a good clojure newsletter? like elixir weekly, ruby weekly, golang weekly (I'm noticing a pattern here)</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T18:57:23.157900</ts>
    <user>Alice</user>
    <text>&lt;@Malik&gt; I know of Daniel Compton's at &lt;https://www.therepl.net/&gt; and Eric Normand's at &lt;https://purelyfunctional.tv/newsletter/&gt;</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T18:57:41.158300</ts>
    <user>Malik</user>
    <text>those are the two I know of as well</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T18:57:51.158600</ts>
    <user>Malik</user>
    <text>I should have mentioned that bit</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T18:57:57.158800</ts>
    <user>Malik</user>
    <text>thanks for sharing them, though</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T19:04:36.159600</ts>
    <user>Jasmine</user>
    <text>I post every week at &lt;https://insideclojure.org&gt; </text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T19:06:30.159900</ts>
    <user>Malik</user>
    <text>oh, cool</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T19:07:02.160200</ts>
    <user>Malik</user>
    <text>oh, cool, I own both of your books</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T19:14:42.160600</ts>
    <user>Malik</user>
    <text>I haven't _read_ both of your books, but I did buy them, and intend to</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T19:23:28.161000</ts>
    <user>Malik</user>
    <text>I setup an IFTTT to email me when there are updates. thanks!</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T19:27:55.161400</ts>
    <user>Jasmine</user>
    <text>I only ask that you buy them :)</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T19:42:15.161600</ts>
    <user>Malik</user>
    <text>ha!</text>
  </message>
  <message conversation_id="1210">
    <ts>2019-04-18T19:43:37.162400</ts>
    <user>Malik</user>
    <text>I actually bought programming clojure twice. once on pragprog and once on the kindle (you have to buy it as a kindle book to get syncing between devices)</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:00:30.165100</ts>
    <user>Celestine</user>
    <text>I have all three editions of Programming Clojure :slightly_smiling_face: And Clojure Applied and Getting Clojure, both editions of Clojure In Action and both of The Joy Of Clojure, also Clojure Cookbook and Clojure Programming. All in PDF, sync'd to every device I own via Dropbox. And in OneDrive I have three Clojure books from Packt (not a very good publisher, IMO) and Zach Tellman's Elements Of Clojure. And I'm _still_ missing some!</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:01:27.165700</ts>
    <user>Celestine</user>
    <text>Carin Meier's Living Clojure is noticeably absent. What else?</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:01:49.166100</ts>
    <user>Kacy</user>
    <text>Professional Clojure is absent, although don't know about "notably"</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:02:01.166300</ts>
    <user>Celestine</user>
    <text>Ah, who publishes that?</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:02:33.166500</ts>
    <user>Kacy</user>
    <text>Wrox</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:03:07.167100</ts>
    <user>Celestine</user>
    <text>Ah... not a publisher I look at very often... isn't it part of O'Reilly these days?</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:03:21.167500</ts>
    <user>Celestine</user>
    <text>(mind you, Packt is _also_ part of O'Reilly now I think?)</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:03:32.168100</ts>
    <user>Kacy</user>
    <text>I have no idea</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:04:29.169000</ts>
    <user>Celestine</user>
    <text>Oh. You're one of the authors! 'grats! Writing a book is a major achievement! (I've started three and never got past the outline)</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:05:43.170500</ts>
    <user>Kacy</user>
    <text>Thanks! I would have never finished, except it went down like, "hey want to write about Datomic in our Clojure book?" "Great, I'm in!" "Ok you have a month"</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:06:23.171200</ts>
    <user>Celestine</user>
    <text>Hahaha... yeah, writing schedules are why I've never gotten further than the outline and those early discussions with publishers...</text>
  </message>
  <message conversation_id="1212">
    <ts>2019-04-18T20:11:02.172800</ts>
    <user>Kacy</user>
    <text>It was fun to write. Although everything else was misery</text>
  </message>
  <message conversation_id="1213">
    <ts>2019-04-19T03:55:33.173000</ts>
    <user>Fernande</user>
    <text>i don't know about in anger, but i've tried it a bit.  i think &lt;@Andrea&gt; has too: &lt;https://oli.me.uk/2017/10/06/an-introduction-to-transcriptor/&gt;</text>
  </message>
  <message conversation_id="1213">
    <ts>2019-04-19T05:05:31.173700</ts>
    <user>Roselia</user>
    <text>&lt;@Celestine&gt; how was the Elements of Clojure for you?</text>
  </message>
  <message conversation_id="1213">
    <ts>2019-04-19T05:07:43.173800</ts>
    <user>Andrea</user>
    <text>Yep, not in anger though either :blush: I wrote a lein plugin for it and found it interesting. I think a regular test suite still does it for me but it might suit others better!</text>
  </message>
  <message conversation_id="1214">
    <ts>2019-04-19T11:02:17.176700</ts>
    <user>Setsuko</user>
    <text>I'm using ```(defn foo
  [y z]
  (let [x (some-long-operation y)] (map #(+ x %) z)))``` as a way to force eval the `some-long-operation` function. Are there any other ways of forcing the evaluation of the form inside the # macro?</text>
  </message>
  <message conversation_id="1214">
    <ts>2019-04-19T11:02:54.176800</ts>
    <user>Setsuko</user>
    <text>In order to keep the structure something like this ```(defn foo
  [y z]
  (map #(+ x (some-long-operation y)) z))```</text>
  </message>
  <message conversation_id="1214">
    <ts>2019-04-19T11:27:27.177400</ts>
    <user>Lane</user>
    <text>```
(defn foo
  [y z]
  (map (partial + (some-long-operation y)) z))
```</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T11:48:30.178000</ts>
    <user>Dann</user>
    <text>`(doall (some-long-operation  y))` will force evaluation of the lazy-seq, your original version doesn't actually force anything</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T11:49:17.178200</ts>
    <user>Dann</user>
    <text>```=&amp;gt; (let [foo (map println (range))] nil)
nil
```</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T11:53:55.178400</ts>
    <user>Setsuko</user>
    <text>got it, thanks for the suggestions!</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T12:01:35.178600</ts>
    <user>Setsuko</user>
    <text>and by force I guess I meant executes only once :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1214">
    <ts>2019-04-19T12:05:47.178800</ts>
    <user>Lane</user>
    <text>&lt;@Setsuko&gt; That was my understanding. The partial should do that for you. But your first piece of code works as well.</text>
  </message>
  <message conversation_id="1216">
    <ts>2019-04-19T12:32:44.179100</ts>
    <user>Dann</user>
    <text>oh, in clojure I've only heard "force" mean making sure a lazy seq is realized at a specific code boundary, I've never seen it used as a synonym for cache or reuse</text>
  </message>
  <message conversation_id="1216">
    <ts>2019-04-19T12:46:12.179300</ts>
    <user>Celestine</user>
    <text>I really like it -- because it tackles topics that a lot of books don't cover. Some of it was "old news" but it was deep and thought-provoking, for the most part.</text>
  </message>
  <message conversation_id="1216">
    <ts>2019-04-19T13:10:43.182600</ts>
    <user>Maricela</user>
    <text>xpost from &lt;#C053AK3F9|beginners&gt; for a broader audience: I tried a simple ETL pipeline in Clojure and Python to get a sense of pros/cons of implementing in both languages. I was surprised that Clojure wasn't much faster and only marginally shorter. Any thoughts why? &lt;https://github.com/andharris/pipeline&gt;</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:18:25.182800</ts>
    <user>Dann</user>
    <text>I'm not sure, but one suspicion I have here is the usage of spec. My vague understanding is that it's not optimized for performance, and the intended usage is to use it during development / testing and turn it off for production code.</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:19:35.183000</ts>
    <user>Dann</user>
    <text>I think you could write a much more efficient data validator by hand (or use a less featureful and more performance oriented validation library)</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:21:36.183600</ts>
    <user>Dann</user>
    <text>Also, core.async is great for coordinating tasks, but I don't think it's the most performant option here either. If the goal is parallelization rather than coordination, you'll get much better throughput with ExecutorService or a wrapper like claypoole.</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:22:22.184500</ts>
    <user>Dann</user>
    <text>&lt;https://github.com/TheClimateCorporation/claypoole&gt;</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:23:50.186200</ts>
    <user>Mariela</user>
    <text>I'm looking for a `proxy [java.io.Writer]` that I can bind to `*out*`, such that concurrent threads `println`ing to it won't cause jumbled output

...might be super easy to implement, but who knows, maybe an existing solution covers some edge cases, has unit tests etc ^^</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:24:10.186400</ts>
    <user>Maricela</user>
    <text>Thanks for the feedback</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:24:42.186800</ts>
    <user>Rosaline</user>
    <text>or just use a real logging library</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:25:51.186900</ts>
    <user>Mariela</user>
    <text>I cannot mutate arbitrary libraries to use my logging library. They use `println`</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:25:54.187100</ts>
    <user>Maricela</user>
    <text>I'll see if swapping out claypoole for parallelization helps</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:26:33.187300</ts>
    <user>Rosaline</user>
    <text>life is too short for bad dependencies</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:27:27.187500</ts>
    <user>Mariela</user>
    <text>I have used claypoole successfully in a handful of projs. Here's a self-contained example of how I tend to use it (eagerly partition the work to match cores + distribute the workload evenly)

&lt;https://github.com/clojure-emacs/refactor-nrepl/pull/247/files&gt;</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:28:15.187700</ts>
    <user>Dann</user>
    <text>also, if throughput is bottlenecked by IO rather than CPU (which is very possible here), limiting by cores is probably a mistake</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:31:05.188000</ts>
    <user>Rosaline</user>
    <text>I am not sure that is solvable by binding *out*</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:32:47.188200</ts>
    <user>Maricela</user>
    <text>Yeah I guess if IO is the bottleneck it will slow down both implementations</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:33:32.188400</ts>
    <user>Dann</user>
    <text>you might try making a /dev/null variant for both - that might give a better idea of the language perf difference if IO dominates the task</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:33:51.188600</ts>
    <user>Dann</user>
    <text>or perhaps the message here is "if IO dominates the task time, just pick any language you like"</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:34:08.188800</ts>
    <user>Maricela</user>
    <text>good point</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:34:23.189000</ts>
    <user>Rosaline</user>
    <text>a binding of *out* can only see when `.write` is called on itself, which doesn't tell it when a logical unit of output is complete from one thread</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:36:06.189300</ts>
    <user>Mariela</user>
    <text>I'll give it a think. Given this stub:

```
(proxy [java.io.Writer] []
    (append [&amp;amp; _])
    (close [])
    (flush [])
    (write [&amp;amp; _]))
```

...`close` cleanly delimits the end of a message. And `(Thread/currentThread)` delimits the concurrent parts</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:37:35.189500</ts>
    <user>Mariela</user>
    <text>scratch that</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:38:22.189700</ts>
    <user>Rosaline</user>
    <text>yeah, no one every calls .close on `*out*`</text>
  </message>
  <message conversation_id="1215">
    <ts>2019-04-19T13:39:08.189900</ts>
    <user>Mariela</user>
    <text>Maybe `flush` then. And I'd manually bind `*flush-on-newline* true` to ensure flush is invoked at the end of a message</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:25:24.190700</ts>
    <user>Hattie</user>
    <text>The I/O possibility occurred to me too, but I notice that in the original Grammarly post they show all 4 cores maxed out, so I figured it probably wasn't that.</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:28:56.190900</ts>
    <user>Hattie</user>
    <text>I hadn't noticed the use of spec (I only looked at the Grammarly version) but that seems like a real possibility too. I'd definitely be curious to see whether swapping the `spec/valid` calls for a simple hand-written validator would make a big difference (and that could be one place where type hints would make a difference).</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:29:47.191100</ts>
    <user>Hattie</user>
    <text>Or just comment out the `filter` line and see how much difference that makes.</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:38:20.191300</ts>
    <user>Dann</user>
    <text>order of magnitude difference for a simple case ```(cmd)user=&amp;gt; (s/def ::foo int)
:user/foo
(ins)user=&amp;gt; (time (dotimes [_ 1000000] (int? 1)))
"Elapsed time: 11.172124 msecs"
nil
(ins)user=&amp;gt; (time (dotimes [_ 1000000] (s/valid? ::foo 1)))
"Elapsed time: 123.692794 msecs"
nil
```</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:39:31.191600</ts>
    <user>Dann</user>
    <text>to be fair, that int? check might be friendlier to inlining by hotspot than the actual code checking your data format</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:42:59.192800</ts>
    <user>Liliana</user>
    <text>I want to do aot but there's one function call that I'd like to not run during the aot compilation. Without skipping aot on the whole class, can I use some variable to know if clojure is compiling?</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:44:37.193000</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (doc *compile-files*)
-------------------------
clojure.core/*compile-files*
  Set to true when compiling files, false otherwise.
nil
```</text>
  </message>
  <message conversation_id="1218">
    <ts>2019-04-19T14:44:49.193300</ts>
    <user>Otelia</user>
    <text>the s/def uses int instead of int?</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:44:53.193600</ts>
    <user>Dann</user>
    <text>it's good practice to put nothing with side effects on the top level of your code</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:45:35.194100</ts>
    <user>Dann</user>
    <text>(delay can be helpful for this - you can create a delay globally but only evaluate it once it's forced)</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:46:21.194900</ts>
    <user>Dann</user>
    <text>~that's idiomatic~ -- it's actually not, that's my mistake</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:46:27.195200</ts>
    <user>Liliana</user>
    <text>ah good point, yes, it's a graal app that I'm working on, and it needs to start making native calls, but the pointers must be created at runtime</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:46:50.195500</ts>
    <user>Liliana</user>
    <text>works! thanks &lt;@Dann&gt; :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:47:18.195600</ts>
    <user>Dann</user>
    <text>```(ins)user=&amp;gt; (s/def ::foo int?)
:user/foo
(cmd)user=&amp;gt; (time (dotimes [_ 1000000] (s/valid? ::foo 1)))
"Elapsed time: 88.051523 msecs"
nil
```</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:48:47.196200</ts>
    <user>Rosaline</user>
    <text>you can always not aot compile too</text>
  </message>
  <message conversation_id="1218">
    <ts>2019-04-19T14:50:49.196500</ts>
    <user>Rosaline</user>
    <text>oh, graal, meh</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T14:58:05.196600</ts>
    <user>Maricela</user>
    <text>The interesting thing to me is that I use a pretty heavy handed approach to schema validation in the python implementation too. I'm surprised spec adds this much overhead, but I must have a misunderstanding of it's intended use. I was assuming this was the exact use case for spec</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T15:21:16.197000</ts>
    <user>Dann</user>
    <text>just because spec is 8 times slower doesn't mean it's a bottleneck in this case - it's a good idea to profile for stuff like this</text>
  </message>
  <message conversation_id="1217">
    <ts>2019-04-19T15:22:36.197200</ts>
    <user>Dann</user>
    <text>and I could be wrong about it's intended use case, I'm not a spec expert, I've heard the truism "don't use it in hot loops, only use it at boundaries" but really this code is both a hot loop and a boundary</text>
  </message>
  <message conversation_id="1219">
    <ts>2019-04-19T15:37:32.197400</ts>
    <user>Maricela</user>
    <text>Tested without validation and it doesn't have a material impact, so not the bottleneck. Time for me to learn how to profile a Clojure program.</text>
  </message>
  <message conversation_id="1219">
    <ts>2019-04-19T15:38:33.197600</ts>
    <user>Maricela</user>
    <text>&amp;gt; doesn't have a material impact</text>
  </message>
  <message conversation_id="1219">
    <ts>2019-04-19T15:39:12.197800</ts>
    <user>Maricela</user>
    <text>maybe that's not fair. it has an impact but doesn't seem to be a primary bottleneck. Really just seems like it will need some profiling to really understand</text>
  </message>
  <message conversation_id="1219">
    <ts>2019-04-19T15:41:49.198000</ts>
    <user>Dann</user>
    <text>you can use a standard java profiler, visualvm (sometimes known as jvisualvm) is free, yourkit gives full licenses for use on open source projects</text>
  </message>
  <message conversation_id="1219">
    <ts>2019-04-19T15:43:05.198200</ts>
    <user>Dann</user>
    <text>there's an art to translating from the vm level stuff (designed to map more or less directly to java classes) when profiling clojure (classes made via weird generated bytecode from a handwritten compiler)</text>
  </message>
  <message conversation_id="1220">
    <ts>2019-04-19T16:58:19.199100</ts>
    <user>Becki</user>
    <text>pmap doesn't do any parallelization below 512 elements, is that right?</text>
  </message>
  <message conversation_id="1220">
    <ts>2019-04-19T17:03:49.199500</ts>
    <user>Becki</user>
    <text>starting to doubt that but remember something cares about 512</text>
  </message>
  <message conversation_id="1220">
    <ts>2019-04-19T17:04:33.199700</ts>
    <user>Jasmine</user>
    <text>reducers</text>
  </message>
  <message conversation_id="1220">
    <ts>2019-04-19T17:05:28.200400</ts>
    <user>Becki</user>
    <text>thanks so much! that was bothering me :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1220">
    <ts>2019-04-19T17:07:55.201400</ts>
    <user>Jasmine</user>
    <text>pmap is parallel over 2+# processors</text>
  </message>
  <message conversation_id="1221">
    <ts>2019-04-19T17:20:59.201800</ts>
    <user>Harold</user>
    <text>Sotnikov's Web Development with Clojure. I think it is a great 1.5th or 2nd Clojure book to get people to "hello http"</text>
  </message>
  <message conversation_id="1221">
    <ts>2019-04-19T17:25:50.202000</ts>
    <user>Harold</user>
    <text>Quick Clojure is a good one for when I've spent some time away from the language and I need a reminder.</text>
  </message>
  <message conversation_id="1220">
    <ts>2019-04-19T17:28:58.202300</ts>
    <user>Magdalena</user>
    <text>[ANN] Cognitect Labs' aws-api 0.8.301 &lt;https://groups.google.com/forum/#!topic/clojure/TXxEx-2OV2s&gt;</text>
  </message>
  <message conversation_id="1222">
    <ts>2019-04-20T07:01:55.206800</ts>
    <user>Loria</user>
    <text>Is there such a thing as a "lazy set" collection in Clojure?</text>
  </message>
  <message conversation_id="1222">
    <ts>2019-04-20T07:03:55.208100</ts>
    <user>Loria</user>
    <text>I'm imagining something with constant-time `contains?` lookup for items that have already been realized, but which lazily defers additional elements which are not yet needed</text>
  </message>
  <message conversation_id="1222">
    <ts>2019-04-20T07:15:37.208700</ts>
    <user>Loria</user>
    <text>```
(def primes
  (lazy-set (filter prime? (range 10000))))

;; Only computes as many elements as needed until a match is found
(contains? all-primes 7) ;; =&amp;gt; true

;; constant-time, because `3` has already been found in the set
(contains? all-primes 3) ;; =&amp;gt; true

;; Forces evaluation of the entire collection to ensure an item does *not* exist in the set
(contains? all-primes 6) ;; =&amp;gt; false
```</text>
  </message>
  <message conversation_id="1222">
    <ts>2019-04-20T08:40:25.209400</ts>
    <user>Roselia</user>
    <text>&lt;@Loria&gt; ```
(defn make-lazy-predicate
  [coll]
  (let [state (atom {:mem #{} :unknown coll})
        update-state (fn [{:keys [mem unknown] :as state} item]
                       (let [[just-checked remainder]
                             (split-with #(&amp;lt;= % item) unknown)]
                         (if (seq just-checked)
                           (-&amp;gt; state
                               (assoc :mem (apply conj mem just-checked))
                               (assoc :unknown remainder))
                           state)))]
    (fn [item]
      (let [next-value (first (:unknown @state))]
        (get-in (if (or (nil? next-value)
                        (&amp;lt; item next-value))
                  @state
                  (swap! state update-state item))
                [:mem item])))))

(def lazy-even? (make-lazy-predicate 
                  (filter (fn [n] 
                            (Thread/sleep 100) 
                            (even? n)) 
                          (iterate inc 0))))
```
However, if coll\\seq is not infinite, predicate returns false when value is out of range.
Can be modified to throw exception on `(nil? next-value)` if you need that.</text>
  </message>
  <message conversation_id="1223">
    <ts>2019-04-20T08:58:56.211000</ts>
    <user>Marcelle</user>
    <text>Hello! Using `clojure.xml`, how do I output XML with double quotes, not single ones? (e.g. `&amp;lt;foo bar="123"&amp;gt;&amp;lt;/foo&amp;gt;` not `&amp;lt;foo bar='123'&amp;gt;&amp;lt;/foo&amp;gt;`)?</text>
  </message>
  <message conversation_id="1222">
    <ts>2019-04-20T10:19:23.212500</ts>
    <user>Loria</user>
    <text>Wow, thanks! I'll study that code and see if it can be modified for my needs :slightly_smiling_face: Creating a lexically bound atom in a closure like that is definitely something new to me</text>
  </message>
  <message conversation_id="1222">
    <ts>2019-04-20T10:24:35.212700</ts>
    <user>Otelia</user>
    <text>FWIW I recently did a bunch of profiling and discovered some unexpected changes in the free Java tools.
- jvisualvm was changed to jmc (Java Mission Control) as of Java 8
- jmc is also available in Java 9
- in Java 10 to 12 there is no jmc in the jdk

jmc was spun out by Oracle as an open source project as of Java 10 but has not been released yet. They're trying to get jmc 7 done but it's not there yet. You can build it from sources, and I did that and it seems to work. But the simpler thing is to use Java 8/9 for profiling until jmc 7 is released.

It doesn't work to use the Java 8/9 jmc on JFR files generated by later releases of Java, the format is incompatible.</text>
  </message>
  <message conversation_id="1222">
    <ts>2019-04-20T10:26:05.213000</ts>
    <user>Roselia</user>
    <text>good luck :i_love_you_hand_sign:</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T10:58:25.216000</ts>
    <user>Nieves</user>
    <text>Hello. Can you give me some examples of clean functions, that can be tail or non-tail recursive and made stackoverflow and/or calculated long time (better both of these) without memoization? I wanna test something.</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T10:58:58.216500</ts>
    <user>Nieves</user>
    <text>with arguments on which it occurs</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T11:08:28.216800</ts>
    <user>Marcelle</user>
    <text>&lt;@Nieves&gt; it's e.g. ```user=&amp;gt; (defn boom1 [] (loop [] (recur)))
#'user/boom1
user=&amp;gt; (boom1)
```</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T11:09:04.217400</ts>
    <user>Marcelle</user>
    <text>but what do you mean "clean" functions?</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T11:09:06.217500</ts>
    <user>Nieves</user>
    <text>what about without jokes?</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T11:10:17.219100</ts>
    <user>Nieves</user>
    <text>something like
```
(defn coin-change [s coins]
  (cond (= s 0) 1
        (or (&amp;lt; s 0) (empty? coins)) 0
        :else (+
                  (coin-change s (rest coins))
                  (coin-change (- s (first coins)) coins))))
(coin-change 10000  '(1 5 10 25 50))
```</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T11:10:29.219200</ts>
    <user>Marcelle</user>
    <text>&lt;@Nieves&gt; w/o jokes, I clearly remember one first videos on `core.typed` has given example of functions which give StackOverflow. Only I can't find that video now :disappointed:</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T11:12:40.219400</ts>
    <user>Marcelle</user>
    <text>ah, here it is: &lt;https://youtu.be/a0gT0syAXsY?t=15&gt;</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T11:13:34.219700</ts>
    <user>Nieves</user>
    <text>thanks, I'l see</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T11:21:38.221200</ts>
    <user>Nieves</user>
    <text>it seems that video explains an example of SO cause of error in code, but not correct function with limited Java stack, like my example above</text>
  </message>
  <message conversation_id="1225">
    <ts>2019-04-20T12:08:32.223200</ts>
    <user>Cira</user>
    <text>I have a Clojure process that's not exiting despite me calling `shutdown-agents` — what else might I be missing here?</text>
  </message>
  <message conversation_id="1226">
    <ts>2019-04-20T12:14:57.224300</ts>
    <user>Nieves</user>
    <text>so maybe there is another Cllojure messenger where I can ask my question? can anyone suggest?</text>
  </message>
  <message conversation_id="1225">
    <ts>2019-04-20T12:22:12.226300</ts>
    <user>Marlyn</user>
    <text>&lt;@Cira&gt; check what threads are running on it by calling jstack on the pid. You might have another naughty thread that isn't the agent executors</text>
  </message>
  <message conversation_id="1225">
    <ts>2019-04-20T12:22:47.227300</ts>
    <user>Marlyn</user>
    <text>There are programmatic ways of enumerating the running threads, too</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T13:49:38.229100</ts>
    <user>Madeleine</user>
    <text>&lt;@Nieves&gt; Fibonacci is a good example of that. It can be written recursively with or without tail recursion.</text>
  </message>
  <message conversation_id="1224">
    <ts>2019-04-20T14:02:31.230500</ts>
    <user>Madeleine</user>
    <text>Without tail recursion:

```
(defn fib [n]
 (if (&amp;lt;= n 1)
  n
  (+
   (fib (- n 1))
   (fib (- n 2)))))
```

With tail recursion:

```
(defn fib [n]
 (loop [n n a 0 b 1]
  (cond
   (= n 0)
   a
   (= n 1)
   b
   :else
   (recur
    (- n 1)
    b
    (+ a b)))))   
```

&lt;@Nieves&gt;</text>
  </message>
  <message conversation_id="1226">
    <ts>2019-04-20T15:05:29.232400</ts>
    <user>Alease</user>
    <text>is there a built in function/macro that takes a set of symbols and returns a map with keys that mirror the symbol and value being the value behind the symbol. for example `(let [a 1 b 2] (toMap a b))` -&amp;gt; `{:a 1 :b 2}`</text>
  </message>
  <message conversation_id="1226">
    <ts>2019-04-20T15:05:54.232700</ts>
    <user>Harris</user>
    <text>no</text>
  </message>
  <message conversation_id="1226">
    <ts>2019-04-20T15:07:45.233200</ts>
    <user>Becki</user>
    <text>there was a clojureverse discussion on this which included at least one implementation</text>
  </message>
  <message conversation_id="1226">
    <ts>2019-04-20T15:07:50.233400</ts>
    <user>Becki</user>
    <text>i think its a great idea by the way</text>
  </message>
  <message conversation_id="1226">
    <ts>2019-04-20T15:10:55.234000</ts>
    <user>Becki</user>
    <text>&lt;https://clojureverse.org/t/shortand-clojure-syntax-for-properties-on-hashmaps/1918/24&gt;</text>
  </message>
  <message conversation_id="1226">
    <ts>2019-04-20T15:11:56.234500</ts>
    <user>Alease</user>
    <text>it's one of the few things I like in JS lol</text>
  </message>
  <message conversation_id="1226">
    <ts>2019-04-20T15:16:43.234900</ts>
    <user>Roselia</user>
    <text>is it save to use persistent vector reference from which transient one was created?</text>
  </message>
  <message conversation_id="1226">
    <ts>2019-04-20T15:28:35.236300</ts>
    <user>Jerome</user>
    <text>Yes, `(transient my-var)` creates a transient version of the original var without changing the original one</text>
  </message>
  <message conversation_id="1227">
    <ts>2019-04-20T15:41:12.238500</ts>
    <user>Nieves</user>
    <text>&lt;@Madeleine&gt; thanks. But even exponential recursive Fibonacci can not fall in SO, cause universe is died before :slightly_smiling_face: And iterative one is a simply tail-recursive.
I wanna test my SO-problem solver I write in Clojure. I just want more test cases, for make me sure. Cause all tests I can create are passed :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T16:35:03.239100</ts>
    <user>Roseann</user>
    <text>Hello All!
I'm using clj-jade to render a Jade template, passing an array as parameter: `(jade/render "index.jade" {"param1" [1 2 3]})`
My friend is using Pug.js, and can do `param1.length` to get the size of the array, but it doesn't work when using clj-jade.
How can I extent `clojure.lang.PersistentVector` to add a static field `length` that will be initialized when the vector is created?</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T16:42:11.239400</ts>
    <user>Jasmine</user>
    <text>You should not want to do this</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T16:43:01.240800</ts>
    <user>Jasmine</user>
    <text>Vectors implement Java Collection which has a size method and Clojure collections which have a count function.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T16:51:32.243300</ts>
    <user>Roseann</user>
    <text>&lt;@Jasmine&gt; Yes, size method works fine in clj-jade.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:01:11.243700</ts>
    <user>Madeleine</user>
    <text>Hum, I'm not sure what you mean then. Just remove the loop/recur and instead call the function back and the tail recursive one will SO.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:03:30.243900</ts>
    <user>Madeleine</user>
    <text>```
(defn fib [n a b]
 (cond
  (= n 0)
  a
  (= n 1)
  b
  :else
  (fib
   (- n 1
   b
   (+ a b)))))
```</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:03:57.244100</ts>
    <user>Madeleine</user>
    <text>```
(fib 100 0 1)
```

That will SO</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:07:18.244300</ts>
    <user>Nieves</user>
    <text>Ok. I write a function, that evaluates any function on any arguments without SO and I want to test it. You write a trivial example, that evaluates also. But it can be evaluated also with recur or trampoline, in opposite with my example above. I hoped in more complex examples &amp;amp; cases to test</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:09:10.244500</ts>
    <user>Madeleine</user>
    <text>Oh I see. So you're trying to implement real tail call optimization?</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:09:41.244700</ts>
    <user>Madeleine</user>
    <text>As far as I know, there's nothing that can't be done with loop/recur and trampoline.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:10:46.244900</ts>
    <user>Nieves</user>
    <text>No :slightly_smiling_face: Real TCO is a trivial task on trampolines. I implement ANY CO, not only tail. See again my example - it is not tail call</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:11:49.245100</ts>
    <user>Nieves</user>
    <text>And if you think that any can be evaluated with trampolines, can you show it on my example coin-change?</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:18:32.245300</ts>
    <user>Madeleine</user>
    <text>Hum... You mean for algorithms that actually need a stack? You convert them so they don't SO?</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:18:57.245500</ts>
    <user>Nieves</user>
    <text>Yes</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:19:16.245700</ts>
    <user>Madeleine</user>
    <text>Ah I see, cool</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:19:45.245900</ts>
    <user>Madeleine</user>
    <text>So you re-write them so their stack is allocated on the heap?</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:20:49.246100</ts>
    <user>Nieves</user>
    <text>Yes. With an optional memoization and by adding of only some chars in function code&amp;amp;</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:20:55.246300</ts>
    <user>Madeleine</user>
    <text>You know that you can use the `-Xss` jvm option to increase the stack size limit in Java?</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:21:20.246500</ts>
    <user>Madeleine</user>
    <text>Just mentioning it, I still think what you're doing sound cool.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:21:28.246700</ts>
    <user>Madeleine</user>
    <text>I think reversing a list is a good example</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:21:30.246900</ts>
    <user>Nieves</user>
    <text>Yes. I played with it, but max Xss more less than heap</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:22:17.247100</ts>
    <user>Madeleine</user>
    <text>True, a function stack contains a lot of additional data that arn't necessarily relevant to the algorithm, so using the fn stack is always more memory hungry</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:22:30.247300</ts>
    <user>Nieves</user>
    <text>And increase default thread stack in Java is not a good idea - a lot of threads will break the heap</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:23:06.247500</ts>
    <user>Nieves</user>
    <text>reversing list is also a tco )</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:23:30.247700</ts>
    <user>Nieves</user>
    <text>in realization with accumulator I mean</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:24:08.247900</ts>
    <user>Nieves</user>
    <text>but you are right - it can be non tail call implementation</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:24:45.248200</ts>
    <user>Madeleine</user>
    <text>Ya, but I often see it done without tco</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:25:10.248400</ts>
    <user>Madeleine</user>
    <text>And the non tco is much more readable and logical in my opinion.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:27:16.248600</ts>
    <user>Nieves</user>
    <text>```
(defn bar [n] (if (= 0 n) 0 (+ n (bar (- n 1)))))
.......
(time (eval-cs bar 100000))
"Elapsed time: 675.22869 msecs"
5000050000
```</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:27:44.248800</ts>
    <user>Nieves</user>
    <text>such trivial examples works fine, as I mentioned</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:28:31.249100</ts>
    <user>Madeleine</user>
    <text>Ya, sorry, I very rarely implemented an algorithm that absolutely needed a stack. So I can't think of anything right now.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:30:00.249300</ts>
    <user>Nieves</user>
    <text>Thanks anyway! I just slightly glad about my rezult and want to test and tell about it for anybody )</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:32:38.249600</ts>
    <user>Madeleine</user>
    <text>Ya, if you make it open source, I'll definitely keep it in mind, if one day I have this problem. Its not a problem I have often, but I'm sure if I did, I would love to find a library like the one you're making.</text>
  </message>
  <message conversation_id="1229">
    <ts>2019-04-20T17:35:03.249800</ts>
    <user>Loria</user>
    <text>What about non primitive-recursive functions like the Ackermann function?</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:35:05.250000</ts>
    <user>Nieves</user>
    <text>Thanks. I have to make it slightly pretty-organized, and then I'l open it. But to be honest I'm disappointed a little, that it did not interested anyone exept you )</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:35:34.250200</ts>
    <user>Nieves</user>
    <text>Gooooood point - I'l try Akkermann now</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:36:16.250400</ts>
    <user>Loria</user>
    <text>I believe it's theoretically proven that it cannot be reduced to a form which doesn't involve the stack</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:37:26.250600</ts>
    <user>Nieves</user>
    <text>Yes, it is not a primitive recursion. Give me some minutes to test )</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:37:34.250800</ts>
    <user>Loria</user>
    <text>there you go :slightly_smiling_face:
```
(defn ack [m n]
  (cond
    (zero? m) (inc n)
    (zero? n) (ack (dec m) 1)
    :else     (ack (dec m) (ack m (dec n)))))
```</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:39:01.251000</ts>
    <user>Nieves</user>
    <text>Ok, thanks for sharing )</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:45:49.251200</ts>
    <user>Nieves</user>
    <text>Looks like it not working by directly using my method. But I'l try to modify it! Thanks again :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:51:20.251600</ts>
    <user>Roselia</user>
    <text>&lt;@Jerome&gt; but transient is not about vars :smiley:</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:52:08.251700</ts>
    <user>Madeleine</user>
    <text>I think QuickSort might be another one where you can't get rid of the stack.</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:52:50.252700</ts>
    <user>Madeleine</user>
    <text>Looks like generally its optimized by putting it on the heap and doing it iteratively.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:53:10.253400</ts>
    <user>Jerome</user>
    <text>Yeah it’s about seqs, but a seq will always be bound to a var?..</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:53:21.253600</ts>
    <user>Nieves</user>
    <text>Can you show the exact code example for source?</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:53:22.253800</ts>
    <user>Roselia</user>
    <text>its about collections</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:54:00.254600</ts>
    <user>Jerome</user>
    <text>How is a collection different from a seq?</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:54:16.254900</ts>
    <user>Nieves</user>
    <text>Naive QuickSort I mean. Or it like not real QS as Haskell examples everywhere? )</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:54:18.255100</ts>
    <user>Roselia</user>
    <text>sequence is abstraction</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:54:31.255200</ts>
    <user>Madeleine</user>
    <text>:stuck_out_tongue_closed_eyes: I'm afraid I'm not smart enough at this moment to put it together.</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:55:01.255700</ts>
    <user>Jerome</user>
    <text>Sure</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:55:26.256100</ts>
    <user>Nieves</user>
    <text>So anyway I have to made a research with Akkermann</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:56:21.257200</ts>
    <user>Roselia</user>
    <text>well collection too, nvm</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:56:37.257500</ts>
    <user>Roselia</user>
    <text>however they are different entities in terms of implementation</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:57:34.257700</ts>
    <user>Madeleine</user>
    <text>Good luck 1</text>
  </message>
  <message conversation_id="1230">
    <ts>2019-04-20T17:57:35.257900</ts>
    <user>Madeleine</user>
    <text>!</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T17:59:27.258100</ts>
    <user>Nieves</user>
    <text>Thanks again. I'l say the results about Ack and QS in a time.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:06:47.258800</ts>
    <user>Shanelle</user>
    <text>People, I have two questions:</text>
  </message>
  <message conversation_id="1231">
    <ts>2019-04-20T18:14:41.259200</ts>
    <user>Shanelle</user>
    <text>- who is using the Clojure client, for Kubernetes?</text>
  </message>
  <message conversation_id="1231">
    <ts>2019-04-20T18:15:02.259600</ts>
    <user>Shanelle</user>
    <text>- which ZeroMQ bindings are used?</text>
  </message>
  <message conversation_id="1231">
    <ts>2019-04-20T18:15:53.260400</ts>
    <user>Shanelle</user>
    <text>so two questions, the scopes of those are unrelated to each other</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:35:50.260600</ts>
    <user>Nieves</user>
    <text>It works :slightly_smiling_face:
```
(time (eval-cs ack 3 14))
"Elapsed time: 1991.828241 msecs"
131069
(time (eval-cs ack 4 1))
"Elapsed time: 853.480078 msecs"
65533
```</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:36:26.260800</ts>
    <user>Nieves</user>
    <text>But I was needed to slightly tweak an algorythm</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:38:25.261000</ts>
    <user>Nieves</user>
    <text>Now I'l try to find QS code your mean</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:41:17.261200</ts>
    <user>Madeleine</user>
    <text>:thumbsup:</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:48:47.262900</ts>
    <user>Madeleine</user>
    <text>&lt;@Jerome&gt; seq are collections which support the `first`, `next`, and `more` fns. While collections only support `count` and `empty` and `=`.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:49:17.263200</ts>
    <user>Madeleine</user>
    <text>See: &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/ISeq.java&gt; and &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/IPersistentCollection.java&gt;</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:55:09.264700</ts>
    <user>Madeleine</user>
    <text>Also more relevant to Clojure, functions that work over seq takes the seq as the last argument, while those that work over coll (that aren't seq) take it as the first argument.</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:56:47.264900</ts>
    <user>Jasmine</user>
    <text>&lt;http://insideclojure.org/2015/01/02/sequences/&gt;</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:56:53.265200</ts>
    <user>Jasmine</user>
    <text>&lt;http://insideclojure.org/2016/03/16/collections/&gt;</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T18:57:00.265500</ts>
    <user>Jasmine</user>
    <text>^^ those might be helpful</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T19:01:33.265600</ts>
    <user>Nieves</user>
    <text>"QS" also works w/o SO, but very (!) unefficient :slightly_smiling_face:
```
(defn qs [l]
  (if (empty? l)
    []
    (let [[p &amp;amp; xs] l]
      (concat
       (qs (filter #(&amp;lt; % p) xs))
       (list p)
       (qs (filter #(&amp;gt;= % p) xs))))))
.............
(time (eval-cs qs (-&amp;gt;&amp;gt; 10000 range reverse)))
"Elapsed time: 51633.130523 msecs"
[0 1 2 3 4 5 6 7 8 9 10 11 ..........
```</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T19:04:56.267400</ts>
    <user>Jerome</user>
    <text>Sure, but in the context of transients they’re used identically? Just `(transient ...)` to create a transient version</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T19:05:36.267800</ts>
    <user>Jerome</user>
    <text>And that’s the same for seqs and collections</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T19:07:29.268100</ts>
    <user>Jerome</user>
    <text>*treated vs. used</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T19:10:50.269000</ts>
    <user>Jerome</user>
    <text>I’ve also just gotten into the colloquial habit of referring to a lot of things as seqs even if they aren’t technically...</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-20T19:11:20.269300</ts>
    <user>Jerome</user>
    <text>Which is maybe worth breaking</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:38:10.270900</ts>
    <user>Roselia</user>
    <text>&lt;@Jerome&gt; see, transient wants implementation of IEditableCollection interface as its input, only few collections implement that interface
&lt;https://gyazo.com/23105ead02ad141f14e8243c3e17ea17.png&gt;</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:39:42.271600</ts>
    <user>Roselia</user>
    <text>&lt;https://gyazo.com/dac646e544a72b82a5f02dd45289a832.png&gt;</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:42:03.272400</ts>
    <user>Roselia</user>
    <text>anyway i found the answer in Emerick's book</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:49:55.272500</ts>
    <user>Jerome</user>
    <text>Yeah, you’re right. I’ve gotten in the bad habit of just referring to anything I can call `seq` on as a seq, which is incorrect </text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:50:13.273000</ts>
    <user>Jerome</user>
    <text>But my original answer is correct I believe</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:50:39.273900</ts>
    <user>Roselia</user>
    <text>answer to my question was, 'yes'</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:50:45.274200</ts>
    <user>Jerome</user>
    <text>If you pass a collection to `transient`, you can still safely use the original reference</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:50:55.274500</ts>
    <user>Jerome</user>
    <text>Right</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:50:55.274600</ts>
    <user>Roselia</user>
    <text>right</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:50:58.274800</ts>
    <user>Roselia</user>
    <text>:smiley:</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:51:00.275000</ts>
    <user>Jerome</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:52:33.275300</ts>
    <user>Jerome</user>
    <text>That would be terrible if you couldn’t!</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:52:49.275700</ts>
    <user>Roselia</user>
    <text>yeah, transients is a bit tricky to understand at first</text>
  </message>
  <message conversation_id="1228">
    <ts>2019-04-21T07:55:30.276100</ts>
    <user>Roselia</user>
    <text>but thanks to awesome clojure design it's all uniform
&lt;https://gyazo.com/8c6e5901537e02c95073ef290956eb64.png&gt;</text>
  </message>
  <message conversation_id="1232">
    <ts>2019-04-21T09:11:26.283500</ts>
    <user>Eryn</user>
    <text>People of Clojure, I have a question. I read somewhere that it's possible to connect Clojure REPL to java app in debug mode. Did Anybody try that? Could you please share your experience/links here ? I saw one repo in GitHub, but it's more than 5 years old. It would be nice to have a modern way of doing that.</text>
  </message>
  <message conversation_id="1232">
    <ts>2019-04-21T09:12:23.284100</ts>
    <user>Kate</user>
    <text>Is there a way to force *use-context-classloader* false for an Uberjar?</text>
  </message>
  <message conversation_id="1232">
    <ts>2019-04-21T09:13:38.284900</ts>
    <user>Kate</user>
    <text>axiom-dom.jar won't load because it expects to classload /META-INFO/axiom.xml</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T10:31:15.286400</ts>
    <user>Roberto</user>
    <text>is there a way to get the "next" item of an item in a sorted map?</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T10:37:48.287100</ts>
    <user>Roselia</user>
    <text>&lt;@Roberto&gt; what kind of items do you store in the sorted map?</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T10:38:27.287400</ts>
    <user>Roberto</user>
    <text>a record type</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T10:38:50.287900</ts>
    <user>Roberto</user>
    <text>but I have found another way to implement what I want</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T10:39:21.288600</ts>
    <user>Roberto</user>
    <text>essentially I need to keep an index which  will allow traversing the collection one at a time</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T10:39:59.289400</ts>
    <user>Roberto</user>
    <text>and I just found out .indexOf is implemented for vectors, therefore I can use a vector instead of a sorted map and just play with the index</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T10:42:03.290100</ts>
    <user>Roselia</user>
    <text>&lt;@Roberto&gt; drop over seq of map doesn't work for you?</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T10:44:42.292600</ts>
    <user>Roberto</user>
    <text>the use case is following: the keys are strings (the filename), the values are record types, and I need to iterate over the sortedmap (either by keeping the index, but this does not exist in a map, or by keeping the key)</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T10:45:31.293800</ts>
    <user>Roselia</user>
    <text>i'm not an expert, i think we can split sequence by take-while \\ drop-while so effectively next item will be the first element of drop-while sequence</text>
  </message>
  <message conversation_id="1234">
    <ts>2019-04-21T10:59:28.294400</ts>
    <user>Loria</user>
    <text>I wonder if it's possible to implement the functions "loeb" and "moeb" in Clojure? &lt;https://github.com/quchen/articles/blob/master/loeb-moeb.md&gt;</text>
  </message>
  <message conversation_id="1234">
    <ts>2019-04-21T11:06:01.295800</ts>
    <user>Loria</user>
    <text>just out of curiosity, I tried playing around with `lazy-seq` and memoization but couldn't get it to behave lazy enough to actually evaluate</text>
  </message>
  <message conversation_id="1234">
    <ts>2019-04-21T11:07:23.296800</ts>
    <user>Loria</user>
    <text>here's a (non-working) translation of the Haskell code
```
(defn loeb [fs]
  (lazy-seq
    (map (fn [f]
           (f (loeb fs)))
      fs)))

(loeb
  [(constantly 1)
   #(inc (second %))
   #(inc (first %))])
;; should=&amp;gt; (1 3 2)
```</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T11:19:13.297100</ts>
    <user>Roselia</user>
    <text>&lt;@Roberto&gt; ```
(def my-map (sorted-map "e" 5 "d" 4 "c" 3 "b" 2 "a" 1))

(defn create-iterator
  [coll]
  (let [state (atom (seq coll))
        update-state (fn [state] (swap! state rest))]
    (fn []
      (let [item (first @state)]
        (update-state state)
        item))))


(def my-iterator (create-iterator my-map))

;;=&amp;gt; #'junk.core/my-map
;;=&amp;gt; #'junk.core/create-iterator
;;=&amp;gt; #'junk.core/my-iterator
;;(my-iterator)
;;=&amp;gt; ["a" 1]
;;(my-iterator)
;;=&amp;gt; ["b" 2]
;;(my-iterator)
;;=&amp;gt; ["c" 3]
;;(my-iterator)
;;=&amp;gt; ["d" 4]
;;(my-iterator)
;;=&amp;gt; ["e" 5]
;;(my-iterator)
;;=&amp;gt; nil
```</text>
  </message>
  <message conversation_id="1233">
    <ts>2019-04-21T11:19:44.297500</ts>
    <user>Roselia</user>
    <text>must be thread safe</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:25:33.300000</ts>
    <user>Liliana</user>
    <text>Hi, does anyone have good solution to a fast reset-able timeout. I'm already using core.async, but I'm thinking about a classical problem of making a action _foo_ depending on the last time action _bar_ was called, but action _bar_ could be called dozen or hundred times a second and so performance matters a bit.</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:33:37.301500</ts>
    <user>Meagan</user>
    <text>are you saying you only want the reaction to be run once every x interval, even if the trigger is fired n number of times within the interval?</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:34:47.302400</ts>
    <user>Liliana</user>
    <text>&lt;@Meagan&gt; think of it a bit like idle counter, last time there was an interaction then fire the action once (screen saver for example)</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:35:32.303200</ts>
    <user>Liliana</user>
    <text>I'm thinking now of timeout in an atom and close! it every time there's an action (and replace it with a new timeout)</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:35:34.303300</ts>
    <user>Meagan</user>
    <text>I can't tell if you're saying no, my interpretation is wrong, or yes, my interpretation is right</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:37:06.303700</ts>
    <user>Meagan</user>
    <text>I _think_ you're talking about debouncing</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:37:27.303900</ts>
    <user>Liliana</user>
    <text>:slightly_smiling_face: that could be</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:38:18.304500</ts>
    <user>Meagan</user>
    <text>in which case there's this simple CLJS example:
&lt;https://gist.github.com/swannodette/5888989&gt;</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:38:47.304900</ts>
    <user>Meagan</user>
    <text>there's probably a simpler way, without core.async</text>
  </message>
  <message conversation_id="1235">
    <ts>2019-04-21T11:39:42.305600</ts>
    <user>Liliana</user>
    <text>thanks, exactly what I need!</text>
  </message>
  <message conversation_id="1236">
    <ts>2019-04-21T12:37:07.306600</ts>
    <user>Loria</user>
    <text>How can I "subclass" a lazy sequence to extend a custom protocol?</text>
  </message>
  <message conversation_id="1236">
    <ts>2019-04-21T12:37:32.306900</ts>
    <user>Loria</user>
    <text>similar to `defrecord` for maps</text>
  </message>
  <message conversation_id="1236">
    <ts>2019-04-21T12:39:43.308200</ts>
    <user>Loria</user>
    <text>ie. I don't want all `clojure.lang.Sequential` or such to support the protocol, but only a custom type which should still remain compatible with all library functions</text>
  </message>
  <message conversation_id="1236">
    <ts>2019-04-21T15:41:27.308300</ts>
    <user>Nieves</user>
    <text>If you want to see a sources, I just published a link on github in announcements</text>
  </message>
  <message conversation_id="1237">
    <ts>2019-04-21T15:49:05.310600</ts>
    <user>Roberto</user>
    <text>&lt;@Roselia&gt; thanks, but I need to go both ways, forward and backward (it's essentially scrolling though a file list). it needs to be fast. i started with a sorted map, because I wanted to also have fast access by filename. i am now using a vector instead, which works, but does not have fast access by filename</text>
  </message>
  <message conversation_id="1237">
    <ts>2019-04-21T15:53:10.311700</ts>
    <user>Roberto</user>
    <text>a combination of sorted-map with vector would probably work, I was just trying to use only sorted-map, but I guess I need something like LinkedHashMap</text>
  </message>
  <message conversation_id="1238">
    <ts>2019-04-21T16:00:57.311800</ts>
    <user>Meagan</user>
    <text>you could perhaps extend a particular sequence to your custom protocols via metadata</text>
  </message>
  <message conversation_id="1239">
    <ts>2019-04-21T16:30:40.312400</ts>
    <user>Otelia</user>
    <text>There is &lt;https://github.com/frankiesardo/linked&gt; although I haven't tried it.

I would probably maintain both a vector and a hash map, if both types of access must be extremely fast and the list is largish.

Another approach is to just use a vector in name order, and do a binary search within the vector when doing a name lookup.</text>
  </message>
  <message conversation_id="1239">
    <ts>2019-04-21T16:44:47.312700</ts>
    <user>Loria</user>
    <text>Oh! I didn't know you could extend protocols using metadata, looks like a new thing in 1.10</text>
  </message>
  <message conversation_id="1239">
    <ts>2019-04-21T16:56:28.313100</ts>
    <user>Roselia</user>
    <text>&lt;@Otelia&gt; just checked it, doesnt allow for previous\next node navigation</text>
  </message>
  <message conversation_id="1240">
    <ts>2019-04-21T18:56:01.317300</ts>
    <user>Alease</user>
    <text>i'm trying to calculate a per-frame movement factor for a cursor i'm drawing  For example I have
```(defn next-pointer
  "Moves the pointer, taking to account speed"
  [{:keys [x y direction speed active] :as pointer} frame fps]
  (let [[dx dy] direction
        norm-time (mod frame fps)
        d-pixels (if (zero? norm-time)
                   speed
                   0)]
    (assoc pointer
           :x (+ x (* dx d-pixels))
           :y (+ y (* dy d-pixels)))))
```
In this example, there's a speed of the format `pixels/second`.  I want to determine at each frame by what factor I should increase x.  My first approach was to determine the position of x at an origin, but due to adding to the x, it became more of an acceleration.  In this case, I kind of lazily just get the next speed only when I'm at a "second" which is hardly smooth.  The missing piece is the other part of that if.  I've tried making `norm-time (/ (rem frame fps) fps)` to see if that would help, but it gives me kind of a stepping movement.  I'm always bad at factoring time in my drawing apps, is there a missing link I'm not seeing</text>
  </message>
  <message conversation_id="1240">
    <ts>2019-04-21T18:57:54.318000</ts>
    <user>Alease</user>
    <text>direction is simply a unit vector so it's either 0 1 or -1 for any element in the vector</text>
  </message>
  <message conversation_id="1240">
    <ts>2019-04-21T19:01:31.318400</ts>
    <user>Alease</user>
    <text>here's some more code for context &lt;https://github.com/dantheobserver/drawing-experiments/blob/master/src/experiments/12_pixel_paintbrush.clj&gt;</text>
  </message>
  <message conversation_id="1240">
    <ts>2019-04-21T19:57:56.318900</ts>
    <user>Alease</user>
    <text>I guess I need to keep track of dt</text>
  </message>
  <message conversation_id="1239">
    <ts>2019-04-21T20:07:56.319300</ts>
    <user>Otelia</user>
    <text>A vector seems like the best choice, if binary search is fast enough for you.</text>
  </message>
  <message conversation_id="1239">
    <ts>2019-04-21T20:11:06.319500</ts>
    <user>Otelia</user>
    <text>If you're using Clojure on the JVM you can use Java's binary search:
```
(java.util.Collections/binarySearch ["a" "b" "c"] "b")
=&amp;gt; 1
```</text>
  </message>
  <message conversation_id="1240">
    <ts>2019-04-21T20:29:35.319800</ts>
    <user>Alease</user>
    <text>that seemd to be it, I just had to pass in dt, and keep it updated each frame
```(defn next-pointer
  "Moves the pointer, taking to account speed"
  [{:keys [x y direction speed active] :as pointer} dt]
  (let [[dx dy] direction
        d-pixels (* speed dt)
        next-x (+ x (* dx d-pixels))
        next-y (+ y (* dy d-pixels))]
    (assoc pointer
           :x next-x
           :y next-y)))
```</text>
  </message>
  <message conversation_id="1241">
    <ts>2019-04-21T23:00:59.320100</ts>
    <user>Harold</user>
    <text>Thanks got posting this. I was dozing off in front of an Elixir tutorial when I saw this and it woke me up.

Downloaded your experiments and went through them, getting acquainted with clojure2d. I'll certainly have to show 07_dedication.clj to a cat (actual feline) I know.

It seems like some complexity with this speed thing can be removed. In my doodles, I typically express the speed in the number of pixels x/y it will change each frame. Then the distance it will travel each second is dependent on the frame rate, which is actually an effect I'd want as if I was changing the speed of a projector.</text>
  </message>
  <message conversation_id="1241">
    <ts>2019-04-21T23:14:55.320700</ts>
    <user>Harold</user>
    <text>Ya. I have speed and direction combined.</text>
  </message>
  <message conversation_id="1240">
    <ts>2019-04-22T01:43:10.320900</ts>
    <user>Alease</user>
    <text>Haha, dedication is actually something I found in a tweet for pico8, I wanted to disect it and replicate it in clojure2d, to little success.  Need to find the tweet to show it.</text>
  </message>
  <message conversation_id="1240">
    <ts>2019-04-22T01:57:05.321100</ts>
    <user>Alease</user>
    <text>I try to translate as much to something "relatable" so I don't have to do guesswork or adding magic numbers to get movevement down.  But most of it I'm trying to work my way into understanding without looking at formal graphics programming info.</text>
  </message>
  <message conversation_id="1242">
    <ts>2019-04-22T09:36:17.322800</ts>
    <user>Augusta</user>
    <text>I have a question, `iterator-seq` returns a lazy seq or not? I need to work with a possible infinite iterable class in Java.</text>
  </message>
  <message conversation_id="1242">
    <ts>2019-04-22T09:41:16.323000</ts>
    <user>Otelia</user>
    <text>Since iterators are lazy I think the answer has to be yes.</text>
  </message>
  <message conversation_id="1242">
    <ts>2019-04-22T09:42:35.323200</ts>
    <user>Otelia</user>
    <text>Or a better way to say it is that if the iterator is lazy, the sequence will be lazy.</text>
  </message>
  <message conversation_id="1243">
    <ts>2019-04-22T09:48:24.324100</ts>
    <user>Murray</user>
    <text>Hi, folks. Can I give a name to a test case with `clojure.test/are`?
Or how can I know which case failed in the report?</text>
  </message>
  <message conversation_id="1242">
    <ts>2019-04-22T11:21:56.325400</ts>
    <user>Augusta</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1244">
    <ts>2019-04-22T12:09:52.326600</ts>
    <user>Ginger</user>
    <text>Some comments on this would be much appreciated: &lt;https://stackoverflow.com/questions/55797382/idiomatic-rest-wrappers-in-clojure&gt;</text>
  </message>
  <message conversation_id="1244">
    <ts>2019-04-22T14:40:29.327000</ts>
    <user>Harold</user>
    <text>Sounds good. I might translate some of your experiments into Quil</text>
  </message>
  <message conversation_id="1243">
    <ts>2019-04-22T15:55:12.327200</ts>
    <user>Mariela</user>
    <text>```
(are [input expected] (testing input
                          (= expected
                             (system-under-stest input)))
  x y
  a b)
```</text>
  </message>
  <message conversation_id="1243">
    <ts>2019-04-22T15:55:33.327400</ts>
    <user>Mariela</user>
    <text>i.e., add `testing` with a dynamically-built string</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T19:44:59.327800</ts>
    <user>Samual</user>
    <text>You may study a generic Swagger client, Martian (&lt;https://skillsmatter.com/meetups/8426-clojure-bytes&gt;); and also consider the Cognitect AWS client wrapper as a more sprawling example.

By the way, maybe "Java 11" will eventually solve this, but here is a severe case of complecting.  The two API wrappers you mentioned, and Martian, are coupled to Apache's HTTP Client; while Cognitect's AWS API wrapper apparently delegates to some Jetty thing.  For "something special", I would like to mix and match:  use any API wrapper with any HTTP library.  If I have a biggish app that already has a way of managing HTTP connections, retries, pooling, throttling, etc.... with Netty, say...  the API wrappers should participate in that!</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:12:02.328300</ts>
    <user>Alease</user>
    <text>feel free, many of them are unfinished, or simply ideas that I took to a point that I was satisfied with, but may not make much sense now.  It's my sketchpad really.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:42:55.332300</ts>
    <user>Noemi</user>
    <text>I'm finally getting productive with clojure, but now I'm finding out that sizable (read: useful) projects take forever to load a repl (I use cider/emacs)... we're talking a couple minutes per bounce... what am I doing wrong?</text>
  </message>
  <message conversation_id="1246">
    <ts>2019-04-22T23:45:25.332900</ts>
    <user>Jasmine</user>
    <text>if you're using user.clj and a very recent JDK version, you might have stumbled into a Java performance regression</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:45:52.333400</ts>
    <user>Jasmine</user>
    <text>jdk 1.8u202+, 11.0.2, 12,  etc</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:47:00.333800</ts>
    <user>Jasmine</user>
    <text>see &lt;https://dev.clojure.org/jira/browse/CLJ-2484&gt; - we are testing a workaround in 1.10.1-beta2</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:51:37.335000</ts>
    <user>Jasmine</user>
    <text>you could try downgrading your java version or upgrading Clojure to 1.10.1-beta2 to see if that helps</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:53:08.336300</ts>
    <user>Celestine</user>
    <text>&lt;@Noemi&gt; As a sanity check, I just timed my REPL startup time -- via `clj` with a profile that contains every single dependency our 80,000+ line Clojure project uses, which also starts a Socket REPL and starts up Cognitect's REBL tool. A cold start to a live REPL with REBL open takes just under 12 seconds on my Mac.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:53:43.336600</ts>
    <user>Noemi</user>
    <text>ok, so it's something wrong with my setup, for sure.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:54:05.337100</ts>
    <user>Noemi</user>
    <text>and that's crazy fast, btw.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:54:09.337200</ts>
    <user>Celestine</user>
    <text>Per Alex, it could be the JVM regression if you're on either of those versions...</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:54:27.337500</ts>
    <user>Celestine</user>
    <text>I think 12 seconds is _slow_ :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:55:07.337900</ts>
    <user>Noemi</user>
    <text>java version "1.8.0_92"
Java(TM) SE Runtime Environment (build 1.8.0_92-b14)
Java HotSpot(TM) 64-Bit Server VM (build 25.92-b14, mixed mode)</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:55:54.338400</ts>
    <user>Celestine</user>
    <text>(without REBL and the Socket REPL, starting a plain REPL takes about 8 seconds for comparison)</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:56:34.339200</ts>
    <user>Celestine</user>
    <text>OK, so on that version of Java/JVM it's unlikely to be the regression Alex mentioned.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:56:56.339700</ts>
    <user>Noemi</user>
    <text>it's very likely something wrong with my code, right?</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:57:04.340200</ts>
    <user>Noemi</user>
    <text>I mean, that can affect things, I'm guessing.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:57:10.340400</ts>
    <user>Celestine</user>
    <text>Maybe ask in &lt;#C0617A8PQ|cider&gt; and/or &lt;#C099W16KZ|emacs&gt; and see if they can suggest ways to optimize startup?</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:57:22.340700</ts>
    <user>Noemi</user>
    <text>sounds like a plan.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:57:43.341300</ts>
    <user>Noemi</user>
    <text>I could generate a new project and see how long that takes.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:58:43.342400</ts>
    <user>Celestine</user>
    <text>Also, I'm starting a REPL into the `user` namespace which means it doesn't need to load my main namespace.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-22T23:59:06.342800</ts>
    <user>Noemi</user>
    <text>lein repl on a project generated with ```lein new app test``` took about 11 seconds.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:00:16.343600</ts>
    <user>Noemi</user>
    <text>I usually just lein repl at the root of the project... how would I specify a namespace?</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:00:54.344600</ts>
    <user>Celestine</user>
    <text>It depends what's in your `project.clj` -- when the REPL starts, is it in `user` or some project-specific ns?</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:01:02.344900</ts>
    <user>Noemi</user>
    <text>aha ok</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:01:06.345200</ts>
    <user>Noemi</user>
    <text>I'll look.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:02:20.345400</ts>
    <user>Noemi</user>
    <text>user</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:02:25.345600</ts>
    <user>Noemi</user>
    <text>so it's not that.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:02:49.346200</ts>
    <user>Noemi</user>
    <text>it is a big luminus rest service type thing, so it's a larger project.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:03:17.346900</ts>
    <user>Noemi</user>
    <text>well, you've given me a few things to look at in the morning.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:03:20.347000</ts>
    <user>Celestine</user>
    <text>```(! 780)-&amp;gt; lein new app timing
Generating a project called timing based on the 'app' template.
(! 781)-&amp;gt; cd timing
(! 782)-&amp;gt; time lein repl &amp;lt; /dev/null
nREPL server started on port 57337 on host 127.0.0.1 ...
timing.core=&amp;gt; Bye for now!

real	0m7.290s
user	0m5.564s
sys	0m0.490s
(! 783)-&amp;gt; time lein repl &amp;lt; /dev/null
nREPL server started on port 57351 on host 127.0.0.1 ...
timing.core=&amp;gt; Bye for now!

real	0m6.634s
user	0m5.467s
sys	0m0.486s
(! 784)-&amp;gt; 
``` 6.6 vs your 11.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:04:07.347200</ts>
    <user>Noemi</user>
    <text>ok, both are close enough for me :wink:</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:04:36.347900</ts>
    <user>Noemi</user>
    <text>probably is something to do with cider/emacs and all that, per what you were saying.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:06:20.348000</ts>
    <user>Celestine</user>
    <text>Leiningen adds a lot of overhead, compared to the CLI/`deps.edn` stuff, just FYI: ```(! 787)-&amp;gt; clj -A:new app timing.core
Generating a project called timing.core based on the 'app' template.
(! 788)-&amp;gt; cd timing.core/
(! 789)-&amp;gt; time clj &amp;lt; /dev/null
Clojure 1.10.1-beta2
user=&amp;gt; 

real	0m4.462s
user	0m11.724s
sys	0m0.563s
(! 790)-&amp;gt; time clj &amp;lt; /dev/null
Clojure 1.10.1-beta2
user=&amp;gt; 

real	0m1.385s
user	0m2.742s
sys	0m0.194s
(! 791)-&amp;gt; 
``` 6.6 goes down to 1.4 :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:07:02.348400</ts>
    <user>Noemi</user>
    <text>thanks for all the help!</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:08:00.348500</ts>
    <user>Noemi</user>
    <text>I'll also look at the CLI/deps.edn stuff, which I know nothing about.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:10:11.349100</ts>
    <user>Celestine</user>
    <text>We love it. We switched from Boot to CLI last year (after switching from Leiningen to Boot just over three years ago).</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:11:08.350100</ts>
    <user>Jasmine</user>
    <text>the luminus setup usually has a user.clj file and loads (and compiles) a large set of your project and dependent files on startup. I would look more carefully and see if  you're doing something at the top level somewhere in addition to that too.</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:11:20.350400</ts>
    <user>Jasmine</user>
    <text>like def'ing something that loads from a database, et c</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:11:41.350800</ts>
    <user>Jasmine</user>
    <text>you can often use  a `delay` to avoid doing that too eagerly</text>
  </message>
  <message conversation_id="1247">
    <ts>2019-04-23T00:18:30.351800</ts>
    <user>Madeleine</user>
    <text>Any way to spec something as a list or a cons? Is there a pred for that? Basically, I want a pred for clojure code</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:18:38.352100</ts>
    <user>Madeleine</user>
    <text>To spec a macro</text>
  </message>
  <message conversation_id="1247">
    <ts>2019-04-23T00:20:26.352500</ts>
    <user>Madeleine</user>
    <text>Hum, looks like seq? could do</text>
  </message>
  <message conversation_id="1245">
    <ts>2019-04-23T00:27:35.353000</ts>
    <user>Jasmine</user>
    <text>generally, I find it's best to spec inputs to macros  using the regex ops</text>
  </message>
  <message conversation_id="1247">
    <ts>2019-04-23T00:27:50.353300</ts>
    <user>Jasmine</user>
    <text>so, `cat`, `*`, etc</text>
  </message>
  <message conversation_id="1247">
    <ts>2019-04-23T00:47:43.353500</ts>
    <user>Madeleine</user>
    <text>I have `(s/+ seq?)`</text>
  </message>
  <message conversation_id="1247">
    <ts>2019-04-23T00:47:56.353900</ts>
    <user>Madeleine</user>
    <text>Where it takes one or more s-exprs</text>
  </message>
  <message conversation_id="1247">
    <ts>2019-04-23T00:49:44.355000</ts>
    <user>Madeleine</user>
    <text>Would you do something different?</text>
  </message>
  <message conversation_id="1248">
    <ts>2019-04-23T01:33:08.355300</ts>
    <user>Karren</user>
    <text>I've also found (and it was a  long time ago) that luminus-based projects have quite a long startup time; and it was a very simple service actually. It's perhaps because of many depedencies it introduces...</text>
  </message>
  <message conversation_id="1249">
    <ts>2019-04-23T03:30:45.356400</ts>
    <user>Roselia</user>
    <text>whats the difference between fn and fn*? Can't find a declaration of latter.</text>
  </message>
  <message conversation_id="1249">
    <ts>2019-04-23T03:33:20.357100</ts>
    <user>Celestine</user>
    <text>`fn` is technically a "special form" but it is implemented as a macro that calls `fn*` which is part of the compiler</text>
  </message>
  <message conversation_id="1249">
    <ts>2019-04-23T03:34:16.357600</ts>
    <user>Celestine</user>
    <text>Like `let` is a special form too, but it is also implemented as a macro that uses `let*`...</text>
  </message>
  <message conversation_id="1249">
    <ts>2019-04-23T03:42:54.358400</ts>
    <user>Roselia</user>
    <text>&lt;@Celestine&gt; great, thank you</text>
  </message>
  <message conversation_id="1250">
    <ts>2019-04-23T06:17:00.360100</ts>
    <user>Elayne</user>
    <text>I am writing some cljc code and realizing that there must be something about JVM-clojure and namespaced type hints that I don’t understand. If I have a type/record, I seem to be able to use its name as a type hint within its own namespace, but not from another namespace? example: &lt;https://gist.github.com/mhuebert/3269ac0b5bebebb93de9c497a33a694f&gt;</text>
  </message>
  <message conversation_id="1250">
    <ts>2019-04-23T06:17:02.360200</ts>
    <user>Elayne</user>
    <text>None</text>
  </message>
  <message conversation_id="1250">
    <ts>2019-04-23T06:17:02.360500</ts>
    <user>Elayne</user>
    <text>None</text>
  </message>
  <message conversation_id="1250">
    <ts>2019-04-23T06:26:47.361500</ts>
    <user>Coralie</user>
    <text>&lt;@Elayne&gt; in jvm clojure MyType will be a generated class, you'd need to import it</text>
  </message>
  <message conversation_id="1250">
    <ts>2019-04-23T06:30:30.361800</ts>
    <user>Elayne</user>
    <text>&lt;@Coralie&gt; ah, ok, thanks!</text>
  </message>
  <message conversation_id="1251">
    <ts>2019-04-23T07:28:22.362600</ts>
    <user>Harris</user>
    <text>you don't necessarily need to import it, you simply need to refer to it as a class rather than as a Var</text>
  </message>
  <message conversation_id="1251">
    <ts>2019-04-23T07:29:34.364500</ts>
    <user>Harris</user>
    <text>`n/T` is not valid syntax for classes in clojure/jvm</text>
  </message>
  <message conversation_id="1251">
    <ts>2019-04-23T07:30:18.365800</ts>
    <user>Harris</user>
    <text>it needs to be `n.T` (namespace aliases are not valid either,`n` must be fully qualified)</text>
  </message>
  <message conversation_id="1251">
    <ts>2019-04-23T07:30:40.366400</ts>
    <user>Harris</user>
    <text>it's unfortunate that clojure script diverged for deftypes</text>
  </message>
  <message conversation_id="1251">
    <ts>2019-04-23T07:36:10.367300</ts>
    <user>Elayne</user>
    <text>so I guess it needs to be `^hints.my_type.MyType` - also munging the `-` to `_`</text>
  </message>
  <message conversation_id="1251">
    <ts>2019-04-23T07:38:46.368300</ts>
    <user>Coralie</user>
    <text>yes -- import would just allow shorter naming, `MyType` (closer to `t/MyType` from the example)</text>
  </message>
  <message conversation_id="1252">
    <ts>2019-04-23T07:39:46.369200</ts>
    <user>Jasmine</user>
    <text>I would prob do `(s/+ any?)`</text>
  </message>
  <message conversation_id="1251">
    <ts>2019-04-23T07:40:16.370000</ts>
    <user>Elayne</user>
    <text>so `(:import hints.my_type.MyType)`</text>
  </message>
  <message conversation_id="1251">
    <ts>2019-04-23T07:40:28.370300</ts>
    <user>Jasmine</user>
    <text>There are a lot of valid Clojure forms that are not seqs</text>
  </message>
  <message conversation_id="1251">
    <ts>2019-04-23T07:41:44.371200</ts>
    <user>Elayne</user>
    <text>and then I suppose I would refer `MyType` in the cljs version, so that a plain `^MyType` annotation works for both</text>
  </message>
  <message conversation_id="1253">
    <ts>2019-04-23T08:23:37.371600</ts>
    <user>Harris</user>
    <text>yep</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T11:24:15.372800</ts>
    <user>Roselia</user>
    <text>does subvec allows for garbage collecting of unused nodes
say if we want [1 2 3] -&amp;gt; [2 3] what is my options aside from vec -&amp;gt; seq -&amp;gt; vec</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T11:25:05.373900</ts>
    <user>Jasmine</user>
    <text>ideally, don't use a vector in the first place if you need to remove elements any place but the end</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T11:25:45.374900</ts>
    <user>Jasmine</user>
    <text>subvec will keep the original vector in memory so will not be gc'ed</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T11:26:06.375300</ts>
    <user>Roselia</user>
    <text>alex, thanks for everything you are doing for us btw, i'm a fan :smiley:</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T11:26:59.375700</ts>
    <user>Jasmine</user>
    <text>:thumbsup:</text>
  </message>
  <message conversation_id="1255">
    <ts>2019-04-23T11:58:04.375800</ts>
    <user>Madeleine</user>
    <text>Thanks, I'll have a look at it again. I guess I'm not sure why I ever tried to restrict it in the first place.</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T12:06:23.376300</ts>
    <user>Jasmine</user>
    <text>usually not worth it in macro args</text>
  </message>
  <message conversation_id="1256">
    <ts>2019-04-23T12:38:26.377800</ts>
    <user>Kate</user>
    <text>is there a way to set *use-context-classloader* false before clojure starts?</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T12:42:48.378600</ts>
    <user>Jasmine</user>
    <text>how are you starting clojure?</text>
  </message>
  <message conversation_id="1257">
    <ts>2019-04-23T13:38:03.381300</ts>
    <user>Elaine</user>
    <text>How do i create a var in a another namespace?
I know that it is not common, but I'm doing a DSL that "compiles" to &lt;#C08TC9JCS|clara&gt;, and clara use vars in namespaces...</text>
  </message>
  <message conversation_id="1258">
    <ts>2019-04-23T13:39:58.381400</ts>
    <user>My</user>
    <text>Hey all, we’ve written a post on the Amperity Eng blog on Greenlight (our Clojure integration testing library). &lt;https://eng.amperity.com/posts/2019/04/greenlight&gt;</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T13:40:42.382000</ts>
    <user>Kate</user>
    <text>&lt;@Jasmine&gt; java -jar [uberjar] args</text>
  </message>
  <message conversation_id="1256">
    <ts>2019-04-23T13:41:48.383200</ts>
    <user>Kate</user>
    <text>this code runs when i 'lein run' it but some jars fail their static initializers that try to classload XML expecting to get the system classloader (AFAIK)</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T13:43:10.383300</ts>
    <user>Jasmine</user>
    <text>`intern` &lt;http://clojure.github.io/clojure/clojure.core-api.html#clojure.core/intern&gt;</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T13:44:39.383900</ts>
    <user>Jasmine</user>
    <text>user.clj is loaded pretty early in the RT - you could try adding one that sets `*use-context-classloader*`</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T13:47:42.384000</ts>
    <user>Elaine</user>
    <text>NICE!</text>
  </message>
  <message conversation_id="1254">
    <ts>2019-04-23T13:50:27.384500</ts>
    <user>Kate</user>
    <text>thx</text>
  </message>
  <message conversation_id="1259">
    <ts>2019-04-23T14:10:17.387300</ts>
    <user>Aubrey</user>
    <text>Oh wow that is seriously cool. I’ve seen the project before but never got the value proposition. Are you aware of &lt;https://github.com/caioaao/kaocha-greenlight&gt; ? I’m using kaocha for running other tests. </text>
  </message>
  <message conversation_id="1259">
    <ts>2019-04-23T14:15:55.389000</ts>
    <user>Aubrey</user>
    <text>Silly question, can all the clojure.test compatible assertions be used? </text>
  </message>
  <message conversation_id="1259">
    <ts>2019-04-23T17:56:37.391200</ts>
    <user>My</user>
    <text>Hey &lt;@Aubrey&gt; thanks we have seen that. I think the answer to your question is yes they should work. Feel free to file an issue if you find out this isn’t the case</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T03:58:37.397500</ts>
    <user>Enola</user>
    <text>Hello.
I'm trying to use `org.apache.commons.io.input.ObservableInputStream` to make sure that I remove the file that I just streamed.
For that I need to extend the abstract class `org.apache.commons.io.input.ObservableInputStream$Observer` and override some of its methods. I tried using `proxy` but the overridden methods are not called.
Is this because they're not public and have the default visibility instead?
My next step is to use `gen-class`. Is there anything simpler for this task?</text>
  </message>
  <message conversation_id="1259">
    <ts>2019-04-24T04:31:41.398600</ts>
    <user>Enola</user>
    <text>Ah, my Java's a bit rusty - package private methods cannot be overridden from another package at all. And the corresponding bug in Common's JIRA says: "Fixed, will be in 2.7, whenever that comes." Oh well.</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:08:27.399800</ts>
    <user>Enola</user>
    <text>New question - is there any way to use Java files in a Clojure project while keeping the working REPL? I don't want to reload Java files, I just want them to work. Right now I just keep getting `ClassNotFoundException`.</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:11:06.400100</ts>
    <user>Roselia</user>
    <text>do you mean (import)?</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:11:40.400600</ts>
    <user>Enola</user>
    <text>Well yeah. Only the java file is within my project source files.</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:14:21.401300</ts>
    <user>Enola</user>
    <text>It seems that Leiningen allows you to specify `:java-source-paths`. The thing is, I don't use Leiningen and Boot - I just use `clj`.</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:15:57.401500</ts>
    <user>Ivana</user>
    <text>&lt;@My&gt; Looks good! Am I right to observe that the step idea has some overlap with ideas from Cucumber? Or is that just accidental?</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:17:59.402000</ts>
    <user>Roselia</user>
    <text>&lt;@Enola&gt; from &lt;https://clojuredocs.org/clojure.core/import&gt;
```
;; For cases when 'import' does not do it for you, i.e. "live-coding"
;; You can use the DynamicClassLoader, ClassReader and the Resolver.
;; &lt;https://github.com/clojure/clojure&gt;

(def dcl (clojure.lang.DynamicClassLoader.))

(defn dynamically-load-class! 
  [class-loader class-name]
  (let [class-reader (clojure.asm.ClassReader. class-name)]
    (when class-reader
      (let [bytes (.-b class-reader)]
        (.defineClass class-loader 
                      class-name 
                      bytes
                      "")))))

(dynamically-load-class! dcl "java.lang.Long")
(dynamically-load-class! dcl 'org.joda.time.DateTime)

;; From that point the dynamically loaded class can be
;; used by the Reflector to invoke constructors, methods and to get fields. 
```</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:20:05.402300</ts>
    <user>Enola</user>
    <text>But it requires a corresponding `.class` file, doesn't' it? I'm getting `Execution error (IOException) at clojure.asm.ClassReader/readStream (ClassReader.java:300).
Class not found` with it.</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:20:10.402600</ts>
    <user>Roselia</user>
    <text>thats all i found, tbh i'm interested myself</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:20:18.402700</ts>
    <user>Roselia</user>
    <text>yeah seems like</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:22:20.402900</ts>
    <user>Roselia</user>
    <text>found &lt;https://github.com/ztellman/virgil&gt; for lein and boot</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:24:38.403500</ts>
    <user>Enola</user>
    <text>Yep, I could use &lt;https://github.com/tailrecursion/javastar&gt; that it mentions to just `slurp` that java file. :smile:</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:24:57.404000</ts>
    <user>Enola</user>
    <text>Found this: &lt;https://www.mail-archive.com/clojure@googlegroups.com/msg103900.html&gt;
More than half a year old but is probably still true.
```
clj is not a build tool, only a pure Clojure runner, so without something 
additional to do Java compilation, you can’t use it in a mixed source project.
```</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:36:23.404800</ts>
    <user>Lecia</user>
    <text>Any suggestions/reads/libs on how to stub an external RESTAPI service in my tests? So far I am thinking of &lt;https://github.com/myfreeweb/clj-http-fake&gt;</text>
  </message>
  <message conversation_id="1260">
    <ts>2019-04-24T05:39:33.405500</ts>
    <user>Ivana</user>
    <text>I'm curious too. I think Clojure is missing a library like this &lt;https://github.com/lostisland/faraday&gt;</text>
  </message>
  <message conversation_id="1261">
    <ts>2019-04-24T07:45:49.000800</ts>
    <user>Lecia</user>
    <text>the one I mentioned above is the Clojure adaptation of &lt;https://github.com/chrisk/fakeweb&gt;. Have you heard of that?</text>
  </message>
  <message conversation_id="1261">
    <ts>2019-04-24T07:54:46.001100</ts>
    <user>Ivana</user>
    <text>No I haven't heard of it (but doesn't say much actually)</text>
  </message>
  <message conversation_id="1261">
    <ts>2019-04-24T08:18:44.003500</ts>
    <user>Lecia</user>
    <text>Also saw this &lt;https://github.com/johanhaleby/stub-http&gt;</text>
  </message>
  <message conversation_id="1262">
    <ts>2019-04-24T08:32:13.005500</ts>
    <user>Zona</user>
    <text>what's the best way to modify a macro that expects a literal Seq to evaluate functions/symbols passed to it?
```(defmacro old-printy
  [print-this]
  (if (seq print-this)
    `(print ~print-this)))```
Passing `'[a b c]` works, but `(def print-these '[a b c])`/`(old-printy print-these)` throws exception.

So far I have this
```(defmacro new-printy 
  [print-this]
  (let [evaluated-print-this (cond 
                               (fn? print-this) `(~print-this) 
                               (seqable? print-this) `(seq ~print-this)
                               (symbol? print-this) `(into [] ~print-this)
                               :else print-this)]
    `(print ~evaluated-print-this)))```</text>
  </message>
  <message conversation_id="1262">
    <ts>2019-04-24T08:34:17.006200</ts>
    <user>Zona</user>
    <text>I forgot the `(if (seq evaluated-print-this))` in the second one :face_with_rolling_eyes:</text>
  </message>
  <message conversation_id="1263">
    <ts>2019-04-24T08:45:30.007700</ts>
    <user>Roselia</user>
    <text>i'm just starting with core async, if i want some transformations on a channel data is that a proper way to do it?
```
(defn filter
  ([c] (filter (chan) c))
  ([c' c]
   (go (while true 
         (&amp;gt;! c' (&amp;lt;! c)))) ;; logic here
   c'))
```</text>
  </message>
  <message conversation_id="1263">
    <ts>2019-04-24T08:46:08.008000</ts>
    <user>Jasmine</user>
    <text>no, channels can take a transducer</text>
  </message>
  <message conversation_id="1263">
    <ts>2019-04-24T08:46:36.008400</ts>
    <user>Roselia</user>
    <text>alright ill look into it, is above pattern useful for something?</text>
  </message>
  <message conversation_id="1263">
    <ts>2019-04-24T08:46:59.008900</ts>
    <user>Jasmine</user>
    <text>`(chan 10 (filter odd?))`</text>
  </message>
  <message conversation_id="1263">
    <ts>2019-04-24T08:47:22.009500</ts>
    <user>Jasmine</user>
    <text>that's a channel, buffer size 10, that you can put numbers into and only odds will come out</text>
  </message>
  <message conversation_id="1263">
    <ts>2019-04-24T08:48:58.009900</ts>
    <user>Jasmine</user>
    <text>also, fyi there's &lt;#C05423W6H|core-async&gt; for more in-depth questions</text>
  </message>
  <message conversation_id="1263">
    <ts>2019-04-24T08:49:17.010200</ts>
    <user>Roselia</user>
    <text>yeah, noted its just seems completely silent</text>
  </message>
  <message conversation_id="1263">
    <ts>2019-04-24T08:49:39.010600</ts>
    <user>Jasmine</user>
    <text>just waiting for you :)</text>
  </message>
  <message conversation_id="1263">
    <ts>2019-04-24T08:49:48.010800</ts>
    <user>Roselia</user>
    <text>haha</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T09:21:30.011200</ts>
    <user>Augusta</user>
    <text>How do I organize a deps.edn project with java source files?</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T09:22:35.012400</ts>
    <user>Augusta</user>
    <text>I have something like this:
```
src/
   -  clj/
        - my-namespace/...
   -  java/ 
        - my-namespace/...
```</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T09:23:04.012900</ts>
    <user>Augusta</user>
    <text>But when I import my java classes, clojure is unable to find them</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T09:48:34.013600</ts>
    <user>Madelene</user>
    <text>&lt;@Augusta&gt;: `tools.deps` is not a build tool, so you can’t do that without compiling those java classes — and for that you need to look into build tools</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T09:48:40.013800</ts>
    <user>Madelene</user>
    <text>&lt;https://github.com/clojure/tools.deps.alpha/wiki/Tools&gt;</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T09:49:41.014200</ts>
    <user>Madelene</user>
    <text>or just use leiningen</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T09:49:59.014400</ts>
    <user>Madelene</user>
    <text>which will do that</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T10:08:04.014800</ts>
    <user>Augusta</user>
    <text>Ok, migrated to leiningen, but having the same error</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T10:10:03.015000</ts>
    <user>Madelene</user>
    <text>did you set &lt;https://github.com/technomancy/leiningen/blob/master/sample.project.clj#L306&gt; ?</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T10:13:15.015500</ts>
    <user>Augusta</user>
    <text>oh</text>
  </message>
  <message conversation_id="1265">
    <ts>2019-04-24T12:01:29.016100</ts>
    <user>My</user>
    <text>I certainly don’t know anything about it, but can ask internally from contributers</text>
  </message>
  <message conversation_id="1266">
    <ts>2019-04-24T12:09:14.017200</ts>
    <user>Rosanne</user>
    <text>Hi, is there something like &lt;https://github.com/metosin/ring-swagger&gt; but which does the reverse? So it transforms a swagger spec (or open api spec) into a working mock API endpoint?</text>
  </message>
  <message conversation_id="1264">
    <ts>2019-04-24T12:39:45.018100</ts>
    <user>Jolanda</user>
    <text>It’s not Clojure, but this is close: &lt;https://github.com/yayoc/swagger-to-mock&gt;</text>
  </message>
  <message conversation_id="1267">
    <ts>2019-04-24T12:49:00.018700</ts>
    <user>Elaine</user>
    <text>There is some "style guide" for project's layout?</text>
  </message>
  <message conversation_id="1267">
    <ts>2019-04-24T12:50:53.019000</ts>
    <user>Jolanda</user>
    <text>&lt;https://github.com/onyx-platform/onyx/issues/887&gt;</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:29:50.022200</ts>
    <user>Leda</user>
    <text>those of you that use Schema for data spec, there is any way to validate some data against a schema without returning an exception, only true or false ?</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:30:33.022700</ts>
    <user>Leda</user>
    <text>&lt;@Rosanne&gt; if you find something like that, let me know, i'm using swagger too</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:32:57.023000</ts>
    <user>Dann</user>
    <text>~you can replace `s/check` with `s/valid?`~
oh, schema not spec, - plumatic/schema also has a function that you can use s/check
it appears schema and spec us valid vs. check in opposite ways(?)</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:34:31.023200</ts>
    <user>Leda</user>
    <text>i'll try</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:36:38.024200</ts>
    <user>Leda</user>
    <text>check returns nil if  data matches the schema</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:36:40.024400</ts>
    <user>Leda</user>
    <text>how weird</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:37:26.025100</ts>
    <user>Leda</user>
    <text>s/validate throws an exception, so i have to handle it in order to not break my entire app. and i don't want to handle it</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:37:42.025500</ts>
    <user>Dann</user>
    <text>because there's often only one way to be correct, and many ways to be wrong</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:38:14.026100</ts>
    <user>Leda</user>
    <text>guess i'll have to make a wrapper fn to handle it</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:38:36.026400</ts>
    <user>Leda</user>
    <text>and make it return true or false</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:39:37.027000</ts>
    <user>Leda</user>
    <text>or i can use s/check with `nil?`
which i think it's very weird to read</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:40:34.027500</ts>
    <user>Dann</user>
    <text>&lt;@Leda&gt; `(complement s/check)` - returns a function which returns true or false in the way you want</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:41:32.027800</ts>
    <user>Leda</user>
    <text>oohh, how smart</text>
  </message>
  <message conversation_id="1268">
    <ts>2019-04-24T16:41:36.028100</ts>
    <user>Leda</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1269">
    <ts>2019-04-24T17:04:15.031700</ts>
    <user>Tori</user>
    <text>Hello everyone :wave:. I just created an account here so it would be nice to introduce myself :slightly_smiling_face: My name is Radek, I'm from Poland. Not yet a clojure dev yet aiming to become one in some time. Currently working as a PHP/JS dev (w/ +10 years of experience). Proud owner of ErgoDox, VIM maniac. Currently watching season 2 of One Punch Man :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1269">
    <ts>2019-04-24T17:06:49.032000</ts>
    <user>Celestine</user>
    <text>Be sure to check out the wide range of channels here -- you'll find &lt;#C053AK3F9|beginners&gt; very helpful for early questions as you're learning the language (folks in there have opted in to helping new folks!). Pretty much every library in common use has a channel here somewhere -- and if you have questions about Slack itself (or this Slack in particular), there's &lt;#C04V84U7G|slack-help&gt;</text>
  </message>
  <message conversation_id="1269">
    <ts>2019-04-24T17:09:34.032800</ts>
    <user>Tori</user>
    <text>awesome, thanks for quick introduction :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1269">
    <ts>2019-04-24T17:09:47.033100</ts>
    <user>Roselia</user>
    <text>Poland Strong! :flag-pl: Greetings from Russia! :flag-ru:</text>
  </message>
  <message conversation_id="1270">
    <ts>2019-04-24T17:33:12.034800</ts>
    <user>Wesley</user>
    <text>```(defmacro old-printy
  [print-this]
  `(if (seq ~print-this)
     (print ~print-this)))```</text>
  </message>
  <message conversation_id="1270">
    <ts>2019-04-24T17:40:20.035500</ts>
    <user>Stephen</user>
    <text>Is the rest API has swagger, you could maybe use one of the java generated servers &lt;https://github.com/swagger-api/swagger-codegen/wiki/Server-stub-generator-HOWTO&gt; to bad clojure is no option.</text>
  </message>
  <message conversation_id="1270">
    <ts>2019-04-24T17:41:01.035700</ts>
    <user>Wesley</user>
    <text>Not sure if this handles all of the intended cases, &lt;@Zona&gt;:```
(defmacro new-printy
  [print-this]
  `(let [evaluated-print-this#  (cond 
                                  (fn? ~print-this) (~print-this)
                                  (seqable? ~print-this) (seq ~print-this)
                                  (symbol? ~print-this) (into [] ~print-this)
                                  :else ~print-this)]
   (print evaluated-print-this#)))
```</text>
  </message>
  <message conversation_id="1270">
    <ts>2019-04-24T17:41:32.035900</ts>
    <user>Wesley</user>
    <text>I guess Slack's thread function doesn't like wide code.</text>
  </message>
  <message conversation_id="1271">
    <ts>2019-04-24T18:24:32.036700</ts>
    <user>Zona</user>
    <text>I missed out keyword and probably a few more, but it seems overly laborious to have to cond based on type. I wonder if there's a better method?</text>
  </message>
  <message conversation_id="1272">
    <ts>2019-04-25T02:34:15.037300</ts>
    <user>Rosanne</user>
    <text>Thanks, I’ll take a look at it!</text>
  </message>
  <message conversation_id="1273">
    <ts>2019-04-25T04:50:21.039300</ts>
    <user>Kami</user>
    <text>Hello everyone :slightly_smiling_face: My name is Jean, I’m from France :flag-cp:. I’m a Clojure(Script) developer.</text>
  </message>
  <message conversation_id="1270">
    <ts>2019-04-25T05:19:05.039900</ts>
    <user>Emile</user>
    <text>Season 2 of One Punch Man is great!</text>
  </message>
  <message conversation_id="1274">
    <ts>2019-04-25T06:12:00.041600</ts>
    <user>Mira</user>
    <text>Hi there, is there a way to load a jar into a running repl? So that I can then `require` "the contents" of the jar?</text>
  </message>
  <message conversation_id="1270">
    <ts>2019-04-25T06:16:26.041700</ts>
    <user>Tori</user>
    <text>&lt;@Emile&gt; IKR ? Awesome stress reliever :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1274">
    <ts>2019-04-25T06:22:01.042800</ts>
    <user>Sixta</user>
    <text>&lt;@Mira&gt; tools.deps has an add-lib that would work for you, and also pomegranate has something too</text>
  </message>
  <message conversation_id="1274">
    <ts>2019-04-25T06:44:59.044000</ts>
    <user>Mira</user>
    <text>&lt;@Sixta&gt; thanks! can't seem to find it though, am I looking at a wrong thing: &lt;https://github.com/clojure/tools.deps.alpha/search?q=add-lib&amp;amp;type=Code&gt; ? the whole `repl` ns seems to be missing</text>
  </message>
  <message conversation_id="1275">
    <ts>2019-04-25T06:55:45.044500</ts>
    <user>Clarine</user>
    <text>if you have a list ’(1 2 3), what’s the most efficient way of adding something to the front AND the end?</text>
  </message>
  <message conversation_id="1275">
    <ts>2019-04-25T06:55:59.044900</ts>
    <user>Clarine</user>
    <text>I don’t care what the resulting data structure is, as long as it’s seqable</text>
  </message>
  <message conversation_id="1275">
    <ts>2019-04-25T07:08:24.045100</ts>
    <user>Sixta</user>
    <text>I think if you have a list there's no efficient way to append to the end</text>
  </message>
  <message conversation_id="1275">
    <ts>2019-04-25T07:09:04.045300</ts>
    <user>Clarine</user>
    <text>right. would `(concat the-list '[the element])` make sense?</text>
  </message>
  <message conversation_id="1275">
    <ts>2019-04-25T07:11:54.045500</ts>
    <user>Sixta</user>
    <text>Does to me, yeah :)</text>
  </message>
  <message conversation_id="1275">
    <ts>2019-04-25T07:12:08.045700</ts>
    <user>Sixta</user>
    <text>I believe it's only on a branch</text>
  </message>
  <message conversation_id="1275">
    <ts>2019-04-25T07:13:33.045900</ts>
    <user>Mira</user>
    <text>cool, thanks!</text>
  </message>
  <message conversation_id="1276">
    <ts>2019-04-25T07:24:47.047200</ts>
    <user>Star</user>
    <text>what exactly is `Clojure contrib`?</text>
  </message>
  <message conversation_id="1276">
    <ts>2019-04-25T07:25:47.048200</ts>
    <user>Latonya</user>
    <text>A set of Clojure libraries, all with the same license and requirement that contributors sign the Clojure CA (Contribution Agreement), so that the code can be relicensed later if desired.</text>
  </message>
  <message conversation_id="1276">
    <ts>2019-04-25T07:27:58.048900</ts>
    <user>Latonya</user>
    <text>I believe this is a complete list of them: &lt;https://dev.clojure.org/jira/secure/BrowseProjects.jspa#all&gt;  If not, they are all under the &lt;https://github.com/clojure&gt; Github organization</text>
  </message>
  <message conversation_id="1277">
    <ts>2019-04-25T08:24:53.049700</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/community/contrib_libs&gt;</text>
  </message>
  <message conversation_id="1278">
    <ts>2019-04-25T11:14:16.054500</ts>
    <user>Alethea</user>
    <text>hey everyone, Im writing some tests to use with luminus

```
(deftest create-sales-batch
  (def req-opts {:headers {:authorization (:api-secret env)}})
  (def sales-batch [{:created-at     "2019-04-24T02:25:00+00:00"
                     :tag-id         "tagid"
                     :value-in-cents 1500
                     :external-id    "e2336ed3-d03f-484e-b034-8b7540cc05c1"
                     :employee       {:name "Antonio Carlos Jobim" :document "0000000000"}
                     :products       [{:name "3x_skol_lata" :value-in-cents 1500}]}
                    ])
  (deftest ok
    (testing "create recharge batch without any failed items"
      (let [response (http/POST app "/api/sales" sales-batch req-opts)]
        (is (= 200 (:status response)))
        (is (= {:failed-items []} (:body response))))))
```

my main problem here is that `(:api-secret env)` needs to be available, and `mount/start` lives in the `:each` fixture, so I wrapped everything iniside another test.. but `eastwood` is complaining
`def-in-def: There is a def of req-opts nested inside def create-sales-batch`

I dont want to repeat `(def req-opts {:headers {:authorization (:api-secret env)}})` in every test what should I do?</text>
  </message>
  <message conversation_id="1277">
    <ts>2019-04-25T11:18:09.054900</ts>
    <user>Rosaline</user>
    <text>Don't nest defs like that</text>
  </message>
  <message conversation_id="1277">
    <ts>2019-04-25T11:18:29.055600</ts>
    <user>Rosaline</user>
    <text>Def is always global</text>
  </message>
  <message conversation_id="1278">
    <ts>2019-04-25T11:23:52.055800</ts>
    <user>Mariela</user>
    <text>what stops you from using plain `let` for the bindings, and a plain `defn` for DRY?</text>
  </message>
  <message conversation_id="1278">
    <ts>2019-04-25T11:37:46.056100</ts>
    <user>Merna</user>
    <text>def is inevitable</text>
  </message>
  <message conversation_id="1278">
    <ts>2019-04-25T11:41:58.056400</ts>
    <user>Alethea</user>
    <text>let my that</text>
  </message>
  <message conversation_id="1279">
    <ts>2019-04-25T12:19:51.057000</ts>
    <user>Clarine</user>
    <text>you are also nesting deftests, which is equally “bad”, since it’s basically defining a global var with a function in it</text>
  </message>
  <message conversation_id="1277">
    <ts>2019-04-25T12:36:07.058100</ts>
    <user>Dann</user>
    <text>note that you can call functions created by defn that use `is` / `testing` from within deftest, because clojure.test works via dynamic scope</text>
  </message>
  <message conversation_id="1277">
    <ts>2019-04-25T12:36:45.058700</ts>
    <user>Dann</user>
    <text>those defs can exist outside the deftest, and the "ok" deftest can be a defn called from inside the test</text>
  </message>
  <message conversation_id="1277">
    <ts>2019-04-25T12:37:33.059500</ts>
    <user>Dann</user>
    <text>of course the contents of "OK" can just be expanded to be the body of create-sales-batch and that probably makes more sense here</text>
  </message>
  <message conversation_id="1277">
    <ts>2019-04-25T12:37:59.060000</ts>
    <user>Leda</user>
    <text>anyone who uses Swagger, there is any tool that helps with API testing using Swagger OAS 3.0 + Clojure with Ring?</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:15:39.060300</ts>
    <user>Alethea</user>
    <text>Luminus + Reitit?</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:16:12.060700</ts>
    <user>Leda</user>
    <text>i saw it, unfortunately i don't use Luminus</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:16:40.061000</ts>
    <user>Leda</user>
    <text>but no problem, i think i'll build something like that on my own</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:19:39.061600</ts>
    <user>Meagan</user>
    <text>AFAIK reitit and spec-tools allows you to easily produce a swagger spec for a service from Clojure code, but doesn't go the other way</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:22:48.061800</ts>
    <user>Alethea</user>
    <text>I think you can pick the desired middlewares individually, checkout the reitit repo for examples, they are not bounded to luminus</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:37:44.062200</ts>
    <user>Alethea</user>
    <text>what is the best way to remove this warning? `WARNING: any? already refers to: #'clojure.core/any? in namespace: monger.collection, being replaced by: #'monger.collection/any?`</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:38:10.062800</ts>
    <user>Alethea</user>
    <text>`(:refer-clojure :exclude [any?])` in everyfile that requires `monger.collection`?</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:38:46.063400</ts>
    <user>Becki</user>
    <text>the consumer namespaces aren't shadowing `any?` form core, monger itself is</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:39:19.064100</ts>
    <user>Alethea</user>
    <text>is there a solution besides forking monger?</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:39:25.064300</ts>
    <user>Lesa</user>
    <text>If I were using that lib, I would probably use a `:rename` in my require, I don't like shadowing core functions</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:40:03.064900</ts>
    <user>Becki</user>
    <text>its too late at that point</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:40:20.065300</ts>
    <user>Alethea</user>
    <text>I'll search about :rename, shadowing core functions sounds fishy to me</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:40:27.065500</ts>
    <user>Lesa</user>
    <text>ah, the warning is coming from within the lib?</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:40:48.065900</ts>
    <user>Becki</user>
    <text>yes. when you load that code, a namespace is shadowing `any?` from core. it doesn't matter what someone else calls it</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:40:54.066000</ts>
    <user>Isreal</user>
    <text>If only there were somebody working on a tool to help find these types of problems…</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:41:02.066400</ts>
    <user>Lesa</user>
    <text>gotcha, makes sense</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:42:38.066700</ts>
    <user>Becki</user>
    <text>it appears that this has been fixed: &lt;https://github.com/michaelklishin/monger/blob/master/src/clojure/monger/collection.clj#L53&gt;</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:42:40.066800</ts>
    <user>Alethea</user>
    <text>so there is nopthing to do about it?</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:43:00.067400</ts>
    <user>Alethea</user>
    <text>Ill try to update monger</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:45:54.068200</ts>
    <user>Alethea</user>
    <text>thx &lt;@Becki&gt;, that fixed the issue :slightly_smiling_face: but im curious, if they hadnt fix this there is no workaround it?</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T13:46:31.068700</ts>
    <user>Becki</user>
    <text>as far as i understand it yes. that code will cause a warning. the only way to fix it is to change the code</text>
  </message>
  <message conversation_id="1281">
    <ts>2019-04-25T14:04:33.068900</ts>
    <user>Latonya</user>
    <text>Like eastwood? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1281">
    <ts>2019-04-25T14:04:48.069400</ts>
    <user>Celestine</user>
    <text>(and it is only a warning -- it's not necessarily an actual problem)</text>
  </message>
  <message conversation_id="1281">
    <ts>2019-04-25T14:05:08.069500</ts>
    <user>Clarine</user>
    <text>The OP wrote:

&amp;gt; but `eastwood` is complaining</text>
  </message>
  <message conversation_id="1280">
    <ts>2019-04-25T14:05:14.069700</ts>
    <user>Latonya</user>
    <text>although I have no idea if it catches deftest inside of deftest</text>
  </message>
  <message conversation_id="1281">
    <ts>2019-04-25T14:05:28.069900</ts>
    <user>Latonya</user>
    <text>right, hence my smiley :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1281">
    <ts>2019-04-25T14:07:07.070100</ts>
    <user>Clarine</user>
    <text>hmm, clj-kondo does:
&lt;https://www.dropbox.com/s/shdjhtomuiuc9o2/Screenshot%202019-04-25%2020.06.41.png?dl=0&gt;</text>
  </message>
  <message conversation_id="1282">
    <ts>2019-04-25T14:39:07.070600</ts>
    <user>Valerie</user>
    <text>Guys, anyone know of any library to do JWT authentication with Clojure?</text>
  </message>
  <message conversation_id="1282">
    <ts>2019-04-25T14:44:28.071100</ts>
    <user>Roselia</user>
    <text>&lt;@Valerie&gt; &lt;https://www.bradcypert.com/using-json-web-tokens-with-clojure/&gt;</text>
  </message>
  <message conversation_id="1281">
    <ts>2019-04-25T15:59:41.072400</ts>
    <user>Isreal</user>
    <text>right that’s the tool I was thinking of! :simple_smile: </text>
  </message>
  <message conversation_id="1283">
    <ts>2019-04-25T17:29:24.073900</ts>
    <user>Sixta</user>
    <text>Is there a data structure which is suited to:
- Updating a singular entry by key
- Looping over / sorting items in arbitrary different ways at different times</text>
  </message>
  <message conversation_id="1283">
    <ts>2019-04-25T17:31:33.074400</ts>
    <user>Dann</user>
    <text>sounds like you want a hash-map plus N sorting functions?</text>
  </message>
  <message conversation_id="1283">
    <ts>2019-04-25T17:42:01.076300</ts>
    <user>Roselia</user>
    <text>&lt;@Sixta&gt; i guess you can store it as hash-map and use sort-by to get a sorted sequence</text>
  </message>
  <message conversation_id="1283">
    <ts>2019-04-25T17:55:13.077900</ts>
    <user>Sixta</user>
    <text>&lt;@Dann&gt; Sorta, I want to store like `{id {:extra "info"}}` but then do something like `shuffle` on that and have a sensible way to refer to all that.</text>
  </message>
  <message conversation_id="1284">
    <ts>2019-04-25T18:24:46.079400</ts>
    <user>Fredda</user>
    <text>You could keep a map of key-to-index kvs. Then add an ILookup to a vector thing that defers to the map for the key-index-value lookup. You'd have to update the key-to-index map though when the vector order changes</text>
  </message>
  <message conversation_id="1285">
    <ts>2019-04-25T23:02:38.082200</ts>
    <user>Loria</user>
    <text>what's the best data structure for expressing a bijective map? `A &amp;lt;-&amp;gt; B` where the elements within A and B are unique but could overlap</text>
  </message>
  <message conversation_id="1285">
    <ts>2019-04-25T23:05:08.084100</ts>
    <user>Loria</user>
    <text>I could maintain two separate hashmaps `A -&amp;gt; B` and `B -&amp;gt;A` which are inverse of each other, but that seems expensive and error prone.</text>
  </message>
  <message conversation_id="1285">
    <ts>2019-04-25T23:08:51.084300</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojuredocs.org/clojure.set/map-invert&gt;</text>
  </message>
  <message conversation_id="1285">
    <ts>2019-04-25T23:13:40.085200</ts>
    <user>Marlen</user>
    <text>I’m having some issue with the use of `pprint/cl-format` throwing an exception when run from an uberjar: `ClassCastException clojure.pprint.pfroxy$java.io.Writer$IDeref$PrettyFlush$4923d848 cannot be cast to clojure.pprint.PrettyFlush`; anyone run into this and know how to resolve? (pprint require’d via `(:require [clojure.pprint :as pprint])`)</text>
  </message>
  <message conversation_id="1285">
    <ts>2019-04-25T23:14:18.085700</ts>
    <user>Marlen</user>
    <text>uberjar is built with juxt/pack.alpha via deps.edn</text>
  </message>
  <message conversation_id="1285">
    <ts>2019-04-25T23:18:13.086000</ts>
    <user>Loria</user>
    <text>constantly calling `map-invert` on a large map doesn't sound good, I'm concerned about the performance because I'll be using both forward and backwards mappings in a tight inner loop</text>
  </message>
  <message conversation_id="1286">
    <ts>2019-04-25T23:49:17.086200</ts>
    <user>Elaine</user>
    <text>you can try `#(into % (map (juxt val key)) %)`
But if you need to access you data from many ways, may be a good idea use &lt;#C07V8N22C|datascript&gt;</text>
  </message>
  <message conversation_id="1285">
    <ts>2019-04-25T23:52:24.088600</ts>
    <user>Rosaline</user>
    <text>Looks vaguely familiar, likely something reloading causing Pretty Flush to be redefined, so it is a new different class that doesn't match the proxy class</text>
  </message>
  <message conversation_id="1286">
    <ts>2019-04-25T23:52:53.088700</ts>
    <user>Loria</user>
    <text>Thanks! A full database is perhaps too heavy for my needs, I'm just trying to express a bijective mapping / isomorphism between two sets</text>
  </message>
  <message conversation_id="1285">
    <ts>2019-04-25T23:54:05.089200</ts>
    <user>Loria</user>
    <text>It needs to be frequently updated in an inner loop, so I can't be constantly regenerating the inverse mapping, and  some sort of persistent data sharing would be good</text>
  </message>
  <message conversation_id="1286">
    <ts>2019-04-25T23:54:42.089400</ts>
    <user>Elaine</user>
    <text>"Full database is too heavy"
datascript subtitle:
`What if creating a database would be as cheap as creating a Hashmap?`
:stuck_out_tongue_closed_eyes:</text>
  </message>
  <message conversation_id="1286">
    <ts>2019-04-25T23:55:28.090200</ts>
    <user>Luke</user>
    <text>is there any library that when i add deps in lein project.clj and it auto reload it so that i needn’t restart the repl?</text>
  </message>
  <message conversation_id="1286">
    <ts>2019-04-25T23:55:48.090300</ts>
    <user>Loria</user>
    <text>oops! Will have to look more into it then - I've hardly dealt with databases before</text>
  </message>
  <message conversation_id="1286">
    <ts>2019-04-25T23:59:20.090500</ts>
    <user>Loria</user>
    <text>&lt;https://gist.github.com/semperos/3835417&gt;
Just found this implementation based on two synchronized maps :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1287">
    <ts>2019-04-26T00:25:47.090900</ts>
    <user>Marlen</user>
    <text>Seems it was related to some timestamp issue in uberjars; updating to a more recent `juxt/pack.alpha` seems to have fixed it</text>
  </message>
  <message conversation_id="1286">
    <ts>2019-04-26T00:31:57.091900</ts>
    <user>Loria</user>
    <text>you can use Pomegranate to hotload dependencies at the REPL</text>
  </message>
  <message conversation_id="1286">
    <ts>2019-04-26T00:32:45.092700</ts>
    <user>Loria</user>
    <text>not sure if there's any tool to pick them up automatically from the project.clj</text>
  </message>
  <message conversation_id="1288">
    <ts>2019-04-26T00:47:54.092800</ts>
    <user>Celestine</user>
    <text>I ran into a similar problem with `depstar` until I fixed in my fork. The obvious default way of building JAR files is wrong. Who knew? :disappointed:</text>
  </message>
  <message conversation_id="1288">
    <ts>2019-04-26T00:49:41.094600</ts>
    <user>Celestine</user>
    <text>&lt;@Luke&gt; Boot lets you add dependencies to the REPL while you're working (using Pomegranate under the hood I think). The Clojure CLI is built on `tools.deps` and there's a branch of that which supports an `add-lib` function to add new dependencies dynamically. I have an alias for that in my `deps.edn` file.</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T04:59:14.096500</ts>
    <user>Nisha</user>
    <text>Is there a way to start a program, like using `lein run`, but also start nrepl in the background?</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T04:59:29.097100</ts>
    <user>Nisha</user>
    <text>Something like &lt;https://github.com/jimbru/lein-repl-run&gt; does, but without a plugin.</text>
  </message>
  <message conversation_id="1286">
    <ts>2019-04-26T06:48:08.097800</ts>
    <user>Priscilla</user>
    <text>are there any cool clients built around datafy and nav yet? (besides rebl)</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:05:19.100100</ts>
    <user>Elaine</user>
    <text>&lt;@Nisha&gt; `lein run myns.dev`
where `src/myns/dev.clj` contains something like
```
(ns myns.dev
  (:require [nrepl.server :as nrepl]
            [myns.core :as core]))

(defn -main
  [&amp;amp; args]
  (nrepl/start-server 3333)
  (apply core/-main args))
```</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:06:55.101900</ts>
    <user>Elaine</user>
    <text>"Functions and data compose better then plugins and middleware"</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:07:02.102000</ts>
    <user>Nisha</user>
    <text>&lt;@Elaine&gt; Thanks! This is what I’m currently doing. Just curious if there’s a better way.</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:07:40.102900</ts>
    <user>Nisha</user>
    <text>I spent quite some time learning what `lein run` and `lein repl` do before getting anything done. :sweat_smile:</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:10:52.105400</ts>
    <user>Elaine</user>
    <text>&lt;@Nisha&gt; my `myns.dev` from the current project do:
- start a &lt;#C0K65B20P|pedestal&gt; server (main app)
- start a &lt;#C17JYSA3H|nrepl&gt; server
- run "yarn install"
- start a &lt;#C6N245JGG|shadow-cljs&gt; server
- start ~3 builds in shadow-cljs server
- run a "yarn watch" command "forever"</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:12:00.105900</ts>
    <user>Nisha</user>
    <text>I don’t see your code, but that’s a lot  lol</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:13:06.107100</ts>
    <user>Elaine</user>
    <text>that about: you will need to start/stop things, maybe in some order, and you dont need to develop a plugin to do it :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:14:13.107700</ts>
    <user>Nisha</user>
    <text>like if you don’t have a plugin, you just manually do it, right?</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:14:54.109000</ts>
    <user>Nisha</user>
    <text>Now I have a simple TUI app, and I just added a nrepl server to it. Maybe later I’ll have to add a repl too.</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:15:29.109700</ts>
    <user>Elaine</user>
    <text>I'm more about:If I can call `(lib/start)` I dont need to search a `lein-lib` plugin</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:17:26.110600</ts>
    <user>Elaine</user>
    <text>&lt;#C6QH853H8|tools-deps&gt;, the new `cli` to start clojure, it does not even have a plugin system</text>
  </message>
  <message conversation_id="1289">
    <ts>2019-04-26T07:17:42.111000</ts>
    <user>Nisha</user>
    <text>So you prefer clj over lein?</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T07:50:28.113600</ts>
    <user>Georgina</user>
    <text>I’m trying to use grpc and protobufs with `lein-protoc` and I do get the simplest hello world thing working.
I don’t understand how to include dependencies tho - our company protobufs use `com.google.api.grpc/google-apis-common-protos` for example and I can’t seem to include them for `lein-proto`</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T07:51:51.114400</ts>
    <user>Georgina</user>
    <text>There’s a &lt;https://github.com/LiaisonTechnologies/lein-protoc#usage&gt; `:proto-source-deps` vector but I don’t get how I point it to a jar</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T07:53:09.115700</ts>
    <user>Keeley</user>
    <text>I’m going through some clojure homework that is proving beyond me, would anybody be able to assist?</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T07:58:46.115800</ts>
    <user>Coralie</user>
    <text>looks like it tries to find the relevant jar among the classpath, for each of the given source-deps</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T07:59:15.116000</ts>
    <user>Coralie</user>
    <text>so I'd try to make sure your jar is in the classpath first (e.g. as an ordinary dep), then name it in source-deps</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:03:26.116900</ts>
    <user>Roselia</user>
    <text>&lt;@Keeley&gt; why don't you just ask an actual question about clojure so we can brainstorm it together?</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:03:43.117100</ts>
    <user>Keeley</user>
    <text>Sounds good</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:03:57.117500</ts>
    <user>Keeley</user>
    <text>This is in a Koans form</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:04:02.117700</ts>
    <user>Keeley</user>
    <text>given…</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:05:43.118400</ts>
    <user>Keeley</user>
    <text>```(defn empty-set
  "takes any input element and returns nil"
  [_] nil)

(defn singleton-set
  "takes an element and returns a fun-set containing
   just that element"
  [el1]
  (fn [el2]
    (when (= el2 el1) el2)))
```</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:06:21.118700</ts>
    <user>Keeley</user>
    <text>complete the following…</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:06:28.118900</ts>
    <user>Keeley</user>
    <text>```(defn union
  "takes two fun-sets and returns a set that is the set
   of all elements in either set1 or set2."
  [f-set1 f-set2]
  ;;TODO
  )```</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:06:59.119300</ts>
    <user>Keeley</user>
    <text>so first create two sets</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:07:49.120000</ts>
    <user>Keeley</user>
    <text>```(def f-set1 (singleton-set :happy))```</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:09:13.121000</ts>
    <user>Keeley</user>
    <text>```(def f-set2 (singleton-set :sad))```</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:10:49.121700</ts>
    <user>Keeley</user>
    <text>I tried ```(def u-set (singleton-set f-set1 f-set2))``` just to see what would happen</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:11:08.122200</ts>
    <user>Keeley</user>
    <text>got wrong number of arguments as expected</text>
  </message>
  <message conversation_id="1291">
    <ts>2019-04-26T08:12:13.122700</ts>
    <user>Roselia</user>
    <text>you implemented singleton-set function?</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:12:34.122900</ts>
    <user>Keeley</user>
    <text>yes</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:12:44.123200</ts>
    <user>Keeley</user>
    <text>see above</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:18:48.125000</ts>
    <user>Roselia</user>
    <text>&lt;@Keeley&gt; if i understand it correctly, singleton set can be described as `a = singleton set of a`</text>
  </message>
  <message conversation_id="1291">
    <ts>2019-04-26T08:19:11.125300</ts>
    <user>Roselia</user>
    <text>am i right?</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:21:16.125700</ts>
    <user>Keeley</user>
    <text>That sounds correct</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:21:28.126000</ts>
    <user>Roselia</user>
    <text>then implementation should be
```(defn singleton-set
  [x]
  (fn [] x))```</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:27:00.128600</ts>
    <user>Keeley</user>
    <text>If I interpret the function in the sample correctly, it will re-assign a new value but keep the original value if identical, which sounds unnecessary</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:27:04.128800</ts>
    <user>Keeley</user>
    <text>checking</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:29:50.129600</ts>
    <user>Roselia</user>
    <text>&lt;@Keeley&gt; well we describing singleton set, not a pair right?</text>
  </message>
  <message conversation_id="1291">
    <ts>2019-04-26T08:30:04.130100</ts>
    <user>Roselia</user>
    <text>pair must be λabf.fab</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:30:08.130200</ts>
    <user>Evonne</user>
    <text>No, the “fun set” idea is a function that returns a truthy value for elements that are members of the set.</text>
  </message>
  <message conversation_id="1291">
    <ts>2019-04-26T08:30:20.130600</ts>
    <user>Roselia</user>
    <text>oh</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:31:02.131500</ts>
    <user>Evonne</user>
    <text>so the union of two singleton sets should be a function that returns a truthy value if the given element is either a member of the first singleton set, or a member of the second.</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:35:06.133500</ts>
    <user>Evonne</user>
    <text>&lt;@Keeley&gt; You’re going to need to write a `defn` that returns an `fn`. The `fn` needs to take one element and return `nil` if the element is not a member of either singleton set, or the element itself as a “truthy” result, if it is in either set.</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:41:55.135700</ts>
    <user>Keeley</user>
    <text>That sounds like verification of contents in multiple sets,  But not the combining of two sets into a single set</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:42:00.135900</ts>
    <user>Keeley</user>
    <text>```"takes two fun-sets and returns a set that is the set
   of all elements in either set1 or set2."```</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:43:31.136600</ts>
    <user>Keeley</user>
    <text>So here is a contains for a single fun set</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:44:23.137300</ts>
    <user>Keeley</user>
    <text>```(defn f-contains?
  "takes an fun set and el and returns true only if that
   elements exists in the fun set else false"
  [f-set el]
    (= (nil? (f-set el)) false)
  )```</text>
  </message>
  <message conversation_id="1291">
    <ts>2019-04-26T08:45:53.137800</ts>
    <user>Roselia</user>
    <text>```
(defn empty-set
  "takes any input element and returns nil"
  [_] nil)

(defn singleton-set
  "takes an element and returns a fun-set containing
   just that element"
  [element]
  (fn [target]
    (when (= element target)
      target)))

(defn union
  "takes two fun-sets and returns a set that is the set
   of all elements in either set1 or set2."
  [x y]
  (fn [target]
    (or (x target)
        (y target))))
```</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:45:57.138200</ts>
    <user>Roselia</user>
    <text>like that i guess</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:46:18.138500</ts>
    <user>Becki</user>
    <text>the definition of a singleton set in this exercise is a membership function. In this exercise a set is merely a function that recognizes membership</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:54:01.139100</ts>
    <user>Keeley</user>
    <text>&lt;@Jada&gt; close</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T08:54:09.139500</ts>
    <user>Roselia</user>
    <text>what am i missing then</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:54:34.139900</ts>
    <user>Keeley</user>
    <text>need to pass false not false nil</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:54:43.140100</ts>
    <user>Keeley</user>
    <text>in test</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:55:09.140400</ts>
    <user>Roselia</user>
    <text>so separate nil and false</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T08:55:09.140500</ts>
    <user>Keeley</user>
    <text>```FAIL in (union-test) (core_test.clj:44)
true false sets
expected: (= false (u-set1 false))
  actual: (not (= false nil))```</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T09:00:21.141600</ts>
    <user>Keeley</user>
    <text>So that answer, using or, is there a book or site that goes over this kind of topic?  It doesn’t feel intuitive to me.</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T09:01:05.142200</ts>
    <user>Keeley</user>
    <text>I’d be happy to go over a reading assignment before the quiz.</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T09:01:32.142600</ts>
    <user>Becki</user>
    <text>Or can’t work here</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T09:01:36.142800</ts>
    <user>Roselia</user>
    <text>yeah</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T09:01:49.143200</ts>
    <user>Becki</user>
    <text>It prevents sets from having the value false in them</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T09:05:11.143600</ts>
    <user>Roselia</user>
    <text>```
(defn union
  [x y]
  (fn [target]
    (when (or (some? (x target))
              (some? (y target)))
      target)))
```</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T09:05:29.143900</ts>
    <user>Roselia</user>
    <text>how can we do it better?</text>
  </message>
  <message conversation_id="1290">
    <ts>2019-04-26T09:12:14.145400</ts>
    <user>Evonne</user>
    <text>&lt;@Keeley&gt; Ironically, I became familiar with this style of “set” programming by taking the “Functional Programming in Scala” course at Coursera.</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:12:26.145700</ts>
    <user>Roselia</user>
    <text>```
(defn union
  [x y]
  (fn [target]
    (if (and (nil? (x target))
             (nil? (y target)))
      nil target)))
```</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:13:50.146700</ts>
    <user>Roselia</user>
    <text>i'm out of options</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:14:58.147500</ts>
    <user>Roselia</user>
    <text>`when not and` also</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:15:02.147700</ts>
    <user>Becki</user>
    <text>```
(defn union
  [set1 set2]
  (fn [element]
    (if-some (set1 element)
      element
      (set2 element))))
```
is how i would do it</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:15:26.148200</ts>
    <user>Roselia</user>
    <text>wasn't aware of if-some great to know</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:15:32.148500</ts>
    <user>Becki</user>
    <text>i used it incorrectly though</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:15:51.149000</ts>
    <user>Becki</user>
    <text>its a binding one. so just use `(if (some? ..))`</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:16:18.149700</ts>
    <user>Becki</user>
    <text>my only thinking is if nil is an explicit case make it very clear</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:16:47.150300</ts>
    <user>Evonne</user>
    <text>If `set1` is a function (as opposed to being a clojure set), you don’t need `some?`. Just call the function.</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:18:00.151200</ts>
    <user>Becki</user>
    <text>need to watch for the case when the set contains `false`</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:18:21.151400</ts>
    <user>Becki</user>
    <text>which was the original failure</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:18:55.152100</ts>
    <user>Evonne</user>
    <text>Ah, I was just re-reading the test, that’s right</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:19:02.152400</ts>
    <user>Evonne</user>
    <text>The test results, that is</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:19:03.152500</ts>
    <user>Jasmine</user>
    <text>don't put logical false values in sets ;)</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:19:17.152800</ts>
    <user>Evonne</user>
    <text>lol</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:19:57.153500</ts>
    <user>Evonne</user>
    <text>`(if-not (nil? (set1 value)) ...`</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:22:05.154300</ts>
    <user>Evonne</user>
    <text>unit test is tricksy, my precious…</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:32:22.155300</ts>
    <user>Evonne</user>
    <text>Actually, `some?` is the better choice here. I keep thinking `some?` iterates over a collection, but it’s really just “not nil”.</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:33:39.155600</ts>
    <user>Roselia</user>
    <text>but i think if-not nil? is more describing, for a person who doesn't know some?</text>
  </message>
  <message conversation_id="1293">
    <ts>2019-04-26T09:35:01.156000</ts>
    <user>Roselia</user>
    <text>```
(defn union
  [set1 set2]
  (fn [x]
    (if (some? (set1 x))
      x (set2 x))))

(defn union
  [set1 set2]
  (fn [x]
    (if-not (nil? (set1 x))
      x (set2 x))))

(defn union
  [set1 set2]
  (fn [x]
    (when (or (some? (set1 x))
              (some? (set2 x)))
      x)))
```</text>
  </message>
  <message conversation_id="1293">
    <ts>2019-04-26T09:35:04.156200</ts>
    <user>Roselia</user>
    <text>all three for history</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:36:06.157600</ts>
    <user>Evonne</user>
    <text>Check those, though, I think you just want `(set2 x)` where you have `x (set2 x)`</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:36:25.158000</ts>
    <user>Evonne</user>
    <text>wait, no I’m reading that wrong</text>
  </message>
  <message conversation_id="1293">
    <ts>2019-04-26T09:36:30.158300</ts>
    <user>Roselia</user>
    <text>yeah we have two sets</text>
  </message>
  <message conversation_id="1293">
    <ts>2019-04-26T09:36:32.158400</ts>
    <user>Chas</user>
    <text>```(defn union [set1 set2] 
  (fn [v] 
    (if (nil? (set1 v))
      (set2 v) 
      v)))```</text>
  </message>
  <message conversation_id="1293">
    <ts>2019-04-26T09:36:37.158700</ts>
    <user>Chas</user>
    <text>does that work?</text>
  </message>
  <message conversation_id="1293">
    <ts>2019-04-26T09:36:43.158900</ts>
    <user>Evonne</user>
    <text>ever since I quit drinking coffee, I swear… :face_with_rolling_eyes:</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:37:11.159300</ts>
    <user>Evonne</user>
    <text>&lt;@Chas&gt; Yeah, that should work just fine</text>
  </message>
  <message conversation_id="1293">
    <ts>2019-04-26T09:38:02.159600</ts>
    <user>Roselia</user>
    <text>now i'm confused about (set2 v) being first form in if</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:41:50.161500</ts>
    <user>Evonne</user>
    <text>The trick is that each of your “fun-sets” should return nil if the target element is not in the set. So what happens if your set is a singleton set consisting of the value `false`?</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:42:30.162100</ts>
    <user>Evonne</user>
    <text>In that case, it should return `false` if you pass it `false`, meaning “The element `false` *IS* a member of this set.”</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:43:24.163400</ts>
    <user>Evonne</user>
    <text>which is confusing, because we naturally assume `false` means it’s _not_ a member.</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:44:01.164100</ts>
    <user>Roselia</user>
    <text>yeah now i get it</text>
  </message>
  <message conversation_id="1292">
    <ts>2019-04-26T09:44:09.164400</ts>
    <user>Roselia</user>
    <text>funny thing, like an optical illusion :smiley:</text>
  </message>
  <message conversation_id="1294">
    <ts>2019-04-26T10:20:26.165000</ts>
    <user>Elaine</user>
    <text>You don't need to prefer
Both have one optimal use-case
I deliver a product that my client require that `java -jar app.jar` will work, it's way easier to do with lein
But what I'm saying is that you dont need plugins.</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:20:47.165700</ts>
    <user>Nieves</user>
    <text>I think all these things comes from wide repeated suggestion in internet not to use `contains?`, cause it exists espesially  for such cases</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:33:51.166500</ts>
    <user>Emmy</user>
    <text>Is anyone able to explain this:

```
(defprotocol P
  (foo [this a]
       [this a b]))

(deftype T []
  P
  (foo [this a]
    (println "foo a"))
  P
  (foo [this a b]
    (println "foo a b")))

;; the-ns=&amp;gt; (foo (T.) 1 2)                                                     
;; foo a b
;; nil
;; the-ns=&amp;gt; (foo (T.) 1)                                                       
;; Execution error (AbstractMethodError) at kw-get/eval6029 (REPL:1).          
;; kw_get.T.foo(Ljava/lang/Object;)Ljava/lang/Object;
```</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:35:18.166800</ts>
    <user>Jasmine</user>
    <text>why are are you extending P twice instead of doing it once?</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:35:38.167100</ts>
    <user>Jasmine</user>
    <text>```(deftype T []
  P
  (foo [this a]
    (println "foo a"))
  (foo [this a b]
    (println "foo a b")))```</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:36:25.167500</ts>
    <user>Jasmine</user>
    <text>I think only the second of those was taking effect the way you had it written</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:43:09.167800</ts>
    <user>Emmy</user>
    <text>... :facepalm: thanks &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:43:16.168100</ts>
    <user>Emmy</user>
    <text>Misunderstood the syntax</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:44:49.169500</ts>
    <user>Emmy</user>
    <text>so presumably `deftype` stays on a given protocol until a new one is supplied?</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:48:17.169900</ts>
    <user>Emmy</user>
    <text>I mistakenly thought it was 1 pair of Protocol to method</text>
  </message>
  <message conversation_id="1295">
    <ts>2019-04-26T11:55:46.170200</ts>
    <user>Jasmine</user>
    <text>you can specify any number of methods under the protocol</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:09:17.175700</ts>
    <user>Marg</user>
    <text>I'm developing an application in which I need the user to provide mathematical formulae... I need to parse these formulae so they can be evaluated. Are there any libs doing something like that? So, I'd like to read some edn-string like:
```
{:vars [x y]
 :result (* x 5 (Math/sin (/ y 7)))}
```
(it can be infix notation as well, but just being able to read this in clojure would certainly be fine as well. I could use something like `eval`, but that's not very save :stuck_out_tongue:.
'parsing' it, would result in something like `(fn [{:keys [x y]}] (* x 5 (Math/sin (/ y 7))))`</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:09:45.176300</ts>
    <user>Marg</user>
    <text>Are there any existing 'math parsing' libraries?</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:10:55.177100</ts>
    <user>Jasmine</user>
    <text>seems like you have valid Clojure there - no need to "parse", just read</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:11:34.177900</ts>
    <user>Jasmine</user>
    <text>you could then write an "evaluator" that took a list and recursively applied the first op to the latter ops, but of course that's all eval is doing</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:12:11.178900</ts>
    <user>Dann</user>
    <text>if you want a whitelist, you could use a table ```
`{+ ~+ sin ~#(Math/sin %)...}``` and only accept symbol inputs with substitutions in the table
(edit - Math/sin isn't first class)</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:12:14.179100</ts>
    <user>Jasmine</user>
    <text>another way to go would be to rely on eval, but put your time into whitelisting</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:12:18.179300</ts>
    <user>Jasmine</user>
    <text>jinx</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:13:55.181200</ts>
    <user>Marg</user>
    <text>ok, let me try and see if I get somewhere. (Couldn't make it work now, but I might have done something wrong/weird :slightly_smiling_face: )</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:13:56.181300</ts>
    <user>Dann</user>
    <text>you could eval after the whitelisting, or even run the substitutions as an interpreter</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:14:36.181800</ts>
    <user>Marg</user>
    <text>&lt;@Dann&gt; what d'you mean with _run the substitutions as an interpreter_</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:14:59.182400</ts>
    <user>Dann</user>
    <text>walk the input, look up the thing in function position, call it with the args once all are simplified</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:15:14.183300</ts>
    <user>Jasmine</user>
    <text>ie, duplicate eval :)</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:15:14.183400</ts>
    <user>Dann</user>
    <text>and bail if you hit anything that isn't a number literal and isn't whitelisted</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:15:23.183700</ts>
    <user>Dann</user>
    <text>fair</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:15:35.184000</ts>
    <user>Marg</user>
    <text>:slightly_smiling_face:</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:15:57.184900</ts>
    <user>Loria</user>
    <text>&lt;https://github.com/rm-hull/infix/&gt; check this out, if you're looking for external libs</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:16:29.186000</ts>
    <user>Marg</user>
    <text>yeah, saw that one, was about to start trying it, but having infix wasn't the main goal :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:16:35.186200</ts>
    <user>Dann</user>
    <text>perhaps the most elegant thing is read the whole thing into lists of symbols/numbers, then tree walk and replace symbols / validate, then eval</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:17:08.186700</ts>
    <user>Dann</user>
    <text>the tree walk could just throw if it sees functions or vars that aren't allowed</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:18:08.187400</ts>
    <user>Dann</user>
    <text>or if you are OK with users hosing / abusing the machine (eg. it is their own machine) just eval :D</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:18:21.187700</ts>
    <user>Marg</user>
    <text>lol, well, the whole point was to avoid eval :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:22:34.189000</ts>
    <user>Alethea</user>
    <text>is there a way to run a fixture before ALL tests (not the one in current namespace) after ALL tests?
I need to spin up a few docker containers before the tests and shut them down afterwards, maybe I should use lein for it?</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:23:44.189500</ts>
    <user>Dann</user>
    <text>or write a clojure program that defines a middleware around clojure.test/run-tests</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:24:24.189700</ts>
    <user>Dann</user>
    <text>the amusing thing, is if we map from symbol to safe math op, it looks like we have single quote strings ```(def math-ops
  {'+ +'
   '- -'
   '* *'
   '/ /})```</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:25:08.190000</ts>
    <user>Dann</user>
    <text>(edit: /' doesn't exist)</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:29:28.190200</ts>
    <user>Jasmine</user>
    <text>you are inherently writing an expression evaluator. it's ok to use eval for that, this is like what a lisp is good for. :)</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:30:28.190400</ts>
    <user>Dann</user>
    <text>```(cmd)user=&amp;gt; (load-file "/tmp/mather.clj")
#'user/run-math
(ins)user=&amp;gt; (run-math "(+ 1 1)")
2
(ins)user=&amp;gt; (run-math "(+ (sin 1) 1)")
1.8414709848078965
(ins)user=&amp;gt; (run-math "(+ (System/exit 1) 1)")
Execution error (AssertionError) at user/whitelist (mather.clj:15).
Assert failed: the System/exit operation is not allowed
op
```</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:36:45.191000</ts>
    <user>Dann</user>
    <text>```(require '[clojure.edn :as edn]
         '[clojure.walk :as walk])

(def math-ops
  {'+ +'
   '- -'
   '* *'
   '/ /
   'sin #(Math/sin %)})

(defn whitelist
  [tree]
  (if (symbol? tree)
    (let [op (find math-ops tree)]
      (assert op (format "the %s operation is not allowed"
                         tree))
      (val op))
    tree))

(defn run-math
  [s]
  (-&amp;gt; s
      (edn/read-string)
      (-&amp;gt;&amp;gt; (walk/postwalk whitelist))
      (eval)))
```</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T15:45:57.191500</ts>
    <user>Marg</user>
    <text>something like this?
```


(defn calc
      [form vars]
      (let [ops-whitelist `{+ ~+ sin ~#(Math/sin %)}]
           (walk/postwalk
             (fn [calc]
                 (if (sequential? calc)
                   (if-let [f (ops-whitelist (first calc))]
                           (apply f (map #(get vars % %) (rest calc)))
                           (throw (new Exception (str  "Cannot perform operation: " (first calc)))))
                   calc))
             form)))
```
running
```
(calc `(+ "val1" 7 (sin 0.5)) {"val1" 5})
``` seems to work fine :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T15:46:54.191800</ts>
    <user>Marg</user>
    <text>ouch, naming, not really pretty (twice `calc`)</text>
  </message>
  <message conversation_id="1296">
    <ts>2019-04-26T15:51:25.192200</ts>
    <user>Loria</user>
    <text>here's one that doesn't rely on eval:
```
(defn eval-math [env expr]
  (let [oops (fn [msg x] (throw (IllegalArgumentException. (str msg x))))]
    (cond
      (list? expr)   (apply (or (math-ops (first expr))
                                (oops "Function not in whitelist: " (first expr)))
                       (map #(eval-math env %) (rest expr)))
      (symbol? expr) (or (env expr)
                         (oops "Undefined symbol: " expr))
      (number? expr) expr
      :else          (oops "Illegal value: " expr))))

(eval-math '{x 1 y 2}
  '(* x 5 (sin (/ y 7))))
;; =&amp;gt; 1.4092142606110496

```</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T15:56:44.192500</ts>
    <user>Dann</user>
    <text>I think the eval version is fine - the postwalk ensures the safety I think(?)</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T15:58:05.193800</ts>
    <user>Alethea</user>
    <text>im trying to put the current timestamp in a uberjar name, assuming I can run arbitrary clojure code inside project.clj (not sure its possible)

```
{:uberjar       {:omit-source    true
                   :aot            :all
                   :uberjar-name   (str "cohmeia_api_local_"
                                     (.format (java.text.SimpleDateFormat. "yyyy_MM_dd'_'HH_mm_ss")
                                       (.getTime (java.util.Calendar/getInstance))) ".jar")
                   :source-paths   ["env/prod/clj"]
                   :resource-paths ["env/prod/resources"]}
```
fails with `java.lang.ClassCastException: clojure.lang.PersistentList cannot be cast to java.lang.String`

Its possible to do this and am missing something or there is no way?</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T15:58:10.193900</ts>
    <user>Marg</user>
    <text>yeah... not sure how I would've done the eval thingy.</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T15:59:17.194500</ts>
    <user>Celestine</user>
    <text>In `project.clj` you can escape code with `~` to have it evaluated.</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T15:59:55.194900</ts>
    <user>Celestine</user>
    <text>so ```:uberjar-name ~(str "cohmeia..." ...)```</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T16:00:48.195100</ts>
    <user>Alethea</user>
    <text>thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1298">
    <ts>2019-04-26T16:29:49.195600</ts>
    <user>Dann</user>
    <text>one advantage(?) of the eval version is that you get hash-maps and vectors as functions, it would be good to get confirmation that whitelisting symbols is enough to make using eval safe here</text>
  </message>
  <message conversation_id="1298">
    <ts>2019-04-26T16:32:26.195800</ts>
    <user>Dann</user>
    <text>I posted a working example with eval / whitelisted symbols in the other thread (the one under you saying you wanted to avoid eval...)</text>
  </message>
  <message conversation_id="1299">
    <ts>2019-04-26T16:37:47.196000</ts>
    <user>Marg</user>
    <text>oh, cool, thx, I'll have a look!</text>
  </message>
  <message conversation_id="1299">
    <ts>2019-04-26T17:03:17.196200</ts>
    <user>Marg</user>
    <text>thx all, I have a few versions now :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T17:31:01.199400</ts>
    <user>Angelita</user>
    <text>So is it to better to do :use or to :require? Is use akin to :refer all?</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T17:36:49.200100</ts>
    <user>Florance</user>
    <text>`:require`, don’t use `:use`</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T17:40:18.200600</ts>
    <user>Mariela</user>
    <text>You can find other useful recomms here &lt;https://stuartsierra.com/2016/clojure-how-to-ns.html&gt;</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T17:56:46.202200</ts>
    <user>Angelita</user>
    <text>Ok, &lt;@Mariela&gt; will bookmark that site.</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T18:25:10.202800</ts>
    <user>Angelita</user>
    <text>That Stuart is a well of knowledge</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T19:50:54.206000</ts>
    <user>Fernande</user>
    <text>&lt;@Angelita&gt; if you haven't done so already, perhaps you will find grepping the clojure source for sierra useful some time :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1300">
    <ts>2019-04-26T20:23:21.206300</ts>
    <user>Madeleine</user>
    <text>Its better to use :refer :all mostly for conssistency</text>
  </message>
  <message conversation_id="1300">
    <ts>2019-04-26T20:24:02.207000</ts>
    <user>Madeleine</user>
    <text>And as a way to encourage not refering :all to begin with. But instead explicitly listing what to refer, and even better, not refering anything, just aliasing instead.</text>
  </message>
  <message conversation_id="1300">
    <ts>2019-04-26T20:26:24.207600</ts>
    <user>Madeleine</user>
    <text>But use still works. Its just that since require can now do everything and more that what use used to do, use is no longer needed.</text>
  </message>
  <message conversation_id="1297">
    <ts>2019-04-26T21:33:51.209400</ts>
    <user>Angelita</user>
    <text>&lt;@Fernande&gt; well, just checked GitHub. Man I really should pay more attention.</text>
  </message>
  <message conversation_id="1301">
    <ts>2019-04-27T06:00:10.211500</ts>
    <user>Yasmine</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="1301">
    <ts>2019-04-27T06:02:55.213200</ts>
    <user>Yasmine</user>
    <text>@here help me out , which is the best framework for web development in Clojure</text>
  </message>
  <message conversation_id="1301">
    <ts>2019-04-27T09:34:58.213900</ts>
    <user>Caitlyn</user>
    <text>&lt;@Yasmine&gt; I think ring is a typical starting point
&lt;https://github.com/ring-clojure/ring&gt;</text>
  </message>
  <message conversation_id="1301">
    <ts>2019-04-27T10:03:53.214600</ts>
    <user>Roselia</user>
    <text>&lt;@Yasmine&gt; if you are looking for framework, re-frame, om next, luminus, fulcro, pedestal for server side?</text>
  </message>
  <message conversation_id="1301">
    <ts>2019-04-27T10:09:20.215100</ts>
    <user>Yasmine</user>
    <text>Thank you guys </text>
  </message>
  <message conversation_id="1301">
    <ts>2019-04-27T10:14:13.216000</ts>
    <user>Roselia</user>
    <text>&lt;@Yasmine&gt; just remember there is no BEST in programming, everything has its strong and weak sides, you just need to choose the one that fits your task better.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T11:50:16.217200</ts>
    <user>Joye</user>
    <text>Hello. I started a project using a Leiningen template. The template has since been updated. Is there a way to incorporate template changes into an existing project?</text>
  </message>
  <message conversation_id="1301">
    <ts>2019-04-27T13:36:59.217800</ts>
    <user>Yasmine</user>
    <text>&lt;@Roselia&gt; that’s true </text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:03:54.220900</ts>
    <user>Brent</user>
    <text>`partial` or `#(... %)`? Is there a clear preference in the community for one or the other?
I kind of prefer `partial` (since `#(..)` don't nest and it is fewer weird characters) but it is much longer to type and anon. fn. is more flexible as the `%` can be placed anywhere, not just at the end. I believe people use `#(..)` much more, is that a correct observation?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:12:54.226000</ts>
    <user>Nieves</user>
    <text>As a haskeller in past, I was surprised how indirect is carryng in Clojure - in Haskell you can simply drop argumenst for this. But the same question about arguments order also exists (more `flip`-s is about it). And absence of `(* 10)` syntax also make code more verbose. I think you can use such hack for shorten type: `def p- partial` or use common reader macroses like `#(... % ...)`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:14:37.228500</ts>
    <user>Madeleine</user>
    <text>Either or really</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:16:02.230600</ts>
    <user>Veola</user>
    <text>I perfer `partial` over `#(...))` whenever possible. Less weird characters and less ambiguity. I would only use `#(...)` over it if I need to be more succinct in # of characters.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:16:51.231000</ts>
    <user>Madeleine</user>
    <text>I really wish one day #() could nest</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:17:03.231400</ts>
    <user>Madeleine</user>
    <text>Its one of those small quirks</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:17:19.232000</ts>
    <user>Madeleine</user>
    <text>I wonder why it can't nest actually</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:19:18.233800</ts>
    <user>Florance</user>
    <text>If you’re nesting anon functions it sounds like you should be calling `fn` (with a name! like `(fn my-fn-instead-of-partial [a b] (+ a b))` )</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:20:15.234100</ts>
    <user>Madeleine</user>
    <text>Why with name</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:20:25.234400</ts>
    <user>Madeleine</user>
    <text>I often don't need it named</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:20:29.234700</ts>
    <user>Madeleine</user>
    <text>That's the issue of fn</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:22:20.237000</ts>
    <user>Florance</user>
    <text>So that when going through a stack trace its not a gensym’ed name. It may seem verbose with 1 or 2 levels of nesting but i’ve seen those partials be passed around for DI (Not a pattern I like…) and its next to impossible to understand what function was *actually* called via the stacktrace if you don’t have a name.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:23:18.238800</ts>
    <user>Madeleine</user>
    <text>Hum, ya I guess for staxktrace maybe. But sometimes I'd for sure take the convenience over it</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:23:31.239200</ts>
    <user>Nieves</user>
    <text>About nested `#(...%...)` - you must have an ability to use argument of external function into internal - but with `%` or `%1` syntax it can not be realized</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:24:17.240500</ts>
    <user>Nieves</user>
    <text>How you would rewrite `(fn [x] (fn [y] (+ x y)))` ?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:24:40.241200</ts>
    <user>Madeleine</user>
    <text>Hum... Is that the only logic? I guess sometimes you need to close over the parent, but shadowing would be okay a lot of the time</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:26:02.242700</ts>
    <user>Madeleine</user>
    <text>I guess actually, I'm more hoping for a new form. It's a but embarrassing that I find Java's syntax better `(x -&amp;gt; y -&amp;gt; (+ x y))`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:26:37.243300</ts>
    <user>Florance</user>
    <text>I mean… you can write a macro for that exact syntax if you really want it.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:27:13.244200</ts>
    <user>Nieves</user>
    <text>Magic and power of Clojure macroses allows you to write any syntax you want I hope :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:27:45.245600</ts>
    <user>Madeleine</user>
    <text>Its not that I really want it. Its that I find #() is a little quirky. And I wouldn't mind a core improvement on it</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:27:51.245800</ts>
    <user>Nieves</user>
    <text>Oh, I type very slow - I follow answer above :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:28:00.246200</ts>
    <user>Madeleine</user>
    <text>I always have to explain #()</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:28:45.247600</ts>
    <user>Madeleine</user>
    <text>It has both implicit args, which is quirky, it has the issue that it always wrap the inside in a parenthesis so you can't do #("10") and it can't be nested</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:28:54.248000</ts>
    <user>Madeleine</user>
    <text>That's a lot of quirks</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:29:51.248900</ts>
    <user>Madeleine</user>
    <text>I mean, minor quirks</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:29:54.249100</ts>
    <user>Nieves</user>
    <text>As I know, `#` is a prefix of non-expandable reader macroses</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:29:57.249300</ts>
    <user>Madeleine</user>
    <text>But still</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:31:30.249900</ts>
    <user>Madeleine</user>
    <text>I don't know what would necessarily be better though.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:33:34.250600</ts>
    <user>Madeleine</user>
    <text>Maybe just `#(x y (+ x y))` and have it be nestable</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:34:06.251800</ts>
    <user>Madeleine</user>
    <text>Basically, #() would assume the last expression is the fn body and everything before are the symbol args</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:34:16.252100</ts>
    <user>Nieves</user>
    <text>:slightly_smiling_face: how deside it is one 2-arg lambda or 2 one arged?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:34:54.253200</ts>
    <user>Madeleine</user>
    <text>For two one arg you'd do `#(x #(y (+ x y))`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:35:24.253700</ts>
    <user>Nieves</user>
    <text>x can be binded global symbol :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:36:06.254800</ts>
    <user>Madeleine</user>
    <text>Ya, but so can it for `(fn[x] ...)`, so in this case it just shadows the global symbol</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:36:19.255000</ts>
    <user>Nieves</user>
    <text>Not of course</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:36:53.255600</ts>
    <user>Nieves</user>
    <text>in lambda calculus it called free or binded args</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:37:40.257000</ts>
    <user>Madeleine</user>
    <text>I guess I'm not following. How is it any different to `(fn[x] (fn[y] (+ x y))`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:37:41.257200</ts>
    <user>Nieves</user>
    <text>everything in vector after `fn` is binded</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:39:14.258200</ts>
    <user>Nieves</user>
    <text>`(def x partial) (apply #(x #(y (+ x y)) 33)`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:39:59.259000</ts>
    <user>Nieves</user>
    <text>and it must be as a (partial #(+ % ???) 33)</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:40:04.259400</ts>
    <user>Madeleine</user>
    <text>Hey that's neat !</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:41:14.261300</ts>
    <user>Nieves</user>
    <text>So, the problem is how to strong set symbols as an arguments of lambda, but not as an external symbols</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:41:26.261700</ts>
    <user>Madeleine</user>
    <text>But. I would literally just have it be a macro that expands to `(fn[x] (fn[y] (+ x y))`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:42:24.262900</ts>
    <user>Nieves</user>
    <text>You can write such macro. But it will reduce your capabilities for using external symbols</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:43:06.264500</ts>
    <user>Madeleine</user>
    <text>I don't think so, since the user picks the symbol names, they are in control, if they don't want to shadow, they just use another name</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:43:08.264700</ts>
    <user>Nieves</user>
    <text>On the other hand, you will know it as a feature, not a bug :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:43:32.265400</ts>
    <user>Madeleine</user>
    <text>I mean, you could expand it into gensymed symbols as well</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:43:39.265900</ts>
    <user>Madeleine</user>
    <text>Then you wouldn't be able to shsdow</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:43:42.266100</ts>
    <user>Madeleine</user>
    <text>shadow</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:43:45.266400</ts>
    <user>Nieves</user>
    <text>Stay on strong semantic, not weak conventions</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:43:59.266900</ts>
    <user>Madeleine</user>
    <text>Though I would find that surprising, since I'd expect it to shadow</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:44:27.267500</ts>
    <user>Madeleine</user>
    <text>So why doesn't fn has the same problem, I'm still not following?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:45:57.268600</ts>
    <user>Nieves</user>
    <text>cause fn have only way and ability to create a new local-meaning (how it say?) symbols</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:47:07.269800</ts>
    <user>Nieves</user>
    <text>`let` in Clojure is a spec form, but semantically it is a macro on lambda (and in Scheme it really is!)</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:48:23.271100</ts>
    <user>Nieves</user>
    <text>`(let [a 1 b 2 c 3] (+ a b c))` -&amp;gt; `((fn [a b c] (+ a b c)) 1 2 3)`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:49:20.272100</ts>
    <user>Nieves</user>
    <text>so, semantically speaking, only lambda-abstraction can insert new named args in combinators</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:51:21.272800</ts>
    <user>Nieves</user>
    <text>and of course, you can shadow external symbol in `fn`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:51:48.273900</ts>
    <user>Nieves</user>
    <text>but it is well controlled and known</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:51:51.274100</ts>
    <user>Madeleine</user>
    <text>What about `(let [a 1 b 2] (fn [a b] (+ a b)))`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:52:24.275000</ts>
    <user>Nieves</user>
    <text>it is a trivial shadowing I mentioned before :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:52:34.275400</ts>
    <user>Madeleine</user>
    <text>Right, so I'm just saying I'd like some syntax sugar over fn :yum:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:53:02.276500</ts>
    <user>Nieves</user>
    <text>what I wanna say - you can wrap `fn` in a macro</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:53:05.276800</ts>
    <user>Nieves</user>
    <text>But!</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:53:11.277200</ts>
    <user>Madeleine</user>
    <text>`(let [a 1 b 2] #(a b (+ a b)))`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:54:41.279300</ts>
    <user>Madeleine</user>
    <text>Are you saying the evaluation order would be wrong with non reader macros, because let special form won't expect it?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:54:57.279700</ts>
    <user>Nieves</user>
    <text>maybe haskell way would be better  `(\ x y =&amp;gt; (+ x y))` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:55:09.280000</ts>
    <user>Nieves</user>
    <text>`\` - is a real macro!</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:55:30.280800</ts>
    <user>Nieves</user>
    <text>`#` already used by reader special cases</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:56:23.282400</ts>
    <user>Madeleine</user>
    <text>Ya, it's too late for #. But I wish it worked as I wrote it. Maybe adding #f(x y (+ x y))</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:56:46.282900</ts>
    <user>Madeleine</user>
    <text>Or even #fn(x y (+ x y))</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:57:13.284100</ts>
    <user>Madeleine</user>
    <text>Haskell way isn't bad either, just doesn't seem as consistent with the rest of Clojure's syntax</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:57:19.284300</ts>
    <user>Nieves</user>
    <text>and now it is time to main question - is it so far from current `fn` syntax?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:57:26.284500</ts>
    <user>Nieves</user>
    <text>:slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:58:32.286300</ts>
    <user>Nieves</user>
    <text>`#fn(x y (+ x y))` or `(fn [x y] (+ x y))`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:58:36.286400</ts>
    <user>Madeleine</user>
    <text>```
(fn [x y] (+ x y))
#fn(x y (+ x y))
```</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:58:52.286600</ts>
    <user>Madeleine</user>
    <text>:drooling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:59:19.287300</ts>
    <user>Nieves</user>
    <text>(not every time I type slower :joy:)</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:59:19.287400</ts>
    <user>Madeleine</user>
    <text>Guess not</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:59:25.287700</ts>
    <user>Florance</user>
    <text>:slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T16:59:34.288000</ts>
    <user>Madeleine</user>
    <text>Though I do find it visually less distracting</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:00:35.288900</ts>
    <user>Madeleine</user>
    <text>But ya, ideally it would have been how `#` worked</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:00:53.289200</ts>
    <user>Madeleine</user>
    <text>I think you could still do it</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:01:29.290200</ts>
    <user>Madeleine</user>
    <text>You could have it that when there is no % or %n inside #, it assumes to be #(params form)</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:01:58.290500</ts>
    <user>Florance</user>
    <text>But then there is magic.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:02:12.290700</ts>
    <user>Florance</user>
    <text>and syntax.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:02:45.292000</ts>
    <user>Madeleine</user>
    <text>I guess this would be an issue: `#(+ 1 2)`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:02:46.292100</ts>
    <user>Florance</user>
    <text>And every time I would look at an anonymous fn I’d have to remember and think about if the magic is happening there or not.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:03:46.294000</ts>
    <user>Nieves</user>
    <text>but now `#(+ 1 2)` is a normal non-arged lambda</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:04:06.294800</ts>
    <user>Madeleine</user>
    <text>You think? Okay, let's say I create #f and these are example usage:

```
#f(a b (+ a b))
#f(+ 1 %)
#f(+ %1 %2)
```

You'd find that confusing?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:05:32.295300</ts>
    <user>Nieves</user>
    <text>```
(#(+ 1 2))
=&amp;gt; 3
```</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:05:59.296400</ts>
    <user>Madeleine</user>
    <text>Ya, extending # wouldn't work, we'd break lambda of no args</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:07:35.298800</ts>
    <user>Nieves</user>
    <text>&lt;@Madeleine&gt; can I suggest a little tweak? :slightly_smiling_face: `#f(a b (+ a b))` -&amp;gt; `(\ a b (+ a b))`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:08:01.299600</ts>
    <user>Nieves</user>
    <text>destruction will breaking, but other will work :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:08:24.300400</ts>
    <user>Florance</user>
    <text>```
#f(a b (+ a b)) =&amp;gt; (fn [a b] (+ a b)) ;; cost: is wrapping a and b in a vector
#f(+ 1 %) =&amp;gt; #(+ 1 %) ;; cost: an extra character
#f(+ %1 %2) =&amp;gt; #(+ %1 %2) ;; cost: an extra character.
```</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:08:34.300700</ts>
    <user>Madeleine</user>
    <text>Ya, I guess that could work as well.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:09:10.301700</ts>
    <user>Madeleine</user>
    <text>So the cost I see isn't how many chars to type</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:09:32.302400</ts>
    <user>Madeleine</user>
    <text>But how visually non distracting it could be</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:09:44.302900</ts>
    <user>Nieves</user>
    <text>and as I already mentioned - do not forget about magic distraction syntax in `fn` - macro :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:10:05.303900</ts>
    <user>Madeleine</user>
    <text>Now that I think about it though, it seems what I'm really asking for is named arguments inside # and thus the ability to nest it.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:10:30.304500</ts>
    <user>Madeleine</user>
    <text>Maybe just `#(+ %a %b)`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:10:48.305200</ts>
    <user>Nieves</user>
    <text>Looks like so</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:11:13.306500</ts>
    <user>Madeleine</user>
    <text>Ya. That would satisfy my use case, would be even better, since now it's actually 50% shorter as well</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:11:46.307300</ts>
    <user>Nieves</user>
    <text>and this is exactly the same i talked about several types above - strong splitting internal args from external symbols</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:12:12.308000</ts>
    <user>Madeleine</user>
    <text>Oh, that's what you meant?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:12:32.308900</ts>
    <user>Nieves</user>
    <text>and you still can write a macro and your dsl syntax for it</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:12:44.309500</ts>
    <user>Nieves</user>
    <text>yes</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:12:45.309600</ts>
    <user>Madeleine</user>
    <text>I mean, someone could do `(let [%1 1 %2 2] #(+ %1 %2))` no? Though unlikely</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:13:50.310400</ts>
    <user>Nieves</user>
    <text>`%` prefix with number suffix now used for it in `#` - style lambdas</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:14:52.311100</ts>
    <user>Nieves</user>
    <text>you can choose another convention - but you have to choose any one</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:16:15.312400</ts>
    <user>Madeleine</user>
    <text>Wonder if Rich Hickey would approve a patch to add support for `#(+ %a %b)` hehe. Probably not</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:16:39.312900</ts>
    <user>Nieves</user>
    <text>I dont think so optimistic :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:16:48.313100</ts>
    <user>Nieves</user>
    <text>But!</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:17:20.313800</ts>
    <user>Nieves</user>
    <text>Your can write your own .clj code preprocessor!</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:18:06.314500</ts>
    <user>Madeleine</user>
    <text>Haha, ya. I'll probably just live with (fn[a b] ...) for now :yum:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:19:16.315700</ts>
    <user>Nieves</user>
    <text>Lets go back to classic :joy:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:19:17.315800</ts>
    <user>Madeleine</user>
    <text>I think the only time I really need this is when I do a map in a map</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:19:39.316600</ts>
    <user>Madeleine</user>
    <text>And I feel, maybe there's just a whole better way to do what I'm trying to do</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:19:53.316900</ts>
    <user>Nieves</user>
    <text>I often was needed nested `#` lambdas</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:20:42.317900</ts>
    <user>Nieves</user>
    <text>and I had to choose which lambda make `#` external or internal :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:21:40.319600</ts>
    <user>Nieves</user>
    <text>for ex - update map value by function with nested map or filter</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:21:50.319900</ts>
    <user>Madeleine</user>
    <text>Yup</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:22:11.320900</ts>
    <user>Madeleine</user>
    <text>There's definitely many time where you need to nest, at least one level</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:22:33.321400</ts>
    <user>Nieves</user>
    <text>but distructing syntax in `fn` macro makes choice easier :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:22:53.321700</ts>
    <user>Madeleine</user>
    <text>Ya, maybe I should just stop using #(), and only use fn. Then I'm never accidentally nesting it and wondering why it throws exception</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:23:58.322400</ts>
    <user>Nieves</user>
    <text>Good that this exception throws at compile time!</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T17:24:06.322600</ts>
    <user>Nieves</user>
    <text>Not at runtime )</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T18:55:53.323600</ts>
    <user>Roselia</user>
    <text>&lt;@Nieves&gt; is that you who was asking a question about tail call recursion on fp discord?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T18:57:46.324600</ts>
    <user>Nieves</user>
    <text>yes, that was me, and I have same nickname on all messengers/forums.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T18:58:16.325200</ts>
    <user>Roselia</user>
    <text>yeah i thought so, just sent you an answer, if its still relevant</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T18:59:06.326200</ts>
    <user>Nieves</user>
    <text>thanks, but I already had a constructive discussion about it here</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T18:59:17.326500</ts>
    <user>Roselia</user>
    <text>great, np</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T19:02:05.328900</ts>
    <user>Nieves</user>
    <text>and I think I'l be rare visitor of discord and other channels - I have a limited amount of day time (only 24 hours :slightly_smiling_face: ) and multiple messengers wants more than this :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-27T19:02:34.329400</ts>
    <user>Roselia</user>
    <text>yeah, i would like to delete slack, but this community is too important for me</text>
  </message>
  <message conversation_id="1303">
    <ts>2019-04-28T01:52:22.329900</ts>
    <user>Georgina</user>
    <text>Thank you I will try that!</text>
  </message>
  <message conversation_id="1304">
    <ts>2019-04-28T03:14:17.330400</ts>
    <user>Johnathon</user>
    <text>i remember reading somewhere that anonymous functions end up being stored/cached in such a way that keeps them efficient when used more than once, say as an anonymous comparator. is that right?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T05:08:41.334100</ts>
    <user>Roselia</user>
    <text>&lt;@Johnathon&gt; right, functions is just a jvm object, you can store and invoke it, unless you  create many function instances in a loop.
In fact there is no difference between anonymous function and named function.
If i understand it correctly.
`(def fn-name (fn [x] x))`
equals to
`(defn fn-name [x] x)`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T05:11:26.334600</ts>
    <user>Mariela</user>
    <text>I also wondered this recently :slightly_smiling_face:

&lt;https://github.com/clojure-goes-fast/clj-java-decompiler&gt; answered, e.g. Clojure is smart enough make `fn`s once, in advance, rather than many, on-the-fly</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T05:11:49.335000</ts>
    <user>Roselia</user>
    <text>&lt;@Mariela&gt; in which case tho, in a loop?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T05:14:04.335300</ts>
    <user>Roselia</user>
    <text>(do
  (println (fn [x] x))
  (println (fn [x] x)))
creates two different objects obviously</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T05:14:37.335500</ts>
    <user>Roselia</user>
    <text>you must store function instance returned by `fn` somewhere, be it local binding or Var or even java reference type</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T05:22:29.336600</ts>
    <user>Mariela</user>
    <text>here's the decompilation of

```
(defn sample []
  (do
    (println (fn [x] x))
    (println (fn [x] x))))
```

-&amp;gt; &lt;https://gist.github.com/vemv/bcd6bb57861531b1b6b9995744d27776&gt;</text>
  </message>
  <message conversation_id="1305">
    <ts>2019-04-28T05:46:23.337900</ts>
    <user>Nieves</user>
    <text>It does not need to guess - just use `macroexpand` :slightly_smiling_face:
```
(macroexpand '(defn fn-name [x] x))
=&amp;gt; (def fn-name (clojure.core/fn ([x] x)))
```</text>
  </message>
  <message conversation_id="1305">
    <ts>2019-04-28T05:53:51.341400</ts>
    <user>Nieves</user>
    <text>and outside the loops each `fn` call seems to create a separate object, as shown in thread above and in another little example
```
(defn f [x] x)
(defn g [x] x)
(def h f)
[(= f g) (= f identity) (= f h)]
=&amp;gt; #'user/f
#'user/g
#'user/h
[false false true]
```
it seems that Clojure does not do optimization in this case, cause 1-st order objects may used as a different items</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:01:24.341600</ts>
    <user>Roselia</user>
    <text>&lt;@Mariela&gt; how you decompiled sample function, i can't make it work for some reason</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:01:43.341800</ts>
    <user>Roselia</user>
    <text>i mean how you called clj-java-decompiler exactly</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:03:11.342200</ts>
    <user>Roselia</user>
    <text>&lt;@Mariela&gt; its still created two classes for each function, instantiated and called both of them, no optimization there</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:03:35.342500</ts>
    <user>Roselia</user>
    <text>```
    public static Object invokeStatic() {
        ((IFn)const__0.getRawRoot()).invoke(new endpoint$sample$fn__528376());
        return ((IFn)const__0.getRawRoot()).invoke(new endpoint$sample$fn__528378());
}
```</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:37:31.343200</ts>
    <user>Mariela</user>
    <text>&amp;gt; its still created two classes for each function,

yeah, I don't expect Clojure to try comparing different `fn`s searching for equality

&amp;gt; instantiated

object creation and short-lived GC are extremely cheap AFAICT

the _classes_ are created once, statically, that was my point. Perhaps a naive compiler would create the classes in runtime</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:40:37.343400</ts>
    <user>Mariela</user>
    <text>&amp;gt; i mean how you called clj-java-decompiler exactly

plain usage, wrapped in `(with-out-str)`, using 0.2.1</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:40:57.343600</ts>
    <user>Roselia</user>
    <text>hmm</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:42:23.343800</ts>
    <user>Roselia</user>
    <text>```
(defn my-identity [x] x)
=&amp;gt; #'playsync.core/my-identity
(with-out-str (decompile (my-identity 5)))
=&amp;gt;
"
 // Decompiling class: cjd__init
 import clojure.lang.*;
 
 public class cjd__init
```</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:42:49.344000</ts>
    <user>Roselia</user>
    <text>it outputs cjd__init class</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:43:16.344200</ts>
    <user>Roselia</user>
    <text>or
```
(with-out-str (decompile (fn [] (my-identity 5))))
=&amp;gt;
"
 // Decompiling class: playsync/core$fn__13171
 package playsync;
 
 import clojure.lang.*;
 
 public final class core$fn__13171 extends AFunction
```</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:44:22.344400</ts>
    <user>Roselia</user>
    <text>but your version produced
endpoint$sample class</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:44:41.344700</ts>
    <user>Roselia</user>
    <text>where sample is a named function i guess</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:45:26.344900</ts>
    <user>Roselia</user>
    <text>i'm missing something here</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T06:56:19.345300</ts>
    <user>Mariela</user>
    <text>wrap the `defn` call with `decompile`</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T08:52:47.345800</ts>
    <user>Roselia</user>
    <text>great ty</text>
  </message>
  <message conversation_id="1306">
    <ts>2019-04-28T11:33:12.346800</ts>
    <user>Liliana</user>
    <text>I'm trying to use the clojure java api (for a ticket on java app, used by java users)
```
IFn fn = Clojure.var("clojure.core", "fn");
IFn vector = Clojure.var("clojure.core", "vector");
fn.invoke(vector.invoke(), null);
```
but I get
```
An exception occured while executing the Java class. Parameter declaration missing
```</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T11:38:30.347600</ts>
    <user>Liliana</user>
    <text>ah got it `fn.invoke(null, null, vector.invoke(), null)` the two first null's are probably the meta and optinal name.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T13:32:57.349100</ts>
    <user>Johnathon</user>
    <text>&lt;@Nieves&gt; &lt;@Roselia&gt; anonymous functions in loops was the reason i was asking. thanks for the clarification. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T13:48:19.350000</ts>
    <user>Roselia</user>
    <text>&lt;@Johnathon&gt; just create fn outside of a loop and you are set</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T13:55:02.351000</ts>
    <user>Johnathon</user>
    <text>yup, that's where i ended up. i was just curious from a lazy programmer's perspective.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T13:58:10.351100</ts>
    <user>Johnathon</user>
    <text>thanks &lt;@Mariela&gt;. just saw this thread. that's what i thought!</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T13:59:08.351300</ts>
    <user>Johnathon</user>
    <text>anonymous functions do not equal true when compared (of course), however they're reused under the hood</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:05:55.351500</ts>
    <user>Roselia</user>
    <text>&lt;@Johnathon&gt; no, two different(unequal) functions will be used independently</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:06:31.351700</ts>
    <user>Roselia</user>
    <text>or we don't understand each-other :smiley:</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:22:22.351900</ts>
    <user>Johnathon</user>
    <text>hmm. i'm trying out `clj-java-decompiler` but i get the following when i run `decompile`
```
Execution error (ClassNotFoundException) at jdk.internal.loader.BuiltinClassLoader/loadClass (BuiltinClassLoader.java:582).
sun.misc.URLClassPath
```</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:23:07.352100</ts>
    <user>Roselia</user>
    <text>&lt;@Johnathon&gt; try jdk8</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:27:46.354100</ts>
    <user>Johnathon</user>
    <text>okay i'll get around to installing jdk8 when i have some downtime :slightly_smiling_face: just reread the conversation between you and vemv and i understand now. separate objects but cheaply created and GC'ed? i'm happy to def functions when used often. i was just curious how it all worked underneath.</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:27:54.354400</ts>
    <user>Johnathon</user>
    <text>thanks for explaining</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:28:34.354800</ts>
    <user>Roselia</user>
    <text>yeah separate classes for each, but one instance per function</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:30:51.355800</ts>
    <user>Loria</user>
    <text>Now that Clojure 1.10 supports extending protocols via metadata, is there any reason to prefer attaching metadata to generic maps instead of creating new records for sets of keys corresponding to a domain object?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:32:24.356100</ts>
    <user>Clarine</user>
    <text>I can imagine the latter is still more performant?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:34:09.356400</ts>
    <user>Roselia</user>
    <text>```
(let [fx (fn [x] x)
      fy (fn [y] y)]
             (println (fx 5))
             (println (fx 5))
             (println (fy 10))
             (println (fy 10))
             (while nil
               (println (fy 10)))
```
```
 public static Object invokeStatic() {
        final Object fx = new core$fn__14873$fx__14874();
        final Object fy = new core$fn__14873$fy__14876();
        ((IFn)const__0.getRawRoot()).invoke(((IFn)fx).invoke(const__1));
        ((IFn)const__0.getRawRoot()).invoke(((IFn)fx).invoke(const__1));
        ((IFn)const__0.getRawRoot()).invoke(((IFn)fy).invoke(const__2));
        ((IFn)const__0.getRawRoot()).invoke(((IFn)fy).invoke(const__2));
        while (true) {
            final Boolean true = Boolean.TRUE;
            if (true == null) {
                break;
            }
            if (true == Boolean.FALSE) {
                break;
            }
            ((IFn)const__0.getRawRoot()).invoke(((IFn)fy).invoke(const__2));
        }
        return null;
    }
```</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:34:20.356700</ts>
    <user>Roselia</user>
    <text>as you can see only two objects are created one per function</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:34:47.357100</ts>
    <user>Loria</user>
    <text>I assume it is, haven't done any benchmarks</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:35:07.357500</ts>
    <user>Sixta</user>
    <text>&lt;https://github.com/puredanger/bench-proto&gt;</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:37:23.359300</ts>
    <user>Loria</user>
    <text>I'm wondering what are the use-cases for extending via metadata? Is it more for one-off uses where you want to glue things together without setting up records?</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:38:07.360100</ts>
    <user>Loria</user>
    <text>oh right, metadata can be attached to lists and vectors as well, can't use records for those</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:38:40.360400</ts>
    <user>Sixta</user>
    <text>very convenient for datafy and navable</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:39:04.360600</ts>
    <user>Shanelle</user>
    <text>&lt;http://vijaykiran.com/2019/04/defn-48-david-miller/&gt;</text>
  </message>
  <message conversation_id="1302">
    <ts>2019-04-28T14:39:50.360900</ts>
    <user>Clarine</user>
    <text>yeah, that episode rocked.</text>
  </message>
  <message conversation_id="1307">
    <ts>2019-04-28T15:45:48.362900</ts>
    <user>Stacee</user>
    <text>hi, so I have this collection. for each element, I map it with a function that produces a vec. I'd like to map every element of the coll then flatten/combine all the vecs together
I tried `(transduce (map mapping-fn) concat coll)` at first, but that gave me StackOverflowError for some reason. So now i have `(transduce (map mapping-fn) (completing (fn [acc next] (into acc next))) [] coll)`. is there a prettier way?</text>
  </message>
  <message conversation_id="1307">
    <ts>2019-04-28T15:46:19.363100</ts>
    <user>Celestine</user>
    <text>Sounds like you want `cat`?</text>
  </message>
  <message conversation_id="1307">
    <ts>2019-04-28T15:47:20.364100</ts>
    <user>Nieves</user>
    <text>why produce a vectors to then concat them? `(vec (mapcat .....))` does not work?</text>
  </message>
  <message conversation_id="1307">
    <ts>2019-04-28T15:48:28.364700</ts>
    <user>Stacee</user>
    <text>oh nice, mapcat is what I want. it's a transducer too</text>
  </message>
  <message conversation_id="1307">
    <ts>2019-04-28T15:48:30.364800</ts>
    <user>Celestine</user>
    <text>&lt;@Stacee&gt; like this ```(into [] (comp (map mapping-fn) cat) coll)```</text>
  </message>
  <message conversation_id="1307">
    <ts>2019-04-28T15:48:38.365000</ts>
    <user>Stacee</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1307">
    <ts>2019-04-28T15:49:31.365800</ts>
    <user>Celestine</user>
    <text>Yeah, `mapcat` as a transducer will work for this case. `cat` is useful if you have a more complex pipeline -- or the `cat`ting doesn't come after a `map`ping :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1307">
    <ts>2019-04-28T15:49:56.366100</ts>
    <user>Celestine</user>
    <text>```(into [] (mapcat mapping-fn) coll)```</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:07:59.367200</ts>
    <user>Angila</user>
    <text>Has anyone run across an error in core.async where it mysteriously tries to close a boolean?
```
Exception in thread "async-dispatch-49" java.lang.IllegalArgumentException: No implementation of method: :close! of protocol: #'clojure.core.async.impl.protocols/Channel found for class: java.lang.Boolean
```</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:08:35.367900</ts>
    <user>Angila</user>
    <text>I think something weird is going on, as I’m just opening a pipe between two channels I’ve created myself.</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:08:44.368200</ts>
    <user>Angila</user>
    <text>One of the channels has been added to a pub.</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:08:53.368500</ts>
    <user>Angila</user>
    <text>This seems to be enough to blow everything up.</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:17:31.369200</ts>
    <user>Angila</user>
    <text>Manually piping it with a go-loop works. Interesting, and bizarre…</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:20:23.370400</ts>
    <user>Elaine</user>
    <text>stop the repl, clean cache dirs, drink a coffee and try again?</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:20:28.370700</ts>
    <user>Angila</user>
    <text>Okay, this is just crazy. Copying the source code of pipe works, but calling it as a function doesn’t.</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:20:57.370800</ts>
    <user>Angila</user>
    <text>Good idea :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:56:53.371800</ts>
    <user>Angila</user>
    <text>Stopping the REPL and cleaning the cache solved the problem. Thanks for the reminder :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T18:57:23.372500</ts>
    <user>Angila</user>
    <text>Looks like it was just one of those weird bugs that crop up from time to time. Restarting the REPL and cleaning the cache fixed it.</text>
  </message>
  <message conversation_id="1309">
    <ts>2019-04-28T20:36:05.374800</ts>
    <user>Liliana</user>
    <text>I'm thinking if I've stumbled upon a bug, I've been having GC problems with Java-JNA, which seem to be because clojure hash-map assignments assign the original variable to a null.
As can be seen in this short screencast I did &lt;https://www.youtube.com/watch?v=A81I9fwV8AY&gt; it seems that by looking at the decompiled clojure class
```
    public static Object invokeStatic() {
        Object csnd = ((IFn)const__0.getRawRoot()).invoke();
        Object thread = ((IFn)const__1.getRawRoot()).invoke(null);
        ((IFn)const__2.getRawRoot()).invoke((Object)new bug$spawn_csound_client$fn__8111(csnd), (Object)const__3);
        ((IFn)const__4.getRawRoot()).invoke(csnd);
        ((IFn)const__5.getRawRoot()).invoke(csnd, (Object)new bug$spawn_csound_client$fn__8113());
        Object[] arrobject = new Object[10];
        arrobject[0] = const__6;
        arrobject[1] = csnd;
        arrobject[2] = const__7;
        Object object = thread;
        thread = null;
        arrobject[3] = new bug$spawn_csound_client$fn__8115(csnd, object);
        arrobject[4] = const__8;
        arrobject[5] = new bug$spawn_csound_client$fn__8120(csnd);
        arrobject[6] = const__9;
        arrobject[7] = new bug$spawn_csound_client$fn__8123(csnd);
        arrobject[8] = const__10;
        Object object2 = csnd;
        csnd = null;
        arrobject[9] = new bug$spawn_csound_client$fn__8125(object2);
        return RT.mapUniqueKeys((Object[])arrobject);
    }
```
that this `csnd = null;` defenitely shouldn't be there?
Now knowing this, I can prevent this, but it's one of those annoying bugs :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-28T21:06:35.377500</ts>
    <user>Jasmine</user>
    <text>I wouldn’t trust the decompiler, look at the actual bytecode. Clojure adds bytecode that clears the passed args to prevent head-holding. This is not representable in Java so the decompilation will typically look weird.</text>
  </message>
  <message conversation_id="1310">
    <ts>2019-04-29T06:27:37.380500</ts>
    <user>Bart</user>
    <text>trying to upgrade an older app from clojure 1.8.0 to 1.9.0, but running into missing dependencies on what I believe is `spec.alpha` and `core.specs.alpha`. basically `:cause Could not locate clojure/spec__init.class or clojure/spec.clj on classpath.` on build</text>
  </message>
  <message conversation_id="1310">
    <ts>2019-04-29T06:28:29.381000</ts>
    <user>Bart</user>
    <text>i do have several versions of both in my local repo</text>
  </message>
  <message conversation_id="1310">
    <ts>2019-04-29T07:22:44.382900</ts>
    <user>Elaine</user>
    <text>&lt;@Bart&gt; some dependency from your project need to be upgraded too.
clojure.spec.alpha was first released(as alpha) as `clojure.spec` then renamed to `clojure.spec.alpha`</text>
  </message>
  <message conversation_id="1311">
    <ts>2019-04-29T07:25:30.383200</ts>
    <user>Elaine</user>
    <text>probably `clojure.future.spec`</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-29T08:13:43.384600</ts>
    <user>Jasmine</user>
    <text>Clojure 1.9 depends on spec.alpha so shouldn’t need future spec</text>
  </message>
  <message conversation_id="1308">
    <ts>2019-04-29T08:14:18.385300</ts>
    <user>Jasmine</user>
    <text>You should get that automatically though with lein, etc</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:38:27.388400</ts>
    <user>Donita</user>
    <text>Morning Clojurists. I am wondering if it is possible to retrieve the value of a let bound symbol using its string name?
```(let [e :a] (some-fn "e"))```</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:40:34.388800</ts>
    <user>Jasmine</user>
    <text>that would be an unusual thing to do</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:40:58.389100</ts>
    <user>Donita</user>
    <text>lol ya</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:41:18.389500</ts>
    <user>Jasmine</user>
    <text>possible via macro invocation, but why?</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:43:40.391200</ts>
    <user>Donita</user>
    <text>Urg I am afraid its a long story involving a vector of keywords and symbols used with core match and some code I am trying to write tests for.</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:47:39.394200</ts>
    <user>Liliana</user>
    <text>As I used VisualVM, I was able to track down this GC error, it comes from the body.
```
(set-message-callback csnd (fn [attr msg] (print msg)))
```
refering to
```
(defn set-message-callback [^Csound instance callback]
  (let [msg-cb ^MessageCallback
        (reify MessageCallback
          (invoke [this inst
                   attr msg]
            (callback attr msg)))]
    (.setMessageCallback instance msg-cb)))
```
So nothing to do with this line that I commented in the video :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:47:41.394400</ts>
    <user>Donita</user>
    <text>Is suppose what I don't quite understand is where your symbols are defined when you use a let, and if there is a way to enumerate whats available in your context. I see ns-publics but that doesn't include let defined stuff.</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:49:15.395300</ts>
    <user>Liliana</user>
    <text>&lt;@Donita&gt; maybe you want to represent your data differently, maybe (let [e {:value :a :from "e"}]) or something</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:51:55.396400</ts>
    <user>Roslyn</user>
    <text>And here is a macro to get local bindings:
```
(defmacro local-context []
  (let [symbols (keys &amp;amp;env)]
    (zipmap (map (fn [sym] `(quote ~sym)) symbols) symbols)))

(let [[a b &amp;amp; rest] [1 2 3 4]]
  (local-context))
=&amp;gt; {vec__97005 [1 2 3 4]
    seq__97006 (3 4)
    first__97007 2
    a 1
    b 2
    rest (3 4)}
```</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:52:34.397200</ts>
    <user>Donita</user>
    <text>oh awesome &lt;@Roslyn&gt;</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:52:35.397300</ts>
    <user>Roslyn</user>
    <text>(keys in a map are symbols, not keywords in this case)</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:56:16.398400</ts>
    <user>Donita</user>
    <text>so &amp;amp;env  is a map that contains the symbols from a let - but available from within a macro</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T09:56:59.399100</ts>
    <user>Donita</user>
    <text>thats perfect for me</text>
  </message>
  <message conversation_id="1313">
    <ts>2019-04-29T09:59:45.399300</ts>
    <user>Lecia</user>
    <text>very good tip &lt;@Stephen&gt; thank you</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T10:01:17.399500</ts>
    <user>Stephen</user>
    <text>I used it to 'mock' a notification server (actually the mock worked better than the .not real version :))</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T10:04:37.400600</ts>
    <user>Donita</user>
    <text>thank you @vlaad, &lt;@Jasmine&gt; and &lt;@Liliana&gt; for taking time to answer my question - your help is much appreciated :wink:</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T10:10:47.401700</ts>
    <user>Roslyn</user>
    <text>it contains all available local bindings, not only from `let`, but also from `loop`, `fn` etc.</text>
  </message>
  <message conversation_id="1312">
    <ts>2019-04-29T10:12:18.402000</ts>
    <user>Roslyn</user>
    <text>```
((fn [a]
   (loop [b 1]
     (let [c 3]
       (local-context)))) 0)
=&amp;gt; {a 0, b 1, c 3}
```</text>
  </message>
  <message conversation_id="1314">
    <ts>2019-04-29T11:01:36.402100</ts>
    <user>Lecia</user>
    <text>:slightly_smiling_face: great, will give it a try. It is a swagger API so should do!</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:13:17.403200</ts>
    <user>Malik</user>
    <text>are records a popular feature?</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:13:53.403900</ts>
    <user>Malik</user>
    <text>I keep seeing "clojure just uses lists/vectors, maps, and sets and skips using types" but records seem like something more?</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:14:58.404200</ts>
    <user>Malik</user>
    <text>maybe that's a better question for the beginners channel</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:35:58.405800</ts>
    <user>Gilberto</user>
    <text>They're helpful as wrappers for stateful connections for isolating interfaces. An example would be a DB connection pool, wrapped in a record with a single field, implementing a high-level DB API in the form of a Protocol.

I use maps for regular and domain data, and write specs for those.</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:36:40.406400</ts>
    <user>Meagan</user>
    <text>I think the biggest thing is protocols are quite a bit faster than a map lookup</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:39:20.408100</ts>
    <user>Meagan</user>
    <text>so for paths that are hot, but still need the kind of dynamicity of maps, records can help optimize those paths without losing semantics of a map</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:40:31.409100</ts>
    <user>Meagan</user>
    <text>I think I remember someone saying on here that they were first introduced when exploring implementing the Clojure compiler in Clojure</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:44:45.412000</ts>
    <user>Celestine</user>
    <text>This is still fairly good advice &lt;https://cemerick.com/2011/07/05/flowchart-for-choosing-the-right-clojure-type-definition-form/&gt;</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:45:48.413200</ts>
    <user>Celestine</user>
    <text>&lt;@Malik&gt; Bottom line: use maps unless you have a good reason to use records :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:46:23.413400</ts>
    <user>Oscar</user>
    <text>I’m a fan of records because of the readability, generated code (e.g., creation fns), and protocol support. I use them all over, including for domain data. I use maps for intermediate or ad-hoc data. But you’re right in noticing that records have been de-emphasized and that’s only continuing</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:47:54.415500</ts>
    <user>Celestine</user>
    <text>Alex (Miller) has commented (several times, in several forums) that his book, Clojure Applied, used records a lot more heavily than he would do these days -- so, yes, definitely a de-emphasis over time. Part of the issue is that records don't support namespace-qualified keys and therefore don't really play nice with `clojure.spec`.</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:49:02.417700</ts>
    <user>Celestine</user>
    <text>Another issue that I've run into is that if you accidentally `dissoc` one of the record basis fields, it changes type to a map silently which can cause all sorts of weird, hard-to-debug breakage. So you have some fields you can `dissoc` and some that you can only `assoc` to `nil` instead.</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:49:16.418200</ts>
    <user>Meagan</user>
    <text>yeah I use maps for everything unless I need speed</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:49:37.419600</ts>
    <user>Oscar</user>
    <text>ew, didn’t know about the `dissoc`ing of a record field</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:49:43.420000</ts>
    <user>Meagan</user>
    <text>esp. now that you can extend-via-metadata, it's essentially a tradeoff of: namespaced keywords vs. speed</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:50:24.421500</ts>
    <user>Nieves</user>
    <text>Sometimes I want to have a criteria for splitting some values by type. It can be done by regular maps with special `:type` keys (bad solution), maps with metadata (better, but have some issues, but I choose this way often) and records - I think is it a good solution to add any type/meta labels to data</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:51:27.422900</ts>
    <user>Celestine</user>
    <text>My two uses of records are: where I need something map-like to participate in a protocol or where I need something map-like and speed is really important -- and I don't need namespace-qualified keys :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:51:53.423100</ts>
    <user>Oscar</user>
    <text>wait, so `extend-via-metadata` ~does~ requires runtime dispatch I guess?</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:52:05.423300</ts>
    <user>Meagan</user>
    <text>yeah</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:52:13.423900</ts>
    <user>Oscar</user>
    <text>gross</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:52:20.424200</ts>
    <user>Meagan</user>
    <text>it has to lookup metadata, then lookup the symbol in the metadata</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:53:12.425300</ts>
    <user>Celestine</user>
    <text>That's why it is opt in -- protocols have to declare that they can be extended to arbitrary objects via metadata.</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:53:36.426000</ts>
    <user>Celestine</user>
    <text>`datafy`/`nav` in Clojure 1.10 rely heavily on that.</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:54:03.427000</ts>
    <user>Meagan</user>
    <text>&lt;@Nieves&gt; i try really hard to namespace my keywords and let them quack appropriately :duck: by the time I want to add a `:type` key I start looking for a different way of modeling the information</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:54:09.427200</ts>
    <user>Celestine</user>
    <text>I noticed that the Component library also got an update recently to opt in to extension via metadata, which is really nice.</text>
  </message>
  <message conversation_id="1315">
    <ts>2019-04-29T19:56:30.428000</ts>
    <user>Nieves</user>
    <text>&lt;@Meagan&gt; yes, and types/records seems to be a good way of such different way of modeling I think</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T20:13:54.430100</ts>
    <user>Jenni</user>
    <text>if I dynamically load a clojure file, possibly reloading slightly changed versions of that file, is there going to be a multi-threading issue?
(specifically, I'm planning on having the file implement a defmulti function... and I will have multiple files with different implementations)</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T20:20:42.431000</ts>
    <user>Jasmine</user>
    <text>Defmulti extension is thread safe</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T20:20:44.431100</ts>
    <user>Dann</user>
    <text>watch out - defmulti is a no-op when reloading, unless you make an effort to clear out the old def</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T20:20:58.431800</ts>
    <user>Dann</user>
    <text>and you lose all defmethods for the the defmulti if you do that</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T20:21:31.432700</ts>
    <user>Jasmine</user>
    <text>Each extension drops the cache too, so better to do loads at the beginning if possible</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T21:45:34.432900</ts>
    <user>Jenni</user>
    <text>yeah, not possible :disappointed:</text>
  </message>
  <message conversation_id="1317">
    <ts>2019-04-29T21:45:47.433100</ts>
    <user>Jenni</user>
    <text>what cache?</text>
  </message>
  <message conversation_id="1317">
    <ts>2019-04-29T22:16:04.433500</ts>
    <user>Jasmine</user>
    <text>there is a cache of dispatch value to method impl</text>
  </message>
  <message conversation_id="1317">
    <ts>2019-04-29T22:16:41.434100</ts>
    <user>Jasmine</user>
    <text>when you add a new method extension, that invalidates all of those prior selections so cache is dumped</text>
  </message>
  <message conversation_id="1317">
    <ts>2019-04-29T22:17:25.434600</ts>
    <user>Jasmine</user>
    <text>if you're doing that a lot for some reason, you'll have worse performance for calls</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T23:00:59.435800</ts>
    <user>Jenni</user>
    <text>if i have a "base" namespace that i never reload &amp;amp; and that defines defmulti, then if i have defmethod in my reloadable namespace, that case is OK?</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T23:02:04.436200</ts>
    <user>Jenni</user>
    <text>Or maybe that's what you mean by extension ("defmethod")</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T23:03:31.437300</ts>
    <user>Jenni</user>
    <text>And by the way if there's a better way to resolve the function than to use "defmulti" let me know. Maybe I simply need to know what namespace is being loaded, and then expect it to have loaded a particularly named function? (a "main" so to speak)</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T23:10:09.437600</ts>
    <user>Rosaline</user>
    <text>there is resolve</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T23:11:16.438200</ts>
    <user>Rosaline</user>
    <text>```
user=&amp;gt; (doc resolve)
-------------------------
clojure.core/resolve
([sym] [env sym])
  same as (ns-resolve *ns* symbol) or (ns-resolve *ns* &amp;amp;env symbol)
nil
user=&amp;gt; (doc ns-resolve)
-------------------------
clojure.core/ns-resolve
([ns sym] [ns env sym])
  Returns the var or Class to which a symbol will be resolved in the
  namespace (unless found in the environment), else nil.  Note that
  if the symbol is fully qualified, the var/Class to which it resolves
  need not be present in the namespace.
nil
user=&amp;gt;
```</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T23:14:46.438700</ts>
    <user>Jenni</user>
    <text>OK, that would avoid any defmulti drawback i suppose. thx</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-29T23:33:06.439400</ts>
    <user>Celestine</user>
    <text>&lt;@Jenni&gt; If you're on Clojure 1.10, there's `requiring-resolve` that will also `require` the namespace if needed, in a thread safe manner.</text>
  </message>
  <message conversation_id="1318">
    <ts>2019-04-29T23:45:32.440700</ts>
    <user>Becki</user>
    <text>Are you constantly loading different files to redefine how the defmulti dispatches for the same value?</text>
  </message>
  <message conversation_id="1318">
    <ts>2019-04-30T02:39:58.444700</ts>
    <user>Wesley</user>
    <text>Late to the party comments about a conversation several hours ago: Maybe I'm weird, but I like records.  I have nothing against maps, and I used them like crazy, but if I have something that I think of as a fixed data structure, it's clearer if it's a record.  I love that Clojure has such natural support for records.  It's one of the great things about Clojure.  In addition, for certain kinds of interop, Java thinks records are Java classes (because they are), and the Java code you're working on can throw them around and so on, while you get the convenience of working with the records in Clojure.</text>
  </message>
  <message conversation_id="1318">
    <ts>2019-04-30T02:42:03.447500</ts>
    <user>Wesley</user>
    <text>Thanks &lt;@Celestine&gt; for mentioning &lt;https://cemerick.com/2011/07/05/flowchart-for-choosing-the-right-clojure-type-definition-form&gt; .  I had lost my links to it and was coming up blank in web searches.  My feeling is that this chart is a good heuristic.  Emerick knows a heck of a lot more than I do, but I think that the ins and outs of Clojure data structures for interop are just too difficult to summarize in a simple flowchart.  I have found that I had to ignore some of the advice in that chart.</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-30T06:13:17.453300</ts>
    <user>Nisha</user>
    <text>I’m needing an embedded scripting language (with Clojure syntax) for Clojure program, something like when you use lua or scheme to script c++ programs, but I didn’t find many useful libs for this, except &lt;http://github.com/benzap/eden|github.com/benzap/eden&gt;, which however has its own lua-ish syntax.
I guess that’s not how you do things in Clojure?
So how would you do embedded scripting in Clojure?</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-30T06:27:33.454200</ts>
    <user>Sixta</user>
    <text>The answer tends to depend on your security constraints. Who is providing this scripting data?</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-30T06:48:31.454800</ts>
    <user>Nisha</user>
    <text>Myself.</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-30T06:48:50.455100</ts>
    <user>Nisha</user>
    <text>So no security constraints.</text>
  </message>
  <message conversation_id="1319">
    <ts>2019-04-30T06:58:57.455800</ts>
    <user>Sixta</user>
    <text>`eval ` is probably okay for you then? :)</text>
  </message>
  <message conversation_id="1320">
    <ts>2019-04-30T08:05:48.456400</ts>
    <user>Roberto</user>
    <text>is there a way to know if i'm running in a repl or in a production environment?</text>
  </message>
  <message conversation_id="1320">
    <ts>2019-04-30T08:08:07.457000</ts>
    <user>Roslyn</user>
    <text>probably a lot of ways depending on how your dev env differs from prod env. maybe have a look at `(System/getProperty "user.dir")`?</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-30T08:24:35.457900</ts>
    <user>Nisha</user>
    <text>&lt;@Sixta&gt; And what should I use to have at least some isolation?</text>
  </message>
  <message conversation_id="1316">
    <ts>2019-04-30T08:30:41.458000</ts>
    <user>Sixta</user>
    <text>Clojail / security manager might be good</text>
  </message>
  <message conversation_id="1321">
    <ts>2019-04-30T11:28:29.458700</ts>
    <user>Lana</user>
    <text>I just use `eval` with some macros that set up a nice context for the code, and make certain values available as locals if they are mentioned in the code. I use RSyntaxtTextArea to give users a syntax-coloring editor (Swing) widget for the code, and offer HTML documentation of the semantics and values available for the type of code they are editing. It has worked out well, people are using it in big shows. &lt;https://github.com/Deep-Symmetry/beat-link-trigger#beat-link-trigger&gt;</text>
  </message>
  <message conversation_id="1321">
    <ts>2019-04-30T11:28:49.459000</ts>
    <user>Lana</user>
    <text>Here’s the section of the user guide that shows the expression editor I am talking about: &lt;https://deepsymmetry.org/beatlink/trigger/guide/beat-link-trigger/Expressions.html#editing-expressions&gt;</text>
  </message>
  <message conversation_id="1321">
    <ts>2019-04-30T11:30:48.459200</ts>
    <user>Lana</user>
    <text>The ability to do that was what made the whole project make sense. It’s the core super power that a Lisp gives me. :smile:</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:42:00.462300</ts>
    <user>Lesha</user>
    <text>Why does Clojure give back a double when you combine a BigDecimal and a double, like `(+ 2M 3.0)` is not `5M`, but `5.0`?</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:42:45.462800</ts>
    <user>Dann</user>
    <text>doubles are the cheaper thing to store, and no result could be more precise than a double</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:45:53.463100</ts>
    <user>Lesha</user>
    <text>&lt;@Dann&gt;Not sure I follow what you mean by "no result could be more precise than a double". See example below.</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:46:22.463700</ts>
    <user>Dann</user>
    <text>2.0 isn't precise, if you mean something more precise than a double, use a more precise type</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:46:42.464300</ts>
    <user>Lesha</user>
    <text>Right. I understand.</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:46:45.464500</ts>
    <user>Dann</user>
    <text>oh, you mean, which one wins...</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:47:20.465100</ts>
    <user>Dann</user>
    <text>I guess that's down to jvm method dispatch, and the intutive thing is for the method to be called on the first arg</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:50:32.465400</ts>
    <user>Dann</user>
    <text>I think this &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Numbers.java#L661&gt; vs. this &lt;https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Numbers.java#L983&gt; is the question here</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:51:38.466400</ts>
    <user>Nella</user>
    <text>I think it's lines 645 and 952 that are most relevant</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:51:54.466800</ts>
    <user>Nella</user>
    <text>when a bigdecimal and a double is used together, doubleops are used for the math</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:52:41.467200</ts>
    <user>Nella</user>
    <text>presumably because math can only be as precise as the least precise number you're using</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:53:50.468100</ts>
    <user>Dann</user>
    <text>~&lt;@Nella&gt; but if the first arg is a bigdecimal, the bigdecimal method is used~</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:55:31.470900</ts>
    <user>Nella</user>
    <text>```user=&amp;gt; (+ 2M 3.0)
5.0
user=&amp;gt; (+ 2.0 3M)
5.0```</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:55:51.471400</ts>
    <user>Rosaline</user>
    <text>like a million years ago I was writing a core.logic program that took akind of database of facts about numeric types, and operations on those types, and would generate a bunch of static methods, with the idea that you could use it to generate a replacement for clojure.lang.Numbers</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:56:35.472400</ts>
    <user>Rosaline</user>
    <text>and whoe floating point (both single and double precision) was represented, to get something that matched clojure.lang.Numbers is as a contagion</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:57:01.473100</ts>
    <user>Dann</user>
    <text>now I see that I misread the example, thanks</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:57:12.473500</ts>
    <user>Rosaline</user>
    <text>if you have an operation with inexact floating point numbers you get inexact floating point numbers back</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:58:29.473700</ts>
    <user>Rosaline</user>
    <text>&lt;https://github.com/hiredman/Archimedes/blob/master/src/Archimedes/bar.clj#L37-L40&gt;</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T18:58:40.474000</ts>
    <user>Becki</user>
    <text>great name for the project</text>
  </message>
  <message conversation_id="1322">
    <ts>2019-04-30T22:40:08.475100</ts>
    <user>Becki</user>
    <text>&lt;@Rosaline&gt; that is a really cool program </text>
  </message>
  <message conversation_id="1323">
    <ts>2019-04-30T23:13:14.476100</ts>
    <user>Antione</user>
    <text>&lt;@Rosaline&gt; should be knighted, IMHO.</text>
  </message>
  <message conversation_id="1324">
    <ts>2019-05-01T00:18:43.476300</ts>
    <user>Georgina</user>
    <text>It worked perfectly thanks again :smiley:</text>
  </message>
  <message conversation_id="1325">
    <ts>2019-05-01T03:12:49.482200</ts>
    <user>Velva</user>
    <text>Hi guys I hope you like to give minor style suggestions. What is clojure idiomatic to denote a slightly updated value? In Haskell, you usually use apostroph eg
```
let foo = [1, 2, 3]
     foo' = 0 : foo
```
but in clojure `'` is used to quote forms. What is a more idiomatic name for `updated-foo` here?
```
(let [foo '(1 2 3)
       updated-foo (conj foo 0)]
  updated-foo)
```</text>
  </message>
  <message conversation_id="1325">
    <ts>2019-05-01T03:14:37.483200</ts>
    <user>Tressa</user>
    <text>first that comes to mind is \* (as in let - let\*) but people use that for macro-wrapped functions so might be confusing</text>
  </message>
  <message conversation_id="1325">
    <ts>2019-05-01T03:19:54.484700</ts>
    <user>Velva</user>
    <text>You mean `let*`? Yes I've seen it some places but people do indeed find it confusing, also as `*foo*` is the convention for dynamic variables</text>
  </message>
  <message conversation_id="1325">
    <ts>2019-05-01T03:23:20.485400</ts>
    <user>Tressa</user>
    <text>you can use `'` i guess?
```
(let [foo 12
      foo' (+ foo 1)]
  foo')
=&amp;gt; 13
```</text>
  </message>
  <message conversation_id="1325">
    <ts>2019-05-01T03:24:11.485900</ts>
    <user>Velva</user>
    <text>Thats true</text>
  </message>
  <message conversation_id="1326">
    <ts>2019-05-01T12:19:27.492200</ts>
    <user>Otelia</user>
    <text>for cases like this i think it is common/idiomatic to use shadowing -- just reuse foo instead of foo'</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T13:32:27.492800</ts>
    <user>Dann</user>
    <text>suffixing with `'` is idiomatic</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T13:33:07.492900</ts>
    <user>Dann</user>
    <text>I've seen both, it's a thing various house styles disagree about in my experience</text>
  </message>
  <message conversation_id="1328">
    <ts>2019-05-01T14:20:41.495800</ts>
    <user>Danyell</user>
    <text>If I have a React element that sets up a `go` block, with a `loop` that listens on a channel, in my `will-mount` life cycle method; when that component is unmounted... does the go block still live in memory listening on that channel?</text>
  </message>
  <message conversation_id="1328">
    <ts>2019-05-01T14:21:26.496300</ts>
    <user>Danyell</user>
    <text>It seems that, that is the case... But I am not so sure..</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:23:39.496900</ts>
    <user>Dann</user>
    <text>the go block compiles to a field on the channel itself, if the channel goes out of scope the go block is freed too</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:24:10.497400</ts>
    <user>Dann</user>
    <text>if you hold onto the channel, whatever go block is parking on it is probably kept around</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:24:59.498100</ts>
    <user>Dann</user>
    <text>it sounds weird but it works out, if the channel is not visible in any live code, the go block can never wake up again, so it makes sense that it can be freed</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:25:29.498300</ts>
    <user>Danyell</user>
    <text>The channel never goes out of scope</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:25:38.498700</ts>
    <user>Danyell</user>
    <text>so that explains it</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:26:05.499200</ts>
    <user>Dann</user>
    <text>you can let the go block fall through, or let it park on something that will go out of scope...</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:26:28.499500</ts>
    <user>Danyell</user>
    <text>what do you mean by letting it fall through?</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:27:07.499900</ts>
    <user>Dann</user>
    <text>exiting from the end of the block without parking or looping</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:29:43.000700</ts>
    <user>Danyell</user>
    <text>Is there way I can have it stop listening or drop the block ?</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:30:36.001300</ts>
    <user>Dann</user>
    <text>there's idioms for this - eg. close the channel and write the go block such that if it gets a nil (channel closed) it exits</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:30:57.001800</ts>
    <user>Dann</user>
    <text>but there's no clean way to force the block to exit if it wasn't written to do so</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:33:44.002700</ts>
    <user>Danyell</user>
    <text>Is it possible to open up the channel again? Or do I have to make another call to chan?</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:34:37.002900</ts>
    <user>Dann</user>
    <text>channels can only be closed once</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:35:06.003700</ts>
    <user>Dann</user>
    <text>if you want to keep the channel, but tell a consumer to close, you could check for a special token like `::close`</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:35:44.004600</ts>
    <user>Danyell</user>
    <text>that sounds like its exactly what I need</text>
  </message>
  <message conversation_id="1327">
    <ts>2019-05-01T14:37:57.004900</ts>
    <user>Danyell</user>
    <text>Thanks &lt;@Dann&gt; :thumbsup:</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T19:59:19.006700</ts>
    <user>Meagan</user>
    <text>anyone know what dep to include if I want to use clojure.jdbc with mysql?</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:00:07.007200</ts>
    <user>Celestine</user>
    <text>&lt;@Meagan&gt; do you mean `clojure.java.jdbc`?</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:01:02.008500</ts>
    <user>Meagan</user>
    <text>well, I actually mean your `next.jdbc` lib :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:01:15.008800</ts>
    <user>Roselia</user>
    <text>&lt;@Dann&gt; can you explain semantics of ::keyword</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:01:46.009700</ts>
    <user>Meagan</user>
    <text>here's what I'm trying to do:
```
$ clojure -A:rebl:rebel -Sdeps '{mysql/mysql-connector-java {:mvn/version "5.1.6"}}'
[Rebel readline] Type :repl/help for online help info
user=&amp;gt; (require '[next.jdbc :as jdbc])
nil
user=&amp;gt; (def db {:dbtype "mysql" :dbname "content_service"})
#'user/db
user=&amp;gt; (def ds (jdbc/get-datasource db))
#'user/ds
user=&amp;gt; (jdbc/execute! ds "show tables")
Execution error (SQLException) at java.sql.DriverManager/getConnection (DriverManager.java:702).
No suitable driver found for jdbc:&lt;mysql://127.0.0.1:3306/content_service&gt;
```</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:01:46.009800</ts>
    <user>Jasmine</user>
    <text>:: means "keyword, autoresolved in the current namespace context"</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:01:49.009900</ts>
    <user>Dann</user>
    <text>it expands to a namespaced keyword in the current namespace</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:01:58.010200</ts>
    <user>Roselia</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:02:38.010500</ts>
    <user>Roselia</user>
    <text>ty</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:03:23.010800</ts>
    <user>Celestine</user>
    <text>Hmm, I would have expected that to work, but that's a pretty old MySQL driver.</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:03:31.011000</ts>
    <user>Celestine</user>
    <text>It's been tested against `mysql/mysql-connector-java {:mvn/version "5.1.41"}`</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:04:09.011200</ts>
    <user>Meagan</user>
    <text>oh, my `-Sdeps` isn't right</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:04:33.011400</ts>
    <user>Celestine</user>
    <text>Yeah, just noticed</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:04:38.011600</ts>
    <user>Celestine</user>
    <text>Missing `:deps`</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:09:37.011800</ts>
    <user>Meagan</user>
    <text>works great :slightly_smiling_face: thanks!</text>
  </message>
  <message conversation_id="1329">
    <ts>2019-05-01T20:14:22.012000</ts>
    <user>Celestine</user>
    <text>Best place to ask questions about `next.jdbc` -- or `clojure.java.jdbc` or databases in general -- is &lt;#C1Q164V29|sql&gt;</text>
  </message>
  <message conversation_id="1330">
    <ts>2019-05-01T22:01:26.013300</ts>
    <user>Fernande</user>
    <text>&lt;@Roselia&gt; fwiw, i have found the following page quite handy: &lt;https://clojure.org/guides/weird_characters#autoresolved_keys&gt;</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:52:42.015000</ts>
    <user>Jennie</user>
    <text>How to include a git repo in deps.edn which have java source. I am trying like this ```{:deps
 {org.clojure/data.csv {:git/url "&lt;https://github.com/clojure/data.csv.git&gt;"
                        :sha "e5beccad0bafdb8e78f19cba481d4ecef5fabf36"}}}``` but I am getting `ClassNotFoundException` for Java files. Any pointers or help is appreciated.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:54:17.016000</ts>
    <user>Celestine</user>
    <text>&lt;@Jennie&gt; Java has to be compiled first. You can't just pull in source files, unlike Clojure.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:55:03.016700</ts>
    <user>Jennie</user>
    <text>So it means I can't include Java in the same package/repo?</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:55:22.017300</ts>
    <user>Celestine</user>
    <text>&lt;@Jennie&gt; That repo does not have Java code in it so I'm not sure what you're asking/trying to do here.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:56:00.017900</ts>
    <user>Jennie</user>
    <text>Nvm, the above is just an example. Here is the repo &lt;https://github.com/gdrte/suricatta&gt;</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:56:33.018400</ts>
    <user>Jennie</user>
    <text>the error is `Syntax error (ClassNotFoundException) compiling reify* at (impl.clj:106:3). suricatta.impl.IParam`</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:57:35.019000</ts>
    <user>Jennie</user>
    <text>```  gdrte/suricatta {:git/url "&lt;https://github.com/gdrte/suricatta.git&gt;"
     :sha "9cc71345e79b72e3504c1c94a9ba76c2925be74f"}
```</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:57:47.019300</ts>
    <user>Celestine</user>
    <text>Right, you can't use Java source files with `clj`/`deps.edn`. They need to be compiled (via `javac`) first.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:58:08.019700</ts>
    <user>Jennie</user>
    <text>So, I can't do it one go, hmmmm.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T00:58:35.020200</ts>
    <user>Celestine</user>
    <text>You would need to compile, build, and publish your Java code as a JAR somewhere, and depend on that.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T01:00:05.021600</ts>
    <user>Jennie</user>
    <text>aah... actually I forked that project, and upgraded clojure and some other libs. I didn't tried to send a PR to original author. I thought clojure git deps will work for me without messing the artifactory id.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T01:01:29.022100</ts>
    <user>Jennie</user>
    <text>Thanks for the reply Sir.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T01:03:12.023000</ts>
    <user>Celestine</user>
    <text>For some situations, you can actually hack around this by shelling out and running a `javac ...` command line.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T01:03:48.023400</ts>
    <user>Jennie</user>
    <text>yeah, I will build it locally and include the jar</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T01:08:22.023800</ts>
    <user>Celestine</user>
    <text>You can add a JAR to the classpath as a `:local/root` dep.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T01:09:10.024200</ts>
    <user>Jennie</user>
    <text>I just did that. It worked. Thanks again.</text>
  </message>
  <message conversation_id="1331">
    <ts>2019-05-02T01:10:17.024900</ts>
    <user>Celestine</user>
    <text>It's really a good incentive to try to do everything in Clojure :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1332">
    <ts>2019-05-02T05:34:34.027500</ts>
    <user>Zona</user>
    <text>every week I get an email from the Rust team called "This Week in Rust", it's an update on news, jobs, calls for participation in open source projects, events and so on

is there an equivalent for Clojure?</text>
  </message>
  <message conversation_id="1333">
    <ts>2019-05-02T05:57:35.029600</ts>
    <user>Isreal</user>
    <text>Cherished Clojure weeklies are: Daniel Compton’s The REPL newsletter &lt;https://www.therepl.net/Newsletters/&gt; and Eric Normand’s &lt;http://PurelyFunctional.tv|PurelyFunctional.tv&gt; Newsletter &lt;https://purelyfunctional.tv/newsletter/&gt; </text>
  </message>
  <message conversation_id="1333">
    <ts>2019-05-02T05:59:22.030800</ts>
    <user>Isreal</user>
    <text>I also really like Alex Miller’s weekly update blog: &lt;http://insideclojure.org/&gt;</text>
  </message>
  <message conversation_id="1334">
    <ts>2019-05-02T07:48:36.034200</ts>
    <user>Cherise</user>
    <text>What’s up with this?

```
  (= 40.4 (float 40.4)) ;; =&amp;gt; false
  (= 47.5 (float 47.5)) ;; =&amp;gt; true
```</text>
  </message>
  <message conversation_id="1334">
    <ts>2019-05-02T07:53:16.035800</ts>
    <user>Alyce</user>
    <text>For me, it's the otherway round. Comparing precision on floats on the JVM, using the equals method, I suspect is the same issue when comparing floats on Java on the JVM. You're not sure on the precision that the JVM uses per call.</text>
  </message>
  <message conversation_id="1334">
    <ts>2019-05-02T07:53:45.036400</ts>
    <user>Alyce</user>
    <text>There's lots of results on google on comparing floats (on Java, but equality valid to Clojure)</text>
  </message>
  <message conversation_id="1334">
    <ts>2019-05-02T07:55:23.037300</ts>
    <user>Alyce</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1036&gt;</text>
  </message>
  <message conversation_id="1334">
    <ts>2019-05-02T07:55:57.037500</ts>
    <user>Alyce</user>
    <text>```
Rich Hickey added a comment - 05/Sep/13 8:27 AM

It is out of scope for Clojure to fix this for Java types Float/Double/BigInteger
```</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:05:09.039500</ts>
    <user>Danna</user>
    <text>I have a `com.cognitect.aws/glacier` question; I want to run `list-vaults` but when I run
```(aws/invoke dev/gl {:op :ListVaults
                    :request {:accountId "099465141348"
                              :apiVersion "2012-06-01"
                              }})```
I get
```=&amp;gt;
{:code "MissingParameterValueException",
 :message "Required parameter missing: API version",
 :type "Client",
 :cognitect.anomalies/category :cognitect.anomalies/incorrect}```</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:05:35.040000</ts>
    <user>Danna</user>
    <text>what is the secret sauce for getting the `apiVersion` accepted?</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:06:19.040700</ts>
    <user>Danna</user>
    <text>(I tried putting into ```(aws/client {:api :com.cognitect.aws/glacier
                     :version "2012-06-01"
                     :region :eu-west-1
...)``` but that didn't help either</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:13:11.041200</ts>
    <user>Marlyn</user>
    <text>&lt;@Danna&gt; turn on request validation</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:15:49.042500</ts>
    <user>Danna</user>
    <text>just with `(aws/validate-requests gl true)` you mean?</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:16:31.042700</ts>
    <user>Danna</user>
    <text>same error message ..?</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:17:48.043600</ts>
    <user>Marlyn</user>
    <text>Also, `(aws/doc client :ListVaults)`</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:18:13.044400</ts>
    <user>Marlyn</user>
    <text>Make sure the keywords you're providing are correct</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:18:30.044900</ts>
    <user>Marlyn</user>
    <text>Usually they are capitalized</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:19:07.045500</ts>
    <user>Danna</user>
    <text>yeah that doc does not talk about API versions at all</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:19:53.046200</ts>
    <user>Marlyn</user>
    <text>Have you tried omitting the arguments</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:20:07.046800</ts>
    <user>Marlyn</user>
    <text>Just empty map</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:20:23.047600</ts>
    <user>Danna</user>
    <text>yes so I get a helpful error message if I leave out the required `:accountId`</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:20:27.047800</ts>
    <user>Marlyn</user>
    <text>I've never seen an API that makes you send in the version</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:20:34.048000</ts>
    <user>Marlyn</user>
    <text>Ok</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:21:07.048600</ts>
    <user>Danna</user>
    <text>I think there might be a regression for the AWS glacier API floating around; but I'm not quite sure</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:21:26.049100</ts>
    <user>Danna</user>
    <text>these are all JSON apis at the AWS end of things aren't they</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:24:17.049600</ts>
    <user>Danna</user>
    <text>there's a ```x-amz-glacier-version: 2012-06-01``` header in some of the docs</text>
  </message>
  <message conversation_id="1335">
    <ts>2019-05-02T11:24:25.049800</ts>
    <user>Danna</user>
    <text>&lt;https://docs.aws.amazon.com/amazonglacier/latest/dev/api-error-responses.html&gt;</text>
  </message>
  <message conversation_id="1336">
    <ts>2019-05-02T11:54:39.052800</ts>
    <user>Jeannette</user>
    <text>does turning tuples into a map destroy information about order?</text>
  </message>
  <message conversation_id="1336">
    <ts>2019-05-02T11:59:51.053600</ts>
    <user>Yajaira</user>
    <text>&lt;@Jeannette&gt; Yes, maps do not guarantee order. If you need a sorted map I suggest looking at: &lt;http://clojuredocs.org/clojure.core/sorted-map&gt;</text>
  </message>
  <message conversation_id="1336">
    <ts>2019-05-02T12:00:03.053800</ts>
    <user>Yajaira</user>
    <text>And &lt;http://clojuredocs.org/clojure.core/sorted-map-by&gt;</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:51:02.054600</ts>
    <user>Emmy</user>
    <text>Is this a bug?
```user=&amp;gt; :0
:0
user=&amp;gt; ::0
:user/0
user=&amp;gt; (ns foo)
nil
foo=&amp;gt; (ns user)
nil
user=&amp;gt; (require '[foo])
nil
user=&amp;gt; ::foo/0
Syntax error reading source at (REPL:2:0).
Invalid token: ::foo/0
```</text>
  </message>
  <message conversation_id="1338">
    <ts>2019-05-02T12:52:10.055800</ts>
    <user>Dann</user>
    <text>:0 isn't meant to work, but happens to</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:52:17.056000</ts>
    <user>Rosaline</user>
    <text>that is actually a very complicated question connected to many mailing list posts, irc and slack discussions</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:52:26.056200</ts>
    <user>Willia</user>
    <text>`:foo/0` instead of `::foo/0` ? (already namespaced)</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:52:51.057200</ts>
    <user>Rosaline</user>
    <text>at one point `:0` was made not to work, and then that change was reverted</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:53:03.057900</ts>
    <user>Emmy</user>
    <text>because leading numbers are invalid identifiers?</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:53:14.058300</ts>
    <user>Rosaline</user>
    <text>which you might interpret as positive intent that `:0` is intended to work</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:54:32.059100</ts>
    <user>Emmy</user>
    <text>it's more that the autoresolving is the only one that doesn't work</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:54:34.059300</ts>
    <user>Rosaline</user>
    <text>but my advice would be to behave as if `:0` doesn't work</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:55:31.060200</ts>
    <user>Dann</user>
    <text>&lt;@Emmy&gt; :0 was never designed to work, a version of clojure existed where it worked anyway, it was kept that way. ::foo/0 never worked because the issue was understood before ::foo/bar existed</text>
  </message>
  <message conversation_id="1337">
    <ts>2019-05-02T12:58:39.060800</ts>
    <user>Emmy</user>
    <text>ok cool thanks</text>
  </message>
  <message conversation_id="1339">
    <ts>2019-05-02T17:59:06.062200</ts>
    <user>Della</user>
    <text>Could someone remind me, I think I remember seeing a fn named something like `requiring-resolve`. Where would I find this :thinking_face:</text>
  </message>
  <message conversation_id="1339">
    <ts>2019-05-02T18:01:53.062400</ts>
    <user>Dann</user>
    <text>clojure versions 1.10+</text>
  </message>
  <message conversation_id="1339">
    <ts>2019-05-02T18:04:00.063100</ts>
    <user>Della</user>
    <text>Okay, I’m on 1.10.0-alpha7. Is it in a specific ns? Intellisense is failing me…</text>
  </message>
  <message conversation_id="1339">
    <ts>2019-05-02T18:04:12.063400</ts>
    <user>Dann</user>
    <text>why use a 1.10 alpha?</text>
  </message>
  <message conversation_id="1339">
    <ts>2019-05-02T18:04:43.064000</ts>
    <user>Dann</user>
    <text>it's in clojure.core, I'm not sure if it was present in the 1.10 alphas or not, but it is present in the 1.10 release</text>
  </message>
  <message conversation_id="1339">
    <ts>2019-05-02T18:05:04.064400</ts>
    <user>Della</user>
    <text>I see. Just haven’t gotten around to changing that version string quite yet. Thank you!</text>
  </message>
  <message conversation_id="1339">
    <ts>2019-05-02T18:05:35.064700</ts>
    <user>Dann</user>
    <text>~oh, I might be wrong, it might be a 1.11 thing...~ - nope, definitely here in 1.10 ```$ clj
Clojure 1.10.0
(ins)user=&amp;gt; (requiring-resolve 'clojure.set/union)
#'clojure.set/union
```</text>
  </message>
  <message conversation_id="1339">
    <ts>2019-05-02T18:06:17.065100</ts>
    <user>Della</user>
    <text>Ah okay, that would at least explain why I can’t find it any of the usual channels</text>
  </message>
  <message conversation_id="1339">
    <ts>2019-05-02T18:08:10.065700</ts>
    <user>Della</user>
    <text>Yep, there it is. Thank you.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T18:23:36.066500</ts>
    <user>Jasmine</user>
    <text>It was added till very late in the release cycle </text>
  </message>
  <message conversation_id="1341">
    <ts>2019-05-02T19:47:42.066800</ts>
    <user>Celestine</user>
    <text>I think it was in one of the final Beta versions?</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:04:20.067300</ts>
    <user>Roselia</user>
    <text>lets vote what to read next joy of clojure 2nd or programming clojure 3rd ed?</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:06:06.067800</ts>
    <user>Celestine</user>
    <text>I voted for JoC, assuming you haven't read earlier editions of either.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:06:25.068000</ts>
    <user>Roselia</user>
    <text>right, i didn't</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:06:42.068200</ts>
    <user>Celestine</user>
    <text>JoC 1ed was my first Clojure book (but I had Lisp/FP background). Clojure in Action 1ed was my second Clojure book.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:07:30.068400</ts>
    <user>Roselia</user>
    <text>i have java(2 years) and common lisp(3 months + PCL book), 4 months of clojure background</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:07:49.068700</ts>
    <user>Celestine</user>
    <text>Back then, there weren't too many options :slightly_smiling_face: I loved Clojure Programming when that came out. Since then I've bought almost everything except Living Clojure and a bunch of the somewhat random Packt Publishing Clojure books (variable quality!).</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:08:09.069000</ts>
    <user>Celestine</user>
    <text>You'll love JoC then!</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:08:35.069200</ts>
    <user>Celestine</user>
    <text>And then maybe Clojure Applied? Or Programming Clojure 3ed.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:08:40.069400</ts>
    <user>Roselia</user>
    <text>or both :hugging_face:</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:09:34.069600</ts>
    <user>Celestine</user>
    <text>Getting Clojure is an interesting read to.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:10:27.069900</ts>
    <user>Celestine</user>
    <text>Clojure Cookbook too, although it's getting a bit long in the tooth (maybe there's a 2ed planned/in the works?).</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:11:41.070100</ts>
    <user>Roselia</user>
    <text>no idea</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:11:45.070300</ts>
    <user>Celestine</user>
    <text>Oh, apparently I _do_ have Living Clojure. It just isn't inside a folder like all my other O'Reilly books...</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:11:57.070500</ts>
    <user>Roselia</user>
    <text>you sort by publisher?</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:12:04.070700</ts>
    <user>Roselia</user>
    <text>i prefer by language \ field</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:13:19.070900</ts>
    <user>Celestine</user>
    <text>Several publisher auto-sync to Dropbox, so those are by publisher. That way I can read the PDFs on any device.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:15:54.071100</ts>
    <user>Celestine</user>
    <text>So I have 82 tech books by Pragmatic, O'Reilly, and Manning. And then maybe another 50 or so ebooks from other publishers.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:17:33.071300</ts>
    <user>Celestine</user>
    <text>(My OneDrive a/c has 127 PDFs but that includes technical papers, book previews, reference cards, and a variety of other non-tech-book things so it's hard to be sure)</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:17:43.071500</ts>
    <user>Roselia</user>
    <text>here we go
&lt;https://gyazo.com/c9649268a0ca6ae308f692ce57935160.png&gt;</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:17:48.071800</ts>
    <user>Roselia</user>
    <text>thats so cool, i dont have that much money yet :smiley: nor time</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:18:51.072300</ts>
    <user>Celestine</user>
    <text>Mostly time. I've been accruing tech books for decades.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:20:24.072500</ts>
    <user>Celestine</user>
    <text>Several publishers let you "register" your physical copy of a paper book and then you can d/l the ebook for it. But I still have a pretty massive paper library from early decades. Including classics like "A Microprogrammed Implementation of APL" and "Programming the 6502" :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:20:38.072700</ts>
    <user>Roselia</user>
    <text>thats really smart move</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:22:17.072900</ts>
    <user>Roselia</user>
    <text>&lt;@Celestine&gt; how fast do you read technical books? Like about something new.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:22:44.073200</ts>
    <user>Celestine</user>
    <text>I'm a speed reader so, very fast...</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:22:57.073400</ts>
    <user>Roselia</user>
    <text>I mean it takes me few days per chapter including practice, exaples and side sources like articles on the topic.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:24:23.073800</ts>
    <user>Celestine</user>
    <text>If I'm practicing alongside, that slows me down a bit. I think I got through Seven Languages in Seven Weeks, including all the exercises in less than 30 hours total. Maybe even close to half that? Can't remember.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:25:36.074000</ts>
    <user>Roselia</user>
    <text>So yeah, i'm about 5 times slower than that.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:28:30.074400</ts>
    <user>Celestine</user>
    <text>On average, I read about a page a minute. Seven Languages is just over 300 pages. Yeah, I must have gotten through that in a lot less than 30 hours, even with exercises :neutral_face: It's kind of a weird "skill". I was tested in kindergarten and they figured out I have some sort of semi-eidetic memory which means I don't read linearly -- I sort of "snapshot" blocks of text etc and then my brain somehow decodes them asynchronously.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:30:58.074600</ts>
    <user>Roselia</user>
    <text>or it's a magic and you are a wizard</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:31:33.074800</ts>
    <user>Roselia</user>
    <text>alright thank you Sean, time to enjoy the joy of clojure</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-02T20:31:38.075000</ts>
    <user>Roselia</user>
    <text>cya</text>
  </message>
  <message conversation_id="1342">
    <ts>2019-05-03T01:32:28.081700</ts>
    <user>Julianne</user>
    <text>Hi all, I am hitting a weird issue with core.spec when trying to add extra assertions to a `s/keys` spec using `s/and`.

I have been able to make a minimal example of the problem.

```
(s/def ::bar (s/or :string string?
                   :int int?))
(s/def ::foo (s/and (s/keys :req-un [::bar])
                    (fn [x]
                      (prn x)
                      true)))

(s/explain ::foo {:bar "bar"})
;;=&amp;gt; {:bar [:string "bar"]}
;;=&amp;gt; Success!

(s/explain ::foo {:bar 1})
;;=&amp;gt; {:bar [:int 1]}
;;=&amp;gt; Success!
```

You can see that the predicate after the `s/keys` spec now has the `:bar` value transformed to a pair by the `::bar` `s/or` spec. This is not what I expected.</text>
  </message>
  <message conversation_id="1340">
    <ts>2019-05-03T01:48:19.084500</ts>
    <user>Celestine</user>
    <text>&lt;@Julianne&gt; That's how `s/or` works.</text>
  </message>
  <message conversation_id="1342">
    <ts>2019-05-03T01:48:56.085400</ts>
    <user>Celestine</user>
    <text>It conforms the value into a data structure that shows _how_ it matched the spec.</text>
  </message>
  <message conversation_id="1342">
    <ts>2019-05-03T01:51:33.088200</ts>
    <user>Julianne</user>
    <text>thanks &lt;@Celestine&gt; I sort of understood that, I didn’t realise it got conformed and passed the conformed value through each predicate in the `s/and`.</text>
  </message>
  <message conversation_id="1342">
    <ts>2019-05-03T01:51:34.088300</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (require '[clojure.spec.alpha :as s])
nil
user=&amp;gt; (s/def ::bar (s/or :string string? :int int?))
:user/bar
user=&amp;gt; (s/conform ::bar 42)
[:int 42]
user=&amp;gt; (s/conform ::bar "42")
[:string "42"]
user=&amp;gt;                  ```</text>
  </message>
  <message conversation_id="1342">
    <ts>2019-05-03T01:52:09.089100</ts>
    <user>Celestine</user>
    <text>Yes, `s/and` flows values through so if something conforms a value, that is what's passed on to the next predicate.</text>
  </message>
  <message conversation_id="1342">
    <ts>2019-05-03T01:52:39.089700</ts>
    <user>Julianne</user>
    <text>ahhh, ok thanks I didn’t understand that part. Thanks!</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:32:00.091500</ts>
    <user>Eufemia</user>
    <text>hi, i can't see how read-string can possibly execute code without using the eval. (read-string "(+ 1 1)") evals to a list (+ 1 1). "(+ 1 1)" is the user input.</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:38:29.091900</ts>
    <user>Eufemia</user>
    <text>(read-string "#=(+ 2 3)") =&amp;gt; 5</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:39:08.092500</ts>
    <user>Eufemia</user>
    <text>could someone explain how this gets evaluated?</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:44:52.093600</ts>
    <user>Elayne</user>
    <text>&lt;@Eufemia&gt; I’m not sure I fully understand the question, but “#=” is the read-eval literal and calls `eval` here: &lt;https://github.com/clojure/tools.reader/blob/master/src/main/clojure/clojure/tools/reader.clj#L588&gt; more notes, &lt;https://github.com/clojure/tools.reader/blob/master/src/main/clojure/clojure/tools/reader.clj#L866&gt;</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:50:06.096300</ts>
    <user>Eufemia</user>
    <text>&lt;@Elayne&gt; thanks. read-string is called at runtime parse the this string and return a reader macro expresion. But arent macros expanded at compile time? I dont get how that parsed expression gets run</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:51:03.096900</ts>
    <user>Elayne</user>
    <text>&lt;@Eufemia&gt; reader macros aren’t the same as macros, they are handled at read-time</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:53:51.098000</ts>
    <user>Eufemia</user>
    <text>how many phases does the 'runtime' compile executable have then? read-time + eval-time?</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:56:44.099200</ts>
    <user>Elayne</user>
    <text>well, if you have `eval` then you have all the phases, no?</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:58:53.100300</ts>
    <user>Elayne</user>
    <text>maybe some of the info on this page will help  &lt;https://stackoverflow.com/questions/5669933/is-clojure-compiled-or-interpreted#5670203&gt;</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T04:59:34.100600</ts>
    <user>Elayne</user>
    <text>&amp;gt; the dynamic and interactive nature of Clojure that means you can invoke the compiler at run-time if you want to. This is all part of the Lisp “code is data” tradition.</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T05:07:12.100800</ts>
    <user>Eufemia</user>
    <text>thank you &lt;@Elayne&gt; i think i figured it out my doubt</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T05:14:38.101500</ts>
    <user>Sonny</user>
    <text>ls</text>
  </message>
  <message conversation_id="1343">
    <ts>2019-05-03T05:15:53.101700</ts>
    <user>Roberto</user>
    <text>is there a way to use a leiningen profile in a macro?</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T05:40:21.102400</ts>
    <user>Eufemia</user>
    <text>is there some doall + map macro? Similar to run!, but the return the collection?</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T05:45:08.102900</ts>
    <user>Fatima</user>
    <text>What are you trying to do?</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T05:46:07.103400</ts>
    <user>Eufemia</user>
    <text>`(doall (map #(..) col))`</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T05:46:36.104200</ts>
    <user>Eufemia</user>
    <text>if i didn't need the result, i could do `(run! #(...) col))` which is nicer</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T05:46:48.104500</ts>
    <user>Eufemia</user>
    <text>im looking if there is something similar</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T05:49:28.106200</ts>
    <user>Fatima</user>
    <text>One way is to use `mapv` instead of map. It’s eager. Another is to use transducer version `(into [] (map #(...)) coll)`</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T05:50:03.106600</ts>
    <user>Fatima</user>
    <text>Third would be to use `reduce` instead of `map`.</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T05:55:33.107800</ts>
    <user>Zona</user>
    <text>last time someone asked a similar question, I think the most Clojure-y answer was to use a transducer</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T05:59:56.109500</ts>
    <user>Fatima</user>
    <text>Heh, tried this out of curiosity and it works. You can use normal function composition.
```
user&amp;gt; (def doall-map (comp doall map))
#'user/doall-map
user&amp;gt; (doall-map #(or (println %) %) [1 2 3])
1
2
3
(1 2 3)
```</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T06:00:51.110100</ts>
    <user>Fatima</user>
    <text>This might have some serious caveats though, I’m not sure. Personally I like the transducer version most.</text>
  </message>
  <message conversation_id="1344">
    <ts>2019-05-03T06:01:02.110400</ts>
    <user>Fatima</user>
    <text>Depending on the situation of course.</text>
  </message>
  <message conversation_id="1345">
    <ts>2019-05-03T06:05:13.112200</ts>
    <user>Eufemia</user>
    <text>cool</text>
  </message>
  <message conversation_id="1345">
    <ts>2019-05-03T06:05:13.112500</ts>
    <user>Eufemia</user>
    <text>:slightly_smiling_face:</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:19:09.117600</ts>
    <user>Klara</user>
    <text>Hello, I’m used to the `cond` from Scheme, does the `cond` in Clojure support the `=&amp;gt;` syntax?</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:21:59.118100</ts>
    <user>Celestine</user>
    <text>&lt;@Klara&gt; I'm not familiar enough with Scheme to know what that syntax means -- could you explain?</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:22:21.118300</ts>
    <user>Klara</user>
    <text>like, in Scheme:
`(cond ((re-match ...) =&amp;gt; (lambda (match) ...)))`
`if-let` feels a bit like it, but it only allow one test</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:22:55.118900</ts>
    <user>Celestine</user>
    <text>Ah, take a look at `condp` and see if that's closer to what you're looking for...</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:22:56.119000</ts>
    <user>Klara</user>
    <text>I found &lt;https://github.com/Engelberg/better-cond&gt;, but I don’t wanna take on a library</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:23:55.119500</ts>
    <user>Klara</user>
    <text>yeah, i was looking at `condp`, but it doesn’t seem to capture the result from the test</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:25:20.119700</ts>
    <user>Celestine</user>
    <text>are you sure? `its result-fn, which must be a unary function, is called with the result of the predicate as its argument`</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:25:50.120000</ts>
    <user>Klara</user>
    <text>oh hmm</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:25:53.120200</ts>
    <user>Klara</user>
    <text>let me try</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:27:08.120700</ts>
    <user>Klara</user>
    <text>i want to access the result in the consequent part</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:27:30.121000</ts>
    <user>Celestine</user>
    <text>```(condp = 4
  2 :&amp;gt;&amp;gt; #(println '2 %)
  4 :&amp;gt;&amp;gt; #(println '4 %))``` prints `4 true`</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:27:37.121300</ts>
    <user>Klara</user>
    <text>oh oh</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:29:48.122400</ts>
    <user>Celestine</user>
    <text>BTW, it's better not to post the same question in multiple channels -- so folks in one channel don't have to spend time answering something that was already answered elsewhere.</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:31:10.122800</ts>
    <user>Celestine</user>
    <text>&lt;@Klara&gt; Did `condp` solve your needs?</text>
  </message>
  <message conversation_id="1346">
    <ts>2019-05-03T19:31:30.123200</ts>
    <user>Klara</user>
    <text>i’m gonna give it a try, thanks!</text>
  </message>
  <message conversation_id="1347">
    <ts>2019-05-04T11:21:46.125000</ts>
    <user>Klara</user>
    <text>I just wanna say, I’m really happy that `clojure.pprint/cl-format` exists, it’s a cool piece of work!</text>
  </message>
  <message conversation_id="1348">
    <ts>2019-05-04T12:14:12.125500</ts>
    <user>Karren</user>
    <text>Cool, didn't know that such a thing exists.
But be aware of &lt;https://dev.clojure.org/jira/browse/CLJ-1950&gt;</text>
  </message>
  <message conversation_id="1349">
    <ts>2019-05-04T13:38:50.126800</ts>
    <user>Eura</user>
    <text>hello,i am reading a spark book,and i am trying it with Clojure,everything is simple so far,i also saw the sparkling library,the question i have is this</text>
  </message>
  <message conversation_id="1349">
    <ts>2019-05-04T13:39:28.127300</ts>
    <user>Eura</user>
    <text>i can wrap select of spark to make the use more simple like this</text>
  </message>
  <message conversation_id="1349">
    <ts>2019-05-04T13:39:29.127500</ts>
    <user>Eura</user>
    <text>(defn select [dataset &amp;amp; col-names]
  (.select ^Dataset dataset (into-array (map (fn [c] (if (string? c)
                                                       (functions/col c)
                                                       c))
                                             col-names))))</text>
  </message>
  <message conversation_id="1349">
    <ts>2019-05-04T13:40:00.128100</ts>
    <user>Eura</user>
    <text>but when i use it,catalyst knows what my select function is? or i loss the optimizations?</text>
  </message>
  <message conversation_id="1349">
    <ts>2019-05-04T13:45:16.129300</ts>
    <user>Eura</user>
    <text>in general i was wondering if using spark from Clojure is simple or problems will occur ,but so far it seems simple to use spark from Clojure</text>
  </message>
  <message conversation_id="1349">
    <ts>2019-05-04T14:51:48.130100</ts>
    <user>Eura</user>
    <text>i found that the plans are exactly the same,so spark i guess has the way to find what my function will do to the dataframe thanks</text>
  </message>
  <message conversation_id="1350">
    <ts>2019-05-04T15:01:16.131800</ts>
    <user>Herman</user>
    <text>Yeah it's just a declarative specification either way, regardless of what intermediate functions you call to get there. Catalyst is pretty smart.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:18:47.132900</ts>
    <user>Felix</user>
    <text>(not trolling, geniune question) Is there a useable GADT (like subset of ocaml, subset of rust) type system for use in Clojure yet, or is Racket the closest to "scheme with gadt" ?</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:21:34.133600</ts>
    <user>Celestine</user>
    <text>&lt;@Felix&gt; I'm not sure what GADT would even look like in Clojure.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:22:00.133900</ts>
    <user>Felix</user>
    <text>I'd settle for just sum + union types</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:22:45.135000</ts>
    <user>Felix</user>
    <text>to be able to declare things like

(struct Cat (:name String) (:age int) (:lives_left int))
(struct Dog (:name String) (:age int) (:can-defend bool))
(enum Animal [Cat, Dog])</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:23:08.135800</ts>
    <user>Felix</user>
    <text>mainly I want to be able to look at a var and know valid fields on the var (rather than explore it in a REPL)</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:23:27.136100</ts>
    <user>Celestine</user>
    <text>Have you looked at `clojure.spec`?</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:23:40.136500</ts>
    <user>Felix</user>
    <text>Yes, spec is not what I want.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:24:13.137400</ts>
    <user>Celestine</user>
    <text>Clojure is a dynamically typed language. What you're asking for doesn't really fit in.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:24:29.138600</ts>
    <user>Madeleine</user>
    <text>Doesn't Gadt not make any sense in a dynamically typed environment?</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:24:34.138900</ts>
    <user>Felix</user>
    <text>Specs provides guarantee of "these invariants seem to hold on these randomized tests", whereas I'm looking for "the compiler will not allow these invaraints to be broken"</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:24:35.139000</ts>
    <user>Celestine</user>
    <text>`clojure.spec`, multi-methods. Those are Clojure's tools for solving that sort of problem.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:24:52.139400</ts>
    <user>Celestine</user>
    <text>Or records and protocols.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:25:21.140400</ts>
    <user>Felix</user>
    <text>there was some work &lt;https://typedclojure.org/&gt;</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:25:32.141300</ts>
    <user>Celestine</user>
    <text>&lt;@Felix&gt; Have you looked at "Typed Clojure" -- yeah, was just about to suggest that...</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:25:38.141600</ts>
    <user>Madeleine</user>
    <text>Are you saying you want a DSL within Clojure which has static type guarantees of the kind that also supports GADT?</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:26:37.142800</ts>
    <user>Felix</user>
    <text>&lt;@Madeleine&gt;: DSL or host language -- I'm okay with either. I'm looking for a practical scheme that supports sum + union types.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:26:52.143400</ts>
    <user>Felix</user>
    <text>&lt;@Celestine&gt;: is typed.clojure used in practice? I thought it was still experimental</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:28:41.145100</ts>
    <user>Celestine</user>
    <text>&lt;@Felix&gt; Typed Clojure is an ongoing experiment that Ambrose has been working on for years. We looked at using it at work years ago but it was difficult to use -- and Ambrose has done a lot of work on making it more gradual and easier to use.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:29:10.146100</ts>
    <user>Madeleine</user>
    <text>This is the closest I've seen: &lt;https://github.com/lambdaisland/uniontypes&gt;</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:29:28.147200</ts>
    <user>Madeleine</user>
    <text>Not quite GADTs though</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:29:51.148800</ts>
    <user>Celestine</user>
    <text>We tried Schema and Typed Clojure several times, and went back and forth between them, and gave up on both in the end. We _are_ heavy users of `clojure.spec` at work tho'...</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:30:06.149700</ts>
    <user>Marlyn</user>
    <text>I don't care about compile time vs runtime errors. The salient part is I catch the errors "before it leaves my laptop".  spec + test.check give me that</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:30:27.150600</ts>
    <user>Celestine</user>
    <text>Indeed.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:30:46.151500</ts>
    <user>Madeleine</user>
    <text>Otherwise, there's very little apart from core.typed for static type checking in Clojure. That said, all types are union and sum of everything all the time. So you can still model things that way easily. You just don't get compiler checks.</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:37:56.153800</ts>
    <user>Marlyn</user>
    <text>It's like going to an Italian restaurant and asking for gluten free...  Gotta embrace the fact that Clojure is a dynamic language</text>
  </message>
  <message conversation_id="1352">
    <ts>2019-05-04T16:38:19.154700</ts>
    <user>Celestine</user>
    <text>Hey, in California, you can get gluten free in Italian restaurants! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:38:35.155300</ts>
    <user>Madeleine</user>
    <text>If you want real typed lisp, I'd look at either carp.lang or typed racket or shen</text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:38:42.155600</ts>
    <user>Marlyn</user>
    <text>Hahaha I always forget about Cali &lt;@Celestine&gt; </text>
  </message>
  <message conversation_id="1351">
    <ts>2019-05-04T16:51:52.156000</ts>
    <user>Felix</user>
    <text>&lt;@Marlyn&gt; I think it's more like walking into a Mac store and asking "do you have windows emu support yet" ?</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T17:37:59.157600</ts>
    <user>Madeleine</user>
    <text>I think the thing is, Lisp don't work very well with strong static types. Because fundamentally, they're about interactive inside out development.</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T17:38:59.158800</ts>
    <user>Madeleine</user>
    <text>For example, appart for carp.lang, I don't think I ever saw a static typed lisp, whose static typing wasn't gradual or optional.</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T17:39:32.158900</ts>
    <user>Mariela</user>
    <text>Keep an eye on &lt;https://github.com/arohner/spectrum&gt;

Meanwhile you can use sth like &lt;https://github.com/jeaye/orchestra&gt; . If you spec _code_ (as opposed to data*), useful errors will pop up far more frequently than with generative testing alone

Basically it's like Clojure's :pre and :post

*non exclusive approaches</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T17:52:52.159800</ts>
    <user>Becki</user>
    <text>i'm going through Programming Languages Application and Interpretation and its in a typed lisp. They exist</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T17:53:13.160000</ts>
    <user>Becki</user>
    <text>there's also shen i think?</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:12:30.160400</ts>
    <user>Sixta</user>
    <text>Racket was a cited example above</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:14:33.161000</ts>
    <user>Madeleine</user>
    <text>Racket and Shen are both optionally/gradually typed only.</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:16:48.164000</ts>
    <user>Madeleine</user>
    <text>The thing is, the static types restrict what you can do. And Lisps want to do things that don't bode well with static types. Most of core.typed was issues with trying to figure out ways to type existing core functions. Similarly, the syntax doesn't work very well with types either. Where do you add the type defs in the sexpr?</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:20:27.165700</ts>
    <user>Celestine</user>
    <text>Yeah, when we used `core.typed`, one of the biggest problems I had was getting it to accept code that was idiomatic but hard to infer types from -- so I found myself refactoring to much less idiomatic structure in order to successfully type check the code.</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:26:54.168000</ts>
    <user>Madeleine</user>
    <text>There's very simple examples (and maybe someone with better type theoretic knowledge can correct me), but for example, I have a function that takes a keyword followed by one or more values until another keyword is reached which can also be followed by one or more values. What type is that?</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:27:30.168800</ts>
    <user>Madeleine</user>
    <text>`[:add 10 23 45 66 83 :remove 23 98 34]`</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:27:33.168900</ts>
    <user>Madeleine</user>
    <text>For example</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:28:08.169500</ts>
    <user>Madeleine</user>
    <text>You could say it's a vector of either keywords or ints</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:28:36.170600</ts>
    <user>Celestine</user>
    <text>`clojure.spec` can specify that. I suspect dependent types (like in Coq etc) can as well?</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:29:18.171700</ts>
    <user>Madeleine</user>
    <text>But its not really what it is. So that would be pretty loose, and almost worthless for correctness. Since bugs would be things like using the wrong keyword, or having the order of the keywords wrong.</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:30:24.173400</ts>
    <user>Madeleine</user>
    <text>&lt;@Celestine&gt; Ya exactly, that's where I was getting at with my example. Spec is much better. Because I can spec those highest level constraints, like that :add should come before :remove for example.</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:31:15.174800</ts>
    <user>Madeleine</user>
    <text>Maybe dependent typed could as well. But it's my in impression they still require too much effort from the programmer for widespread adoption. Not a lot of people are willing to take the productivity hit from using them</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:43:25.176900</ts>
    <user>Celestine</user>
    <text>Yeah. Types get you some of the way but no matter how much effort you put in, they can't specify as much as `clojure.spec` in some areas -- and the same is true in the other direction. Types give you an upfront safety net that certain incorrect code won't compile, which can save time (but of course, certain _correct_ code won't compile either).</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:52:13.180600</ts>
    <user>Madeleine</user>
    <text>For sure. I just feel overall, the things people like about Lisps are the things that are hard to impossible to type, starting with heterogeneous lists of variable length. You can cons anything on them, and that's amazing. If you constrain what you can cons on it... well, such a Lisp is slowly becoming less of a Lisp and more of just Haskell</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:53:55.182000</ts>
    <user>Madeleine</user>
    <text>So you reach a point where there is no point in having strong static typed Lisp. And you realize if that's what you want, just use Haskell or OCaml or Java even</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T18:57:48.183900</ts>
    <user>Celestine</user>
    <text>Aye, I've used everything from assembly up to Haskell and I'm one of those devs who just gets frustrated with type systems. I think programmers are inherently either "statically typed people" or "dynamically typed people".</text>
  </message>
  <message conversation_id="1354">
    <ts>2019-05-04T21:04:15.193600</ts>
    <user>Oscar</user>
    <text>Type systems are becoming more expressive:
&lt;https://youtu.be/4i7KrG1Afbk&gt;

Dependent types allow for support of contract-like constraints.

The use case of sub-selection for `spec` schemas can already be handled by structural types and row polymorphism, as in Typescript and Elm.

If you’re comfortable with using `spec` for that particular use case, then you’d be comfortable using static types in Clojure.</text>
  </message>
  <message conversation_id="1353">
    <ts>2019-05-04T22:49:51.194900</ts>
    <user>Alease</user>
    <text>When doing a defrecord or type while implemening a protocol, does it matter if your implemented function use the "this" binding or the bound variables in the protocol definition?</text>
  </message>
  <message conversation_id="1355">
    <ts>2019-05-04T22:52:28.196000</ts>
    <user>Alease</user>
    <text>I often see them omitted as `(some-protocol-fn [_ some-other-args] ..)`</text>
  </message>
  <message conversation_id="1355">
    <ts>2019-05-04T23:45:57.196600</ts>
    <user>Alease</user>
    <text>I guess using this would give you the whole entity, for assoc or update.</text>
  </message>
  <message conversation_id="1355">
    <ts>2019-05-04T23:50:57.197800</ts>
    <user>Malik</user>
    <text>does anyone here use some kind of coroutine library with clojure? I'm used to using M:N threading with things like Elixir and Go and the idea of possibly starving out OS threads by blocking actions concerns me</text>
  </message>
  <message conversation_id="1355">
    <ts>2019-05-04T23:51:15.198100</ts>
    <user>Malik</user>
    <text>it might be a remote concern, but still a concern</text>
  </message>
  <message conversation_id="1355">
    <ts>2019-05-04T23:52:54.198500</ts>
    <user>Meagan</user>
    <text>core.async implements CSP with a thread pool</text>
  </message>
  <message conversation_id="1355">
    <ts>2019-05-04T23:53:26.198900</ts>
    <user>Meagan</user>
    <text>but you can still block the thread pool by doing blocking IO on a channel</text>
  </message>
  <message conversation_id="1356">
    <ts>2019-05-05T01:03:36.199100</ts>
    <user>Madeleine</user>
    <text>Can you talk about this more? What you mean by sub-selection? What is the use case for it, can you give an example?</text>
  </message>
  <message conversation_id="1356">
    <ts>2019-05-05T03:24:31.200100</ts>
    <user>Sixta</user>
    <text>Core async would work without a thread pool. It could be tuned to a single thread.</text>
  </message>
  <message conversation_id="1357">
    <ts>2019-05-05T05:28:57.202300</ts>
    <user>Enola</user>
    <text>Cross-posting the underlying question from &lt;#C0744GXCJ|cursive&gt;.
I have a code that calls function with some not null arguments, but one of the arguments becomes null in the function's body.
Here's a piece of code of interest, it's from `cognitect.transit`:
```(defn write
  "Writes a value to a transit writer."
  [^Writer writer o]
  (.write ^com.cognitect.transit.Writer (.w writer) o))```
During debugging, when the current line is the very first one, `writer` is not null. But as soon as I step into , it becomes null for no apparent reason.

How can such thing possibly happen?</text>
  </message>
  <message conversation_id="1357">
    <ts>2019-05-05T05:37:10.202400</ts>
    <user>Enola</user>
    <text>Nevermind that - I got confused by the inconsistently highlighted stacktrace, and the reported null value is not null in reality.</text>
  </message>
  <message conversation_id="1358">
    <ts>2019-05-05T07:07:41.204200</ts>
    <user>Nisha</user>
    <text>Hi! Is there a readline lib that I can use to build completion and history function on terminal input?
Something similar to &lt;https://github.com/chzyer/readline&gt;</text>
  </message>
  <message conversation_id="1359">
    <ts>2019-05-05T07:52:31.204800</ts>
    <user>Sixta</user>
    <text>Jline probably</text>
  </message>
  <message conversation_id="1358">
    <ts>2019-05-05T08:22:47.205400</ts>
    <user>Nisha</user>
    <text>&lt;@Sixta&gt; No Clj lib available ?
I found `bhauman/rebel-readline`, but couldn’t find a simple example of how to use it for my use case. It’s mostly documented for REPL use.</text>
  </message>
  <message conversation_id="1358">
    <ts>2019-05-05T08:23:11.205800</ts>
    <user>Sixta</user>
    <text>&lt;@Nisha&gt; none I've encountered</text>
  </message>
  <message conversation_id="1358">
    <ts>2019-05-05T12:09:30.207800</ts>
    <user>Madeleine</user>
    <text>&lt;@Nisha&gt; You shouldn't hesitate to use Java libs from Clojure. It's part of the power that Clojure brings to make that easy and possible. Rebel-readline uses JLine itself.</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T14:59:40.208300</ts>
    <user>Meagan</user>
    <text>how are people using `tap&amp;gt;` in practice?</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:01:41.208800</ts>
    <user>Celestine</user>
    <text>&lt;@Meagan&gt; For debugging, instead of "println" debugging.</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:03:05.211200</ts>
    <user>Celestine</user>
    <text>When I'm debugging, I add `tap&amp;gt;` calls (instead of `prn`/`println`), and eval the top-level block (to redef the function I just changed), and then run whatever scenario I need and see what crops up in REBL.</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:03:23.211600</ts>
    <user>Meagan</user>
    <text>I know you use rebl right. Wondering if other people do the same but just wire it to prn </text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:03:54.212500</ts>
    <user>Meagan</user>
    <text>Slow typer on my iPad :stuck_out_tongue_winking_eye:</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:04:20.213000</ts>
    <user>Celestine</user>
    <text>Before using REBL, I used to connect an additional Socket REPL and telnet into it and add a tap watcher that `prn`'s stuff.</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:04:42.213800</ts>
    <user>Celestine</user>
    <text>That way tap output goes to a separate terminal from my regular stdout.</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:04:51.214000</ts>
    <user>Meagan</user>
    <text>Do you leave in tap after you commit?</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:05:10.214300</ts>
    <user>Celestine</user>
    <text>Not generally.</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:05:34.214800</ts>
    <user>Celestine</user>
    <text>While it's safe to leave it in, I don't see much point in having `tap&amp;gt;` calls in production code.</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:08:29.215700</ts>
    <user>Celestine</user>
    <text>If you need tap-debugging in production, you can always connect to the process, eval in new function definitions with `tap&amp;gt;`, do the debugging, and then eval in the original version again.</text>
  </message>
  <message conversation_id="1360">
    <ts>2019-05-05T15:09:11.216500</ts>
    <user>Celestine</user>
    <text>(mind you, if you're running with direct linking enabled, that workflow doesn't always work, unless you re-eval further up the call chain).</text>
  </message>
  <message conversation_id="1361">
    <ts>2019-05-05T16:42:20.218400</ts>
    <user>Brent</user>
    <text>Is there a way to pretty-print the output of `macroexpand-1` to make it more readable than 1 long line? Thanks!</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T17:14:37.218700</ts>
    <user>Otelia</user>
    <text>are you looking for `clojure.pprint/pprint`?</text>
  </message>
  <message conversation_id="1363">
    <ts>2019-05-05T18:13:01.218900</ts>
    <user>Oscar</user>
    <text>check out Rich’s _Maybe Not_ talk. he discusses having a spec schema from which you can select a subset of fields and provides motivation</text>
  </message>
  <message conversation_id="1363">
    <ts>2019-05-05T18:51:21.219100</ts>
    <user>Madeleine</user>
    <text>Okay, maybe I thought you were responding to me. That's why I got confused. But now I think you were talking to todo.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:48:58.219500</ts>
    <user>Oscar</user>
    <text>I just looked for a user named “todo”. smh</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:49:38.219700</ts>
    <user>Madeleine</user>
    <text>I thought there was haha</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:50:21.219900</ts>
    <user>Oscar</user>
    <text>oh man, so that wasn’t just a sprinkling of Spanish?</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:50:34.220100</ts>
    <user>Madeleine</user>
    <text>No :yum:</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:52:47.220300</ts>
    <user>Oscar</user>
    <text>anyway, happy to provide pointers to any type-related info. I’ve been a long-time Clojure user and espouser of dynamic types. over past few years my opinion on types has changed based on experiences working on large Clojure and Python projects</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:54:40.220500</ts>
    <user>Oscar</user>
    <text>I still use Clojure daily for work and hobbies, but starting to switch over to Haskell for some things</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:54:51.220700</ts>
    <user>Madeleine</user>
    <text>If you were talking to me then, I was talking about full strictly static type systems. Not optional. Where every single construct needs to be typed. I still feel that doesn't work well with Lisps. Dependent types add a huge annotation burden which would defeat the Lisp dynamic interactive live programming flow, and make the sexpr syntax even more of an eye sore I feel. Hindley Milner typed can't type all of Lisps constructs, and if you changed Lisps so it could, it's no longer Lisp, but a weird sexpr like syntax for Haskell. The only types I think could work are simple systems like Java's type system. Common Lisp has support for those optionally for example and that works fine.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:56:41.220900</ts>
    <user>Oscar</user>
    <text>yeah, I agree with most of that and especially the optional portion. That’s the direction I wish Clojure was headed, optional/gradual typing</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:57:52.221100</ts>
    <user>Madeleine</user>
    <text>I wasn't so much talking about being pro static or dynamic, but more that this holy grail everyone wants, which would be the dynamism of Lisp and the compiler checks of Haskell I think is a pipe dream, at least for now, because they literally oppose each other. What is great of Lisp is dynamism, which invariably means you can't have strong static guarantees. So you need to choose which one you prefer.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:58:11.221300</ts>
    <user>Madeleine</user>
    <text>I don't think optional typing work honestly</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:58:27.221500</ts>
    <user>Madeleine</user>
    <text>That seem to have been an issue with core.type adoption</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:58:33.221700</ts>
    <user>Oscar</user>
    <text>it’s kind of frustrating to see `spec` continue as a runtime-only checker when other languages can statically check the structural types that seem to be the main motivation behind `spec`</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:59:05.221900</ts>
    <user>Madeleine</user>
    <text>They can't though</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:59:17.222100</ts>
    <user>Madeleine</user>
    <text>Not without limiting the expressivity of the language</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:59:24.222300</ts>
    <user>Oscar</user>
    <text>I think optional typing can work, I agree that core.typed didn’t get there</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T19:59:49.222500</ts>
    <user>Madeleine</user>
    <text>You don't feel optional typing is a Jack of all trade master of none?</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:00:09.222700</ts>
    <user>Oscar</user>
    <text>mm, so you can have specs that act as contracts. where one can use arbitrary predicates, and I agree those can’t be expressed in most type systems</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:00:25.222900</ts>
    <user>Madeleine</user>
    <text>What good is it that X is typed, if the Y it calls or the G that calls it aren't</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:00:48.223100</ts>
    <user>Oscar</user>
    <text>but look at Rich’s talk, and the specs he uses as examples can be statically checked. proof being Typescript, Elm, and OCaml</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:01:03.223300</ts>
    <user>Oscar</user>
    <text>those borders are then checked via tests like spec does now</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:01:27.223500</ts>
    <user>Oscar</user>
    <text>but regions of code that are fully annotated (or inferred) can be checked statically</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:01:36.223700</ts>
    <user>Madeleine</user>
    <text>Hum... I don't remember the details, but his whole spiel was that Haskell and other strongly typed system did it wrong, and so did he with spec 1</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:02:07.224100</ts>
    <user>Oscar</user>
    <text>yeah, he used a strawman where Maybe types were used to represent optional fields</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:02:54.224300</ts>
    <user>Madeleine</user>
    <text>It was more of a criticism of being forced to define things where they aren't in the domain I felt.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:03:18.224500</ts>
    <user>Madeleine</user>
    <text>If you define an ADT, you need to specify all that could be in it.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:03:29.224700</ts>
    <user>Oscar</user>
    <text>Haskell does have the ability to express structural types, but it is a little bit hacky. The languages I already mentioned: Typescript, Elm, and OCaml; are statically typed and _do_ have solid support for structural types and handle the issue Rich brought up</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:03:52.224900</ts>
    <user>Madeleine</user>
    <text>Problem is, different time or states have different requirements of what could be in it.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:03:59.225100</ts>
    <user>Oscar</user>
    <text>yep, exactly</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:04:02.225300</ts>
    <user>Madeleine</user>
    <text>How? I don't have experience with those</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:04:21.225500</ts>
    <user>Madeleine</user>
    <text>Let's say I had a Customer with a Name and Credit Card</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:04:43.225700</ts>
    <user>Madeleine</user>
    <text>Both are mandatory for some functions, but required for others?</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:04:48.225900</ts>
    <user>Madeleine</user>
    <text>How you model that?</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:05:26.226100</ts>
    <user>Oscar</user>
    <text>so the keywords to search for are “row polymorphism” and “structural types”, but as for how they work, it’s similar to what’s coming in spec2. You have some type schema/definition, and for a function that only requires a subset of the fields defined in the schema, the type/spec for the function parameter is defined as a subset of the schema</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:06:50.226300</ts>
    <user>Madeleine</user>
    <text>Ok I see.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:07:13.226500</ts>
    <user>Madeleine</user>
    <text>Ya, I guess that was his insight. And Haskell doesn't support them first class, which was his criticism</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:08:04.226700</ts>
    <user>Madeleine</user>
    <text>But doesn't both of these suffer if safety?</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:08:08.226900</ts>
    <user>Madeleine</user>
    <text>For static systems</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:08:26.227100</ts>
    <user>Madeleine</user>
    <text>How do they handle type equality or mismatch?</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:09:32.227300</ts>
    <user>Oscar</user>
    <text>in Haskell, the closest reasonable solution is probably lenses. but that isn’t really row polymorphism. if you ask Haskell folks for three or so top issues to fix in the language, records/row types will be one of them</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:11:25.227500</ts>
    <user>Oscar</user>
    <text>how do you mean?</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:12:14.227700</ts>
    <user>Oscar</user>
    <text>&lt;https://v1.realworldocaml.org/v1/en/html/objects.html&gt;</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:13:13.227900</ts>
    <user>Oscar</user>
    <text>there’s some info on row polymorphism in OCaml. maybe that helps? as to what the type checker is doing, I don’t know</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:13:26.228100</ts>
    <user>Madeleine</user>
    <text>So, say you have a record of [:a :b :c]. And there's a function that needs [:a :c] and its given [:a :c :x :y] as input. And say it returns [:a :b :c], how does it know these are all compatible types?</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:14:16.228300</ts>
    <user>Oscar</user>
    <text>because you only need [:a :c], and any additional fields are ignored</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:14:42.228500</ts>
    <user>Oscar</user>
    <text>note that :a and :c will have types too, so the matching is based on field-type pairs</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:14:55.228700</ts>
    <user>Madeleine</user>
    <text>Okay, the link you sent me mentions the limitations I'm talking about.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:15:53.228900</ts>
    <user>Madeleine</user>
    <text>In the "Subtyping Versus Row Polymorphism" section.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:16:52.229100</ts>
    <user>Madeleine</user>
    <text>They talk how each approach has trade offs, and neither can perfectly give us the behaviour we want, but that's the compromise of static type systems often time, you adapt to the way the type checker works in order to rake its benefits</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:18:31.229300</ts>
    <user>Madeleine</user>
    <text>"For example, lists of heterogeneous elements cannot be created using row polymorphism"</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:18:56.229500</ts>
    <user>Madeleine</user>
    <text>Like that's a pretty big blocker for Clojure and most Lisps. Since they're most primitive construct are heterogeneous lists</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:20:04.229700</ts>
    <user>Oscar</user>
    <text>that’s also an implementation detail of the type checker for a specific language</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:21:16.229900</ts>
    <user>Madeleine</user>
    <text>Hum... are you sure? They don't make it sound like it. It seems to be a limitation of row polymorphism. Subtyping can do it, but then things can't be type inferred and needs to be explicitly casted it seems.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:22:40.230100</ts>
    <user>Oscar</user>
    <text>I honestly don’t know enough about OCaml to discuss it. =/ Let me do some reading and see if there’s an example of a type system without that limitation</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:22:40.230300</ts>
    <user>Madeleine</user>
    <text>I need to look more into both of them for sure. Seems interesting</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:23:31.230500</ts>
    <user>Madeleine</user>
    <text>Thanks for pointing it out</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:32:21.230700</ts>
    <user>Oscar</user>
    <text>thanks for discussing it, I wish that happened more here! it’s good to run into the limitations</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:34:04.230900</ts>
    <user>Madeleine</user>
    <text>Ya, thanks to you too. I like both static and dynamic languages. For different reasons. I prefer using certain dynamic langs, but not all. Only Lisps really, otherwise I prefer statically typed languages. I'm more experienced with C++, Java, C#. But have learned Haskell amateurishly. In general though, I find every static system is restrictive in one or another way. That's inherent from the problem. How do you teach a computer to understand and reason about code in a way that it can catch the bugs in it, when you couldn't. Nobody would say no to that, if it didn't come with trade offs. And even between strategies for achieving this there are many trade offs. So I tend to be skeptic of the static type advocates that don't start with talking about limitations and sacrifices of their approach :yum:</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:36:27.231100</ts>
    <user>Madeleine</user>
    <text>That doesn't mean sometimes the trade isn't worth it. But you need to accept that you will model things, not necessarily the way that you want to model it, not necessarily the way that is most intuitive, and not necessarily the way that the domain has it, but the way the type checker needs it.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:38:40.231300</ts>
    <user>Madeleine</user>
    <text>At the end of the day, for me, it comes down to what I'd rather do and who I trust more. Could I personally catch more bugs if I was modeling it my way, and having fun doing it? Or would the type checker catch more bugs if I modeled it its way, and felt frustrated throughout the process :yum:</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:39:56.231500</ts>
    <user>Madeleine</user>
    <text>So in practice, I found I do better with Clojure over Java,C#,C++, but I do worse with Python, JS and Ruby.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:40:34.231700</ts>
    <user>Madeleine</user>
    <text>I guess though,  I need to give Haskell, OCaml and PureScript a real good try to see if I end up doing better with them</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:43:03.233000</ts>
    <user>Oscar</user>
    <text>Have to run to dinner, but definitely up for talking more about types and trade offs.</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:46:22.235700</ts>
    <user>Oscar</user>
    <text>The biggest hurdle for me with Haskell was getting comfortable with the handling of Effects through types. OCaml or others that aren’t pure (i.e., monads or some other effects system isn’t required) are maybe a good place to start exploring</text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:48:06.237000</ts>
    <user>Oscar</user>
    <text>And Idris’ dependent types are really cool </text>
  </message>
  <message conversation_id="1362">
    <ts>2019-05-05T20:51:10.237300</ts>
    <user>Madeleine</user>
    <text>Have a good meal</text>
  </message>
  <message conversation_id="1364">
    <ts>2019-05-06T01:46:40.237800</ts>
    <user>Roslyn</user>
    <text>What is the use case of `type` function when there is `class`? When it's useful to put `:type` on something's metadata?</text>
  </message>
  <message conversation_id="1364">
    <ts>2019-05-06T04:33:20.239100</ts>
    <user>Min</user>
    <text>since you can "type" anything supporting metadata I guess one answer could be that it's useful with multimethods dispatching via (type ... )</text>
  </message>
  <message conversation_id="1364">
    <ts>2019-05-06T04:35:54.240900</ts>
    <user>Roslyn</user>
    <text>oh, makes sense</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:03:09.242500</ts>
    <user>Roselia</user>
    <text>is there any book or written series about clojure compiler?</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:10:09.242900</ts>
    <user>Jasmine</user>
    <text>not to my knowledge</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:11:57.244300</ts>
    <user>Jasmine</user>
    <text>wish I had the time to write such a thing :) in a broad sense, the clojure compiler is just translating a relatively small set of possible expressions to java bytecode, and as such is pretty simple as far as compilers go</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:12:53.245200</ts>
    <user>Jasmine</user>
    <text>there's essentially no optimization - really Clojure leans on the JIT rather than doing much itself</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:13:30.245600</ts>
    <user>Jasmine</user>
    <text>fortunately, the jvm is pretty great at it</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:15:44.246300</ts>
    <user>Meagan</user>
    <text>the defn podcast with the guy working on ClojureCLR was super interesting. he went into differences between JVM and CLR and how one could optimize things for one over the other</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:25:08.246500</ts>
    <user>Dann</user>
    <text>sounds very interesting, is this the one? &lt;https://player.fm/series/defn-2464514/ep-48-david-miller-and-clojure-on-the-clr&gt;</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:25:20.246800</ts>
    <user>Meagan</user>
    <text>yep</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:29:16.248600</ts>
    <user>Marlyn</user>
    <text>The nice thing about the clojure compiler is that it's a one pass translator to bytecode</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:30:13.250100</ts>
    <user>Abbey</user>
    <text>Anyone else have this issue? I'm using the Clojure CLI and have dependency that is a git repo. If I try to update the sha I get this error. ```Destination path "my-repo" already exists and is not an empty directory
org.eclipse.jgit.api.errors.JGitInternalException: Destination path "my-repo" already exists and is not an empty directory```.</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:30:34.250900</ts>
    <user>Abbey</user>
    <text>I'm also having a hard time finding exactly where the code gets checked out.</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:31:00.252000</ts>
    <user>Marlyn</user>
    <text>I've had that error before and I haven't been able to pinpoint it, but I remember something about auth</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:31:16.252700</ts>
    <user>Marlyn</user>
    <text>All the files go in .gitlibs &lt;@Abbey&gt; </text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:31:50.253400</ts>
    <user>Fatima</user>
    <text>This was really good</text>
  </message>
  <message conversation_id="1366">
    <ts>2019-05-06T14:32:22.253900</ts>
    <user>Abbey</user>
    <text>Thanks, &lt;@Marlyn&gt;</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:44:28.257400</ts>
    <user>Shonda</user>
    <text>I would buy this day one :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:44:46.257800</ts>
    <user>Leda</user>
    <text>Hello guys, i'm writing tests for an async function that uses `future`
But in order to test it, i need to know when the background process have finished, but because it's async i have a return value right when i call it. How can i handle this situation?</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:44:58.258000</ts>
    <user>Jasmine</user>
    <text>well, don't hold your breath</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:45:01.258200</ts>
    <user>Jasmine</user>
    <text>:)</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:47:01.258400</ts>
    <user>Roselia</user>
    <text>yeah i've seen this one few days ago</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:51:08.258900</ts>
    <user>Roselia</user>
    <text>&lt;@Leda&gt; check `future-done?` function</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:51:33.259200</ts>
    <user>Leda</user>
    <text>wow, thanks</text>
  </message>
  <message conversation_id="1365">
    <ts>2019-05-06T14:52:40.259600</ts>
    <user>Dann</user>
    <text>there's also `realized?`</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:53:01.260200</ts>
    <user>Roselia</user>
    <text>whats the difference?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:53:07.260400</ts>
    <user>Dann</user>
    <text>I think realized? is more general though (but I've heard multiple warnings about using it on lazy things)</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:53:19.260700</ts>
    <user>Dann</user>
    <text>realized? works on promises, delays, futures, and lazy-seqs</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:53:31.261200</ts>
    <user>Dann</user>
    <text>and from what I hear, using it on lazy-seqs is a bad code smell</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:53:36.261400</ts>
    <user>Roselia</user>
    <text>i mean if we have realized why do we have more specific future-done?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:54:13.262200</ts>
    <user>Dann</user>
    <text>principle of least power I guess  - also it uses the java Future api, and not the IPending api so it works on java futures, not just clojure's specific implementation of futures</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:55:02.262900</ts>
    <user>Dann</user>
    <text>every clojure future isa java.util.concurrent.Future, but not every j.u.c.Future is a clojure future</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:56:17.263900</ts>
    <user>Leda</user>
    <text>well, i can use `future-done?` but still i have to supply a `Thread/Sleep` ? or i can use something like this `await-for` ?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:56:25.264200</ts>
    <user>Roselia</user>
    <text>yeah i see</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:56:57.265100</ts>
    <user>Dann</user>
    <text>&lt;@Leda&gt; what do you  want to do if the future takes to long?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:56:59.265300</ts>
    <user>Roselia</user>
    <text>realized is bound to be used for IPending implementors</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:57:12.265700</ts>
    <user>Dann</user>
    <text>if you always want to wait for it, just use deref / @</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:57:21.266200</ts>
    <user>Dann</user>
    <text>if you want to timeout, that's an optional arg to deref</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:57:30.266600</ts>
    <user>Leda</user>
    <text>&lt;@Dann&gt; nothing, the test will fail i guess</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:57:33.266800</ts>
    <user>Dann</user>
    <text>in neither case do you actually need to explicitly check if it is realized</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:58:16.267700</ts>
    <user>Dann</user>
    <text>&lt;@Leda&gt; then I'd use deref, with the timeout arg (how long is too long? probably more than 0 ms...) then use the timed-out value as your failure condition in the check</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:58:40.267900</ts>
    <user>Leda</user>
    <text>ok i'll try</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:59:44.268100</ts>
    <user>Dann</user>
    <text>&lt;@Leda&gt; ```(ins)user=&amp;gt; (let [f (future (Thread/sleep 1000) ::OK)] (deref f 500 ::failure))
:user/failure
(ins)user=&amp;gt; (let [f (future (Thread/sleep 1000) ::OK)] (deref f 5000 ::failure))
:user/OK```</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T14:59:55.268300</ts>
    <user>Roselia</user>
    <text>was about to write that snippet :smile:</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:00:54.269000</ts>
    <user>Leda</user>
    <text>so, `deref` waits for the future to be done?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:01:06.269400</ts>
    <user>Roselia</user>
    <text>yes it blocks</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:01:10.269700</ts>
    <user>Leda</user>
    <text>nice</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:01:11.269800</ts>
    <user>Dann</user>
    <text>yes, by default it blocks, but with the extra arg it has a timeout</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:01:35.270500</ts>
    <user>Dann</user>
    <text>there's also future-cancel, if you know your code calls some cancellable method</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:01:45.270800</ts>
    <user>Leda</user>
    <text>nice to know, async is something i didn't really used before on clojure or other langs</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:02:25.271100</ts>
    <user>Roselia</user>
    <text>try core.async also, it provides a nice way to build concurrent applications</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:04:08.272100</ts>
    <user>Leda</user>
    <text>don't think i need that much, it was just a function that needed to be async because it's just a HTTP response 201, Accepted and being processed</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:43:51.273000</ts>
    <user>Leda</user>
    <text>```
(deftest download-musics--return-file-string
  (let [result (deref (core/download-musics test-links) 180000 ::failure)
        _      (shell/sh "unzip" result :dir core/resources-folder)]
    (is (string? result))
    (is (.exists (io/as-file (str core/resources-folder result))))
    (is (= (+ 1 (count test-links)) ;; This is because file-seq add's the own arg folder at the beginning of the seq
           (count (file-seq (io/file (str core/resources-folder (subs result 0 (- (count result) 4))))))))))


Uncaught exception, not in assertion.
expected: nil
  actual: java.lang.ClassCastException: class java.lang.String cannot be cast to class java.util.concurrent.Future (java.lang.String and java.util.concurrent.Future are in module java.base of loader 'bootstrap')
```

&lt;@Dann&gt; what i'm doing wrong here?</text>
  </message>
  <message conversation_id="1368">
    <ts>2019-05-06T15:47:15.273500</ts>
    <user>Florance</user>
    <text>Does `core/download-musics` return a ref or a string?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:48:05.273800</ts>
    <user>Leda</user>
    <text>string</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:49:10.274500</ts>
    <user>Florance</user>
    <text>The error message you’re getting is because you’re trying to treat a string (the result) as a ref (like an atom)</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:49:19.274800</ts>
    <user>Leda</user>
    <text>oh ok</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:49:49.275500</ts>
    <user>Leda</user>
    <text>but i can't really change the behavior of this function and it's output, guessing if i could make a wrapper that returns some kind of ref?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:51:31.276100</ts>
    <user>Meagan</user>
    <text>you can change `download-musics` but not the deftest?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:52:34.276500</ts>
    <user>Leda</user>
    <text>i can change deftest but not `download-musics`</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:53:35.277500</ts>
    <user>Leda</user>
    <text>it's output goes directly to a handler that returns an HTTP response based on it, and using a `ref` as return value would break the response pattern that i'm using for all my functions</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:54:08.277800</ts>
    <user>Meagan</user>
    <text>why does the deftest try and `deref` it?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:55:41.278400</ts>
    <user>Leda</user>
    <text>because `download-musics` is async and i need to wait the background process to finish</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:56:19.279400</ts>
    <user>Leda</user>
    <text>`deref` blocks the main thread until it's done, but i didn't know that it expects a `ref`, or, i knew it but i forgot :disappointed:</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:56:24.279500</ts>
    <user>Meagan</user>
    <text>according to the error, you don't</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:56:41.279900</ts>
    <user>Meagan</user>
    <text>it's returning a string. not a future</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:57:14.280400</ts>
    <user>Leda</user>
    <text>yes, because i need an immediate response from this function, in this case, a string</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:57:28.280700</ts>
    <user>Leda</user>
    <text>i'm struggling to write a test for it</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:58:04.281000</ts>
    <user>Meagan</user>
    <text>it sounds like you should remove the `deref`</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T15:58:22.281600</ts>
    <user>Meagan</user>
    <text>I dont' really understand what's going on. are you redefing the `download-musics` to just return a string or something?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T16:00:20.283600</ts>
    <user>Leda</user>
    <text>`download-musics` is an async function, which returns a string. Inside it's body, there is a `future`, to do the background work (download the musics), but i need an immediate response of where this musics are going to be stored, so it returns the string (the name of the zip file that will be created).

all i need is to write a test that waits the completition of the `future` inside it's body, so i can test it propperly</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T16:01:42.284100</ts>
    <user>Leda</user>
    <text>guess i'll need to write a simple `Thread/Sleep` for now, just to write the test and refactor it later</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T16:03:51.284500</ts>
    <user>Brent</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T16:12:07.285200</ts>
    <user>Meagan</user>
    <text>no idea. either download-musics returns a string synchronously, or it returns a future that resolves with a string. I don’t understand your test</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T16:18:08.285600</ts>
    <user>Suzann</user>
    <text>Can you post the source of `core/download-musics`?</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T16:23:19.286700</ts>
    <user>Dann</user>
    <text>&lt;@Leda&gt; one pattern for what you are doing is to return a hash-map, eg. `{:f the-future :s the-string}` so a client can use the parts of the result that matter</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T16:23:46.287400</ts>
    <user>Dann</user>
    <text>if the consumer needs a string, you can make a thin wrapper that just pulls the string out, but you can use the real return value in your test</text>
  </message>
  <message conversation_id="1367">
    <ts>2019-05-06T16:24:04.287800</ts>
    <user>Dann</user>
    <text>you don't really need a unit test for a function that does nothing but a single key lookup</text>
  </message>
  <message conversation_id="1369">
    <ts>2019-05-06T17:02:59.290900</ts>
    <user>Nieves</user>
    <text>Sorry for silly question, but can you suggest me, what project I can create and share on github, to make any interest to my person as a remote employee (keeping in mind, that I live in Russia). If it is possible, of course :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1370">
    <ts>2019-05-07T05:46:16.294000</ts>
    <user>Jeannette</user>
    <text>is there something like the inverse of "-&amp;gt;" out there? a macro that takes a nested lisp expression and a symbol and returns it in threaded form?</text>
  </message>
  <message conversation_id="1371">
    <ts>2019-05-07T07:29:24.295400</ts>
    <user>Maybell</user>
    <text>I’m having a hard time contemplating what you mean. Could you elaborate? Maybe some pseudo-code would help</text>
  </message>
  <message conversation_id="1371">
    <ts>2019-05-07T07:30:37.295600</ts>
    <user>Fatima</user>
    <text>Do you mean something like this? &lt;https://github.com/clojure-emacs/clj-refactor.el/wiki/cljr-thread-first-all&gt;</text>
  </message>
  <message conversation_id="1372">
    <ts>2019-05-07T09:18:41.298200</ts>
    <user>Gladys</user>
    <text>Hello! I'm taking a new job and going back to Rails land from Clojure world. I'm a little sad to leave functional programming, and would like to maintain some of the fp mindset, so if anyone knows any good resources/blogs that discuss what fp concepts  work well for OO codebases and how best to apply them, I would greatly appreciate it :pray:</text>
  </message>
  <message conversation_id="1373">
    <ts>2019-05-07T11:02:42.299700</ts>
    <user>Meagan</user>
    <text>I don’t think this is a normal thing, but you could try writing one :D</text>
  </message>
  <message conversation_id="1374">
    <ts>2019-05-07T12:50:59.301000</ts>
    <user>Bernardine</user>
    <text>Anthony, sad to see a Clojurist lost to Rails : )
Take a look at, which begins by outlining a Ruby path from OO to functional way of thinking: &lt;https://medium.com/@aarontdixon/dynamic-validations-in-rails-8019570f9c59&gt;</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T13:10:29.301800</ts>
    <user>Jeannette</user>
    <text>clj-refactor seems to be what I'm looking for</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T13:13:14.303200</ts>
    <user>Elaine</user>
    <text>How do I access "this" inside `toString` ? And how to control the creation of the instance?
```
(.toString (proxy [PersistentArrayMap] []
             (toString []
               "42")))
```</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T13:15:51.303600</ts>
    <user>Dann</user>
    <text>that empty vector is the list of args to the superclass constructor</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T13:19:24.304800</ts>
    <user>Dann</user>
    <text>&lt;@Elaine&gt; there's an implicit `this` you can access ```user=&amp;gt; (str (proxy [Object] [] (toString [] (clojure.string/reverse (str (supers (class this)))))))
"}tcejbO.gnal.avaj yxorPI.gnal.erujolc{#"```</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T13:21:48.305500</ts>
    <user>Dann</user>
    <text>there's also `proxy-super` for delegating to the superclass explicitly  ```user=&amp;gt; (str (proxy [Object] [] (toString [] (clojure.string/reverse (proxy-super toString)))))
"b94e08c1@a47291ff$tcejbO.gnal.avaj$yxorp.resu"```</text>
  </message>
  <message conversation_id="1376">
    <ts>2019-05-07T13:56:13.307000</ts>
    <user>Jasmine</user>
    <text>the `this` in `proxy` is the only "magic" anaphoric macro symbol in clojure I think</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T13:57:40.307600</ts>
    <user>Dann</user>
    <text>`:&amp;gt;&amp;gt;` in condp feels like a cousin of that</text>
  </message>
  <message conversation_id="1376">
    <ts>2019-05-07T13:58:27.308300</ts>
    <user>Jasmine</user>
    <text>a little, but all keywords evaluate to themselves, so no issue there (vs symbols which evaluate to something else)</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T13:58:46.308700</ts>
    <user>Dann</user>
    <text>yeah - not the same thing, just a similar "magic" feeling</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T13:59:58.309800</ts>
    <user>Dann</user>
    <text>also marginal cases: catch, finally, inside try, and thrown? and thrown-with-message? inside clojure.test/is</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T14:01:13.310500</ts>
    <user>Dann</user>
    <text>in that they are not bound anywhere, but they have meaning implemented by a parent macro</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T14:09:38.310600</ts>
    <user>Rosaline</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-2201&gt;</text>
  </message>
  <message conversation_id="1375">
    <ts>2019-05-07T14:10:44.310800</ts>
    <user>Dann</user>
    <text>:exclamation: good to know, thanks</text>
  </message>
  <message conversation_id="1377">
    <ts>2019-05-07T15:40:23.311100</ts>
    <user>Elaine</user>
    <text>let's vote :exclamation:</text>
  </message>
  <message conversation_id="1378">
    <ts>2019-05-07T15:52:09.314100</ts>
    <user>Herman</user>
    <text>I'm reading about `core.spec` and I came across one passage in the design rationale that I'm having trouble understanding.

&amp;gt; Invariably, people will try to use a specification system to detail implementation decisions, but they do so to their detriment. The best and most useful specs (and interfaces) are related to purely information aspects.

What's an example of "trying to use a specification system to detail implementation decisions?", as contrasted with a purely informational use of a spec?</text>
  </message>
  <message conversation_id="1378">
    <ts>2019-05-07T15:57:14.314400</ts>
    <user>Jasmine</user>
    <text>spec'ing intermediate internal functions</text>
  </message>
  <message conversation_id="1378">
    <ts>2019-05-07T15:57:57.314800</ts>
    <user>Jasmine</user>
    <text>or like some of the specs for clojure.core that people have written fall into this</text>
  </message>
  <message conversation_id="1378">
    <ts>2019-05-07T15:58:25.315300</ts>
    <user>Jasmine</user>
    <text>they look at exactly what a function currently implements and spec that, which may eliminate things that will be supported in the future</text>
  </message>
  <message conversation_id="1378">
    <ts>2019-05-07T15:59:40.317000</ts>
    <user>Jasmine</user>
    <text>clojure core functions are aggressively polymorphic and we continue to add cases over time - spec'ing that stuff is a form of unnecessarily reducing future options</text>
  </message>
  <message conversation_id="1378">
    <ts>2019-05-07T16:02:13.318800</ts>
    <user>Herman</user>
    <text>That's what I thought it might be, but I was having trouble putting it into the right words. So I guess using spec for "implementation decisions" would be arbitrarily limiting what you can pass to or return from a function so that a given spec is always satisfied.</text>
  </message>
  <message conversation_id="1378">
    <ts>2019-05-07T16:02:22.319000</ts>
    <user>Herman</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1378">
    <ts>2019-05-07T16:03:58.320500</ts>
    <user>Herman</user>
    <text>so it seems like from the rest of that passage that spec is most useful at the edges of a program - informing and adding context to what other programs can send to or get from the program which uses spec.</text>
  </message>
  <message conversation_id="1378">
    <ts>2019-05-07T16:18:43.321100</ts>
    <user>Jasmine</user>
    <text>certainly focused on the the functions that consume, transform, and emit maps of attributes</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-07T17:23:07.321300</ts>
    <user>Gladys</user>
    <text>Thanks!

I am very interested to see how the transition goes : o But I'm also gonna try to make sure and stretch my fp muscles periodically with walk-throughs/tutorials I've been meaning to get to, so I won't totally be leaving clojure behind :wink:</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:25:20.326300</ts>
    <user>Ivana</user>
    <text>Is there a common trick to have `clojure.walk/postwalk` stop walking a data structure similar to how `reduced` can be used to stop `reduce` in walking a list?</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:26:39.326700</ts>
    <user>Sixta</user>
    <text>Not that I recall from the source</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:27:47.327500</ts>
    <user>Jasmine</user>
    <text>Nope, unless you check something stateful like an atom</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:30:17.328400</ts>
    <user>Ivana</user>
    <text>I have a hacky solution that walks a structure twice, but I'll try to come up with something better</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:36:25.328600</ts>
    <user>Harris</user>
    <text>&lt;https://github.com/clojure/tools.analyzer/blob/master/src/main/clojure/clojure/tools/analyzer/ast.clj#L26-L115&gt;</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:36:47.329200</ts>
    <user>Harris</user>
    <text>here's an implementation of `walk`/`prewalk`/`postwalk` over an AST that can be terminated via `reduced`</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:36:59.329500</ts>
    <user>Harris</user>
    <text>should be easy to extract general versions a la `clojure.walk`</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:45:49.329800</ts>
    <user>Ivana</user>
    <text>&lt;@Harris&gt; Cool, thanks</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:45:56.330100</ts>
    <user>Ivana</user>
    <text>I just came up with this ```
    
(defn postwalk-reduced [f form]
  (clojure.walk/walk
   (fn [x]
     (if (reduced? x)
       (unreduced x)
       (postwalk-reduced f x)))
   f
   form))


(defn postwalk-reduced-demo [form]
  (postwalk-reduced (fn [x] (print "Walked: ") (prn x) x) form))

(comment

  (postwalk-reduced-demo {:a (reduced {:b 1})})
  (postwalk-reduced-demo {:a {:b 1}})

  )```</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:46:13.330500</ts>
    <user>Ivana</user>
    <text>Very basic, but seems to do what I want so far</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T08:49:18.330900</ts>
    <user>Ivana</user>
    <text>(i probably have it wrong. I'll experiment a bit more and report later)</text>
  </message>
  <message conversation_id="1379">
    <ts>2019-05-08T09:54:15.332700</ts>
    <user>Ivana</user>
    <text>actually postwalk seems more complicated, but with prewalk I get what i want - stop changing nested datastructures)
```
(do
  (defn prewalk-reduced [f form]
    (clojure.walk/walk
     (fn [x]
       (if (reduced? x)
         x
         (prewalk-reduced f x)))
     unreduced
     (f form)))

  (prewalk-reduced (fn [x]
                      (if (and (seq? x) (contains? #{'fact 'facts} (first x)))
                        (reduced x)
                        (if (= '=&amp;gt; x)
                          '=?&amp;gt;
                          x)))
                    '(5 =&amp;gt; 5
                        1 =&amp;gt; 1
                        (fact
                         2 =&amp;gt; 2
                         (fact =&amp;gt; 1)))))
```</text>
  </message>
  <message conversation_id="1380">
    <ts>2019-05-08T10:12:54.333000</ts>
    <user>Sixta</user>
    <text>is there a predicate for knowing the state of a future? e.g. failed</text>
  </message>
  <message conversation_id="1380">
    <ts>2019-05-08T10:14:14.333300</ts>
    <user>Andrea</user>
    <text>`future-done?`? - ah, failed... hmm</text>
  </message>
  <message conversation_id="1380">
    <ts>2019-05-08T10:18:36.333800</ts>
    <user>Sixta</user>
    <text>Looks like deref-to-map (private in clojure) does this:

```
(let [[ex val]
        (when-not pending
          (try [false (deref o)]
               (catch Throwable e
                 [true e])))])
```</text>
  </message>
  <message conversation_id="1380">
    <ts>2019-05-08T10:25:29.334000</ts>
    <user>Ivana</user>
    <text>makes sense</text>
  </message>
  <message conversation_id="1381">
    <ts>2019-05-08T12:05:13.336800</ts>
    <user>Mariela</user>
    <text>Anyone experienced in solving leaked sockets stuck in CLOSE_WAIT status? as reported in &lt;https://github.com/http-kit/http-kit/issues/326&gt;

Seems relatively common in JVM servers.

&lt;http://www.serverframework.com/asynchronousevents/2011/01/time-wait-and-its-design-implications-for-protocols-and-scalable-servers.html&gt; has some some promising advice which seems to apply to my case:

&amp;gt; Don't design a protocol whereby a client connects to the server every minute and does so by opening a new connection. Instead use a persistent connection design and only reconnect when the connection fails

But still, our usage of http-kit is pretty vanilla so maybe there's a hard-and-fast fix</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:28:53.337800</ts>
    <user>Matha</user>
    <text>Has anyone here experimented semi-extensively (aka more than just a hello world) with GraalVM’s native images for Clojure? I am curious as to whether it works well enough to use in production on a medium-sized project.</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:32:16.339100</ts>
    <user>Rosaline</user>
    <text>pushing such an experimental thing to production, when normal jvms exist and run java bytecode great seems like such a bad decision</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:34:11.340700</ts>
    <user>Rosaline</user>
    <text>like, all my experience with clojure professionally has been writing backend systems with it, and the jvm works great there, so it is just so hard to see any upside</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:34:29.341100</ts>
    <user>Rosaline</user>
    <text>that being said &lt;#CAJN79WNT|graalvm&gt; is a channel that exists and you might try asking there</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:35:00.341500</ts>
    <user>Meagan</user>
    <text>I think &lt;@Matha&gt;’s use case is AWS Lambda</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:35:10.341800</ts>
    <user>Meagan</user>
    <text>we were speaking in &lt;#C03S1L9DN|clojurescript&gt; about it</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:35:21.342100</ts>
    <user>Marlyn</user>
    <text>there is no good, only good for...</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:36:53.343500</ts>
    <user>Marlyn</user>
    <text>I'm pretty down on native-image and my personal opinion is that we spend a disproportionate amount of time fetishizing fast startup</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:37:07.343900</ts>
    <user>Marlyn</user>
    <text>rather than attacking bloat in dependencies</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:37:53.344800</ts>
    <user>Marlyn</user>
    <text>I see a lot of projects and when I run `lein deps :tree` or `clj -Stree` i'm always astonished</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:38:18.345000</ts>
    <user>Rosaline</user>
    <text>it isn't surprising though</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:38:41.345500</ts>
    <user>Rosaline</user>
    <text>a feature of targeting the jvm is getting access to all the libraries, so people go nuts with them</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:38:58.345900</ts>
    <user>Marlyn</user>
    <text>people also like fast food</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:39:02.346200</ts>
    <user>Matha</user>
    <text>indeed; thanks &lt;@Meagan&gt; for specifying :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:39:12.346500</ts>
    <user>Marlyn</user>
    <text>Ring still depends on clj-time and Joda, for example</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:39:37.346900</ts>
    <user>Marlyn</user>
    <text>for one tiny little use case</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:40:08.347500</ts>
    <user>Marlyn</user>
    <text>lots of projects pull in jaxb to do date parsing</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:40:17.347900</ts>
    <user>Marlyn</user>
    <text>an xml binding library, for date parsing</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:40:26.348200</ts>
    <user>Marlyn</user>
    <text>put that in your pipe</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:40:50.348900</ts>
    <user>Marlyn</user>
    <text>all of this slows down startup</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:42:16.350400</ts>
    <user>Matha</user>
    <text>As &lt;@Meagan&gt; said my use case is to run the application in a serverless setting; multi-seconds startup times of the JVM are unacceptable there unfortunately :disappointed:</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:42:18.350500</ts>
    <user>Marlyn</user>
    <text>anyways you're going to sink a lot of time into just getting native-image to compile on anything but the most trivial projects</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:44:06.352300</ts>
    <user>Becki</user>
    <text>&lt;@Clarine&gt; has gone through this recently with clj-kondo</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:52:51.354300</ts>
    <user>Marlyn</user>
    <text>many people have spent time getting graalVM native image to play... you won't be able to take a random jar or dependency and compile it blindly.  Look into `jaotc` &lt;@Matha&gt;, it doesn't have any of the restrictions that native-image has</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:53:53.355400</ts>
    <user>Marlyn</user>
    <text>if Java is ice cream, graal native-image is "frozen dairy treat"
jaotc is still ice cream</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:56:43.355900</ts>
    <user>Matha</user>
    <text>&lt;@Marlyn&gt; I see; and does jaotc work with most hjars then? and does it speed up startups a lot?</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:56:57.356200</ts>
    <user>Marlyn</user>
    <text>yes it should</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:57:07.356500</ts>
    <user>Marlyn</user>
    <text>it is a bug if there is code that jaotc cannot handle</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:57:22.356900</ts>
    <user>Marlyn</user>
    <text>it does reflection, invokedynamic, etc</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:57:28.357200</ts>
    <user>Marlyn</user>
    <text>all the stuff native-image barfs upon</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:57:42.357400</ts>
    <user>Marlyn</user>
    <text>it comes with the jvm</text>
  </message>
  <message conversation_id="1382">
    <ts>2019-05-08T12:57:54.357700</ts>
    <user>Marlyn</user>
    <text>Also based on Graal, totally different strategy though</text>
  </message>
  <message conversation_id="1383">
    <ts>2019-05-08T13:01:18.358000</ts>
    <user>Matha</user>
    <text>Alright I’ll try it out; thank you!</text>
  </message>
  <message conversation_id="1384">
    <ts>2019-05-08T14:51:54.361500</ts>
    <user>Mariela</user>
    <text>The following doesn't appear to work - I see no `meta` changes:

`(alter-var-root #'something vary-meta assoc :deprecated true)`

Any ideas?</text>
  </message>
  <message conversation_id="1384">
    <ts>2019-05-08T14:53:20.361900</ts>
    <user>Becki</user>
    <text>you want `alter-meta!` right?</text>
  </message>
  <message conversation_id="1384">
    <ts>2019-05-08T14:55:07.363000</ts>
    <user>Mariela</user>
    <text>right! thanks, had forgotten about that one :slightly_smiling_face:

I would have expected the `alter-var-root` to work though</text>
  </message>
  <message conversation_id="1384">
    <ts>2019-05-08T14:56:41.363300</ts>
    <user>Becki</user>
    <text>the doc implies it works on the binding not the var</text>
  </message>
  <message conversation_id="1384">
    <ts>2019-05-08T14:56:47.363500</ts>
    <user>Becki</user>
    <text>but don't ¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="1384">
    <ts>2019-05-08T14:56:50.363700</ts>
    <user>Becki</user>
    <text>*know</text>
  </message>
  <message conversation_id="1384">
    <ts>2019-05-08T14:59:24.364100</ts>
    <user>Mariela</user>
    <text>good one, root binding != value mutation</text>
  </message>
  <message conversation_id="1385">
    <ts>2019-05-08T15:28:46.364200</ts>
    <user>Sixta</user>
    <text>I'm trying to create vars to mimic the mathml structure, and there's a tag named `true`, which I obviously can't `def`. Is there a good suffix I should use? I'm reserving `*` for the function versions (unless I go for true** I guess?)</text>
  </message>
  <message conversation_id="1385">
    <ts>2019-05-08T15:37:02.364500</ts>
    <user>Olympia</user>
    <text>`True` maybe?</text>
  </message>
  <message conversation_id="1385">
    <ts>2019-05-08T15:39:01.364600</ts>
    <user>Sixta</user>
    <text>I like that, my only hesitation is that completion for `tr` wouldn't pick it up I guess :thinking_face:</text>
  </message>
  <message conversation_id="1385">
    <ts>2019-05-08T15:46:14.365000</ts>
    <user>Sixta</user>
    <text>Hmm, I'm trying to write a macro which writes a macro, and I'm getting a bit stuck with doing the unquote splicing in the nested defmacro. Any wizardry?</text>
  </message>
  <message conversation_id="1385">
    <ts>2019-05-08T15:50:45.365100</ts>
    <user>Sixta</user>
    <text>Oh, I can literally do a backtick inside a backtick!</text>
  </message>
  <message conversation_id="1386">
    <ts>2019-05-08T16:14:56.366400</ts>
    <user>Clarine</user>
    <text>How fast is the startup of a hello world program with jaotc compared to Graal native?</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T18:31:28.367600</ts>
    <user>Loria</user>
    <text>why doesn't clojure core have a `div` function that truncates toward negative infinity?</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T18:31:53.368100</ts>
    <user>Loria</user>
    <text>seems odd to have both `mod` and `rem` but no counterpart to `quot`</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T18:33:09.368600</ts>
    <user>Latonya</user>
    <text>Probably because it is an uncommon use case?  I don't recall anyone ever asking for one before.</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T18:33:49.368800</ts>
    <user>Latonya</user>
    <text>What languages have such a thing?</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T18:34:21.369100</ts>
    <user>Loria</user>
    <text>Haskell, under the exact same names</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T18:34:38.369300</ts>
    <user>Loria</user>
    <text>&lt;https://stackoverflow.com/questions/8111120/integral-operators-quot-vs-div&gt;</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T18:37:00.371000</ts>
    <user>Loria</user>
    <text>I need it for some basic modulo arithmetic, it's easy enough to define on my own but it seemed like an odd omission</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T18:49:57.372300</ts>
    <user>Nieves</user>
    <text>it seems, that the roots of many decisions in Clojure came from the Java. maybe this case is the same?</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T19:01:11.373300</ts>
    <user>Loria</user>
    <text>I suppose so, couldn't find anything about the matter though</text>
  </message>
  <message conversation_id="1388">
    <ts>2019-05-08T19:01:55.373800</ts>
    <user>Dann</user>
    <text>I'm not sure, but would `Math/floorDiv` be related to what you want?</text>
  </message>
  <message conversation_id="1388">
    <ts>2019-05-08T19:02:33.374400</ts>
    <user>Dann</user>
    <text>returns largest int smaller than the  or equal to the quotient</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T19:04:14.374800</ts>
    <user>Loria</user>
    <text>yes, that's it! Thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T19:04:54.375400</ts>
    <user>Dann</user>
    <text>for performance reasons clojure only goes far from the java Math stuff for opt-in accuracy reasons</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T19:05:21.376000</ts>
    <user>Dann</user>
    <text>so if what I'm looking for mathematically isn't a correctness / precision improvement, I usually check the java.lang.Math API</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T19:07:37.377000</ts>
    <user>Loria</user>
    <text>I see, so the difference is that clojure.core functions take in all sorts of polymorphic types like BigInts and Ratios at the expense of some performance?</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T19:08:50.377900</ts>
    <user>Dann</user>
    <text>more importantly they have contexts where they auto-promote to preserve accuracy, if you opt in</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T19:09:05.378300</ts>
    <user>Dann</user>
    <text>eg. use `+'` instead of `+`, `inc'` instead of `inc`</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T19:09:21.378700</ts>
    <user>Dann</user>
    <text>or use `/` instead of quot or java interop (?)</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-08T19:11:05.379100</ts>
    <user>Loria</user>
    <text>hmm I'll keep that in mind, thanks!</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-08T22:32:44.380300</ts>
    <user>Liliana</user>
    <text>would ^"[B" be the right way to typehint the java equivalent of string[] ?</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-08T22:38:30.381000</ts>
    <user>Liliana</user>
    <text>ah forgot the semicolon in `^"[Ljava.lang.String;"`</text>
  </message>
  <message conversation_id="1387">
    <ts>2019-05-09T00:13:53.381200</ts>
    <user>Jasmine</user>
    <text>Yes</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-09T09:05:33.382600</ts>
    <user>Micheal</user>
    <text>&lt;@Liliana&gt; how would I do that for an array of BigIntegers?</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-09T09:06:14.383100</ts>
    <user>Liliana</user>
    <text>&lt;@Micheal&gt; make an instance of it in clojure and do .getClass interop</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-09T09:07:23.383500</ts>
    <user>Becki</user>
    <text>`(str (class (make-array String 0)))` can spit that out for you i think? &lt;@Liliana&gt;</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-09T09:08:10.383700</ts>
    <user>Liliana</user>
    <text>that works too</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-09T09:08:35.384100</ts>
    <user>Becki</user>
    <text>i bet there's a way to get it without the class keyword at the beginning</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-09T09:10:28.385000</ts>
    <user>Liliana</user>
    <text>all in all, this typehint does look very cryptic to me, but I guess the combination of arrays/types is almost too infinite for a special typehint symbol to be implemented for each and one of them?</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-09T09:13:15.386200</ts>
    <user>Liliana</user>
    <text>well, I'll get used to it, I'd imagine all alternatives would conflict with the reader</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T12:54:38.387800</ts>
    <user>Becki</user>
    <text>`every-pred`'s docstring doesn't guarantee the order of evaluation, just that it will stop on the "first" one that returns a logical false value. Is it improper to do `((every-pred integer? even?) nil)`? Are we guarnteed that `integer?` will check before `even?`?</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T12:56:07.388300</ts>
    <user>Becki</user>
    <text>inverting the order will throw an illegal argument exception</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T12:56:51.388700</ts>
    <user>Becki</user>
    <text>(also says set of predicates which is why first might be ambiguous)</text>
  </message>
  <message conversation_id="1389">
    <ts>2019-05-09T14:48:06.390500</ts>
    <user>Suzann</user>
    <text>You can take a look at the source and see it is just using `and`s. &lt;https://github.com/clojure/clojure/blob/841fa60b41bc74367fb16ec65d025ea5bde7a617/src/clj/clojure/core.clj#L7316-L7354&gt;</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T14:55:56.392300</ts>
    <user>Becki</user>
    <text>&lt;@Suzann&gt; I see the source now allows for that. But I want to know if clojure will guarantee this going forward or if it just happens to be ordered now </text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T14:58:09.394900</ts>
    <user>Suzann</user>
    <text>I know you think the doc string is ambiguous, but arguments are vectors, not sets. It does say it takes the first argument and that it short circuits. Short circuiting is an ordered operation. But more than that Clojure takes backwards compatibility very seriously. Changing the order would be a huge breaking change. It will remain that way for as long as Clojure exists.</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T15:00:14.396800</ts>
    <user>Becki</user>
    <text>I don’t believe the arg is a vector. I understand the backward comparability but I’m not sure this is considered a contract of every pred or just an implementation detail </text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T15:02:18.397500</ts>
    <user>Becki</user>
    <text>And I certainly grant this is unlikely to change.</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T15:02:26.397800</ts>
    <user>Becki</user>
    <text>Just wondering if it can’t change</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T15:16:43.398500</ts>
    <user>Suzann</user>
    <text>&lt;@Becki&gt; What sort of evidence are you looking for that it won't change?</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T15:17:06.399100</ts>
    <user>Becki</user>
    <text>A docstring that the preds are applied left to right</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T15:17:47.400100</ts>
    <user>Becki</user>
    <text>Maps are ordered up to 8 elements. But it’s not in a docstring so relying on it is crazy and it’s best ignored</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T15:19:53.400800</ts>
    <user>Becki</user>
    <text>But also just being told it’s no big deal. Just musings on this one</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T15:44:42.404500</ts>
    <user>Suzann</user>
    <text>The docstring is trying to say that.  But it is just not explicit. "Note that f is short-circuiting in that it will stop execution on the first
  argument". I know you think this is ambiguous, but arguments to a function are ordered and that is what first is referring to here.

The docstring definitely isn't going to change to remove the ambiguity. But this code hasn't changed in 8 years and won't change in the future.</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T15:46:32.404800</ts>
    <user>Becki</user>
    <text>fair enough :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T15:46:49.405200</ts>
    <user>Dann</user>
    <text>unordered arguments would break so many things...</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T15:47:13.405900</ts>
    <user>Suzann</user>
    <text>Also test cases imply this.

```
 ;; 2 preds, short-circuiting
   false    ((every-pred number? odd?) 1 :a)
   false    ((every-pred number? odd?) 1 3 :a)
   false    ((every-pred number? odd?) 1 3 5 :a)
   false    ((every-pred number? odd?) 1 3 5 7 :a)
   false    ((every-pred number? odd?) 1 :a 3 5 7)
```</text>
  </message>
  <message conversation_id="1392">
    <ts>2019-05-09T15:51:29.407200</ts>
    <user>Jennie</user>
    <text>Hello every one. Are there any reporting tools available in Clojure. Any body tried integrating BIRT into your clojure app ?</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:07:17.408800</ts>
    <user>Celestine</user>
    <text>&lt;@Suzann&gt; The docstring is clear that the returned function `f` will short-circuit on the "first argument" but says nothing about the order of the _predicates_. Just the order of arguments to `f`.</text>
  </message>
  <message conversation_id="1390">
    <ts>2019-05-09T16:08:03.409600</ts>
    <user>Celestine</user>
    <text>So I'm with &lt;@Becki&gt; that the docstring gives no explicit guarantees about the order that `f` will apply the predicates (to each argument).</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:08:46.410900</ts>
    <user>Celestine</user>
    <text>It just says it will stop at the first argument for which not all the predicates return false. It could apply the predicates in any order.</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:08:48.411100</ts>
    <user>Suzann</user>
    <text>&lt;@Celestine&gt; Yes, you are right, I misread.</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:09:31.412400</ts>
    <user>Suzann</user>
    <text>It would still be a very large breaking change. And the tests seem to expect that the preds are applied in order.</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:09:41.412700</ts>
    <user>Suzann</user>
    <text>I don't see that happening.</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:10:45.413700</ts>
    <user>Celestine</user>
    <text>Aye, I agree it would be unlikely -- but it is still an implementation detail -- and the core team _has_ changed implementations occasionally in the past that break behavior _that was not guaranteed by the docstring_.</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:11:35.414300</ts>
    <user>Becki</user>
    <text>&lt;@Celestine&gt; you are saying what i was thinking _much_ more concisely and clearly :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:12:11.415000</ts>
    <user>Tammera</user>
    <text>its like a contract, what isn’t promised isn’t guaranteed :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:12:20.415300</ts>
    <user>Celestine</user>
    <text>The confusion stems from both `every-pred` _and_ the function it returns both being variadic.</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:12:40.415400</ts>
    <user>Tammera</user>
    <text>I sometimes wish there was a bit more chaos in programming. Things that werent guaranteed randomly changing behaviour</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:12:55.415700</ts>
    <user>Tammera</user>
    <text>(only in tests!)</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:13:07.416100</ts>
    <user>Meagan</user>
    <text>I expect that a change in `every-pred`’s order would be a breaking change though</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:13:20.416600</ts>
    <user>Meagan</user>
    <text>there’s implicitly _some order_</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:13:35.416900</ts>
    <user>Celestine</user>
    <text>Years ago, I worked on a C compiler system that deliberately had variable behavior for undefined and unspecified situations :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:13:36.417100</ts>
    <user>Meagan</user>
    <text>the docstring just doesn’t say which one exactly</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:14:02.417400</ts>
    <user>Tammera</user>
    <text>Yeah, I toyed with the idea to make a map/set impl that randomized its order</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:14:11.417700</ts>
    <user>Meagan</user>
    <text>so I wouldn’t expect the order to change</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:14:31.418000</ts>
    <user>Celestine</user>
    <text>It was a code checking system, so it detected these situations explicitly in the runtime and handled them -- rather than just letting things blow up or always behaving in a predictable manner :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:14:51.418800</ts>
    <user>Celestine</user>
    <text>It could apply the predicates all in parallel :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:14:59.419000</ts>
    <user>Becki</user>
    <text>calm down djikstra :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:15:23.419600</ts>
    <user>Becki</user>
    <text>i think i remember him envisioning conds all working like that. thought it was right around the corner</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:16:15.420200</ts>
    <user>Meagan</user>
    <text>I think that’s contra to the _short circuiting_. :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:19:24.421200</ts>
    <user>Becki</user>
    <text>&lt;@Marlyn&gt; did you have thoughts? I saw you typing</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:20:56.422000</ts>
    <user>Marlyn</user>
    <text>can a man rage type into an input box and then delete it in peace? :joy:</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:21:01.422200</ts>
    <user>Becki</user>
    <text>hahaha</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:21:18.422900</ts>
    <user>Becki</user>
    <text>absolutely. but i always enjoy your thoughts</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:21:21.423100</ts>
    <user>Tammera</user>
    <text>hahah, typing notifications are so annoying</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:21:22.423200</ts>
    <user>Marlyn</user>
    <text>i was going to say that there is implied order</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:21:42.423700</ts>
    <user>Marlyn</user>
    <text>and changing order is a solution -- what's the problem?</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:21:56.424100</ts>
    <user>Marlyn</user>
    <text>can always augment the docstring</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:21:57.424200</ts>
    <user>Tammera</user>
    <text>type… think… revisit… remove</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:30:35.426200</ts>
    <user>Antione</user>
    <text>&lt;https://dev.clojure.org/jira/browse/CLJ-1872&gt; - empty? is broken for transient collections

I spent a little time staring at what it would take to submit a patch for this. Do I understand correctly that RT seqFrom and RT canSeq would need to include logic for TransientVector and company?</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:31:09.426700</ts>
    <user>Meagan</user>
    <text>you might try &lt;#C06E3HYPR|clojure-dev&gt;</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:31:26.427200</ts>
    <user>Antione</user>
    <text>I might, figured I'd throw it out here first.</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:31:31.427500</ts>
    <user>Meagan</user>
    <text>I’m not super familiar with the RT stuff</text>
  </message>
  <message conversation_id="1393">
    <ts>2019-05-09T16:38:53.428100</ts>
    <user>Antione</user>
    <text>posted it over there</text>
  </message>
  <message conversation_id="1391">
    <ts>2019-05-09T16:48:26.429400</ts>
    <user>Dann</user>
    <text>I feel like I've seen this pattern over and over - transient collections working for a specific use case (blindly accumulate items in one big reduce then persist), and all kinds of ops we expect for collections not working or working weirdly on transient collections</text>
  </message>
  <message conversation_id="1393">
    <ts>2019-05-09T16:49:40.430300</ts>
    <user>Dann</user>
    <text>the bugs get fixed eventually (I don't know if any of the collection features have been called wontfix yet), but they keep coming up</text>
  </message>
  <message conversation_id="1393">
    <ts>2019-05-09T16:49:49.430600</ts>
    <user>Dann</user>
    <text>or maybe my memory is skewed</text>
  </message>
  <message conversation_id="1393">
    <ts>2019-05-09T16:50:39.431400</ts>
    <user>Dann</user>
    <text>also iirc at best that transient coll will give you ~15% perf boost, and that's if it's in your main bottleneck</text>
  </message>
  <message conversation_id="1393">
    <ts>2019-05-09T17:14:21.432200</ts>
    <user>Antione</user>
    <text>&lt;@Dann&gt; yes, there definitely are more than a few transient tickets</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:11:18.439100</ts>
    <user>Nisha</user>
    <text>I'm trying to write a small wrapper of jline, but git lost in deciding the pattern. Do I wrap the constructor and provide functions that takes an object a parameter, or do I instantiate and hide the jline class in the wrapper namespace in a var or atom, and provide functions that implicitly use the hidden object?</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:12:04.440200</ts>
    <user>Nisha</user>
    <text>Could someone point me to some tutorial or examples?</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:18:32.440800</ts>
    <user>Meagan</user>
    <text>I think that depends on the answer of: would you ever need _two_ instances of the jline class?</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:27:18.443200</ts>
    <user>Bree</user>
    <text>At some point, the answer to that is going to be yes. I would not hide the object. If you do, then provide multi-arity functions: one without the object that uses your ns def and one that takes the object explicitly </text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:29:14.445000</ts>
    <user>Nisha</user>
    <text>If I don’t hide that object, the code to use it would be something like:
```
(def line-reader (mywrapper/line-reader))
(mywrapper/readline line-reader "this is a prompt")
```</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:30:05.445700</ts>
    <user>Nisha</user>
    <text>Does this look good?</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:30:32.446100</ts>
    <user>Meagan</user>
    <text>yep, that seems good :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:31:13.447200</ts>
    <user>Meagan</user>
    <text>maybe you could provide a 1-arity version that automatically constructs the reader</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:31:37.447900</ts>
    <user>Meagan</user>
    <text>I’m not familiar with line readers or jline specifically, so it’s hard for me to comment</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:31:42.448000</ts>
    <user>Nisha</user>
    <text>I somehow feel it’s smelly, but don’t know where and how to fix it. Probably because it’s also side-effect code.</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:32:15.448600</ts>
    <user>Meagan</user>
    <text>like take e.g. a database library. you’ll almost always create a db connection object, and pass that to all of your other functions (query, transact, etc.)</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:33:41.449900</ts>
    <user>Meagan</user>
    <text>I guess another question could be: what would happen if you created an object _every time_ you did something with the jline class?</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:36:36.451300</ts>
    <user>Nisha</user>
    <text>I don’t know. That might work, but then I will need to do the same for all the util classes, like completer, highlighter and maybe history handler.</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:37:51.452100</ts>
    <user>Nisha</user>
    <text>then I’ll have to save the states, for example completion candidates, outside the object, like in an atom or something.</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:38:51.452700</ts>
    <user>Nisha</user>
    <text>Hmm I just feel java and clojure don’t work alone well.</text>
  </message>
  <message conversation_id="1394">
    <ts>2019-05-10T00:54:05.453500</ts>
    <user>Meagan</user>
    <text>sounds like you have some mutable resource you’re managing, which you should provide as an object you can pass to the various functions</text>
  </message>
  <message conversation_id="1395">
    <ts>2019-05-10T01:06:55.454100</ts>
    <user>Celestine</user>
    <text>Wrapping an OOP library with a function layer that creates and passes the objects is really no improvement.</text>
  </message>
  <message conversation_id="1395">
    <ts>2019-05-10T01:07:18.454700</ts>
    <user>Celestine</user>
    <text>If you can figure out how to wrap the library with _data_ and a simple function API, you have a win.</text>
  </message>
  <message conversation_id="1395">
    <ts>2019-05-10T01:07:38.455200</ts>
    <user>Celestine</user>
    <text>Otherwise you might as well just use the underlying Java OOP library with interop.</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T02:01:00.455300</ts>
    <user>Nisha</user>
    <text>Yeah that’s how I feel, not really an improvement. It’s just `(.readline obj)` vs `(readline obj)`</text>
  </message>
  <message conversation_id="1395">
    <ts>2019-05-10T02:01:44.455900</ts>
    <user>Nisha</user>
    <text>&lt;@Celestine&gt; But what do you mean by wrap with data and simple function API? Could you give me an example?</text>
  </message>
  <message conversation_id="1395">
    <ts>2019-05-10T03:05:50.456000</ts>
    <user>Tarsha</user>
    <text>I think &lt;https://github.com/cognitect-labs/aws-api&gt; is a great example</text>
  </message>
  <message conversation_id="1397">
    <ts>2019-05-10T04:43:02.467700</ts>
    <user>Antione</user>
    <text>I think a more accessible version of what’s being described is something like hiccup or ring.</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:00:40.474200</ts>
    <user>Sonny</user>
    <text>&lt;@Nisha&gt; you may find ‘memfn’ from the core library a useful too when creating these thin idiomatic wrappers around Java libraries. I agree with &lt;@Celestine&gt;, re: not getting too deep into the rabbit hole. It’s entirely possible when doing something like this, to write a lot of code that really doesn’t end up improving the situation, but ‘memfn’ can often be used to create a very thin layer that allows the calling code to appear slightly more idiomatic. </text>
  </message>
  <message conversation_id="1397">
    <ts>2019-05-10T05:04:48.475400</ts>
    <user>Mireille</user>
    <text>someone mentioned to me it's possible to add a dependency to deps.edn and not have to restart the java process. is that true, and how would I set up my app to do that?</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:17:40.476200</ts>
    <user>Leeann</user>
    <text>It is true</text>
  </message>
  <message conversation_id="1397">
    <ts>2019-05-10T05:18:55.476600</ts>
    <user>Clarine</user>
    <text>&lt;@Mireille&gt; it’s called add-lib, it’s a alpha-omega feature</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:20:06.477000</ts>
    <user>Sonny</user>
    <text>What's "alpha-omega"?</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:20:11.477200</ts>
    <user>Leeann</user>
    <text>&lt;http://insideclojure.org/2018/05/04/add-lib/&gt;</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:20:43.477900</ts>
    <user>Clarine</user>
    <text>&lt;@Sonny&gt; it’s more alpha than alpha</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:21:48.479000</ts>
    <user>Sonny</user>
    <text>Haha! Yeah, honestly the thought had crossed my mind before that by calling all these things "alpha", there was going to be no names left for stuff that has yet to make it into the alpha. Cache invalidation and naming things :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:22:11.479300</ts>
    <user>Leeann</user>
    <text>And off-by-one errors</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:22:26.479500</ts>
    <user>Clarine</user>
    <text>OutofNamesException</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:22:37.479800</ts>
    <user>Sonny</user>
    <text>:laughing:</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:23:05.480400</ts>
    <user>Leeann</user>
    <text>On that note, my son told me (when I praised him): If everything I do is great, everything I do is average.</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:24:10.480700</ts>
    <user>Clarine</user>
    <text>can’t argue with your son</text>
  </message>
  <message conversation_id="1396">
    <ts>2019-05-10T05:24:32.480900</ts>
    <user>Leeann</user>
    <text>Nope</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T07:58:09.484000</ts>
    <user>Raina</user>
    <text>When using `go-loop` in core.async... can the logic in the loop occur concurrently... by that I mean if I have input channel with 10 items, and I poll the channel in go-loop and process an item, will the items get processed concurrently?</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T08:22:18.485800</ts>
    <user>Murray</user>
    <text>Why `when-let` only support one pair binding?</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T08:23:39.487000</ts>
    <user>Murray</user>
    <text>&lt;@Raina&gt; nope, If you have only one `go-loop`, it will process item one by one. If you want parallel processing, you can use `pipeline` or `pipeline-blocking`.</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T08:26:26.488200</ts>
    <user>Raina</user>
    <text>thank you</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T08:27:05.488600</ts>
    <user>Raina</user>
    <text>So basically that is about the same concurrency as if using a single agent</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T08:28:15.489600</ts>
    <user>Lavonia</user>
    <text>Yeah. An agent will have an actual thread though so there's no overhead of IOC threads.</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T08:30:32.490900</ts>
    <user>Raina</user>
    <text>So the benefit of core.async is only there if I spawn a lot of go-blocks, because they can share a small number of threads</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T09:05:55.492700</ts>
    <user>Raina</user>
    <text>So if I have like 1 continuous process per user and I have 1000 users, then I should make a `go-loop` for each person and it will work with limited number of threads?</text>
  </message>
  <message conversation_id="1399">
    <ts>2019-05-10T09:34:41.493100</ts>
    <user>Lavonia</user>
    <text>Yeah.</text>
  </message>
  <message conversation_id="1399">
    <ts>2019-05-10T09:35:30.494000</ts>
    <user>Lavonia</user>
    <text>But if you have a bunch of independent things to do. This might not be the best approach. `pmap` and reducers might be a better way to go about it.</text>
  </message>
  <message conversation_id="1399">
    <ts>2019-05-10T09:36:03.494700</ts>
    <user>Lavonia</user>
    <text>_core.async_ is more appropriate when the processes have to communicate with each other (using channels)</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T09:50:08.495600</ts>
    <user>Raina</user>
    <text>The biggest obstacle to naive implementation for me is that some processes have to be throttled in my case, and if I use naive sleeping in the process, then it takes up a thread.</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T10:06:55.496200</ts>
    <user>Fredda</user>
    <text>Yeah, core.async is good for that too</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T10:08:22.497400</ts>
    <user>Murray</user>
    <text>&lt;@Raina&gt; you should not sleep in go block.</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T10:20:12.497900</ts>
    <user>Raina</user>
    <text>I know, but I think I've found a solution</text>
  </message>
  <message conversation_id="1398">
    <ts>2019-05-10T10:21:25.498600</ts>
    <user>Fredda</user>
    <text>You usually don't have to worry about sleeping in go blocks. When waiting on channels they sleep automatically.</text>
  </message>
  <message conversation_id="1400">
    <ts>2019-05-10T11:05:34.499300</ts>
    <user>Shayla</user>
    <text>I have a quick question about a micro-benchmark i'm running</text>
  </message>
  <message conversation_id="1400">
    <ts>2019-05-10T11:06:26.000200</ts>
    <user>Shayla</user>
    <text>using &lt;https://github.com/hugoduncan/criterium&gt;, i'm checking two different versions of the same code, and i'm confused why the single-pass version that uses reduce is slower than the version that does multiple passes with filter and map</text>
  </message>
  <message conversation_id="1400">
    <ts>2019-05-10T11:07:22.000700</ts>
    <user>Shayla</user>
    <text>reduce version:
```
(-&amp;gt;&amp;gt; (server-cards)
     (reduce (fn [acc card]
               (if (ice? card)
                 (concat acc (split (:subtype card) #" - "))
                 acc))
             [])
     distinct
     sort)
```</text>
  </message>
  <message conversation_id="1400">
    <ts>2019-05-10T11:08:23.002000</ts>
    <user>Shayla</user>
    <text>`(server-cards)` returns a list of maps, `ice?` checks the `:card-type` attribute to see if it's an `ICE` type, `:subtype` is a string of course</text>
  </message>
  <message conversation_id="1400">
    <ts>2019-05-10T11:08:56.002200</ts>
    <user>Shayla</user>
    <text>filter/map version:
```
(-&amp;gt;&amp;gt; (server-cards)
     (filter ice?)
     (map :subtype)
     (mapcat #(split % #" - "))
     distinct
     sort)
```</text>
  </message>
  <message conversation_id="1400">
    <ts>2019-05-10T11:10:42.003000</ts>
    <user>Shayla</user>
    <text>are they doing different things, and i don't realize it?</text>
  </message>
  <message conversation_id="1400">
    <ts>2019-05-10T11:18:30.004500</ts>
    <user>Shayla</user>
    <text>`(-&amp;gt;&amp;gt; (server-cards) (reduce (fn [acc card] (if (ice? card) (conj acc (split (:subtype card) #" - ")) acc)) #{}) sort)` (conj and #{}) seems to be the fastest, at roughly half the time of the filter/map version</text>
  </message>
  <message conversation_id="1400">
    <ts>2019-05-10T11:24:27.006900</ts>
    <user>Shayla</user>
    <text>Ah, it's the repeated calls to `concat` in the reduce version. using `conj` with a `'()` makes it faster than the filter/map version, from a mean of 1 ms to about 770 us, and using a set instead of calling distinct at the end reduces it further to 600 us</text>
  </message>
  <message conversation_id="1400">
    <ts>2019-05-10T11:24:36.007200</ts>
    <user>Shayla</user>
    <text>well, thanks for listening, y'all! lol</text>
  </message>
  <message conversation_id="1401">
    <ts>2019-05-10T11:44:08.007300</ts>
    <user>Roslyn</user>
    <text>Side note: I really like combining criterium benchmarks with clj-async-profiler, so I can see both time spent and where it was spent</text>
  </message>
  <message conversation_id="1402">
    <ts>2019-05-10T12:43:50.008200</ts>
    <user>Leda</user>
    <text>Does anyone know a good way to auto generate API requests/responses tests by making use of an OpenAPI 3.0 specs?</text>
  </message>
  <message conversation_id="1402">
    <ts>2019-05-10T12:44:57.009400</ts>
    <user>Leda</user>
    <text>I've been searching for some kind of solution based on this, and i've found in other languages, but nothing using Clojure, i thought it would be nice for me to try to create a lib/lein plugin that could do this</text>
  </message>
  <message conversation_id="1402">
    <ts>2019-05-10T12:45:40.010300</ts>
    <user>Leda</user>
    <text>I REFUSE manually writing tests for my API Endpoints since i have it well documented using OpenAPI 3.0</text>
  </message>
  <message conversation_id="1402">
    <ts>2019-05-10T12:46:36.011000</ts>
    <user>Leda</user>
    <text>and certainly i could generate automated tests for it because the specs from OpenAPI have all the necessary info to do so</text>
  </message>
  <message conversation_id="1402">
    <ts>2019-05-10T12:47:32.011900</ts>
    <user>Leda</user>
    <text>i just want to make sure that if i could make something like this in clojure, this would be appreciated or used by other Dev's</text>
  </message>
  <message conversation_id="1403">
    <ts>2019-05-10T13:03:46.016600</ts>
    <user>Sophia</user>
    <text>I had a interesting conversation recently with two people who work in IT/networking/cybersecurity who said they had mostly given up on programming as a frustrating and tedious task (having programmed only in Java and Python). I tried to sell them on Clojure and the part that interested them the most was the idea that programming could be interactive via the REPL. I told them about how you can build programs while evaluating each form inline and debug by revisiting your small pure functions instead of stepping through with breakpoints or printlns. Good reminder to focus on emphasizing interactivity when evangelizing as it truly is the most intuitive way to write programs!</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:35:26.017200</ts>
    <user>Zona</user>
    <text>I don't know anything about Java HTTP servers, how do I pick between the available Clojure ones? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:35:58.017700</ts>
    <user>Meagan</user>
    <text>go with Jetty if you're just starting out. it's fairly easy to get started and well supported</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:36:04.018100</ts>
    <user>Meagan</user>
    <text>lots of guides + examples using Ring and Jetty</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:40:25.018500</ts>
    <user>Leda</user>
    <text>i started with Ring also</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:40:50.019300</ts>
    <user>Leda</user>
    <text>in fact i didn't knew anything about backend development when i started with clojure. i learned by looking to real world examples</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:41:21.019900</ts>
    <user>Celestine</user>
    <text>We use the embedded Jetty server (with Ring, Compojure, Component, and Selmer -- for HTML templates) at work -- heavily in production.</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:42:51.020200</ts>
    <user>Meagan</user>
    <text>I'm not sure you need this to be in Clojure? It sounds like you want to send requests based on a Swagger spec, right?</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:43:54.021500</ts>
    <user>Leda</user>
    <text>&lt;@Celestine&gt; when building API's, do you ever make use of Selmer/HTML templates?? i don't see how this would be possible/useful when building REST apis, just asking to know if i'm missing something</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:46:43.022000</ts>
    <user>Celestine</user>
    <text>&lt;@Leda&gt; No, if we're not producing HTML pages from a web app, we don't use Selmer.</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:47:06.022600</ts>
    <user>Celestine</user>
    <text>Well, we also use Selmer to render HTML emails that we send to our members -- so we use Selmer inside REST APIs for that.</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:47:16.022800</ts>
    <user>Leda</user>
    <text>oh nice to know</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:47:55.023400</ts>
    <user>Leda</user>
    <text>do you ever built a medium/large product directly rendering HTML in server?</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:48:12.023600</ts>
    <user>Leda</user>
    <text>i mean, entirely</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:48:39.024200</ts>
    <user>Leda</user>
    <text>i imagine if this is easier to maintain than a REST API</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:57:00.026500</ts>
    <user>Zona</user>
    <text>I think it's easier for a small/1 person team because you don't need to maintain a separate front-end build process</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:57:13.026800</ts>
    <user>Dann</user>
    <text>forcing a global singleton on an end user is pretty much never a good idea</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:57:27.027200</ts>
    <user>Zona</user>
    <text>and you get SEO and page load speed benefits for free</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T13:58:55.027300</ts>
    <user>Dann</user>
    <text>pretending something that is intrinsically about side effects is somehow functional is a bad idea without a global system for managing state. We don't and won't have a global state management system in clojure (jline is there for its side effects, right?)</text>
  </message>
  <message conversation_id="1404">
    <ts>2019-05-10T14:01:59.028800</ts>
    <user>Celestine</user>
    <text>&lt;@Leda&gt; Prior to Clojure, our main member-facing app was server-side-rendered HTML. We have a few smaller apps now that do that (in Clojure, with Selmer), but we've mostly replaced the SSR HTML with a React.js-based SPA backed by a REST API.</text>
  </message>
  <message conversation_id="1405">
    <ts>2019-05-10T18:51:59.033400</ts>
    <user>Clemente</user>
    <text>I had an idea about extending one protocol onto another protocol; doesn't seem like that's doable. I know it opens up a rats nest of inheritance issues, but still feels like something useful.  My scenario was to define a protocol InterceptorComponent that defines some callbacks, then extend io.pedestal.interceptor.IntoComponent onto it.  My imagined behavior is that this would be effectively equivalent to extending IntoComponent onto any record that implements the InterceptorComponent protocol.</text>
  </message>
  <message conversation_id="1406">
    <ts>2019-05-10T19:36:49.034600</ts>
    <user>Meagan</user>
    <text>so basically, `IntoComponent` uses `InterceptorComponent`’s methods in some way and as long as a type implements `InterceptorComponent`, you can also use `IntoComponent` methods?</text>
  </message>
  <message conversation_id="1407">
    <ts>2019-05-10T20:27:02.038400</ts>
    <user>Bee</user>
    <text>Basically what you're saying is that `InterceptorComponent` describes a superset of `IntoComponent` behavior and thus anything that extends `InterceptorComponent` implicitly can implement `IntoComponent`. Trying to extend the one protocol onto the other lies madness, but you could write an adapter fn that returned a `reify`ed instance with implementations for both `IntoComponent` and `InterceptorComponent`. It would be indistinguishable from the input value (with regards to the `InterceptorComponent` protocol...) and could also participate in the `IntoComponent` protocol.</text>
  </message>
  <message conversation_id="1407">
    <ts>2019-05-10T20:32:17.041100</ts>
    <user>Bee</user>
    <text>Alternatively, if you actually could implement `IntoComponent` with your new protocol, an implementation of `IntoComponent` can be expressed entirely in terms of the interface `InterceptorComponent`. Extension is just saving you having to write the `IntoComponent` implementations when you're defining your record/type, so why not macro your way out of that hole with e.g. `definterceptorcomponent` which expands to `deftype` with the `IntoComponent` protocol specs tacked onto the end of the user supplied body?</text>
  </message>
  <message conversation_id="1406">
    <ts>2019-05-10T23:17:17.043300</ts>
    <user>Jasmine</user>
    <text>it's intentional that protocols cannot be extended onto protocols. that said, protocols are nothing more than maps of functions and as such, there are ways to programatically get this effect. generally though, I've had better luck by extending a protocol to Object, then using conditional code to dynamically extend the concrete type you've received (which satisfies some secondary protocol) to the first protocol</text>
  </message>
  <message conversation_id="1408">
    <ts>2019-05-11T05:47:41.044600</ts>
    <user>Johnathon</user>
    <text>are there tools to provide performance details (mainly time-to-run) of all functions called from a parent function at runtime? i have a main function that kicks off loads of queries, calculations etc. i could `time` each one, but given how nested this code is i was hoping for an automatic solution.</text>
  </message>
  <message conversation_id="1408">
    <ts>2019-05-11T06:07:10.044900</ts>
    <user>Min</user>
    <text>&lt;https://github.com/clojure-goes-fast/clj-async-profiler&gt; is quite good</text>
  </message>
  <message conversation_id="1408">
    <ts>2019-05-11T06:23:47.045200</ts>
    <user>Johnathon</user>
    <text>cheers!</text>
  </message>
  <message conversation_id="1409">
    <ts>2019-05-11T08:44:24.047900</ts>
    <user>Nisha</user>
    <text>Hi I’m trying to write my own client for a telnet-like protocol, for a mud game. I need to parse a byte stream, and the type of messages are identified by some special bytes, you know, just like telnet.</text>
  </message>
  <message conversation_id="1409">
    <ts>2019-05-11T08:44:51.048900</ts>
    <user>Nisha</user>
    <text>Is there a lib that I can use to help parse the byte stream?</text>
  </message>
  <message conversation_id="1410">
    <ts>2019-05-11T10:02:53.049100</ts>
    <user>Marchelle</user>
    <text>&lt;https://github.com/ztellman/byte-streams&gt;</text>
  </message>
  <message conversation_id="1409">
    <ts>2019-05-11T10:58:32.049400</ts>
    <user>Nisha</user>
    <text>Thanks, but it doesn’t seem to be for parsing bytes?</text>
  </message>
  <message conversation_id="1411">
    <ts>2019-05-11T12:37:17.052600</ts>
    <user>Nisha</user>
    <text>Is anyone using `gerritjvv/clj-tcp`?   Somehow I’m getting error with it.</text>
  </message>
  <message conversation_id="1411">
    <ts>2019-05-11T12:37:55.053500</ts>
    <user>Murray</user>
    <text>can I package all the dependencies in one uberjar, and my code in another jar. So I can deploy the dependencies only once(if no dependency changes).</text>
  </message>
  <message conversation_id="1412">
    <ts>2019-05-11T13:16:00.054500</ts>
    <user>Nannette</user>
    <text>Is it possible to use Cognitect's AWS library with Ring? I reported one dependency issue when using both libraries in &lt;#C09N0H1RB|aws&gt; channel.</text>
  </message>
  <message conversation_id="1412">
    <ts>2019-05-11T13:25:53.056100</ts>
    <user>Celestine</user>
    <text>&lt;@Nannette&gt; looks like a dependency conflict with Jetty which you should be able to fix by specifying a compatible version directly in `project.clj`. </text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:26:03.056300</ts>
    <user>Antwan</user>
    <text>Simple question</text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:26:12.056800</ts>
    <user>Antwan</user>
    <text>how do I execute a full sql file with jdbc</text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:26:26.057300</ts>
    <user>Antwan</user>
    <text>just a bunch of `CREATE TABLE IF NOT EXISTS` calls</text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:27:42.059000</ts>
    <user>Celestine</user>
    <text>&lt;@Antwan&gt; slurp it in, break it into statements (str/split on ;), and call db-do-commands on each one</text>
  </message>
  <message conversation_id="1412">
    <ts>2019-05-11T13:29:46.059900</ts>
    <user>Nannette</user>
    <text>&lt;@Celestine&gt;, thanks. I'll check that tomorrow.</text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:30:15.060400</ts>
    <user>Antwan</user>
    <text>None</text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:30:19.060800</ts>
    <user>Antwan</user>
    <text>like that?</text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:31:29.061100</ts>
    <user>Celestine</user>
    <text>Yeah something like that </text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:32:15.062000</ts>
    <user>Celestine</user>
    <text>When I'm at my computer I'll pull up the code we use at work to do the same thing </text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:32:33.062300</ts>
    <user>Antwan</user>
    <text>```
Execution error (SQLException) at org.sqlite.core.NativeDB/throwex (NativeDB.java:478).
The prepared statement has been finalized
```</text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:33:16.063000</ts>
    <user>Celestine</user>
    <text>You probably need to tell db-do-commands not to use a transaction </text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:34:02.063400</ts>
    <user>Antwan</user>
    <text>same error</text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:38:03.066300</ts>
    <user>Celestine</user>
    <text>Hard to debug when I'm on my phone :upside_down_face: If you can post more details in &lt;#C1Q164V29|sql&gt; I can take a look when I'm at my computer later </text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:38:13.066600</ts>
    <user>Becki</user>
    <text>I remember looking into migratus for something. But use a different separator and split on that. I thought I remember the underlying thing not liking terminating semi colons</text>
  </message>
  <message conversation_id="1413">
    <ts>2019-05-11T13:46:16.068800</ts>
    <user>Erna</user>
    <text>I don't know if this is the issue, but `clojure.string/split` has some non-intuitive behavior with separators at the end. TLDR; use a negative `limit` parameter. See &lt;https://clojuredocs.org/clojure.string/split&gt; for some examples. I got bitten by this recently.</text>
  </message>
  <message conversation_id="1414">
    <ts>2019-05-11T13:51:52.070000</ts>
    <user>Becki</user>
    <text>I think the end result was that the batched statements can’t have terminating semicolons (this was on Postgres not sure what your dB is)</text>
  </message>
  <message conversation_id="1415">
    <ts>2019-05-11T14:43:05.070500</ts>
    <user>Celestine</user>
    <text>The split ended up producing an empty SQL statement and that's what throws the exception.</text>
  </message>
  <message conversation_id="1415">
    <ts>2019-05-11T14:44:21.071600</ts>
    <user>Celestine</user>
    <text>`(str/split contents #";\s*\n")` or `(str/split contents #";.*\n")`</text>
  </message>
  <message conversation_id="1416">
    <ts>2019-05-11T17:08:08.072800</ts>
    <user>Murray</user>
    <text>should I use `*ns*` to get the qualified symbol in macro? like `(my-macro (+ 1 2))`, I want `+` as `clojure.core/+`.</text>
  </message>
  <message conversation_id="1416">
    <ts>2019-05-11T17:17:29.073300</ts>
    <user>Kori</user>
    <text>You want to use syntax quoting in this case

``` 
`x =&amp;gt; clojure.core/+
'+ =&amp;gt; x
```</text>
  </message>
  <message conversation_id="1416">
    <ts>2019-05-11T17:25:20.074500</ts>
    <user>Murray</user>
    <text>Thanks for the reply. but the code in (my-macro ...) will not use syntax quote.</text>
  </message>
  <message conversation_id="1416">
    <ts>2019-05-11T17:25:35.074700</ts>
    <user>Murray</user>
    <text>is there a way to know the namespace of that symbol?</text>
  </message>
  <message conversation_id="1417">
    <ts>2019-05-11T17:42:20.074900</ts>
    <user>Celestine</user>
    <text>Can you explain more about what you're trying to do?</text>
  </message>
  <message conversation_id="1417">
    <ts>2019-05-11T17:49:08.075100</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (defmacro my-macro [x] (first x))
#'user/my-macro
user=&amp;gt; (my-macro (+ 1 2 ))
#object[clojure.core$_PLUS_ 0x1f38957 "clojure.core$_PLUS_@1f38957"]
user=&amp;gt;  ```  The symbol is `clojure.core/+` here.</text>
  </message>
  <message conversation_id="1417">
    <ts>2019-05-11T18:06:40.075300</ts>
    <user>Celestine</user>
    <text>In case this helps: ```user=&amp;gt; (defmacro my-macro [x] (.ns (resolve (first x))))
#'user/my-macro
user=&amp;gt; (my-macro (+ 1 2 ))
#object[clojure.lang.Namespace 0x707b1a44 "clojure.core"]
user=&amp;gt;                ```</text>
  </message>
  <message conversation_id="1416">
    <ts>2019-05-11T18:16:27.075500</ts>
    <user>Murray</user>
    <text>looks great. I'm trying to write a macro that can be used in both `-&amp;gt;&amp;gt;` and `-&amp;gt;`.</text>
  </message>
  <message conversation_id="1416">
    <ts>2019-05-11T18:17:17.075700</ts>
    <user>Murray</user>
    <text>```
(-&amp;gt; (call (/ 1 0))
    (then (inc))
    (then (/ 2)))
;; =&amp;gt; #error {
;;  :cause "Divide by zero"
;;  :via
;;  [{:type java.lang.ArithmeticException
;;    :message "Divide by zero"
;;    :at [clojure.lang.Numbers divide "Numbers.java" 188]}]
;;  :trace ...}

(-&amp;gt; (call 1)
    (then (inc))
    (then (/ 3)))
;; =&amp;gt; 2/3

(-&amp;gt;&amp;gt; (call 1)
     (then (inc))
     (then (/ 3)))
;; =&amp;gt; 3/2

(some-&amp;gt; {:a 1 :b 2}
        (then (:a))
        (then (/ 2)))
;; =&amp;gt; 1/2

(some-&amp;gt;&amp;gt; {:a 1 :b 2}
         (then (:a))
         (then (/ 2)))
;; =&amp;gt; 2

(some-&amp;gt; {:a 1 :b 2}
        (then (:c))
        (then (/ 2)))
;; =&amp;gt; nil

(some-&amp;gt;&amp;gt; {:a 1 :b 2}
         (then (:c))
         (then (/ 2)))
;; =&amp;gt; nil
```
This is what I have currently.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T00:59:33.077200</ts>
    <user>Jennie</user>
    <text>anybody used `toucan`? I am looking for help on alias name.  Ex: `SELECT column_name AS alias_name FROM table_name;`</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:02:47.077900</ts>
    <user>Jennie</user>
    <text>&lt;@Marylouise&gt; ^^</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:06:27.078500</ts>
    <user>Celestine</user>
    <text>&lt;@Jennie&gt; Not sure I see the point of using `toucan`. It doesn't look very idiomatic to me.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:06:48.078900</ts>
    <user>Celestine</user>
    <text>Why not use pure SQL?</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:09:20.080300</ts>
    <user>Marylouise</user>
    <text>&lt;@Jennie&gt; the great thing about toucan is that you can use honeysql
```
(-&amp;gt; (select :a [:b :bar] :c [:d :x])
    (from [:foo :quux])
    (where [:= :quux.a 1] [:&amp;lt; :bar 100])
    sql/format)
=&amp;gt; ["SELECT a, b AS bar, c, d AS x FROM foo quux WHERE (quux.a = ? AND bar &amp;lt; ?)" 1 100]
```</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:10:37.082300</ts>
    <user>Celestine</user>
    <text>Well, that doesn't use `toucan` at all -- that's the great thing about HoneySQL and `clojure.java.jdbc` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:11:00.082600</ts>
    <user>Marylouise</user>
    <text>&lt;@Celestine&gt; how is toucan not idiomatic?</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:11:14.083300</ts>
    <user>Celestine</user>
    <text>It tries hard to be an ORM :disappointed:</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:12:12.084300</ts>
    <user>Celestine</user>
    <text>The fact that someone has to ask about something as basic as a column alias says there's a problem with `toucan` if it doesn't support that.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:12:17.084500</ts>
    <user>Marylouise</user>
    <text>Yes that's the good thing about toucan (vs korma for example), it's still data driven</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:13:08.085700</ts>
    <user>Marylouise</user>
    <text>Use toucan where it makes sense, otherwise use honeysql</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:15:12.089300</ts>
    <user>Celestine</user>
    <text>It uses a lot of global dynamic variables as well, which is terrible practice. It makes using multiple databases nigh on impossible.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:16:12.092000</ts>
    <user>Marylouise</user>
    <text>Agreed, the globals aren't nice. PRs welcome :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:16:24.092400</ts>
    <user>Jennie</user>
    <text>&lt;@Celestine&gt; &lt;@Marylouise&gt;  Thanks for the reply. First I looked at hugsql, but my team felt it is too much laborious which contradicted my reasoning to go with Clojure (our app is in Kotlin). I find toucan is enough to avoid too much of repetition and also I am convinced in case of more complex SQL there is HoneySql.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:18:05.093100</ts>
    <user>Celestine</user>
    <text>Yeah, I'm not a fan of HugSQL because I don't like the SQL separate from the code that uses it.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:18:19.093500</ts>
    <user>Celestine</user>
    <text>But there's nothing wrong with SQL. It's a pretty good DSL :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:21:43.098700</ts>
    <user>Marylouise</user>
    <text>Using data is a lot more reusable and composable. A logical data translation layer really helps (like honeysql vs SQL, hiccup vs HTML).  SQL strings have various limitations and can cause security issues (if parameters aren't used)</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:22:01.099100</ts>
    <user>Celestine</user>
    <text>`(sql/get-by-id connectable :table-name the-key)` seems a pretty concise way to get a hash map of a single row by primary key (one of Toucan's misleading examples makes it looks like this needs to be a lot of work).</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:22:29.099600</ts>
    <user>Celestine</user>
    <text>&lt;@Marylouise&gt; Sure, HoneySQL provides composability. We use it heavily.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:23:14.100500</ts>
    <user>Celestine</user>
    <text>My point is that Toucan makes a lot of strawman comparisons to try to show it is "better" than an unrealistic alternative that nobody would actually use anyway.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:25:32.103100</ts>
    <user>Marylouise</user>
    <text>Toucan adds a lot of useful things. For example, how would you do hydration easily using SQL? It also has nice post and pre process functionality.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:26:13.103800</ts>
    <user>Celestine</user>
    <text>`datafy`/`nav` provides that feature out-of-the-box in both `clojure.java.jdbc` and `next.jdbc`.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:26:32.104000</ts>
    <user>Celestine</user>
    <text>Lazily.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:27:10.104800</ts>
    <user>Marylouise</user>
    <text>Ahh in `next.jdbc`. That wasn't available when we implemented or DB layer. I'll check it out :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:27:13.104900</ts>
    <user>Celestine</user>
    <text>But you'd be better off doing a `join` in SQL in the first place instead. That sort of "convenience" is one of the bad/misleading things that ORMs try to make "easy" for you.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:27:54.105100</ts>
    <user>Marylouise</user>
    <text>Yes but joins don't create nested structures. Is there a way to do that easily?</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:28:26.105400</ts>
    <user>Celestine</user>
    <text>(I'm very down on ORMs after decades of work with them)</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:29:43.106100</ts>
    <user>Marylouise</user>
    <text>I don't like ORMS either. Toucan doesn't add a `.save` method on the data. You pass on the model definition and just data.</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:30:24.106300</ts>
    <user>Marylouise</user>
    <text>So toucan isn't the least ORM "ORM" I've used</text>
  </message>
  <message conversation_id="1418">
    <ts>2019-05-12T01:56:02.108900</ts>
    <user>Marylouise</user>
    <text>&lt;@Jennie&gt; is better to use the specific channel for questions. See &lt;#C592R5P8F|toucan&gt;, &lt;#C66EM8D5H|honeysql&gt;, and &lt;#C1Q164V29|sql&gt; channels</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:43:27.111100</ts>
    <user>Roselia</user>
    <text>When we create a sub-vector it holds on original vector, but what happens to original if we conj onto sub-vector and throw it away?</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:47:50.112600</ts>
    <user>Sheron</user>
    <text>hopefully nothing, otherwise i have to rewrite all my code</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:53:04.113200</ts>
    <user>Roselia</user>
    <text>right, nothing happens</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:53:06.113300</ts>
    <user>Sheron</user>
    <text>if you have a moment maybe you can watch the video from here ? &lt;https://youtu.be/wASCH_gPnDw?t=1753&gt;   , it explains some things very well</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:53:12.113500</ts>
    <user>Roselia</user>
    <text>v.assocN(end, o) is being called on original, new subvector returned</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:55:03.114200</ts>
    <user>Roselia</user>
    <text>so almost the same thing as creating subvector of a subvector</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:56:26.115300</ts>
    <user>Sixta</user>
    <text>I'm banging my head against a jetty server that after a `(.stop svr)` and `(.join svr)` is still using the port. The server is configured for websockets, so I'm not sure if that's related at all. Hoping this sounds vaguely familiar to someone who can help me out :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:57:16.115900</ts>
    <user>Sheron</user>
    <text>is it still listening after the stop ?</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:57:26.116200</ts>
    <user>Sheron</user>
    <text>or is the port just in some wait linger and not listening ?</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:58:34.116900</ts>
    <user>Sheron</user>
    <text>and just to make sure, you are trying that on windows, are you ? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:59:35.117700</ts>
    <user>Sixta</user>
    <text>That's a good question, I'm not certain. I think it resolves it itself given a little time (human typing time) this only happens on `(reset)`.

Nope, linux!</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T02:59:51.118000</ts>
    <user>Sheron</user>
    <text>just check    `netstat -anp | grep LISTEN`</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:00:12.118400</ts>
    <user>Sheron</user>
    <text>if it's still there listening for real after the join</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:00:27.118800</ts>
    <user>Sheron</user>
    <text>i use the same pattern myself in some integration tests and i don't remember it misbehaving</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:01:30.119600</ts>
    <user>Sixta</user>
    <text>I'm pretty sure this is related to websockets somehow, because it only happens if the server-side component of that is activated. Well, more specifically, if figwheel is trying to start a repl.</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:03:58.120200</ts>
    <user>Sheron</user>
    <text>netstat's output also lists the process id's , there's always a chance you have forgotten another process around that lives on the same port :wink:</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:04:59.121200</ts>
    <user>Sixta</user>
    <text>Na, I've got a "mostly reproducible" (because it's racey) `echo '(future (cljs-repl)) (go)' | clj -A:dev` which succeeds for one of them, and fails for the other with "Address in use"</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:08:11.121700</ts>
    <user>Sixta</user>
    <text>I stuck a `clojure.java.shell/sh` in after the `.join` and I can't see the port in there at all :disappointed:</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:08:17.121900</ts>
    <user>Sixta</user>
    <text>so what on earth is going on!</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:12:28.122700</ts>
    <user>Sheron</user>
    <text>i think join itself is just there to wait for the thread to stop after the server has been shut down ... join itself shouldn't do anything with the port by itself</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:16:15.123700</ts>
    <user>Sixta</user>
    <text>The join may well not be necessary, it was a guess I added. I suspected that the server wasn't completely shutdown yet.</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:18:07.124300</ts>
    <user>Sheron</user>
    <text>tested here locally,   right after i do  (.stop server)   the port is not being listened on anymore</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:19:22.125500</ts>
    <user>Sheron</user>
    <text>so it does sound like there is indeed something racey going on in your machine , but i wouldn't blame it on jetty right away :wink:</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:20:05.125900</ts>
    <user>Sixta</user>
    <text>it's definitely racey. With the addition of `ss` it's much less likely to happen.</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:25:54.127600</ts>
    <user>Sheron</user>
    <text>if it solves in little time then perhaps make the server restart thingy more persistent in it's actions :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:26:09.128000</ts>
    <user>Sheron</user>
    <text>we used to that on servers too before all the operating systems started to support the reuse flags on sockets</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:26:37.128600</ts>
    <user>Sheron</user>
    <text>then you'd see an apache server going down and having to wait a minute before a you could do a rebind (on a badly configured linux server)</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:28:48.129200</ts>
    <user>Sixta</user>
    <text>This is in development, and is pretty much just the internal figwheel stuff being stopped/started quickly via the api.</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:29:00.129500</ts>
    <user>Sixta</user>
    <text>the thing is, I'm not seeing 9900 in time-wait either.</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:30:13.130300</ts>
    <user>Sixta</user>
    <text>&lt;http://hea-www.harvard.edu/~fine/Tech/addrinuse.html&gt; I only get this if I try and start a cljs repl (server side). I don't _think_ that's a websocket client, but maybe it is (or maybe it just alters the timing just so)</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:32:26.130600</ts>
    <user>Sixta</user>
    <text>but I should still be seeing time_wait if that's the case.</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:33:44.131100</ts>
    <user>Sheron</user>
    <text>and you are sure there is no accidental duplicate process trying to rebind at the same time either ? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:34:15.131600</ts>
    <user>Sixta</user>
    <text>That would also show up in the `ss` I'm running just before starting (or, at least it should _once_)</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:34:51.132000</ts>
    <user>Sixta</user>
    <text>I have no java processes open, and I don't write any other code :smile:</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:36:37.132600</ts>
    <user>Sheron</user>
    <text>no funny macro business going on either evaluated at a different time than you think ? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1419">
    <ts>2019-05-12T03:39:47.132900</ts>
    <user>Sixta</user>
    <text>Nope. Functions and multi-methods here only.</text>
  </message>
  <message conversation_id="1420">
    <ts>2019-05-12T04:07:20.133200</ts>
    <user>Nannette</user>
    <text>It worked. &lt;@Celestine&gt;: thanks for your help!</text>
  </message>
  <message conversation_id="1421">
    <ts>2019-05-12T06:28:00.134300</ts>
    <user>Bo</user>
    <text>I've used tufte ( &lt;https://github.com/ptaoussanis/tufte&gt; ) and its `defnp` with good results</text>
  </message>
  <message conversation_id="1422">
    <ts>2019-05-12T08:52:41.135600</ts>
    <user>Raina</user>
    <text>Hm... could not closing `chan` async channel cause a memory leak?</text>
  </message>
  <message conversation_id="1422">
    <ts>2019-05-12T08:53:11.136200</ts>
    <user>Raina</user>
    <text>I have code that is passed a channel, reads an item from the channel and throw it away.</text>
  </message>
  <message conversation_id="1422">
    <ts>2019-05-12T08:56:12.136700</ts>
    <user>Raina</user>
    <text>and the code that creates the channel doesn't hold on to it</text>
  </message>
  <message conversation_id="1421">
    <ts>2019-05-12T12:19:38.136800</ts>
    <user>Susan</user>
    <text>It's worth noting that, although the primary workflow of HugSQL is to allow separate SQL files, the library contains all of the necessary functions to use SQL inline in your code or at the repl.  Specifically, `db-run` and `db-fn` accomplish this and give you the same HugSQL parameter replacement abilities.  &lt;https://www.hugsql.org/#using-other-fns&gt;</text>
  </message>
  <message conversation_id="1423">
    <ts>2019-05-12T13:38:59.137600</ts>
    <user>Jasmine</user>
    <text>If no one is using it, should be gc’ed</text>
  </message>
  <message conversation_id="1423">
    <ts>2019-05-12T13:39:28.137800</ts>
    <user>Jennie</user>
    <text>&lt;@Marylouise&gt; It worked for me like this `  (db/select [m/Facility :id [:facility_name :facilityName] [:standing_orders :standingOrders]])`</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:01:28.139800</ts>
    <user>Sixta</user>
    <text>I'm looking for libraries which enable suspendable evaluations in clojure. Nothing in mind too much, just looking at implementing something which parallels excel.</text>
  </message>
  <message conversation_id="1425">
    <ts>2019-05-12T14:15:50.140100</ts>
    <user>Meagan</user>
    <text>like continuations?</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:29:55.140400</ts>
    <user>Sixta</user>
    <text>That's what I was thinking of, yes!</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:40:46.141200</ts>
    <user>Antwan</user>
    <text>&lt;https://kcsongor.github.io/time-travel-in-haskell-for-dummies/&gt;</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:40:51.141500</ts>
    <user>Antwan</user>
    <text>not to say the m word</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:41:04.141900</ts>
    <user>Antwan</user>
    <text>but maybe something close to this?</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:41:44.142300</ts>
    <user>Meagan</user>
    <text>&lt;@Lavette&gt; made a delimited continuations lib awhile ago</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:41:58.142500</ts>
    <user>Meagan</user>
    <text>&lt;https://github.com/swannodette/delimc&gt;</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:42:34.142900</ts>
    <user>Meagan</user>
    <text>there’s another library that people were talking about on clojureverse a few months ago</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:49:28.143600</ts>
    <user>Antwan</user>
    <text>for something like excel it feels like "lazy evaluation" might not be enough</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:49:57.144200</ts>
    <user>Antwan</user>
    <text>or rather, even if it technically represents what is happening it isnt super useful beyond actually computing the values</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:55:43.145000</ts>
    <user>Sixta</user>
    <text>excel has a "restarting scheduler" where it pauses evaluation on request of a cell, and re-orders the evaluation, then starts again. A little bit like what pedestal does with interceptors I guess.</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:57:55.145600</ts>
    <user>Alyce</user>
    <text>Is there anything you can learn from the way Kotlin does it, their coroutine support, via libraries, is very well developed.</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:58:03.145800</ts>
    <user>Alyce</user>
    <text>I believe they use a state machine</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T14:58:22.146300</ts>
    <user>Alyce</user>
    <text>Of course, when Project Loom makes its way into the JVM, I'm sure the approach may change then too!</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:00:20.146600</ts>
    <user>Sixta</user>
    <text>a state machine? sounds like how the go-block works :thinking_face:</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:01:25.146800</ts>
    <user>Alyce</user>
    <text>&lt;https://github.com/Kotlin/KEEP/blob/master/proposals/coroutines.md&gt;</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:02:21.147400</ts>
    <user>Alyce</user>
    <text>I'm not that familiar with the depths of the approach that they took</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:03:50.148200</ts>
    <user>Antwan</user>
    <text>I think the "reordering" part is cruicial</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:04:10.149000</ts>
    <user>Alyce</user>
    <text>There are quite a few videos from the designer of the coroutine support of kotlin on youtube.</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:04:13.149300</ts>
    <user>Antwan</user>
    <text>you basically need to make sure that the computations are a DAG and that you do them in topological order</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:04:47.149900</ts>
    <user>Antwan</user>
    <text>so if someone makes a change you could do a "virtual dom" for each cell</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:04:58.150300</ts>
    <user>Antwan</user>
    <text>and only recompute the values that have changed</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:05:18.150800</ts>
    <user>Antwan</user>
    <text>or you could compute the whole batch of values</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:07:48.152600</ts>
    <user>Sixta</user>
    <text>excel is slightly heavy-handed with it's approach to dependencies, but it does generally satisfy minimality.</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:07:55.152900</ts>
    <user>Alyce</user>
    <text>I do recall too that they (kotlin guys) changed the way coroutines worked, before making it public (i.e, non-experimental). Here's the post from Roman about it: &lt;https://medium.com/@elizarov/structured-concurrency-722d765aa952&gt;.</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:07:59.153200</ts>
    <user>Sixta</user>
    <text>If you use INDIRECT then you'll be recomputed very often.</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:08:16.153500</ts>
    <user>Alyce</user>
    <text>I think it would be exciting to have coroutine support in Clojure :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1424">
    <ts>2019-05-12T15:08:46.153700</ts>
    <user>Antwan</user>
    <text>(go to town with macros)</text>
  </message>
  <message conversation_id="1426">
    <ts>2019-05-12T15:44:03.154600</ts>
    <user>Sheron</user>
    <text>dharrigan what problem would it solve ?</text>
  </message>
  <message conversation_id="1427">
    <ts>2019-05-12T17:06:13.155700</ts>
    <user>Herman</user>
    <text>I don't know whether it has the ability to "pause evaluation" in the way you're describing, but I immediately thought of Matrix when I thought of "excel-like" dataflow in Clojure

&lt;https://github.com/kennytilton/matrix&gt;</text>
  </message>
  <message conversation_id="1428">
    <ts>2019-05-12T18:10:02.157300</ts>
    <user>Brent</user>
    <text>Hello! I use deps.edn with cognitect/test-runner / Kaocha and cannot figure out how to get some namespaces AOT-compiled (needed due to `gen-class` in test files). Any [googling/solution] tips? Thank you!</text>
  </message>
  <message conversation_id="1429">
    <ts>2019-05-12T18:16:28.157600</ts>
    <user>Jolanda</user>
    <text>hey, I just asked the same questions few days ago over at the &lt;#C6QH853H8|tools-deps&gt; room: &lt;https://clojurians.slack.com/archives/C6QH853H8/p1557397085170000&gt;</text>
  </message>
  <message conversation_id="1430">
    <ts>2019-05-12T19:00:39.158800</ts>
    <user>Malik</user>
    <text>is there a way to generate a hash-map with test.check.generators where one of the values is calculated from two of the other values?</text>
  </message>
  <message conversation_id="1430">
    <ts>2019-05-12T19:01:50.159000</ts>
    <user>Malik</user>
    <text>None</text>
  </message>
  <message conversation_id="1430">
    <ts>2019-05-12T19:02:04.159600</ts>
    <user>Malik</user>
    <text>basically I don't know how to do the gen for the :frame-rate</text>
  </message>
  <message conversation_id="1430">
    <ts>2019-05-12T19:02:40.159900</ts>
    <user>Malik</user>
    <text>hmm maybe with a gen/let?</text>
  </message>
  <message conversation_id="1430">
    <ts>2019-05-12T19:07:40.160400</ts>
    <user>Malik</user>
    <text>yeah, that should work</text>
  </message>
  <message conversation_id="1431">
    <ts>2019-05-13T00:50:42.160900</ts>
    <user>Mireille</user>
    <text>is there a deps.edn version of `lein clean`?</text>
  </message>
  <message conversation_id="1431">
    <ts>2019-05-13T01:09:31.161500</ts>
    <user>Celestine</user>
    <text>&lt;@Mireille&gt; `rm -rf .cpcache` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1431">
    <ts>2019-05-13T01:10:22.162300</ts>
    <user>Celestine</user>
    <text>You can use `clj -Sforce` to force the dependencies to be recalculated and the cache ignored, but I'm not sure if that _overwrites_ the `.cpcache` folder...</text>
  </message>
  <message conversation_id="1431">
    <ts>2019-05-13T01:17:06.162500</ts>
    <user>Mireille</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1430">
    <ts>2019-05-13T01:41:06.163900</ts>
    <user>Tammera</user>
    <text>Maybe drop the `-f`, removing with force always is ill advised </text>
  </message>
  <message conversation_id="1430">
    <ts>2019-05-13T01:41:40.164100</ts>
    <user>Celestine</user>
    <text>Decades-long habits are hard to break :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1430">
    <ts>2019-05-13T01:44:27.164700</ts>
    <user>Tammera</user>
    <text>Haha just as guilty ^^!</text>
  </message>
  <message conversation_id="1432">
    <ts>2019-05-13T02:21:14.164900</ts>
    <user>Alleen</user>
    <text>Have a look at &lt;https://github.com/leonoel/cloroutine&gt; it's a low-level macro that can be used to implement the patterns mentioned in the articles you linked.
I'm not aware of any clojure implementation of trio-like structured concurrency but that lib would definitely be a good start if you're willing to explore this path.</text>
  </message>
  <message conversation_id="1433">
    <ts>2019-05-13T03:54:27.167000</ts>
    <user>Grant</user>
    <text>Does anyone have any experience with jnr-ffi? I am trying to write some clj bindings for a c library. i saw from caesium's source code how to do it when the functions return primitives, but the ones i am trying to bind return structs, and i haven't a clue how to approach it. it looks like, from java examples, that I need to extend the struct class with fields, but i don't know how to do that in clojure.</text>
  </message>
  <message conversation_id="1433">
    <ts>2019-05-13T04:16:42.167200</ts>
    <user>Madelene</user>
    <text>an à la carte build system perchance?</text>
  </message>
  <message conversation_id="1433">
    <ts>2019-05-13T05:05:58.168200</ts>
    <user>Grant</user>
    <text>(in jnr-ffi, it looks as though in order to use structs you need to extend the Struct class with additional fields. that's the bit i don't know how to do.)</text>
  </message>
  <message conversation_id="1434">
    <ts>2019-05-13T05:32:14.169300</ts>
    <user>Stefan</user>
    <text>&lt;@Meagan&gt; it would be good to wrap your hooks/userReducer to work with multimethods</text>
  </message>
  <message conversation_id="1434">
    <ts>2019-05-13T05:32:30.169400</ts>
    <user>Stefan</user>
    <text>or maybe even with whatever implementes Ifn</text>
  </message>
  <message conversation_id="1434">
    <ts>2019-05-13T05:33:01.169700</ts>
    <user>Stefan</user>
    <text>had to wrap it myself</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T06:12:35.171000</ts>
    <user>Alaine</user>
    <text>A question related to maps and sequences.
Some of the sequence functions work on map e.g. first, rest, map (they convert a map to a sequence via seq)
However nth doesn’t work on a map</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T06:12:42.171300</ts>
    <user>Alaine</user>
    <text>Is there a good reason for that?</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T06:14:36.173300</ts>
    <user>Elaine</user>
    <text>hash-things (hash-map and hash-set) has no notion of order. Do not make sense ask for "the second item"
first and rest make some sense once you can understand "give me 'any' first item"</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T06:18:21.173500</ts>
    <user>Alaine</user>
    <text>second works on maps</text>
  </message>
  <message conversation_id="1434">
    <ts>2019-05-13T06:54:47.173900</ts>
    <user>Sixta</user>
    <text>Actually for aero, but ideas from that yeah</text>
  </message>
  <message conversation_id="1434">
    <ts>2019-05-13T06:55:51.174100</ts>
    <user>Sixta</user>
    <text>I'd love to implement that paper, I don't think it's as general as it suggests, it's evaluation behaviour is pretty dependent on various haskell things like applicative</text>
  </message>
  <message conversation_id="1434">
    <ts>2019-05-13T07:01:24.174300</ts>
    <user>Madelene</user>
    <text>&amp;gt; Actually for aero

Ahh ok, so you’re trying to manage a graph of effects inside an immutable edn tree?</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:05:53.175100</ts>
    <user>Sixta</user>
    <text>I'm trying to model the completely dynamic dependency graph without setting my hair on fire. The first two implementations have set my hair on fire :fire:</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:06:46.175300</ts>
    <user>Sixta</user>
    <text>I'm trying to add macro support at the same time, where macro means that #profile stops running all paths.</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:07:31.175500</ts>
    <user>Sixta</user>
    <text>The interface needs to stay fairly similar because it is easy to use</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:11:38.175700</ts>
    <user>Madelene</user>
    <text>ahh so dynamic dependencies as in that talk too</text>
  </message>
  <message conversation_id="1436">
    <ts>2019-05-13T08:19:11.176800</ts>
    <user>Star</user>
    <text>who could agree with me: stacktraces should show what was the input...</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:26:33.178000</ts>
    <user>Karren</user>
    <text>I wanted this so many times...
but input may be huge for example.
I guess it's hard to solve in general.</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:27:37.178300</ts>
    <user>Star</user>
    <text>so it should be in a separate stacktrace like *e2 or something...</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:27:47.178500</ts>
    <user>Zona</user>
    <text>disagree, this is one way for personally identifiable information to end up in logs</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:29:07.178700</ts>
    <user>Karren</user>
    <text>This could be enabled only in "dev" mode.
But I guess the problem is that it really isn't that easy - exceptions can occur at many different levels - at each step you'd need to capture the input and possible decide whether (and what) to show it.</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:33:55.179000</ts>
    <user>Zona</user>
    <text>does clojure have a `trace` (from CL) equivalent?</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:35:10.179900</ts>
    <user>Zona</user>
    <text>"Whenever a traced function is invoked, information about the call, about the arguments passed, and about any eventually returned values is printed to trace output."

``` (defun fact (n) (if (zerop n) 1 (* n (fact (- n 1)))))
=&amp;gt;  FACT
 (trace fact)
=&amp;gt;  (FACT)
;; Of course, the format of traced output is implementation-dependent.
 (fact 3)
&amp;gt;&amp;gt;  1 Enter FACT 3
&amp;gt;&amp;gt;  | 2 Enter FACT 2
&amp;gt;&amp;gt;  |   3 Enter FACT 1
&amp;gt;&amp;gt;  |   | 4 Enter FACT 0
&amp;gt;&amp;gt;  |   | 4 Exit FACT 1
&amp;gt;&amp;gt;  |   3 Exit FACT 1
&amp;gt;&amp;gt;  | 2 Exit FACT 2
&amp;gt;&amp;gt;  1 Exit FACT 6
=&amp;gt;  6```</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:35:30.180400</ts>
    <user>Jasmine</user>
    <text>nth is for integer indexed cols, maps and sets are not integer indexed</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:37:21.180600</ts>
    <user>Zona</user>
    <text>ah, &lt;https://github.com/clojure/tools.trace&gt;</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:37:33.180900</ts>
    <user>Karren</user>
    <text>Yes, this is useful and something I (sometimes) use (via Cider).
However, you need to instrument the function beforehand - it may be harder if the error isn't that easy to reproduce (which is a problem anyway) or it may just took way longer or it may be deep down in java call stack...</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:38:18.181100</ts>
    <user>Fernande</user>
    <text>haven't tried this, but does this help at all? &lt;https://github.com/kkinnear/zpst&gt;</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:41:25.181500</ts>
    <user>Karren</user>
    <text>Not sure how practical this approach is, but I think you ultimately need JVMTI agent (or something equivalent) - this could be an interesting thing to explore:
- &lt;https://stackoverflow.com/questions/42226592/how-to-get-the-values-of-method-local-variables-and-class-variables-using-jvmti&gt;
- &lt;https://github.com/cretz/stackparam&gt;</text>
  </message>
  <message conversation_id="1435">
    <ts>2019-05-13T08:57:32.181900</ts>
    <user>Jasmine</user>
    <text>yes,  it overwrites (for the specific command you ran)</text>
  </message>
  <message conversation_id="1437">
    <ts>2019-05-13T09:26:41.182100</ts>
    <user>Meagan</user>
    <text>You mean you can't pass a mulimethod to useReducer?</text>
  </message>
  <message conversation_id="1437">
    <ts>2019-05-13T09:27:13.182300</ts>
    <user>Meagan</user>
    <text>If so can you open an issue please so I remember</text>
  </message>
  <message conversation_id="1437">
    <ts>2019-05-13T09:29:01.182600</ts>
    <user>Magdalena</user>
    <text>[ANN] Cognitect Labs' aws-api 0.8.305 &lt;https://groups.google.com/forum/#!topic/clojure/rKAbv6-U3CM&gt;</text>
  </message>
  <message conversation_id="1438">
    <ts>2019-05-13T09:57:25.183600</ts>
    <user>Mariela</user>
    <text>Can I make `(instance? "Ljava/lang/Integer;" x)` work?

(`instance?` rejects strings as criteria)</text>
  </message>
  <message conversation_id="1438">
    <ts>2019-05-13T09:58:41.183700</ts>
    <user>Mariela</user>
    <text>which is logical because an array is not an object...

anyway my question stands - can I check if something is an array of x?</text>
  </message>
  <message conversation_id="1438">
    <ts>2019-05-13T10:01:54.183900</ts>
    <user>Mariela</user>
    <text>ok, this is a FAQ easy to find, sorry for the noise</text>
  </message>
  <message conversation_id="1439">
    <ts>2019-05-13T11:09:23.184200</ts>
    <user>Min</user>
    <text>&amp;gt; (instance? (Class/forName "[Ljava.lang.String;") (into-array String ["s"]) ) =&amp;gt; true</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T11:44:08.186000</ts>
    <user>Alaine</user>
    <text>What are the exact relationships between collections and sequences?
Here &lt;https://clojure.org/reference/sequences#_the_seq_interface&gt; the Seq interface is describe by means of 3 functions first, rest and cons but in the description (and the signature of the function), the term collection is used instead of sequence. Can someone clarify it?</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T11:46:38.186400</ts>
    <user>Jasmine</user>
    <text>sequences are (logical) collections</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T11:48:02.186800</ts>
    <user>Jasmine</user>
    <text>Collections are (in Clojure) defined by IPersistentCollection</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T11:48:23.187100</ts>
    <user>Jasmine</user>
    <text>Sequences are defined by ISeq (which extends IPersistentCollection)</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T11:49:00.187400</ts>
    <user>Mariela</user>
    <text>Nice one!

I ended up avoiding the scary notation completely:

`(instance? (class (make-array String 0)) (into-array String ["s"]))`</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T11:49:20.187800</ts>
    <user>Jasmine</user>
    <text>IPersistentCollection extends Seqable (to request a seq view of a collection)</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T11:59:51.189800</ts>
    <user>Alaine</user>
    <text>Thanks &lt;@Jasmine&gt;. I am going to meditate on it</text>
  </message>
  <message conversation_id="1441">
    <ts>2019-05-13T13:03:12.192100</ts>
    <user>Bee</user>
    <text>One thing I think is useful when contemplating sequence vs. collection: A collection is a finite, non-scalar grouping of some 'things', e.g. List, Vector, Set, Map. A seq is an interface to data that makes sense to apply to collections, and also to non-collection, infinite things like `(range)`, `(iterate)`, `(cycle)`, et al. You can compute infinities with a seq, but not with a collection.</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T13:04:20.192500</ts>
    <user>Jasmine</user>
    <text>given that sequences are collections, collections are not necessarily finite</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T13:07:23.193700</ts>
    <user>Jasmine</user>
    <text>one term used in some of the clojure  reference docs to refer to list, vector, map, set. sorted set, sorted map, etc is "data structure", which are finite</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T13:08:26.194700</ts>
    <user>Dann</user>
    <text>it uses ByteBuffer, which has all the methods needed for pulling other types out of bytes</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T13:08:37.195100</ts>
    <user>Jasmine</user>
    <text>there is no "type" in the Clojure impl that contains those data structures but not sequences</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T13:09:00.195500</ts>
    <user>Dann</user>
    <text>in fact, that's straightforward enough that I'd skip clojure libs / bindings and just feed the InputStream into a ByteBuffer via interop, and use that API</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T13:09:09.196000</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/reference/data_structures&gt;</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T13:10:26.197400</ts>
    <user>Jasmine</user>
    <text>sometimes "collection" is used to mean "the data structures but not seqs" and sometimes it is used to mean "all collections, including seqs". this is not done consistently either in the docs, or the code, or the broader community.</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T13:11:43.198500</ts>
    <user>Bee</user>
    <text>Yeah, it's worthwhile to understand the context that the word 'collection' is being used, with more precision than 'talking about Clojure the language'</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:41:55.200800</ts>
    <user>Lesa</user>
    <text>I need to write some code that writes to a unix socket (in this case, `/dev/log` so I can write a timbre appender to send logs direct to syslog). Right now I'm puzzling my way through netty code as it seems to be the only java library that packages the native integration sensibly, but their relative lack of docs is making that pretty slow going. Does anyone know of a clojure library/feature I may have missed for doing so?</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T13:50:32.201800</ts>
    <user>Alaine</user>
    <text>&lt;@Jasmine&gt; I am trying to understand exactly what is the meaning of “Collections are represented by abstractions, and there may be one or more concrete realizations.” from &lt;https://clojure.org/reference/data_structures#Collections&gt;</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:52:43.203000</ts>
    <user>Meagan</user>
    <text>I think it means that the actual underlying type might change, but the interface will stay the same if you have an operation that produces the same collection type</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:53:58.204200</ts>
    <user>Meagan</user>
    <text>for instance, I believe Clojure maps use a `PersistentArrayMap` under the hood up until a certain size, which then switches to a different type `PersistentHashMap`</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:54:13.204700</ts>
    <user>Meagan</user>
    <text>for various performance reasons</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:54:17.205100</ts>
    <user>Becki</user>
    <text>like in scheme and common lisp there are map-hash, map-vector, but in clojure you just use `map`?</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:54:28.205400</ts>
    <user>Meagan</user>
    <text>this difference is opaque to you, because they have the exact same interface</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:55:00.206000</ts>
    <user>Meagan</user>
    <text>yes, the seq interface is even more general</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:55:16.206200</ts>
    <user>Becki</user>
    <text>i think F# is kinda annoying in this way.</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:55:57.206700</ts>
    <user>Meagan</user>
    <text>it must have gotten it from OCaml :stuck_out_tongue: `+`, `+.`, oh-my!</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:57:05.207200</ts>
    <user>Dann</user>
    <text>clojure of course has `+` and `+'`, but the meaning is much different</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T13:58:34.208200</ts>
    <user>Bee</user>
    <text>&lt;@Lesa&gt; Did you take a look at &lt;https://github.com/RackSec/unclogged&gt;</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T14:00:32.208700</ts>
    <user>Lesa</user>
    <text>Yes, unfortunately only supports udp/tcp (and is also abandoned)</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T14:06:47.208900</ts>
    <user>Bee</user>
    <text>If Unix socket's a hard req I dunno if there's much pre-existing help out there. You can find some other stuff that'll do the JNI lifting for you (e.g. &lt;https://github.com/jnr/jnr-unixsocket&gt;, and I'm inclined to trust Charles Nutters' code...)</text>
  </message>
  <message conversation_id="1440">
    <ts>2019-05-13T14:07:01.209200</ts>
    <user>Bee</user>
    <text>But you're still gonna be doing the Java interop yourself</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T14:09:05.209400</ts>
    <user>Lesa</user>
    <text>Yeah I'm chatting with our sysadmins to see if they'll consider opening up a plain old net socket, that'll simplify things considerably</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T14:10:26.209600</ts>
    <user>Lesa</user>
    <text>jnr-unixsocket looks like a possible option though, much simpler than going the netty route. thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T14:17:00.211100</ts>
    <user>Bee</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T14:17:17.211500</ts>
    <user>Alaine</user>
    <text>Another question about sequences and collections. In &lt;https://clojure.org/reference/sequences#_the_seq_interface&gt; the `Seq` interface is said to be made of `first`, `rest` and `cons`. Why `empty?` is omitted?</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T14:20:44.212700</ts>
    <user>Dann</user>
    <text>empty? is just the negation of clojure.lang.RT/seq</text>
  </message>
  <message conversation_id="1442">
    <ts>2019-05-13T14:50:35.213000</ts>
    <user>Jasmine</user>
    <text>&lt;http://insideclojure.org/2016/03/16/collections/&gt; expands on the question above in a lot more detail</text>
  </message>
  <message conversation_id="1444">
    <ts>2019-05-13T14:51:15.213600</ts>
    <user>Jasmine</user>
    <text>and also in Clojure Applied, ch 2, which has a great picture that I am unable to share with you due to copyright :)</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T14:57:37.214800</ts>
    <user>Lemuel</user>
    <text>So, I have a weird problem where I *removed* a circular namespace dependency, and now I'm getting a spec failure on `ns` inside a third party library.  If I put it back, it works.</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:00:00.216500</ts>
    <user>Lemuel</user>
    <text>I'm baffled at how to even debug this.</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:00:05.216700</ts>
    <user>Lemuel</user>
    <text>Thoughts?</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:00:29.216900</ts>
    <user>Jasmine</user>
    <text>maybe share the error?</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:05:13.217600</ts>
    <user>Lemuel</user>
    <text>here: &lt;https://gist.github.com/eraserhd/8efd4d3ab0183d2c5375bfd059b582a2&gt;</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:07:19.217900</ts>
    <user>Jasmine</user>
    <text>that was a real spec error, fixed here &lt;https://github.com/pedestal/pedestal/commit/64b8f877590c8bb66341544728da576d8e33124f#diff-5695192ae2429b3d8cf22903401a1be9&gt;</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:07:40.218300</ts>
    <user>Jasmine</user>
    <text>prob your prior cycle was hiding the load of it somehow</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:08:08.218600</ts>
    <user>Lemuel</user>
    <text>oh, weird!</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:08:36.218800</ts>
    <user>Jasmine</user>
    <text>latest pedestal is 0.5.5</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:08:44.219000</ts>
    <user>Jasmine</user>
    <text>not sure when that was fixed exactly</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:09:04.219200</ts>
    <user>Jasmine</user>
    <text>I guess it was in 0.5.5</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:09:21.219500</ts>
    <user>Jasmine</user>
    <text>you'll only see that fail as of Clojure 1.10.0</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:12:38.220800</ts>
    <user>Lemuel</user>
    <text>welp, I figure you've just saved me three hours of debugging.  I'll buy you some kind of bevarage at the next conj.</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:13:37.221200</ts>
    <user>Jasmine</user>
    <text>no need, happy to help ;)</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T15:19:46.221900</ts>
    <user>Alaine</user>
    <text>No worries. I have this book</text>
  </message>
  <message conversation_id="1443">
    <ts>2019-05-13T19:08:58.223000</ts>
    <user>Jenny</user>
    <text>i’ve used &lt;https://github.com/ztellman/gloss&gt; before. e.g. in &lt;https://github.com/wiseman/turboshrimp/blob/master/src/com/lemondronor/turboshrimp/navdata.clj&gt;</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:25:59.224600</ts>
    <user>Nisha</user>
    <text>Is it possible to use items from an lazy seq one by one in order?</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:26:43.225500</ts>
    <user>Nisha</user>
    <text>For example, repeatedly wait for 1 second and print a number from `(range)`</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:28:36.227100</ts>
    <user>Vita</user>
    <text>yes. loop/recur with first/rest should support that</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:29:11.227200</ts>
    <user>Vita</user>
    <text>None</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:29:35.227600</ts>
    <user>Vita</user>
    <text>or</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:29:41.227700</ts>
    <user>Vita</user>
    <text>None</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:31:55.228500</ts>
    <user>Dann</user>
    <text>or `(run! (fn [x] (Thread/sleep N) (println x)) (range))`</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:32:25.228900</ts>
    <user>Dann</user>
    <text>where N is the magic amount of time to sleep between items</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:34:53.229600</ts>
    <user>Dann</user>
    <text>or ```(doseq [item (range)]
  (Thread/sleep N)
  (println item))```</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:36:24.230000</ts>
    <user>Nisha</user>
    <text>My real use case is I want to print a lazy-seq of bytes read from socket.
`(repeatedly #(.read (.getInputStream (Socket. "localhost" 8888))))))`</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:36:37.230500</ts>
    <user>Nisha</user>
    <text>Oh! thanks!</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:36:43.230800</ts>
    <user>Dann</user>
    <text>so you aren't actually sleeping, just a blocking read?</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:36:54.231100</ts>
    <user>Nisha</user>
    <text>Yeah, a blocking read.</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:37:19.231700</ts>
    <user>Dann</user>
    <text>yeah, I'd use run! if it wraps up nicely in one function, or doseq if you have multiple imperative steps</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:37:40.232100</ts>
    <user>Dann</user>
    <text>(and doesn't make sense to abstract the operation as a function for any other usage...)</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:38:12.232700</ts>
    <user>Dann</user>
    <text>doseq also accepts all the syntactic tricks that for does (but imperative / eager)</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:39:41.232800</ts>
    <user>Vita</user>
    <text>do you mean to open the socket repeatedly? or only read from it?</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:40:23.233000</ts>
    <user>Nisha</user>
    <text>oh my bad. I meant only repeatedly reading, not opening.</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:40:27.233200</ts>
    <user>Vita</user>
    <text>:thumbsup:</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:46:15.234600</ts>
    <user>Nisha</user>
    <text>OK it works! I was previously evaling from vim that’s why it didn’t print anything and hang. I tried it in the repl and it worked as expected. :relieved:</text>
  </message>
  <message conversation_id="1445">
    <ts>2019-05-13T20:46:29.234900</ts>
    <user>Nisha</user>
    <text>Thanks all</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T22:49:25.235900</ts>
    <user>Donetta</user>
    <text>Anyone ever get cljfx working with lein?  I'm asking around in &lt;#CGHHJNENB|cljfx&gt; but it seems pretty empty.  I installed the clojars package dependency in project.clj and ran lein deps, but when I try to include the ns, it errors out</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T22:49:28.236100</ts>
    <user>Donetta</user>
    <text>not found in classpath etc.</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:08:59.236600</ts>
    <user>Celestine</user>
    <text>What error do you get &lt;@Donetta&gt; and what version of Java are you running?</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:11:38.236800</ts>
    <user>Celestine</user>
    <text>```(! 1107)-&amp;gt; java -version
openjdk version "11.0.1" 2018-10-16
OpenJDK Runtime Environment 18.9 (build 11.0.1+13)
OpenJDK 64-Bit Server VM 18.9 (build 11.0.1+13, mixed mode)

Mon May 13 20:11:03
(sean)-(jobs:0)-(~/clojure)
(! 1108)-&amp;gt; clj -Sdeps '{:deps {cljfx {:mvn/version "1.2.9"}}}'
Clojure 1.10.0
user=&amp;gt; (require '[cljfx.api :as fx])
nil
```</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:14:12.237400</ts>
    <user>Celestine</user>
    <text>Seems to work with Leiningen too ```(! 1109)-&amp;gt; lein new app jfx
Generating a project called jfx based on the 'app' template.

Mon May 13 20:12:02
(sean)-(jobs:0)-(~/clojure)
(! 1110)-&amp;gt; cd jfx

Mon May 13 20:12:05
(sean)-(jobs:0)-(~/clojure/jfx)
(! 1111)-&amp;gt; vi project.clj 

Mon May 13 20:12:46
(sean)-(jobs:0)-(~/clojure/jfx)
(! 1112)-&amp;gt; lein repl
nREPL server started on port 57958 on host 127.0.0.1 - &lt;nrepl://127.0.0.1:57958&gt;
...
jfx.core=&amp;gt; (require '[cljfx.api :as fx])
nil
jfx.core=&amp;gt; Bye for now!

Mon May 13 20:13:18
(sean)-(jobs:0)-(~/clojure/jfx)
(! 1113)-&amp;gt; cat project.clj 
(defproject jfx "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "&lt;http://example.com/FIXME&gt;"
  :license {:name "EPL-2.0 OR GPL-2.0-or-later WITH Classpath-exception-2.0"
            :url "&lt;https://www.eclipse.org/legal/epl-2.0/&gt;"}
  :dependencies [[org.clojure/clojure "1.10.0"]
                 [cljfx "1.2.9"]]
  :main ^:skip-aot jfx.core
  :target-path "target/%s"
  :profiles {:uberjar {:aot :all}})

Mon May 13 20:13:22
(sean)-(jobs:0)-(~/clojure/jfx)
(! 1114)-&amp;gt; 
```</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:20:57.238200</ts>
    <user>Donetta</user>
    <text>Thanks - let me test - I have used openjfx with  openjdk version "1.8.0_212" just fine in the past, but perhaps i'm hitting an issue now.  let me give your samples a try</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:21:31.238800</ts>
    <user>Celestine</user>
    <text>I've never managed to get it to work with openjdk 8, only Oracle JDK 8 and OpenJDK 11.</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:23:19.239600</ts>
    <user>Donetta</user>
    <text>&lt;https://github.com/ahungry/ahubu&gt; - That was my clojure browser project, it used openjfx, but I didn't use any of the clojurey abstraction libs like fn-fx or cljfx - it basically loads up the openjfx portion via .java files and hooks into it on the clojure side</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:23:31.239900</ts>
    <user>Donetta</user>
    <text>openjfx with openjdk 1.8 that is</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:23:50.240400</ts>
    <user>Donetta</user>
    <text>Maybe some class path is hardcoded in cljfx and can't be found under the openjdk hmm</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:32:12.241100</ts>
    <user>Donetta</user>
    <text>When you got it to work with openjdk 11, was that by building openjfx from source?  or does it shop as part of 11? (or as a separate package like with openjdk 1.8?)</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:33:00.241600</ts>
    <user>Celestine</user>
    <text>openjdk11 does not include javafx -- cljfx brings it in as dependencies I think.</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:33:47.241800</ts>
    <user>Celestine</user>
    <text>Yeah &lt;https://github.com/cljfx/cljfx/blob/master/deps.edn&gt;</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-13T23:45:00.242700</ts>
    <user>Donetta</user>
    <text>Thanks - let me give 11 a whirl</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:05:35.243200</ts>
    <user>Celestine</user>
    <text>&lt;@Donetta&gt; I figured I'd just try it on Windows PowerShell too</text>
  </message>
  <message conversation_id="1447">
    <ts>2019-05-14T00:21:12.243900</ts>
    <user>Donetta</user>
    <text>ah, what a frustration</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:22:00.244700</ts>
    <user>Donetta</user>
    <text>seems like I can't get any luck with arch linux and this setup using lein - I can get the require to work without lein using deps, maybe lein isn't needed</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:22:23.245000</ts>
    <user>Donetta</user>
    <text>is there a way to have lein leverage deps installed from the deps.edn?</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:34:34.245500</ts>
    <user>Celestine</user>
    <text>&lt;@Donetta&gt; There's a plugin for that -- `lein-tools-deps` I think it's called.</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:35:24.246400</ts>
    <user>Celestine</user>
    <text>FWIW, we started with `lein` in 2011 at work, switched to `boot` in 2015, and switched completely to `clj`/`deps.edn` last year and we haven't looked back.</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:36:06.246900</ts>
    <user>Donetta</user>
    <text>thanks, maybe that's the best way forward for me as well, I'll have to spend some more time on deps.edn</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:36:18.247200</ts>
    <user>Donetta</user>
    <text>does anyone in your environment use Emacs/Cider with that setup?</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:38:08.249000</ts>
    <user>Celestine</user>
    <text>We use Socket REPLs and plain text REPLs. I used Emacs for years but switched to Atom (with ProtoREPL at first, but with Chlorine now). My colleague &lt;@Rosaline&gt; uses Emacs but I'm pretty sure he's stopped using CIDER/nREPL these days.</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:40:23.249500</ts>
    <user>Donetta</user>
    <text>Thanks again for the advice</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:40:53.250000</ts>
    <user>Celestine</user>
    <text>I'm a big fan of the simplest possible tools that work and support an effective REPL-driven workflow.</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:45:49.250400</ts>
    <user>Meagan</user>
    <text>I use Emacs/CIDER and deps.edn every day. it’s good!</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:48:49.251200</ts>
    <user>Donetta</user>
    <text>Yea, this does seem nice - with nothing more than a core.clj, deps.edn and cljfx as a dependency, I have the sample working now.  I guess the other things I've used in lein, clj can replace as well?  (generating an uberjar etc.?)</text>
  </message>
  <message conversation_id="1448">
    <ts>2019-05-14T00:50:40.251500</ts>
    <user>Meagan</user>
    <text>Ehhh not quite</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T00:51:13.252600</ts>
    <user>Meagan</user>
    <text>There are some libs out there that try to fill those various holes to different degrees</text>
  </message>
  <message conversation_id="1448">
    <ts>2019-05-14T00:52:55.254700</ts>
    <user>Meagan</user>
    <text>In my libraries, I use leiningen to publish. In my apps, I install CLJ on the host I’m running on</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T01:04:34.254900</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/clojure/tools.deps.alpha/wiki/Tools&gt;</text>
  </message>
  <message conversation_id="1448">
    <ts>2019-05-14T01:04:52.255100</ts>
    <user>Jasmine</user>
    <text>^^ for libs</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T01:08:31.255900</ts>
    <user>Celestine</user>
    <text>&lt;@Donetta&gt; We use (my fork of) `depstar` to build uberjars for production deployment. Then we run them with `java -cp path/to/the.jar clojure.main -m entry.point`</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T01:09:06.256400</ts>
    <user>Celestine</user>
    <text>I publish libs to Clojars using `clj -Spom`, `depstar` and a `mvn` deploy task.</text>
  </message>
  <message conversation_id="1446">
    <ts>2019-05-14T01:09:33.256900</ts>
    <user>Celestine</user>
    <text>(and there's a `tools.deps`/`clj` tool for publishing to Clojars if you prefer)</text>
  </message>
  <message conversation_id="1449">
    <ts>2019-05-14T02:17:16.257100</ts>
    <user>Alaine</user>
    <text>Something is still confusing me:
On one hand, when we call `seq` on a  map we get a sequence that is not indexed, on the other hand `nth` works on it
```
(indexed? (seq {:a 1})) ;; false
(nth (seq {:a 1}) 0) ;;  [:a 1]
```</text>
  </message>
  <message conversation_id="1450">
    <ts>2019-05-14T03:02:11.260200</ts>
    <user>Vanesa</user>
    <text>Hi, I had a doubt about core.async,
(async/alts!!
   [channel-im-expecting-data (async/timeout 30000)])
What happens to the timeout channel if i get the data from the other channel?
Does my thread get occupied for the next 30 seconds till the timeoutchannel emits something or is it picked up by GC immediately after the alts!! gets the 'winner' channel</text>
  </message>
  <message conversation_id="1451">
    <ts>2019-05-14T03:55:18.260300</ts>
    <user>Sixta</user>
    <text>I'm trying to preserve the type of a collection after calling `map` over it. My attempt of `(into (empty xs) (map f xs))` doesn't work for vectors because it reverses the arguments. Is there any other good tricks for this?</text>
  </message>
  <message conversation_id="1451">
    <ts>2019-05-14T03:58:31.261300</ts>
    <user>Nieves</user>
    <text>`((if (vector? xs) mapv map) f xs)` ?</text>
  </message>
  <message conversation_id="1451">
    <ts>2019-05-14T04:02:27.261400</ts>
    <user>Sixta</user>
    <text>That's probably sensible tbh :) although strictly speaking, ` (not= (type (list 1 2 3)) (type (map inc (list 1 2 3))))`</text>
  </message>
  <message conversation_id="1451">
    <ts>2019-05-14T04:07:04.262100</ts>
    <user>Nieves</user>
    <text>of course, lazy raccoon is not obvious raccoon )</text>
  </message>
  <message conversation_id="1451">
    <ts>2019-05-14T04:09:04.262900</ts>
    <user>Nieves</user>
    <text>but at most cases it dont need to make him strict before needed )</text>
  </message>
  <message conversation_id="1452">
    <ts>2019-05-14T04:18:42.264800</ts>
    <user>Nisha</user>
    <text>Hi, related to my previous question about lazy-seq of bytes from a socket:
```
(let [in (.getInputStream (Socket. "localhost" 8888))]
  (run! handle-byte (repeatedly #(.read in))))
```
What’s the advantage of doing seq operation here over recursively handling bytes?
Like
```
(let [in (.getInputStream (Socket. "localhost" 8888))]
  (loop [b (.read in)]
    (handle-byte b)
    (recur (.read in))))
```</text>
  </message>
  <message conversation_id="1453">
    <ts>2019-05-14T05:06:24.265600</ts>
    <user>Stasia</user>
    <text>Why are business use cases, like timestamps etc a bad fit for Clojure metadata?</text>
  </message>
  <message conversation_id="1454">
    <ts>2019-05-14T05:17:51.265700</ts>
    <user>Jolanda</user>
    <text>There’s an overhead to the `seq` abstraction, which at this level is quite significant. If you want to escape procedural code, I advise you turn to transducers</text>
  </message>
  <message conversation_id="1452">
    <ts>2019-05-14T06:06:57.266400</ts>
    <user>Nisha</user>
    <text>Do you mean the second style, which uses loop and recur, is procedural? And why should I escape it?</text>
  </message>
  <message conversation_id="1452">
    <ts>2019-05-14T06:09:41.268600</ts>
    <user>Nisha</user>
    <text>The way I see it is, even it’s procedural, it’s just the byte-reading part, which has side-effect anyway. Most of my business logic is inside `handle-byte`, which can still be functional.</text>
  </message>
  <message conversation_id="1455">
    <ts>2019-05-14T06:11:21.269800</ts>
    <user>Antonia</user>
    <text>Hi! I am not sure it’s a right channel, but is there anybody who ever worked with flatbuffers from Clojure? Its Java API seems reasonable, however at first look it does not seem it can be clojure idiomatic enough. I can miss something tho.</text>
  </message>
  <message conversation_id="1452">
    <ts>2019-05-14T06:17:21.270000</ts>
    <user>Jolanda</user>
    <text>Yes, it’s not a big deal. Still, what you are doing can be represented as mapping over a bytestream (which also correctly handles when it eventually runs out, unlike the versions you posted).</text>
  </message>
  <message conversation_id="1452">
    <ts>2019-05-14T06:25:18.270200</ts>
    <user>Jolanda</user>
    <text>See for inspiration:
&lt;https://github.com/cgrand/xforms/blob/master/src/net/cgrand/xforms/io.clj#L14&gt;</text>
  </message>
  <message conversation_id="1452">
    <ts>2019-05-14T06:26:11.270500</ts>
    <user>Jolanda</user>
    <text>you can easily implement a `bytes-in` based on this</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T07:21:05.270700</ts>
    <user>Brent</user>
    <text>Is `tap&amp;gt;` suitable for data? I send a map to it but REBL shows it only as a string, and only first N characters (30??) so it is useless as most of it is namespaced keys :disappointed: &lt;@Celestine&gt;, you use REBL and tap&amp;gt;, do you know? Thank you!!!
Update: Mouse over shows the whole map for a few seconds, which solves the problem, though I would prefer to be also able to inspect it in REBL's viewer.</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T07:28:41.271200</ts>
    <user>Zona</user>
    <text>sounds like `business use case` is the definition of data, not metadata :shrug:</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T07:38:24.275900</ts>
    <user>Jasmine</user>
    <text>In general, ops in Clojure have strong perf expectations and you’d expect nth to only work on indexed things. However, nth has a fallback mode that does a linear search so it works on seqs. This is the only example like this I’m aware of in Clojure (and I believe it’s probably to support destructuring)</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T07:39:58.277600</ts>
    <user>Jasmine</user>
    <text>Should be data and I believe there was talk about ways to inspect and def as it, but not sure where that is</text>
  </message>
  <message conversation_id="1452">
    <ts>2019-05-14T08:00:07.277700</ts>
    <user>Alaine</user>
    <text>I see. So now I raise back my original question: why `nth` doesn’t work on a map (with an implicit transformation of the map into a seq)?</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T08:12:05.278600</ts>
    <user>Jasmine</user>
    <text>It’s a collection function, not a sequence function, so does no seq coercion</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T08:12:48.279400</ts>
    <user>Jasmine</user>
    <text>Since maps are unordered, asking for the nth thing is meaningless</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T08:13:20.280500</ts>
    <user>Jasmine</user>
    <text>If you explicitly convert to a seq, then you have something ordered, and you can ask the question</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T08:19:53.280700</ts>
    <user>Alaine</user>
    <text>Would it be accurate to say that seq coercion occurs only   inside functions where the perfs on seq are good?</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T08:45:56.281600</ts>
    <user>Jasmine</user>
    <text>No, seq coercion occurs on all seq functions </text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T08:46:40.282000</ts>
    <user>Jasmine</user>
    <text>Not a perf thing</text>
  </message>
  <message conversation_id="1457">
    <ts>2019-05-14T09:08:57.282200</ts>
    <user>Alaine</user>
    <text>What is the exact meaning of a seq function?</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T09:16:06.282400</ts>
    <user>Jasmine</user>
    <text>the functions described at the bottom of &lt;https://clojure.org/reference/sequences&gt; - functions that take a seqable as last arg and return a sequence (really a seqable)</text>
  </message>
  <message conversation_id="1456">
    <ts>2019-05-14T09:16:57.282600</ts>
    <user>Jasmine</user>
    <text>as opposed to collection functions which take a data structure as first argument and operate on the data structure (assoc, conj, nth, disj, contains?, get, etc)</text>
  </message>
  <message conversation_id="1458">
    <ts>2019-05-14T10:27:52.283400</ts>
    <user>Meagan</user>
    <text>&lt;@Brent&gt; are you using nrebl-middleware?</text>
  </message>
  <message conversation_id="1459">
    <ts>2019-05-14T11:13:27.283500</ts>
    <user>Stasia</user>
    <text>what about transient business data?</text>
  </message>
  <message conversation_id="1457">
    <ts>2019-05-14T11:34:37.283800</ts>
    <user>Alaine</user>
    <text>I don’t want to drag your attention to unimportant details, but `nth` appears in the list at the bottom of &lt;https://clojure.org/reference/sequences&gt;
Also, I noticed that `last` works on maps</text>
  </message>
  <message conversation_id="1460">
    <ts>2019-05-14T11:49:31.284600</ts>
    <user>Clarine</user>
    <text>on Windows GraalVM native I get a nullpointer for `io/resource` because `(.getContextClassLoader (Thread/currentThread))` returns `nil`. What should I use instead?</text>
  </message>
  <message conversation_id="1460">
    <ts>2019-05-14T11:50:08.284900</ts>
    <user>Clarine</user>
    <text>it’s probably a bug in GraalVM, but maybe there’s a workaround?</text>
  </message>
  <message conversation_id="1457">
    <ts>2019-05-14T12:09:32.285100</ts>
    <user>Jasmine</user>
    <text>last is a seq function so coerces to seq</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:13:57.288400</ts>
    <user>Mildred</user>
    <text>I’m writing a macro that uses eval to do a series of requires and then uses them inside the body (like `(mymacro (:require [my.ns :as m]) (m/some-fn))`). It works fine except if I use a namespace aliased keyword (like `(mymacro (:require [my.ns :as m]) (m/some-fn ::m/my-kw))`). It throws an error saying it can’t resolve `m`. Curious if this is possible to get working and generally when are namespace aliased keywords resolved?</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:19:27.288800</ts>
    <user>Dann</user>
    <text>namespace aliasing is done at read time</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:19:56.289100</ts>
    <user>Dann</user>
    <text>which happens before your macro runs</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:22:06.289700</ts>
    <user>Clarine</user>
    <text>I believe this is known as the Gilardi scenario</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:22:19.290100</ts>
    <user>Clarine</user>
    <text>&lt;https://technomancy.us/143&gt;</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:23:05.290400</ts>
    <user>Mildred</user>
    <text>Thanks &lt;@Dann&gt;, that makes sense. &lt;@Clarine&gt; reading…</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:27:05.292600</ts>
    <user>Mildred</user>
    <text>&lt;@Clarine&gt; interesting article, and i’m already using a wrapping `do` (my macro is based off of the one found here &lt;https://github.com/mfikes/chivorcam/blob/master/src/chivorcam/core.cljc&gt;). AFAICT though, as &lt;@Dann&gt; said, the namespace aliased keyword expansion is happening before anything gets eval’d.</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:27:25.293600</ts>
    <user>Peg</user>
    <text>Does anyone have experience with Jib for Clojure containers? What would be required to get that into boot or lein?</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:27:39.294100</ts>
    <user>Mildred</user>
    <text>Which I guess means that the compiler is analyzing the file using the requires in `ns` perhaps to do that namespace resolution?</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:28:04.294700</ts>
    <user>Dann</user>
    <text>&lt;@Mildred&gt; one work around would be something like the macro turning `m my-kw` (or anything else that isn't an aliased keyword) into `::m/my-kw` on output</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:28:38.295100</ts>
    <user>Dann</user>
    <text>it could be symbols, strings, whatever</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:29:22.295900</ts>
    <user>Dann</user>
    <text>it could even convert `:m/my-kw` into `::m/my-kw` - if that makes any sense for the macro internally</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:30:38.296300</ts>
    <user>Mildred</user>
    <text>Sort of implementing my own version of the expansion</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:32:03.297700</ts>
    <user>Dann</user>
    <text>yeah - it really depends on what your macro is meant to do</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:32:10.298000</ts>
    <user>Mildred</user>
    <text>for this specific case I can work around it by just avoiding those namespace aliased keywords (it’ll be used in a fairly limited way, so that’ll be possible)</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:32:37.298600</ts>
    <user>Dann</user>
    <text>~also, there's nothing stopping you from just using :my.ns/some-key - :: is never needed, just convenient~ - what you said</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:32:51.298900</ts>
    <user>Mildred</user>
    <text>right, I did that initially too</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:33:36.299400</ts>
    <user>Celestine</user>
    <text>&lt;@Brent&gt; Currently, `tap&amp;gt;`'d values in REBL just display as strings -- you can't `datafy`/`nav` into them which is a bit of a shame. I use `tap&amp;gt;` for debugging and being able to see output alone is valuable but, yes, it would be a lot more valuable if you could drill down into `tap&amp;gt;`'d values in REBL like you can with regular values from the REPL. &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:34:58.299600</ts>
    <user>Celestine</user>
    <text>It's also kind of annoying that `tap&amp;gt;` returns `true`/`false` instead of the value you are "tapping". Makes it harder to use in a pipeline (you end up with `(doto tap&amp;gt;)` instead of just `(tap&amp;gt;)` and you can only use it with `-&amp;gt;` not `-&amp;gt;&amp;gt;`).</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T12:44:29.300100</ts>
    <user>Jasmine</user>
    <text>I think we have a CLJ ticket for that</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T13:34:03.300500</ts>
    <user>Celestine</user>
    <text>I don't see one &lt;@Jasmine&gt; -- I searched for both `tap&amp;gt;` and `REBL`.</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T13:34:28.301100</ts>
    <user>Jasmine</user>
    <text>Maybe we’ve just talked about it then</text>
  </message>
  <message conversation_id="1461">
    <ts>2019-05-14T13:35:41.301300</ts>
    <user>Celestine</user>
    <text>There's &lt;https://github.com/cognitect-labs/REBL-distro/issues/20&gt; about `tap&amp;gt;` failing altogether in REBL on certain JDK versions (due to a reference to a class that has been removed).</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:43:47.305400</ts>
    <user>Keenan</user>
    <text>Wondering if anyone can help me find a more elegant way to do this. So for this puzzle here &lt;https://adventofcode.com/2017/day/18&gt; I've got a simple parser function to translate an instruction string into an instruction function. It's pretty boiler-platey though. In the end, I want to try multiple regexes to find what I need (with capture) and I want to short-circuit when I've got it (not try all the matches). I don't mind the repetition within regex strings, but the repeated `when-let` is pretty ugly:</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:44:10.305600</ts>
    <user>Keenan</user>
    <text>None</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:45:35.306100</ts>
    <user>Dann</user>
    <text>that could be cond</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:45:59.306600</ts>
    <user>Dann</user>
    <text>oh, but the destructuring - you want a match type thing that has destructuring built into the clauses</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:46:29.306900</ts>
    <user>Keenan</user>
    <text>Exactly.</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:50:19.307800</ts>
    <user>Dann</user>
    <text>you could do the regex as `#"([a-z]+) (\d+)"` then you can use cond on the a-z</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:50:26.308000</ts>
    <user>Dann</user>
    <text>or even case</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:52:44.309700</ts>
    <user>Keenan</user>
    <text>Sure. I had considered some trick like that, but I guess I was hoping for something a bit more generic for this kind of thing. Not the end of the world, guess I could invest in some macro or something if I do this enough (suprisingly a lot in these AOC puzzles).</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:53:35.310100</ts>
    <user>Dann</user>
    <text>I think one parsing rule then dispatching on data is better than N parsing rules</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:54:08.310500</ts>
    <user>Becki</user>
    <text>doesn't `match` work with regex?</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:54:24.310700</ts>
    <user>Dann</user>
    <text>match isn't in clojure.core</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:55:05.311700</ts>
    <user>Becki</user>
    <text>ah. if that's part of the desire then i suppose its closed off</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:55:30.312100</ts>
    <user>Dann</user>
    <text>usually with puzzles like these people aren't able to use deps? dunno</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:56:38.313200</ts>
    <user>Keenan</user>
    <text>I can use whatever (no requirements, just for fun), but for sure I'll prefer things in core or more standard stuff when available.</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:57:55.313500</ts>
    <user>Becki</user>
    <text>match is standard even though not core</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:58:08.313700</ts>
    <user>Becki</user>
    <text>(imo)</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T13:59:48.315400</ts>
    <user>Keenan</user>
    <text>Right. Can you see how it would fit in with my above example? If it's elegant and not too off the beaten path (not trying to refactor my whole solution into some prolog type thing) I'd for sure consider it</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:05:05.316400</ts>
    <user>Evonne</user>
    <text>&lt;@Keenan&gt; what about something like this:</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:05:13.316600</ts>
    <user>Evonne</user>
    <text>```  (defn parse-instruction [i]
    (let [[_ op x y] (some identity
                  [(re-matches #"(snd) (\d+)" i)
                   (re-matches #"(set) ([a-z]) (\d+)" i)
                   (re-matches #"(add) ([a-z]) (\d+)" i)
                   (re-matches #"(mul) ([a-z]) (\d+)" i)
                   (re-matches #"(mod) ([a-z]) (\d+)" i)
                   (re-matches #"(rcv) ([a-z])" i)])]
      (case op
        "snd" #(assoc % :snd (Long/parseLong x))
        "set" #(assoc % x (Long/parseLong y))
        "add" #(update % x (partial + (Long/parseLong y)))
        ,,,
        )))```</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:06:25.317600</ts>
    <user>Evonne</user>
    <text>Of course as soon as I write that my brain is screaming `defmulti` at me, but …</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:06:27.317700</ts>
    <user>Becki</user>
    <text>i looked back and I just mapped read-string over the strings once they were split by space</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:07:21.318300</ts>
    <user>Keenan</user>
    <text>^^^ Haha. That's another way.</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:07:37.318900</ts>
    <user>Becki</user>
    <text>here's the evaluator: &lt;https://github.com/dpsutton/advent/blob/master/2017/src/advent/day18.clj#L15&gt; and here's where i prepare the data: &lt;https://github.com/dpsutton/advent/blob/master/2017/src/advent/day18data.clj#L50&gt;</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:08:19.320100</ts>
    <user>Keenan</user>
    <text>&lt;@Evonne&gt; I do like that better, works with the speculative destructuring</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:09:05.320500</ts>
    <user>Evonne</user>
    <text>It kinda separates it into a lexing step and a parsing step, which I like</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:10:39.321400</ts>
    <user>Dann</user>
    <text>the code becomes quite a bit simpler if you do the regex once: ```(defn try-number                                                                                                                                      
  [s]                                                                                                                                                 
  (try (Long/parseLong s)                                                                                                                             
       (catch Exception _ s)))

(def instruction-re #"(\w+) (\w+) ?(\w+)?")                                                                                                           

(defn parse-instruction                                                                                                                               
  [i]                                                                                                                                                 
  (let [[_ op a b] (re-matches instruction-re i)                                                                                                      
        x (try-number a)                                                                                                                              
        y (try-number b)]                                                                                                                             
    (case op                                                                                                                                          
      "snd" #(assoc % :snd x)                                                                                                                         
      "set" #(assoc % x y)))) ```</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:11:11.321800</ts>
    <user>Dann</user>
    <text>oh, I should have read the scrollback :D</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:11:37.322300</ts>
    <user>Dann</user>
    <text>I guess speculatively trying to treat everything as a number in order to use only one regex is weird though :/</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:13:55.323000</ts>
    <user>Evonne</user>
    <text>Looks like you could do it with 3 regexes though: op-digit, op-var-digit, and op-var.</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:14:05.323200</ts>
    <user>Dann</user>
    <text>that's true</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:14:23.323600</ts>
    <user>Dann</user>
    <text>that's probably the most elegant version</text>
  </message>
  <message conversation_id="1463">
    <ts>2019-05-14T14:20:00.324700</ts>
    <user>Nella</user>
    <text>you could split on spaces and have a defmulti that dispatches on first. then the defmethod can just take the whole space split line and do what it needs to do with it.</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:20:38.325100</ts>
    <user>Nella</user>
    <text>or even just a map of functions that are keyed by the instruction string</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:24:57.325600</ts>
    <user>Evonne</user>
    <text>Yeah, that was what I was thinking as soon as I wrote out the `some`-based version</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:26:05.326800</ts>
    <user>Evonne</user>
    <text>The nice thing about `some` + regexes is that you can specify that, for example, the `add` operator has to be followed by exactly a 1-character channel name and an integer value.</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:26:44.327200</ts>
    <user>Evonne</user>
    <text>The multimethod would have to add extra logic to provide those constraints.</text>
  </message>
  <message conversation_id="1464">
    <ts>2019-05-14T14:29:29.328500</ts>
    <user>Leda</user>
    <text>Hey guys, i'm creating a zip file for the client download with Ring. But i want after the user download's it, it automatically deletes the zip file, any ready solutions for that?</text>
  </message>
  <message conversation_id="1464">
    <ts>2019-05-14T14:30:56.328900</ts>
    <user>Evonne</user>
    <text>Maybe this? &lt;https://github.com/clojure-cookbook/clojure-cookbook/blob/master/04_local-io/4-10_using-temp-files.asciidoc&gt;</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:35:21.329600</ts>
    <user>Leda</user>
    <text>yeah i saw this but, deleting when the JVM exits is not a good solution</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:35:32.329900</ts>
    <user>Leda</user>
    <text>because it will be always online</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:35:48.330400</ts>
    <user>Leda</user>
    <text>it may be a solution by now, but not in the future</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:36:00.330700</ts>
    <user>Evonne</user>
    <text>there’s a line at the bottom showing how to delete the file without waiting for the JVM to exit</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:36:42.331200</ts>
    <user>Leda</user>
    <text>yes, but i don't know how to trigger this delete</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:37:02.331700</ts>
    <user>Leda</user>
    <text>i don't know how to tell if a user have tried to access the file, and if he finished downloading or not</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:37:22.332200</ts>
    <user>Leda</user>
    <text>i'm trying to figure out something within Ring that does do this</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:38:02.332600</ts>
    <user>Meagan</user>
    <text>you might consider deleting after a certain period of time. in case the user needs to re-try downloading it</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:38:21.333000</ts>
    <user>Leda</user>
    <text>yeah that's good too</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:38:38.333600</ts>
    <user>Meagan</user>
    <text>something like 10 mins / 20 mins / 1 hr, whatever you feel is best</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:39:05.334100</ts>
    <user>Leda</user>
    <text>but in that case, there is any sort of lib that does this kind of job? runs a function every X minutes?</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:39:57.335000</ts>
    <user>Leda</user>
    <text>but the function would need to be specific to each created resource, because every resource has a different trigger time</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:40:18.335400</ts>
    <user>Leda</user>
    <text>wow, that seems to be hard to scale</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:40:53.335700</ts>
    <user>Meagan</user>
    <text>there’s a few libs out there for running tasks on a timer. I’ve used &lt;https://github.com/juxt/tick&gt;</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:41:34.337400</ts>
    <user>Meagan</user>
    <text>you could probably run it on a batch process: every 10 mins or so, run a function that checks if any files are over their expiration time and if so, delete them</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:41:41.337600</ts>
    <user>Evonne</user>
    <text>I would probably do something like: have a task that checks the temps/ directory every few minutes, get the create-datetime for each file, and if the file is older than “X” minutes, delete it.</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:41:50.337900</ts>
    <user>Meagan</user>
    <text>jinx! :smile:</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:41:53.338200</ts>
    <user>Leda</user>
    <text>sounds good</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:42:00.338400</ts>
    <user>Evonne</user>
    <text>Lol, typing and not reading</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:42:24.339000</ts>
    <user>Evonne</user>
    <text>The nice thing about periodically “sweeping” is that if your app crashes and restarts, it’ll automatically clean up after itself.</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:43:21.339500</ts>
    <user>Leda</user>
    <text>i'll check this `tick`library and see if i can create the task, thanks guys</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:50:23.342100</ts>
    <user>Fatima</user>
    <text>&lt;@Leda&gt; if you need something solid and scalable I recommend pushing the zip-files to AWS S3 and programmatically generating download URL that’s valid for x seconds. It’s a pretty common use-case.</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:54:07.344500</ts>
    <user>Leda</user>
    <text>wow, that sounds nice, definitely i can possibly use this later on, after my beta phase is over...</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:56:17.346900</ts>
    <user>Leda</user>
    <text>but i'll have to study this later, because my zip files vary from 10mb to 200mb, and i don't want the user waiting to download for too long...</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:57:56.348300</ts>
    <user>Fatima</user>
    <text>You don’t either want that your servers fill up from the zip-files and crash. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T14:58:43.348500</ts>
    <user>Leda</user>
    <text>that's also true haha</text>
  </message>
  <message conversation_id="1465">
    <ts>2019-05-14T15:00:59.349300</ts>
    <user>Sheron</user>
    <text>for the cases of "user has to download some generated content" - as my stuff is on aws i would definitely put the downloadable thing on s3</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T15:01:10.349600</ts>
    <user>Sheron</user>
    <text>and tell the user to get it from there, maybe directly, maybe via a redirect</text>
  </message>
  <message conversation_id="1465">
    <ts>2019-05-14T15:02:19.350000</ts>
    <user>Sheron</user>
    <text>streaming big stuff out to possibly slow clients from your appserver is just looking for trouble :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T15:02:46.350400</ts>
    <user>Fatima</user>
    <text>Yep, it’s a good idea to offload all the nasty bits to Amazon. :wink:</text>
  </message>
  <message conversation_id="1462">
    <ts>2019-05-14T15:26:11.351500</ts>
    <user>Alaine</user>
    <text>according to the previous definition, `last` is not a seq function as it doesn’t return a sequence</text>
  </message>
  <message conversation_id="1466">
    <ts>2019-05-14T15:30:42.352600</ts>
    <user>Dann</user>
    <text>&lt;@Leda&gt; what if the zip never had to be a file? you can provide a download that's simply bytes generated into your output</text>
  </message>
  <message conversation_id="1466">
    <ts>2019-05-14T15:31:14.352900</ts>
    <user>Dann</user>
    <text>this isn't something that ever needs to touch a file system</text>
  </message>
  <message conversation_id="1466">
    <ts>2019-05-14T15:31:52.353500</ts>
    <user>Dann</user>
    <text>(or worst case you can use a file system that's just in-process heap memory - which guarantees cleanup when the process exits anyway)</text>
  </message>
  <message conversation_id="1466">
    <ts>2019-05-14T15:36:29.353600</ts>
    <user>Jasmine</user>
    <text>ok, "most" return a sequence :)</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:05:56.356000</ts>
    <user>Onita</user>
    <text>hey everyone. i’m trying to work out a really simple example of parallelization to see if i can get some performance increase. is there any way i could potentially parallelize `(apply min-key second {1 2 2 3 3 4 .. })`?</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:06:35.356600</ts>
    <user>Onita</user>
    <text>my first thought was something like splitting the list into `n` components and then running `pmap` across them, but i feel like the overhead would dominate</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:09:11.357000</ts>
    <user>Celestine</user>
    <text>&lt;@Onita&gt; How big is that map likely to be?</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:09:35.357300</ts>
    <user>Onita</user>
    <text>let’s say on the order of 1000s</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:10:02.357700</ts>
    <user>Onita</user>
    <text>this function would likely run super hot however, so any improvement would help</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:12:57.358700</ts>
    <user>Celestine</user>
    <text>`clojure.core.reducers` will probably help you here -- `r/fold` can do work in parallel.</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:13:27.359000</ts>
    <user>Onita</user>
    <text>cool, thanks. i guess this is a good excuse to dive into that library</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:13:47.359300</ts>
    <user>Celestine</user>
    <text>&lt;https://clojure.org/reference/reducers#_reduce_and_fold&gt; should get you started</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:21:39.359900</ts>
    <user>Dorla</user>
    <text>&lt;@Onita&gt; using `val` instead of `second` is ~2x faster on my laptop:
```
(def m (zipmap (range 1000) (range 1000)))

(require '[criterium.core :refer [bench]])
(bench (apply min-key val m))
;;  Execution time mean : 41.214976 µs
(bench (apply min-key second m))
;; Execution time mean : 100.534521 µs
```</text>
  </message>
  <message conversation_id="1467">
    <ts>2019-05-14T18:22:19.360200</ts>
    <user>Onita</user>
    <text>wow. good find, thanks</text>
  </message>
  <message conversation_id="1468">
    <ts>2019-05-14T18:56:13.361400</ts>
    <user>Jasmine</user>
    <text>second walks it through the key, val is an indexed lookup</text>
  </message>
  <message conversation_id="1468">
    <ts>2019-05-14T18:56:31.361700</ts>
    <user>Jasmine</user>
    <text>and particularly special-cased for map entries</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T19:54:41.362200</ts>
    <user>Elaine</user>
    <text>Why `last` is slower then `val` ?</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T19:55:08.362500</ts>
    <user>Elaine</user>
    <text>`val` performs like `#(nth % 1)`</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T19:56:02.362800</ts>
    <user>Celestine</user>
    <text>&lt;@Elaine&gt; ```user=&amp;gt; (source val)
(defn val
  "Returns the value in the map entry."
  {:added "1.0"
   :static true}
  [^java.util.Map$Entry e]
    (. e (getValue)))
nil
```</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T19:56:24.363200</ts>
    <user>Celestine</user>
    <text>`val` is a fast operation on a `MapEntry`</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T19:57:15.363600</ts>
    <user>Celestine</user>
    <text>You can't call `val` on an arbitrary two-element vector :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T19:58:32.364300</ts>
    <user>Elaine</user>
    <text>`last` is linear time :open_mouth:
I thought that last was constant time in counted structures</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:13:14.364700</ts>
    <user>Celestine</user>
    <text>You're thinking of `peek` perhaps?</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:13:41.364900</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (doc peek)
-------------------------
clojure.core/peek
([coll])
  For a list or queue, same as first, for a vector, same as, but much
  more efficient than, last. If the collection is empty, returns nil.
nil
```</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T20:15:56.365500</ts>
    <user>Elaine</user>
    <text>```
user=&amp;gt; (time (apply min-key val m))
"Elapsed time: 842.254296 msecs"
[0 0]
user=&amp;gt; (time (apply min-key peek m))
"Elapsed time: 838.988506 msecs"
[0 0]
user=&amp;gt; (time (apply min-key last m))
"Elapsed time: 2076.809707 msecs"
[0 0]
user=&amp;gt; (time (apply min-key second m))
"Elapsed time: 1531.45713 msecs"
[0 0]
```
peek performs like val :slightly_smiling_face:
second is slow
last is slower</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T20:18:24.366500</ts>
    <user>Onita</user>
    <text>could someone help me understand what’s happening in the combine step of a fold when it’s called with no arguments?</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T20:18:37.366900</ts>
    <user>Onita</user>
    <text>having trouble getting my head around it</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:21:55.367900</ts>
    <user>Celestine</user>
    <text>&lt;@Elaine&gt; Yup, `peek` is special-cased for performance and seems to work just fine on `MapEntry` objects too ```user=&amp;gt; (let [x (first {:a 1})] (quick-bench (val x)))
Evaluation count : 91382334 in 6 samples of 15230389 calls.
             Execution time mean : 4.912437 ns
...
user=&amp;gt; (let [x (first {:a 1})] (quick-bench (peek x)))
Evaluation count : 92238174 in 6 samples of 15373029 calls.
             Execution time mean : 4.878394 ns
...
```</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:23:03.368400</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (let [x (first {:a 1})] (quick-bench (last x)))
Evaluation count : 4457562 in 6 samples of 742927 calls.
             Execution time mean : 139.544772 ns
...
user=&amp;gt; (let [x (first {:a 1})] (quick-bench (second x)))
Evaluation count : 7887582 in 6 samples of 1314597 calls.
             Execution time mean : 76.811493 ns
...
``` Big difference in this case.</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:31:47.369000</ts>
    <user>Celestine</user>
    <text>&lt;@Onita&gt; Both the reducef and the combinef can be called with no arguments, and should return the identity element.</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:32:30.369900</ts>
    <user>Celestine</user>
    <text>Since you're looking for a minimum, I would imagine you'd need to return a "maximum" int value so all other values are smaller?</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:33:27.370500</ts>
    <user>Onita</user>
    <text>yeah i think that’s where i got stuck, trying to conceptualize what the identity element of an application of `min-keys` would be</text>
  </message>
  <message conversation_id="1469">
    <ts>2019-05-14T20:33:35.370800</ts>
    <user>Onita</user>
    <text>but i guess that makes sense</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:49:31.371500</ts>
    <user>Celestine</user>
    <text>It's a little odd in your case &lt;@Onita&gt; because your "identity" is to return an arbitrary `MapEntry` that contains a maximum value.</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:49:43.371900</ts>
    <user>Celestine</user>
    <text>Your reducef could look like this: ```(defn mk ([] (clojure.lang.MapEntry. nil Long/MAX_VALUE)) ([a x] (min-key val a x)))```</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:50:36.372400</ts>
    <user>Celestine</user>
    <text>and then you'd do ```(r/fold mk (seq your-giant-map))```</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:51:54.373400</ts>
    <user>Celestine</user>
    <text>(you need the seq there, otherwise you seem to get a `reduce-kv` style call of your reducef with the accumulator, the key, and then value)</text>
  </message>
  <message conversation_id="1470">
    <ts>2019-05-14T20:56:30.374200</ts>
    <user>Celestine</user>
    <text>(although I wonder if calling `seq` here defeats some of what `r/fold` can do? I haven't experimented much with it...)</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T21:42:52.374400</ts>
    <user>Onita</user>
    <text>hmm, ok, let me give this a try</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:03:09.374900</ts>
    <user>Onita</user>
    <text>so i’ve got this, which at least returns the correct result
```
(defn faster-mk [m]
  (fold (fn reducef
          ([] [nil Long/MAX_VALUE])
          ([a b] (min-key second a b))
          ([a b c] (min-key second a [b c])))
        (seq m)))
```</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:03:37.375700</ts>
    <user>Onita</user>
    <text>but it seems to perform worse than the serial version, even for large sizes of `m`. tbc</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:04:52.375900</ts>
    <user>Onita</user>
    <text>you may be right about the `seq`.</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:06:53.376100</ts>
    <user>Onita</user>
    <text>in fact, it’s on the order of 100x worse</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:08:46.376600</ts>
    <user>Onita</user>
    <text>actually, the results are unclear. still testing</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:13:49.377700</ts>
    <user>Celestine</user>
    <text>Use `(clojure.lang.MapEntry. nil Long/MAX_VALUE)` and `(clojure.lang.MapEntry. b c)` instead of vectors. Use `val` instead of `second`. Don't `seq` the map.</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:15:03.378800</ts>
    <user>Celestine</user>
    <text>```(defn faster-mk [m]
  (fold (fn reducef
          ([] (clojure.lang.MapEntry. nil Long/MAX_VALUE))
          ([a b] (min-key val a b))
          ([a b c] (min-key val a (clojure.lang.MapEntry. b c))))
        m))``` that should be faster</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:15:43.379300</ts>
    <user>Celestine</user>
    <text>(although when I tested `(apply min-key val large-map)`, that was pretty fast)</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:16:22.379700</ts>
    <user>Onita</user>
    <text>yeah, the simple version seems better. interesting</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:16:37.380100</ts>
    <user>Onita</user>
    <text>although, that example helps a lot in understanding fold</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:17:24.380900</ts>
    <user>Celestine</user>
    <text>I tried it with a 20,000 element hash map... I think there's just not enough computation in there to benefit from concurrent execution?</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:17:30.381100</ts>
    <user>Onita</user>
    <text>yeah. seems like it.</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:18:17.382000</ts>
    <user>Onita</user>
    <text>for my usage i don’t think i should optimize for maps consistently larger than 50k.</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:18:27.382200</ts>
    <user>Onita</user>
    <text>all the same, thanks a lot for your help</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:22:32.382500</ts>
    <user>Celestine</user>
    <text>It's an interesting little puzzle :slightly_smiling_face: Happy to help!</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:24:10.383000</ts>
    <user>Celestine</user>
    <text>Once you get up to 50k, there's more of a difference ```user=&amp;gt; (let [v (into {} (take 50000 (repeatedly #(clojure.lang.MapEntry. (rand-int 10000) (rand-int 10000)))))] (quick-bench (apply min-key val v)))
Evaluation count : 1206 in 6 samples of 201 calls.
             Execution time mean : 522.122368 µs
...
user=&amp;gt; (let [v (into {} (take 50000 (repeatedly #(clojure.lang.MapEntry. (rand-int 10000) (rand-int 10000)))))] (quick-bench (r/fold mk v)))
Evaluation count : 3420 in 6 samples of 570 calls.
             Execution time mean : 172.390103 µs
...```</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T22:25:59.383700</ts>
    <user>Celestine</user>
    <text>(weirdly I'm seeing more of a difference at 20k than I did before -- benchmarking can be weird)</text>
  </message>
  <message conversation_id="1472">
    <ts>2019-05-14T23:02:48.384200</ts>
    <user>Onita</user>
    <text>would it be bad practice to check how big a thing is before deciding how to operate on it?</text>
  </message>
  <message conversation_id="1472">
    <ts>2019-05-14T23:03:21.384900</ts>
    <user>Onita</user>
    <text>`(if (&amp;gt; (count thing) 20000) (parallel) (serial)))`</text>
  </message>
  <message conversation_id="1471">
    <ts>2019-05-14T23:36:00.385500</ts>
    <user>Celestine</user>
    <text>&lt;@Onita&gt; If you know the performance changes at a particular size, that seems very reasonable.</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T04:47:36.387400</ts>
    <user>Ivana</user>
    <text>I'm observing weird behaviour around watches on a ref. Any idea what's wrong? &lt;https://gist.github.com/jeroenvandijk/90650bd5d4b8e3ba346e3483bf70d3ab&gt;</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T04:48:28.388200</ts>
    <user>Ivana</user>
    <text>```(let []
  (def ^{:flag 1} v 1))

(def ^{:flag 2} v 2)

(add-watch #'v ::listener (fn [_key _ref old-value new-value]
                            (println "old " old-value ", new" new-value "new-meta " _ref (select-keys (meta _ref) [:flag]))))
 ``` Wrapping the def in a let block "fixes" the meta assignment</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:13:04.388900</ts>
    <user>Edwina</user>
    <text>the watch function will be called *before* the var’s value will be set</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:15:40.390600</ts>
    <user>Edwina</user>
    <text>None</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:15:59.391100</ts>
    <user>Ivana</user>
    <text>that doesn't seem to be the case for when it is wrapped in the let block</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:16:12.391500</ts>
    <user>Ivana</user>
    <text>there is an inconsistency if i didn't make a mistake myself</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:16:50.392000</ts>
    <user>Ivana</user>
    <text>In this gist you can see a sequence of evaluations that show this inconsistent behaviour</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:18:12.392500</ts>
    <user>Edwina</user>
    <text>yeah seems there’s a difference indeed</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:22:26.394600</ts>
    <user>Edwina</user>
    <text>though this probably falls under “that’s not what you’re supposed to use it ffor”</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:23:29.395600</ts>
    <user>Edwina</user>
    <text>you’re also not guaranteed to have the state of the ref immediately before or after setting the value</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:24:22.396700</ts>
    <user>Ivana</user>
    <text>yeah i can imagine combining meta, watches and vars is not very common. You might be right :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:24:24.396900</ts>
    <user>Edwina</user>
    <text>" Note that an atom’s or
  ref’s state may have changed again prior to the fn call, so use
  old/new-state rather than derefing the reference. Note also that watch
  fns may be called from multiple threads simultaneously”</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:25:03.397800</ts>
    <user>Lavonia</user>
    <text>Sorry for interjecting but I believe we are talking about vars here, not refs.</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:25:12.398100</ts>
    <user>Edwina</user>
    <text>yeah.</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:25:12.398200</ts>
    <user>Ivana</user>
    <text>But note the value of the var (`_ref`) is given to the watch function so it's not doing a deref</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:25:48.399100</ts>
    <user>Lavonia</user>
    <text>No, the `_ref` argument is the box the holds a value</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:25:52.399300</ts>
    <user>Lavonia</user>
    <text>Not the value itself</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:26:10.399900</ts>
    <user>Lavonia</user>
    <text>The third and fourth args are old and new values in the box which is the second arg</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:26:14.400100</ts>
    <user>Ivana</user>
    <text>The value of the ref i mean</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:26:14.400200</ts>
    <user>Edwina</user>
    <text>yes but the meta data on the var is mutable.</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:26:27.400600</ts>
    <user>Edwina</user>
    <text>and you’re setting the meta of the var, not of the value</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:26:46.401200</ts>
    <user>Edwina</user>
    <text>see alter-meta!</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:26:50.401400</ts>
    <user>Lavonia</user>
    <text>Exactly. This meta is on the box (var), not the value in the box</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:27:10.402000</ts>
    <user>Lavonia</user>
    <text>Still doesn't explain the different behaviour  in the let though</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:27:27.402600</ts>
    <user>Ivana</user>
    <text>so `(meta some-var)` is doing an implicit deref on `some-var` if that's correct</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:27:32.402700</ts>
    <user>Lavonia</user>
    <text>I found the same thing's happening in my REPL:```user=&amp;gt; (declare a)
#'user/a
user=&amp;gt; (add-watch #'a ::listener (fn [_ ref old-val new-val] (pprint {:old-val old-val :new-val new-val :meta (select-keys (meta ref) [:flag])})))
#'user/a
user=&amp;gt; (def ^{:flag 1} a 1)
{:old-val
 #object[clojure.lang.Var$Unbound 0x5e26f1ed "Unbound: #'user/a"],
 :new-val 1,
 :meta {}}
#'user/a
user=&amp;gt; (def ^{:flag 2} a 2)
{:old-val 1, :new-val 2, :meta {:flag 1}}
#'user/a
user=&amp;gt; (def ^{:flag 3} a 3)
{:old-val 2, :new-val 3, :meta {:flag 2}}
#'user/a
user=&amp;gt; (let [] (def ^{:flag 4} a 4))
{:old-val 3, :new-val 4, :meta {:flag 4}}
#'user/a
user=&amp;gt; (def ^{:flag 5} a 5)
{:old-val 4, :new-val 5, :meta {:flag 4}}
#'user/a
user=&amp;gt; ```</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:28:56.404700</ts>
    <user>Edwina</user>
    <text>vars have an identity, and you can change the metadata on the var, so yeah it works *like* deref, but it’s not a deref since the deref gets the associated value instead of the metadata</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:28:56.404800</ts>
    <user>Lavonia</user>
    <text>The symbol `some-var` gets evaluated to a var(box) which is then deref'ed and the metadata on that value is given</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:29:05.405000</ts>
    <user>Edwina</user>
    <text>not really in this case</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:29:25.405500</ts>
    <user>Edwina</user>
    <text>`ref` here is really `#'a`</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:30:09.406300</ts>
    <user>Lavonia</user>
    <text>```user=&amp;gt; (def ^{:var-meta 1} a ^{:value-meta 2} {:value-itself 3})
{:old-val 5, :new-val {:value-itself 3}, :meta {:flag 5}}
#'user/a
user=&amp;gt; (meta a)
{:value-meta 2}
user=&amp;gt; (meta #'a)
{:var-meta 1, :line 1, :column 1, :file "NO_SOURCE_PATH", :name a, :ns #object[clojure.lang.Namespace 0x1cf336fd "user"]}
user=&amp;gt; ```</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:30:20.406800</ts>
    <user>Lavonia</user>
    <text>This might elucidate the difference.</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:30:55.407300</ts>
    <user>Edwina</user>
    <text>so you’re dealing with the var `a` and that var has metadata which can be set directly (by `def` in this case)</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:31:39.408000</ts>
    <user>Edwina</user>
    <text>you can also set the meta data using `alter-meta!`</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:39:36.409500</ts>
    <user>Ivana</user>
    <text>Thanks guys. I'm trying to make something work for a naive user that set a meta flag on a var so options like `alter-meta!` are good, but not what i'm after. Maybe I'll have to manage expectations instead!</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:40:11.409800</ts>
    <user>Harris</user>
    <text>redeffing a var with `def` is not a good idea anyway (other than in dev)</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:45:39.411500</ts>
    <user>Ivana</user>
    <text>I don't think i'm doing explicit deref-ing. It's documented that watches support var's here and they get the var &lt;https://clojuredocs.org/clojure.core/add-watch&gt; . But if (meta some-var) is an implicit deref you might be right</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T05:46:20.412200</ts>
    <user>Ivana</user>
    <text>or maybe i should *not* rely on the metadata of a var, since like Joost said, it is a mutable reference</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T06:04:20.412600</ts>
    <user>Brent</user>
    <text>thank you , Sean! Let's hope it will be getting. better...</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T06:05:49.413700</ts>
    <user>Edwina</user>
    <text>If you can, you might want to switch to using the meta data on the value instead. </text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T06:06:09.414200</ts>
    <user>Edwina</user>
    <text>Depends on your use case of course </text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T06:11:27.415700</ts>
    <user>Ivana</user>
    <text>I'm doing weird stuff with monitoring vars so I don't have that option for this use case</text>
  </message>
  <message conversation_id="1473">
    <ts>2019-05-15T06:14:11.416200</ts>
    <user>Ivana</user>
    <text>I'll look into sayid to see how they do this &lt;https://github.com/clojure-emacs/sayid/blob/8ea70573e6eb1a0d1a450fd501f38c2cf26ce27f/src/com/billpiel/sayid/trace.clj#L134&gt;</text>
  </message>
  <message conversation_id="1474">
    <ts>2019-05-15T06:19:35.416800</ts>
    <user>Roselia</user>
    <text>any ideas why map-indexed 3 times faster on avg 580 vs 140 ms for 1m entries?
(map vector (iterate inc 0) v)
(map-indexed #(vector %1 %2) v)</text>
  </message>
  <message conversation_id="1474">
    <ts>2019-05-15T07:40:03.418400</ts>
    <user>Sixta</user>
    <text>&lt;@Roselia&gt; map does not handle chunks when given multiple sequences, that might be why.</text>
  </message>
  <message conversation_id="1475">
    <ts>2019-05-15T08:44:12.422500</ts>
    <user>Donita</user>
    <text>Morning all - I am considering starting a side project to create a clojure to Dart compiler mainly for fun but also with mind to use it to create Flutter apps. What would be the best compiler to work from as a base - Clojure, ClojureScript or CLR? Dart is single threaded so more like JavaScript but the syntax is closer to java/C#. Thoughts?</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T08:46:32.424200</ts>
    <user>Noble</user>
    <text>Hi everybody, I got an issue what I don’t really understand.
I am trying to import a protocol to my namespace and then use `satisfies?` to check an instance. In my ns I have the following: `(:import taoensso.carmine.connections.IConnectionPool)`, but when I try to use it like `(satisfies? IConnectionPool "")` then it throws an NPE</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T08:47:17.424300</ts>
    <user>Noble</user>
    <text>```               clojure.core/eval          core.clj: 3214
                             ...
      boot.user$eval34439.invoke                  :    1
boot.user$eval34439.invokeStatic                  :    1
         clojure.core/satisfies?  core_deftype.clj:  569
 clojure.core/find-protocol-impl  core_deftype.clj:  536
          clojure.core/instance?          core.clj:  144
java.lang.NullPointerException:```</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T08:48:20.424500</ts>
    <user>Noble</user>
    <text>am I doing something wrong?</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T08:56:30.425100</ts>
    <user>Jasmine</user>
    <text>For use in this way, you should require, not import</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T08:57:45.426700</ts>
    <user>Jasmine</user>
    <text>It’s a little confusing, but IConnectionPool here is both a var (the protocol map), and an interface (generates internally)</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T08:58:01.427100</ts>
    <user>Jasmine</user>
    <text>satisfies expects the former</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T09:03:37.428000</ts>
    <user>Noble</user>
    <text>thank you &lt;@Jasmine&gt; it fixed the problem</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T09:09:17.428200</ts>
    <user>Jolanda</user>
    <text>&lt;http://clojuredocs.org/clojure.core/satisfies_q#example-5cdc105ae4b0ca44402ef725&gt;</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T09:10:55.428800</ts>
    <user>Noble</user>
    <text>thanks &lt;@Jolanda&gt; I’ve checked the &lt;http://clojuredocs.org|clojuredocs.org&gt; first if there is an example like that</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T09:11:07.429100</ts>
    <user>Noble</user>
    <text>but there have been none yet :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1476">
    <ts>2019-05-15T09:11:21.429400</ts>
    <user>Jolanda</user>
    <text>making the world a better place, one clojuredoc at a time :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1477">
    <ts>2019-05-15T09:55:10.431500</ts>
    <user>Virgil</user>
    <text>what's the latest preferred way to profile Clojure code ? I want something similar to Smalltalk's `MessageTally` which returns a tree with time spent at each branch (in Smalltalk's case that's messages in Clojure it would be function applications)</text>
  </message>
  <message conversation_id="1477">
    <ts>2019-05-15T09:56:08.431700</ts>
    <user>Min</user>
    <text>&lt;https://github.com/clojure-goes-fast/clj-async-profiler&gt; is not bad</text>
  </message>
  <message conversation_id="1478">
    <ts>2019-05-15T13:21:02.432900</ts>
    <user>Celestine</user>
    <text>Oh, I'm sure Cognitect will continue to improve REBL...</text>
  </message>
  <message conversation_id="1478">
    <ts>2019-05-15T13:21:14.433100</ts>
    <user>Jasmine</user>
    <text>indeed</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:48:32.433600</ts>
    <user>Melynda</user>
    <text>Hello!

Is this a known issue with Clojure 1.10.0?

```
user=&amp;gt; (declare foo)
#'user/foo
user=&amp;gt; (def wrap-foo (partial foo "hello"))
#'user/wrap-foo
user=&amp;gt; (defn foo [s] (print (str s " world!")))
#'user/foo
user=&amp;gt; (wrap-foo)
Execution error (IllegalStateException) at user/eval2006 (REPL:1).
Attempting to call unbound fn: #'user/foo
```</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:49:45.434200</ts>
    <user>Rosaline</user>
    <text>that isn't a bug</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:50:20.434900</ts>
    <user>Rosaline</user>
    <text>partial is a function, which means its arguments are evaluated</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:50:33.435300</ts>
    <user>Rosaline</user>
    <text>foo is a declared var that doesn't have a value</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:51:07.436000</ts>
    <user>Rosaline</user>
    <text>so when evaluated the "foo" passed to partial, the result is a special object designed to catch these kind of bugs when it is invoked</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:51:39.436600</ts>
    <user>Melynda</user>
    <text>Why does it not throw right away?</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:52:04.437300</ts>
    <user>Melynda</user>
    <text>i.e. when defining wrap-foo</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:52:12.437700</ts>
    <user>Rosaline</user>
    <text>because then it would have to operate in such a way as to make declare useless</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:52:37.438000</ts>
    <user>Suzann</user>
    <text>```
Clojure 1.10.0
user=&amp;gt; (declare foo)
#'user/foo
user=&amp;gt; (def wrap-foo (partial (var foo) "hello"))
#'user/wrap-foo
user=&amp;gt; (defn foo [s] (print (str s " world!")))
#'user/foo
user=&amp;gt; (wrap-foo)
hello world!nil
```

Just to show what &lt;@Rosaline&gt; is saying even more clear. If instead of `foo` you refer to the var, it works how you want it to.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:53:07.438700</ts>
    <user>Suzann</user>
    <text>The var here defers the look up.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:53:10.438800</ts>
    <user>Melynda</user>
    <text>Ah, so when I `declare` something I have to use `var`?</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:53:14.439000</ts>
    <user>Rosaline</user>
    <text>```
user=&amp;gt; (declare foo)
#'user/foo
user=&amp;gt; (def f #(foo "bar"))
#'user/f
user=&amp;gt; (defn foo [s] (str "foo" s))
#'user/foo
user=&amp;gt; (f)
"foobar"
user=&amp;gt;
```</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:54:02.440200</ts>
    <user>Rosaline</user>
    <text>using partial at the top level like without understanding that partial is just a function, so it's arguments are evaluated like any other function at call time is a common source of bugs</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:55:04.441700</ts>
    <user>Suzann</user>
    <text>&lt;@Melynda&gt; Not sure why you are writing code like this. If you are just playing around with things, sure. But I wouldn't expect to see declare in actual code.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:55:09.441800</ts>
    <user>Rosaline</user>
    <text>```
user=&amp;gt; (def x 1)
#'user/x
user=&amp;gt; (def f (partial + x))
#'user/f
user=&amp;gt; (def x 3)
#'user/x
user=&amp;gt; (f 0)
1
user=&amp;gt;
```</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:56:24.442600</ts>
    <user>Melynda</user>
    <text>Thanks. So I generally should use `var` in this case? Or is there a better / more recommended way?</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:57:58.444400</ts>
    <user>Dann</user>
    <text>&lt;@Melynda&gt; what are you trying to do? just define things out of order (that's the usual usage of declare)</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:58:18.445200</ts>
    <user>Dann</user>
    <text>usually instead of using `(var x)` explicitly we use the reader macro `#'x` which expands to the same thing</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:58:37.446100</ts>
    <user>Rosaline</user>
    <text>the best advice is don't use partial for top level functions like that</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:58:37.446200</ts>
    <user>Melynda</user>
    <text>&lt;@Suzann&gt; I have a map that contains coercion functions as values (and the keys they shall be applied to as keys). And one of these coercion functions calls other functions that will eventually make use the the coercion map again. So in theory this setup is cyclic, but in practice it is not, because the data structures it operates on are not cyclic.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T13:59:25.446900</ts>
    <user>Dann</user>
    <text>&lt;@Melynda&gt; if the functions can all be defined in one form, there's `letfn` that allows cyclical references between the functions it creates in local scope</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:01:14.448000</ts>
    <user>Dann</user>
    <text>another variant is to have every fn take an argument containing a hash-map that includes all the other fns - that way, you can even add more functions at runtime or from another namespace</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:03:39.450000</ts>
    <user>Melynda</user>
    <text>So the data structure I operate on looks like this:
```
[{:foo 1
  :bar {:foo 2 ...}}
 {:foo 3 ...}]
```
And in these few instances where the object contains a "sub object" in the :bar key, I want to apply the same coercions to the sub object, which is why I need access to the coercion map.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:05:14.450900</ts>
    <user>Dann</user>
    <text>sounds like it could be a job for `clojure.walk/prewalk` with a function testing for map entries and calling a multimethod on key</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:08:57.451900</ts>
    <user>Melynda</user>
    <text>Hm, thanks. I never considered this to be a full walk, because :foo 2, the object under :bar, is of a different type that never contains other sub objects.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:17:25.452800</ts>
    <user>Dann</user>
    <text>prewalk is a blunt tool, agreed, but it might lead to simpler code</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:19:50.453400</ts>
    <user>Melynda</user>
    <text>I will try that. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:20:02.453700</ts>
    <user>Melynda</user>
    <text>Might reduce the amount of code.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:20:03.453900</ts>
    <user>Melynda</user>
    <text>Thanks &lt;@Suzann&gt;, &lt;@Rosaline&gt;, &lt;@Dann&gt;!</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:22:48.454000</ts>
    <user>Dann</user>
    <text>one more note: I specify prewalk rather than postwalk specifically because you can't test for map-entries in postwalk (the code turns them into two element vectors, and that works fine for hash-map, but it removes a distinction you likely need to check for, prewalk avoids that issue)</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:23:16.454200</ts>
    <user>Melynda</user>
    <text>Thanks!</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:26:32.454800</ts>
    <user>Sherice</user>
    <text>I am trying to create a vector-based zipper where the children of a node are (next node).
For navigating around, this works fine:
```(defn vec2zip
    "Return a zipper where the children are (next node)."
      [root]
     (z/zipper vector? next (fn [n c] (into n c)) root))```

But editing doesn't work as I'd expect:

```(-&amp;gt; (vec2zip [:X [:A] [:B] [:C]]) z/down (z/insert-child [:a]) z/root)
[:X [:A] [:B] [:C] [:A [:a]] [:B] [:C]]```

Am I doing something stupid? I tried to attach metadata in the children and make-node functions, but it doesn't seem to stick. Might that be the problem?</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:31:20.455500</ts>
    <user>Dann</user>
    <text>&lt;@Sherice&gt; have you looked at `z/vector-zip`? - or is the point to implement this from scratch as an exercise?</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:31:49.456100</ts>
    <user>Rosaline</user>
    <text>because n is the existing vector</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:32:00.456500</ts>
    <user>Sherice</user>
    <text>I looked at z/vector-zip but it really doesn't seem to have the semantics I want.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:32:10.456900</ts>
    <user>Dann</user>
    <text>how so?</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:32:13.457000</ts>
    <user>Rosaline</user>
    <text>you need something like (into [(nth n 0)] c)</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:33:32.458000</ts>
    <user>Sherice</user>
    <text>&lt;@Dann&gt; the children don't 'have names', if that makes sense.</text>
  </message>
  <message conversation_id="1480">
    <ts>2019-05-15T14:33:44.458300</ts>
    <user>Sherice</user>
    <text>&lt;@Rosaline&gt; let me try this.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:35:34.458800</ts>
    <user>Rosaline</user>
    <text>I would strongly recommend using maps instead of vectors for tagged data like this</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:36:25.459700</ts>
    <user>Rosaline</user>
    <text>the built in xml-zip basically has the semantics you want</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:36:41.460300</ts>
    <user>Rosaline</user>
    <text>(using maps with {:tag tag :children children})</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:37:20.461000</ts>
    <user>Sherice</user>
    <text>&lt;@Rosaline&gt; Yeah, I have that working just fine with {:n :X :c [{:n :A} {:n :B} {:n :C}]} for example. Just gets a bit busy.</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T14:38:46.461300</ts>
    <user>Sherice</user>
    <text>```(defn map2zip
  "Return a zipper for a map representing a plan."
  [root]
  (z/zipper map? :c (fn [n c] (assoc n :c (vec c))) root))```</text>
  </message>
  <message conversation_id="1479">
    <ts>2019-05-15T15:08:21.463200</ts>
    <user>Sherice</user>
    <text>Thanks &lt;@Dann&gt; and &lt;@Rosaline&gt;. I've tried everything I can think of. Given what I've seen, I agree that maps are the best approach.</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:45:53.465100</ts>
    <user>Katherina</user>
    <text>Hello, what is the equivalent of `:java-source-paths` of leiningen in tools.deps? Some of my code is in Java and I really wanna use it as it is.</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:49:49.465500</ts>
    <user>Jasmine</user>
    <text>tools.deps does not support java compilation</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:50:09.465900</ts>
    <user>Jasmine</user>
    <text>you can use it in combination with javac etc if you want that to work</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:50:34.466400</ts>
    <user>Jasmine</user>
    <text>or you can split your project into java-only and clojure-only parts and have the latter depend on the former</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:52:02.467200</ts>
    <user>Katherina</user>
    <text>ah okay. Thanks for the info &lt;@Jasmine&gt; Is java compilation planned soon? Really love using tools.deps!</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:54:54.469200</ts>
    <user>Jasmine</user>
    <text>not planned - deps does a) dependency resolution, b) classpath building, c) program launching</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:55:54.470800</ts>
    <user>Katherina</user>
    <text>got it. thanks again :smile:</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:56:18.471300</ts>
    <user>Mona</user>
    <text>Are there any books on Clojure that explain it's philosophy as opposed to just teaching syntax? I am interested in learning about choices Rich made and trade-offs resulting from those choices. I know he talks about it in his talks but I would like (if it exists) to have a single place with all this information, so to say. To *understand* Clojure, not only to _learn_ it</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:57:16.472300</ts>
    <user>Jasmine</user>
    <text>probably the best you'll get for that are either talks by Rich, or the &lt;http://clojure.org|clojure.org&gt; reference pages, or in book form - Programming Clojure (written by Stu Halloway and latest revised by me, both of us working with Rich)</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T15:59:18.472700</ts>
    <user>Mona</user>
    <text>It's amazing to get an answer in less than a minute, and especially from you Alex! :slightly_smiling_face: Thank you! I love this community :heart:</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:02:29.472900</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/matthiasn/talk-transcripts/tree/master/Hickey_Rich&gt; &amp;lt;- more time efficient than watching videos</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:02:56.473100</ts>
    <user>Jasmine</user>
    <text>sibling dirs contain other relevant stuff probably</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:02:56.473300</ts>
    <user>Antwan</user>
    <text>if it is transient and doesn't matter, then it doesn't matter and you shouldnt bother keeping it</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:03:13.473600</ts>
    <user>Antwan</user>
    <text>if it matters, then it is part of your data and it shouldnt be metadata</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:03:45.473900</ts>
    <user>Jasmine</user>
    <text>or &lt;https://www.youtube.com/playlist?list=PLZdCLR02grLrEwKaZv-5QbUzK0zGKOOcr&gt; :)</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:03:56.474100</ts>
    <user>Mona</user>
    <text>thank you!</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:15:00.474700</ts>
    <user>Jasmine</user>
    <text>that was missing some videos so I added them and reverse date sorted</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:16:13.474900</ts>
    <user>Jasmine</user>
    <text>the talk Rich did at JavaOne years ago is actually a pretty great intro &lt;https://www.youtube.com/watch?v=VSdnJDO-xdg&gt;</text>
  </message>
  <message conversation_id="1482">
    <ts>2019-05-15T16:17:44.475200</ts>
    <user>Brent</user>
    <text>Hi, I am no expert but I would believe that Cljs is best because it was written after Clojure, with lessons taken from it (e.g. relies heavily on protocols rather than Java interfaces).  Also.
Clj and CLR emit bytecode while you likely want to emit code. Cljs uses Google Closure heavily - not sure whether there is something similar for Dart.</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:19:36.475400</ts>
    <user>Jasmine</user>
    <text>not in learning the language, but why the language exists</text>
  </message>
  <message conversation_id="1481">
    <ts>2019-05-15T16:20:17.475600</ts>
    <user>Mona</user>
    <text>Thank you, again!

Meanwhile, I've ordered your book :blush:</text>
  </message>
  <message conversation_id="1482">
    <ts>2019-05-15T16:23:39.475800</ts>
    <user>Jasmine</user>
    <text>they make great gifts - buy 10!</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T16:48:41.481600</ts>
    <user>Viki</user>
    <text>Asking for the most ideomatic approach: suppose we have a mutual recursion
```
(defn a [x] (if .. (b x))
(defn b [x] (if ...(a x))
```
Now I’d like to inject another arg `y` into `a` but in order to do so I also have to:
1) change `b` *arity* (in case b call a not directly but there’s a longer call chain it gets tedious).
2) Another variant is introducing a *dynamic* var and do `binding` across everything (but it becomes opaque and var always means toplevel)
3) in case x is even not `{}` I could handle it with metadata containing `y` (looks like a hack)

What would you prefer?  (please vote) Am I missing yet another approach?

In short: 1=explicit pass args | 2=implicit | 3=hack</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T16:49:29.482200</ts>
    <user>Shayla</user>
    <text>can you write out the two implementations?</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T16:50:13.482600</ts>
    <user>Dorla</user>
    <text>3) Use `(declare b)` before defining a?</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T16:50:48.482800</ts>
    <user>Viki</user>
    <text>See here &lt;https://github.com/DomainDrivenArchitecture/smeagol/blob/master/src/smeagol/formatting.clj#L159&gt;
I’d like to add an arg to `process-text`</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T16:52:13.483100</ts>
    <user>Viki</user>
    <text>Sorry, maybe I expressed myself not clearly, I know how to define/declare, the question is actually -&amp;gt; pass something explicit or implicit</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T16:52:31.483400</ts>
    <user>Celestine</user>
    <text>Also &lt;@Mona&gt; you can get quite a good sense of philosophy and the "Why?" of Clojure from The Joy Of Clojure book, if you haven't already read that.</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T16:58:00.484600</ts>
    <user>Viki</user>
    <text>maybe ideal situation is when x is a `{}` and passing around `(assoc x)` is very cool, but in this case it’s not :confused:</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T16:59:49.486900</ts>
    <user>Bee</user>
    <text>Given it's mutual recursion with two fns colocated next to each other in the same file and calling each other directly, I'd add an explicit argument (and maybe another arity so clients can maintain their present interface)</text>
  </message>
  <message conversation_id="1484">
    <ts>2019-05-15T16:59:58.487100</ts>
    <user>Jin</user>
    <text>hey ya'll, what are people using for repl autocomplete etc when using just `clj` instead of leiningen? Is reply still common?</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T17:02:24.487500</ts>
    <user>Viki</user>
    <text>yeah, preserving interface makes 1. even more verbose :disappointed:

this situation makes me think one more time that only passing hashes around rocks</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T17:06:24.487700</ts>
    <user>Viki</user>
    <text>use another main :slightly_smiling_face: &lt;https://github.com/bhauman/rebel-readline&gt; (uses `compliment` library for autocomplete, same as reply afair)</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T17:12:28.488100</ts>
    <user>Lane</user>
    <text>For this specific example you linked to I would get rid of those auxiliary functions. The 4 arguments passed around add a lot of cognitive overhead and the body of these functions don't do much.</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T17:15:43.488300</ts>
    <user>Viki</user>
    <text>yep, a valid point :+1: but still, it’s not always an option to incorporate everything inside a single scope</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T17:17:12.488500</ts>
    <user>Viki</user>
    <text>but I also aware that recur is more optimal than trampolines (which are even omitted in this case -&amp;gt; stackoverflow possible)</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T17:18:53.488700</ts>
    <user>Viki</user>
    <text>still, people often argue about scala implicits but they’re really handy instead of passing smth around</text>
  </message>
  <message conversation_id="1485">
    <ts>2019-05-15T17:42:34.489000</ts>
    <user>Lane</user>
    <text>I agree, I use dynamic vars when I have a context to pass everywhere or to pass through a long list of functions that do nothing with it other than forwarding it.</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T17:49:25.489900</ts>
    <user>Antwan</user>
    <text>&lt;@Viki&gt; I'm still not super clear about the context here</text>
  </message>
  <message conversation_id="1486">
    <ts>2019-05-15T17:49:40.490300</ts>
    <user>Antwan</user>
    <text>does your "y" change over the course of the mutual recursion?</text>
  </message>
  <message conversation_id="1483">
    <ts>2019-05-15T17:53:49.490800</ts>
    <user>Viki</user>
    <text>yes it does, but only in `a`; `b` could only pass it around</text>
  </message>
  <message conversation_id="1487">
    <ts>2019-05-15T19:26:43.492100</ts>
    <user>Jin</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="1488">
    <ts>2019-05-15T20:50:16.493100</ts>
    <user>Sebrina</user>
    <text>With something like ring, is it normal to layer your middleware from most app specific to most general?
```
(-&amp;gt; handler
    middleware-a
    middleware-b
    middleware-c)
```</text>
  </message>
  <message conversation_id="1488">
    <ts>2019-05-15T21:02:47.493400</ts>
    <user>Rory</user>
    <text>Yes, I normally stack them from application to configuration middlewares.

```
(-&amp;gt; handler
      api-middleware-a
      api-middleware-b
      wrap-json-response
      wrap-gzip
      wrap-errors
      ;; etc...
)
```

I hope that make sense :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1488">
    <ts>2019-05-15T21:08:02.493700</ts>
    <user>Sebrina</user>
    <text>Yes, exactly what I was trying to find out!</text>
  </message>
  <message conversation_id="1488">
    <ts>2019-05-15T21:09:56.493900</ts>
    <user>Sebrina</user>
    <text>If you have something that deals with authentication where would you put that?</text>
  </message>
  <message conversation_id="1489">
    <ts>2019-05-15T22:05:31.494100</ts>
    <user>Celestine</user>
    <text>That will depend on where in the process you want the auth to apply. We've taken different approaches with different apps, depending on exactly what we need.</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:20:14.494500</ts>
    <user>Modesto</user>
    <text>Is there a macro library for supporting 'array syntax' in Clojure?  If not, is it feasible to write one?  How does a macro like that work - do you sort of deal with the list elements as strings and break them apart to understand what to do?  This is something like what I had in mind:
```
(def a (double-array [1.0 2.0 3.0])
(macroexpand '(array-syntax a[0])            ; =&amp;gt; '(aget a 0)
(macroexpand '(array-syntax a[0] = 4.0)  ; =&amp;gt; '(aset a 0 4.0)
```</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:24:35.494700</ts>
    <user>Rosaline</user>
    <text>no</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:26:29.496300</ts>
    <user>Rosaline</user>
    <text>macros are code -&amp;gt; code transformations, the input has to be well formed code</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:26:59.497600</ts>
    <user>Meagan</user>
    <text>You can actually cheat here by abusing the fact that the Clojure reader will read a[0] as the symbol a and the vector with one element 0</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:27:28.498400</ts>
    <user>Rosaline</user>
    <text>you cannot</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:28:03.000000</ts>
    <user>Rosaline</user>
    <text>because there are places where you want a single thing, and the reader will not read in a[0] as a single thing</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:28:11.000400</ts>
    <user>Roselia</user>
    <text>reader macros are not extensible for this very reason, because in other lisp people started to create new syntax constructions incompatible with code as data paradigm</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:28:44.000900</ts>
    <user>Roselia</user>
    <text>correct me if i'm wrong</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:32:54.003200</ts>
    <user>Meagan</user>
    <text>Not sure I understand why that would break anything &lt;@Rosaline&gt;. If the macro reads a then [0], seems like you can key off that appropriately in the simple cases specified</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:33:26.003700</ts>
    <user>Roselia</user>
    <text>[0] is a vector of 1 element, multiple of such simple cases will make language unbearable to learn, look at scala's underscore</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:34:14.003800</ts>
    <user>Sebrina</user>
    <text>That makes sense. Thanks! After a bit of trial and error the sweet spot for me is between general configuration middlewares and the APIs.</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:39:56.004600</ts>
    <user>Shayla</user>
    <text>Yeah, sadly, clojure doesn't allow for reader macros, unlike Racket</text>
  </message>
  <message conversation_id="1490">
    <ts>2019-05-15T22:41:32.005000</ts>
    <user>Meagan</user>
    <text>I'm not say anyone should do this :joy:</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:44:31.006400</ts>
    <user>Jaimee</user>
    <text>Hi everyone, I have a memory leak problem with my clojure program, I am trying to debug it with yourkit however the heap usage does not change, I only see the ram usage increase constantly with `htop`, not sure how to find where the leak is</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:50:26.007200</ts>
    <user>Antwan</user>
    <text>I think i badly misunderstand how namespaced keywords work</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:50:30.007400</ts>
    <user>Antwan</user>
    <text>```
::http/routes
=&amp;gt; :io.pedestal.http/routes
```</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:50:43.007800</ts>
    <user>Antwan</user>
    <text>i am not in the `:io.pedestal.http` namespace</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:51:35.008400</ts>
    <user>Antwan</user>
    <text>i thought `::symbol` would resolve to `:my.ns/symbol`</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:52:10.009600</ts>
    <user>Meagan</user>
    <text>I bet you have aliased io.pedestal.http to http tho</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:52:18.009800</ts>
    <user>Antwan</user>
    <text>...that would do it</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:52:40.010600</ts>
    <user>Antwan</user>
    <text>ooooh that makes sense</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:53:22.012300</ts>
    <user>Meagan</user>
    <text>That's correct if it is in the last part. If you do ::foo/bar it will look up the symbol foo as an alias in your current ns</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T22:53:27.012500</ts>
    <user>Antwan</user>
    <text>`::alias/thing` goes to `:full.path.of.alias/thing`</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:22:00.012700</ts>
    <user>Antwan</user>
    <text>new issue</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:22:17.013100</ts>
    <user>Antwan</user>
    <text>i have a macro which reads a resource from the classpath to generate functions</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:22:30.013500</ts>
    <user>Antwan</user>
    <text>I think i need to go AOT for the program i am working on</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:22:51.014100</ts>
    <user>Antwan</user>
    <text>during compilation i cant find that file</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:47:44.014600</ts>
    <user>Antwan</user>
    <text>...okay scratch that question</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:47:52.015000</ts>
    <user>Antwan</user>
    <text>just like 9/10 times AOT isnt needed</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:48:55.015400</ts>
    <user>Antwan</user>
    <text>but i still need to figure out how to get the clojure files into the jar</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:49:07.015800</ts>
    <user>Antwan</user>
    <text>not sure where to put
```
            &amp;lt;resources&amp;gt;
                &amp;lt;resource&amp;gt;
                    &amp;lt;directory&amp;gt;src/main/clojure&amp;lt;/directory&amp;gt;
                &amp;lt;/resource&amp;gt;
            &amp;lt;/resources&amp;gt;
```</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:49:58.016100</ts>
    <user>Jasmine</user>
    <text>if you're using a pom, I think that goes in &amp;lt;build&amp;gt;</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:53:12.016300</ts>
    <user>Antwan</user>
    <text>think that did it, thanks</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-15T23:54:46.016700</ts>
    <user>Antwan</user>
    <text>always hate working with maven, but at the end of the day it works</text>
  </message>
  <message conversation_id="1491">
    <ts>2019-05-16T01:29:48.017500</ts>
    <user>Meagan</user>
    <text>hmm. I need to read an EDN file, assoc some stuff in it, and then spit it out… while maintaining comments</text>
  </message>
  <message conversation_id="1492">
    <ts>2019-05-16T01:35:27.018100</ts>
    <user>Loria</user>
    <text>have a look at `rewrite-clj`? I think that's what many tools use for that purpose</text>
  </message>
  <message conversation_id="1493">
    <ts>2019-05-16T02:25:52.018500</ts>
    <user>Caleb</user>
    <text>hello :smile:</text>
  </message>
  <message conversation_id="1493">
    <ts>2019-05-16T02:26:52.018600</ts>
    <user>Caleb</user>
    <text>How to remove tag `a:`  ?</text>
  </message>
  <message conversation_id="1493">
    <ts>2019-05-16T02:35:12.019600</ts>
    <user>Caleb</user>
    <text>In ClojureScript: ` (emit-str {:tag "{&lt;http://www.w3.org/1999/xhtml&gt;}html"})  ;; =&amp;gt; "&amp;lt;html xmlns=\"&lt;http://www.w3.org/1999/xhtml\&gt;"&amp;gt;&amp;lt;/html&amp;gt;" `</text>
  </message>
  <message conversation_id="1493">
    <ts>2019-05-16T02:36:00.020000</ts>
    <user>Caleb</user>
    <text>In Clojure: `  (xml/emit-str {:tag "{&lt;http://www.w3.org/1999/xhtml&gt;}html"})   ;;=&amp;gt; "&amp;lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&amp;gt;&amp;lt;a:html xmlns:a=\"&lt;http://www.w3.org/1999/xhtml\&gt;"/&amp;gt;" `</text>
  </message>
  <message conversation_id="1493">
    <ts>2019-05-16T02:47:44.020200</ts>
    <user>Stefan</user>
    <text>&lt;@Meagan&gt; ok, will do</text>
  </message>
  <message conversation_id="1493">
    <ts>2019-05-16T02:48:09.020400</ts>
    <user>Stefan</user>
    <text>and yes that was the issue</text>
  </message>
  <message conversation_id="1493">
    <ts>2019-05-16T02:48:42.020600</ts>
    <user>Stefan</user>
    <text>multimethods are very convinient with respect to state management</text>
  </message>
  <message conversation_id="1493">
    <ts>2019-05-16T02:55:30.020800</ts>
    <user>Stefan</user>
    <text>issue opened</text>
  </message>
  <message conversation_id="1494">
    <ts>2019-05-16T03:43:10.021100</ts>
    <user>Lavonia</user>
    <text>Even when there is non-trivial state that may be changed by users, passing explicit args is better IMHO. We can get back the convenience of not having to pass args each time by implementing Component and/or Integrant's abstractions.</text>
  </message>
  <message conversation_id="1495">
    <ts>2019-05-16T05:24:55.023100</ts>
    <user>Izetta</user>
    <text>hey, is anyone here working at juxt? need a hint on how to start a repl properly in the yada repo.</text>
  </message>
  <message conversation_id="1495">
    <ts>2019-05-16T05:25:14.023400</ts>
    <user>Izetta</user>
    <text>or even if you don't work at juxt :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1495">
    <ts>2019-05-16T05:28:33.023700</ts>
    <user>Josh</user>
    <text>&lt;@Izetta&gt; have an ask in &lt;#C0CFGN25D|juxt&gt;</text>
  </message>
  <message conversation_id="1495">
    <ts>2019-05-16T05:29:22.024300</ts>
    <user>Josh</user>
    <text>&lt;@Sixta&gt; is a juxter iirc, and of course &lt;@Robbi&gt;</text>
  </message>
  <message conversation_id="1495">
    <ts>2019-05-16T05:29:59.024600</ts>
    <user>Izetta</user>
    <text>ah, didn't see that channel</text>
  </message>
  <message conversation_id="1495">
    <ts>2019-05-16T05:36:18.026000</ts>
    <user>Robbi</user>
    <text>should be `lein repl` though. Feel free to mail me at &lt;mailto:mal@juxt.pro|mal@juxt.pro&gt;</text>
  </message>
  <message conversation_id="1495">
    <ts>2019-05-16T05:36:42.026500</ts>
    <user>Robbi</user>
    <text>There's also a &lt;#C0702A7SB|yada&gt; channel</text>
  </message>
  <message conversation_id="1495">
    <ts>2019-05-16T05:41:19.027300</ts>
    <user>Robbi</user>
    <text>&lt;@Izetta&gt; asking in &lt;#C0702A7SB|yada&gt; is the best place</text>
  </message>
  <message conversation_id="1496">
    <ts>2019-05-16T06:04:08.027400</ts>
    <user>Antonia</user>
    <text>Well regardless of the problem context, if you want functions calling each other on the same level, usually something is wrong. It’s always good to call functions from top to bottom.

```
    / a
foo
    \ b
```

My bet is you just need a proper data/context shape + `(recur)` like

```
(defn foo
  [ctx]
  (recur
    (cond (condition)
      :a (a ctx)
      :b (b ctx))))

(defn a
  [ctx]
  (assoc ctx ...))

(defn b
  [ctx]
  (assoc ctx ...))```</text>
  </message>
  <message conversation_id="1496">
    <ts>2019-05-16T06:06:45.027700</ts>
    <user>Antonia</user>
    <text>Again, it’s hard to guess but the rule is simple and works all the time just great.</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:23:20.028300</ts>
    <user>Toccara</user>
    <text>Hello guys</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:25:15.030000</ts>
    <user>Toccara</user>
    <text>i'm in situation which i need to make two things depend on each other for example:
1- write something to DB
2- if step#1 success write another something
how can i make both behave like if they run inside one transaction, both must be success not only one?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:25:50.030300</ts>
    <user>Toccara</user>
    <text>maybe dosync will help here?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:27:23.031600</ts>
    <user>Toccara</user>
    <text>so maybe i create a ref object with initial val = false and when event#1 success  i change ref to be true and make condition to run event#2 if ref is true?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:27:32.031900</ts>
    <user>Toccara</user>
    <text>or how better to make this?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:38:50.035900</ts>
    <user>Jasmine</user>
    <text>This is not really a Clojure question. If db and thing 2 don’t actually support 2PC distributed transactions like XA, then you are in the world of effectively doing your own distributed transactions and managing your own rollback in the case of failure.</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:39:55.036300</ts>
    <user>Jasmine</user>
    <text>Refs don’t help you afaict</text>
  </message>
  <message conversation_id="1498">
    <ts>2019-05-16T07:43:54.037800</ts>
    <user>Bart</user>
    <text>is there a nice way of getting data out of a map where the keys are not keywords? f.ex. get the map at the innermost level here `{1 {3 {:key true}}`</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:44:06.038300</ts>
    <user>Bart</user>
    <text>don't ask how this situation occured. :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:44:43.039400</ts>
    <user>Antonia</user>
    <text>`(get-in data [1 3 :key])`, no?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:45:13.040400</ts>
    <user>Bart</user>
    <text>@art yep. *slaps forehead*</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:45:31.040800</ts>
    <user>Toccara</user>
    <text>&lt;@Jasmine&gt; what do you mean i need to implement rollback methods if one of the events failed, suppose event#1 success and be inserted to the DB, and event#2 failed, then i need to run the rollback method to delete the record from the db which be inserted by event#1 ?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:49:22.042200</ts>
    <user>Bart</user>
    <text>&lt;@Toccara&gt; depending on the DB you use, but usually modifications to the same row are serialized in the database, so you can safely wait for transaction #1 to finish, check the return value, then do #2</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:50:11.042500</ts>
    <user>Toccara</user>
    <text>okay got it</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:50:20.042900</ts>
    <user>Toccara</user>
    <text>thanks guys :+1:</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:51:46.044100</ts>
    <user>Toccara</user>
    <text>&lt;@Bart&gt; if  transaction #1 success and then try to invoke transaction #2 which failed, then i need a rollback methods implemented for event#1 to roll back</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:51:54.044400</ts>
    <user>Toccara</user>
    <text>i guess that's what &lt;@Jasmine&gt; means</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:52:48.045900</ts>
    <user>Bart</user>
    <text>yes, unless the database supports rollbacks on it's own (most don't yet)</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:53:01.046200</ts>
    <user>Antonia</user>
    <text>I am not quite sure I understand what you are trying to do &lt;@Toccara&gt;</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:53:24.046800</ts>
    <user>Toccara</user>
    <text>okay</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:53:26.047100</ts>
    <user>Antonia</user>
    <text>Are you writing to a single db twice?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:53:38.047700</ts>
    <user>Toccara</user>
    <text>lemme explain in more details what i'm trying to do</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:53:44.048000</ts>
    <user>Antonia</user>
    <text>Are you writing to different destinations sequentially?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:54:18.048500</ts>
    <user>Toccara</user>
    <text>i would like to save reference of objects into postgresql and save the actual objects into s3 for example</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:54:29.048800</ts>
    <user>Toccara</user>
    <text>so i need to make 2 operations here</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:54:54.049400</ts>
    <user>Toccara</user>
    <text>1- insert reference data into postgresql of the object
2- push the object itself into s3</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:55:34.050200</ts>
    <user>Toccara</user>
    <text>i would like to make both run in one transaction, to make sure i pushed reference and the object, but not any of them</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:55:57.051000</ts>
    <user>Toccara</user>
    <text>my try now is to handle the failure of any for any reason</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:57:13.052100</ts>
    <user>Toccara</user>
    <text>@art got what i'm trying to do?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:57:21.052300</ts>
    <user>Antonia</user>
    <text>Well, it’s postgresql – in that case use transaction and if s3 upload fails roll it back, no?</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:58:02.053000</ts>
    <user>Toccara</user>
    <text>you are right</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:58:41.053800</ts>
    <user>Toccara</user>
    <text>what i missed postgresql has roll back, but everything clear</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T07:59:43.054400</ts>
    <user>Antonia</user>
    <text>Normally if an exception occurs somewhere inside it’s rolled back implicitly.</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T08:04:29.056400</ts>
    <user>Antonia</user>
    <text>However the best rule to follow is trying to avoid writing to multiple destinations in a single user transaction because if the transaction fails because of other reasons _after_ the file has been uploaded it needs to be deleted. In your case that does not seem necessary but still good to keep in mind.</text>
  </message>
  <message conversation_id="1497">
    <ts>2019-05-16T08:09:52.056800</ts>
    <user>Toccara</user>
    <text>&lt;@Antonia&gt; good thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1499">
    <ts>2019-05-16T11:57:26.058700</ts>
    <user>Meagan</user>
    <text>anyone know how to insert a whitespace character (e.g. newline) using rewrite-clj?</text>
  </message>
  <message conversation_id="1499">
    <ts>2019-05-16T11:57:45.059000</ts>
    <user>Meagan</user>
    <text>that’s exactly what I was looking for! thanks!</text>
  </message>
  <message conversation_id="1499">
    <ts>2019-05-16T12:02:20.061700</ts>
    <user>Meagan</user>
    <text>ah, there are utilities in `rewrite-clj.node`</text>
  </message>
  <message conversation_id="1499">
    <ts>2019-05-16T12:02:48.062300</ts>
    <user>Rossie</user>
    <text>Heya; I'm using leiningen and need some dynamic eval in project.clj to get the absolute path to the project.clj directory; I'm using:

```
["--verbose"
 "--no-fallback"
 "-Dclojure.compiler.direct-linking=true"
 "-H:+ReportExceptionStackTraces"
 "--report-unsupported-elements-at-runtime"
 "--initialize-at-build-time"
 "--enable-https"
 ~(fn [proj] (str "-J-Djava.security.properties=" (:root proj) "/java.security.overrides"))
 "--rerun-class-initialization-at-runtime=org.bouncycastle.crypto.prng.SP800SecureRandom"
 "--rerun-class-initialization-at-runtime=org.bouncycastle.jcajce.provider.drbg.DRBG$Default"
 "--rerun-class-initialization-at-runtime=org.bouncycastle.jcajce.provider.drbg.DRBG$NonceAndIV"]
```

I was expecting that fn to be called with the project map, evaluating to a string, per &lt;https://github.com/technomancy/leiningen/blob/master/sample.project.clj#L347-L348&gt;  but clearly lein native-image isn't happy, because when I run it I get:

```
$ lein with-profile +client native-image
Error encountered performing task 'native-image' with profile(s): 'base,system,user,provided,dev,client'
java.lang.IllegalArgumentException: array element type mismatch
```

I tried to debug using `lein pprint`, but instead it's just getting unquoted and so I get a literal function object in pprint (that might not be a bug? I'm not sure when the fn eval is supposed to happen):

```
   :native-image
   {:name "transgressor",
    :opts
    ["--verbose"
     "--no-fallback"
     "-Dclojure.compiler.direct-linking=true"
     "-H:+ReportExceptionStackTraces"
     "--report-unsupported-elements-at-runtime"
     "--initialize-at-build-time"
     "--enable-https"
     #object[leiningen.core.project$eval493$fn__494 0x1ec22831 "leiningen.core.project$eval493$fn__494@1ec22831"]
     "--rerun-class-initialization-at-runtime=org.bouncycastle.crypto.prng.SP800SecureRandom"
     "--rerun-class-initialization-at-runtime=org.bouncycastle.jcajce.provider.drbg.DRBG$Default"
     "--rerun-class-initialization-at-runtime=org.bouncycastle.jcajce.provider.drbg.DRBG$NonceAndIV"]},
```

Any ideas? Do I need #= or whatever? (That wouldn't be great because I probably need the project map :))</text>
  </message>
  <message conversation_id="1500">
    <ts>2019-05-16T12:25:58.063200</ts>
    <user>Marlyn</user>
    <text>&lt;@Rossie&gt; `~(fn [] ....)` evaluates to a function</text>
  </message>
  <message conversation_id="1500">
    <ts>2019-05-16T12:26:52.063500</ts>
    <user>Marlyn</user>
    <text>never mind, special unquote handling is some lein magic</text>
  </message>
  <message conversation_id="1500">
    <ts>2019-05-16T12:28:17.063900</ts>
    <user>Marlyn</user>
    <text>&lt;https://github.com/technomancy/leiningen/blob/master/sample.project.clj#L438-L449&gt;</text>
  </message>
  <message conversation_id="1500">
    <ts>2019-05-16T12:34:35.064400</ts>
    <user>Rossie</user>
    <text>Well, allegedly :)</text>
  </message>
  <message conversation_id="1500">
    <ts>2019-05-16T12:41:31.065000</ts>
    <user>Leda</user>
    <text>what is the simplest job scheduler lib you guys can recommend?</text>
  </message>
  <message conversation_id="1500">
    <ts>2019-05-16T12:42:08.065700</ts>
    <user>Leda</user>
    <text>tried `tick` from juxt but the scheduling feature  is disabled right now</text>
  </message>
  <message conversation_id="1501">
    <ts>2019-05-16T12:45:49.066000</ts>
    <user>Clarine</user>
    <text>anyone seen this error before?
```
No implementation of method: :xml-str of protocol:
   #'clojure.data.xml.protocols/AsXmlString found for class:
   org.joda.time.DateTime
```</text>
  </message>
  <message conversation_id="1501">
    <ts>2019-05-16T12:46:49.066300</ts>
    <user>Clarine</user>
    <text>or better: does anyone has an implementation of that protocol lying around?</text>
  </message>
  <message conversation_id="1500">
    <ts>2019-05-16T12:49:13.066500</ts>
    <user>Jasmine</user>
    <text>&lt;https://github.com/clojure/data.xml/blob/41366e182519a763700b7c58ec46379062c01b78/src/main/clojure/clojure/data/xml/jvm/emit.clj#L172-L192&gt;</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:16:49.066800</ts>
    <user>Madelene</user>
    <text>does anyone know of an alternative to `jvisualvm` or `jmc` that works with `adoptopenjdk-12`?</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:17:23.067200</ts>
    <user>Madelene</user>
    <text>that’s not yourkit :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:18:28.067500</ts>
    <user>Dann</user>
    <text>yourkit has a lot more information than htop does. The VM will never allocate more memory than the maximum you configure at startup, you can use that config to make sure the vm doesn't misbehave, then use yourkit (or even visualvm) to figure out where the free ram under that limit went if it is running out</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:20:38.067700</ts>
    <user>Dann</user>
    <text>using keys that aren't keywords is fine - Strings, Numbers, even other hashmaps or sets. You can use the hashmap itself `({"a" 0} "a")` -&amp;gt; `0`, you can use `get` which is the function that a keyword is actually calling when you use it as a function</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:20:52.067900</ts>
    <user>Dann</user>
    <text>keywords aren't a syntax for map lookup, they are just objects that know how to use get</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:21:55.068100</ts>
    <user>Dann</user>
    <text>the one thing you should never use as a hash-map key is anything with value equality that is mutable (eg. a java ArrayMap)</text>
  </message>
  <message conversation_id="1503">
    <ts>2019-05-16T13:24:06.068600</ts>
    <user>Clarine</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:24:23.069000</ts>
    <user>Dann</user>
    <text>&lt;@Madelene&gt; I dont' think I have your answer directly, but which set of features do you need?</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:25:11.069400</ts>
    <user>Madelene</user>
    <text>cpu profiling/instrumentation</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:26:10.070300</ts>
    <user>Marlyn</user>
    <text>I know you asked about alternatives, but what is the reason `jvisualvm` doesn't fit the needs?</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:27:02.071200</ts>
    <user>Madelene</user>
    <text>it doesn’t ship with adoptopenjdk … and old versions won’t (for me at least) connect to an adoptopenjdk vm</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:27:31.072100</ts>
    <user>Madelene</user>
    <text>if it worked it would fit my needs :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:27:46.072700</ts>
    <user>Dann</user>
    <text>&lt;@Madelene&gt; there's HPROF if you don't need a UI or are comfortable with a fronted that loads its dump files</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:27:50.072800</ts>
    <user>Marlyn</user>
    <text>you tried &lt;https://visualvm.github.io/&gt;  ?</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:27:54.073000</ts>
    <user>Madelene</user>
    <text>yeah I downloaded it and tried it</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:28:56.074100</ts>
    <user>Dann</user>
    <text>are you using the jvm arg for accepting a dt socket connection?</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:29:02.074300</ts>
    <user>Madelene</user>
    <text>&lt;@Dann&gt; yeah I’d really like a UI… I can at a push use hprof, but it’s not as easy as clicking a start/stop button around your repl interaction</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:29:47.075200</ts>
    <user>Dann</user>
    <text>if you use clj + the hprof agent you can eliminate noise like nrepl from your measurements though</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:30:02.075800</ts>
    <user>Dann</user>
    <text>it's not very convenient though, agreed</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:30:05.075900</ts>
    <user>Madelene</user>
    <text>&lt;@Dann&gt;: no… though you’ve made me realise it didn’t even get that far… I think it’s trying to use java 12 to load itself</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:30:42.076200</ts>
    <user>Madelene</user>
    <text>this stuff used to be easy</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:31:05.076400</ts>
    <user>Marlyn</user>
    <text>&lt;https://github.com/oracle/visualvm/pull/133&gt;</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:31:12.076800</ts>
    <user>Marlyn</user>
    <text>seems like you need to build master</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:31:39.077000</ts>
    <user>Marlyn</user>
    <text>that's annoying</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:32:01.077500</ts>
    <user>Marlyn</user>
    <text>&lt;https://github.com/oracle/visualvm/issues/130&gt;</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:32:25.078200</ts>
    <user>Marlyn</user>
    <text>there seem to be other workarounds (i only scanned quickly)</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:36:39.079300</ts>
    <user>Madelene</user>
    <text>hmm thanks for that… I tried passing the `--jdkhome=/Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home/` but it displays an error screen saying please use jdk 8, 9, 10 or 11 — which is kinda annoying as I gave it the jdk 8 home</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:38:26.079800</ts>
    <user>Madelene</user>
    <text>I also have `JAVA_HOME` set to jdk8</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:46:19.080900</ts>
    <user>Madelene</user>
    <text>ok installing the official release from that site, and starting it with the command:

` ./bin/visualvm -J-Dcom.sun.tools.visualvm.modules.startup.DisableStartupCheck=true`

to disable startup checks at least starts up the UI.

No idea if it’ll work if I connect to something yet.</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:47:43.081300</ts>
    <user>Madelene</user>
    <text>connecting to jdk8 vms works at least if you do that</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:50:47.082600</ts>
    <user>Madelene</user>
    <text>ok you can get heap profiles on jdk12 — but you can’t access local samplers for CPU or memory :disappointed: — though you might be able to do it if you setup jmx :disappointed:</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:51:07.082900</ts>
    <user>Marlyn</user>
    <text>those can be enabled at runtime IIRC</text>
  </message>
  <message conversation_id="1504">
    <ts>2019-05-16T13:51:15.083200</ts>
    <user>Marlyn</user>
    <text>I forget how though</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:51:40.083800</ts>
    <user>Madelene</user>
    <text>yeah I don’t do the JMX stuff very often</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:51:53.084100</ts>
    <user>Madelene</user>
    <text>so always need to consult what you need to do</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:52:12.084400</ts>
    <user>Madelene</user>
    <text>I might be better building from master if that works</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:52:54.084600</ts>
    <user>Marlyn</user>
    <text>i don't think you need to do that</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:53:11.085000</ts>
    <user>Marlyn</user>
    <text>probably only need to flip some options on the target VM</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:54:31.085700</ts>
    <user>Madelene</user>
    <text>it likely will be… just seeing whats involved in building it from source</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:54:47.086000</ts>
    <user>Madelene</user>
    <text>ahhh `ant` well this is a fun trip down memory lane!</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:56:52.086200</ts>
    <user>Marlyn</user>
    <text>shave that yak</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:57:45.086700</ts>
    <user>Madelene</user>
    <text>looks like the next yak is building netbeans… I might have to leave these unshaved</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T13:59:50.087200</ts>
    <user>Madelene</user>
    <text>oh joy netbeans requires mercurial ~not~ *and* git</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T14:01:49.087600</ts>
    <user>Marlyn</user>
    <text>you do not need to do any of this</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T14:02:19.088400</ts>
    <user>Marlyn</user>
    <text>just need to connect already built jvisualvm to the target vm</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T14:02:37.088800</ts>
    <user>Madelene</user>
    <text>yeah i’ve aborted and am trying that now</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T14:03:38.090100</ts>
    <user>Madelene</user>
    <text>I just have the fear because last time I did this I really struggled with RMI port stuff… but that was through a tunnel, so should be much more straightforward this time.</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T14:08:14.090400</ts>
    <user>Madelene</user>
    <text>ugh cannot connect</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T14:08:21.090700</ts>
    <user>Madelene</user>
    <text>```

  :jvm-args ["-Dcom.sun.management.jmxremote"
             "-Dcom.sun.management.jmxremote.port=9199"
             "-Dcom.sun.management.jmxremote.local.only=true"
             "-Dcom.sun.management.jmxremote.authenticate=false"
             "-Dcom.sun.management.jmxremote.ssl=false"]
```</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T14:14:17.091200</ts>
    <user>Madelene</user>
    <text>still failing to connect when trying `localhost:9199`</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T14:25:04.091400</ts>
    <user>Madelene</user>
    <text>ugh giving up for the evening</text>
  </message>
  <message conversation_id="1502">
    <ts>2019-05-16T14:33:13.091500</ts>
    <user>Lonna</user>
    <text>&lt;@Madelene&gt; Not sure if this will help your situation, but when I’ve had network stuff get in the way of `jvisualvm`, I’ve added this to my startup: `-Djava.rmi.server.hostname=localhost`</text>
  </message>
  <message conversation_id="1505">
    <ts>2019-05-16T14:40:38.091800</ts>
    <user>Fatima</user>
    <text>&lt;https://github.com/aphyr/tea-time&gt;</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:06:57.092700</ts>
    <user>Clarine</user>
    <text>is it by design that `clojure.data.xml` preserves newlines like this?
```
(parse-str "&amp;lt;foo&amp;gt;&amp;lt;bar/&amp;gt;\n&amp;lt;bar/&amp;gt;\n&amp;lt;/foo&amp;gt;") ;;=&amp;gt;
{:tag :foo,
 :attrs {},
 :content
 ({:tag :bar, :attrs {}, :content ()}
  "\n"
  {:tag :bar, :attrs {}, :content ()}
  "\n")}
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:07:24.092900</ts>
    <user>Jasmine</user>
    <text>it is by spec I believe</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:07:35.093200</ts>
    <user>Jasmine</user>
    <text>there is a flag to change this behavior though</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:07:49.093500</ts>
    <user>Jasmine</user>
    <text>iirc</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:07:57.093700</ts>
    <user>Clarine</user>
    <text>I guess so yes:
&amp;gt; From 0.1.0-beta3 to 0.2.0-alpha1
&amp;gt; Preserve whitespace by default</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:08:23.094200</ts>
    <user>Clarine</user>
    <text>is it relatively safe to use the newest clojure.data.xml? I really need the namespace stuff :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:09:13.094500</ts>
    <user>Jasmine</user>
    <text>I've used latest extensively without any issues</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:09:25.094700</ts>
    <user>Clarine</user>
    <text>0.2.0-alpha6</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:10:05.095400</ts>
    <user>Clarine</user>
    <text>thanks. the zipper stuff comes in really handy in something I had to do today :smile:</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:11:09.096000</ts>
    <user>Becki</user>
    <text>let me know if you run into a node which has the same name as its parent. There's a patch that I think shouldn't have gone in: &lt;https://dev.clojure.org/jira/browse/DZIP-3&gt;</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:14:09.096600</ts>
    <user>Clarine</user>
    <text>`:include-node? #{:element :characters}`, the question mark is a bit weird I guess. maybe it went from a boolean setting to a enumeration later?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:20:56.097900</ts>
    <user>Reiko</user>
    <text>What's going on here? I'm trying to get `for` to work and I'm getting strange output for doing a simple `(for [n (range 1 101)] (println n))` and getting this output:
```
(1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil 33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil 65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil 97
98
99
100
nil nil nil nil nil)
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:21:38.098300</ts>
    <user>Reiko</user>
    <text>No idea why that didn't collapse</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:21:57.099200</ts>
    <user>Becki</user>
    <text>`println` returns nil. you have a collection of 100 nils. Your repl is also printing the side effect interleaved</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:22:19.099700</ts>
    <user>Antione</user>
    <text>you may be looking for `(doseq [n (range 10)] (println n))`</text>
  </message>
  <message conversation_id="1507">
    <ts>2019-05-16T15:23:01.100600</ts>
    <user>Reiko</user>
    <text>Why does `for` behave this way?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:23:40.101600</ts>
    <user>Latonya</user>
    <text>`for` is intended to return a value that is a sequence.  It isn't really intended to perform side effects like printing in its body.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:24:16.102300</ts>
    <user>Reiko</user>
    <text>So then `doseq` is intended for side effects?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:24:17.102400</ts>
    <user>Latonya</user>
    <text>`doseq` is intended to iterate through a sequence and do arbitrary side effects on each one.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:24:25.102700</ts>
    <user>Reiko</user>
    <text>ok</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:24:52.103400</ts>
    <user>Reiko</user>
    <text>So in other words, `for` is lazy?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:25:10.103900</ts>
    <user>Latonya</user>
    <text>it produces a lazy result, yes.</text>
  </message>
  <message conversation_id="1507">
    <ts>2019-05-16T15:32:48.104200</ts>
    <user>Reiko</user>
    <text>So my reason for asking is I never actually did FizzBuzz in Clojure and wanted to see how that looked. This works as expected, but it looks pretty bad. Is there a more concise way to do it?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:33:37.104700</ts>
    <user>Nella</user>
    <text>my first thought would be using `cond` instead of multiple `if`s</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:33:51.105100</ts>
    <user>Reiko</user>
    <text>`cond` doesn't evaluate after something is true</text>
  </message>
  <message conversation_id="1507">
    <ts>2019-05-16T15:37:00.105400</ts>
    <user>Nella</user>
    <text>I'm not sure what you mean by that</text>
  </message>
  <message conversation_id="1507">
    <ts>2019-05-16T15:37:21.106200</ts>
    <user>Nella</user>
    <text>also, it's nicer to use `zero?` rather than `(= 0 ...)`</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:37:22.106300</ts>
    <user>Latonya</user>
    <text>Neither does a daisy-chained (or nested) sequence of `if` expressions.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:37:30.106500</ts>
    <user>Reiko</user>
    <text>"Takes a set of test/expr pairs. It evaluates each test one at a
time.  If a test returns logical true, cond evaluates and returns
the value of the corresponding expr and doesn't evaluate any of the
other tests or exprs. (cond) returns nil."</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:37:50.106800</ts>
    <user>Reiko</user>
    <text>&lt;@Latonya&gt; No idea what you're talking about because the above code works as expected</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:39:22.108500</ts>
    <user>Reiko</user>
    <text>&lt;@Nella&gt; That's fair. I forgot about that shortcut, but I was referring to the sprawling structure</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:39:58.109300</ts>
    <user>Reiko</user>
    <text>But technically what I have is shorter</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:40:08.109600</ts>
    <user>Latonya</user>
    <text>`fizzbuzz2` below has the same behavior as `fizzbuzz` above does</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:40:11.109800</ts>
    <user>Latonya</user>
    <text>```(defn fizzbuzz2 []
  (doseq [n (range 1 101)]
    (cond (and (= 0 (mod n 3)) (= 0 (mod n 5))) (println "FizzBuzz")
          (= 0 (mod n 3)) (println "Fizz")
          (= 0 (mod n 5)) (println "Buzz")
          :else (println n))))
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:40:52.110100</ts>
    <user>Reiko</user>
    <text>Ok. Then I guess there was a typo somewhere when I tried that</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:41:08.110400</ts>
    <user>Reiko</user>
    <text>That's better then, thanks</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:41:32.110900</ts>
    <user>Nella</user>
    <text>I think that the natural typo to make when using cond at first is to wrap the condition and result in a pair of parens</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:41:44.111200</ts>
    <user>Nella</user>
    <text>that would cause some weird things to happen</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:42:54.111600</ts>
    <user>Reiko</user>
    <text>Probably what happened</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:43:03.112100</ts>
    <user>Reiko</user>
    <text>I also haven't written Clojure in a minute too</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:43:11.112400</ts>
    <user>Reiko</user>
    <text>Part of why I wanted to do FizzBuzz</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:43:20.112800</ts>
    <user>Reiko</user>
    <text>Yet I'm still baffled as to how so many people fail to do it</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:43:21.112900</ts>
    <user>Rod</user>
    <text>I’m not currently in front of a Clojure machine, but I believe that if you cheat and use `cl-format` you can DRY it up quite a bit:

```
(defn fizzbuzz [n]
  (doseq [i (range 1 (inc n))]
    (cl-format true "~&amp;amp;")
    (when (zero? (mod i 3))
      (print "Fizz"))
    (when (zero? (mod i 5))
      (print "Buzz"))))
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:43:52.113200</ts>
    <user>Reiko</user>
    <text>Interesting, but the `cond` is more readable</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:44:15.113500</ts>
    <user>Reiko</user>
    <text>Not repeating anything anyway</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:44:29.113700</ts>
    <user>Reiko</user>
    <text>And that's wrong</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:44:31.114000</ts>
    <user>Reiko</user>
    <text>haha</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:44:47.114300</ts>
    <user>Reiko</user>
    <text>Unless I'm misunderstanding `cl-format`</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:44:56.114500</ts>
    <user>Rod</user>
    <text>&lt;http://www.lispworks.com/documentation/HyperSpec/Body/22_cac.htm&gt;</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:47:27.115100</ts>
    <user>Reiko</user>
    <text>Also not sure why you made it variable length. FizzBuzz is explicitly [1 100]</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:48:01.115700</ts>
    <user>Reiko</user>
    <text>If I had to guess the biggest mistake is doing [1 100)</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:48:25.116200</ts>
    <user>Latonya</user>
    <text>From quick testing, this is close (but not identical) to the original `fizzbuzz`:</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:48:28.116500</ts>
    <user>Latonya</user>
    <text>```(defn fizzbuzz3 []
  (doseq [i (range 1 101)]
    (clojure.pprint/cl-format
     true "~&amp;amp;~%"
     (when (zero? (mod i 3))
       (print "Fizz"))
     (when (zero? (mod i 5))
       (print "Buzz")))))
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:48:54.117300</ts>
    <user>Rod</user>
    <text>I wish I had a real Clojure REPL in front of me (displaced Common Lisper here), but the identical logic in CL works fine</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:48:55.117500</ts>
    <user>Latonya</user>
    <text>The difference is that it does not print numbers when neither Fizz nor Buzz are printed.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:49:12.117900</ts>
    <user>Reiko</user>
    <text>Then that's not FizzBuzz</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:49:56.118500</ts>
    <user>Rod</user>
    <text>```
;; This is CL; see above for the Clojure version
(loop for i from 1 to 100 doing
  (progn
    (format t "~&amp;amp;")
    (when (zerop (mod i 3))
      (format t "Fizz"))
    (when (zerop (mod i 5))
      (format t "Buzz"))))

Fizz
Buzz
Fizz
Fizz
Buzz
Fizz
FizzBuzz
…
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:50:12.119000</ts>
    <user>Rod</user>
    <text>I wonder why Clojure needed the extra `~%`, but now we’re getting distracted</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:50:15.119100</ts>
    <user>Reiko</user>
    <text>It's 101!</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:50:27.119300</ts>
    <user>Reiko</user>
    <text>Literally just talked about that</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:50:36.119600</ts>
    <user>Latonya</user>
    <text>Tim's version is Common Lisp, not Clojure.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:50:53.120000</ts>
    <user>Reiko</user>
    <text>CL is inclusive for range endings?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:51:11.120400</ts>
    <user>Reiko</user>
    <text>But either way still wrong. It's not printing the other numbers</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:52:54.122200</ts>
    <user>Rod</user>
    <text>Line 6 (`(println n)`) in the original solution above was cut off for me and I didn’t realize I had to expand it. Anyway, it seems like the answer to the original question is “`cond` and `zero?` can clean things up a bit, and avoiding repetition of the `mod` logic is probably more trouble than it’s worth”</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:53:04.122500</ts>
    <user>Latonya</user>
    <text>I don't think anyone is claiming it has the same behavior as your original version.  I think Tim presented it as food for thought, as a potentially interesting way to reduce the number of explicit conditions written in the code.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:53:24.122800</ts>
    <user>Rod</user>
    <text>(I don’t have a FizzBuzz spec in front of me)</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:53:54.123100</ts>
    <user>Rod</user>
    <text>Yes.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:54:18.123700</ts>
    <user>Reiko</user>
    <text>&lt;@Latonya&gt; And that is meaningless when the spec must include that functionality, but anyway</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:54:37.124100</ts>
    <user>Reiko</user>
    <text>And `zero?` might be "easier to read" for some people, but it's actually not shorter</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:57:17.126000</ts>
    <user>Reiko</user>
    <text>I actually prefer the `cond` version because it is more readable, despite being a bit longer</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:57:58.126600</ts>
    <user>Rod</user>
    <text>Oh, sorry, I see what you did with it. Not unreasonable</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:58:05.126900</ts>
    <user>Suzann</user>
    <text>If you want a fun challenge, think about how to do fizzbuzz with no booleans (or pattern matching). I've given the challenge to a few different people and its always interesting to see what people come up with. You can assume you have a `range` function and can iterate over each element of it.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:58:29.127100</ts>
    <user>Reiko</user>
    <text>That's interesting for sure</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:58:54.127300</ts>
    <user>Reiko</user>
    <text>And there is an actual solution to that?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T15:59:08.127700</ts>
    <user>Suzann</user>
    <text>There are multiple.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:01:45.128900</ts>
    <user>Reiko</user>
    <text>I'm guessing it's something pretty subtle</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:02:52.129400</ts>
    <user>Esther</user>
    <text>does no boolean mean no way to check equality?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:02:59.129600</ts>
    <user>Reiko</user>
    <text>^</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:03:07.129800</ts>
    <user>Reiko</user>
    <text>That's where I'm stuck</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:05:14.130600</ts>
    <user>Latonya</user>
    <text>This does not attempt to solve it in the way jimmy described -- just another variation similar to Tim's that does behave the same as the original:</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:05:18.130900</ts>
    <user>Latonya</user>
    <text>```(defn fizzbuzz4 []
  (doseq [n (range 1 101)]
    (let [msg (str (if (= 0 (mod n 3)) "Fizz" "")
                   (if (= 0 (mod n 5)) "Buzz" ""))]
      (println (if (= msg "") n msg)))))
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:07:09.131000</ts>
    <user>Rod</user>
    <text>Cute</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:09:49.131300</ts>
    <user>Dann</user>
    <text>you can remove the empty strings from the if clauses defining msg ```(ins)user=&amp;gt; (str nil "OK")
"OK"
(ins)user=&amp;gt; (str nil nil)
""
(ins)user=&amp;gt; (str "OK" nil)
"OK"
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:10:17.131500</ts>
    <user>Latonya</user>
    <text>I know.  I'm just not (yet) comfortable relying on such things :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:10:17.131600</ts>
    <user>Dann</user>
    <text>and that doseq is so close to a dotimes...</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:15:50.131900</ts>
    <user>Reiko</user>
    <text>Here's some DRY cleanup</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:16:42.132200</ts>
    <user>Dann</user>
    <text>you can replace `(if (= msg "") n msg)` with `(or (not-empty msg) n)` ```(ins)user=&amp;gt; (not-empty "")
nil
(ins)user=&amp;gt; (not-empty "foo")
"foo"
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:18:17.132800</ts>
    <user>Reiko</user>
    <text>That's another one that is technically shorter, but different readability</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:18:53.133000</ts>
    <user>Dann</user>
    <text>as far as I'm concerned both not-empty and zero? are clearer - they are weak constructs so their meaning is more direct</text>
  </message>
  <message conversation_id="1508">
    <ts>2019-05-16T16:19:07.133200</ts>
    <user>Dann</user>
    <text>I use them even when they are longer</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:19:09.133400</ts>
    <user>Reiko</user>
    <text>I like using `=` because it's consistent with forms that don't have those shortcuts</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:19:34.133600</ts>
    <user>Dann</user>
    <text>I prefer specialization when it exists in the standard library, it reduces ambiguity</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:19:51.133800</ts>
    <user>Dann</user>
    <text>eg always use val instead of second/last for map entries</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:20:26.134000</ts>
    <user>Reiko</user>
    <text>For example, there are short forms for &amp;lt; and &amp;gt;, but not &amp;lt;= or &amp;gt;=. You have to use an additional form to negate</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:21:31.134200</ts>
    <user>Dann</user>
    <text>oh you mean pos? and neg?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:21:35.134400</ts>
    <user>Reiko</user>
    <text>yes</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:22:47.134700</ts>
    <user>Tammera</user>
    <text>Is this cheating :stuck_out_tongue:?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:22:56.135000</ts>
    <user>Reiko</user>
    <text>So for &amp;gt;= 0 you have to do `(not (neg? n))`</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:23:45.135300</ts>
    <user>Reiko</user>
    <text>When you could have just did `(&amp;gt;= n 0)`</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:24:01.135500</ts>
    <user>Reiko</user>
    <text>I prefer consistency with outliers</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:24:33.135700</ts>
    <user>Reiko</user>
    <text>Also the former is two operations while the latter is only one</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:24:58.136300</ts>
    <user>Fredda</user>
    <text>data first!</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:25:43.136500</ts>
    <user>Reiko</user>
    <text>Well it's not FizzBuzz</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:28:04.136700</ts>
    <user>Tammera</user>
    <text>Hmm how do you mean, because it doesn’t print? It produces the exact sequence here: &lt;https://en.wikipedia.org/wiki/Fizz_buzz&gt;</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:28:50.137100</ts>
    <user>Reiko</user>
    <text>"Write a program that prints the numbers from 1 to 100. But for multiples of three print "Fizz" instead of the number and for the multiples of five print "Buzz". For numbers which are multiples of both three and five print "FizzBuzz"."</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:30:47.137300</ts>
    <user>Tammera</user>
    <text>Right, but thats trivial: `(run! println (take 100 fizz-buzz))` :wink:</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:31:56.138100</ts>
    <user>Tammera</user>
    <text>Its a bit sad that the next question obviously would be: “cool, and now for 5 and 7”</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:32:43.138600</ts>
    <user>Reiko</user>
    <text>That would seem unnecessary. If you can't do regular FizzBuzz you aren't going to do that and if you can you can do both</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:33:53.139400</ts>
    <user>Reiko</user>
    <text>What's sad is how many people can't do it</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:34:33.140600</ts>
    <user>Latonya</user>
    <text>I think Lennart's comment is that his approach can generalize for arbitrary number instead of 3 and 5, but the size of the table required gets bigger with larger number (or at least with larger values of their least common multiple)</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:34:38.140900</ts>
    <user>Reiko</user>
    <text>&lt;https://blog.codinghorror.com/why-cant-programmers-program/&gt;</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:35:00.141400</ts>
    <user>Reiko</user>
    <text>Cool, but it's not what was asked so it would fail the test</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:35:30.141700</ts>
    <user>Reiko</user>
    <text>The purpose of having an applicant do FizzBuzz is to establish that they can do basic programming, but more importantly, read a spec</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:36:36.142600</ts>
    <user>Reiko</user>
    <text>If he were to give such a solution in an interview he would fail it</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:37:21.142800</ts>
    <user>Reiko</user>
    <text>&lt;https://haacked.com/archive/2007/02/27/Why_Cant_Programmers._Read.aspx/&gt;</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:38:38.143100</ts>
    <user>Tammera</user>
    <text>I don’t understand why, because it doesn’t print, is that what you are falling over?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:39:24.143300</ts>
    <user>Reiko</user>
    <text>What is the spec?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:48:56.143500</ts>
    <user>Tammera</user>
    <text>what are you implying here. The program I wrote correctly produces an infinite sequence of numbers with all multiples of 3 replaced by “Fizz” and multiples of 5 by “Buzz”. The only thing it doesn’t do, and was in the spec, is to limit to 100 and to print. That is however trivial to add:

```
(defn print-fizz-buzz
  []
  (run! println (take 100 fizz-buzz)))
```</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:50:23.143800</ts>
    <user>Tammera</user>
    <text>It uses the fact that FizzBuzz (or at least the replacements) repeat themselves after the least-common-multiple of 3 and 5, which happens to be 15.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T16:51:30.144000</ts>
    <user>Tammera</user>
    <text>Thats why it becomes “harder” to write this replacement table for 5 and 7, because their least common multiple is 35</text>
  </message>
  <message conversation_id="1509">
    <ts>2019-05-16T16:59:34.145000</ts>
    <user>Beckie</user>
    <text>&lt;@Clarine&gt; I have 2 convenience parsers for XML here using clojure.data.xml and tagsoup</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:00:34.145300</ts>
    <user>Reiko</user>
    <text>Wow...so the spec is "Write a program that prints the numbers from 1 to 100. But for multiples of three print "Fizz" instead of the number and for the multiples of five print "Buzz". For numbers which are multiples of both three and five print "FizzBuzz"."

Your code does not do this so you failed to understand the spec, thus failing the test. I don't know where the disconnect is...</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:01:48.145500</ts>
    <user>Reiko</user>
    <text>As stated, the point is not can you do some trivial code; it's can you adhere to a simple spec.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:04:34.145700</ts>
    <user>Latonya</user>
    <text>During an interview, some interviewers are looking more for how well the applicant thinks, explains, understands, and communicates, and would not fail someone automatically if you pointed out to them that their function returns a sequence, but doesn't print it out.  Especially if the applicant then says "Oh, yeah, to print it out, here are the changes required".</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:05:11.145900</ts>
    <user>Reiko</user>
    <text>That's a poor interviewer then</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:05:20.146100</ts>
    <user>Reiko</user>
    <text>The whole point of the test is to check your reading comprehension</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:05:21.146300</ts>
    <user>Latonya</user>
    <text>Your opinion differs from mine on that point.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:05:42.146700</ts>
    <user>Reiko</user>
    <text>My opinion is irrelevant. The purpose of the test is well established</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:06:26.146900</ts>
    <user>Latonya</user>
    <text>If you pass over applicants that miss minor point, but solve the meat of the problem, and quickly understand and fix the problem when it is pointed out, I think the interviewer is potentially missing out on a great candidate.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:06:34.147100</ts>
    <user>Tammera</user>
    <text>Yeah, and on mine. I think its more important that an applicant has the ability to abstract and adapt than to follow the test to the letter.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:06:56.147300</ts>
    <user>Reiko</user>
    <text>The question was clear. The question did not ask for an abstraction, thus you failed the test</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:07:04.147500</ts>
    <user>Reiko</user>
    <text>This is pretty amazing I have to say...</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:07:08.147700</ts>
    <user>Latonya</user>
    <text>Great, then you are not hiring us :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:07:21.147900</ts>
    <user>Meagan</user>
    <text>the efficacy of fizzbuzz et. al. is murky anyway, but getting the correct answer is never the point of these questions but how they approach problem solving.

If you read the problem wrong the first time, I am not going to fault you for it. If you respond to feedback and correct it, you still pass.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:07:37.148100</ts>
    <user>Reiko</user>
    <text>If you didn't follow the spec, which is your job as a developer, hell no</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:08:58.148300</ts>
    <user>Reiko</user>
    <text>I've stated multiple times what the purpose of the question is, which is well established. It's supposed to be dead simple so you can easily follow it. If you can't follow a deliberately blatantly simple spec the chances you are going to follow a complex spec is very slim to none.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:09:30.148500</ts>
    <user>Latonya</user>
    <text>We understand your view</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:09:41.148700</ts>
    <user>Reiko</user>
    <text>Considering that a large portion of "bugs" come from not adhering to the established spec, this is critical</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:09:58.148900</ts>
    <user>Reiko</user>
    <text>Which is why it is testing that</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:10:20.149100</ts>
    <user>Reiko</user>
    <text>Other questions are indeed looking for how the applicant reasons and not caring about the actual answer, but this isn't one of them</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:12:14.149500</ts>
    <user>Reiko</user>
    <text>Hiring managers that pass people that fail such tests are a huge part of the problem</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:12:24.149700</ts>
    <user>Tammera</user>
    <text>Lets agree to have different opinions here, some of us like to test the reasoning capability of applicants (and this is what we do at my company) and others like to test the way they read specifications.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:13:21.149900</ts>
    <user>Reiko</user>
    <text>You're again missing it. Our opinions are irrelevant. The FIzzBuzz question tests a specific thing, which has been stated repeatedly. What you think it is testing or what you think it should be testing is irrelevant.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:13:58.150100</ts>
    <user>Latonya</user>
    <text>Would you agree that companies should be able to set their own hiring policies?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:14:15.150300</ts>
    <user>Reiko</user>
    <text>...</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:16:20.150500</ts>
    <user>Celestine</user>
    <text>Hiring managers that ask folks to program in an interview is a huge part of the problem :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:16:40.150700</ts>
    <user>Reiko</user>
    <text>sigh</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:16:47.151000</ts>
    <user>Celestine</user>
    <text>On-the-spot tests in interviews _just don't work_. They don't reflect real-world programming experience at all.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:17:07.151200</ts>
    <user>Reiko</user>
    <text>That is an over-generalization</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:17:17.151400</ts>
    <user>Reiko</user>
    <text>There are certainly bad questions, FizzBuzz is not one of them</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:17:44.151600</ts>
    <user>Reiko</user>
    <text>FizzBuzz reflects real-world very well. CAN YOU READ A SPEC?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:17:46.151800</ts>
    <user>Celestine</user>
    <text>I've been a hiring manager for two decades. I've never asked these sorts of "performing monkey" questions in interviews, and I've never had to fire anyone I've hired for an inability to program.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:17:56.152000</ts>
    <user>Herman</user>
    <text>there are many hills to die on, the exact purpose of fizzbuzz is not one of them</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:18:26.152500</ts>
    <user>Reiko</user>
    <text>Well that there is an Appeal to Authority fallacy so ok?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:18:56.152700</ts>
    <user>Celestine</user>
    <text>I think FizzBuzz is a stupid interview question/technique. It's as simple as that.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:19:12.152900</ts>
    <user>Reiko</user>
    <text>Good for you?</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:19:53.153100</ts>
    <user>Celestine</user>
    <text>And, to be honest, this whole discussion belongs in &lt;#C0KL616MN|jobs-discuss&gt; if it belongs anywhere at all in this Slack.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:19:57.153300</ts>
    <user>Reiko</user>
    <text>I don't recall the original conversation being about whether or not it is a good idea, but what it is</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:21:26.153500</ts>
    <user>Reiko</user>
    <text>It could have been moved there, but the original conversation was about Clojure so it was on-topic.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:23:07.153700</ts>
    <user>Reiko</user>
    <text>This is also a thread so if people don't want to read it they don't have to. You nitpicking about where this should be is unnecessary</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:24:15.153900</ts>
    <user>Latonya</user>
    <text>Sean is a moderator on Clojurians Slack, and often helpfully points out to people where discussions most appropriately belong (or in some cases, do not)</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:26:58.154200</ts>
    <user>Tammera</user>
    <text>Yes, I would like to add that your tone can be seen as hostile, or it it least felt hostile to me. Please realise that you are on a public forum full of humans who can get their feelings hurt, and are here to wind down and relax. This is obviously not a real job interview ^^.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T17:59:27.154700</ts>
    <user>Reiko</user>
    <text>There is no tone in text conversations, which is the issue here. I did not mean any negative "tone" and suggest that perhaps your defensiveness made you interpret what I said as such.

Given the initial conversation was about adhering to the spec of FizzBuzz, stating that your proposed solution fails the spec is perfectly valid and wasn't implied as a defect with you, but just an objective statement. I'm sorry that you interpreted it that way.</text>
  </message>
  <message conversation_id="1510">
    <ts>2019-05-16T18:03:10.155000</ts>
    <user>Suzann</user>
    <text>I usually count the third param to get as kind of cheating. I usually let it slide. But ask people to rewrite without using it or `or`.</text>
  </message>
  <message conversation_id="1510">
    <ts>2019-05-16T18:03:40.155200</ts>
    <user>Suzann</user>
    <text>Disclaimer: I don't do this in interviews. Just for fun.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T18:10:03.158200</ts>
    <user>Tammera</user>
    <text>Yeah same, I agree that 3-arity get is a cheat because it will use a conditional internally.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T18:17:01.161400</ts>
    <user>Tammera</user>
    <text>It’s a fun problem to think about abstractly, like how would you write it for using Fizz for 3, Barr for 5 and Buzz for 7. And then how would you write it when this mapping was arbitrarily given as an input.</text>
  </message>
  <message conversation_id="1506">
    <ts>2019-05-16T18:19:43.163200</ts>
    <user>Tammera</user>
    <text>Makes you realize what mathematical properties such a simple program really has.</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:50:32.164100</ts>
    <user>Shayla</user>
    <text>how do y'all go about performing major refactors?</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:50:39.164400</ts>
    <user>Shayla</user>
    <text>any recommendations as I embark on my own?</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:50:56.164800</ts>
    <user>Shayla</user>
    <text>(major being about 5500 lines of source total, lol)</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:51:24.165400</ts>
    <user>Celestine</user>
    <text>I'd want to start out with pretty good test coverage, to be honest, for a refactor of that scale.</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:52:21.166400</ts>
    <user>Celestine</user>
    <text>Also, "refactoring" for me tends to be small, incremental changes that I can verify in the REPL, via spec, or a small set of tests/test expressions. Tackling 5,500 lines sounds more like a "rewrite"...</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:53:25.167600</ts>
    <user>Shayla</user>
    <text>I'm mostly attempting to spread what is currently one giant namespace across 11 files into a bunch of namespaces, as dealing with the interconnectedness is reaching high complexity</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:53:52.168700</ts>
    <user>Shayla</user>
    <text>my goal is to actually change as little as possible, more some much needed organization</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:54:21.169200</ts>
    <user>Celestine</user>
    <text>Depending on what the code currently does, maybe you can come up with some scenarios where you could generatively test the old code and the new code produce identical results for random, conforming input data?</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:55:54.170200</ts>
    <user>Shayla</user>
    <text>Not a bad idea in general! this is a game-engine, so generating correct random data is a little harder. Thankfully, I have a fairly extensive integration test suite so I can rely on that for now</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:55:57.170400</ts>
    <user>Shayla</user>
    <text>thanks for the ideas!</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:57:31.172100</ts>
    <user>Celestine</user>
    <text>As a sanity check on namespace size, we have just under 300 `src` namespaces in our codebase at work. Less than a dozen have more than 1,000 lines. Only one exceeds 2,000 lines (it has 2,017 lines). The total is 65k lines.</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:58:24.172300</ts>
    <user>Shayla</user>
    <text>holy crap</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:58:58.173400</ts>
    <user>Shayla</user>
    <text>I'm glad to know "many namespaces" works even when larger</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T20:59:29.173900</ts>
    <user>Celestine</user>
    <text>We also have just over 300 `test` namespaces, totaling just under 20k and only two namespaces exceed 1,000 lines (one is just over 1,000, one is just under 2,000).</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T21:00:22.174700</ts>
    <user>Celestine</user>
    <text>Code organization is an ongoing issue. We're pretty much constantly looking at small refactorings to improve navigability and cognitive load.</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T21:00:50.175500</ts>
    <user>Shayla</user>
    <text>that's my biggest issue: navigability and cognitive load</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T21:01:18.176000</ts>
    <user>Celestine</user>
    <text>We started with a pretty flat structure and some fairly large namespaces. Then we moved to a more nested structure and smaller, more numerous namespaces.</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T21:01:50.176300</ts>
    <user>Shayla</user>
    <text>interesting, thank you</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T21:03:14.176800</ts>
    <user>Celestine</user>
    <text>```Clojure build/config 50 files 1000 total loc
Clojure source 276 files 64691 total loc,
    3065 fns, 625 of which are private,
    411 vars, 29 macros, 56 atoms,
    504 specs, 19 function specs.
Clojure tests 307 files 19396 total loc,
    4 specs, 1 function specs.
``` We have a simple shell script that counts lines and certain forms.</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T21:03:49.177300</ts>
    <user>Celestine</user>
    <text>We have lots of little EDN files for configuration -- and each subproject in our monorepo has its own `deps.edn` file.</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T21:04:58.177600</ts>
    <user>Shayla</user>
    <text>That's super cool</text>
  </message>
  <message conversation_id="1512">
    <ts>2019-05-16T21:16:03.177800</ts>
    <user>Harold</user>
    <text>I'm looking at your code to parse Netrunner data. I do similar, less elegant things, with Star Wars Destiny, Magic, and Warhammer Champions data.</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-16T21:17:07.178000</ts>
    <user>Shayla</user>
    <text>haha hey thanks! I'm pretty sure you're the only other person to have ever looked at it!</text>
  </message>
  <message conversation_id="1513">
    <ts>2019-05-17T00:38:51.178900</ts>
    <user>Trevor</user>
    <text>Hi :wave: how's &lt;#C1ZU4NUA2|bangalore-clj&gt; doing??</text>
  </message>
  <message conversation_id="1513">
    <ts>2019-05-17T00:39:31.179400</ts>
    <user>Yasmine</user>
    <text>&lt;@Trevor&gt; going gud</text>
  </message>
  <message conversation_id="1511">
    <ts>2019-05-17T01:03:53.180000</ts>
    <user>Madeleine</user>
    <text>I like flat and big namespaces personally.</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T01:24:41.180400</ts>
    <user>Celestine</user>
    <text>I was wondering if anyone else would chip in. I've heard pros and cons of both.</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T01:26:20.181500</ts>
    <user>Celestine</user>
    <text>We're reorganizing our code because some namespaces have become sort of "kitchen sinks" of stuff that's only vaguely related to the original purpose (and should have been put elsewhere in the first place).</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T01:26:44.182100</ts>
    <user>Celestine</user>
    <text>We've also evolved our thinking a lot on just naming stuff in the seven years we've been working on this codebase.</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T01:27:08.182900</ts>
    <user>Celestine</user>
    <text>(it still seems amazing to me that we have had Clojure in production for seven years now!)</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T01:27:33.183700</ts>
    <user>Tammera</user>
    <text>We joke at work that ‘everything is in `utils`’</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T01:28:00.184200</ts>
    <user>Celestine</user>
    <text>Yeah, it's _really_ hard to avoid having some sort of "util" namespace I think :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T03:23:43.185600</ts>
    <user>Sixta</user>
    <text>The con of a big flat namespace is that reloading takes ages</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T03:42:36.186000</ts>
    <user>Tammera</user>
    <text>and that the likelyhood of having to reload that huge NS is steeply increased</text>
  </message>
  <message conversation_id="1515">
    <ts>2019-05-17T03:44:47.186600</ts>
    <user>Antione</user>
    <text>util is another name for “junk drawer”</text>
  </message>
  <message conversation_id="1515">
    <ts>2019-05-17T03:46:50.188500</ts>
    <user>Antione</user>
    <text>premature splitting of namespaces is a sin imo. I prefer to grow an ns until natural splits reveal themselves.</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T03:48:07.189800</ts>
    <user>Madelene</user>
    <text>yeah I tried that this time too and it still didn’t seem to work</text>
  </message>
  <message conversation_id="1515">
    <ts>2019-05-17T03:48:42.190900</ts>
    <user>Madelene</user>
    <text>but I think that was the solution in the past</text>
  </message>
  <message conversation_id="1515">
    <ts>2019-05-17T03:49:11.191700</ts>
    <user>Antione</user>
    <text>lots of util namespaces often contain a significant number of fns which never see reuse across a codebase in my experience. And when they do it is often limited to a couple instances.</text>
  </message>
  <message conversation_id="1515">
    <ts>2019-05-17T03:51:03.193000</ts>
    <user>Antione</user>
    <text>not saying that’s a rule, but I’ve actually dumped disparate namespaces back into one big namespace to tease out the right splits after the fact.</text>
  </message>
  <message conversation_id="1515">
    <ts>2019-05-17T03:57:14.197500</ts>
    <user>Antione</user>
    <text>Premature splitting forces new names into existence which often aren’t the names that capture what’s actually going on in the domain.</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T04:17:19.206200</ts>
    <user>Madelene</user>
    <text>I strongly believe applications are better organised first by vertical/features then inside them horizontally.

There are many reasons the main being:

1. People tend to work on a feature at a time.
2. Parallelising work is easier to do by feature, so structuring your code by feature means less merge conflicts.
3. Code is much easier to navigate, and it’s way easier to find things and on-ramp people.  You can get a good idea on what an application does by looking at it’s top level namespaces.
4. When creating new code it’s much more obvious where to put it; which leads to greater consistency.

Cross cutting concerns can be colocated under an `app.concerns`, or even another root namespace, i.e. an `app-lib` ns; and eventually moved into separate libraries if it makes sense.

The biggest barrier to doing this, is that most clojure app templates organise horizontally by the framework first, e.g. they create you an `app.handler`, `app.model` namespace first.

I also agree that you shouldn’t prematurely split; beyond giving each feature its own ns.</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T04:19:32.208500</ts>
    <user>Madelene</user>
    <text>so a trivial `app.feature` ns may contain the view and model code (still separated but together)… at some point you may break it out into `app.feature.view` and `app.feature.model`.  A good reason to do this is when you start wanting to test the models and views independently; so it will give you parallel test ns’s.</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T04:21:44.209400</ts>
    <user>Madelene</user>
    <text>Libraries on the other hand make often make more sense to organise horizontally… though usually each library is a horizontal anyway.</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T04:27:44.210000</ts>
    <user>Sixta</user>
    <text>&lt;@Madelene&gt; have you seen the behaviour programming paradigm?</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T04:28:39.210800</ts>
    <user>Sixta</user>
    <text>&lt;https://lmatteis.github.io/react-behavioral/&gt;</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T04:30:38.211200</ts>
    <user>Madelene</user>
    <text>I don’t think so</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T04:31:58.212200</ts>
    <user>Sixta</user>
    <text>The demo can explain it better, but it's essentially about implementing each feature independently</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T04:32:58.213100</ts>
    <user>Madelene</user>
    <text>looks like it’s based on CSP — or something similar</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T04:34:29.213500</ts>
    <user>Madelene</user>
    <text>but that’s just based on a 20 second glance</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T05:20:25.215800</ts>
    <user>Marquetta</user>
    <text>It is possible to use functions in lein project.clj file. But it doesn't work here:
:essthree {:deploy {:type          :uberjar
                     :bucket        "uberjars.foo"
                     :path          "bar"
                     :artifact-name ~#(str (:version %)) }}</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T05:21:09.216300</ts>
    <user>Marquetta</user>
    <text>~#(str (:version %))  function gets converted to a string</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T05:35:54.216500</ts>
    <user>Sixta</user>
    <text>I'd go a little deeper, that seems important but isn't. I think the async nature is important though.

The important thing are the events and then collecting all the behaviours and make some decision based on interpreting them in a whole.</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T05:45:40.216700</ts>
    <user>Madelene</user>
    <text>:thumbsup: yeah I see that… seems to me that the logical conclusion to this stuff is event streaming and a query language on events… which is where a bunch of independent efforts have ended up… e.g. FRP.

Years back I experimented with using Rx to create a reactive model of XMPP… It’s definitely an approach that has its appeal, but the general problem with FRP is time leaks… and I’m not sure if anyone has solved that one.  Though FRP doesn’t necessarily mean what it used to.</text>
  </message>
  <message conversation_id="1514">
    <ts>2019-05-17T05:46:33.216900</ts>
    <user>Madelene</user>
    <text>Rx did introduce me to marble diagrams though — which are pretty great for this kinda thing.</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T06:12:51.217400</ts>
    <user>Sixta</user>
    <text>It's kind of like event streaming, but I assumed you asked all your producers if they had a message before moving on.</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T06:14:52.217600</ts>
    <user>Madelene</user>
    <text>isn’t that still a potential form of time leak?  How long must the producer hold the message for?</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T06:16:12.217800</ts>
    <user>Sixta</user>
    <text>For JavaScript, I'm not sure you get a choice. It may operate on a closed world assumption, and it will queue up productions while it waits.</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T07:24:16.222300</ts>
    <user>Katherina</user>
    <text>Any suggestions for a Clojure library doing CLI args parsing with the ability to add arbitrary sub parsers like Python's argparse? I tried `tools.cli` which seems too low level and have to write a lot of manual parsing and boilerplate myself. Also tried &lt;https://github.com/l3nz/cli-matic&gt; which is based on tools.cli and is quite nice and declarative but it doesn't allow nested parsers yet.</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T07:34:27.223300</ts>
    <user>Clarine</user>
    <text>&lt;@Katherina&gt; I saw this yesterday. I don’t know if it supports what you want, but it looks cool. maybe it works from clojure? &lt;https://picocli.info/&gt;</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T07:35:08.223700</ts>
    <user>Clarine</user>
    <text>it seems to be annotation-heavy and no idea how that interacts from clojure</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T07:36:16.224100</ts>
    <user>Clarine</user>
    <text>I see there’s a Clojure issue here: &lt;https://github.com/remkop/picocli/issues/231&gt;
so probably not suitable right now</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T07:53:08.225100</ts>
    <user>Sixta</user>
    <text>I think clojure could work fine with that via interop</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T07:55:37.226800</ts>
    <user>Katherina</user>
    <text>&lt;@Clarine&gt; Those were precisely my thoughts too. The best contender for a Clojure wrapper I see is &lt;https://argparse4j.github.io/&gt; but was hoping if there is a more data driven solution out there</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T07:56:13.227000</ts>
    <user>Clarine</user>
    <text>write one based on that? seems pretty useful</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T07:59:53.228800</ts>
    <user>Katherina</user>
    <text>could definitely try that. picocli's features seem quite cool though. &lt;@Sixta&gt; whats the best way of doing a Java interop with java annotations?</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T08:00:40.229100</ts>
    <user>Sixta</user>
    <text>I think it's reify</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T08:00:53.229500</ts>
    <user>Sixta</user>
    <text>But I'm trying to go off the top of my head</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T08:05:11.230300</ts>
    <user>Katherina</user>
    <text>right. Im not familiar with this kind of interop. Will try looking into it.</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:12:00.230600</ts>
    <user>Alyce</user>
    <text>How about commons CLI?</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:12:06.230800</ts>
    <user>Alyce</user>
    <text>&lt;https://commons.apache.org/proper/commons-cli/&gt;</text>
  </message>
  <message conversation_id="1516">
    <ts>2019-05-17T08:29:11.231200</ts>
    <user>Katherina</user>
    <text>&lt;@Alyce&gt; Im not sure if it supports subparsers</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:29:21.231400</ts>
    <user>Alyce</user>
    <text>kk</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:33:43.231900</ts>
    <user>Antonia</user>
    <text>Hm what’s wrong with `tools.cli`? &lt;https://github.com/clojure/tools.cli#in-order-processing-for-subcommands&gt;</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:33:58.232200</ts>
    <user>Antonia</user>
    <text>&amp;gt; Note that the options to log are not parsed, but remain in the unprocessed arguments vector. These options could be handled by another call to parse-opts from within the function that handles the log subcommand.</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:35:05.233200</ts>
    <user>Antonia</user>
    <text>Define options, parse, check if there’s an arg, parse its options against another sub-command definition</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:36:45.234900</ts>
    <user>Katherina</user>
    <text>&lt;@Antonia&gt; I felt its too low level and involves me writing a lot of boiler plate for validation and dispatch. &lt;https://github.com/l3nz/cli-matic&gt; built on top of it has a more declarative API and spec validation, but hides the subcommand aspect</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:38:01.235600</ts>
    <user>Katherina</user>
    <text>the problem came from writing
```
(defn validate-args
  "Validate command line arguments. Either return a map indicating the program
  should exit (with a error message, and optional ok status), or a map
  indicating the action the program should take and the options provided."
  [args]
  (let [{:keys [options arguments errors summary]} (parse-opts args cli-options)]
    (cond
      (:help options) ; help =&amp;gt; exit OK with usage summary
      {:exit-message (usage summary) :ok? true}
      errors ; errors =&amp;gt; exit with description of errors
      {:exit-message (error-msg errors)}
      ;; custom validation on arguments
      (and (= 1 (count arguments))
           (#{"start" "stop" "status"} (first arguments)))
      {:action (first arguments) :options options}
      :else ; failed custom validation =&amp;gt; exit with usage summary
      {:exit-message (usage summary)})))
```
for every subcommand using `tools.cli`</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:38:35.236100</ts>
    <user>Katherina</user>
    <text>plus a dispatcher like this:
```
(defn -main [&amp;amp; args]
  (let [{:keys [action options exit-message ok?]} (validate-args args)]
    (if exit-message
      (exit (if ok? 0 1) exit-message)
      (case action
        "start"  (server/start! options)
        "stop"   (server/stop! options)
        "status" (server/status! options)))))
```</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:40:17.237200</ts>
    <user>Antonia</user>
    <text>Let the root command validate common args and sub-commands validate their own args so the life is simpler.</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:41:12.237700</ts>
    <user>Antonia</user>
    <text>Isolation is always good</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:44:08.241900</ts>
    <user>Katherina</user>
    <text>i totally agree. what im having trouble with is writing all the `(cond ...)` and the `ifs` by hand. And that makes it more error prone. `cli-matic` for example gives me the ability to define the whole thing in a map:
```
(def CONFIGURATION
  {:app         {:command     "toycalc"
                 :description "A command-line toy calculator"
                 :version     "0.0.1"}

   :global-opts [{:option  "base"
                  :as      "The number base for output"
                  :type    :int
                  :default 10}]

   :commands    [{:command     "add"
                  :description "Adds two numbers together"
                  :opts        [{:option "a" :as "Addendum 1" :type :int}
                                {:option "b" :as "Addendum 2" :type :int :default 0}]              
                  :runs        add_numbers}

                 {:command     "sub"
                  :description "Subtracts parameter B from A"
                  :opts        [{:option "a" :as "Parameter A" :type :int :default 0}
                                {:option "b" :as "Parameter B" :type :int :default 0}]
                  :runs        subtract_numbers}
                 ]})
```</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:44:22.242400</ts>
    <user>Katherina</user>
    <text>also gives me the function dispatch too</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:44:53.242600</ts>
    <user>Mimi</user>
    <text>I’m guessing the consensus might be that this is overkill and/or maybe too low level … but I think from now on, whenever I need to parse anything (including command line stuff), I’m going with instaparse. It’s so awesome and you have so much control. instaparse + a cond statement ftw :wink:</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:49:50.243100</ts>
    <user>Katherina</user>
    <text>Thats the all conquering solution i guess :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:50:20.243300</ts>
    <user>Mimi</user>
    <text>if ya need to parse, might as well do it right! lol</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:54:42.243500</ts>
    <user>Katherina</user>
    <text>&lt;@Clarine&gt; Seems like it has a programmatic API too: &lt;https://picocli.info/picocli-3.0-programmatic-api.html&gt;</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T08:54:47.243700</ts>
    <user>Katherina</user>
    <text>could be useful</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T09:06:32.245400</ts>
    <user>Boyd</user>
    <text>Does anyone know how to find from which remote repo (ex. enonic, maven, clojars) that a project dependency wall pulled from using leiningen?</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T09:10:06.245500</ts>
    <user>Clarine</user>
    <text>aah</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T09:10:20.245700</ts>
    <user>Clarine</user>
    <text>that seems a lot better</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T09:56:13.246200</ts>
    <user>Clarine</user>
    <text>let me know if you get it working, I’m curious :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T09:58:52.246500</ts>
    <user>Loreen</user>
    <text>&lt;https://memegenerator.net/img/instances/x300/84483335/what-does-quote-say-to-repl-not-now.jpg&gt;</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T10:03:09.246700</ts>
    <user>Katherina</user>
    <text>Sure, trying to get to work on this Graal based CLI im putting together</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T10:20:18.247100</ts>
    <user>Clarine</user>
    <text>exciting! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:21:10.247300</ts>
    <user>Clarine</user>
    <text>what are you making?</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:27:35.247600</ts>
    <user>Katherina</user>
    <text>&lt;https://github.com/bob-cd/wendy&gt;
its a CLI to a CI tool I've been building for a while now. Was in Python, now "Graaled" my way back :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:28:11.247900</ts>
    <user>Katherina</user>
    <text>Im trying to implement &lt;https://github.com/bob-cd/wendy/blob/master/docs/commands.md&gt;</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:29:11.248200</ts>
    <user>Clarine</user>
    <text>aah</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:29:46.248400</ts>
    <user>Katherina</user>
    <text>whats in the repo works for a single command, but was having a nightmare to extend it</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:42:09.249000</ts>
    <user>Raina</user>
    <text>Regarding quotes</text>
  </message>
  <message conversation_id="1517">
    <ts>2019-05-17T10:42:33.249300</ts>
    <user>Raina</user>
    <text>`(meta ^:m 'm)` returns nil</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:43:16.249900</ts>
    <user>Raina</user>
    <text>so replacing the `'` with `(quote ` is the only way out or is there something else?</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:49:20.250200</ts>
    <user>Meagan</user>
    <text>`with-meta` works</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:50:15.251000</ts>
    <user>Meagan</user>
    <text>I’m often confused by the ^ meta reader, it seems to have some surprising behavior in certain cases (like this) so the only time I use it now is in a `def` to attach meta to a var</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T10:50:24.251300</ts>
    <user>Meagan</user>
    <text>otherwise, I use `with-meta` explicitly</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:09:28.251800</ts>
    <user>Harris</user>
    <text>`^:m 'm` is attaching meta to the compile time expression `(quote m)`</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:09:40.252300</ts>
    <user>Harris</user>
    <text>what you want to do is `'^:m m`</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:10:06.252700</ts>
    <user>Harris</user>
    <text>the behavior of `^` here is perfectly consistent</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:10:58.253200</ts>
    <user>Harris</user>
    <text>another way to understand what is going on here is to use `1` instead of `m`</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:11:08.253400</ts>
    <user>Harris</user>
    <text>```user=&amp;gt; ^:foo '1
1
user=&amp;gt; '^:foo 1
Syntax error reading source at (REPL:3:0).
Metadata can only be applied to IMetas```</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:11:56.254300</ts>
    <user>Harris</user>
    <text>there's no difference at all between `'` and `(quote`</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:12:15.254700</ts>
    <user>Meagan</user>
    <text>it might be entirely consistent :sweat_smile: I just find it doesn’t match what I want to do most of the time, so my tiny brain figured out `with-meta` is usually what I want</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:12:33.255000</ts>
    <user>Harris</user>
    <text>`with-meta` operates at runtime, `^` at read-time</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:12:43.255300</ts>
    <user>Meagan</user>
    <text>gotcha</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:13:24.255700</ts>
    <user>Harris</user>
    <text>(in fact, `^` _is just_ `with-meta` at read-time)</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:13:38.256300</ts>
    <user>Meagan</user>
    <text>I’m actually not sure why `'^:m` works</text>
  </message>
  <message conversation_id="1518">
    <ts>2019-05-17T11:13:49.256600</ts>
    <user>Harris</user>
    <text>it expands to `(quote ^:m m)`</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T11:45:11.257200</ts>
    <user>Becki</user>
    <text>anyone have the &lt;@Rosaline&gt; ticket about iterating over a paginated collection?</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T11:45:25.257400</ts>
    <user>Becki</user>
    <text>can't remember enough to find it</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T11:47:54.257600</ts>
    <user>Becki</user>
    <text>ah found it. &lt;https://dev.clojure.org/jira/browse/CLJ-1906&gt;.</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T11:56:34.258100</ts>
    <user>Meagan</user>
    <text>I wonder if that’s a use case for `nav` / `datafy` in actual application code</text>
  </message>
  <message conversation_id="1520">
    <ts>2019-05-17T12:13:51.258300</ts>
    <user>Jasmine</user>
    <text>interesting idea</text>
  </message>
  <message conversation_id="1521">
    <ts>2019-05-17T14:31:19.259700</ts>
    <user>Zada</user>
    <text>Hoping someone here might have some experience: I'm trying to set a log level inside a `log4j.properties` file just for a specific clojure namespace. Is there an easy way to do this that doesn't involve using Java interop to set the logging level inside the clojure code itself?</text>
  </message>
  <message conversation_id="1522">
    <ts>2019-05-17T15:12:22.259900</ts>
    <user>Milagros</user>
    <text>Look in `~/.m2/repository/&amp;lt;group&amp;gt;/&amp;lt;name&amp;gt;/&amp;lt;version&amp;gt;/_remote.repositories` - that should list the repo the artifact came from:

```
~&amp;gt; cat ~/.m2/repository/ring/ring/1.7.1/_remote.repositories
#NOTE: This is an Aether internal implementation file, its format can be changed without prior notice.
#Mon Apr 22 09:08:21 EDT 2019
ring-1.7.1.jar&amp;gt;clojars=
ring-1.7.1.pom&amp;gt;clojars=
```</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T16:53:03.261500</ts>
    <user>Onita</user>
    <text>is it just me or does 400-500ms for 800 `insert-multi!` rows in jdbc seem… like a lot</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T16:55:38.262000</ts>
    <user>Tammera</user>
    <text>are you sure that is time is being burnt in jdbc and not in your db?</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:00:15.262900</ts>
    <user>Onita</user>
    <text>i’m not sure, i just have an adhoc profiling call around the insert</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:00:21.263100</ts>
    <user>Onita</user>
    <text>any ideas on how i can dig further?</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:00:40.263300</ts>
    <user>Tammera</user>
    <text>If I recall correctly — but I am by no mean an expert — insertion performance depends on how many indices there are on your rows</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:01:22.263600</ts>
    <user>Onita</user>
    <text>i have a primary key on 3 of 4 columns in the table</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:02:01.264300</ts>
    <user>Onita</user>
    <text>maybe there’s a way to get an explain out of jdbc?</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:04:58.266500</ts>
    <user>Tammera</user>
    <text>You could try inserting the same rows using the mysql client/psql, see how long that takes. I wouldn’t expect something like jdbc to add any large amount of overhead. But this is just a hunch, you should ask Sean Corfield when he’s around!</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:56:29.267100</ts>
    <user>Celestine</user>
    <text>&lt;@Onita&gt; How exactly are you inserting multiple rows?</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:57:16.268200</ts>
    <user>Onita</user>
    <text>`insert-multi!`</text>
  </message>
  <message conversation_id="1523">
    <ts>2019-05-17T17:57:40.268700</ts>
    <user>Celestine</user>
    <text>So you said. What _exactly_ does your call look like?</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:58:21.269900</ts>
    <user>Onita</user>
    <text>so it’s provided with a vector of column names, and then 800 tuples for row values</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:58:24.270100</ts>
    <user>Onita</user>
    <text>if that’s what you mean</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:58:28.270300</ts>
    <user>Celestine</user>
    <text>If you provide multiple maps, it does multiple inserts (per the docs). If you provide a vector of column names and a vector of rows (a vector of vectors of row values), it tries to do a single insert -- but the actual behavior is, like so many JDBC-related things, database-specific. For example, PostgreSQL requires that you provide a special option.</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T17:59:20.270700</ts>
    <user>Onita</user>
    <text>what does the option indicate?</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T18:00:33.271600</ts>
    <user>Celestine</user>
    <text>The auto-gen'd docs haven't been updated for a while (infrastructure issues, I believe), but I've recently added this paragraph to the docstring for `insert-multi!` ```  Note: some database drivers need to be told to rewrite the SQL for this to
  be performed as a single, batched operation. In particular, PostgreSQL
  requires :reWriteBatchedInserts true and My SQL requires
  :rewriteBatchedStatement true (both non-standard JDBC options, of course!).
  These options should be passed into the driver when the connection is
  created (however that is done in your program).
```</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T18:01:18.272200</ts>
    <user>Celestine</user>
    <text>So if you're on PostgreSQL or MySQL, you'll need to provide the appropriate option in your db-spec when you create your DB connection.</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T18:01:33.272700</ts>
    <user>Celestine</user>
    <text>(and, of course, they're different options -- thank you JDBC :disappointed: )</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T18:02:21.273500</ts>
    <user>Celestine</user>
    <text>BTW, there's &lt;#C1Q164V29|sql&gt; for SQL-specific / JDBC-specific questions -- which I'm much more likely to see as I don't have that channel muted (but I do have this one muted).</text>
  </message>
  <message conversation_id="1519">
    <ts>2019-05-17T18:03:20.274100</ts>
    <user>Celestine</user>
    <text>(JDBC is one of the biggest piles of frustrating, non-standard, quirkiness I've ever had to work with!)</text>
  </message>
  <message conversation_id="1524">
    <ts>2019-05-18T00:22:05.276600</ts>
    <user>Felix</user>
    <text>Given Clojure/JVM, cljs, graal, ... what is the 'lowest startup delay' method of running clojure on aws lambda ?</text>
  </message>
  <message conversation_id="1524">
    <ts>2019-05-18T02:17:17.285500</ts>
    <user>Antonia</user>
    <text>&lt;@Felix&gt; clojure on jvm8 is as fast as go, the jar is even smaller than go binary. But don't try to use 128mb of mem, too small. The rest is too abstract, you need to run your benchmarks depending on the case. VPC is still slow so probably if you really need lambda, you are limited to public databases like Aurora Serverless (MySQL atm, Postgres in preview), Dynamodb, Kinesis and so — the ones that give access through iam role and not force you to keep everything in a VPC. They said they should fix it some time in 2019. And this is applicable to all runtimes. From my observation, clojure does not really add any big overhead.</text>
  </message>
  <message conversation_id="1524">
    <ts>2019-05-18T02:23:05.285600</ts>
    <user>Arlen</user>
    <text>&amp;gt; clojure on jvm8 is as fast as go

&lt;@Felix&gt; As fast for startup time? I very much doubt that, especially if you need to load more than just `clojure.core`!</text>
  </message>
  <message conversation_id="1524">
    <ts>2019-05-18T02:28:16.285900</ts>
    <user>Antonia</user>
    <text>Dependencies is the thing to keep an eye on, right.</text>
  </message>
  <message conversation_id="1524">
    <ts>2019-05-18T02:30:32.286100</ts>
    <user>Antonia</user>
    <text>Like I said, it does not add big overhead, but still does some. If a lambda somewhere behind Kinesis Stream, Dynamodb Stream, SQS, SNS, it's fine to have it starting a bit longer than go or node.js.</text>
  </message>
  <message conversation_id="1524">
    <ts>2019-05-18T02:31:18.286300</ts>
    <user>Antonia</user>
    <text>I would not use lambda as an http handler tho, forgot to mention that, sorry.</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T03:37:18.287400</ts>
    <user>Clarine</user>
    <text>&lt;@Felix&gt; I don’t know about AWS Lambda but on my machine native with Graal is definitely the fastest. it can also be a bit limiting in terms of what it supports, e.g. no eval</text>
  </message>
  <message conversation_id="1526">
    <ts>2019-05-18T04:59:53.291800</ts>
    <user>Zetta</user>
    <text>Hi,  I'm trying to change the default print output for functions to into ```(doc f)```

While the following works fine in the default clj repl ```(remove-method print-method clojure.lang.Fn)
  
(defn- pretty-demunge
   [fn-object]   
     (let [dem-fn (clojure.repl/demunge (str fn-object))
            pretty (second (re-find #"(.*?\/.*?)[\-\-|@].*" dem-fn))]
      (if pretty pretty dem-fn)))
      
(defmethod print-method clojure.lang.Fn [f w]  
    (.write w (:doc (meta (find-var (symbol (pretty-demunge f)))))))```
 It doesn't work in lein repl (I keep getting the default #function output, any idea why this is the case? (my guess is that I need to implement an nrepl middleware but id like to find an easier way of doing this)</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T11:59:59.294100</ts>
    <user>Elaine</user>
    <text>&lt;https://clojure.atlassian.net/projects/CLJ/issues/CLJ-1906&gt;</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:08:09.295300</ts>
    <user>Felix</user>
    <text>@art &lt;@Arlen&gt; &lt;@Clarine&gt;: this is my fault for not specifying it earlier -- but yes, I want to use Clojure on Lambda as HTTP REST API / handler. This is why I care about the code start time.</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:08:21.295600</ts>
    <user>Felix</user>
    <text>What is the best way to minimize the clj/lambda startup delay?</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:09:22.296200</ts>
    <user>Sheron</user>
    <text>you're having in mind aws lambda ?</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:09:30.296400</ts>
    <user>Clarine</user>
    <text>&lt;@Felix&gt; as I said, on my own machine Graal is definitely the fastest startup, but I don’t know how AWS Lambda works</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:10:18.297000</ts>
    <user>Felix</user>
    <text>&lt;@Clarine&gt;: I know nothing about Graal+CLJ. Is this something that can be deployed to Lambda? (I"ve deployed Go, Rust, and Clj-JVM functions.)</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:11:10.297600</ts>
    <user>Clarine</user>
    <text>Graal can compile to a binary for linux, MacOS or Windows. I assume AWS can run linux binaries</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:12:35.298200</ts>
    <user>Sheron</user>
    <text>aws lambda's  jvm startup is a major pain , there is no real way around it (i have invested tens of hours onto optimizations there) ...</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:13:06.298900</ts>
    <user>Sheron</user>
    <text>if you want stuff that starts fast,  pick either python or nodejs there. (or maybe graalvm and native-image ... maybe maybe)</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:13:12.299200</ts>
    <user>Sheron</user>
    <text>maybe clojurescript on top of nodejs ?</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:13:20.299400</ts>
    <user>Clarine</user>
    <text>lumo might also work?</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:13:25.299600</ts>
    <user>Clarine</user>
    <text>or yes cljs + node</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:13:44.300000</ts>
    <user>Felix</user>
    <text>got it, so if I want clj-like on lambda, I should look into:

clj/graalvm, cljs/nodejs, planck, lumo

?</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:17:42.300600</ts>
    <user>Sheron</user>
    <text>y</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:17:59.301000</ts>
    <user>Sheron</user>
    <text>even plain java stuff on the java vm is slow as hell for the first request</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:18:39.302000</ts>
    <user>Felix</user>
    <text>I can't tell if 'y' is for 'yes' or 'why' :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:18:42.302100</ts>
    <user>Sheron</user>
    <text>by the looks of it amazon is actually booting up a fresh jvm there and the performance of those has never been great off the line ... even my java lambdas are having trouble and they are much smaller than clojure itself.</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:19:33.302700</ts>
    <user>Felix</user>
    <text>so the overhead of planck, lumo, and cljs/nodejs should all be ~ the same right? boot a js vm + load cljs primitives ?</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:26:37.303300</ts>
    <user>Clarine</user>
    <text>&lt;@Felix&gt; if you’re really going for speed I would use a compiled CLJS -&amp;gt; nodejs project, no self-hosted stuff</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:26:44.303500</ts>
    <user>Clarine</user>
    <text>or graalvm</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:27:36.304200</ts>
    <user>Felix</user>
    <text>I'm really not a fan of Node. Googling "clojure graalvm" is bringing up lots of youtube talks. Do you have a link for setting up a nice clojure/graalvm workflow?</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:28:58.304700</ts>
    <user>Clarine</user>
    <text>I would look into &lt;https://github.com/taylorwood/lein-native-image&gt; or &lt;https://github.com/borkdude/clj.native-image&gt;</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:29:44.305300</ts>
    <user>Clarine</user>
    <text>or just use `lein uberjar`. there’s an example here: &lt;https://github.com/borkdude/cljtree-graalvm&gt;</text>
  </message>
  <message conversation_id="1527">
    <ts>2019-05-18T15:30:44.306900</ts>
    <user>Felix</user>
    <text>dumb question: so during development, I'm still developing vs JVM Cloljure REPL, but when everything is done, I say "hey lein, take these java class files, and convert them over to graalvm" ?</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:30:47.307000</ts>
    <user>Clarine</user>
    <text>&lt;@Felix&gt; for questions about Graal, there’s also the &lt;#CAJN79WNT|graalvm&gt; channel</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:30:55.307200</ts>
    <user>Clarine</user>
    <text>&lt;@Felix&gt; yep :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:31:07.307600</ts>
    <user>Clarine</user>
    <text>that’s how I’ve been developing &lt;https://github.com/borkdude/clj-kondo&gt;</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:31:16.308000</ts>
    <user>Felix</user>
    <text>this makes sense; thanks</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:33:29.309300</ts>
    <user>Clarine</user>
    <text>there are some things that GraalVM cannot handle, e.g. eval. there’s also an issue with `locking`. so YMMV.</text>
  </message>
  <message conversation_id="1525">
    <ts>2019-05-18T15:38:10.309900</ts>
    <user>Katherina</user>
    <text>&lt;@Felix&gt; &lt;https://github.com/oracle/graal/blob/master/substratevm/LIMITATIONS.md&gt;</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:06:21.311500</ts>
    <user>Dreama</user>
    <text>i am curious if there is a simple way to recursively descend into a nested hash  and make a copy that has certain keys removed   .. i have tried clojure.walk and friends but that is good for transforming keys and not removing them</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:06:39.311700</ts>
    <user>Celestine</user>
    <text>`update-in` with `dissoc`?</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:08:29.312400</ts>
    <user>Dreama</user>
    <text>oh .. let me try that one ( was not sure if that would descend the hash )</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:12:58.313900</ts>
    <user>Dreama</user>
    <text>problem with update-in is that is expects the path  to dissoc from but I am decending tree and don't know the path exactly .. i guess I could collect those paths ?  but might be better way ?</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:14:14.315500</ts>
    <user>Nieves</user>
    <text>maybe assoc them by nils can help? or why you need "copy" without some keys? you have a side function, which logic depends on this keys?</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:14:15.315600</ts>
    <user>Jasmine</user>
    <text>clojure.walk/postwalk-replace can be used for this</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:14:48.316200</ts>
    <user>Dreama</user>
    <text>i tried post-walk .. but i could not figure out how to &amp;gt;&amp;gt; remove &amp;lt;&amp;lt;  just transform the value</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:15:43.316900</ts>
    <user>Dreama</user>
    <text>so i can transform it but not remove it with the walkies function</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:16:15.317500</ts>
    <user>Dreama</user>
    <text>i have a tree with key values and want to walk and remove certain keys</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:18:01.318800</ts>
    <user>Dreama</user>
    <text>so yes, i have a function to determine which to remove</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:18:12.319500</ts>
    <user>Jasmine</user>
    <text>```user=&amp;gt; (clojure.walk/postwalk #(if (map? %) (dissoc % :a :b) %) {:a 1 :e {:c 2 :b {:f 3}}})
{:e {:c 2}}```</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:18:30.319900</ts>
    <user>Jasmine</user>
    <text>something like that to remove all :a and :b at all levels</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:19:12.320500</ts>
    <user>Dreama</user>
    <text>oh .. wow .. trying that now</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:20:56.321100</ts>
    <user>Jasmine</user>
    <text>basically it will (bottom first) visit every node of the tree and replace the node it's on with the value returned from the fn</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:21:20.321600</ts>
    <user>Jasmine</user>
    <text>the if is important to only apply the dissoc on map nodes, and not on individual leaves, etc</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:25:35.322600</ts>
    <user>Dreama</user>
    <text>ok .. got it .. it works really well .. and i love it of course, but gimme a few moments to let it soak in and then i will change the if to dissoc the keywords that i need</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:35:46.323500</ts>
    <user>Sixta</user>
    <text>Also see &lt;https://github.com/FieryCod/holy-lambda&gt;</text>
  </message>
  <message conversation_id="1528">
    <ts>2019-05-18T17:40:29.323800</ts>
    <user>Darci</user>
    <text>generally, this is a perfect use case for specter. And it is totally general and will always maintain data types. In my experience/use it is simpler and far better for this sort of thing than  core stuff +  clojure.walk/*</text>
  </message>
  <message conversation_id="1529">
    <ts>2019-05-18T18:23:22.326800</ts>
    <user>Deangelo</user>
    <text>Hi everyone. I’ve got this little code
```
(let [image-fields [:thumbnail_image :featured_image :display_image]]
    (cond-&amp;gt; updated-data
      (pos? (count changed-images))
      (assoc :images (mapv #(image-updates in-updated in-original %) changed-images))

      :always
      (dissoc :thumbnail_image :featured_image :display_image)))
```
and I want to `apply` that `dissoc` using `image-fields` but cannot figure out how to. so basically I want to do something like
```:always
(apply dissoc image-fields)
```
but because it’s in a `cond-&amp;gt;`, I guess it ends up as being `(apply updated-data dissoc image-fields)`.

I tried it like this as well
```:always
#(apply dissoc % image-fields)```</text>
  </message>
  <message conversation_id="1529">
    <ts>2019-05-18T18:25:34.327300</ts>
    <user>Jasmine</user>
    <text>rather than tacking that on the end, "always" stuff can be done at the beginning</text>
  </message>
  <message conversation_id="1529">
    <ts>2019-05-18T18:26:01.327900</ts>
    <user>Deangelo</user>
    <text>do you mean up here?
```(cond-&amp;gt; updated-data```</text>
  </message>
  <message conversation_id="1529">
    <ts>2019-05-18T18:26:11.328300</ts>
    <user>Jasmine</user>
    <text>(cond-&amp;gt; (apply dissoc updated-data image-fields) ... )</text>
  </message>
  <message conversation_id="1529">
    <ts>2019-05-18T18:26:12.328500</ts>
    <user>Jasmine</user>
    <text>yeah</text>
  </message>
  <message conversation_id="1529">
    <ts>2019-05-18T18:26:24.328800</ts>
    <user>Deangelo</user>
    <text>yeah that makes sense :smile: thank you</text>
  </message>
  <message conversation_id="1529">
    <ts>2019-05-18T18:26:31.329000</ts>
    <user>Jasmine</user>
    <text>cond is for conditional things :)</text>
  </message>
  <message conversation_id="1529">
    <ts>2019-05-18T18:29:09.329800</ts>
    <user>Deangelo</user>
    <text>thanks again. it cleared up a few other things before that chunk of code :+1:</text>
  </message>
  <message conversation_id="1529">
    <ts>2019-05-18T18:36:37.329900</ts>
    <user>Dreama</user>
    <text>good point &lt;@Darci&gt; I have watched the video on specter 2 times actually and thought of it but my partner prefers to use less libraries ( BUT ) in this case it makes sense ( so thanks for suggestion )</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:06:54.330600</ts>
    <user>Dreama</user>
    <text>i've been getting drunk on this code for a few hours</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:06:55.330800</ts>
    <user>Dreama</user>
    <text>```</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:06:57.331000</ts>
    <user>Dreama</user>
    <text>(clojure.walk/postwalk #(if (map? %) (dissoc % :a :b) %) {:a 1 :e {:c 2 :stuck_out_tongue: {:f 3}}})</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:06:59.331200</ts>
    <user>Dreama</user>
    <text>```</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:07:13.331600</ts>
    <user>Dreama</user>
    <text>to remove key/values from a tree   when key matches  a pattern</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:08:09.332900</ts>
    <user>Dreama</user>
    <text>but could not figure out how to make it so that i dynamically check the keys ( to see if they match a regex ( lets say ) .. this code assumes that they are known keys like ( :a  or : b )  but I don't know the keys in advance.</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:08:53.333800</ts>
    <user>Dreama</user>
    <text>i tried oh so many things, but i  could not figure it out  ( even tried specter )</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:10:43.334800</ts>
    <user>Celestine</user>
    <text>&lt;@Dreama&gt; You have the whole map right there. You can get the `keys` and do whatever you need, based on them.</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:11:52.335700</ts>
    <user>Dreama</user>
    <text>even nested keys ??  i guess you suggesting i ( step 1 )  pick out the paths  i want to remove  ( with my function )   then step 2 ( dissoc them ? )</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:13:51.337400</ts>
    <user>Dreama</user>
    <text>my tree ( hash )  also looks more like  {:a [{:b 1} {:c 2}] :d { :e 4}}  where key values can be array of more hashes</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:15:14.337800</ts>
    <user>Celestine</user>
    <text>Perhaps you could explain more clearly what problem you are trying to solve?</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:16:17.339200</ts>
    <user>Celestine</user>
    <text>With `postwalk`, you can look at the whole of each hash map within the tree -- inside the `(if (map ? %) ... % ... )` branch</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:16:29.339400</ts>
    <user>Dreama</user>
    <text>just walking tree and removing key/values that match a pattern ( like if key has "ui" in it )</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:16:43.339700</ts>
    <user>Celestine</user>
    <text>Then, yeah, you can absolutely do that.</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:17:00.340500</ts>
    <user>Dreama</user>
    <text>i know i can do that .. i just flailing .. but i keep trying though ..</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:17:53.341500</ts>
    <user>Celestine</user>
    <text>`(apply dissoc % (map keyword (filter (partial re-find #"ui") (keys %))))` -- something like that?</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:18:10.341900</ts>
    <user>Celestine</user>
    <text>(I should pull up a REPL and try that before recommending it)</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:18:33.342400</ts>
    <user>Dreama</user>
    <text>oh .. so your saying if you find a hash   do that</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:18:43.342700</ts>
    <user>Dreama</user>
    <text>ok .. let me slap that sort of thing in the REPL myself</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:19:35.343700</ts>
    <user>Celestine</user>
    <text>You may need to check that the list of keys returned that way is not empty before attempting the `dissoc`...</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:20:03.344500</ts>
    <user>Celestine</user>
    <text>Hmm, no, `dissoc` supports just one argument so that should work without a condition.</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:20:20.344800</ts>
    <user>Dreama</user>
    <text>got it but your idea is to get list of keys to remove .. ok .. that interesting</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:22:15.346000</ts>
    <user>Celestine</user>
    <text>If your problem is "remove all keys that have `ui` in their name, from all hash maps in the tree" then that code solves that. But I get the impression that isn't quite the actual problem?</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:23:45.346200</ts>
    <user>Dreama</user>
    <text>no no .. that is exactly it</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:23:48.346400</ts>
    <user>Dreama</user>
    <text>it is that simple</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:24:04.346700</ts>
    <user>Dreama</user>
    <text>almost got it .. gimme a few more minutes</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:24:18.347000</ts>
    <user>Dreama</user>
    <text>this was good suggestion by the way</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T19:25:48.348200</ts>
    <user>Dreama</user>
    <text>got it .. oh man .. that was 3 hours well spent .. thanks  &lt;@Celestine&gt; and &lt;@Jasmine&gt; for both suggestions .. that was a whooper</text>
  </message>
  <message conversation_id="1531">
    <ts>2019-05-18T21:04:28.353000</ts>
    <user>Liane</user>
    <text>I see the word "reified" come up a lot and sometimes in ways that makes me think i dont understand how its used, at least in the clojure community.

1. its a verb, so it acts on something and that action is to make it less abstract. I reified my health and wellness plan by signing up for the local gym.
2. reify, in clojure, does just that, it defines  an anonymous type and creates an instance of that type.

so when i see it used like this:

&amp;gt; X uses a global singleton for the fact base; I wanted something reified I can pass around.

I get confused. because im not sure how to interprate this, maybe they are saying that X only had the idea of a singleton, but they flushed out the implementation?</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T21:18:20.354200</ts>
    <user>Latonya</user>
    <text>In the phrase "I wanted something reified I can pass around", it sounds like they want X to be a value that can be bound to a parameter, or returned as a value from a function call.</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T21:18:35.354600</ts>
    <user>Latonya</user>
    <text>It would surprise me if everyone used the word "reify" identically to each other, BTW.</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T21:32:31.355600</ts>
    <user>Celestine</user>
    <text>`reify` does not "define an anonymous type". It creates an object that satisfies one or more interfaces or protocols.</text>
  </message>
  <message conversation_id="1531">
    <ts>2019-05-18T21:34:26.356600</ts>
    <user>Celestine</user>
    <text>(if that has to create a Java class that implements a bunch of things, that's an implementation detail)</text>
  </message>
  <message conversation_id="1532">
    <ts>2019-05-18T21:39:28.356800</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; (reify Runnable (run [this]))
#object[user$eval140$reify__141 0x546621c4 "user$eval140$reify__141@546621c4"]
user=&amp;gt; (type *1)
user$eval140$reify__141
user=&amp;gt; (ancestors *1)
#{java.lang.Runnable clojure.lang.IObj java.lang.Object clojure.lang.IMeta}
user=&amp;gt;    ```</text>
  </message>
  <message conversation_id="1530">
    <ts>2019-05-18T21:41:49.357400</ts>
    <user>Celestine</user>
    <text>It hadn't occurred to me that it would implement `IObj` and `IMeta` but that makes sense...</text>
  </message>
  <message conversation_id="1531">
    <ts>2019-05-18T21:42:11.357600</ts>
    <user>Celestine</user>
    <text>&lt;@Liane&gt; ^</text>
  </message>
  <message conversation_id="1532">
    <ts>2019-05-18T21:58:48.357900</ts>
    <user>Liane</user>
    <text>im out of my depth, but i am quoting the clojure docs directly:
&lt;https://clojure.org/reference/datatypes#_reify&gt;</text>
  </message>
  <message conversation_id="1532">
    <ts>2019-05-18T22:00:55.360000</ts>
    <user>Liane</user>
    <text>interesting, thanks &lt;@Celestine&gt;, that makes sense. i think &lt;@Latonya&gt; is right here and it might have been a slight mis-use on the original authors part. Normally i dont get tripped up on such things but I wasnt comfortable with reify yet so its hard to see where the misconception is.</text>
  </message>
  <message conversation_id="1532">
    <ts>2019-05-19T00:16:00.360200</ts>
    <user>Celestine</user>
    <text>Yeah, I think the "defines an anonymous type" is secondary to what it does. I mean, it has to "Because Java", but that's not really the _point_ of `reify`. The important part is "creates an instance of ..." something that implements the specified protocols and interfaces (and `IObj` and `IMeta`).</text>
  </message>
  <message conversation_id="1531">
    <ts>2019-05-19T00:25:35.360400</ts>
    <user>Zita</user>
    <text>Yeah, I found the same thing when debugging last week. Not expected, but reasonable.</text>
  </message>
  <message conversation_id="1533">
    <ts>2019-05-19T15:11:36.362900</ts>
    <user>Deangelo</user>
    <text>I’m trying to call a server from my `clojure` app using `http-kit + enlive`. I’m basically trying to scrape a single page daily, but that page is JS rendered. Is there a way to somehow wait for javascript to render the page?</text>
  </message>
  <message conversation_id="1533">
    <ts>2019-05-19T15:12:33.363300</ts>
    <user>Meagan</user>
    <text>you’ll have to use a headless browser like chromium</text>
  </message>
  <message conversation_id="1533">
    <ts>2019-05-19T15:13:28.363900</ts>
    <user>Meagan</user>
    <text>I believe there’s a Clojure library for doing this: &lt;https://github.com/igrishaev/etaoin&gt;</text>
  </message>
  <message conversation_id="1533">
    <ts>2019-05-19T15:13:54.364200</ts>
    <user>Meagan</user>
    <text>&lt;https://github.com/igrishaev/etaoin#using-headless-drivers&gt;</text>
  </message>
  <message conversation_id="1533">
    <ts>2019-05-19T15:14:29.364700</ts>
    <user>Deangelo</user>
    <text>thank you :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1534">
    <ts>2019-05-19T23:39:18.366400</ts>
    <user>Roselia</user>
    <text>How to set `*print-namespaced-maps*` to `false` via `project.clj` for nrepl 6.0 `:init` doesn't work</text>
  </message>
  <message conversation_id="1535">
    <ts>2019-05-19T23:55:09.367700</ts>
    <user>Lorenza</user>
    <text>Is there a library that would parse edn (as edn not text), kind of like spec but maybe with more of a focus on speed ?</text>
  </message>
  <message conversation_id="1536">
    <ts>2019-05-20T01:20:26.369200</ts>
    <user>Donetta</user>
    <text>Could someone tell me (or link me) the way in which I can define the "entrypoint" for a project using clj?  as if I were to type `clj -m my-package.core` ?  I assume some setting in deps.edn?  But main-opts at the top level doesn't seem to do the trick so May have missed something</text>
  </message>
  <message conversation_id="1536">
    <ts>2019-05-20T01:22:12.370200</ts>
    <user>Lavinia</user>
    <text>&lt;@Donetta&gt; just define a `-main` function in the namespace my-package.core and make sure you have `:paths ["src"]` in your deps.edn, so clojure can find your namespace definition</text>
  </message>
  <message conversation_id="1536">
    <ts>2019-05-20T01:22:57.371100</ts>
    <user>Donetta</user>
    <text>thank you - will the paths ["src"] setting assist with tools like Cider finding / auto-loading the file(s) on repl start?  I notice in lein projects that happened automatically for me, but with the deps.edn set up, I have to manually load each file</text>
  </message>
  <message conversation_id="1536">
    <ts>2019-05-20T01:25:06.372600</ts>
    <user>Lavinia</user>
    <text>`:paths` sets the classpath, where clojure searches for classes/namespaces. If currently `(require 'your.namespace)` doesn't just work and you have to load files manually, then you are missing `:paths` definition in your deps.edn</text>
  </message>
  <message conversation_id="1536">
    <ts>2019-05-20T01:25:40.372800</ts>
    <user>Donetta</user>
    <text>ty</text>
  </message>
  <message conversation_id="1536">
    <ts>2019-05-20T01:26:36.373000</ts>
    <user>Lavinia</user>
    <text>np</text>
  </message>
  <message conversation_id="1536">
    <ts>2019-05-20T01:29:59.374100</ts>
    <user>Madeleine</user>
    <text>You can check in *Messages* buffer to see the command Cider ran to start nRepl</text>
  </message>
  <message conversation_id="1536">
    <ts>2019-05-20T01:30:17.374500</ts>
    <user>Madeleine</user>
    <text>You should see it using your deps.edn</text>
  </message>
  <message conversation_id="1536">
    <ts>2019-05-20T01:30:53.375600</ts>
    <user>Madeleine</user>
    <text>If not, it could be an issue there, where Cider is not starting nRepl in the context of your deps.edn</text>
  </message>
  <message conversation_id="1537">
    <ts>2019-05-20T04:15:56.375800</ts>
    <user>Madelene</user>
    <text>I think their usage is correct if you read it as _reified as a value_.</text>
  </message>
  <message conversation_id="1538">
    <ts>2019-05-20T05:24:56.377900</ts>
    <user>Deangelo</user>
    <text>hi everyone. where do you usually deploy your clojure apps?
I've tested a few - heroku, digitalocean, aws. heroku seems to be the most straight forward, easy and super quick one. it took me more than an hour on the other two. so was wondering if there are any other services out there</text>
  </message>
  <message conversation_id="1539">
    <ts>2019-05-20T06:14:14.378500</ts>
    <user>Thuy</user>
    <text>Hey! I might be asking in the wrong channel but here it is:</text>
  </message>
  <message conversation_id="1539">
    <ts>2019-05-20T06:14:37.379000</ts>
    <user>Thuy</user>
    <text>I am looking for a library to create gists on github</text>
  </message>
  <message conversation_id="1539">
    <ts>2019-05-20T06:15:22.379700</ts>
    <user>Thuy</user>
    <text>a clojars search for github yielded decade old libs</text>
  </message>
  <message conversation_id="1539">
    <ts>2019-05-20T06:15:34.380000</ts>
    <user>Thuy</user>
    <text>d you have a recommendation?</text>
  </message>
  <message conversation_id="1539">
    <ts>2019-05-20T06:33:01.381800</ts>
    <user>Fatima</user>
    <text>Github API looks very straightforward. I’d personally approach this by generating the required HTTP-request(s) with `clj-http` or something similar. &lt;https://developer.github.com/v3/gists/#create-a-gist&gt;</text>
  </message>
  <message conversation_id="1539">
    <ts>2019-05-20T06:39:09.382600</ts>
    <user>Fatima</user>
    <text>Another option could be using one of the Java libraries via interop, for example &lt;https://github.com/eclipse/egit-github/tree/master/org.eclipse.egit.github.core&gt;</text>
  </message>
  <message conversation_id="1539">
    <ts>2019-05-20T06:39:48.383000</ts>
    <user>Thuy</user>
    <text>thank you &lt;@Fatima&gt;</text>
  </message>
  <message conversation_id="1539">
    <ts>2019-05-20T06:40:18.383400</ts>
    <user>Thuy</user>
    <text>I'm inclined towards clj-http</text>
  </message>
  <message conversation_id="1539">
    <ts>2019-05-20T06:42:49.383800</ts>
    <user>Fatima</user>
    <text>Hmmm this is not maintained but it might just work &lt;https://github.com/Raynes/tentacles&gt;</text>
  </message>
  <message conversation_id="1540">
    <ts>2019-05-20T07:03:02.385900</ts>
    <user>Alleen</user>
    <text>tricks I keep on forgetting :
• when you need a function that ignores its argument and returns nil, you can use `{}`
• when you need a function that ignores its first argument and returns its second argument, you can use `{}`
```(update {:a 1 :b 2} :a {})
#_=&amp;gt; {:a nil, :b 2}
(update {:a 1 :b 2} :b {} 3)
#_=&amp;gt; {:a 1, :b 3}```</text>
  </message>
  <message conversation_id="1540">
    <ts>2019-05-20T07:19:17.386700</ts>
    <user>Clarine</user>
    <text>I think the “new” `:skip-whitespace` option should default to `true` in data.xml because upgrading from 0.0.8 to 0.2.0-alpha6 broke our code</text>
  </message>
  <message conversation_id="1541">
    <ts>2019-05-20T07:29:08.387500</ts>
    <user>Nisha</user>
    <text>What could possibly result in exceptions disappear silently?</text>
  </message>
  <message conversation_id="1541">
    <ts>2019-05-20T07:30:49.389600</ts>
    <user>Nisha</user>
    <text>Here and there I found some functions in my code failing silently, where I expect them to throw exceptions and break the loop. I don’t understand why.</text>
  </message>
  <message conversation_id="1542">
    <ts>2019-05-20T07:41:52.389900</ts>
    <user>Alleen</user>
    <text>looking at asynchronous constructs such as futures, agents or go blocks is usually a good start</text>
  </message>
  <message conversation_id="1543">
    <ts>2019-05-20T08:22:42.390100</ts>
    <user>Tarsha</user>
    <text>maybe this is related &lt;https://stuartsierra.com/2015/05/27/clojure-uncaught-exceptions&gt;</text>
  </message>
  <message conversation_id="1541">
    <ts>2019-05-20T09:25:23.390400</ts>
    <user>Nisha</user>
    <text>Ha that’s it. Thanks!</text>
  </message>
  <message conversation_id="1541">
    <ts>2019-05-20T09:31:35.390700</ts>
    <user>Nisha</user>
    <text>However, `Thread/setDefaultUncaughtExceptionHandler` doesn’t seem to fix it for `future` in my case. I use `future` to run a loop and never deref the future.

Does that mean I should get rid of `future` and use something else instead?</text>
  </message>
  <message conversation_id="1541">
    <ts>2019-05-20T09:37:40.391000</ts>
    <user>Alleen</user>
    <text>yes, a future that is never derefed is a code smell. you may consider using a plain j.u.c.Executor instead</text>
  </message>
  <message conversation_id="1541">
    <ts>2019-05-20T09:44:40.399700</ts>
    <user>Nisha</user>
    <text>That’s pathetic… Why don’t we have a simple `thread` in the core?</text>
  </message>
  <message conversation_id="1544">
    <ts>2019-05-20T09:46:33.403000</ts>
    <user>Domingo</user>
    <text>Hi, everyone
I had a question about state and persistence :
The thing is I have an atom as the main state of some module ... and the persistence (into db) is handled by adding a watch on that atom that translates the diff of two subsequent states into a transaction (put new state + put the transition)
However due to asynchronous behavior of watches (and fast state updates) ... I get foreign key errors, since the previous state is not inserted (transition has a foreign key constraint to state)
My questions :
- what is the best way to handle it?
- and is such a scheme for state managment rational, at all?</text>
  </message>
  <message conversation_id="1544">
    <ts>2019-05-20T09:50:47.403100</ts>
    <user>Shayla</user>
    <text>"pathetic" seems harsh</text>
  </message>
  <message conversation_id="1544">
    <ts>2019-05-20T09:51:30.403300</ts>
    <user>Alleen</user>
    <text>probably because the core is already big enough and java interop works well for this kind of stuff</text>
  </message>
  <message conversation_id="1544">
    <ts>2019-05-20T09:54:25.403800</ts>
    <user>Alleen</user>
    <text>BTW clojure functions implement java.lang.Runnable so spawning a thread manually from clojure is a one-liner</text>
  </message>
  <message conversation_id="1544">
    <ts>2019-05-20T09:56:53.406500</ts>
    <user>Bee</user>
    <text>I think part of your problem is that you're using one identity (an atom) to try and control a huge grid of identities (each column of each row of a table, assuming that you're only trying to sync your atom to one table). It's worth calling out first because it's essential to what you are trying to do, and you cannot change that aspect of your plan without changing your plan.</text>
  </message>
  <message conversation_id="1544">
    <ts>2019-05-20T10:08:07.407000</ts>
    <user>Clarine</user>
    <text>what are some repo’s that use reader conditionals + `:cljr` ?</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T10:15:52.408000</ts>
    <user>Fernande</user>
    <text>&lt;@Clarine&gt; there is this branch: &lt;https://github.com/sogaiu/specter/tree/clr-support&gt; - is that the sort of thing you are looking for?</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T10:16:52.408500</ts>
    <user>Clarine</user>
    <text>yes</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T10:19:29.409400</ts>
    <user>Fernande</user>
    <text>there is also this: &lt;https://github.com/sogaiu/compliment/tree/clr-support&gt; - in both cases the work is incomplete, fwiw</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T10:20:17.409800</ts>
    <user>Clarine</user>
    <text>yeah, I would rather test with established libraries, but it seems they are rare</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T10:24:53.410200</ts>
    <user>Clarine</user>
    <text>it seems orchestra is compatible with cljr: &lt;https://github.com/jeaye/orchestra/blob/master/src/clj/orchestra/spec/test.cljc&gt;</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T11:27:57.411600</ts>
    <user>Fernande</user>
    <text>&lt;@Clarine&gt; yes, iiuc, &lt;@Tonda&gt; recently added clr support</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T12:17:04.411800</ts>
    <user>Tonda</user>
    <text>Tims did all the work, for use with Arcadia: &lt;https://github.com/jeaye/orchestra/pull/37&gt;</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T13:10:41.412600</ts>
    <user>Fernande</user>
    <text>ah, i see, thanks for the clarification</text>
  </message>
  <message conversation_id="1546">
    <ts>2019-05-20T13:26:25.413300</ts>
    <user>Roy</user>
    <text>&lt;@Thuy&gt; irresponsible seems to take care of tentacles: &lt;https://clojars.org/search?q=irresponsible%2Ftentacles&gt;</text>
  </message>
  <message conversation_id="1546">
    <ts>2019-05-20T13:27:03.414000</ts>
    <user>Roy</user>
    <text>&lt;@Thuy&gt; this is what I ended up using for &lt;https://github.com/exoscale/pullq&gt; and it does the job well</text>
  </message>
  <message conversation_id="1547">
    <ts>2019-05-20T14:04:00.423200</ts>
    <user>Domingo</user>
    <text>Thanks Alex,
I didn’t quite got that. But I could reaally use help.
I have an async component whose entire state is kept inside an atom and each value of the state has a version (i.e. every swap! will increment it)
Upon changing its value the watch will be called which then translates the changes into multiple inserts to multiple tables. The thing is watches invocations aren’t always in order.
So the watch will try to persist sth that depends on a version that itself is not yet written into db</text>
  </message>
  <message conversation_id="1547">
    <ts>2019-05-20T14:04:21.423900</ts>
    <user>Domingo</user>
    <text>I greatly appreciate your help</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T14:53:30.424100</ts>
    <user>Bee</user>
    <text>So, we have three concerns we need to juggle:
- Identity: a place where we hold a successions of states
- State: a single coherent value "of the world"
- Persistence/Durability: Storing things between processes so that there's a long term record of something of value.</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T14:54:24.424300</ts>
    <user>Bee</user>
    <text>An atom takes care of two of these things, State and Identity, and one Atom allows you to work with one Identity with one State at a time.</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T14:56:37.424500</ts>
    <user>Bee</user>
    <text>You want to take this one Atom and map it down onto a SQL database. Most SQL databases give you strong durability through a table semantic. One table is an NxM matrix of identities, each row/column pair is one thing that can get updated of the other columns in that row and the other rows in that table. If your one atom sprawls over multiple tables, you have an LxNxM matrix of identities you want to stuff into one identity.</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T14:58:51.424700</ts>
    <user>Bee</user>
    <text>So your problems are:
- You are trying to map a 3 dimensional LxNxM matrix of identities into one identity, an atom.
- The tool around atoms you're trying to use to do this, add-watch, does not guarntee each successive state will be handed to the watch in order.</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T15:01:49.424900</ts>
    <user>Bee</user>
    <text>If you want ordering guarantees, then you could maybe look at replacing the atom with an agent. With the agent, you can't synchronously write; you dispatch a write and it completes when every other write previously queued before it completes. You can still use add-watch.</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T15:02:47.425100</ts>
    <user>Bee</user>
    <text>But I think you'll still have a lot of problems by trying to hide your DB away behind an atom, or an agent, or any other in memory identity in Clojure, and encourage you to not do that.</text>
  </message>
  <message conversation_id="1545">
    <ts>2019-05-20T15:04:11.425400</ts>
    <user>Liane</user>
    <text>yep makes sense, thanks sean</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-20T17:25:45.427700</ts>
    <user>Liliana</user>
    <text>how does one AOT a clojure var, I'm using isBound on clojure.lang.Var
both `^clojure.lang.Var var` and `(:import [clojure.lang Var]) .... ^Var var)` result in
```
java.lang.NoClassDefFoundError: clojure/lang/Var
```</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-20T17:36:40.428500</ts>
    <user>Rosaline</user>
    <text>how are  you aot compiling and how are you trying to run your aot compiled code</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-20T17:36:56.429000</ts>
    <user>Rosaline</user>
    <text>it sounds like you are not including the clojure runtime with your aot compiled code</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-20T17:43:43.430200</ts>
    <user>Liliana</user>
    <text>I'm using badigeon via tools.deps, yes that's most likely the reason, it's a new api, so wasn't sure if this was the code or the build tool.</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-20T17:44:12.430800</ts>
    <user>Liliana</user>
    <text>well wasn't sure with that var as well, since I'm trying to prevent reflection on mikera's namespace tool</text>
  </message>
  <message conversation_id="1549">
    <ts>2019-05-20T22:44:45.431700</ts>
    <user>Jaimee</user>
    <text>thank you, I found the problem, it came from me not freeing some tensorflow ressources</text>
  </message>
  <message conversation_id="1550">
    <ts>2019-05-20T23:28:44.432900</ts>
    <user>Riva</user>
    <text>I'm trying to get the duration of some mp3 files, anyone around that can point me in the right direction for doing that with clojure?</text>
  </message>
  <message conversation_id="1550">
    <ts>2019-05-20T23:33:04.433300</ts>
    <user>Jasmine</user>
    <text>there's a java sound api in the JDK, googled:  &lt;https://stackoverflow.com/questions/3009908/how-do-i-get-a-sound-files-total-time-in-java&gt;</text>
  </message>
  <message conversation_id="1550">
    <ts>2019-05-20T23:36:31.434300</ts>
    <user>Riva</user>
    <text>Yeah thats what I came across as well. Looks like thats what I'll be going with, thanks</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-21T00:35:26.435000</ts>
    <user>Domingo</user>
    <text>Yep that’s it</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-21T00:35:29.435200</ts>
    <user>Domingo</user>
    <text>Thanks alot, Alex</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-21T00:37:18.437100</ts>
    <user>Domingo</user>
    <text>Am I right to think that by the last comment you mean to push all state into db and not to hold any in identity in memory then?</text>
  </message>
  <message conversation_id="1551">
    <ts>2019-05-21T07:40:32.438900</ts>
    <user>Thuy</user>
    <text>Thanks! I'll take a look.</text>
  </message>
  <message conversation_id="1552">
    <ts>2019-05-21T09:19:16.439600</ts>
    <user>Bee</user>
    <text>You're already holding state in the DB; the only question is what interface you put over it. If you give yourself good tools for reading information out of the DB that you can reason with, then you'll have a program that's easier to reason about as a whole. As a start, you could pull maps, or vectors of maps out of the DB as a discrete read operation, and likewise have discrete writes. And there's a lot of tools already built to support you doing this, e.g. honeysql, hugsql</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-21T11:19:25.443300</ts>
    <user>Elaine</user>
    <text>There is some static clojure parser, that support reader macros, reader-eval and maybe read some "unreadble" things like `#object[...]`</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:20:35.443700</ts>
    <user>Jasmine</user>
    <text>in what way do LispReader.java or tools.reader not satisfy the bill?</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:24:30.444900</ts>
    <user>Elaine</user>
    <text>```
(LispReader/read (new PushbackReader (io/reader (.getBytes "[#=(prn :ok)]"))) {})
;; -- expected
;; =&amp;gt; [#reader-eval (prn :ok)]
;; -- actual
;; :ok ;; printed
;; =&amp;gt; [nil]
```</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:27:11.445300</ts>
    <user>Jasmine</user>
    <text>so you want read-eval to not eval?</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:29:07.446500</ts>
    <user>Elaine</user>
    <text>Yep</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:30:42.446900</ts>
    <user>Jasmine</user>
    <text>well then, no that doesn't exist afaik :)</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:34:17.447200</ts>
    <user>Roslyn</user>
    <text>maybe rewrite-clj can read that?</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-21T11:34:27.447500</ts>
    <user>Roslyn</user>
    <text>it even preserves comments and whitespace</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-21T11:37:11.447800</ts>
    <user>Harris</user>
    <text>depending on how desperate you are ```user=&amp;gt; (require '[clojure.tools.reader :as r])
nil
user=&amp;gt; (defrecord reader-eval [v])
user.reader-eval
user=&amp;gt; (with-redefs-fn {#'r/read-eval (fn [rdr _ opts pending-forms] (reader-eval. (#'r/read* rdr true nil opts pending-forms)))} #(r/read-string "[#=(prn 1)]"))
[#user.reader-eval{:v (prn 1)}]```</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:39:56.448000</ts>
    <user>Elaine</user>
    <text>```
(binding [clojure.tools.reader/*default-data-reader-fn* (fn [tag value]
                                                          {:tag tag :value value})]
  (with-redefs [clojure.tools.reader/read-eval (fn [rdr _ opts pending-forms]
                                                 (#'clojure.tools.reader/read* rdr true nil opts pending-forms))]
    (clojure.tools.reader/read-string
      {:read-cond :preserve}
      "[#=(prn :ok) #?@(:clj [1] :cljs [2]) #object[] ::foo]")))
```
I think that I will use tools.reader</text>
  </message>
  <message conversation_id="1548">
    <ts>2019-05-21T11:40:43.448200</ts>
    <user>Elaine</user>
    <text>Just need to figure out how to "patch" `::foo/bar` to return something like `#namespaced-keyword [foo :bar]`</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:42:46.448400</ts>
    <user>Elaine</user>
    <text>I will look too. But tools.reader seems to be OK for now</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:58:51.448600</ts>
    <user>Jasmine</user>
    <text>the resolver is pluggable, so you can do that</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T11:59:14.448800</ts>
    <user>Jasmine</user>
    <text>well, maybe not that pluggable</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:02:44.449100</ts>
    <user>Harris</user>
    <text>yeah you're out of luck for that unless you redef &lt;https://github.com/clojure/tools.reader/blob/master/src/main/clojure/clojure/tools/reader.clj#L343-L361&gt;</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:03:12.449500</ts>
    <user>Harris</user>
    <text>not quite sure what a good pluggable mechanism for this would be that avoids exposing the entirety of `read-keyword`</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:03:34.449700</ts>
    <user>Harris</user>
    <text>but I'm open to suggestions</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:04:50.449900</ts>
    <user>Jasmine</user>
    <text>may I suggest that you don't do that? :)</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:17:17.452300</ts>
    <user>Harris</user>
    <text>aye</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:20:20.455500</ts>
    <user>Jonelle</user>
    <text>I’m looking for design advice on a feature. I’m writing some code which hits a REST API. The interface to that API exposes some abstractions like “tags”, which are strings. I want to my code to hide those strings behind a mapping, so that the caller of my namespace can pass in data (which I could spec) which will be replaced with the correct string before calling the HTTP endpoint.
For abstracting over the tags, should I be using … vars? I could write a namespace that just defs each string and have the caller pass those as arguments.
Or maybe just normal keywords, instead? Maintaining a mapping of keyword to string for the tags.
Do namespaced keywords make sense here?</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:25:51.456000</ts>
    <user>Rosaline</user>
    <text>if tags is an open set of strings then I would just leave them as strings</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:26:12.456500</ts>
    <user>Rosaline</user>
    <text>strings are a very flexible first class data type</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:29:01.458200</ts>
    <user>Jonelle</user>
    <text>the thing is they’re kind of all over the place — they’re tags on some products. So the punctuation and casing and whitespace is inconsistent. I was hoping to design so the caller doesn’t have to know if the “christmas” tag is “Christmas” or “XMAS” or whatever, they can just say `tags/christmas` or `:christmas`</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:30:07.459300</ts>
    <user>Jonelle</user>
    <text>plus then if the tag itself changes, which is fairly likely to happen (maybe there is an effort to make them more consistent), I can change the value in one spot instead of searching for all occurrences</text>
  </message>
  <message conversation_id="1553">
    <ts>2019-05-21T12:30:48.460000</ts>
    <user>Jonelle</user>
    <text>I think then that means it’s a closed set from my code’s perspective?</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T13:40:01.466800</ts>
    <user>Jeannette</user>
    <text>I have timeseries data that is a collection of events. the data is sparse, that is for certain timeframes there are no events. how am I supposed to build on this? do I let the collection with a lot of _nil_ propagate through the system and put nilchecks everywhere? or should I treat the whole timeseries data as a _function_ of time?</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T13:44:59.467700</ts>
    <user>Dann</user>
    <text>maybe a sorted set, sorted by timestamp? that makes grabbing all items between times X and Y cheap</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T13:45:11.468000</ts>
    <user>Dann</user>
    <text>while avoiding any need for keys with nil values</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T13:51:50.468200</ts>
    <user>Dann</user>
    <text>```(cmd)user=&amp;gt; (sorted-set-by #(compare (:t %1) (:t %2)) {:t 0 :a 12} {:t 1 :a 3} {:t 4 :a 0} {:t 8 :a 1})
#{{:t 0, :a 12} {:t 1, :a 3} {:t 4, :a 0} {:t 8, :a 1}}
(cmd)user=&amp;gt; (def s *1)
#'user/s
(cmd)user=&amp;gt; (subseq s &amp;gt; {:t 0} &amp;lt; {:t 5})
({:t 1, :a 3} {:t 4, :a 0})
```</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T13:53:38.468700</ts>
    <user>Dann</user>
    <text>the first arg to sorted-set-by needs to be a comparator of two events</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T13:54:17.469400</ts>
    <user>Dann</user>
    <text>subseq takes the sorted set, and two comparison functions / compared item pairs (it can also take a single pair)</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T13:55:00.470000</ts>
    <user>Dann</user>
    <text>instead of saying "what's the data at time t" you'd say "what are the known data points between t and t'"</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T13:58:57.470800</ts>
    <user>Jeannette</user>
    <text>hmmm let me see how this works out.</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T14:00:18.471800</ts>
    <user>Dann</user>
    <text>you can do the same with a sorted-map with timestamps as keys</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T14:12:28.472500</ts>
    <user>Rosaline</user>
    <text>whatever the representation, you shouldn't have nils laying around</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T14:14:26.473900</ts>
    <user>Rosaline</user>
    <text>like, in general, if I had a time series of data it would just be a collection of events, and any time period where there were no events, well there just wouldn't be events from that time period in the collection</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T14:15:41.475200</ts>
    <user>Rosaline</user>
    <text>if you need to reify your notion of time periods, then you have a set of time periods, and each event refers to a timeperiod, so a time period with no events would be added to the set of time periods, but have not events referencing it</text>
  </message>
  <message conversation_id="1554">
    <ts>2019-05-21T14:15:50.475500</ts>
    <user>Rosaline</user>
    <text>ini either case no weird nils</text>
  </message>
  <message conversation_id="1555">
    <ts>2019-05-21T14:43:44.475900</ts>
    <user>Elaine</user>
    <text>I think that I found a bug
```
(clojure.tools.reader/read-string 
  {:read-cond :allow}
  "[#?(:cljs #=(prn :ok) :default 1)]")
```</text>
  </message>
  <message conversation_id="1555">
    <ts>2019-05-21T15:01:06.476100</ts>
    <user>Jasmine</user>
    <text>don't you want :read-cond :preserve ?</text>
  </message>
  <message conversation_id="1555">
    <ts>2019-05-21T15:01:44.476500</ts>
    <user>Jasmine</user>
    <text>well, maybe I'm ahead of you - what do you get and what do you want?</text>
  </message>
  <message conversation_id="1555">
    <ts>2019-05-21T15:03:28.476700</ts>
    <user>Elaine</user>
    <text>ATM I'm just playing and understanding how `clojure.tools.reader` works
Then I see that reader-eval occur in all reader-cond branches</text>
  </message>
  <message conversation_id="1556">
    <ts>2019-05-21T19:37:10.477300</ts>
    <user>Kirsten</user>
    <text>To expand about nils, this is just for data, functions returning nil is perfectly fine correct? (As long as it doesn't leak into data)</text>
  </message>
  <message conversation_id="1555">
    <ts>2019-05-21T22:10:56.477800</ts>
    <user>Elaine</user>
    <text>I'm trying antlr now</text>
  </message>
  <message conversation_id="1557">
    <ts>2019-05-22T02:06:32.478500</ts>
    <user>Felix</user>
    <text>[(let [x 20]
  '`~x)

(let [x 20]
  `'~x)

(let [x 20]
  `~x)
]</text>
  </message>
  <message conversation_id="1557">
    <ts>2019-05-22T02:06:41.478800</ts>
    <user>Felix</user>
    <text>results in [x 20 20] ;; I am confused why the first two differ</text>
  </message>
  <message conversation_id="1557">
    <ts>2019-05-22T03:04:10.480900</ts>
    <user>Lilli</user>
    <text>the first one is a literal, and is not evaluated; that's what the single quote is for --- it's like saying (quote `~x)</text>
  </message>
  <message conversation_id="1558">
    <ts>2019-05-22T03:06:32.482700</ts>
    <user>Lilli</user>
    <text>_man ... cant escape this backtick_</text>
  </message>
  <message conversation_id="1557">
    <ts>2019-05-22T05:10:46.484200</ts>
    <user>Felix</user>
    <text>Can you walk me step by step through how

(quote (quasiquote (unquote x))
and
(quasiquote (quote (unquote x))

eval to different things ?</text>
  </message>
  <message conversation_id="1559">
    <ts>2019-05-22T07:28:20.485900</ts>
    <user>Clarine</user>
    <text>has anyone done any benchmarking on moving from regular maps to defrecords? I know they’re theoretically faster, but I’d like to have some numbers and performance characteristics</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:14:49.487200</ts>
    <user>Jasmine</user>
    <text>They’re not necessarily faster. They are faster in certain ways, so it really depends on your use case.</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:16:10.489200</ts>
    <user>Jasmine</user>
    <text>For instance, records don’t do structural sharing. Depending on your mutation pattern, this could mean using a lot more memory and affecting gc. It’s hard to test that in a micro benchmark.</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:17:57.491100</ts>
    <user>Jasmine</user>
    <text>Construction and access is usually faster. Mutation creates a new object, which may be slower, I really don’t know. Probably depends on number of fields.</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:19:33.492700</ts>
    <user>Jasmine</user>
    <text>Well, access of known fields is probably faster. Access of extra fields is probably slower (since it’s really map access plus a field lookup).</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:20:31.493700</ts>
    <user>Jasmine</user>
    <text>If you really want to know how it affects your particular app, you probably just have to try it.</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:55:27.494700</ts>
    <user>Clarine</user>
    <text>yeah, but that takes a lot of work, since you have to refactor all the places where you access the known keys, so I wondered if there’s already some research done on this. until I know more, I’ll probably won’t change anything</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:56:38.495500</ts>
    <user>Min</user>
    <text>I guess using (map-&amp;gt;Foo ...) can be an anti-pattern too if you're micro-optimizing</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:56:55.496100</ts>
    <user>Jasmine</user>
    <text>well like I said, it's entirely dependent on what you're doing, so there can't be any research that applies to /your app/</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:57:16.496500</ts>
    <user>Clarine</user>
    <text>I know, but there can be research that describes certain scenarios and heuristics. if the win is only a few nano-seconds I won’t bother</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:57:36.496700</ts>
    <user>Jasmine</user>
    <text>well, that doesn't exist</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T08:57:50.497200</ts>
    <user>Jasmine</user>
    <text>I've microbenchmarked various things in the past, but that doesn't tell you gc effects etc</text>
  </message>
  <message conversation_id="1560">
    <ts>2019-05-22T09:00:12.498000</ts>
    <user>Clarine</user>
    <text>for example rewrite-clj has a lot of defrecords, but when you replace the `children` of a node, it creates an entirely new object. that hadn’t occurred to me. so the benefit isn’t clear at all here</text>
  </message>
  <message conversation_id="1561">
    <ts>2019-05-22T11:19:08.499500</ts>
    <user>Roy</user>
    <text>Hi!</text>
  </message>
  <message conversation_id="1561">
    <ts>2019-05-22T11:19:55.000400</ts>
    <user>Roy</user>
    <text>While running lein release from Jenkins the vcs push part does not work, git considers the repo to be in a detached HEAD state</text>
  </message>
  <message conversation_id="1562">
    <ts>2019-05-22T11:43:57.001300</ts>
    <user>Roy</user>
    <text>I think I got it</text>
  </message>
  <message conversation_id="1562">
    <ts>2019-05-22T12:10:23.001400</ts>
    <user>Mira</user>
    <text>&lt;@Felix&gt; my understanding is
1. `tilde` is a *syntax*-unquote, `backtick` is a *syntax*-quote, `apostrophe` is short for `quote` special form
2. first check for `~ those cancel each other out (syntax- quote/unquote)
3. ` stops evaluation and namespaces
4. ' stops evaluation</text>
  </message>
  <message conversation_id="1563">
    <ts>2019-05-22T12:17:15.002700</ts>
    <user>Nisha</user>
    <text>When I connect to a closed socket, it throws a connection exception, but with a syntax error. Why does this happen?
```Syntax error (ConnectException) compiling at (/private/var/folders/_m/m545vvvx28j2x50v81pjs3bh00l3wz/T/form-init4854649086981149918.clj:1:125).
Connection refused (Connection refused)```</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T13:12:45.003200</ts>
    <user>Dann</user>
    <text>anything that happens while loading forms (top level of source, top level of repl) will often be reported as a syntax error</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T13:13:25.003400</ts>
    <user>Dann</user>
    <text>eg. `(def foo (/ 1 0))` is a syntax error because the divide by zero happens while compiling foo</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T13:13:56.003600</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (def foo (/ 1 0))
Syntax error (ArithmeticException) compiling at (REPL:1:10).
Divide by zero```</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T13:14:47.003800</ts>
    <user>Dann</user>
    <text>form-int*.clj usually means lein was doing something at the top level of a namespace, you probably shouldn't be doing anything with sockets inside def or the top level of a namespace</text>
  </message>
  <message conversation_id="1565">
    <ts>2019-05-22T14:23:09.005500</ts>
    <user>Larissa</user>
    <text>Hello all, I´m trying to use clj-time to print local time, but it always get UTC time,  I tried use `(f/unparse (f/formatter "yyyyMMddHHmmss") (l/local-now))` and `(f/unparse (f/formatter "yyyyMMddHHmmss") (t/now))`but no success. How does it work?</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T14:48:54.005800</ts>
    <user>Beckie</user>
    <text>Use the new cljc.java-time from Clojure/North:  &lt;https://youtu.be/UFuL-ZDoB2U&gt;</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T14:52:29.006400</ts>
    <user>Beckie</user>
    <text>Can also do `(zdt/now (ZoneId/of "US/Hawaii"))`</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T15:15:27.006900</ts>
    <user>Celestine</user>
    <text>Or `clojure.java-time` that has existed for quite some time ```(! 504)-&amp;gt; clj -Sdeps '{:deps {clojure.java-time {:mvn/version "RELEASE"}}}'
Clojure 1.10.0
user=&amp;gt; (require '[java-time :as jt])
nil
user=&amp;gt; (jt/zoned-date-time)
#object[java.time.ZonedDateTime 0x6d67f5eb "2019-05-22T12:14:41.190-07:00[America/Los_Angeles]"]
user=&amp;gt; (str *1)
"2019-05-22T12:14:41.190-07:00[America/Los_Angeles]"
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T15:16:36.008200</ts>
    <user>Celestine</user>
    <text>Either way, I'd highly recommend using a Java Time based solution, like either of those or just raw Java Time with interop, instead of `clj-time` (and I'm one of the `clj-time` maintainers -- that library, and Joda Time, has been superseded by Java Time).</text>
  </message>
  <message conversation_id="1565">
    <ts>2019-05-22T15:38:21.008900</ts>
    <user>Larissa</user>
    <text>I tried this `(.toString (org.joda.time.DateTime/now) "yyyyMMddHHmmss")` and works, it´s better using java-time?</text>
  </message>
  <message conversation_id="1566">
    <ts>2019-05-22T15:41:43.009400</ts>
    <user>Marlyn</user>
    <text>Yeah Joda is deprecated</text>
  </message>
  <message conversation_id="1566">
    <ts>2019-05-22T15:41:53.009800</ts>
    <user>Marlyn</user>
    <text>If you have the flexibility/choice, switch</text>
  </message>
  <message conversation_id="1566">
    <ts>2019-05-22T15:42:07.010200</ts>
    <user>Marlyn</user>
    <text>If it ain't broke, don't break it :)</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:23:34.010900</ts>
    <user>Celestine</user>
    <text>And just to be clear &lt;@Larissa&gt; you _don't need a Clojure library at all for this_: ```user=&amp;gt; (java.time.ZonedDateTime/now)
#object[java.time.ZonedDateTime 0x2a448449 "2019-05-22T13:23:03.927-07:00[America/Los_Angeles]"]
user=&amp;gt; (str *1)
"2019-05-22T13:23:03.927-07:00[America/Los_Angeles]"
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="1565">
    <ts>2019-05-22T16:24:10.012000</ts>
    <user>Larissa</user>
    <text>&lt;@Celestine&gt; Thanks for information</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:24:18.012200</ts>
    <user>Celestine</user>
    <text>That's baked into Java from Java 8 onward. Which is a big part of why Joda Time is considered deprecated -- Java Time was the "next gen" of Joda Time, designed by the same folks.</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:27:03.012700</ts>
    <user>Celestine</user>
    <text>And here's the formatting in full, if you need it: ```user=&amp;gt; (.format (java.time.ZonedDateTime/now) (java.time.format.DateTimeFormatter/ofPattern "yyyyMMddHHmmss"))
"20190522132639"
user=&amp;gt; 
```</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:27:39.013300</ts>
    <user>Celestine</user>
    <text>(and you can use `:import` to clean that up, rather than typing out the package names each time)</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:27:58.013800</ts>
    <user>Marlyn</user>
    <text>the name `clojure.java-time` for a library is admittedly confusing and misleading</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:28:26.014600</ts>
    <user>Celestine</user>
    <text>Yeah, and the use of a single-segment namespace `java-time` is awful too.</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:28:26.014700</ts>
    <user>Marlyn</user>
    <text>but like &lt;@Celestine&gt; says, everything you need is already at hand</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:28:35.014900</ts>
    <user>Marlyn</user>
    <text>oof, really?</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:28:52.015200</ts>
    <user>Marlyn</user>
    <text>what's with all these clojure projects that do that?</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:29:25.015900</ts>
    <user>Marlyn</user>
    <text>Did you know the Java Module System will *reject* module jars with single segment names?</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:30:08.016900</ts>
    <user>Celestine</user>
    <text>I suspect it's "pushback" against the `everything.core` convention that Leiningen accidentally gave us all those years ago? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:30:13.017000</ts>
    <user>Marlyn</user>
    <text>clj-tuple is an offender I've found</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:30:35.017700</ts>
    <user>Shayla</user>
    <text>what's a "single-segment namespace"?</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:30:51.018100</ts>
    <user>Marlyn</user>
    <text>meh I don't know what it comes from, the namespacing advice/suggestion has been there for 10 years</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:31:02.018500</ts>
    <user>Marlyn</user>
    <text>&lt;@Shayla&gt; when you have a namespace named `foo`</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:31:08.018700</ts>
    <user>Marlyn</user>
    <text>rather than `noah.foo`</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:31:30.019200</ts>
    <user>Celestine</user>
    <text>`date-clj` is another one you can hate on :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:31:57.019800</ts>
    <user>Marlyn</user>
    <text>you don't have to go "full Java" by doing `com.noah.whatever.foo` but namespacing is there for a reason</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:32:17.020600</ts>
    <user>Celestine</user>
    <text>And `date-clj`'s coord is `date-clj/date-clj` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:32:17.020700</ts>
    <user>Marlyn</user>
    <text>lots of projects have `config` as a namespace, yuuuck</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:32:36.021400</ts>
    <user>Jasmine</user>
    <text>what could possibly go wrong</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:32:37.021500</ts>
    <user>Marlyn</user>
    <text>you can't mix that with another project with the same defect</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:32:42.021700</ts>
    <user>Jasmine</user>
    <text>oh that</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:32:47.021900</ts>
    <user>Marlyn</user>
    <text>yeah no biggie</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:33:58.023100</ts>
    <user>Marlyn</user>
    <text>(personal opinion: lots of projects that do this aren't worth using for other reasons.)</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:34:55.023700</ts>
    <user>Marlyn</user>
    <text>but to do `clojure.java-time` is especially bad because it implies endorsement of sorts</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:35:12.024100</ts>
    <user>Marlyn</user>
    <text>same with `clojure.jdbc` or whatever that one is called</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:41:15.024800</ts>
    <user>Celestine</user>
    <text>Yeah, don't get me started on that one...</text>
  </message>
  <message conversation_id="1567">
    <ts>2019-05-22T16:41:53.025600</ts>
    <user>Jasmine</user>
    <text>anti-contrib ?</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:42:11.026000</ts>
    <user>Celestine</user>
    <text>But it's not really surprising people put `clojure` or `clj` or `cljc` or `cljs` into namespaces and/or artifact names given that they have a single concept in mind and it's for Clojure :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1564">
    <ts>2019-05-22T16:47:14.027700</ts>
    <user>Celestine</user>
    <text>I called `next.jdbc` that because it's the "next generation" of `org.clojure/java.jdbc` / `clojure.java.jdbc` but I didn't want to imply "authority" via `clojure` unless it ends up in Contrib and that's looking less and less likely at this point (I have CircleCI and cljdoc in place so most of the benefits of Contrib are accounted for).</text>
  </message>
  <message conversation_id="1567">
    <ts>2019-05-22T18:14:45.032900</ts>
    <user>Beckie</user>
    <text>I agree that thin wrappers have limited value, but you may wish to check out the video for `cljc.java-time`.  It is a _*cross-platform clj/cljs implementation*_ that avoids the `js/Date` problems.  The clj part is auto-generated wrappers of `java.time`, so that is simple &amp;amp; convenient.  The cljs part is a re-implementation of most `java.time` classes, and does not use `js/Date` at all.  See Clojure/North video for details:    &lt;https://youtu.be/UFuL-ZDoB2U&gt;</text>
  </message>
  <message conversation_id="1568">
    <ts>2019-05-22T18:50:55.034300</ts>
    <user>Kelle</user>
    <text>hey, does the clj repl support tab completion for namespace members? i know the lein repl does, but it doesnt seem to work when i use `clj -r`</text>
  </message>
  <message conversation_id="1568">
    <ts>2019-05-22T18:52:32.034900</ts>
    <user>Dann</user>
    <text>no, the clj tab completion is very rudimentary</text>
  </message>
  <message conversation_id="1568">
    <ts>2019-05-22T18:52:47.035300</ts>
    <user>Kelle</user>
    <text>lol hey justin. damn, okay</text>
  </message>
  <message conversation_id="1568">
    <ts>2019-05-22T18:52:59.035500</ts>
    <user>Dann</user>
    <text>'sup</text>
  </message>
  <message conversation_id="1568">
    <ts>2019-05-22T18:53:16.035700</ts>
    <user>Kelle</user>
    <text>chillin :sunglasses:</text>
  </message>
  <message conversation_id="1568">
    <ts>2019-05-22T18:53:32.036100</ts>
    <user>Becki</user>
    <text>you can check out rebel-readline for a minimal terminal style thing &lt;https://github.com/bhauman/rebel-readline&gt;</text>
  </message>
  <message conversation_id="1568">
    <ts>2019-05-22T18:53:48.036700</ts>
    <user>Kelle</user>
    <text>ahh cool, tyty</text>
  </message>
  <message conversation_id="1569">
    <ts>2019-05-22T19:46:20.038500</ts>
    <user>Nadia</user>
    <text>woah cool</text>
  </message>
  <message conversation_id="1570">
    <ts>2019-05-22T21:55:34.039600</ts>
    <user>Jaimee</user>
    <text>~Is it possible to exclude part of my project from being included in the uberjar depending how I call leiningen?~ nevermind</text>
  </message>
  <message conversation_id="1571">
    <ts>2019-05-23T05:57:01.041900</ts>
    <user>Felix</user>
    <text>in Clojure, is it possible to construct looping (but non lazy) values x, y such that `(= x y)` infinite loops?</text>
  </message>
  <message conversation_id="1571">
    <ts>2019-05-23T06:08:44.042200</ts>
    <user>Zita</user>
    <text>Both infinite and non-lazy?</text>
  </message>
  <message conversation_id="1571">
    <ts>2019-05-23T06:17:15.042700</ts>
    <user>Stephen</user>
    <text>`(defn loop-forever [number] (do (println number) (recur (+ 1 number))))` use at your own risk :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1571">
    <ts>2019-05-23T06:19:56.043900</ts>
    <user>Alyce</user>
    <text>following on from that, and just for jest, would it be possible, just thinking, of using clojure reducers, to pretty much cause heat death by having each processor core sum an infinite sequence of numbers...</text>
  </message>
  <message conversation_id="1571">
    <ts>2019-05-23T06:21:09.044000</ts>
    <user>Stephen</user>
    <text>somehow it put full load on 2 cores when used</text>
  </message>
  <message conversation_id="1571">
    <ts>2019-05-23T06:24:53.045300</ts>
    <user>Clarine</user>
    <text>would it make sense for clojure itself to enable some sponsporing options? via Github you can now enable several sponsporing links, e.g. patreon, opencollective. if most of the Clojure users would chip in for a couple of dollars a month, would that make a difference to the development of Clojure?</text>
  </message>
  <message conversation_id="1571">
    <ts>2019-05-23T06:38:44.048000</ts>
    <user>Zita</user>
    <text>“Somehow.” I’m sure with a little work it could tie up more cores.</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:08:43.050100</ts>
    <user>Onita</user>
    <text>hey everyone, got a super weird bug i’m kind of stuck on. i have a collection of 6000 32-byte arrays that i’m sorting with a function `compare-bytes`. `(sort compare-bytes coll)`. when the comparison function hits a particular element, it throws an exception `Comparison method violates its general contract!`</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:09:36.050900</ts>
    <user>Onita</user>
    <text>if i generate a separate collection of 6000 randomized 32-byte arrays, it works fine. even beyond 50,000 elements, no exception is thrown</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:09:53.051400</ts>
    <user>Onita</user>
    <text>it’s only with this specific collection. i can see nothing odd about the element on which the comparison function breaks down</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:10:35.052300</ts>
    <user>Onita</user>
    <text>also, `(= 6000 (count (distinct (map bytes-&amp;gt;hex coll))))`</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:12:54.052700</ts>
    <user>Becki</user>
    <text>can you post your compare-bytes fn?</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:13:29.053300</ts>
    <user>Onita</user>
    <text>oh yeah, should have mentioned: it’s not mine, it’s the one in `ztellman/byte-streams`</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:13:46.053600</ts>
    <user>Onita</user>
    <text>i’ll get a link</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:13:58.053800</ts>
    <user>Onita</user>
    <text>&lt;https://github.com/ztellman/byte-streams/blob/3e0822b58172b8d351b366213eda6090892e32b3/src/byte_streams.clj#L912&gt;</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:16:50.054400</ts>
    <user>Jasmine</user>
    <text>wrap it in your own comparator function that catches and prints the inputs</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:18:55.055200</ts>
    <user>Onita</user>
    <text>i tried this earlier, but the exception comes from the sort and not the comparison, so i’m not sure how to grab the breaking elements</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:19:37.056100</ts>
    <user>Onita</user>
    <text>i guess i could just print all of them. one sec</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:19:43.056300</ts>
    <user>Jasmine</user>
    <text>I believe you get this exception in Java when the transitive property doesn't hold (that is, e1 &amp;gt; e2 and e2 &amp;gt; e3 but NOT e1 &amp;gt; e3), which is presumably something the sort relies on</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:20:08.056700</ts>
    <user>Onita</user>
    <text>yeah, that’s what google seems to say</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:20:41.057900</ts>
    <user>Onita</user>
    <text>must the function only return something ε [-1, 0, 1]? i noticed it can return other values</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:20:47.058100</ts>
    <user>Latonya</user>
    <text>Ooh!  Debugging why a comparator is not a total order.   Looking at it ...</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:20:59.058700</ts>
    <user>Jasmine</user>
    <text>can be other values</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:21:05.059300</ts>
    <user>Latonya</user>
    <text>The JVM can handle negative, 0, positive fine.</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:21:10.059600</ts>
    <user>Onita</user>
    <text>i mean they seem correct (negative when l&amp;lt;r etc)</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:21:24.059900</ts>
    <user>Jasmine</user>
    <text>given that this is a property, it's a perfect candidate for a generative test with test.check</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:22:10.060100</ts>
    <user>Onita</user>
    <text>ha, seems it’s been done &lt;https://github.com/ztellman/byte-streams/blob/b5f50a20c6237ae4e45046f72367ad658090c591/test/byte_streams_simple_check.clj&gt;</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:22:39.060600</ts>
    <user>Jasmine</user>
    <text>that's not a transitivity test</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:22:39.060700</ts>
    <user>Onita</user>
    <text>oh, guess it’s not really checking transitivity</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:22:41.061000</ts>
    <user>Onita</user>
    <text>yeah</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:22:52.061300</ts>
    <user>Jasmine</user>
    <text>but could easily be extended to do so! :)</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:23:34.061700</ts>
    <user>Jasmine</user>
    <text>just gen a / b / c, and verify that if a&amp;gt;b and b &amp;gt;c, that a&amp;gt;c</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:24:06.062000</ts>
    <user>Jasmine</user>
    <text>test.check will spit you back a failing example</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:24:17.062200</ts>
    <user>Onita</user>
    <text>sweet! on it</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T10:32:18.063900</ts>
    <user>Latonya</user>
    <text>Something that seems odd to me in cmp-bufs, which the function you linked calls in most/all cases - it calls a ByteBuffer .getInt method in some cases, or .get.  From my reading of Java API, those mutate a "position" member of a ByteBuffer object.  I don't yet see anything that initializes this position back to the beginning of the ByteBuffer, which would be a problem if the same ByteBuffer was compared more than once.</text>
  </message>
  <message conversation_id="1573">
    <ts>2019-05-23T10:57:41.064100</ts>
    <user>Latonya</user>
    <text>Digging a bit further, I don't think that is it.  cmp-bufs appears to be using the "absolute" variants of the .getInt and .get methods, which might not mutate the position field at all.  It didn't on my first attempt trying it, to see if it did modify the position field.</text>
  </message>
  <message conversation_id="1573">
    <ts>2019-05-23T11:00:45.064300</ts>
    <user>Latonya</user>
    <text>Next guess to investigate -- cmp-bufs has an optimization where for buffers that contain at least 4 bytes, it gets 4 bytes at a time to compare, until it gets to the end, then does 1 byte at a time.  It uses p/- to subtract 2 32-bit integers, which can wrap around when the result is a 32-bit integer, too, and cause a JVM comparator to behave in undesired ways, as described in "Beware using subtract" section of this article: &lt;https://clojure.org/guides/comparators&gt;</text>
  </message>
  <message conversation_id="1574">
    <ts>2019-05-23T11:33:45.064800</ts>
    <user>Onita</user>
    <text>quite the rabbit hole..</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T11:36:26.065100</ts>
    <user>Latonya</user>
    <text>I will let you know if I find anything, or give up on it.  Haven't given up yet.  My current suspicion is that most of the calculations and the return value are longs (64-bit signed integer), but Java comparator functions expect int (32-bit signed integer), and Clojure takes any value returned from a comparator function and coerces it to int via the .intValue method, which can be a different sign than the long value.</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T11:37:26.065300</ts>
    <user>Latonya</user>
    <text>I suspect I can find a 4-byte ByteBuffer content for three byte buffers such that their comparison results are consistent if you look at the sign of the long, but inconsistent if you look at the sign of the coerced values returned by .intValue on those longs.</text>
  </message>
  <message conversation_id="1574">
    <ts>2019-05-23T11:41:26.065500</ts>
    <user>Onita</user>
    <text>thanks a lot! this is definitely out of my league at this point. i ran a test.check for transitivity and it passed, as i kind of expected</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T11:44:47.065700</ts>
    <user>Latonya</user>
    <text>This may be a case where it requires having an "extreme" combination of 4-byte values, e.g. those that when looked at as a 32-bit int, are either at or near the min possible value, max possible value, or near 0.</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T11:45:08.065900</ts>
    <user>Latonya</user>
    <text>unless your random test case generation artificially stresses such values, it could take a very long time to find such corner cases.</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T11:47:05.066100</ts>
    <user>Onita</user>
    <text>would it help if i provided you with the actual collection i was using?</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T11:47:26.066300</ts>
    <user>Onita</user>
    <text>&lt;https://pastebin.com/Hh3EVYXy&gt; (6000 32-byte strings, not delimited)</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T11:49:27.066600</ts>
    <user>Onita</user>
    <text>fails on 5632nd element</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T11:52:16.066800</ts>
    <user>Latonya</user>
    <text>maybe  can email info to me at &lt;mailto:andy.fingerhut@gmail.com|andy.fingerhut@gmail.com&gt; if data is not secret or anything</text>
  </message>
  <message conversation_id="1572">
    <ts>2019-05-23T11:53:18.067000</ts>
    <user>Onita</user>
    <text>it’s in that pastebin link</text>
  </message>
  <message conversation_id="1575">
    <ts>2019-05-23T13:17:02.067300</ts>
    <user>Latonya</user>
    <text>I have a pair of 4-byte ByteBuffer values such that (compare-bytes b1 b2) and (compare-bytes b2 b1) both return a negative value when converted to 32-bit int, so that looks wrong.  I don't think it causes the exception, but shows that the comparator is not good.</text>
  </message>
  <message conversation_id="1575">
    <ts>2019-05-23T13:18:12.067500</ts>
    <user>Latonya</user>
    <text>I have a proposed change to function cmp-bufs in that library that I think should correct the problem.</text>
  </message>
  <message conversation_id="1575">
    <ts>2019-05-23T13:23:33.067700</ts>
    <user>Latonya</user>
    <text>Would you be interested in trying it?  The change is replacing the first of two occurrences of `(p/* sign cmp)` in the file byte_streams.clj in function cmp-bufs with `(p/* sign (if (pos? cmp) 1 -1))`</text>
  </message>
  <message conversation_id="1575">
    <ts>2019-05-23T13:28:14.067900</ts>
    <user>Onita</user>
    <text>yeah, sure!</text>
  </message>
  <message conversation_id="1575">
    <ts>2019-05-23T13:33:43.068100</ts>
    <user>Latonya</user>
    <text>I'd like to find my own smaller sequence than yours that also causes the exception to be thrown, but I may not generate the necessary enthusiasm for that if that change fixes it for you, and just submit a PR with that change, plus some other tests that give wrong results without the change</text>
  </message>
  <message conversation_id="1575">
    <ts>2019-05-23T13:37:50.068300</ts>
    <user>Latonya</user>
    <text>In my limited testing, that change fixes the problem I found with a pair of values where (compare-bytes x y) and (compare-bytes y x) both return a negative value, meaning "x &amp;lt; y" and also "y &amp;lt; x".  I suspect it will also eliminate the exception you saw thrown.</text>
  </message>
  <message conversation_id="1575">
    <ts>2019-05-23T13:53:00.068500</ts>
    <user>Latonya</user>
    <text>Created a PR here, if you want to follow along: &lt;https://github.com/ztellman/byte-streams/pull/39&gt;</text>
  </message>
  <message conversation_id="1575">
    <ts>2019-05-23T13:54:41.070300</ts>
    <user>Latonya</user>
    <text>case anyone is interested in the issue &lt;@Onita&gt; was asking about, but doesn't want all the gory details in the thread, I do not know if I have fixed the bug he found, but I have a proposed fix that definitely improves the result of compare-bytes for a bad case I found where it can return (x &amp;lt; y) and also (y &amp;lt; x) for many pairs of byte streams x and y.   &lt;https://github.com/ztellman/byte-streams/pull/39&gt; is the PR if you want to track it.</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:26:56.071300</ts>
    <user>Madeleine</user>
    <text>I thought datafy could transform a Java object into Clojure data, am I wrong?</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:27:42.072200</ts>
    <user>Madeleine</user>
    <text>Like say I want to extract all values from a Java object into a Clojure datastructure instead like say EDN</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:27:50.072500</ts>
    <user>Madeleine</user>
    <text>And I want that to be deep</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:30:33.072800</ts>
    <user>Rosaline</user>
    <text>yes</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:32:17.074100</ts>
    <user>Rosaline</user>
    <text>in the sense that datafy by default doesn't do anything</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:32:23.074400</ts>
    <user>Madeleine</user>
    <text>So, when I call datafy, it just prints the object memory address</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:32:30.074700</ts>
    <user>Rosaline</user>
    <text>right</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:32:44.074900</ts>
    <user>Rosaline</user>
    <text>```
(defprotocol Datafiable
  :extend-via-metadata true

  (datafy [o] "return a representation of o as data (default identity)"))
```</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:33:20.076000</ts>
    <user>Rosaline</user>
    <text>if you have something you want turned in to data in a particular way, you have to extend the protocol to do it</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:33:39.076600</ts>
    <user>Madeleine</user>
    <text>Oh. Okay I guess I assumed that Java objects had a smarter default then identity</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:33:53.077000</ts>
    <user>Rosaline</user>
    <text>I am also not sure how deep the 'datafy' should go</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:34:26.077700</ts>
    <user>Rosaline</user>
    <text>from my understanding a intended use case is kind of a cycle from datafy to nav and back again</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:35:16.078600</ts>
    <user>Rosaline</user>
    <text>you datafy something, then nav to something it references, then datafy that, etc</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:36:48.079600</ts>
    <user>Madeleine</user>
    <text>Oh right, so each datafy is one level. And to go deeper you have to recursively datafy. Makes sense. So it handles circular graphs</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:38:07.081600</ts>
    <user>Dann</user>
    <text>or things that are method calls returning data under that object, which may be newly generated or may just be a getter for existing contents</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:39:20.082200</ts>
    <user>Celestine</user>
    <text>Think of `datafy`/`nav` as an extended, explicit form of laziness.</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:41:35.082500</ts>
    <user>Madeleine</user>
    <text>I still wished there was a default datafy for objects.</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:41:58.083100</ts>
    <user>Madeleine</user>
    <text>Don't really want to implement my own reflection field parsing</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:43:20.083500</ts>
    <user>Dann</user>
    <text>for things that use normal getter methods, there's `bean`</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:44:05.084200</ts>
    <user>Dann</user>
    <text>and there's definitely other reflection libs for making data out of objects that satisfy a few assumptions, IIRC TimMC made one...</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:46:11.084800</ts>
    <user>Madeleine</user>
    <text>Ya, bean is there, but not deep. It's okay, I'll just use GSON</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:46:26.085200</ts>
    <user>Madeleine</user>
    <text>And then Cheshire to pull that into Clojure</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:47:49.085600</ts>
    <user>Madeleine</user>
    <text>Hum... there seems to be clojure.java.data</text>
  </message>
  <message conversation_id="1576">
    <ts>2019-05-23T14:58:18.086000</ts>
    <user>Jasmine</user>
    <text>yes, java.data works too and makes different choices</text>
  </message>
  <message conversation_id="1577">
    <ts>2019-05-23T15:37:05.087800</ts>
    <user>Johnathon</user>
    <text>does cognitect's aws-api library support signing CloudFront URLs? i inspected the ops of `com.cognitect.aws/cloudfront` but don't see anything related. same with `com.cognitect.aws/signer`.</text>
  </message>
  <message conversation_id="1577">
    <ts>2019-05-23T15:38:02.088000</ts>
    <user>Marlyn</user>
    <text>it does not &lt;@Johnathon&gt;</text>
  </message>
  <message conversation_id="1577">
    <ts>2019-05-23T15:38:25.088500</ts>
    <user>Marlyn</user>
    <text>it may be worth having an add-on library that does presigned URLs for cloudfront + s3</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T15:53:21.089000</ts>
    <user>Jonelle</user>
    <text>out of curiosity, what would you name this function?
```
(defn- foo
  "Take `n` random elements from `coll`, choosing those that satisfy `pred` first."
  [n pred coll]
  (let [[preferred rem] ((juxt filter remove) pred coll)]
    (take n (concat (shuffle preferred) (shuffle rem)))))```

e.g.
`(foo 3 even? [1 2 3 4 5 7 9])  =&amp;gt;  (4 2 1)`</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T15:54:51.089400</ts>
    <user>Latrice</user>
    <text>extract or pluck would be my suggestions</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T15:56:12.089800</ts>
    <user>Jonelle</user>
    <text>I was thinking something like `take-rand-preferring`
or `take-rand-biased` but bias might suggest probability</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T15:57:53.091600</ts>
    <user>Esther</user>
    <text>I like the word draw (as in drawing a hand of cards), but that would probably be more confusing due to double meaning</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T15:58:51.092300</ts>
    <user>Latrice</user>
    <text>naming things is hard. :sweat_smile:</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T15:59:32.093100</ts>
    <user>Latrice</user>
    <text>random-sample</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T16:00:13.094100</ts>
    <user>Jonelle</user>
    <text>`random-sample`  is in clojure.core</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T16:00:30.094800</ts>
    <user>Jonelle</user>
    <text>it’s hard but I find it weirdly enjoyable</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T16:01:13.095800</ts>
    <user>Latrice</user>
    <text>`sample-randomly` :laughing:</text>
  </message>
  <message conversation_id="1579">
    <ts>2019-05-23T16:59:10.096100</ts>
    <user>Johnathon</user>
    <text>thanks again, &lt;@Marlyn&gt;</text>
  </message>
  <message conversation_id="1578">
    <ts>2019-05-23T18:53:31.097100</ts>
    <user>Dann</user>
    <text>I accidentally wrote random-sample on IRC, and someone on the channel was like "I know you are joking but that's actually useful" and it ended up in core</text>
  </message>
  <message conversation_id="1580">
    <ts>2019-05-23T18:53:51.097600</ts>
    <user>Dann</user>
    <text>it's too simple to take much credit for, but I found the whole process amusing</text>
  </message>
  <message conversation_id="1580">
    <ts>2019-05-23T20:25:49.098200</ts>
    <user>Cherri</user>
    <text>newbie question:   in :   "(wrap-cors :access-control-allow-origin [#"&lt;http://localhost:3000/&gt;"])</text>
  </message>
  <message conversation_id="1580">
    <ts>2019-05-23T20:25:55.098500</ts>
    <user>Cherri</user>
    <text>what "#" means?</text>
  </message>
  <message conversation_id="1580">
    <ts>2019-05-23T20:26:50.098700</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (class #"foo")
java.util.regex.Pattern```</text>
  </message>
  <message conversation_id="1580">
    <ts>2019-05-23T20:26:53.098900</ts>
    <user>Dann</user>
    <text>#"" is a data reading literal for regular expressions, and can be used with things like string/replace, re-matches, re-find</text>
  </message>
  <message conversation_id="1580">
    <ts>2019-05-23T20:28:30.100100</ts>
    <user>Dann</user>
    <text>&lt;@Cherri&gt; a guide to various weird sigils in clojure programs &lt;https://clojure.org/guides/weird_characters&gt;</text>
  </message>
  <message conversation_id="1580">
    <ts>2019-05-23T20:28:50.100400</ts>
    <user>Dann</user>
    <text>link directly to the regular expression syntax &lt;https://clojure.org/guides/weird_characters#_regular_expression&gt;</text>
  </message>
  <message conversation_id="1580">
    <ts>2019-05-23T20:29:29.100600</ts>
    <user>Cherri</user>
    <text>cool! thanks a lot!</text>
  </message>
  <message conversation_id="1581">
    <ts>2019-05-24T04:47:37.001800</ts>
    <user>Lorenza</user>
    <text>Is there a way in a test to tell it to just fail ? like for instance if the wrong dispatch function is called</text>
  </message>
  <message conversation_id="1581">
    <ts>2019-05-24T04:48:30.002600</ts>
    <user>Lorenza</user>
    <text>and without resorting to (is (= 1 2)) or some (assert false ...) trickery</text>
  </message>
  <message conversation_id="1581">
    <ts>2019-05-24T04:54:58.003000</ts>
    <user>Lorenza</user>
    <text>hum maybe just throwing an exception would make it i guess</text>
  </message>
  <message conversation_id="1582">
    <ts>2019-05-24T06:57:11.004600</ts>
    <user>Lelia</user>
    <text>Does anybody know who I have to contact if I want to delete my own package in clojars?</text>
  </message>
  <message conversation_id="1582">
    <ts>2019-05-24T07:12:01.005300</ts>
    <user>Isreal</user>
    <text>Hi &lt;@Lelia&gt;, did you see &lt;https://github.com/clojars/clojars-web/wiki/About#how-do-i-delete-a-jar&gt;</text>
  </message>
  <message conversation_id="1582">
    <ts>2019-05-24T08:12:45.005500</ts>
    <user>Lelia</user>
    <text>Thank you. It seems deleting it just put another burden for the admin.</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T08:23:10.007400</ts>
    <user>Maximina</user>
    <text>Is there any `Redis` library that implements delayed task scheduling?

I need to delay a task which is distributed and kept in redis, something like this one: &lt;https://stackoverflow.com/questions/10868552/scalable-delayed-task-execution-with-redis&gt;

I currently listen to `expire` keyspace notifications.. not sure if that is so scalable.</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T08:35:39.007900</ts>
    <user>Ivana</user>
    <text>hmmm funny sounds very similar to what i'm looking at right now (maybe i'm wrong)</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T08:36:38.008900</ts>
    <user>Ivana</user>
    <text>you can put timestamps in redis keys so you are independent of Redis time constructs? (need to put the expiry on keys big enough so it doesn't interrupt with your own logic)</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T08:37:28.009400</ts>
    <user>Ivana</user>
    <text>are you working in a particular domain?</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T08:58:34.011800</ts>
    <user>Maximina</user>
    <text>Not really, its just that I want to do it in a way that scales :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T09:01:03.012000</ts>
    <user>Ivana</user>
    <text>then not use Redis :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T09:01:04.012200</ts>
    <user>Ivana</user>
    <text>but &lt;https://www.aerospike.com/docs/guide/llist.html&gt;</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T09:01:21.012600</ts>
    <user>Ivana</user>
    <text>or maybe the wrong datastructure one sec</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T09:01:56.012800</ts>
    <user>Ivana</user>
    <text>&lt;https://discuss.aerospike.com/t/how-would-one-implement-a-sorted-list-like-redis/1046/2&gt;</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T09:02:19.013500</ts>
    <user>Ivana</user>
    <text>Anyway hard to say if that will solve your issue, and if Redis is the bottleneck at all</text>
  </message>
  <message conversation_id="1583">
    <ts>2019-05-24T09:11:36.015700</ts>
    <user>Shayla</user>
    <text>in the card game I'm working on, I have a "card" object, which is just a map with certain properties. To make interacting with the objects easier, I have a bunch of "accessor"/getter functions: `corp?` returns true if the card is a Corp card, `installed?` returns true if the card is currently installed, etc. These functions are all solely reliant on the card map passed in</text>
  </message>
  <message conversation_id="1584">
    <ts>2019-05-24T09:13:21.017800</ts>
    <user>Shayla</user>
    <text>Is there any "best practice" with organizing groups of functions like this? Seeing as I'm not creating multiple types, I don't see a benefit necessarily of using a protocol. if this was in java, these would all be normal "attributes": `public isCorp()` etc</text>
  </message>
  <message conversation_id="1584">
    <ts>2019-05-24T09:14:24.018900</ts>
    <user>Shayla</user>
    <text>I've moved them into a `card-properties` namespace and `[card-properties :refer :all]` them, but I feel like I'm falling into a trap or a code smell, lol</text>
  </message>
  <message conversation_id="1585">
    <ts>2019-05-24T09:51:31.019400</ts>
    <user>Asha</user>
    <text>Collecting them in a namespace seems reasonable to me</text>
  </message>
  <message conversation_id="1586">
    <ts>2019-05-24T10:58:04.020400</ts>
    <user>Zona</user>
    <text>for the basic ones you could do away with the `fn` and replace with keyword `(:installed? card)`</text>
  </message>
  <message conversation_id="1586">
    <ts>2019-05-24T10:59:55.020600</ts>
    <user>Zona</user>
    <text>given `(def card {:installed? true})`</text>
  </message>
  <message conversation_id="1586">
    <ts>2019-05-24T11:04:19.020800</ts>
    <user>Shayla</user>
    <text>Sadly, a lot are more like `(= "Hardware" (:type card))`, which is a little more annoying and messy to write inline. And then of course, because it's a complex game, others are `(or (= "Identity" (:type card)) (= "Fake-Identity" (:type card)))`, which is _really_ annoying to write multiple times</text>
  </message>
  <message conversation_id="1586">
    <ts>2019-05-24T12:15:52.021100</ts>
    <user>Zona</user>
    <text>I feel like I've heard &lt;@Cher&gt; talk about this kind of decision on his podcast, &lt;http://Lispcast.com|Lispcast.com&gt;. I'm sure he's got way more insight than me :wink:</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T14:59:46.023800</ts>
    <user>Brent</user>
    <text>Can `[pre|post]walk` be used to extract selected leaves from a nested data structure? How? I want to descend only into some submaps and extract particular key from the leaf maps.</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:00:42.024200</ts>
    <user>Clarine</user>
    <text>&lt;@Brent&gt; do you want to prune the tree or get a series of values out of it?</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:02:43.024400</ts>
    <user>Clarine</user>
    <text>```
(w/postwalk (fn [m] (if (map? m) (select-keys m [:a :b]) m)) {:a 1 :b 2 :c {:a 1 :b 2 :c 3}})
{:a 1, :b 2}
```</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:03:22.024600</ts>
    <user>Shayla</user>
    <text>thanks for the recommendation! i'll check it out</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:04:02.025300</ts>
    <user>Dann</user>
    <text>&lt;@Brent&gt; I've used `tree-seq` plus a filter to select leaves for this sort of thing</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:04:30.025800</ts>
    <user>Brent</user>
    <text>I want to get out a seq of (leaf) values but exclude some branches</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:05:43.026400</ts>
    <user>Dann</user>
    <text>how far above the leaves are the branch points you know you won't want?</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:05:57.026700</ts>
    <user>Clarine</user>
    <text>something like:
```
(remove map? (tree-seq map? #(vals (select-keys % [:a :b])) {:a 1 :b 2 :c {:a 1 :b 2 :c 3}}))
(1 2)
```
?</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:06:48.027100</ts>
    <user>Clarine</user>
    <text>taking a look at clojuredocs for those functions might give you an idea</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:07:05.027200</ts>
    <user>Brent</user>
    <text>doesn't tree-seq return all nodes instead of only leaves?</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:08:11.027400</ts>
    <user>Brent</user>
    <text>± 1 and 2</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:09:20.028500</ts>
    <user>Brent</user>
    <text>Thanks, I think tree-seq doesn't do what I need but I can look at its implementation and copy that for my use case. (The thing is I have a nested data structure consisting of maps _and_ seqs)</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:11:30.029000</ts>
    <user>Dann</user>
    <text>usually with tree-seq my predicate is `coll?` which catches maps and seqs</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:12:05.029700</ts>
    <user>Dann</user>
    <text>but instead of `coll?` you can use a predicate that both checks for `coll?` and removes branches you don't want</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:12:58.030800</ts>
    <user>Dann</user>
    <text>`(fn [node] (and (coll? node) (not (ignored? node))))` - where ignored? checks for k/v pars with excluded keys, or whatever</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:17:48.031000</ts>
    <user>Dann</user>
    <text>right, but you can take the final sequence of nodes and return only leaves
in your `branch?` and `children` functions, you can prune nodes whose children are not wanted</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:19:56.031300</ts>
    <user>Dann</user>
    <text>in fact the function to return only the leaves should just be `(filter (complement branch?) ...)` where branch? is the same function you passed to tree-seq initially</text>
  </message>
  <message conversation_id="1588">
    <ts>2019-05-24T15:30:35.031500</ts>
    <user>Dann</user>
    <text>```(cmd)user=&amp;gt; (load-file "/tmp/foo.clj")
(1 4 6 7)
(ins)user=&amp;gt; (print (slurp "/tmp/foo.clj"))
(def input
  {:a 1
   :b {:a 2
       :b 3}
   :c {:a 4
       :b 5
       :c 6}
   :d {:a 7
       :b {}}
   :e {:c 8}})

(def unused-keys
  #{:b :e})

(def branch? coll?)

(def children
  #(map (fn [node]
             (if-not (map-entry? node)
               node
               (if (contains? unused-keys (key node))
                 []
                 [(val node)])))
           %))

(remove branch?
        (tree-seq branch?
                  children
                  input))
nil
```</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:32:15.032700</ts>
    <user>Dann</user>
    <text>that declines to descend into keys and only returns vals out of key/value pairs, and removes all keys in a blacklist instead of descending deeper when found</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:34:53.033200</ts>
    <user>Beckie</user>
    <text>&lt;@Brent&gt; You can easily process tree-like data structures with the Tupelo Forest library.  See the Lightning Talk:  &lt;https://youtu.be/RtavTnRr0oM&gt;</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:35:11.033600</ts>
    <user>Beckie</user>
    <text>the README:   &lt;https://github.com/cloojure/tupelo/blob/master/docs/forest.adoc&gt;</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:35:36.033900</ts>
    <user>Beckie</user>
    <text>and many live examples:   &lt;https://github.com/cloojure/tupelo/blob/master/test/clj/tst/tupelo/forest_examples.clj&gt;</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:36:04.034200</ts>
    <user>Beckie</user>
    <text>and the API docs:   &lt;https://cloojure.github.io/doc/tupelo/tupelo.forest.html&gt;</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T15:38:37.034600</ts>
    <user>Meagan</user>
    <text>are there any libraries for doing bidirectional transformations of Clojure data?</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T16:07:24.034900</ts>
    <user>Brent</user>
    <text>thanks!</text>
  </message>
  <message conversation_id="1587">
    <ts>2019-05-24T16:10:15.035100</ts>
    <user>Brent</user>
    <text>thanks a lot!</text>
  </message>
  <message conversation_id="1589">
    <ts>2019-05-24T16:14:18.035600</ts>
    <user>Jenny</user>
    <text>are there any other clojure/clojurescript streamers?  i know of &lt;https://www.twitch.tv/jplur_&gt;</text>
  </message>
  <message conversation_id="1589">
    <ts>2019-05-24T16:23:12.037000</ts>
    <user>Celestine</user>
    <text>There's a &lt;#C3M107FGW|livestream&gt; channel where folks used to talk about that but it's been inactive for a long time :neutral_face:</text>
  </message>
  <message conversation_id="1589">
    <ts>2019-05-24T16:25:25.037800</ts>
    <user>Celestine</user>
    <text>I think it would be fun if folks got that back up and running &lt;@Jenny&gt;... it's always very interesting to see different people's workflows!</text>
  </message>
  <message conversation_id="1589">
    <ts>2019-05-24T16:25:58.038300</ts>
    <user>Jenny</user>
    <text>yeah, that’s mostly what i’m interested in. the details of workflows that don’t always get documented on github pages, etc.</text>
  </message>
  <message conversation_id="1589">
    <ts>2019-05-24T16:29:42.039300</ts>
    <user>Celestine</user>
    <text>I can't remember what I tried to use to stream with back then... Not Twitch, for sure. But mostly I work on a proprietary code base so streaming isn't something I can really do much of the time.</text>
  </message>
  <message conversation_id="1589">
    <ts>2019-05-24T16:30:07.039900</ts>
    <user>Celestine</user>
    <text>I did do a short YouTube video recently of my workflow with REBL (and Atom/Chlorine).</text>
  </message>
  <message conversation_id="1589">
    <ts>2019-05-24T16:30:23.040300</ts>
    <user>Celestine</user>
    <text>(because folks kept asking about "how to use" REBL)</text>
  </message>
  <message conversation_id="1589">
    <ts>2019-05-24T16:51:58.041400</ts>
    <user>Becki</user>
    <text>someone livestreamed (and recorded) their advent of code solutions. I think &lt;@Phebe&gt; and &lt;@Simonne&gt;?</text>
  </message>
  <message conversation_id="1590">
    <ts>2019-05-24T17:49:01.041500</ts>
    <user>Arlen</user>
    <text>What do you mean by "bidirectional"?</text>
  </message>
  <message conversation_id="1590">
    <ts>2019-05-24T17:55:59.041700</ts>
    <user>Meagan</user>
    <text>precisely &lt;https://en.wikipedia.org/wiki/Bidirectional_transformation&gt;</text>
  </message>
  <message conversation_id="1590">
    <ts>2019-05-24T17:57:50.042100</ts>
    <user>Meagan</user>
    <text>ex. have a transformation `t` that takes some clojure data `a` and transforms it into `b`, and can also apply the transformation to take `b` into `a`.</text>
  </message>
  <message conversation_id="1590">
    <ts>2019-05-24T17:59:37.042300</ts>
    <user>Meagan</user>
    <text>one of the things that seems to come up in literature is taking an updated `b` and transforming it into an updated `a` as well</text>
  </message>
  <message conversation_id="1590">
    <ts>2019-05-24T17:59:50.042600</ts>
    <user>Meagan</user>
    <text>does that make sense? :grimacing:</text>
  </message>
  <message conversation_id="1591">
    <ts>2019-05-24T21:03:47.043100</ts>
    <user>Simonne</user>
    <text>yep! &lt;https://potetm.com/videos.html&gt;</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:17:10.043800</ts>
    <user>Rosalba</user>
    <text>So here's a surprising thing I just found: (java.net.URI. "&lt;https://google.com&gt;") actually fetches the page</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:17:46.044200</ts>
    <user>Rosalba</user>
    <text>The javadoc didn't mention that, as far as I can tell.</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:18:36.044800</ts>
    <user>Rosalba</user>
    <text>Also, it seems to throw up on localhost uris. Is there a good way to validate uris without fetching?</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:34:10.045400</ts>
    <user>Simonne</user>
    <text>&lt;@Rosalba&gt; Why do you think `(URI. "&lt;https://google.com&gt;")` makes a network call?</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:35:02.045900</ts>
    <user>Rosalba</user>
    <text>because it dumped the response in my repl</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:35:51.046100</ts>
    <user>Rosalba</user>
    <text>does it not do that for you?</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:36:14.046300</ts>
    <user>Simonne</user>
    <text>for me:

```
(java.net.URI. "&lt;https://www.google.com&gt;")
=&amp;gt; #object[java.net.URI 0x7abeb19d "&lt;https://www.google.com&gt;"]
```</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:37:28.046700</ts>
    <user>Becki</user>
    <text>This is a bad cider feature unfortunately</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:37:52.047400</ts>
    <user>Becki</user>
    <text>It can be disabled and should be by default. This is the feature to show images in the repl. </text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:38:59.047800</ts>
    <user>Simonne</user>
    <text>&lt;https://media.tenor.com/images/8170135a5927612c8f3ee75c4c1daa92/tenor.gif&gt;</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:39:19.048100</ts>
    <user>Rosalba</user>
    <text>ah, I see</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:39:22.048300</ts>
    <user>Rosalba</user>
    <text>thanks :smile:</text>
  </message>
  <message conversation_id="1592">
    <ts>2019-05-24T22:39:32.048600</ts>
    <user>Rosalba</user>
    <text>Do you know what the feature is called, that I may disable it?</text>
  </message>
  <message conversation_id="1593">
    <ts>2019-05-24T23:33:09.049400</ts>
    <user>Becki</user>
    <text>i think you want `(setq cider-repl-use-content-types nil)`</text>
  </message>
  <message conversation_id="1593">
    <ts>2019-05-24T23:37:01.049600</ts>
    <user>Rosalba</user>
    <text>thank you</text>
  </message>
  <message conversation_id="1593">
    <ts>2019-05-25T01:31:25.050700</ts>
    <user>Alison</user>
    <text>I was surprised to find that form metadata doesn’t contain `:file` by default for quoted forms, only `:line` and `:column` - I thought it did.</text>
  </message>
  <message conversation_id="1594">
    <ts>2019-05-25T01:32:16.051600</ts>
    <user>Alison</user>
    <text>Reading the source, it looks like this is because `:file` metadata is added by the compiler, not the reader - is that correct? Is there any trickery I can use to get the file from quoted forms?</text>
  </message>
  <message conversation_id="1593">
    <ts>2019-05-25T01:33:54.052700</ts>
    <user>Alison</user>
    <text>Actually, no, it looks like `:file` is only added for vars in the compiler. I guess this is because the reader is reading from Reader, not necessarily a file.</text>
  </message>
  <message conversation_id="1593">
    <ts>2019-05-25T01:47:50.052800</ts>
    <user>Arlen</user>
    <text>Sure. I don't know of any library that does that, except of course for very narrow cases like serialization.</text>
  </message>
  <message conversation_id="1593">
    <ts>2019-05-25T01:48:24.053000</ts>
    <user>Arlen</user>
    <text>Or, you know, inc and dec :p</text>
  </message>
  <message conversation_id="1593">
    <ts>2019-05-25T03:33:02.053500</ts>
    <user>Merna</user>
    <text>&lt;https://github.com/gfredericks/bijector&gt;</text>
  </message>
  <message conversation_id="1593">
    <ts>2019-05-25T08:16:02.054200</ts>
    <user>Jasmine</user>
    <text>Sounds right</text>
  </message>
  <message conversation_id="1595">
    <ts>2019-05-25T09:11:02.055000</ts>
    <user>Hilaria</user>
    <text>[clojure deps question] in an Ubuntu env, I can run `git clone git@github.com:my-workspace/my-project` and it runs fine using the SSH keys, but when this project is added as dependency for other project like `my-project {:git/url "git@github.com:my-workspace/my-project" :sha "0123..."}`  I get an error:
```Cloning: git@github.com:my-workspace/my-project
Error building classpath. connector is not available: 
com.jcraft.jsch.agentproxy.AgentProxyException: connector is not available```
Am I missing a configuration somewhere? :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1595">
    <ts>2019-05-25T13:02:30.056400</ts>
    <user>Erna</user>
    <text>&lt;@Hilaria&gt; Have you looked at the `Git configuration` section of &lt;https://clojure.org/reference/deps_and_cli&gt;   Perhaps that can help.</text>
  </message>
  <message conversation_id="1595">
    <ts>2019-05-25T13:03:29.057200</ts>
    <user>Hilaria</user>
    <text>thanks &lt;@Erna&gt;! I just fixed it. it was an issue with ssh-agent on that machine.</text>
  </message>
  <message conversation_id="1595">
    <ts>2019-05-25T13:11:24.057700</ts>
    <user>Erna</user>
    <text>Great. Glad it is resolved.</text>
  </message>
  <message conversation_id="1596">
    <ts>2019-05-25T14:43:12.059200</ts>
    <user>Alethea</user>
    <text>hey everyone, is there an easy way to load edn files with env vars attached to specific lein tasks?

`lein test` would load `test-config.edn` while `lein run` would load `dev-config.edn`</text>
  </message>
  <message conversation_id="1596">
    <ts>2019-05-25T15:06:14.061700</ts>
    <user>Mariela</user>
    <text>sounds like an "xy" problem tbh... are you using Component/Integrant in the first place? They make it straightforward to have per-env systems, with different configs</text>
  </message>
  <message conversation_id="1597">
    <ts>2019-05-25T16:00:37.063800</ts>
    <user>Sade</user>
    <text>Using reitit, I have an html file in my resources/public that I wish to serve as my root "/". With the following code it serves it, but does so with a `302 redirect` to `/index.html`. How can I just straight up serve without the redirect? Why is it redirecting at all?

`(response/file-response (str (io/resource "public/index.html")))`</text>
  </message>
  <message conversation_id="1597">
    <ts>2019-05-25T16:01:19.064200</ts>
    <user>Sade</user>
    <text>^ (response is ring.util.response)</text>
  </message>
  <message conversation_id="1597">
    <ts>2019-05-25T16:02:45.064500</ts>
    <user>Kaylene</user>
    <text>why not using resource-response ?</text>
  </message>
  <message conversation_id="1597">
    <ts>2019-05-25T16:03:12.064800</ts>
    <user>Sade</user>
    <text>Hmmmm.... I'll try that; I didn't know about it</text>
  </message>
  <message conversation_id="1597">
    <ts>2019-05-25T16:08:06.065200</ts>
    <user>Sade</user>
    <text>Thanks; that does the trick! Still not sure why the file-response was resulting in a redirect, though</text>
  </message>
  <message conversation_id="1597">
    <ts>2019-05-25T16:10:31.065400</ts>
    <user>Sade</user>
    <text>Oops; actually, doesn't work, because it tries to download as an octet stream when I hit it with a browser</text>
  </message>
  <message conversation_id="1597">
    <ts>2019-05-25T16:18:52.065600</ts>
    <user>Kaylene</user>
    <text>you could read the file as a string
and respond with it in the body and content type set to text/html</text>
  </message>
  <message conversation_id="1597">
    <ts>2019-05-25T16:28:44.065800</ts>
    <user>Sade</user>
    <text>Yeah, I figured that would be a last resort</text>
  </message>
  <message conversation_id="1598">
    <ts>2019-05-25T17:39:17.066800</ts>
    <user>Alethea</user>
    <text>Ill take a llok into component thx :smiley:</text>
  </message>
  <message conversation_id="1599">
    <ts>2019-05-26T07:40:26.068400</ts>
    <user>Ashely</user>
    <text>Can the clojure compiler detect side effects in functions? Can it decide at compile-time whether a function is pure?</text>
  </message>
  <message conversation_id="1597">
    <ts>2019-05-26T07:45:58.068600</ts>
    <user>Herman</user>
    <text>&lt;https://github.com/gnl/ghostwheel&gt;

apparently, yes.</text>
  </message>
  <message conversation_id="1598">
    <ts>2019-05-26T08:15:24.069800</ts>
    <user>Aubrey</user>
    <text>I wouldn’t rely on that to be exhaustive though! There’s nothing in the language to make such a guarantee.</text>
  </message>
  <message conversation_id="1599">
    <ts>2019-05-26T08:18:14.070000</ts>
    <user>Ashely</user>
    <text>I’m interested in whether the compiler could automatically memoize all pure functions. Could effect massive speed improvements, minimal amounts of memory increase, with very little risk</text>
  </message>
  <message conversation_id="1598">
    <ts>2019-05-26T08:39:48.070200</ts>
    <user>Stephen</user>
    <text>I don't think it's minimal. Like any function that does something on a data structure using an uuid is unlikely to be called twice with the same.</text>
  </message>
  <message conversation_id="1598">
    <ts>2019-05-26T09:44:42.070700</ts>
    <user>Milford</user>
    <text>An interesting aside on the ClojureScript side, once Google Closure knows a function is pure, it does certain optimizations with it. Here is one case where it is incorrect: &lt;https://github.com/google/closure-compiler/issues/3079&gt;</text>
  </message>
  <message conversation_id="1600">
    <ts>2019-05-26T09:50:26.071100</ts>
    <user>Milford</user>
    <text>I suppose they have a notion of "no side effects" in this case, which is different than "pure" via their terminology &lt;https://github.com/google/closure-compiler/wiki/Annotating-JavaScript-for-the-Closure-Compiler#nosideeffects-modifies-thisarguments&gt;</text>
  </message>
  <message conversation_id="1601">
    <ts>2019-05-26T11:34:46.071300</ts>
    <user>Herman</user>
    <text>Yeah my initial impression was that you could probably do a whole dissertation on this topic and still only come up with a method that only works on a restricted scope of language features</text>
  </message>
  <message conversation_id="1600">
    <ts>2019-05-26T12:19:47.073800</ts>
    <user>Meagan</user>
    <text>Clojure as it’s written can not. But a runtime certainly could detect at runtime and do certain optimizations. Or if code was written to be explicit about its effects</text>
  </message>
  <message conversation_id="1602">
    <ts>2019-05-26T12:38:59.075600</ts>
    <user>Enola</user>
    <text>It has probably been discussed numerous times but I can't find any answer.
I have these macros:
```
(defmacro format-query [q]
  `(cond-&amp;gt; ~q
     (map? ~q) (sql/format :quoting :ansi)))

(defmacro query [c q params]
  `(jdbc/query ~c ~(format-query q) ~params))
```
The issue is that `(query 1 2 3)` expands to `(jdbc/query 1 2 3)` whereas I want it to expand to `(jdbc/query 1 (cond-&amp;gt; 2 ...) 3)`. Is it possible to do so?</text>
  </message>
  <message conversation_id="1602">
    <ts>2019-05-26T12:50:56.076500</ts>
    <user>Meagan</user>
    <text>based on your code, i’m not sure why it would expand to `(jdbc/query 1 2 3)`</text>
  </message>
  <message conversation_id="1602">
    <ts>2019-05-26T12:51:40.077300</ts>
    <user>Meagan</user>
    <text>but I think in this case you can change `format-query` to be a function, rather than a macro</text>
  </message>
  <message conversation_id="1602">
    <ts>2019-05-26T12:51:46.077600</ts>
    <user>Meagan</user>
    <text>and that might be what you want?</text>
  </message>
  <message conversation_id="1602">
    <ts>2019-05-26T12:53:29.077900</ts>
    <user>Roslyn</user>
    <text>should be
```
(defn format-query [q]
  `(cond-&amp;gt; ~q
     (map? ~q) (sql/format :quoting :ansi)))

(defmacro query [c q params]
  `(jdbc/query ~c ~(format-query q) ~params))
```</text>
  </message>
  <message conversation_id="1602">
    <ts>2019-05-26T12:54:16.079000</ts>
    <user>Roslyn</user>
    <text>first macro should be a function &lt;@Enola&gt;</text>
  </message>
  <message conversation_id="1602">
    <ts>2019-05-26T12:54:48.079500</ts>
    <user>Enola</user>
    <text>Sure. But now I can't use `format-query` anywhere except for other macros. I guess a solution in this case would be to extract the common part to another macro.
That's what I'll probably do. Thanks!</text>
  </message>
  <message conversation_id="1602">
    <ts>2019-05-26T12:56:44.081600</ts>
    <user>Enola</user>
    <text>Can you help me understand why it's expanded the way it is with two `defmacro`?
The way I read it: `~` in `~(format-query q)` unquotes this part, so that the macro is expanded here. It expands in a form `(cond-&amp;gt; ...)`. The thing I cannot understand is why this form is being computed during macro expansion.</text>
  </message>
  <message conversation_id="1602">
    <ts>2019-05-26T13:08:30.081700</ts>
    <user>Ashely</user>
    <text>Okay, all interesting stuff - thanks everyone!</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T14:48:17.082900</ts>
    <user>Meagan</user>
    <text>It was being computed during macro expansion because you used the macro in a macro</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T14:50:40.084300</ts>
    <user>Meagan</user>
    <text>So the `format-query` macro was being executed, expanded and then the `query` macro continued evaluating and expanding</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T14:51:08.085000</ts>
    <user>Meagan</user>
    <text>I have a need for a sparse vector. Any ideas how I might represent that?</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T14:54:24.087100</ts>
    <user>Meagan</user>
    <text>It's a semantic thing rather than a perf thing. I need the inverse of `nth`: construct a vector with a value at position `n`.</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T14:55:02.087800</ts>
    <user>Meagan</user>
    <text>And then I also need a way of merging the sparse vectors...</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T14:55:10.088000</ts>
    <user>Meagan</user>
    <text>Bleh</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T14:56:22.088200</ts>
    <user>Elyse</user>
    <text>What other operations do you need to do?</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T15:05:26.088500</ts>
    <user>Meagan</user>
    <text>Pretty much just those</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T15:07:54.092100</ts>
    <user>Meagan</user>
    <text>What I'm trying to do is, for example start with a source like `[1 2]` and project it using `second`. So it would produce `2`.

Then, I could change the projection to `3` and use that to update the source to `[1 3]`</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T15:10:12.095000</ts>
    <user>Enola</user>
    <text>"Project it" and "change the projection" sound a lot like what Specter does.</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T15:11:16.096000</ts>
    <user>Meagan</user>
    <text>I'm basically implementing a lens. I am trying to figure out how to implement it myself rather than use a lib like specter :sweat_smile:</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T15:15:42.097000</ts>
    <user>Elyse</user>
    <text>The operations you mention above sound like they could be easily done on a hash map instead of a vector with regular old `assoc` and `merge`. It's not entirely clear to me how those things fit in to your lens implementation.</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T15:18:01.097600</ts>
    <user>Elyse</user>
    <text>I suppose you could hold onto the novelty in a hash map and do the merge by `assoc`ing the novelty from the hash map into the vector.</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T15:43:06.098500</ts>
    <user>Meagan</user>
    <text>Right, the issue is the source to the data is a vector and that needs to be preserved</text>
  </message>
  <message conversation_id="1604">
    <ts>2019-05-26T17:29:22.100300</ts>
    <user>Deangelo</user>
    <text>hi everyone. is this an overkill?
```(some? (some-&amp;gt; project :images :thumbnail))```</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T17:29:29.100500</ts>
    <user>Deangelo</user>
    <text>to check for non-nil value</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T17:29:57.100700</ts>
    <user>Deangelo</user>
    <text>looks a bit weird :smile:</text>
  </message>
  <message conversation_id="1604">
    <ts>2019-05-26T17:34:28.101800</ts>
    <user>Roslyn</user>
    <text>why not just `(-&amp;gt; project :images :thumbnail)`? thumbnail is probably not a boolean, so just having a value where you do check for nil is ok</text>
  </message>
  <message conversation_id="1604">
    <ts>2019-05-26T17:35:08.102600</ts>
    <user>Roslyn</user>
    <text>or `(-&amp;gt; project :images :thumbnail some?)` if are you really into booleans :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1604">
    <ts>2019-05-26T17:35:52.103400</ts>
    <user>Sheron</user>
    <text>btw. if you want to get your clojure hat on on the raspberry pi 3 b+ .... installing zulu jdk &amp;amp; lein works surprisingly easy</text>
  </message>
  <message conversation_id="1604">
    <ts>2019-05-26T17:37:06.104700</ts>
    <user>Sheron</user>
    <text>but trying to use openjdk from adoptopenjdk won't work , something with ssl connections and elliptic ciphers is broken there :disappointed: ... so zulu instead and life is good</text>
  </message>
  <message conversation_id="1603">
    <ts>2019-05-26T17:42:12.105300</ts>
    <user>Deangelo</user>
    <text>&lt;@Roslyn&gt; I thought it would throw an exception if I did it without `some-&amp;gt;`</text>
  </message>
  <message conversation_id="1604">
    <ts>2019-05-26T17:44:32.106200</ts>
    <user>Roslyn</user>
    <text>keywords, when called as functions on nils just return nil `(:a nil) =&amp;gt; nil`</text>
  </message>
  <message conversation_id="1604">
    <ts>2019-05-26T17:45:13.106500</ts>
    <user>Deangelo</user>
    <text>gotcha, thank you</text>
  </message>
  <message conversation_id="1605">
    <ts>2019-05-26T22:15:43.106900</ts>
    <user>Onita</user>
    <text>looks like this got merged in, great! should be really easy to check if this worked, but i’m not sure how to tell if the jar has been updated. the version number is the same, so i assume not yet</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:21:37.108000</ts>
    <user>Nisha</user>
    <text>Is there a way to fan out a seq, turning a seq into multiple seqs?</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:23:11.109700</ts>
    <user>Nisha</user>
    <text>It seems straight to me how to fanout a channel into multiple ones, but I’m not using async, so I wonder if there’s a way to achieve the same thing for seq.</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:24:48.111500</ts>
    <user>Nisha</user>
    <text>My real use case is that, I’m parsing a stream of bytes from a socket with a telnet-like protocol. I want to separate the telnet command bytes from the text bytes.</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:27:02.113700</ts>
    <user>Madeleine</user>
    <text>You could use juxt maybe? Or partition?</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:28:12.114500</ts>
    <user>Nisha</user>
    <text>Currently what I’m doing is turning the bytes into a seq of packets, so something like
```b b b b ... b -&amp;gt; {:type :telent :bytes [1 2 3 4]}, {:type :text :bytes [1 2 3 4]}, ...
```
Then I need to parse all the `:text` to parse out some bytes for another protocol. I guess I can re-assemble all the `:text` packets into a byte seq again, but I am afraid that there will be some performance issue.</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:31:17.115000</ts>
    <user>Madeleine</user>
    <text>In what way?</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:32:34.116200</ts>
    <user>Madeleine</user>
    <text>Seems in your case you could just do sort-by</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:34:25.116500</ts>
    <user>Madeleine</user>
    <text>Sorry I mean group-by</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:50:33.118200</ts>
    <user>Nisha</user>
    <text>well I don’t see a clear way to do this with `group-by`. To parse a byte and know which type it belongs to, I need to also check its previous and next bytes.</text>
  </message>
  <message conversation_id="1607">
    <ts>2019-05-26T23:53:00.119400</ts>
    <user>Donetta</user>
    <text>Using cljfx, is there a way to use openjfx Canvas?  I can't find a sample on the site, and it isn't immediately intuitive as to how I would do it (or even make a plain OpenJFX element and add it to a cljfx node)</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-26T23:56:43.120600</ts>
    <user>Madeleine</user>
    <text>Oh, sorry I thought your example was showing the datastructure and you had them already parsed into maps</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-27T00:01:56.121400</ts>
    <user>Nisha</user>
    <text>I do have them already into two maps, but this doesn’t work well if I want to parse the bytes of the third type.</text>
  </message>
  <message conversation_id="1606">
    <ts>2019-05-27T00:17:01.122300</ts>
    <user>Madeleine</user>
    <text>You need to parse the byte array in the map? Or across them?</text>
  </message>
  <message conversation_id="1607">
    <ts>2019-05-27T00:30:44.124700</ts>
    <user>Colin</user>
    <text>IMO, Should considering `TreeMap, TreeSet, PersistentTreeMap` on fn `last`  implementation</text>
  </message>
  <message conversation_id="1608">
    <ts>2019-05-27T04:41:27.125900</ts>
    <user>Neida</user>
    <text>&lt;@Nisha&gt; So how do you want to groupo your bytes ? By a fixed number ?</text>
  </message>
  <message conversation_id="1608">
    <ts>2019-05-27T04:41:43.126100</ts>
    <user>Neida</user>
    <text>So 4 bytes apiece ?</text>
  </message>
  <message conversation_id="1609">
    <ts>2019-05-27T06:44:17.127400</ts>
    <user>Sixta</user>
    <text>Has anyone experimented with grpc/protobuf and deps.edn? Is there a good library for compiling protobufs?</text>
  </message>
  <message conversation_id="1609">
    <ts>2019-05-27T07:08:39.127900</ts>
    <user>Shira</user>
    <text>google protobuf java library?</text>
  </message>
  <message conversation_id="1610">
    <ts>2019-05-27T07:10:11.128800</ts>
    <user>Shira</user>
    <text>just generate java code from protobuf and use it with java interop thats how i do it with kafka</text>
  </message>
  <message conversation_id="1609">
    <ts>2019-05-27T07:12:27.129300</ts>
    <user>Ali</user>
    <text>Does anyone know if Clojure works OK in WSL (&lt;https://docs.microsoft.com/en-us/windows/wsl/install-win10&gt;)</text>
  </message>
  <message conversation_id="1610">
    <ts>2019-05-27T07:14:49.130800</ts>
    <user>Ali</user>
    <text>I'm running some compute intensive calculations on my Macbook like an idiot, when I have a monster of a gaming PC sitting in the next room twiddling its thumbs. I though maybe I could kick up a REPL on it and outsource the job.</text>
  </message>
  <message conversation_id="1611">
    <ts>2019-05-27T08:02:49.131100</ts>
    <user>Sixta</user>
    <text>It does, yeah</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T09:52:43.133400</ts>
    <user>Rossie</user>
    <text>I have a project that has a sever side component and a client side component. they have different dependencies, and I'm keeping them separate via lein profiles. For development convenience I want to merge the two, and I tried  `:repl [:client :server]` in my project.clj. However, while `lein repl` does not include server-only or client-only deps, `lein with-profile +repl repl` does. Am I misunderstanding hwo the `repl` profile works? Do I add it somewhere else instead? Am I misunderstanding how `lein repl` works?</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T09:58:32.133900</ts>
    <user>Becki</user>
    <text>&lt;https://github.com/technomancy/leiningen/blob/master/doc/PROFILES.md#task-specific-profiles&gt; seems to confirm your expectation.
&amp;gt; Some tasks automatically merge a profile if specified. Examples of these are the :test profile, when running the test task, and the :repl profile, when running the repl task.</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:07:53.134300</ts>
    <user>Madelene</user>
    <text>I’d add them to :dev profile, which `:repl` should also source</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:08:32.134700</ts>
    <user>Rossie</user>
    <text>putting it in the :dev profile appears to work</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:08:33.134800</ts>
    <user>Madelene</user>
    <text>`:dev` will also make the deps available to your tests.</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:08:47.135100</ts>
    <user>Madelene</user>
    <text>:+1:</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:08:55.135200</ts>
    <user>Rossie</user>
    <text>awesome, thanks! sorry, I just figured this out and then read your message :smile:</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:09:01.135400</ts>
    <user>Rossie</user>
    <text>(and yes that does appear to work)</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:10:09.135900</ts>
    <user>Becki</user>
    <text>that might be worth raising an issue. the code appears to try to get the repl profiles.</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:11:28.136300</ts>
    <user>Becki</user>
    <text>i think it doesn't track down the transitive profiles there</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:40:37.136500</ts>
    <user>Nisha</user>
    <text>It’s a telnet like protocol, so the sequences are identified by certain byte patterns. For example `255` is used as an escape character, so `255 249` means `go ahead`, and `255 255` means `255`, kinda like escaped 255, and etc.</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:41:14.137200</ts>
    <user>Marlyn</user>
    <text>&lt;@Sixta&gt; I've been working a side project to do protobufs without Java interop</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:41:34.137700</ts>
    <user>Marlyn</user>
    <text>byte array -&amp;gt; Clojure map -&amp;gt; byte array</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:41:39.137800</ts>
    <user>Sixta</user>
    <text>&lt;@Marlyn&gt; on my god please yes</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:42:00.138700</ts>
    <user>Marlyn</user>
    <text>the wire protocol isn't that tricky</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:42:22.139600</ts>
    <user>Sixta</user>
    <text>My experience with protobuf (and grpc) was not great. I spent an hour on it, and I didn't get anywhere.</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:42:37.140400</ts>
    <user>Sixta</user>
    <text>I know that's not much, but it was incidental to what I wanted to do.</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:42:43.140600</ts>
    <user>Nisha</user>
    <text>And so they are not grouped by a fixed length.</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:42:44.140800</ts>
    <user>Marlyn</user>
    <text>Yeah it would be really cool if we could participate more smoothly in that ecosystem</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:43:14.141300</ts>
    <user>Rossie</user>
    <text>&lt;@Marlyn&gt; neat! what's that look like -- gloss?</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:43:26.141900</ts>
    <user>Rossie</user>
    <text>(I'm interested in that as well because GCP)</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:43:43.142500</ts>
    <user>Sixta</user>
    <text>That would be great.</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:44:17.143400</ts>
    <user>Sixta</user>
    <text>Time to make sure I'm following you on github</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:44:17.143500</ts>
    <user>Marlyn</user>
    <text>read the `.proto` definitions with instaparse and do some analysis on them, turning each `message` into a encoder/decoder</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:44:29.143800</ts>
    <user>Marlyn</user>
    <text>I haven't published it yet</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:44:48.144500</ts>
    <user>Marlyn</user>
    <text>but I haven't made progress on it in a couple months, so maybe I should just push the code up</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:46:12.145300</ts>
    <user>Marlyn</user>
    <text>the output of the analysis phase should be plain data so that you could write it down and skip analysis if desired</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T10:46:28.145800</ts>
    <user>Marlyn</user>
    <text>kinda like cognitect aws-api spits out `.edn` descriptors of AWS api's</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T11:00:42.146300</ts>
    <user>Rossie</user>
    <text>yes please, my thing consumes that data and only incidentally the apis themselves</text>
  </message>
  <message conversation_id="1613">
    <ts>2019-05-27T11:30:12.147700</ts>
    <user>Brent</user>
    <text>Does anyone know why &lt;https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/gen-class&gt; does not mention that it is possible to attach Java annotations to methods and constructors? &lt;@Jasmine&gt;? (Neither does the Java Interop page, but that is not so surprising)</text>
  </message>
  <message conversation_id="1612">
    <ts>2019-05-27T12:33:05.148600</ts>
    <user>Onita</user>
    <text>doesn’t look like this fixed my issue. :&amp;lt;</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T12:43:48.148800</ts>
    <user>Latonya</user>
    <text>You can see when new releases are made on Clojars here: &lt;https://clojars.org/byte-streams&gt;</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T12:44:03.149100</ts>
    <user>Latonya</user>
    <text>Same data set still throws the same exception?</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T12:44:36.149300</ts>
    <user>Latonya</user>
    <text>If so, I will try testing with it, then, and stop assuming I have found the last problem :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T12:53:50.150700</ts>
    <user>Venice</user>
    <text>I'm having an issue in a large app where a top-level expression is causing a block on startup. Is there some flag I can pass to something to see what point clojure is at when it stops?</text>
  </message>
  <message conversation_id="1615">
    <ts>2019-05-27T13:39:17.153400</ts>
    <user>Marlyn</user>
    <text>&lt;@Venice&gt; start clojure with clojure.main and manually require your code entry point namespace with `(require 'your.code :verbose)`</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:18:16.153600</ts>
    <user>Onita</user>
    <text>that’s right, same issue</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:23:44.154100</ts>
    <user>Min</user>
    <text>oh!  `:verbose`is new to me, nice</text>
  </message>
  <message conversation_id="1616">
    <ts>2019-05-27T14:26:48.154300</ts>
    <user>Leeann</user>
    <text>Is this another example where clojures compare-machinery sometimes returns the wrong result because of truncating longs to int?</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:29:44.154500</ts>
    <user>Latonya</user>
    <text>Well, wrong if you do not know that fact and plan for it in advance, yes :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:31:16.154800</ts>
    <user>Latonya</user>
    <text>There may be another problem I haven't found and fixed yet, but the first problem I found with the comparator function was that it was returning what appeared to be a correctly signed Long value, but when truncated to 32-bit int would sometimes change the sign and not be the desired result.</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:39:40.155000</ts>
    <user>Celestine</user>
    <text>Probably because you can attach annotations to code without using `gen-class`?</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:41:39.155300</ts>
    <user>Celestine</user>
    <text>For example &lt;http://corfield.org/blog/2013/05/01/instrumenting-clojure-for-new-relic-monitoring/&gt;</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:42:24.155600</ts>
    <user>Celestine</user>
    <text>I know that's not adding annotations to methods/constructors, just saying that you can do that in the general case outside of `gen-class`.</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:42:40.155800</ts>
    <user>Celestine</user>
    <text>Is the syntax much different for doing this within `gen-class`?</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:43:17.156000</ts>
    <user>Celestine</user>
    <text>(and, yeah, it would be nice if adding annotations was better documented somewhere...)</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:46:45.156200</ts>
    <user>Latonya</user>
    <text>I tried with those 6000 32-byte sequences, converted with some little bit of code I wrote to convert those hex strings into 32-byte long java.nio.ByteBuffer objects, and sorting them with the updated compare-bytes caused no exception to be thrown.</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:49:29.156400</ts>
    <user>Latonya</user>
    <text>I do get an exception thrown when I try to sort using the original definition of compare-bytes that you reported.</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:50:04.156600</ts>
    <user>Latonya</user>
    <text>Probably a good idea to double check what method you are using to get the new version rather than the one currently published on Clojars.</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:51:50.156800</ts>
    <user>Latonya</user>
    <text>Doing 'git clone' on byte-streams, then 'lein install' should install the modified version in your local $HOME/.m2 directory, where lein and other tools should be able to find it if you give the proper version number, which I think is 0.2.5-alpha2</text>
  </message>
  <message conversation_id="1614">
    <ts>2019-05-27T14:59:38.157000</ts>
    <user>Latonya</user>
    <text>You can also change the version string in the first line of the project.clj file to something that has never been released on &lt;http://clojars.org|clojars.org&gt; if you want to be sure your code is getting that version, instead of one from clojars.  You can search for byte-streams on &lt;http://clojars.org|clojars.org&gt; to see what versions have been released there, and the dates.  The last release date is in 2018, so cannot include the latest fix.</text>
  </message>
  <message conversation_id="1617">
    <ts>2019-05-27T15:52:59.158400</ts>
    <user>Clarine</user>
    <text>if you write `'foo/bar` or
````foo/bar```
or
```(quote foo/bar)```
how should that affect linting required but unused namespaces? In Clojure, you do not need to require namespace `foo` in either case, although joker counts `foo` as used in the case of the syntax-quote. Currently clj-kondo does the same for syntax-quote and `quote`, although it probably shouldn’t in all these three cases.</text>
  </message>
  <message conversation_id="1618">
    <ts>2019-05-27T16:08:47.164600</ts>
    <user>Hugh</user>
    <text>Hi!
Say I want the 4 fastest non-nils answers from 10 concurrent api calls, what is a good and fast way to do it?
```
(def ids `[1 2 3 4 5 6 7 8 9 10])
(defn ask 
  "may return nil"
  [id] 
  (:body (http/GET {...}))
(defn take-4-first-non-nils [ids] ...)
```</text>
  </message>
  <message conversation_id="1618">
    <ts>2019-05-27T16:10:36.165500</ts>
    <user>Elaine</user>
    <text>&lt;@Hugh&gt; you will need `async/alt!` from &lt;#C05423W6H|core-async&gt;</text>
  </message>
  <message conversation_id="1618">
    <ts>2019-05-27T16:17:15.167200</ts>
    <user>Hugh</user>
    <text>&lt;@Elaine&gt; Thanks :slightly_smiling_face: Any example where we wait for first n results before returning them?</text>
  </message>
  <message conversation_id="1618">
    <ts>2019-05-27T16:18:18.168100</ts>
    <user>Hugh</user>
    <text>I’ve always seen example with *the* first result, but not more</text>
  </message>
  <message conversation_id="1618">
    <ts>2019-05-27T16:31:03.169700</ts>
    <user>Hugh</user>
    <text>thought it would start like so, but I don’t know actually `(async/take 4 ...)`</text>
  </message>
  <message conversation_id="1618">
    <ts>2019-05-27T16:34:24.171300</ts>
    <user>Elaine</user>
    <text>Yeah. something like **the** first result, 4 times in a row :sweat_smile:
Not sure about the answer but I'm sure that &lt;#C05423W6H|core-async&gt; and `alt` will compose that answer</text>
  </message>
  <message conversation_id="1619">
    <ts>2019-05-27T17:01:15.171800</ts>
    <user>Latonya</user>
    <text>&lt;@Onita&gt; ^</text>
  </message>
  <message conversation_id="1619">
    <ts>2019-05-27T17:02:03.172000</ts>
    <user>Onita</user>
    <text>thanks! you’re right, i was probably using the wrong version. will check this again</text>
  </message>
  <message conversation_id="1620">
    <ts>2019-05-27T17:24:20.172300</ts>
    <user>Mariela</user>
    <text>I think it's a good idea to lint

```
`foo/bar
```

as a fault if the `foo` alias does not exist in the current ns.

Else:

```
`foo/bar
```</text>
  </message>
  <message conversation_id="1620">
    <ts>2019-05-27T17:24:46.172600</ts>
    <user>Mariela</user>
    <text>will likely evaluate to sth different than what the programmer intended</text>
  </message>
  <message conversation_id="1620">
    <ts>2019-05-27T17:25:35.172800</ts>
    <user>Mariela</user>
    <text>I would distinguish syntax-quote from plain quote though: only the former has the alias-expanding semantic, so I would only lint for the former</text>
  </message>
  <message conversation_id="1620">
    <ts>2019-05-27T17:28:02.173200</ts>
    <user>Clarine</user>
    <text>I have made two comments here:
&lt;https://github.com/borkdude/clj-kondo/issues/210#issuecomment-496293314&gt;
I think that’s the same as what you’re saying here right?</text>
  </message>
  <message conversation_id="1620">
    <ts>2019-05-27T17:28:55.173600</ts>
    <user>Clarine</user>
    <text>so syntax-quote handles the symbol as “using” the namespace, but normal quote doesn’t</text>
  </message>
  <message conversation_id="1620">
    <ts>2019-05-27T17:31:58.173800</ts>
    <user>Mariela</user>
    <text>I agree if in:

&amp;gt; but these do not give the warning, which I believe is the incorrect behavior.

"the warning" means a warning other than `is required but never used`, possibly a new one</text>
  </message>
  <message conversation_id="1620">
    <ts>2019-05-27T17:51:42.174100</ts>
    <user>Mariela</user>
    <text>You can play with pmap and a blocking queue.

Each fn in the pmap pushes to the blocking queue. Then you grab 4 elements from the queue, which by definition will be the fastest ones

Should be simpler than core.async code</text>
  </message>
  <message conversation_id="1620">
    <ts>2019-05-27T17:52:34.174300</ts>
    <user>Mariela</user>
    <text>(just beware that grabbing 4 elements may block forever if done incorrectly)</text>
  </message>
  <message conversation_id="1620">
    <ts>2019-05-27T18:07:29.174500</ts>
    <user>Brent</user>
    <text>thx, I had no idea! And I'd correct
&amp;gt;, it would be nice if adding annotations was better documented somewhere...
to
&amp;gt; it would be nice if adding annotations was documented somewhere...
:)</text>
  </message>
  <message conversation_id="1621">
    <ts>2019-05-27T18:43:08.174700</ts>
    <user>Celestine</user>
    <text>Hah... yeah. I thought they were documented _somewhere_ but I remember it being hard to find anything about it.</text>
  </message>
  <message conversation_id="1622">
    <ts>2019-05-27T20:44:18.175500</ts>
    <user>Felix</user>
    <text>Is there anyway to get Scheme hygienic macros for Clojure?</text>
  </message>
  <message conversation_id="1623">
    <ts>2019-05-27T21:13:30.176200</ts>
    <user>Meagan</user>
    <text>&lt;http://clojure-doc.org/articles/language/macros.html#macro-hygiene-and-gensym&gt; is a pretty good intro to how Clojure handles hygiene</text>
  </message>
  <message conversation_id="1624">
    <ts>2019-05-27T21:51:33.178400</ts>
    <user>Liliana</user>
    <text>I'm hitting a very strange bug atm, I'm using node-jre to run a (uber)jar. But somehow the resource paths are weird, in that I can only io/resource files from jar, if they are file and not folder, and the file is not nested. Not the newest jre running the jar, could that be the reason or something else?
(think I solved it, had some pom.xml from totally unrelated java project lurking around)</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-27T22:06:54.180100</ts>
    <user>Bart</user>
    <text>anybody good at compojure routing? I want to have different wrappers for my login routes vs. other routes, then combine it all into one ring handler</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-27T22:13:38.182400</ts>
    <user>Liliana</user>
    <text>&lt;@Bart&gt; it's a bit of a hassle if you're using cemerick's friend. I hade a terrible time getting the auth sent the right way. But solveable, just combine the protected routes with public routes in the handler.</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-27T22:14:43.183300</ts>
    <user>Liliana</user>
    <text>and make sure the session cookie isn't dissoced anywhere in some middleware</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-27T22:18:21.184900</ts>
    <user>Celestine</user>
    <text>&lt;@Bart&gt; You can use `(routes ..)` to combine multiple set of routes (since they're just handlers). ```(routes
  (wrap-login (routes ... your login routes ...))
  (wrap-other (routes ... your other routes ...)))``` something like that I think...</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-27T22:21:05.185300</ts>
    <user>Bart</user>
    <text>wait, you can nest `routes`? doh</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-27T22:25:03.187100</ts>
    <user>Celestine</user>
    <text>`routes` is just a function that takes handlers as arguments and combines them. Compojure goes through the list of routes/handlers until one of them returns non-`nil`, which with routes like `(GET "/foo" [] something)` which is a handler will return `nil` if it doesn't match...</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-27T22:31:51.187600</ts>
    <user>Celestine</user>
    <text>```user=&amp;gt; ((routes (routes (GET "/foo" [] "Get Foo") (GET "/bar" [] "Get Bar"))
                (routes (GET "/quux" [] "Get Quux") (POST "/quux" [] "Post Quux"))) {:uri "/quux" :request-method :get})
{:status 200, :headers {"Content-Type" "text/html; charset=utf-8"}, :body "Get Quux"}
user=&amp;gt; ((routes (routes (GET "/foo" [] "Get Foo") (GET "/bar" [] "Get Bar")) (routes (GET "/quux" [] "Get Quux") (POST "/quux" [] "Post Quux"))) {:uri "/bar" :request-method :get})
{:status 200, :headers {"Content-Type" "text/html; charset=utf-8"}, :body "Get Bar"}
user=&amp;gt; ((routes (routes (GET "/foo" [] "Get Foo") (GET "/bar" [] "Get Bar")) (routes (GET "/quux" [] "Get Quux") (POST "/quux" [] "Post Quux"))) {:uri "/bar" :request-method :post})
nil```</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-27T22:33:41.188400</ts>
    <user>Celestine</user>
    <text>I didn't add any middleware into that, but hope it gives the idea? &lt;@Bart&gt;</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-27T22:35:49.189800</ts>
    <user>Bart</user>
    <text>yeah I got the idea at your first post &lt;@Celestine&gt;, thanks. somehow I was not seeing that `(compojure/routes)` just takes handlers &amp;amp; assembles a handler</text>
  </message>
  <message conversation_id="1626">
    <ts>2019-05-27T22:50:27.190300</ts>
    <user>Lela</user>
    <text>&lt;http://danboykis.com/posts/things-i-wish-i-knew-about-core-async/&gt;</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-28T00:36:27.190900</ts>
    <user>Lorenza</user>
    <text>also works just as well on just windows</text>
  </message>
  <message conversation_id="1625">
    <ts>2019-05-28T00:36:56.191100</ts>
    <user>Lorenza</user>
    <text>without the IO tax of WSL</text>
  </message>
  <message conversation_id="1627">
    <ts>2019-05-28T02:57:10.191700</ts>
    <user>Celena</user>
    <text>How to set *Content-Security-Policy* headers in Pedestal? Application is giving following errors.</text>
  </message>
  <message conversation_id="1628">
    <ts>2019-05-28T04:13:21.193700</ts>
    <user>Nisha</user>
    <text>How do I profile the overhead of using lazy seq? Assuming my app is slow, how do I find out if it’s because I’m using too many lazy operations?</text>
  </message>
  <message conversation_id="1628">
    <ts>2019-05-28T04:15:50.195000</ts>
    <user>Nieves</user>
    <text>I add `(time` to some forms trying to find a bottleneck</text>
  </message>
  <message conversation_id="1628">
    <ts>2019-05-28T04:20:45.195100</ts>
    <user>Brent</user>
    <text>i will fix it :)</text>
  </message>
  <message conversation_id="1628">
    <ts>2019-05-28T04:24:08.196400</ts>
    <user>Kellee</user>
    <text>how do I `eval` a `fn` declaration and keep type hints? I can't get it to work. the expected result is that `(eval generated-fn2)` won't give me reflection warnings.</text>
  </message>
  <message conversation_id="1628">
    <ts>2019-05-28T04:27:28.197000</ts>
    <user>Kellee</user>
    <text>here's the problem on &lt;http://repl.it|repl.it&gt;, if someone wants to give it a go: &lt;https://repl.it/repls/ExcitedDetailedRedundancy&gt;</text>
  </message>
  <message conversation_id="1628">
    <ts>2019-05-28T04:33:55.197300</ts>
    <user>Celena</user>
    <text>Resolved it using this issue: &lt;https://github.com/pedestal/pedestal/issues/499&gt;</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:16:39.199900</ts>
    <user>Fae</user>
    <text>is this an implementation detail, or one can rely on it?
`(map f coll)` returns "chunked lazy seq", which gets realized 32 elements at a time
`(map f coll1 coll2 ...)` returns "proper lazy seq", when gets realized 1 element at a time</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:17:42.200500</ts>
    <user>Fae</user>
    <text>None</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:18:15.201000</ts>
    <user>Harris</user>
    <text>chunking is always an impl detail</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:18:50.201900</ts>
    <user>Harris</user>
    <text>(both its presence, lack of, or rate of)</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:18:52.202100</ts>
    <user>Fae</user>
    <text>(I mean "rely on the 1 at a time for 2nd arity")</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:19:00.202400</ts>
    <user>Fae</user>
    <text>ok</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:19:01.202500</ts>
    <user>Harris</user>
    <text>no (you can't rely on that either)</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:19:38.203700</ts>
    <user>Fae</user>
    <text>so if I'd want the laziest seq, I should do proper lazy-seq implementation myself?</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:19:52.203900</ts>
    <user>Harris</user>
    <text>yep</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:20:24.204300</ts>
    <user>Harris</user>
    <text>```(defn unchunk [s]
  (when (seq s)
    (lazy-seq
      (cons (first s)
            (unchunk (next s))))))``` is usually how it's done</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:20:56.204900</ts>
    <user>Fae</user>
    <text>`(-&amp;gt;&amp;gt; coll (map f) unchunk)`?</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:21:36.205600</ts>
    <user>Fae</user>
    <text>(question came from reading lots of duplicated ~code~ effort here &lt;https://github.com/dakrone/clojure-opennlp/blob/master/src/opennlp/tools/lazy.clj&gt; )</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:21:40.205900</ts>
    <user>Harris</user>
    <text>`(-&amp;gt;&amp;gt; coll unchunk (map f))`</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:22:15.206700</ts>
    <user>Fae</user>
    <text>hm</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:22:47.207000</ts>
    <user>Harris</user>
    <text>what controls the chunking is the input collection</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:23:12.207800</ts>
    <user>Fae</user>
    <text>so in my example it is `range` who initiates chunks of 32?</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:23:17.208000</ts>
    <user>Fae</user>
    <text>cool</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:23:20.208300</ts>
    <user>Harris</user>
    <text>well no</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:23:20.208400</ts>
    <user>Fae</user>
    <text>TIL</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:24:00.209400</ts>
    <user>Harris</user>
    <text>it's `map` who decides to iterate on chunks rather than els, based on the type of the input coll</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:24:04.209500</ts>
    <user>Ali</user>
    <text>Does it now? Maybe I'll just try that straight up then.</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:24:21.210000</ts>
    <user>Arlen</user>
    <text>&lt;@Nisha&gt; profiling: &lt;https://github.com/clojure-goes-fast/clj-async-profiler&gt;</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:24:41.210800</ts>
    <user>Harris</user>
    <text>if you pass an "unchunkable" coll to map it will traverse it one element at a time</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:24:46.211000</ts>
    <user>Harris</user>
    <text>that's what `unchunk` does</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:24:50.211100</ts>
    <user>Arlen</user>
    <text>&lt;@Nisha&gt; Benchmarking: &lt;https://github.com/hugoduncan/criterium&gt;</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:24:57.211700</ts>
    <user>Ali</user>
    <text>For some reason I thought `clj` wasn't stable under Windows native.</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:25:00.212000</ts>
    <user>Lorenza</user>
    <text>been using clojure on windows since beta, making artifacts that would later run on solaris etc</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:25:00.212200</ts>
    <user>Fae</user>
    <text>```(defn map  
([f coll]
   (lazy-seq
    (when-let [s (seq coll)]
      (if (chunked-seq? s)
        (let [c (chunk-first s)
              size (int (count c))
              b (chunk-buffer size)]
          (dotimes [i size]
              (chunk-append b (f (.nth c i))))
          (chunk-cons (chunk b) (map f (chunk-rest s))))
        (cons (f (first s)) (map f (rest s)))))))```</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:25:11.212300</ts>
    <user>Arlen</user>
    <text>You can also use VisualVM</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:25:27.212900</ts>
    <user>Arlen</user>
    <text>&lt;http://clojure-goes-fast.com/blog/profiling-tool-jvisualvm/&gt;</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:25:27.213100</ts>
    <user>Fae</user>
    <text>so map just checks, but not enforces</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:25:44.213500</ts>
    <user>Harris</user>
    <text>`(chunked-seq? (range 30))` =&amp;gt; true
`(chunked-seq? (unchunk (range 30)))` =&amp;gt; false</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:25:46.213600</ts>
    <user>Lorenza</user>
    <text>the newish clj tool has trouble on windows yes, i have a workaround for that... let me find it</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:26:20.214600</ts>
    <user>Harris</user>
    <text>the functions that "understand chunking" work by preserving the chunkiness</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:26:23.214800</ts>
    <user>Lorenza</user>
    <text>so, follow the procedure outlined on the clojrue web site to install it on windows</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:26:28.215100</ts>
    <user>Harris</user>
    <text>so if chunked-seq comes in, chunked-seq comes out</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:26:33.215300</ts>
    <user>Lorenza</user>
    <text>then in your project root put this file</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:26:34.215500</ts>
    <user>Harris</user>
    <text>if normal seq comes in, normal seq comes out</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:27:49.215800</ts>
    <user>Lorenza</user>
    <text>None</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:28:12.216500</ts>
    <user>Lorenza</user>
    <text>it will launch clj from a normal command prompt</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:28:26.216900</ts>
    <user>Fae</user>
    <text>is there a way to know which (core?) fns return chunked seqs?</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:28:29.217000</ts>
    <user>Lorenza</user>
    <text>usefull for some tools that go around powershell</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:28:45.217400</ts>
    <user>Fae</user>
    <text>"rule of thumb" or something</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:28:45.217500</ts>
    <user>Lorenza</user>
    <text>anyways depending on your workflow you might not even need it</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:28:56.217800</ts>
    <user>Lorenza</user>
    <text>if you're not using deps.edn, no need</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:29:18.218400</ts>
    <user>Fae</user>
    <text>or rather "when would I want to return chunked seq?"</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:30:51.218500</ts>
    <user>Ali</user>
    <text>Thanks, I'll try this. I use `deps.edn` exclusively, so I do need it.</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:31:05.218700</ts>
    <user>Ali</user>
    <text>(Datomic Cloud)</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:31:15.219100</ts>
    <user>Lorenza</user>
    <text>have fun !</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:31:55.219800</ts>
    <user>Fae</user>
    <text>why isn't `unchunk` - a core fn? is it because chunks are an implementation detail?</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:39:28.220000</ts>
    <user>Harris</user>
    <text>yeah</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:40:59.221200</ts>
    <user>Harris</user>
    <text>there's really no good documentation on this, because you "shouldn't be thinking about it, it's an implementation detail" is the core position I think</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:44:17.221700</ts>
    <user>Fae</user>
    <text>on the other hand things might get expensive</text>
  </message>
  <message conversation_id="1629">
    <ts>2019-05-28T05:50:04.221800</ts>
    <user>Madelene</user>
    <text>be careful though… laziness is hard to benchmark because it also includes the cost of doing the work.</text>
  </message>
  <message conversation_id="1630">
    <ts>2019-05-28T05:50:15.222000</ts>
    <user>Harris</user>
    <text>¯\_(ツ)_/¯</text>
  </message>
  <message conversation_id="1630">
    <ts>2019-05-28T05:51:19.222700</ts>
    <user>Fae</user>
    <text>:thisisfine:</text>
  </message>
  <message conversation_id="1630">
    <ts>2019-05-28T05:54:41.224000</ts>
    <user>Harris</user>
    <text>I can tell you that the current impl produces chunked seqs off of:
- vector or their seqs
- bounded integer range
- Iterables that are not otherwise Seqable
- the return values of `sequence` used with a transducer
- the return values of `iterator-seq`</text>
  </message>
  <message conversation_id="1630">
    <ts>2019-05-28T05:58:03.225700</ts>
    <user>Harris</user>
    <text>and most of the seq functions (`map`, `filter`, `keep`, `for` etc) are "chunkiness preserving", while `reduce`/`trasnduce` "understand" the chunkiness of its input coll</text>
  </message>
  <message conversation_id="1630">
    <ts>2019-05-28T06:07:28.225800</ts>
    <user>Ali</user>
    <text>&lt;@Lorenza&gt; For connecting, I'm getting timeouts on the REPL connections (so the REPL server isn't answering, I'm guessing), even though I've added rules for both ingoing and outgoing TCP connections on the correct port in Windows Firewall. Do you happen to know if I would need to do anything else to open the ports?</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T06:27:07.226000</ts>
    <user>Lorenza</user>
    <text>you're connecting to a remote repl ?</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T07:03:06.226200</ts>
    <user>Ali</user>
    <text>Yeah, but I'm an idiot. I forgot the configure `:host` and `:bind` for nREPL.</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T07:03:13.226400</ts>
    <user>Ali</user>
    <text>(They default to localhost)</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T07:03:36.226600</ts>
    <user>Lorenza</user>
    <text>hah ! anyways i never had to go remote like this so i couldn't help</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T07:05:10.226900</ts>
    <user>Nisha</user>
    <text>Yeah I assume it’s hard, because it’s impossible to compare it to the non-lazy version, unless we have it implemented, which is hard again, and is the very reason why we implement the lazy version in the first place.</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T07:05:20.227100</ts>
    <user>Ali</user>
    <text>Yeah, I'm setting it up so that I can essentially use my laptop as a thin client to a much more powerful machine. But the laptop is still nicer to work on :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T07:12:45.227400</ts>
    <user>Madelene</user>
    <text>Yeah you really need two implementations… but a profiler can guide you to the right decision…

lazy sequences are usually fast enough though; but it depends on how much data you have going through them; and how many transformations you’ve stacked ontop — and of course how fast you need it to be :slightly_smiling_face:

A sign laziness is a problem is lots of GC activity; but that can also be caused by other things.  Also if you’re holding onto the head of seq accidentally can cause a lot of memory pressure/OOMs etc.</text>
  </message>
  <message conversation_id="1632">
    <ts>2019-05-28T08:26:04.231800</ts>
    <user>Ali</user>
    <text>I've used Criterium to measure performance of running some data imports on my MacBook vs. my PC (PowerShell vs. WSL), and got these results:

```WSL: 9.075001 seconds
PowerShell: 5.753443 seconds
MacBook: 12.337244 seconds```

Things are better on the PC, but not as good as I expected (16GB 2017 MacBook vs. 32GB AMD Ryzen 2700X PC). Upon inspecting the PC, I notice that only four cores out of eight in total are utilised.

The function I'm testing is using a simple `pmap` to process things in parallel. Is there a limitation to `pmap` in only using four cores, or are there things I might need to tweak with the JVM?

(Oh, and BTW, the tax paid by using WSL seems very high indeed)</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:41:29.232700</ts>
    <user>Olympia</user>
    <text>it uses the # of available processors + 2 &lt;https://github.com/clojure/clojure/blob/clojure-1.9.0/src/clj/clojure/core.clj#L6941&gt;</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:43:52.232900</ts>
    <user>Ali</user>
    <text>Right. Well, that is 3 threads for the one processor then. I guess I have to look into other means of parallelization.</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:44:42.233100</ts>
    <user>Karren</user>
    <text>3 threads for one processor?</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:45:07.233300</ts>
    <user>Ali</user>
    <text>Yes, there is one physical processor, albeit 8 cores.</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:45:46.233500</ts>
    <user>Ali</user>
    <text>Or did I misunderstand what "processor" means in this context?</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:45:48.233700</ts>
    <user>Karren</user>
    <text>pmap should then use up to 10 parallel threads (or 18 if you you're talking about physical cores and have hyperthreading)</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:45:57.233900</ts>
    <user>Karren</user>
    <text>it's a logical core as seen by operating system</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:46:26.234100</ts>
    <user>Karren</user>
    <text>typically on machines with HT, that means `2 * #physical cores + 2`</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:46:51.234300</ts>
    <user>Ali</user>
    <text>Ah, gotcha. Yes, 16 logical cores. Alright, so for some reason it only reached 4 physical cores. Something else is going on then.</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:48:38.234600</ts>
    <user>Karren</user>
    <text>it may depend a lot on the type of operations you're doing. you might not get benefits you hope for just by running things in parallel In extreme cases, it may even be slower</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:49:32.234800</ts>
    <user>Ali</user>
    <text>In this case it's reading fairly large XML documents, extracting data, and doing transformations. `pmap`ing should be a pretty straightforward way of optimizing in my mind. Each document is fairly long-running.</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:50:17.235000</ts>
    <user>Ali</user>
    <text>Maybe it's strangled by IO and I need to buffer some documents ahead of time.</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:50:33.235200</ts>
    <user>Karren</user>
    <text>Maybe, but you may get a lot of IO or memory contention. As always, it's best to measure :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:51:27.235500</ts>
    <user>Karren</user>
    <text>Btw. for `pmap` this is the interesting line related to "semi-lazy" -&amp;gt; it tries to stay ahead "enough" (factor `n`): &lt;https://github.com/clojure/clojure/blob/clojure-1.9.0/src/clj/clojure/core.clj#L6948&gt;</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:51:41.235800</ts>
    <user>Karren</user>
    <text>in general, Claypoole is interesting alternative to consider: &lt;https://github.com/TheClimateCorporation/claypoole&gt;</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:52:01.236100</ts>
    <user>Olympia</user>
    <text>that may be it, also i never end up using pmap bc they dont work with transducers and transducers are typically faster for me</text>
  </message>
  <message conversation_id="1631">
    <ts>2019-05-28T08:53:33.236400</ts>
    <user>Ali</user>
    <text>The entire thing is lazy from start to end, with no transducers mixed in. It should be realized only on the accumulation of results outside of `pmap`.

Yep, `def`ing the `pmap` expression returns immediately.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T09:56:39.237200</ts>
    <user>Latonya</user>
    <text>If you look at the source code for pmap you can see the expression it uses to determine the maximum parallelism: `(+ 2 (.. Runtime getRuntime availableProcessors))`  You can run that expression in a REPL on your system to see what the JVM considers that number to be.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T09:59:27.237500</ts>
    <user>Latonya</user>
    <text>Even if it is `(+ 2 8)` or 10, pmap can only give good performance increases if a couple of things are true: (a) the work done for each element of the sequence is large, compared to the work required for the JVM to create a new thread, which is what pmap does for each element.  (b) Each element should take about the same amount of time to process.  If they take wildly different amounts of time to complete, then pmap limits the parallelism because it does not work more than a certain amount ahead of the last unfinished element.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T10:00:24.237700</ts>
    <user>Latonya</user>
    <text>There are other libraries, e.g. using Java's ExecutorService, that try to keep N threads busy at all times, which avoids issue (b) that `pmap`'s implementation has.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T10:02:15.237900</ts>
    <user>Latonya</user>
    <text>I have not used it myself, but I believe this library offers some bit of Clojure API around Java's capabilities, but I have heard that several people go straight to Java interop for this, too: &lt;https://github.com/TheClimateCorporation/claypoole&gt;</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T10:07:38.238400</ts>
    <user>Ali</user>
    <text>Cool, thanks &lt;@Latonya&gt; (and &lt;@Karren&gt;, &lt;@Olympia&gt;). That might be the bottleneck in that case. The documents I process _are_ wildly different in size.

I think the minimum time I've spotted for a single document is ~40ms for an outlier. Is this small compared to the cost of setting up a thread? If so, I guess I might need to chunk them into linear bits.

Even then, it wouldn't load every core evenly. I guess I could try to organise them into chunks of roughly the same size.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T10:09:16.238600</ts>
    <user>Ali</user>
    <text>Or go with a threadpool solution.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T10:14:30.238900</ts>
    <user>Latonya</user>
    <text>I suspect one could do a lot of fiddling to try to make `pmap` use its max parallelism as often as possible, whereas the thread pool solution would be likely to get you there with less fiddling.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T10:14:44.239100</ts>
    <user>Latonya</user>
    <text>If max parallelism was a relatively important goal for you.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T10:15:30.239300</ts>
    <user>Ali</user>
    <text>Yeah, max parallelism is by far the easiest optimization I can do, as fiddly as it is.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T10:15:53.239500</ts>
    <user>Ali</user>
    <text>I'll look into the less fiddly versions though, that seems sensible.</text>
  </message>
  <message conversation_id="1634">
    <ts>2019-05-28T11:36:03.241600</ts>
    <user>Evonne</user>
    <text>We were just discussing keyword parameters in &lt;#C053AK3F9|beginners&gt; , and I think I remember a conversation somewhere back a ways where people were saying there was a reason to prefer plain maps over keyword params. Can’t remember what the reason was, though. Sound familiar to anyone?</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T11:45:57.242100</ts>
    <user>Meagan</user>
    <text>the reason I don't use keyword params is because you can't pass them around as data</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T11:47:35.244200</ts>
    <user>Bee</user>
    <text>Yeah, as soon as you want to composite a fn with keyword params, it's caller is responsible for splatting out the options instead of just passing in some map it might have gotten from its own caller</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T11:48:03.244900</ts>
    <user>Meagan</user>
    <text>```
(defn foo [big-ball-of-params]
  ;; I have to peel each arg one by one off of the map
  (bar :a (:a big-ball-of-params)
       :b (:b big-ball-of-params)
       :c (:c big-ball-of-params)))

(defn bar [&amp;amp; {:keys [a b c]]
  (println a b c))
```</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T11:48:11.245100</ts>
    <user>Evonne</user>
    <text>That’s what it was, composition. Tks folks.</text>
  </message>
  <message conversation_id="1633">
    <ts>2019-05-28T11:54:16.246500</ts>
    <user>Bee</user>
    <text>To be fair you can still get there with apply, but as soon as your caller is drawing the keyword args from n&amp;gt;1 maps your caller has a lot more to juggle.</text>
  </message>
  <message conversation_id="1635">
    <ts>2019-05-28T12:22:53.246700</ts>
    <user>Ali</user>
    <text>`claypoole` and some minor refactoring sees a good improvement: `3.416247 seconds` in PowerShell.</text>
  </message>
  <message conversation_id="1635">
    <ts>2019-05-28T12:24:30.246900</ts>
    <user>Ali</user>
    <text>It's now keeping all cores nearly maxed out.</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T16:21:52.249900</ts>
    <user>Clarine</user>
    <text>isn’t destructuring a little bit too forgiving in the `:or` here?
```
(let [{:keys [:a] :or {x 1}} {}] #_[a x]) ;; this is fine
(let [{:keys [:a] :or {x 1}} {}] [a b x]) ;;=&amp;gt; error about x
(let [{:keys [:a :x] :or {x 1}} {}] [a x]) ;; works
```</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T16:24:13.250400</ts>
    <user>Celestine</user>
    <text>Macroexpand it -- see what it expands to...</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T16:25:25.250800</ts>
    <user>Clarine</user>
    <text>yeah, the x in `:or` is ignored when it’s not part of the previous symbols</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T16:35:32.251400</ts>
    <user>Latonya</user>
    <text>It is the kind of thing a linter could warn about.  Eastwood has not implemented it, although I created an issue to remind developers about it a while back: &lt;https://github.com/jonase/eastwood/issues/225&gt;</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T16:37:19.251700</ts>
    <user>Latonya</user>
    <text>Maybe this one is related, too: Maybe this one, too: &lt;https://github.com/jonase/eastwood/issues/157&gt;</text>
  </message>
  <message conversation_id="1637">
    <ts>2019-05-28T16:55:44.252000</ts>
    <user>Mimi</user>
    <text>Hey &lt;@Jenny&gt;, I just recently challenged myself to try and build a twitch chatbot during livestreams on twitch: &lt;https://www.twitch.tv/upgradingdave&gt;</text>
  </message>
  <message conversation_id="1637">
    <ts>2019-05-28T16:56:44.252700</ts>
    <user>Mimi</user>
    <text>There’s also another clojure livestreamer here: &lt;https://www.twitch.tv/rhonin52/&gt;</text>
  </message>
  <message conversation_id="1637">
    <ts>2019-05-28T16:57:55.253000</ts>
    <user>Mimi</user>
    <text>I try to stream every M, W, F 7:30 eastern time. If you’re around, please stop by, love to have some help building the twitchbot!</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:03:39.253500</ts>
    <user>Clarine</user>
    <text>&lt;@Latonya&gt; that’s what I figured: &lt;https://github.com/borkdude/clj-kondo/issues/214&gt;</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:12:58.254400</ts>
    <user>Clarine</user>
    <text>(&lt;@Marlyn&gt; I saw you typing for a moment, if you have feedback on this, I would be happy to hear)</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:14:06.255100</ts>
    <user>Marlyn</user>
    <text>might want to lint on `(let [{:keys [patient/id order/id]}  value]...)`</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:14:31.255600</ts>
    <user>Marlyn</user>
    <text>GIGO (seen in &lt;#C053AK3F9|beginners&gt;)</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:14:46.255900</ts>
    <user>Marlyn</user>
    <text>similarly for `:syms`</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:16:39.256300</ts>
    <user>Clarine</user>
    <text>ah I see, multiple keys with the same “name” part</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:16:57.256600</ts>
    <user>Marlyn</user>
    <text>i mean, it would never get past simple REPL testing</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:17:13.257000</ts>
    <user>Marlyn</user>
    <text>(ugh MBP keyboards)</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:17:22.257500</ts>
    <user>Marlyn</user>
    <text>unless one of the symbols was unused</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:17:53.258200</ts>
    <user>Clarine</user>
    <text>yes, the idea of clj-kondo is that it catches errors before your REPL sees it, there is this interval in time where thoughts are transformed into sexprs into your buffer, but have not been evaluated yet</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:18:39.258500</ts>
    <user>Clarine</user>
    <text>thanks</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:30:16.258700</ts>
    <user>Clarine</user>
    <text>works: &lt;https://www.dropbox.com/s/zjbbgpvhx7fc70e/Screenshot%202019-05-28%2023.30.11.png?dl=0&gt;</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:33:46.259600</ts>
    <user>Marlyn</user>
    <text>&lt;@Clarine&gt; unused binding?</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:34:24.260000</ts>
    <user>Clarine</user>
    <text>that particular binding is unused, because it’s shadowed by the next one?</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:39:27.261100</ts>
    <user>Clarine</user>
    <text>the message could maybe be clearer, I’m all ears. this is the general message you get when you don’t use a binding, e.g. in `(let [x 1])`</text>
  </message>
  <message conversation_id="1638">
    <ts>2019-05-28T17:40:14.261800</ts>
    <user>Latonya</user>
    <text>Maybe "duplicate binding id", if you can have a different detection and/or message for this case vs. an unused binding?</text>
  </message>
  <message conversation_id="1638">
    <ts>2019-05-28T17:41:25.262800</ts>
    <user>Latonya</user>
    <text>I don't know if you maybe already have this for clj-kondo, but a short description or message, and then a link to a place you can get more details / examples / workarounds / etc., can be useful in explaining to users what is going on.</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:42:26.263900</ts>
    <user>Clarine</user>
    <text>the detection mechanism is the same for all “unused bindings” but I could make a few tweaks here and there.
that link idea is nice, it’s the same that shellcheck does, I might implement something like that</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:43:02.264300</ts>
    <user>Clarine</user>
    <text>(btw if you’re not using shellcheck and write bash sometimes, it’s lovely)</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:43:25.264700</ts>
    <user>Latonya</user>
    <text>I use such a small subset of bash's capabilities, that it is self-linting :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T17:45:00.265200</ts>
    <user>Clarine</user>
    <text>one thing that it should have linted but didn’t: `if [ false ]; then ...`</text>
  </message>
  <message conversation_id="1639">
    <ts>2019-05-28T18:42:07.266400</ts>
    <user>Liane</user>
    <text>if i reduce over a lazy seq, will the list get realized one at a time? e.g `(reduce ... (for [x (range 2)])`</text>
  </message>
  <message conversation_id="1639">
    <ts>2019-05-28T18:49:16.266500</ts>
    <user>Otelia</user>
    <text>See:
&lt;http://clojure-doc.org/articles/language/laziness.html#lazy-sequences-chunking&gt;</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T19:16:14.266900</ts>
    <user>Dann</user>
    <text>~I think that document answers a slightly different question~
the document answers the question, I misread</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T19:17:07.267400</ts>
    <user>Otelia</user>
    <text>But not one at a time, they're realized in chunks. I thought this was the question.</text>
  </message>
  <message conversation_id="1636">
    <ts>2019-05-28T19:17:44.268000</ts>
    <user>Dann</user>
    <text>right, chunking means there's no guarantee of one at a time processing</text>
  </message>
  <message conversation_id="1640">
    <ts>2019-05-28T23:26:36.270600</ts>
    <user>Fae</user>
    <text>is this the only way to typehint "strings array"? `#^"[Ljava.lang.String;"` (not only strings, but array of any non-primitives)</text>
  </message>
  <message conversation_id="1640">
    <ts>2019-05-28T23:50:28.271400</ts>
    <user>Celestine</user>
    <text>&lt;@Fae&gt; You can use `^{:tag (class (into-array TheType []))}`</text>
  </message>
  <message conversation_id="1640">
    <ts>2019-05-28T23:58:53.271900</ts>
    <user>Fae</user>
    <text>thank you, Sean</text>
  </message>
  <message conversation_id="1640">
    <ts>2019-05-29T00:09:27.272800</ts>
    <user>Fae</user>
    <text>&lt;@Celestine&gt; I get reflection warning with your method (in repl)</text>
  </message>
  <message conversation_id="1640">
    <ts>2019-05-29T00:11:04.273200</ts>
    <user>Celestine</user>
    <text>Show your code...</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:14:48.273900</ts>
    <user>Felix</user>
    <text>Is there any reason syntax-parse style macros are not available on Clojure? They seem very convenient for a large class of macros.</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:15:58.274300</ts>
    <user>Celestine</user>
    <text>&lt;@Felix&gt; &lt;https://clojure.org/guides/faq#reader_macros&gt;</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:16:05.274400</ts>
    <user>Fae</user>
    <text>```
(set! *warn-on-reflection* true)
(let [spans (into-array opennlp.tools.util.Span [])
      s "foo"]
  (opennlp.tools.util.Span/spansToStrings
    ^{:tag (class (into-array opennlp.tools.util.Span []))}
    spans
    ^java.lang.String
    s))
```</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:17:12.275200</ts>
    <user>Fae</user>
    <text>~damn, it has into~ same</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:18:23.276400</ts>
    <user>Felix</user>
    <text>&lt;@Celestine&gt;: I'm no asking about reader macros. I'm asking about Scheme hygienic macros of syntax-case / syntax-parse.</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:18:29.276600</ts>
    <user>Fae</user>
    <text>cursive does not disambiguate it either</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:20:19.277500</ts>
    <user>Fae</user>
    <text>`^"[Lopennlp.tools.util.Span;"` and
`#^"[Lopennlp.tools.util.Span;"` do work though</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:21:48.278100</ts>
    <user>Celestine</user>
    <text>&lt;@Fae&gt; Pretty sure `:tag` only works on vars, not locals or expressions...</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:22:57.278500</ts>
    <user>Fae</user>
    <text>so I have to `def` spans for it to work?</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:24:16.279600</ts>
    <user>Celestine</user>
    <text>That would work (but I know isn't ideal). I'm not sure what exactly you need to explicitly hint an expression with type expression... I'd have to dig in the compiler source I expect...</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:25:48.280700</ts>
    <user>Fae</user>
    <text>I was curious if I could avoid string in a type hint, but it seems to be not worth it</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:30:10.282200</ts>
    <user>Fae</user>
    <text>why there is no `array?` predicate in core? Is it useless to know the collection is an array without knowing elements' class as well?</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:31:12.283000</ts>
    <user>Celestine</user>
    <text>&lt;@Fae&gt; what sort of collection? Only primitive arrays have an inherent element type, right? Not any of Clojure's collections...</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:36:21.284200</ts>
    <user>Fae</user>
    <text>like the array of custom Spans from example above. This is mostly (or only) for interop with java/js</text>
  </message>
  <message conversation_id="1642">
    <ts>2019-05-29T00:37:28.284800</ts>
    <user>Meagan</user>
    <text>In cljs, `cljs.core/array?` does exist</text>
  </message>
  <message conversation_id="1641">
    <ts>2019-05-29T00:41:16.285100</ts>
    <user>Fae</user>
    <text>there is
(.isArray (class (into-array String [])))
=&amp;gt; true</text>
  </message>
  <message conversation_id="1642">
    <ts>2019-05-29T00:47:41.285200</ts>
    <user>Jenny</user>
    <text>thanks, i’ll check those out</text>
  </message>
  <message conversation_id="1643">
    <ts>2019-05-29T01:45:01.285700</ts>
    <user>Ali</user>
    <text>Thanks to some helpful people here, I started using Claypoole yesterday (&lt;https://github.com/TheClimateCorporation/claypoole&gt;). I was delighted to notice that when I `reduce` over the results of `upmap`,  `reduce` is handed a result immediately when when `upmap` is done with it. It doesn't wait for the entire `upmap` expression to be done to do so. Feels like getting streaming for free.</text>
  </message>
  <message conversation_id="1644">
    <ts>2019-05-29T04:25:11.287600</ts>
    <user>Ivana</user>
    <text>Anyone know of simulation tools (like simulant) that do something with time manipulation? E.g. &lt;https://github.com/Datomic/simulant/wiki/Todo#variable-clock&gt;</text>
  </message>
  <message conversation_id="1645">
    <ts>2019-05-29T05:47:16.290300</ts>
    <user>Brent</user>
    <text>When using namespaced keywords, is it possible to create a short alias when the namespace part of the keyword does not correspond to an actual Clojure namespace? I tried ```
(alias 'dom 'my.awesome.app.domain)
{::dom/greeting "hello"}``` but it fails with
&amp;gt; Syntax error ... Caused by: java.lang.Exception: No namespace: my.awesome.app.domain found</text>
  </message>
  <message conversation_id="1645">
    <ts>2019-05-29T06:17:38.290700</ts>
    <user>Fae</user>
    <text>&lt;@Brent&gt;
```
(alias 'bar (create-ns 'foo))

::bar/x
=&amp;gt; :foo/x
```</text>
  </message>
  <message conversation_id="1645">
    <ts>2019-05-29T06:18:16.291100</ts>
    <user>Fae</user>
    <text>(just in case: there is no `alias` in clojurescript)</text>
  </message>
  <message conversation_id="1646">
    <ts>2019-05-29T09:12:17.292200</ts>
    <user>Cruz</user>
    <text>Has anyone ever faced such an issue with `lein-modules` lein plugin? &lt;https://github.com/jcrossley3/lein-modules/issues/42&gt;</text>
  </message>
  <message conversation_id="1647">
    <ts>2019-05-29T09:26:17.293000</ts>
    <user>Danita</user>
    <text>Hello. I'm often developing for Android and I was wondering: Is Clojure on Android dead, as of 2019?</text>
  </message>
  <message conversation_id="1647">
    <ts>2019-05-29T09:26:53.293400</ts>
    <user>Danita</user>
    <text>Last commit for lein-droid is from 3 years ago.</text>
  </message>
  <message conversation_id="1647">
    <ts>2019-05-29T09:35:37.294600</ts>
    <user>Milford</user>
    <text>&lt;@Danita&gt; Not exactly what you asked, but it's worth knowing that React Native + ClojureScript is often used to target Android.

(I don't know the answer to the question you asked.)</text>
  </message>
  <message conversation_id="1647">
    <ts>2019-05-29T09:36:26.295200</ts>
    <user>Cruz</user>
    <text>I used to develop a mobile app with re-natal, it worked well.</text>
  </message>
  <message conversation_id="1648">
    <ts>2019-05-29T09:38:31.296000</ts>
    <user>Laurena</user>
    <text>Hello, is there an equivalent to `clj-time.spec` in  `clojure.java-time`?</text>
  </message>
  <message conversation_id="1647">
    <ts>2019-05-29T09:38:57.296300</ts>
    <user>Danita</user>
    <text>I see. Thanks for the info.</text>
  </message>
  <message conversation_id="1649">
    <ts>2019-05-29T10:12:44.298000</ts>
    <user>Jeannette</user>
    <text>does this function have a name? #(%1 %2)</text>
  </message>
  <message conversation_id="1649">
    <ts>2019-05-29T10:13:11.298200</ts>
    <user>Harris</user>
    <text>`invoke` if you're looking for a name, but it's not defined in `clojure.core`</text>
  </message>
  <message conversation_id="1649">
    <ts>2019-05-29T10:13:29.298500</ts>
    <user>Jeannette</user>
    <text>i see</text>
  </message>
  <message conversation_id="1649">
    <ts>2019-05-29T10:33:28.299200</ts>
    <user>Jeannette</user>
    <text>what is this time format?
"2015-09-27D00:01:48.788186000"
how do i parse this with java-time?
clj-time.coerce/from-string manages to parse it when I replace the D character with T!
I still can't find a way to parse it with java-time though.</text>
  </message>
  <message conversation_id="1649">
    <ts>2019-05-29T10:37:05.301400</ts>
    <user>Mathew</user>
    <text>&lt;@Jeannette&gt; I had the same problem, and I also changed the D for T to make it work, I’m interested in knowing if you find a different answer for this , thanks!</text>
  </message>
  <message conversation_id="1649">
    <ts>2019-05-29T10:39:42.301900</ts>
    <user>Jeannette</user>
    <text>sure</text>
  </message>
  <message conversation_id="1649">
    <ts>2019-05-29T10:41:03.302300</ts>
    <user>Evonne</user>
    <text>Just a guess: “D” for “Daylight Savings Time”?</text>
  </message>
  <message conversation_id="1650">
    <ts>2019-05-29T10:45:03.302800</ts>
    <user>Marlyn</user>
    <text>that datetime doesn't have a zone on it, so it's unlikely to have random info about DST</text>
  </message>
  <message conversation_id="1649">
    <ts>2019-05-29T10:45:30.303300</ts>
    <user>Evonne</user>
    <text>Yeah, not finding any online references to a “D” in place of a “T”</text>
  </message>
  <message conversation_id="1650">
    <ts>2019-05-29T10:58:46.304600</ts>
    <user>Marlyn</user>
    <text>```
(import java.time.Instant)
(import java.time.ZoneOffset)
(import java.time.format.DateTimeFormatter)
(def fmt (-&amp;gt; (DateTimeFormatter/ofPattern "yyyy-MM-dd'D'HH:mm:ss.n")
  (.withZone ZoneOffset/UTC)))
(Instant/from (.parse fmt "2015-09-27D00:01:48.788186000"))
#object[java.time.Instant 0x121c54fa "2015-09-27T00:01:48.788186Z"]
```
&lt;@Jeannette&gt; simplest way to turn it into a java.time.Instant</text>
  </message>
  <message conversation_id="1650">
    <ts>2019-05-29T10:59:01.304900</ts>
    <user>Marlyn</user>
    <text>(if you want to anchor it at UTC)</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T11:27:24.305800</ts>
    <user>Meagan</user>
    <text>has anyone paid attention to the what the Elixir folks are doing with Phoenix LiveView? </text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T11:28:12.307200</ts>
    <user>Landon</user>
    <text>can one specify mirrors in `.clj/deps.edn`?</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T11:28:56.307900</ts>
    <user>Meagan</user>
    <text>AFAICT the webpage basically opens a websocket connection to the server and the server handles streaming updates to the DOM based on user interactions </text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T11:30:00.309600</ts>
    <user>Meagan</user>
    <text>I assume that this scales OK for Elixir because of it’s ability to spin up thousands of light-weight processes to handle each page session</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T11:30:10.309900</ts>
    <user>Meagan</user>
    <text>I wonder if this would be tenable for Clojure</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T11:47:49.310900</ts>
    <user>Sixta</user>
    <text>Go threads should make it work</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T11:48:27.311600</ts>
    <user>Bart</user>
    <text>i have a compojure/routing question. i've got a login process that reroutes to a certain URL, let's call it `/loginsuccess`, that should launch some work then redirect.</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T11:49:11.312400</ts>
    <user>Bart</user>
    <text>so I have a function that does some work then returns `(response (redirect "/"))` to get to my original root-URL.</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T11:50:11.313600</ts>
    <user>Bart</user>
    <text>but now `/loginsuccess` ends up being used as referer, so it shows up in the browser as `/loginsuccess/#/browser-route` instead of `/#/browser-route`</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T12:06:57.314700</ts>
    <user>Meagan</user>
    <text>I just wonder how many concurrent sessions you’d be able to handle per node</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T12:09:19.315500</ts>
    <user>Sixta</user>
    <text>I'll naively say it's the same amount, and someone can come tell me I'm wrong</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T12:09:28.315700</ts>
    <user>Sixta</user>
    <text>But my understanding is that it's the same</text>
  </message>
  <message conversation_id="1651">
    <ts>2019-05-29T12:09:46.316100</ts>
    <user>Meagan</user>
    <text>haha</text>
  </message>
  <message conversation_id="1652">
    <ts>2019-05-29T12:50:06.317500</ts>
    <user>Meagan</user>
    <text>with how much people talk about BEAM, OTP and Erlang/Elixir’s concurrency story I figured it must be better than using a thread pool</text>
  </message>
  <message conversation_id="1652">
    <ts>2019-05-29T12:51:46.318100</ts>
    <user>Sixta</user>
    <text>Go doesn't though, go is a green thread</text>
  </message>
  <message conversation_id="1652">
    <ts>2019-05-29T12:53:04.319000</ts>
    <user>Meagan</user>
    <text>if you’re talking about core.async, I thought core.async is basically a state machine / scheduler on top of a thread pool?</text>
  </message>
  <message conversation_id="1652">
    <ts>2019-05-29T12:54:04.320200</ts>
    <user>Meagan</user>
    <text>honestly I’m totally naive about the way both core.async and BEAM actually work so I’m just going off of shallow readings I’ve done about both</text>
  </message>
  <message conversation_id="1653">
    <ts>2019-05-29T13:42:04.320800</ts>
    <user>Sixta</user>
    <text>It is a state machine, yeah. But that is copied from the .net model for the same kind of thing. That's basically what green threads are I think.</text>
  </message>
  <message conversation_id="1652">
    <ts>2019-05-29T13:45:57.321000</ts>
    <user>Meagan</user>
    <text>Right, so I guess my question still is: how does core.asyncs green threads scale in this case compared to BEAMs processes?</text>
  </message>
  <message conversation_id="1652">
    <ts>2019-05-29T13:46:07.321200</ts>
    <user>Meagan</user>
    <text>I wish someone had some benchmarks</text>
  </message>
  <message conversation_id="1654">
    <ts>2019-05-29T14:35:11.324500</ts>
    <user>Zita</user>
    <text>&lt;@Jeannette&gt; Now I’m not sure what you’re asking. IIUC, the `#(…)` macro generates an anonymous closure. `invoke` is called on the resulting closure (`IFn`) when… well, invoked. Am I grokking the question?</text>
  </message>
  <message conversation_id="1654">
    <ts>2019-05-29T14:40:50.327000</ts>
    <user>Jeannette</user>
    <text>&lt;@Zita&gt; I was wondering what is the equivalent of the idea of (fn[f x] (f x)), if there is a core function that names it for example. I was not conscious that functions are implementations of an interface under the hood though.</text>
  </message>
  <message conversation_id="1654">
    <ts>2019-05-29T14:52:06.329300</ts>
    <user>Zita</user>
    <text>Ah, yes. So to At the clojure level, `#(%1 %2)` just yields an anonymous closure `(fn [f x] (f x))` which implements `IFn`, as above. When the form is evaluated, `invoke` is called on the resulting `IFn` object.</text>
  </message>
  <message conversation_id="1654">
    <ts>2019-05-29T15:02:19.330400</ts>
    <user>Rosia</user>
    <text>I'm trying to use jsonista custom encoders to emit epoch milliseconds when given a ZonedDateTime... anyone know why this isn't working? It's copied almost directly from the custom encoder example:
```
(let [encoders {java.time.ZonedDateTime
                (fn [zdt gen] (.writeString gen (-&amp;gt; zdt .toInstant .toEpochMilli str)))}
      mapper   (j/object-mapper {:encoders encoders})]
  (j/write-value-as-string (java.time.ZonedDateTime/now) mapper))
```</text>
  </message>
  <message conversation_id="1655">
    <ts>2019-05-29T15:28:23.331500</ts>
    <user>Rosia</user>
    <text>I guess jackson-databind which jsonista uses has its own date handlers, which seem unable to be overridden like this. Is there another way to override them easily or is this not meant to be done?</text>
  </message>
  <message conversation_id="1656">
    <ts>2019-05-29T16:30:42.332900</ts>
    <user>Brent</user>
    <text>How do I call `public static Path get(String first, String... more)` from Clojure? `(Paths/get "mydir")` fails because it invokes `get(URI path)`. There must be better way then `(Paths/get "mydir", (into-array String nil))`, no?</text>
  </message>
  <message conversation_id="1656">
    <ts>2019-05-29T16:31:30.333100</ts>
    <user>Rosaline</user>
    <text>why must there be?</text>
  </message>
  <message conversation_id="1656">
    <ts>2019-05-29T16:33:05.334500</ts>
    <user>Rosaline</user>
    <text>clojure's interop is generally more jvm interop then java interop, and varargs like that exist in java the language, not the jvm, where you must pass an array like that</text>
  </message>
  <message conversation_id="1656">
    <ts>2019-05-29T16:42:28.335900</ts>
    <user>Celestine</user>
    <text>`T...` is Java's syntactic sugar for `T[]` at the JVM level -- which is what all non-Java languages have to interop with.</text>
  </message>
  <message conversation_id="1656">
    <ts>2019-05-29T16:49:38.338000</ts>
    <user>Letitia</user>
    <text>To add to Sean’s comment: you can see there are two arguments required for the string kind unfortunately
```(-&amp;gt;&amp;gt; (clojure.reflect/reflect Paths)
                    :members
                    (filter (comp #{'get} :name))
                    (map :parameter-types))```
the second being the array</text>
  </message>
  <message conversation_id="1657">
    <ts>2019-05-29T16:59:10.339400</ts>
    <user>Suzann</user>
    <text>&lt;https://hashrocket.com/blog/posts/websocket-shootout&gt;</text>
  </message>
  <message conversation_id="1656">
    <ts>2019-05-29T16:59:27.339700</ts>
    <user>Meagan</user>
    <text>:clap:</text>
  </message>
  <message conversation_id="1658">
    <ts>2019-05-29T19:56:37.340500</ts>
    <user>Larissa</user>
    <text>Hello all, is there any one that used `fn-fx` for JavaFX?</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T02:32:16.001700</ts>
    <user>Ali</user>
    <text>Does anyone know how to set a custom entity resolver with `clojure.xml/parse`? I need to reroute online DTDs to local ones. Currently I'm rewriting the XML itself with regexes, which seems a bit non-idiomatic.</text>
  </message>
  <message conversation_id="1656">
    <ts>2019-05-30T05:19:38.003200</ts>
    <user>Clarine</user>
    <text>regarding performance:
```
user=&amp;gt; (defn contains [t] (contains? #{:foo :bar} t))
#'user/contains
user=&amp;gt; (defn contains2 [t] (or (= :foo t) (= :bar t)))
#'user/contains2
```
it seems that contains2 is ~twice as fast, although the idiom in contains is very common.</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:24:14.005400</ts>
    <user>Nieves</user>
    <text>it is clear, in first case it have to create additional set structure and search in it. But it is more readable and noone thinks about 2 times fast on nanoseconds</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:25:12.005900</ts>
    <user>Clarine</user>
    <text>maybe Clojure optimizes the first case by creating the set at compile time? but maybe not</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:29:19.007800</ts>
    <user>Nieves</user>
    <text>Not sure about sets (they can hold values unknown on compile stage), but I guess that `case t` will most fastest way for this code</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:30:08.008800</ts>
    <user>Clarine</user>
    <text>or something like this:
```
(defmacro one-of [x elements]
  `(or ~@(for [e elements]
           `(= ~e ~x))))

(let [x 10] (one-of x [1 2 3]))
```</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:30:49.009200</ts>
    <user>Clarine</user>
    <text>you can indeed also write: `(let [x 10] (case x (1 2 3) true false))`</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:32:11.010600</ts>
    <user>Nieves</user>
    <text>But why you try to catch nanoseconds but not clear readable code with `some?` or using `set`?</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:33:32.011800</ts>
    <user>Clarine</user>
    <text>case appears to be much faster:
```
user=&amp;gt; (time (dotimes [_ 10000000] (one-of :bar [:foo :bar])))
"Elapsed time: 221.057525 msecs"
nil
user=&amp;gt; (time (dotimes [_ 10000000] (case :foo (:foo :bar) true false)))
"Elapsed time: 61.048416 msecs"
```</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:33:35.012000</ts>
    <user>Nieves</user>
    <text>And I am afraid that `for` macro also expands in a tremendous batch of forms</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:34:35.013200</ts>
    <user>Nieves</user>
    <text>oh, I see, it will on compile time</text>
  </message>
  <message conversation_id="1659">
    <ts>2019-05-30T05:34:40.013300</ts>
    <user>Harris</user>
    <text>at load time, but yes</text>
  </message>
  <message conversation_id="1660">
    <ts>2019-05-30T07:15:42.015100</ts>
    <user>Marcelle</user>
    <text>For my project, some modules are loaded from `~/.m2`, and some from `/var/maven`. How can I control the exact location (e.g. force all to load from `~/.m2`)?</text>
  </message>
  <message conversation_id="1660">
    <ts>2019-05-30T12:36:23.016300</ts>
    <user>Rosaline</user>
    <text>What kind of os are you using?</text>
  </message>
  <message conversation_id="1660">
    <ts>2019-05-30T12:38:04.016600</ts>
    <user>Rosaline</user>
    <text>/var/maven is a very non-standard thing, so either it is some setting in some tool you are using, or some non-standard packaging of some tool you are usig</text>
  </message>
  <message conversation_id="1661">
    <ts>2019-05-30T13:25:32.016800</ts>
    <user>Sixta</user>
    <text>Nix?</text>
  </message>
  <message conversation_id="1661">
    <ts>2019-05-30T13:26:24.017200</ts>
    <user>Dann</user>
    <text>your maven config should be controlling where it looks for local archives</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:40:44.017900</ts>
    <user>Alease</user>
    <text>Is the clojure syntax indescernable from edn, or is edn specifically used in the context of serialization?</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:44:28.019000</ts>
    <user>Sixta</user>
    <text>Edn is for serialization. Clojure syntax is a superset of edn.</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:45:21.019700</ts>
    <user>Dann</user>
    <text>edn is a string format</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:50:41.020400</ts>
    <user>Alease</user>
    <text>you can essentially change a clj file to edn and it's still valid?</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:50:50.020700</ts>
    <user>Alease</user>
    <text>or does edn have some declaration standards?</text>
  </message>
  <message conversation_id="1663">
    <ts>2019-05-30T13:54:21.021800</ts>
    <user>Larissa</user>
    <text>Hello all, how can I translate this to clojure?
```table.setOnMousePressed(new EventHandler&amp;lt;MouseEvent&amp;gt;() {
    @Override 
    public void handle(MouseEvent event) {
        if (event.isPrimaryButtonDown() &amp;amp;&amp;amp; event.getClickCount() == 2) {
            System.out.println(table.getSelectionModel().getSelectedItem());                   
        }
    }
});```</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:54:35.022200</ts>
    <user>Sixta</user>
    <text>You can change anything you edn and it's valid edn?</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:57:54.022600</ts>
    <user>Dann</user>
    <text>&lt;@Alease&gt; I'm pretty sure there's things in clojure that the edn standard doesn't' accept</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:58:52.022700</ts>
    <user>Sixta</user>
    <text>#() is the easy one</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:59:01.022900</ts>
    <user>Sixta</user>
    <text>Also ' behaves differently in edn</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:59:08.023100</ts>
    <user>Dann</user>
    <text>haha, just as I was about to paste this ```user=&amp;gt; (clojure.edn/read-string "#()")
RuntimeException No dispatch macro for: (  clojure.lang.Util.runtimeException (Util.java:221)```</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:59:17.023300</ts>
    <user>Becki</user>
    <text>and java interop, yes?</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:59:31.023500</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (clojure.edn/read-string "`(foo ~bar)")
RuntimeException Invalid leading character: `  clojure.lang.Util.runtimeException (Util.java:221)
```</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:59:45.023700</ts>
    <user>Sixta</user>
    <text>Well, java interop is valid edn</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T13:59:49.023900</ts>
    <user>Sixta</user>
    <text>Because symbols</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:00:19.024100</ts>
    <user>Becki</user>
    <text>ah you're right</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:00:32.024300</ts>
    <user>Dann</user>
    <text>interop seems fine ```user=&amp;gt; (clojure.edn/read-string "(java.util.Date.)")
(java.util.Date.)
user=&amp;gt; (clojure.edn/read-string "Math/PI")
Math/PI
user=&amp;gt; (clojure.edn/read-string "(. Math PI)")
(. Math PI)
```</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:01:27.024500</ts>
    <user>Dann</user>
    <text>another big one: ```user=&amp;gt; (clojure.edn/read-string "::foo")
RuntimeException Invalid token: ::foo  clojure.lang.Util.runtimeException (Util.java:221)

```</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:01:46.024700</ts>
    <user>Dann</user>
    <text>edn can't have a current namespace, so auto-namespaced symbols don't make sense</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:03:39.024900</ts>
    <user>Sixta</user>
    <text>I kinda wish edn had a facility for namespaces :(</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:04:10.025100</ts>
    <user>Dann</user>
    <text>it does, just not a "current namespace" ```user=&amp;gt; (clojure.edn/read-string ":foo/bar")
:foo/bar```</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:06:57.025300</ts>
    <user>Alease</user>
    <text>neat info, I wasn't sure, I was watching an older rich video and he ploped some clojure code and showed it as edn, so I wasn't sure if there was some connection outside of serialization to the language</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:09:17.025500</ts>
    <user>Dann</user>
    <text>it's intentional that everything that is valid edn (or nearly so) is valid in clojure source (as syntax or literal)</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:09:30.025700</ts>
    <user>Dann</user>
    <text>but it doesn't extend to everything in the other direction</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:10:26.025900</ts>
    <user>Dann</user>
    <text>on the other hand, metadata (and the `^` metadata shorthand) does work on edn, and transfers to the read value</text>
  </message>
  <message conversation_id="1662">
    <ts>2019-05-30T14:10:40.026100</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (clojure.edn/read-string "^:foo []")
[]
user=&amp;gt; (meta *1)
{:foo true}```</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:29:20.030000</ts>
    <user>Luz</user>
    <text>I ran into a weird issue just now where I was wrapping `with-redefs` in a `fn`. When I tried to execute the function, the `with-redefs` would _fail_ for a function that I was rebinding but _succeed_ for an atom that I was rebinding. After relocating `with-redefs` so that it wrapped the `fn` instead, everything works.

I'm actually struggling to put this into a toy example, for whatever reason.

Clearly there is something going on I don't understand. Just wondering if there is any obvious "gotcha" that I ran into.</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:29:29.030100</ts>
    <user>Marlyn</user>
    <text>regexes and `#'var`</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:36:41.030900</ts>
    <user>Sixta</user>
    <text>I also miss regex (in config files)</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:36:49.031200</ts>
    <user>Dann</user>
    <text>was the fn called by something lazy that might escape the context of the with-redefs form?</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:40:46.031700</ts>
    <user>Luz</user>
    <text>i don't think it would be evaluated lazily. here's what was calling `fn`:

```(defn with-props
  "Temporarily rebinds props and calls `f`"
  [props-map f]
  (let [old-props (atom {})]
    (doseq [[k v] props-map]
      (swap! old-props assoc k (.getProperty props/properties k))
      (.setProperty props/properties k v))
    (f)
    (doseq [[k v] @old-props]
      (.setProperty props/properties k v))))```</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:42:52.032000</ts>
    <user>Dann</user>
    <text>and where is the with-redef? - oh it's inside f</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:43:59.033200</ts>
    <user>Luz</user>
    <text>basically i had been calling

```(with-props {} 
  (fn [] 
    (with-redefs [my vars]
      (do-stuff))))```</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:44:51.034100</ts>
    <user>Dann</user>
    <text>yeah, my question was if any of (do-stuff) might be lazy, or otherwise execute after with-redefs exits</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:45:03.034400</ts>
    <user>Dann</user>
    <text>(eg. if it uses other threads)</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:45:38.034700</ts>
    <user>Luz</user>
    <text>oh. that's exactly what it is :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:46:09.035500</ts>
    <user>Luz</user>
    <text>was writing to a channel, and the consumer of the channel had the var i was trying to redef</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:46:12.035700</ts>
    <user>Luz</user>
    <text>of course</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:46:24.036100</ts>
    <user>Dann</user>
    <text>also - with-redefs is a really blunt tool - it's redefining those vars in all your other threads!</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:46:46.036700</ts>
    <user>Dann</user>
    <text>if two threads both use with-redefs, you have a race condition that could lose the original pre-redef values</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:48:10.038300</ts>
    <user>Dann</user>
    <text>a (grabs bindings)
a (stashes bindings)
a (sets bindings)
b (grabs bindings)
a (resets bindings)
b (stashes bindings)
b (sets bindings)
b ("resets" bindings)</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:48:22.038700</ts>
    <user>Dann</user>
    <text>that last step actually sets the bindings from a, not the original bindings</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:48:43.039400</ts>
    <user>Dann</user>
    <text>I wouldn't use with-redefs outside tests, and even then I'd be sceptical</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:50:04.040000</ts>
    <user>Dann</user>
    <text>(that is, if your tests use threads at all it's still likely to cause problems)</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T14:51:19.040300</ts>
    <user>Luz</user>
    <text>fortunately it's (mostly) single threaded test code, but point taken</text>
  </message>
  <message conversation_id="1665">
    <ts>2019-05-30T15:59:30.041500</ts>
    <user>Clarine</user>
    <text>where can I find in which places in `defn` or `fn` metadata can be expected? on the fn name, on arguments… where else?</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T16:00:20.041800</ts>
    <user>Dann</user>
    <text>at the end of the function body for multi-arity</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T16:00:58.042000</ts>
    <user>Dann</user>
    <text>```user=&amp;gt; (defn foo ([]) {:extra true})
#'user/foo
user=&amp;gt; (-&amp;gt; #'foo meta :extra)
true```</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T16:01:06.042300</ts>
    <user>Dann</user>
    <text>since there's no single argument list to put the meta on</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T16:02:09.042700</ts>
    <user>Dann</user>
    <text>err.. but a hash-map before the function bodies also works ```user=&amp;gt; (defn bar {:also :OK} ([]) {:extra true})
#'user/bar
user=&amp;gt; (-&amp;gt; #'bar meta :also)
:OK
user=&amp;gt; (-&amp;gt; #'bar meta :extra)
true```</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T16:03:21.044000</ts>
    <user>Clarine</user>
    <text>so those are the normal hashmaps as metadata, but in which positions can people put metadata? `(defn ^String bar ...)`, `(defn bar ^String ([] ...)`? I’d like to have a comprehensive overview</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T16:04:19.044200</ts>
    <user>Rosaline</user>
    <text>metadata can be expected anywhere</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T16:04:38.044400</ts>
    <user>Clarine</user>
    <text>good point :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T16:04:41.044500</ts>
    <user>Rosaline</user>
    <text>type hints (a specific kind of metadata) can only go certain places</text>
  </message>
  <message conversation_id="1664">
    <ts>2019-05-30T16:05:05.045000</ts>
    <user>Rosaline</user>
    <text>and only certain metadata is copied from the read forms to evaluated obejcts</text>
  </message>
  <message conversation_id="1666">
    <ts>2019-05-30T16:49:36.045700</ts>
    <user>Zenaida</user>
    <text>Hi! Could someone explain to me why `(every? vector? nil)` evaluates to `true`?</text>
  </message>
  <message conversation_id="1666">
    <ts>2019-05-30T16:50:17.046100</ts>
    <user>Zenaida</user>
    <text>Like, does it make sense &lt;https://github.com/clojure/clojure/blob/e72ffdcd039189e3fe230d160e093ae6ba8f24cf/src/clj/clojure/core.clj#L2680&gt; ?</text>
  </message>
  <message conversation_id="1666">
    <ts>2019-05-30T16:52:02.046900</ts>
    <user>Dann</user>
    <text>&lt;@Zenaida&gt; "is every member of an empty set a vector?" - this is considered true in classical logic</text>
  </message>
  <message conversation_id="1666">
    <ts>2019-05-30T16:54:06.047600</ts>
    <user>Becki</user>
    <text>colloquially you can think you need a counter example to disprove the universal. There are no counter examples in empty collections.</text>
  </message>
  <message conversation_id="1666">
    <ts>2019-05-30T16:54:38.047800</ts>
    <user>Zenaida</user>
    <text>hmmm nice! thanks for the clarification!</text>
  </message>
  <message conversation_id="1667">
    <ts>2019-05-31T00:28:27.049800</ts>
    <user>Renata</user>
    <text>Hi, is there a something equivalent to GOPROXY in maven for fetching dependencies. In our CI whenever it tries to build a jar it fetches the dependencies every time from Clojars.</text>
  </message>
  <message conversation_id="1668">
    <ts>2019-05-31T01:25:24.052000</ts>
    <user>Rosaline</user>
    <text>It sounds like using docker without keeping your .m2 cache between builds, so persist your m2 between builds</text>
  </message>
  <message conversation_id="1667">
    <ts>2019-05-31T01:46:10.052200</ts>
    <user>Renata</user>
    <text>But to build up m2 it will still fetch it from clojars right,</text>
  </message>
  <message conversation_id="1667">
    <ts>2019-05-31T01:52:34.052400</ts>
    <user>Sixta</user>
    <text>Only the first time</text>
  </message>
  <message conversation_id="1666">
    <ts>2019-05-31T06:06:24.054000</ts>
    <user>Merna</user>
    <text>Anyone got any preferences for picking things out of parsed xml these days? I like the look of the approach in &lt;https://juxt.pro/blog/posts/xpath-in-transducers.html&gt; but there's no library there or anything, just some notes - wondering if maybe there's something out there now</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T07:40:07.054700</ts>
    <user>Harris</user>
    <text>maybe try spectre</text>
  </message>
  <message conversation_id="1670">
    <ts>2019-05-31T10:17:52.057500</ts>
    <user>Esther</user>
    <text>Anyone here have experience with Clj on Windows through PowerShell versus Windows Subsystem for Linux?</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T11:09:40.061100</ts>
    <user>Zona</user>
    <text>I use `clj` with powershell</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T11:10:04.061300</ts>
    <user>Zona</user>
    <text>it seems fine?</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T11:10:30.061600</ts>
    <user>Brent</user>
    <text>I want to read a long file, processing the lines, without keeping all of it in the memory. Is there a nice way to ensure the resource is closed once the whole line-seq is consumed? I guess I could wrap the processing in a transducer as they have the 1-arg "completion" arity... Thoughts? Thanks!</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T11:14:03.061700</ts>
    <user>Olympia</user>
    <text>this might help, its from data csv but it might apply to whatever you are doing &lt;https://github.com/clojure/data.csv#laziness&gt;</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T11:23:20.062000</ts>
    <user>Brent</user>
    <text>Thank you. The proposed solution - move with-open up - is usable but not as nice :)</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T11:25:13.062200</ts>
    <user>Danna</user>
    <text>&lt;@Brent&gt; I've had success with things like
```
(defn csv-maps
  "generic low overhead way to turn (massive) csv file
   into lazily evaluated stream of maps"
  [ff &amp;amp; opts]
  (reify clojure.lang.IReduceInit
    (reduce [_ f init]
      (with-open [^BufferedReader r (jio/reader ff)]
        (let [hdr (first (apply csv/read-csv (.readLine r) opts))]
          (transduce (map (partial zipmap hdr))
                     (completing f)
                     init
                     (apply csv/read-csv r opts)))))))
```</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T11:25:46.062400</ts>
    <user>Danna</user>
    <text>you can `reduce` over that and you get maps of the row data</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T12:02:06.063300</ts>
    <user>Brent</user>
    <text>Thank you! Does it close properly when there is an exception during the processing?</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T12:44:06.063500</ts>
    <user>Danna</user>
    <text>yeah the `with-open` should take care of that</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T12:46:38.063700</ts>
    <user>Danna</user>
    <text>it expands to a
```(try
...
(finally (.close
```</text>
  </message>
  <message conversation_id="1669">
    <ts>2019-05-31T13:29:49.064300</ts>
    <user>Brent</user>
    <text>Thanks!!</text>
  </message>
  <message conversation_id="1671">
    <ts>2019-05-31T14:07:12.065000</ts>
    <user>Becki</user>
    <text>is it correct that you can never see two sequential reader macros?</text>
  </message>
  <message conversation_id="1671">
    <ts>2019-05-31T14:11:41.065900</ts>
    <user>Rosaline</user>
    <text>I don't think it is, I have never seen it done, but I believe that is supported behavior</text>
  </message>
  <message conversation_id="1671">
    <ts>2019-05-31T14:12:02.066200</ts>
    <user>Rosaline</user>
    <text>sorry, no, I am thinking of tag literals</text>
  </message>
  <message conversation_id="1671">
    <ts>2019-05-31T14:14:08.068400</ts>
    <user>Rosaline</user>
    <text>for reader macros, you can for exmaple, do things like #_#'+</text>
  </message>
  <message conversation_id="1671">
    <ts>2019-05-31T14:14:13.068500</ts>
    <user>Becki</user>
    <text>ah i think i am more precisely talking about tag literals. `#js`, `#uuid`, etc</text>
  </message>
  <message conversation_id="1671">
    <ts>2019-05-31T14:14:23.068700</ts>
    <user>Rosaline</user>
    <text>yeah, tag literals stack</text>
  </message>
  <message conversation_id="1671">
    <ts>2019-05-31T14:14:42.069000</ts>
    <user>Becki</user>
    <text>makes sense i suppose. its just function composition, yes?</text>
  </message>
  <message conversation_id="1671">
    <ts>2019-05-31T14:16:01.070200</ts>
    <user>Rosaline</user>
    <text>well sure, but the way the reader works it is basically "read the next form and hand the read result to this function", and if the next form is also a tag literal it just does that again</text>
  </message>
  <message conversation_id="1672">
    <ts>2019-05-31T14:25:12.070700</ts>
    <user>Sixta</user>
    <text>Aero configs use this a lot</text>
  </message>
  <message conversation_id="1672">
    <ts>2019-05-31T18:29:03.071600</ts>
    <user>Lana</user>
    <text>I suspect the reason you’re not seeing a lot of answers to this question is that it is a non-specific question about some code with no context or explanation. If you could be more clear about what specific parts you are having trouble with, it would be easier to help. After a bit of research, it looks like you are using JavaFX, which I never have, and I don’t know if anyone else on this channel has either. Because of that, I am not going to be able to put together a test environment to really try out my answer, which means it will likely contain mistakes. But with that caveat, and assuming that you are asking how to express that code using Clojure Java interop syntax, it would be something like this…</text>
  </message>
  <message conversation_id="1672">
    <ts>2019-05-31T18:29:18.071800</ts>
    <user>Lana</user>
    <text>First, I am assuming you have your table object in a Clojure local `table`.</text>
  </message>
  <message conversation_id="1672">
    <ts>2019-05-31T18:33:30.072000</ts>
    <user>Lana</user>
    <text>```
(.setOnMousePressed table
  (proxy [javax.event.EventHandler] []
    (handle [event]
      (when (and (.isPrimaryButtonDown event)
                 (= (.getClickCount event) 2))
                 (println (.. table getSelectionModel getSelectedItem))))))
```</text>
  </message>
  <message conversation_id="1672">
    <ts>2019-05-31T18:37:21.072600</ts>
    <user>Lana</user>
    <text>That’s not the indentation/line breaks I would really use but I adjusted it to be more readable in the narrow thread window.</text>
  </message>
  <message conversation_id="1672">
    <ts>2019-05-31T18:40:48.072800</ts>
    <user>Lana</user>
    <text>To more closely parallel your Java code (and avoid some reflection), you could type hint the `event` parameter, which would look like `(handle [^javafx.scene.input.MouseEvent event]` …)</text>
  </message>
  <message conversation_id="1672">
    <ts>2019-05-31T18:41:21.073000</ts>
    <user>Lana</user>
    <text>And you could shorten this code by importing the `EventHandler` and `MouseEvent` classes in your Clojure namespace so you would not have to fully-qualify them in your code.</text>
  </message>
  <message conversation_id="1673">
    <ts>2019-05-31T20:47:32.073800</ts>
    <user>Mohamed</user>
    <text>Using the build in `clojure` cli is there a way to make it download all the deps? The equivalent of `lein deps`?</text>
  </message>
  <message conversation_id="1673">
    <ts>2019-05-31T20:49:24.075000</ts>
    <user>Rossie</user>
    <text>with the clojure/deps.edn ecosystem, is there a good reason to stuff a project with multiple components (let's say server/client binary) that don't make sense separately but are developed mostly in tandem in 1 deps.edn file or multiple?</text>
  </message>
  <message conversation_id="1673">
    <ts>2019-05-31T20:49:53.075700</ts>
    <user>Rossie</user>
    <text>I ask  because i've currently done that with leiningen and hit a whole bunch of long-standing profile-related bugs</text>
  </message>
  <message conversation_id="1673">
    <ts>2019-05-31T21:01:35.076700</ts>
    <user>Kirsten</user>
    <text>just running `clojure` alone will download the deps declared in deps.edn</text>
  </message>
  <message conversation_id="1673">
    <ts>2019-05-31T21:05:33.077000</ts>
    <user>Marlyn</user>
    <text>that will start a repl</text>
  </message>
  <message conversation_id="1673">
    <ts>2019-05-31T21:05:46.077200</ts>
    <user>Marlyn</user>
    <text>if you don't want that run `clojure -Spath &amp;gt; /dev/null`</text>
  </message>
  <message conversation_id="1674">
    <ts>2019-05-31T21:45:43.077700</ts>
    <user>Mohamed</user>
    <text>Thank you </text>
  </message>
  <message conversation_id="1674">
    <ts>2019-05-31T21:57:26.078500</ts>
    <user>Mohamed</user>
    <text>&lt;@Marlyn&gt; what does -Spath do?</text>
  </message>
  <message conversation_id="1674">
    <ts>2019-05-31T22:36:49.078800</ts>
    <user>Marlyn</user>
    <text>computes the classpath</text>
  </message>
  <message conversation_id="1675">
    <ts>2019-06-01T02:23:01.080700</ts>
    <user>Sixta</user>
    <text>&lt;@Rossie&gt; in JUXT/edge we use separate deps.edn files, and then use :local/root to pull them together.</text>
  </message>
  <message conversation_id="1675">
    <ts>2019-06-01T02:24:58.082700</ts>
    <user>Sixta</user>
    <text>On client projects (this hasn't been demo'd too much) we have designed extensive setups where the configs are factored out to make it easier to pull applications together this way.</text>
  </message>
  <message conversation_id="1676">
    <ts>2019-06-01T05:28:50.086000</ts>
    <user>Laticia</user>
    <text>i’m using http-kit to write a simple API server. does anyone know how to add SSL support to it directly with Clojure? by directly I mean without using an external reverse proxy (like nginx) or SSL terminator. Internal ones (i.e. inside the JVM where I could control with Clojure) are perfect</text>
  </message>
  <message conversation_id="1676">
    <ts>2019-06-01T05:34:39.088100</ts>
    <user>Laticia</user>
    <text>the reason i’d like to have control over the SSL part is because the API server is a test server for a custom SSL client on MCU, and we want to be able to generate new SSL certificate and have multiple SSL sockets listening with different certificates (for testing successful cases and unsuccessful cases)</text>
  </message>
  <message conversation_id="1676">
    <ts>2019-06-01T05:39:20.088800</ts>
    <user>Laticia</user>
    <text>i’ll try jetty for now but if anyone has better suggestion it would be great</text>
  </message>
  <message conversation_id="1676">
    <ts>2019-06-01T05:46:22.088900</ts>
    <user>Karren</user>
    <text>This still sounds like a perfectly doable thing with nginx or other proxy: &lt;https://stackoverflow.com/a/38054382/1184752&gt;</text>
  </message>
  <message conversation_id="1676">
    <ts>2019-06-01T05:48:20.089200</ts>
    <user>Laticia</user>
    <text>yeah sure i’m using a configuration like that for the production server but this is for the testing server and would like direct control over ssl configuration (including certificate generation) directly from the Clojure codebase</text>
  </message>
  <message conversation_id="1677">
    <ts>2019-06-01T09:17:42.090500</ts>
    <user>Aubrey</user>
    <text>The pedestal codebase might have some ready-made code you can either use directly or copy-paste </text>
  </message>
  <message conversation_id="1676">
    <ts>2019-06-01T09:38:39.090800</ts>
    <user>Laticia</user>
    <text>that’s a great note. this file has many interesting snippet:
&lt;https://github.com/pedestal/pedestal/blob/09dd88c4ce7f89c7fbb7a398077eb970b3785d2d/jetty/src/io/pedestal/http/jetty.clj&gt;</text>
  </message>
  <message conversation_id="1677">
    <ts>2019-06-01T09:39:31.091000</ts>
    <user>Laticia</user>
    <text>for anyone who’s curious, i finished the exploring and got a working piece so far by using
- Bouncy Castle to generate a keypair and a self-signed certificate
- a KeyStore instance of type “pkcs12” to hold the certificate + private key
- Jetty with a ServerConnection configured with a SslConnectionFactory and a HttpConnectionFactory to finally get a running server</text>
  </message>
  <message conversation_id="1676">
    <ts>2019-06-01T09:43:07.091500</ts>
    <user>Laticia</user>
    <text>not sure who else is interested but i may post a gist after cleaning the code a little bit another day</text>
  </message>
  <message conversation_id="1678">
    <ts>2019-06-01T10:59:25.092300</ts>
    <user>Sheron</user>
    <text>where do you host your stuff ?</text>
  </message>
  <message conversation_id="1678">
    <ts>2019-06-01T11:00:54.093600</ts>
    <user>Sheron</user>
    <text>if on amazon i would recommend using alb or elb instead of doing the ssl stuff yourself ... yes it costs a little extra but is well worth the money</text>
  </message>
  <message conversation_id="1678">
    <ts>2019-06-01T11:11:33.094000</ts>
    <user>Tressa</user>
    <text>even locally, an nginx reverse proxy can alleviate lots of that pain</text>
  </message>
  <message conversation_id="1679">
    <ts>2019-06-01T11:42:43.094600</ts>
    <user>Scotty</user>
    <text>Could you have a look, is this solution good enough, or am I misusing protocols this way?

The problem: I have a code that reads/writes things to a serial port. There are places in program where a number of reads/writes is expected to be finished by a specific deadline (protocol description contains phrases like "if the whole data frame was not received within 1500ms, application should stop receiving it and return to idle state.") I have tried to weave the operation deadline through reading/parsing routines (the data frame cannot be read in one operation, as it contains embedded lengths), but it was awkward. At the end I bound a `deadline` to a port object. (edited: moved `read-byte` out of interface)</text>
  </message>
  <message conversation_id="1679">
    <ts>2019-06-01T11:45:16.095300</ts>
    <user>Toccara</user>
    <text>Hello guys</text>
  </message>
  <message conversation_id="1679">
    <ts>2019-06-01T11:45:57.095900</ts>
    <user>Toccara</user>
    <text>how can i embed values into xml files in clojure?</text>
  </message>
  <message conversation_id="1679">
    <ts>2019-06-01T11:46:09.096200</ts>
    <user>Toccara</user>
    <text>something like erb in ruby for example</text>
  </message>
  <message conversation_id="1679">
    <ts>2019-06-01T11:50:36.096500</ts>
    <user>Toccara</user>
    <text>i guess i found &lt;https://freemarker.apache.org/&gt;</text>
  </message>
  <message conversation_id="1679">
    <ts>2019-06-01T11:50:50.097000</ts>
    <user>Toccara</user>
    <text>if someone interested too :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1679">
    <ts>2019-06-01T12:00:34.097200</ts>
    <user>Toccara</user>
    <text>&lt;https://github.com/yogthos/Selmer&gt; also</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:04:38.100100</ts>
    <user>Loria</user>
    <text>Are `#`, `%` and `&amp;amp;` valid characters in a Clojure(script) symbol? I couldn't find an official language spec, and the rules given in &lt;https://clojure.org/reference/reader&gt; seem overly restrictive</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:07:09.101100</ts>
    <user>Loria</user>
    <text>```
Symbols begin with a non-numeric character and can contain alphanumeric characters and *, +, !, -, _, ', ?, &amp;lt;, &amp;gt; and = (other characters may be allowed eventually).
```</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:08:08.102300</ts>
    <user>Latonya</user>
    <text>The rules given at &lt;http://clojure.org|clojure.org&gt; are what is explicitly supported.  The implementation does not prevent you from using other characters, but using some of those other characters can cause some use cases to break</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:09:27.103200</ts>
    <user>Latonya</user>
    <text>If you are looking for an implementation of (symbol "some string") or (keyword "some string") that throws an exception if you give it a character that is outside of a particular set of characters, you will have to write it yourself or find it in some third party library.</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:10:20.104000</ts>
    <user>Loria</user>
    <text>Does that mean that using e.g. `a#b$c` as a variable name could potentially be broken in a future release of Clojure?</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:11:31.105200</ts>
    <user>Latonya</user>
    <text>I am not the decision maker on what changes in future releases of Clojure, so can't authoritatively answer such a question, but I can say that the Clojure maintainers do a great job at maintaining backwards compatibility, and rarely make changes that break such things.  They know that because the implementation allows other characters, that many people take advantage of htat.</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:12:30.106200</ts>
    <user>Latonya</user>
    <text>But for example if you find that using such a variable name causes, say, printing your code or data to a file, then reading it back, to break, then if you are using characters outside of the allowed set, and that is the reason it is breaking, you will likely not get a lot of people rushing to change Clojure to make that work.</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:13:19.106900</ts>
    <user>Latonya</user>
    <text>For example, if you use a space in a symbol or keyword, that will break the ability to print code/data and read it back and be equal to the original.</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:14:36.107900</ts>
    <user>Loria</user>
    <text>that makes sense, spaces are definitely off-limits</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:14:48.108400</ts>
    <user>Latonya</user>
    <text>There is a Clojure JIRA issue that suggests some kinds of actions in this area -- I am forgetting whether it was only adding more documentation for Clojure, or adding a function that would check whether a proposed string was a supported symbol/keyword</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:15:25.109600</ts>
    <user>Latonya</user>
    <text>Semicolons would be another thing that might be a bit grey in terms of print-read round-tripping.  Probably many others.</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:15:39.109900</ts>
    <user>Latonya</user>
    <text>commas</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:16:36.111700</ts>
    <user>Madeleine</user>
    <text>You can easily extend printing and reading though. I've added support for spaced namespaces and symbols in some use cases where it was convenient</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:16:45.112000</ts>
    <user>Loria</user>
    <text>I was wondering because clojure-mode in Emacs highlighted a variable name `foo#bar` wrongly, and I couldn't find out if it was an actual bug or according to spec</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:16:52.112400</ts>
    <user>Madeleine</user>
    <text>And it can round-trip if you need it serialized</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:16:54.112600</ts>
    <user>Latonya</user>
    <text>Here is the JIRA issue I was thinking of: &lt;https://clojure.atlassian.net/browse/CLJ-1527&gt;</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:20:24.113800</ts>
    <user>Madeleine</user>
    <text>I don't think I've ever seen a breakage related to what are valid symbols and namespaces. Like no version of Clojure ever broke that.</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:20:45.114400</ts>
    <user>Madeleine</user>
    <text>So I'd say, it it works, you're probably good to go</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:21:48.115100</ts>
    <user>Latonya</user>
    <text>But if you go to significant lengths, e.g. days and days of work, trying to get color highlighting "working" (whatever that means to you) for arbitrary sequences of characters, you may go mad. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1680">
    <ts>2019-06-01T14:26:35.115500</ts>
    <user>Loria</user>
    <text>thanks for the clarifications! :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1681">
    <ts>2019-06-01T16:40:43.115900</ts>
    <user>Sixta</user>
    <text>Is it possible to use tools.reader to read a form as a string? Preserving whitespace. I'm guessing there might be some trick with the pushback reader, but not sure.</text>
  </message>
  <message conversation_id="1682">
    <ts>2019-06-01T18:20:24.116700</ts>
    <user>Jasmine</user>
    <text>Yes, also in the Clojure reader</text>
  </message>
  <message conversation_id="1682">
    <ts>2019-06-01T18:21:53.117100</ts>
    <user>Jasmine</user>
    <text>See &lt;http://clojure.github.io/clojure/clojure.core-api.html#clojure.core/read+string&gt;</text>
  </message>
  <message conversation_id="1683">
    <ts>2019-06-01T19:47:20.118700</ts>
    <user>Rossie</user>
    <text>I'm running: `clj -A:cli:client -m aot some-args`
the `client` alias has both an `:extra-deps` and a `:main-opts`. I was expecting the main-opts on the command line to override those from the alias, but instead the main-opts from `:client` are used. Is there an order to specify them in that fixes that, or is this why -R/-C exist?</text>
  </message>
  <message conversation_id="1682">
    <ts>2019-06-01T19:49:24.119400</ts>
    <user>Jasmine</user>
    <text>This is a known issue, but using R and C should be a workaround</text>
  </message>
  <message conversation_id="1682">
    <ts>2019-06-01T19:49:55.120000</ts>
    <user>Jasmine</user>
    <text>A will always be applied last right now</text>
  </message>
  <message conversation_id="1682">
    <ts>2019-06-01T19:50:20.120200</ts>
    <user>Rossie</user>
    <text>ah, gotcha -- thanks :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1684">
    <ts>2019-06-02T01:17:09.124900</ts>
    <user>Laticia</user>
    <text>locally, for testing purpose</text>
  </message>
  <message conversation_id="1684">
    <ts>2019-06-02T01:19:27.125100</ts>
    <user>Laticia</user>
    <text>yeah, for another project i’m doing exactly the same--using elb for ssl termination--yet this stuff is for developing and testing the “hardware” part of a solution (an MCU controlled gateway-ish thing that connects an input device to the application server running in the cloud)</text>
  </message>
  <message conversation_id="1684">
    <ts>2019-06-02T01:20:34.125300</ts>
    <user>Laticia</user>
    <text>so finally the production server will be hosted behind elb as planned now, but i was trying to make the local server and want more flexibility on certificates for testing purpose</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:32:10.127000</ts>
    <user>Modesto</user>
    <text>How would I quote the symbol `/=` ?  `'=` is fine, `'/` is fine, but `/=` says `unmatched delimiter: )`.  Do I need to escape the slash or something?</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:39:20.127400</ts>
    <user>Becki</user>
    <text>```
[dan@fedora datascript-todo]$ clj
Clojure 1.9.0
user=&amp;gt; (quote \=)
\=
user=&amp;gt; '\=
\=
```
i'm guessing this is an issue with your repl?</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:39:38.127700</ts>
    <user>Modesto</user>
    <text>That's backslash, I was trying with forward slash</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:40:37.128000</ts>
    <user>Becki</user>
    <text>oh apologies</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:41:21.128200</ts>
    <user>Becki</user>
    <text>&amp;gt; /' has special meaning, it can be used once in the middle of a symbol to separate the namespace from the name, e.g. my-namespace/foo. '/' by itself names the division function.</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:41:24.128400</ts>
    <user>Becki</user>
    <text>&lt;https://clojure.org/reference/reader&gt;</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:41:45.128700</ts>
    <user>Becki</user>
    <text>that's not a valid symbol is what i'm reading there</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:42:10.129200</ts>
    <user>Modesto</user>
    <text>yeah even this doesn't work: `(read-string "/=")`  =&amp;gt; `invalid token: /=`</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:42:37.129600</ts>
    <user>Fernande</user>
    <text>in jvm clojure i get Syntax error for (def /= 1)</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:42:52.129900</ts>
    <user>Fernande</user>
    <text>in clojurescript i get Failed to read</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:43:06.130200</ts>
    <user>Modesto</user>
    <text>so i'm making a toy library for array syntax to learn macros</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:43:16.130600</ts>
    <user>Modesto</user>
    <text>and was trying to support e.g. `a[0][1] /= 2`</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:43:43.130900</ts>
    <user>Modesto</user>
    <text>but I can't define a symbol `/=` to recognize</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:44:20.131600</ts>
    <user>Fernande</user>
    <text>perhaps because / is used for &amp;lt;namespace&amp;gt;/&amp;lt;name&amp;gt; like situations?</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:44:32.132000</ts>
    <user>Modesto</user>
    <text>yeah just not sure how to work around it</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:44:40.132400</ts>
    <user>Fernande</user>
    <text>perhaps there is no workaround</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:44:46.132600</ts>
    <user>Becki</user>
    <text>not sure you can. same as you can't make `bob)` a symbol</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:45:18.132900</ts>
    <user>Modesto</user>
    <text>I guess I'd have to recognize it as a string</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:45:32.133300</ts>
    <user>Modesto</user>
    <text>like turn the list body into a string and parse it</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:46:17.133700</ts>
    <user>Becki</user>
    <text>if you're breaking in the reader i'm not sure you can do that</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:46:46.134200</ts>
    <user>Modesto</user>
    <text>I think I could turn the body into a string and find `/=` in the string and handle it accordingly</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:46:49.134500</ts>
    <user>Becki</user>
    <text>unless you mean turn it into a string literal</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:47:03.134800</ts>
    <user>Modesto</user>
    <text>but it would probably mean I'd have to do all the other cases (e.g. `*=` the same way) :confused:</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:50:03.136000</ts>
    <user>Latonya</user>
    <text>If you are trying to "write a language" with Clojure macros that has the full library of Clojure available as well, then I'd recommend using a different symbol than `/=`, e.g. `div=`, even if that looks ugly.</text>
  </message>
  <message conversation_id="1685">
    <ts>2019-06-02T14:51:01.137300</ts>
    <user>Latonya</user>
    <text>If you are trying to write a language with its own custom syntax, and you are writing a compiler in Clojure to translate it into some other language that isn't Clojure, then you should be able to define whatever syntax you want that you can write a parser for.  I am guessing that is not what you are trying to do, though.</text>
  </message>
  <message conversation_id="1686">
    <ts>2019-06-03T01:39:42.139600</ts>
    <user>Ali</user>
    <text>Checking for a non-empty collection, `not-empty` or `seq`?</text>
  </message>
  <message conversation_id="1686">
    <ts>2019-06-03T01:54:52.140700</ts>
    <user>Bart</user>
    <text>`not-empty` is just `(when (seq coll) coll)`, so `seq`</text>
  </message>
  <message conversation_id="1686">
    <ts>2019-06-03T01:56:05.142000</ts>
    <user>Bart</user>
    <text>also `empty?` is implemented as `(not (seq coll))` which is why complementing it again with `(not (empty?))` is also not idiomatic</text>
  </message>
  <message conversation_id="1686">
    <ts>2019-06-03T01:57:58.142900</ts>
    <user>Bart</user>
    <text>assuming you're just checking for non-emptiness, `not-empty` is still useful for `conj` purposes for example</text>
  </message>
  <message conversation_id="1686">
    <ts>2019-06-03T01:59:08.143000</ts>
    <user>Ali</user>
    <text>This is just to short-circuit a function, so I'm looking for the thing that will do the least amount of work possible. Sounds like `seq`.</text>
  </message>
  <message conversation_id="1687">
    <ts>2019-06-03T02:28:49.143200</ts>
    <user>Latonya</user>
    <text>I believe that many Clojure programmers consider (seq coll) as idiomatic for this purpose.</text>
  </message>
  <message conversation_id="1686">
    <ts>2019-06-03T02:43:33.143400</ts>
    <user>Bart</user>
    <text>it's the recommended idiom for testing non-emptiness on any collection, yes</text>
  </message>
  <message conversation_id="1688">
    <ts>2019-06-03T02:45:17.143600</ts>
    <user>Alleen</user>
    <text>for counted collections, `(zero? (count coll))` should be faster (`seq` will allocate an object if non-empty)</text>
  </message>
  <message conversation_id="1688">
    <ts>2019-06-03T02:47:50.143800</ts>
    <user>Bart</user>
    <text>`seq` basically just returns an iterator though doesn't it? it doesn't do anything besides that, like attempting to convert the sequence</text>
  </message>
  <message conversation_id="1688">
    <ts>2019-06-03T02:50:40.144000</ts>
    <user>Ali</user>
    <text>Which collections are counted?</text>
  </message>
  <message conversation_id="1688">
    <ts>2019-06-03T02:52:27.144200</ts>
    <user>Alleen</user>
    <text>`seq` wraps the collection in a lazy sequence if not already one. If you call it on e.g a vector, it will coerce it and create a sequence. It's cheap, but not totally free.</text>
  </message>
  <message conversation_id="1688">
    <ts>2019-06-03T02:56:11.144400</ts>
    <user>Alleen</user>
    <text>&lt;@Ali&gt; eager collections are counted</text>
  </message>
  <message conversation_id="1688">
    <ts>2019-06-03T02:58:14.144600</ts>
    <user>Alleen</user>
    <text>some lazy seqs are counted as well but I would not rely on that</text>
  </message>
  <message conversation_id="1688">
    <ts>2019-06-03T03:11:01.145400</ts>
    <user>Ali</user>
    <text>Some measurements &lt;@Latonya&gt; &lt;@Alleen&gt;

```;; list 
(seq a-list)           ;; 18,208247 ns
(count (zero? a-list)) ;; 11,566028 ms
  
;; Vector
(seq a-vector)           ;; 14,460552 ns
(zero? (count a-vector)) ;;  5,665201 ns
  
(defn yo? [a-something]    
  (if (vector? a-something)
    (zero? (count a-something))
    (seq a-something)))
  
;; Conditional
(yo? a-list)   ;; 29,218636 ns
(yo? a-vector) ;; 22,279887 ns```</text>
  </message>
  <message conversation_id="1688">
    <ts>2019-06-03T03:12:20.145500</ts>
    <user>Ali</user>
    <text>`(zero? (count …))` appears to be faster for counted collections indeed.

Edit: Actually, rereading the numbers, using `seq` is better than a conditional check. Therfore, `(zero? (count …))` only when it's certain to be a counted collection.</text>
  </message>
  <message conversation_id="1688">
    <ts>2019-06-03T03:24:04.145800</ts>
    <user>Ali</user>
    <text>This is for a fairly large collection of about 200k items.</text>
  </message>
  <message conversation_id="1689">
    <ts>2019-06-03T03:33:58.146300</ts>
    <user>Alleen</user>
    <text>BTW `counted?` exists</text>
  </message>
  <message conversation_id="1690">
    <ts>2019-06-03T06:37:10.149700</ts>
    <user>Danita</user>
    <text>Hi, I'm trying to slowly convert some of my company on to Clojure. Do you have any good data on language adoption over the years?</text>
  </message>
  <message conversation_id="1690">
    <ts>2019-06-03T06:57:53.149800</ts>
    <user>Karren</user>
    <text>How did you measure that?</text>
  </message>
  <message conversation_id="1691">
    <ts>2019-06-03T07:15:48.150000</ts>
    <user>Amado</user>
    <text>this may be relevant (including survey data) &lt;https://clojure.org/news/2019/02/04/state-of-clojure-2019&gt;</text>
  </message>
  <message conversation_id="1690">
    <ts>2019-06-03T07:35:15.150400</ts>
    <user>Ali</user>
    <text>&lt;@Karren&gt; `(criterium/bench …)`

&lt;https://github.com/hugoduncan/criterium/&gt;</text>
  </message>
  <message conversation_id="1690">
    <ts>2019-06-03T07:37:27.150900</ts>
    <user>Danita</user>
    <text>cool thanks</text>
  </message>
  <message conversation_id="1692">
    <ts>2019-06-03T08:22:43.152000</ts>
    <user>Ali</user>
    <text>&lt;@Alleen&gt; Remeasuring with `counted?`, it seems to make a surprisingly large difference for the conditional evaluation:

```(defn yo? [a-collection]
  (if (counted? a-collection)
    (zero? (count a-collection))
    (seq a-collection)))

;; Conditional
(yo? a-list)   ;; 25,774480 ns
(yo? a-vector) ;;  9,714775 ns```</text>
  </message>
  <message conversation_id="1692">
    <ts>2019-06-03T08:27:14.152900</ts>
    <user>Min</user>
    <text>You could also do `(bounded-count 1 xs)`</text>
  </message>
  <message conversation_id="1692">
    <ts>2019-06-03T08:29:23.153800</ts>
    <user>Marlyn</user>
    <text>empty? may get a counted? check in 1.11</text>
  </message>
  <message conversation_id="1692">
    <ts>2019-06-03T08:29:34.153900</ts>
    <user>Alleen</user>
    <text>how did you build `a-list` ?</text>
  </message>
  <message conversation_id="1692">
    <ts>2019-06-03T08:31:44.154100</ts>
    <user>Ali</user>
    <text>Cool! Doesn't really help in situations where `seq` is idiomatic though.</text>
  </message>
  <message conversation_id="1692">
    <ts>2019-06-03T08:39:17.155100</ts>
    <user>Ali</user>
    <text>&lt;@Min&gt; Interesting, didn't know about that one. I'm getting these numbers:

```(zero? (bounded-count 1 a-list))   ;; 54,374905 ns
(zero? (bounded-count 1 a-vector)) ;; 14,014822 ns```</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T08:40:29.155300</ts>
    <user>Ali</user>
    <text>`yo?` seems slightly more efficient than `bounded-count`.</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T08:50:39.157800</ts>
    <user>Ali</user>
    <text>These things do make a difference. Using `(zero? (count …))` instead of `seq` (I know I'm working with vectors), I dropped the running time of a function from 3.41 seconds to 2.37 seconds (for a computation where I know the evaluation sits in a very hot path).</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T08:55:10.159100</ts>
    <user>Min</user>
    <text>I guess you could try also `(nil? (first xs))` since we're having fun with this stuff</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T08:55:24.159400</ts>
    <user>Min</user>
    <text>as long as your collection has no nils</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T08:56:19.159800</ts>
    <user>Min</user>
    <text>well it will just call seq on it so might not be so good with vectors, so yeah prolly useless</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T08:58:15.160300</ts>
    <user>Jasmine</user>
    <text>why are you even checking for a non-empty collection in the first place?</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T08:59:28.161300</ts>
    <user>Jasmine</user>
    <text>pretty much the only place I ever do this is when loop/recuring through a sequence (in which case you are forcing the seq anyways with first/rest)</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:00:43.161700</ts>
    <user>Jasmine</user>
    <text>that yo? function above returns either true/false/nil/seq which seems like a mess</text>
  </message>
  <message conversation_id="1694">
    <ts>2019-06-03T09:28:37.161800</ts>
    <user>Ali</user>
    <text>Parsing XML. I use it to halt evaluation early when a previous step in the parser produces no data of interest.

In practice it does make a difference in performance, and choosing the right way to evaluate whether data is present or not seems to make an additional difference.</text>
  </message>
  <message conversation_id="1694">
    <ts>2019-06-03T09:31:18.162000</ts>
    <user>Ali</user>
    <text>But also, it's just fun to learn the performance implications of the different alternatives. I didn't initially expect this line of investigation to yield much of interest.</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:35:03.162200</ts>
    <user>Jasmine</user>
    <text>what is the type of the thing being returned that you are checking?</text>
  </message>
  <message conversation_id="1695">
    <ts>2019-06-03T09:36:28.163000</ts>
    <user>Leeann</user>
    <text>I seem to remember that the `-` in `-main` has a special meaning, but I’m not able to google it ATM. Anyone have a link to more info about this?</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:37:20.163900</ts>
    <user>Jasmine</user>
    <text>it's the default prefix for static methods to genclass</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:37:23.164200</ts>
    <user>Madelene</user>
    <text>there’s no special meaning as such it’s just the default option for genclass</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:37:34.164500</ts>
    <user>Jasmine</user>
    <text>but that can be changed with an option to genclass</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:47:07.164600</ts>
    <user>Ali</user>
    <text>The XML documents are in JATS format which is a right mess of data-meant-to-be-read-as-metadata, data-meant-for-display, and data-meant-to-simultaneously-work-for-display-and-metadata.

My solution (which is probably suboptimal to begin with, but nevertheless) essentially invokes different parsers for different branches, that might return more data to be processed by a different parser and so on (because a "display" section, which I turn into hiccup, might return some forms that also needs to be read into proper named fields and so on).

As a side effect of this solution, parsers return a collection that might or might not be empty. To avoid looking for another parser for nothing, I kill the branch at that point.</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:48:56.164900</ts>
    <user>Jasmine</user>
    <text>well, in general, it's better to avoid making the empty collection in the first place if you can avoid it</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:49:10.165100</ts>
    <user>Jasmine</user>
    <text>that's why clojure collection functions are polymorphic on nil</text>
  </message>
  <message conversation_id="1694">
    <ts>2019-06-03T09:49:12.165300</ts>
    <user>Ali</user>
    <text>Consistently return nil and use `nil?`</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:49:17.165500</ts>
    <user>Jasmine</user>
    <text>conj, assoc, etc</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:49:36.165700</ts>
    <user>Jasmine</user>
    <text>you don't need nil?, you can just use the value itself as a logical value</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:49:42.165900</ts>
    <user>Jasmine</user>
    <text>which is either nil or not</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:50:18.166100</ts>
    <user>Jasmine</user>
    <text>(if (parse ...) branch-when-parsed branch-when-nothing)</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:52:23.166300</ts>
    <user>Ali</user>
    <text>Before `(parse …)` there's a lookup to find the correct parser, which reside in a map currently. I'm guessing that's the bottleneck that I'm circumventing.</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:55:36.166500</ts>
    <user>Ali</user>
    <text>Invoking `((get {…} nil) data)`, which resolves to `(nil data)` isn't great, so at some point I have to shut things down before it gets to that.</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:56:20.166700</ts>
    <user>Ali</user>
    <text>And it seems to be more performant to shut it down before `(get …)` than on receiving `nil` from the index.</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:57:24.166900</ts>
    <user>Jasmine</user>
    <text>why would you not find a parser?</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:57:47.167100</ts>
    <user>Jasmine</user>
    <text>could you return a default "not-found" parser that did the right thing?</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:58:26.167300</ts>
    <user>Jasmine</user>
    <text>((get parser-table nil not-found-parser) data)</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T09:59:17.167500</ts>
    <user>Jasmine</user>
    <text>make the special case not special</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T10:02:14.167700</ts>
    <user>Ali</user>
    <text>Yeah, true, I could do that. `not-found-parser` would return `nil` no matter what. Do you reckon that would be better than checking for emptiness?</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T10:02:46.167900</ts>
    <user>Jasmine</user>
    <text>yes</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T10:04:27.168100</ts>
    <user>Ali</user>
    <text>Alright, I'll give it a shot!</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T10:04:32.168300</ts>
    <user>Jasmine</user>
    <text>this is all general advice applicable in many places...  don't make empty collections, lean on polymorphic collection append functions, use identity/nil as a predicate, etc</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T10:04:51.168500</ts>
    <user>Jasmine</user>
    <text>seq is a good predicate when doing seq things. you're not doing seq things.</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T10:05:44.168800</ts>
    <user>Jasmine</user>
    <text>the code above will be smaller, more readable, and more performant</text>
  </message>
  <message conversation_id="1693">
    <ts>2019-06-03T10:06:38.169000</ts>
    <user>Ali</user>
    <text>I'll try it out and measure. Thank you. I haven't internalised the nil case into my collection of idioms like this. It's a good a time as any.</text>
  </message>
  <message conversation_id="1696">
    <ts>2019-06-03T12:40:54.170500</ts>
    <user>Larissa</user>
    <text>Hello all, is it worth to use &lt;https://github.com/daveray/seesaw&gt; yet?</text>
  </message>
  <message conversation_id="1697">
    <ts>2019-06-03T13:35:26.171000</ts>
    <user>Roslyn</user>
    <text>Use &lt;#CGHHJNENB|cljfx&gt; &lt;https://github.com/cljfx/cljfx&gt;</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:14:18.173400</ts>
    <user>Keesha</user>
    <text>Hi everyone! What scheduler do you use in your Clojure projects? I am looking for something robust and reliable, like Celery for Python. I found several libraries but from the repos not one specific one was preferred more than others.</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:28:15.173800</ts>
    <user>Dann</user>
    <text>do you need persistent and distributed scheduling?</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:29:21.174200</ts>
    <user>Dann</user>
    <text>if no, use a ScheduledThreadPoolExecutor via interop</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:30:41.175300</ts>
    <user>Dann</user>
    <text>if yes, I think the only really mature and reliable option is quartz, there's some pain points in using that java lib via interop, so it's worth considering the quartzite wrapper</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:31:31.176200</ts>
    <user>Dann</user>
    <text>(if you use a specific infrastructure tool like mesos, the built in scheduling there is an even better bet, but that's going to be highly dependent on your other infrastructure decisions)</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:41:33.178000</ts>
    <user>Keesha</user>
    <text>I haven't yet used mesos but seems cool. I am just making a small ETL tool that's probably not mission critical. I saw this as an opportunity to test out Clojure for this :smile:</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:43:54.179200</ts>
    <user>Dann</user>
    <text>if you don't need distribution (if all your threads can run in one process, which is likely true with a small ETL tool), the ScheduledThreadPoolExecutor is much simpler and easier to use and comes with the JVM. You can persist state between restarts via a normal DB.</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:44:56.180300</ts>
    <user>Dann</user>
    <text>there's that funny thing with python where the limitation of the GIL means that any tool that needs more than one thread probably ends up being fully distributed, but with clojure threads are easy to use and you can save a lot of complexity if you don't need to be distributed</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:46:55.181800</ts>
    <user>Keesha</user>
    <text>True. Being a back end engineer for like, forever, I never felt the need to go around the GIL. May be now it would actually be a problem for the data engineering tasks I would likely need to do.</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:48:19.183000</ts>
    <user>Dann</user>
    <text>what I mean is that N threads inside one process is much simpler, and better performing, than a distributed multi process solution; though maybe you don't even need threads here</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:48:45.183400</ts>
    <user>Keesha</user>
    <text>Got you! Thanks for the suggestion!</text>
  </message>
  <message conversation_id="1699">
    <ts>2019-06-03T14:53:09.183800</ts>
    <user>Fatima</user>
    <text>I’ve used this for simple task scheduling cases &lt;https://github.com/aphyr/tea-time&gt;</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:56:18.185800</ts>
    <user>Fatima</user>
    <text>It provides a nice interface. But tradeoff is that it’s an extra dependency. And ScheduledThreadPoolExecutor is probably way more battle-tested.</text>
  </message>
  <message conversation_id="1698">
    <ts>2019-06-03T14:56:18.185900</ts>
    <user>Keesha</user>
    <text>Thanks &lt;@Fatima&gt;! tea-time seems pretty intuitive! I will try it :smile:</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T16:10:44.186900</ts>
    <user>Graig</user>
    <text>Another Quartz wrapper can be found in Immutant:   &lt;http://immutant.org/documentation/current/apidoc/guide-scheduling.html&gt;</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T16:11:09.187400</ts>
    <user>Graig</user>
    <text>Haven't used yet, was going to use it soon.  Now I need to check out tea-time too :wink:</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T16:13:23.187700</ts>
    <user>Jasmine</user>
    <text>you can find some others on the &lt;https://www.clojure-toolbox.com/&gt;</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T16:13:38.188000</ts>
    <user>Jasmine</user>
    <text>under Scheduling</text>
  </message>
  <message conversation_id="1701">
    <ts>2019-06-03T16:57:37.189500</ts>
    <user>Lana</user>
    <text>If you don’t have JavaFX or are more familiar with Swing, seesaw remains quite useful. It’s the basis of my most-used project: &lt;https://github.com/Deep-Symmetry/beat-link-trigger#beat-link-trigger&gt;</text>
  </message>
  <message conversation_id="1701">
    <ts>2019-06-03T22:16:17.192100</ts>
    <user>Mariela</user>
    <text>Anyone familiar with getting spurious `No such var` errors?

Might have to do with Clojure 1.10+ error reporting

Hard to verify since this project uses 1.10+ fearures, so I can't tentatively downgrade so easily</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T22:17:19.192400</ts>
    <user>Jasmine</user>
    <text>doesn't sound familiar to me re 1.10 error reporting</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T22:17:28.192700</ts>
    <user>Jasmine</user>
    <text>repro? fuller msg? environment?</text>
  </message>
  <message conversation_id="1701">
    <ts>2019-06-03T22:26:49.192800</ts>
    <user>Mariela</user>
    <text>known-good code/project is compiling fine on:

1.10.0
1.10.1-beta2

and failing with `[org.clojure/clojure "1.10.1-RC1"]`, 100% of the times

it also is failing occasionally with 1.10.0
/ 1.10.1-beta2 with the same error, but I can't find what causes it

stacktrace doesn't appear to say much: &lt;https://gist.githubusercontent.com/vemv/3fd022882c9b2533fb3d669df8bcfc48/raw/56a711137778b25f6c1710721c2b9b8c4ce016ff/gistfile1.txt&gt;

project will be open-sourced soon. TODOed to provide a repro</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T22:34:59.193300</ts>
    <user>Jasmine</user>
    <text>RC1 is identical to beta2 (other than updating the changelog)</text>
  </message>
  <message conversation_id="1701">
    <ts>2019-06-03T22:42:34.193500</ts>
    <user>Mariela</user>
    <text>Thanks. Now I have found the true culprit: updating a certain dependency.

But still I don't know the cause of the error at all, and the reporting from the compiler side is wrong, that seems for sure.</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T22:43:35.193700</ts>
    <user>Jasmine</user>
    <text>this is in the compiler analyzer, when trying to analyze a symbol in a form</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T22:46:10.194000</ts>
    <user>Jasmine</user>
    <text>to get here, it's a qualified symbol, the namespace is found (here, sut), but when it looks up the var, there is no such var in the ns</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T22:46:49.194200</ts>
    <user>Jasmine</user>
    <text>if it's failing sporadically, you may be fighting a concurrent load issue with the namespace where it is in the process of loading</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T22:48:25.194400</ts>
    <user>Jasmine</user>
    <text>I've seen something like this with spec gen where it dynaloads test.check.generators - if you've got two threads potentially loading the same namespace at the same time, you can get spurious errors like this</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T22:53:04.194600</ts>
    <user>Jasmine</user>
    <text>why do you think the reporting is wrong?</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-03T22:59:49.194800</ts>
    <user>Mariela</user>
    <text>Thanks for the analysis!

FWIW I could find &lt;https://github.com/benfb/gorilla-repl/issues/10&gt; which seems similar (:compile-syntax-check + `no such var`).

In my repro I don't use a special Lein, any profiles, etc. It also fails in our CircleCI which is a vanilla one

The concurrent loading thing seems possible (although I have 0 dynamic loading)

&amp;gt; why do you think the reporting is wrong?

First and formost because the var is _there_, the ns form is correct, etc. It's known-good code, used in various projects.

Upgrading an unrelated tiny dependency  (which in fact is only used in _test_ code!) triggered the error.

And the reported error does not include the name of this dependency at all. That makes me think the reporter is wrong - a correct one would point in the direction of the dependency, rather than suggesting that the main project has an undefined var</text>
  </message>
  <message conversation_id="1702">
    <ts>2019-06-04T03:06:40.001100</ts>
    <user>Jaimee</user>
    <text>is there a way to tell leiningen to have a profile which ignore some files in `src` and dependencies?</text>
  </message>
  <message conversation_id="1702">
    <ts>2019-06-04T03:11:50.001800</ts>
    <user>Nieves</user>
    <text>I'm not sure, but `:exclusions` is not about it?</text>
  </message>
  <message conversation_id="1702">
    <ts>2019-06-04T03:15:55.002200</ts>
    <user>Jaimee</user>
    <text>I'm not sure but I'll try, thank you!</text>
  </message>
  <message conversation_id="1703">
    <ts>2019-06-04T06:27:45.003800</ts>
    <user>Gemma</user>
    <text>Hello guys, anyone familiar with clojure machine-head? Trying to connect to Azure Iot Hub, but getting this error: `Execution error (EOFException) at java.io.DataInputStream/readByte (DataInputStream.java:267).`</text>
  </message>
  <message conversation_id="1700">
    <ts>2019-06-04T09:54:08.005100</ts>
    <user>Lavonia</user>
    <text>Clojure reader accepts more syntax than EDN but almost all of that is just syntax sugar and after read becomes data that can be put in EDN (excluding `#=()`). Rich Hickey mentioned this in one of his talks AFAIR, emphasising the fact that `eval` deals in data structures and not text, and the LISPs give users the ability to extend the language by participating in this `eval` right after reading.
Clojure for Java Programmers part 1 if memory serves me right.</text>
  </message>
  <message conversation_id="1704">
    <ts>2019-06-04T12:44:11.009300</ts>
    <user>Mira</user>
    <text>Hi! Say I intentionally `throw` during testing but don’t want the stacktrace in the test output is that possible somehow (w/ `lein test`/`clojure.test`)? hope that makes sense?</text>
  </message>
  <message conversation_id="1704">
    <ts>2019-06-04T12:45:41.009900</ts>
    <user>Andrea</user>
    <text>There's `(is (thrown? ArithmeticException (/ 1 0))) ` and ```
(is (thrown-with-msg? ArithmeticException #"Divide by zero"
                      (/ 1 0)))``` as part of `clojure.test`. Mentioned here &lt;https://clojure.github.io/clojure/clojure.test-api.html&gt;</text>
  </message>
  <message conversation_id="1704">
    <ts>2019-06-04T12:45:56.010100</ts>
    <user>Andrea</user>
    <text>Hope that helps!</text>
  </message>
  <message conversation_id="1704">
    <ts>2019-06-04T12:52:32.010400</ts>
    <user>Mira</user>
    <text>ah yes! thanks &lt;@Andrea&gt;</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:00:25.010600</ts>
    <user>Roslyn</user>
    <text>Is there a guide or tutorial or some kind of explanation to why we should use `seq` for non-empty checks? I feel like I'm missing something, because semantics of `(not (empty? ...))` are clear, and semantics of `seq` requires deep knowledge of it's behavior and truthiness semantics... Which I know, but don't understand why it is advertised as preferred approach. I also remember there where some discussions on slack awhile ago where Alex Miller suggested to use nils instead of empty vectors, and just use `(when xs ...)`, and I'm interested to know why is this approach considered better, because without this check you might get surprising behavior when conjing will add to beginning instead of end</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:02:02.011000</ts>
    <user>Becki</user>
    <text>I kinda agree. I saw that &lt;@Marlyn&gt; mentioned that `empty?` might get a counted check in the future in which case `(not (empty?` will be necessary again. It feels like `seq` is kinda using the implementation details of `empty?`</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:05:52.012400</ts>
    <user>Nella</user>
    <text>the reason that `(seq x)` is preferred over `(not (empty? x))` is because `empty?` is implemented as `(not (seq x))`</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:06:08.012800</ts>
    <user>Nella</user>
    <text>so `(not (empty? x))` is just `(not (not (seq x)))`</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:07:11.013800</ts>
    <user>Becki</user>
    <text>right. which was my point about implementation details leaking out. When empty? gets more complicated looking at `ICounted` then using implementation details is bad, no?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:08:01.014600</ts>
    <user>Marlyn</user>
    <text>implementation details?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:08:06.014900</ts>
    <user>Roslyn</user>
    <text>I don't buy not-not argument, it's implementation detail</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:09:04.016500</ts>
    <user>Nella</user>
    <text>&lt;@Roslyn&gt; yeah, I don't really either</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:09:36.017400</ts>
    <user>Nella</user>
    <text>I just know that's a reason that is often given</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:10:06.018500</ts>
    <user>Rosaline</user>
    <text>&lt;http://clojure-log.n01se.net/date/2009-02-19.html#10:24a&gt; has some discussion that rich eventually jumps into</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:10:17.018600</ts>
    <user>Marlyn</user>
    <text>i don't understand this at all</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:13:42.019500</ts>
    <user>Becki</user>
    <text>`empty?` is defined as `(not (seq ..))` now so the common convention for "not-empty?" is just `seq`. My point is that this is true because we know the implementation of `empty`. In the future, if `empty?` were to be optimized by checking `ICounted` the idiom of just using `seq` would both miss the optimization of `empty?` and not have an obvious semantic as "not-empty?" any longer</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:14:41.019800</ts>
    <user>Marlyn</user>
    <text>it would check for counted, then do the existing impl</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:15:01.020500</ts>
    <user>Marlyn</user>
    <text>what is the optimization of `empty?` ?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:15:28.021100</ts>
    <user>Becki</user>
    <text>presumably a check that if it can be counted its count is 0</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:15:46.021600</ts>
    <user>Marlyn</user>
    <text>it's not intended as an optimization, but something so that empty? can work on transients</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:15:54.021900</ts>
    <user>Jasmine</user>
    <text>my suggestion to &lt;@Roslyn&gt; earlier is primarily due to the use case in that context - the stuff he is doing is collection stuff. In that case, lean on nil and polymorphic collection fns and avoid using empty collections at all. If you're in more of a seq context, then lean on seq.</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:17:36.023100</ts>
    <user>Jasmine</user>
    <text>in general in Clojure avoid making stuff to hold a "place" - if you do that Clojure's design will lead you to code that is simultaneously easier to read, has fewer branches, and is more performant.</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:18:24.023900</ts>
    <user>Jasmine</user>
    <text>this applies to putting nil values in maps (just omit), making empty collections (conj or assoc into nil instead), etc</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:20:49.026000</ts>
    <user>Becki</user>
    <text>that seems to argue in favor of using `(not (empty? ..` on transients then if the standard idiom `seq` is not sufficient?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:21:00.026300</ts>
    <user>Jasmine</user>
    <text>if you are working with collections (not sequences), forcing a seq just to check emptiness is not efficient</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:21:04.026500</ts>
    <user>Marlyn</user>
    <text>seq doesn't work on transients</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:21:07.026800</ts>
    <user>Marlyn</user>
    <text>at all</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:21:19.027100</ts>
    <user>Jasmine</user>
    <text>the advice to use (seq x) as a terminating predicate is primarily of use when working with sequences, where you are going to force the sequence anyways to walk it (and sequences cache that so the additive cost is negligible)</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:25:48.027900</ts>
    <user>Jasmine</user>
    <text>that is all my own internalized "best practice", so not trying to speak for Rich in any way here, fyi</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:30:47.031600</ts>
    <user>Roslyn</user>
    <text>I understand what you say about advising to use `(seq x)` where I am going to force sequence anyway, but can you elaborate more on "avoid making stuff to hold a place"? Is `(let [x (blah-&amp;gt;possibly-empty-vec blah)] (when-not (empty? x) ...))` somehow a place and `(let [x (blah-&amp;gt;non-empty-vec-or-nil blah)] (when x ...))` is not?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:32:18.032500</ts>
    <user>Roslyn</user>
    <text>I also worry about conjing into nil: I'd usually prefer to work on vectors, not lists, and conjing into nil produces a list</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:33:53.032600</ts>
    <user>Becki</user>
    <text>sorry had work. But that's why `seq` as a dual to `empty?` is a poor fit when `empty?` is updated to work on transients but its dual would not work, right?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:36:55.033200</ts>
    <user>Jasmine</user>
    <text>ah right, I actually was thinking of (conj) for that one</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:37:58.033800</ts>
    <user>Marlyn</user>
    <text>seq and empty? are not duals</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:38:22.034300</ts>
    <user>Jasmine</user>
    <text>of those two examples you give, I definitely prefer the latter</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:39:11.036100</ts>
    <user>Jasmine</user>
    <text>wouldn't you rather avoid constructing an empty vector (which takes time and consumes memory) and also write `(when x ...)` vs writing `(when-not (empty? x) ...)`?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:39:55.037400</ts>
    <user>Roslyn</user>
    <text>but `(identical? [] [])` returns true, what is taking time here?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:40:29.038100</ts>
    <user>Marlyn</user>
    <text>I've seen a lot of code that contorts itself to use `empty?` because it's perceived as more literate than `seq` -- but `seq` is a fundamental function and idiom, not some advanced feature</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:40:50.038900</ts>
    <user>Marlyn</user>
    <text>`identical?` does not work on vectors -- it happens that the compiler interns the empty vector</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:42:58.040300</ts>
    <user>Jasmine</user>
    <text>Clojure rewards you again and again for not making stuff. nils are cool. I like nils. I disagree with Hoare. :)</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:43:30.040400</ts>
    <user>Roslyn</user>
    <text>good point</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:44:45.041600</ts>
    <user>Roslyn</user>
    <text>I just realized I also prefer `blah-&amp;gt;non-empty-vec-or-nil` :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:46:55.044400</ts>
    <user>Jasmine</user>
    <text>if you're going to write stuff like `(when x ...)` though, you are committing to a philosophy and it requires some amount of discipline to return `nil` and not `[]`</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:47:03.044600</ts>
    <user>Jasmine</user>
    <text>I am all in on that</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:47:11.045100</ts>
    <user>Jasmine</user>
    <text>but make sure  everyone in your team agrees ;)</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:47:36.045500</ts>
    <user>Roslyn</user>
    <text>yeah, this approach should apply to all the codes</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:47:55.046000</ts>
    <user>Jasmine</user>
    <text>same thing on omitting attributes from maps when the value is nil</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:48:51.047000</ts>
    <user>Jasmine</user>
    <text>if you're taking that approach (again, I'm all in), then you need to be careful to avoid adding those attributes when you create the maps in the first place</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:49:23.048000</ts>
    <user>Jasmine</user>
    <text>and aware of external libs/systems that might give you maps like that</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:50:00.049400</ts>
    <user>Jasmine</user>
    <text>generally, I think it's rarely worth stripping stuff out of maps if you get them from someone else</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:50:02.049600</ts>
    <user>Roslyn</user>
    <text>&lt;@Marlyn&gt; Agree on `seq` being fundamental idiom, but `empty?` is still more literate, and a function to check if coll is empty in clojure core seems pretty fundamental as well, I don't see an argument here in favor of `seq`</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:50:37.051000</ts>
    <user>Jasmine</user>
    <text>these are functions that apply in different worlds</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:50:38.051100</ts>
    <user>Beckie</user>
    <text>I always prefer an empty collection over a `nil`.  Also, I wrote my own function `(not-empty? x)`</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:50:39.051200</ts>
    <user>Celestine</user>
    <text>For example, `clojure.java.jdbc` will give you maps with `nil` values if the column in the database was `null`. But in `next.jdbc`, at least on *master*, there's `next.jdbc.optional/as-maps` that will give you maps where `nil` values are omitted.</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:51:18.052100</ts>
    <user>Jasmine</user>
    <text>in some sense, jdbc is just surfacing sql here, so it makes total sense</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:51:25.052500</ts>
    <user>Celestine</user>
    <text>(the default `as-maps` is still `nil` values from `null` columns)</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:51:40.053000</ts>
    <user>Jasmine</user>
    <text>sql nulls are inherently overloaded</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:52:40.054400</ts>
    <user>Roslyn</user>
    <text>Yeah, right, different worlds. `nil` instead of `[]` for the win</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:53:31.055400</ts>
    <user>Jasmine</user>
    <text>&lt;@Roslyn&gt; if you are writing seq-oriented code (using -&amp;gt;&amp;gt;, map, filter, etc), seq makes total sense and I think the language designer has been quite clear that it is the proper idiom for checking whether the seq has at least one element or not</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:54:29.056100</ts>
    <user>Roslyn</user>
    <text>I usually use transducers instead of lazy sequences wherever I can for performance reasons</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:54:50.056400</ts>
    <user>Jasmine</user>
    <text>transducers aren't always faster</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:55:27.057900</ts>
    <user>Jasmine</user>
    <text>nothing wrong with using lazy seqs where it makes sense</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:56:24.059400</ts>
    <user>Roslyn</user>
    <text>hmm, I thought they are, with exception of mapcat fully realizing intermediate steps...</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:56:26.059500</ts>
    <user>Jasmine</user>
    <text>past blathering on this topic recorded here: &lt;https://clojure.org/guides/faq#transducers_vs_seqs&gt;</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:56:43.060100</ts>
    <user>Jasmine</user>
    <text>if you're only going to use 5 values, then it's a lot faster to use lazy seqs</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T16:56:44.060200</ts>
    <user>Marlyn</user>
    <text>there may be a misconception that `seq` and `empty?` are opposites</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:03:39.060600</ts>
    <user>Roslyn</user>
    <text>it's not?
```
(criterium.core/quick-bench
  (into []
        (comp
          (map inc)
          (filter odd?))
        [0 1 2 3 4 5 6 7 8 9]))
;; Execution time mean : 329.302467 ns

(criterium.core/quick-bench
  (-&amp;gt;&amp;gt; [0 1 2 3 4 5 6 7 8 9]
       (map inc)
       (filter odd?)
       doall))
;; Execution time mean : 893.769899 ns
```</text>
  </message>
  <message conversation_id="1706">
    <ts>2019-06-04T17:04:19.061200</ts>
    <user>Roslyn</user>
    <text>maybe I misunderstand you?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:04:49.061300</ts>
    <user>Jasmine</user>
    <text>but you're forcing the seq realization to compute all values</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:04:58.061500</ts>
    <user>Jasmine</user>
    <text>my point is, if you don't need all of them, it can be much faster</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:06:49.061700</ts>
    <user>Roslyn</user>
    <text>ah, sure, it's faster when I don't need everything</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:07:39.061900</ts>
    <user>Jasmine</user>
    <text>it also depends how big your colls are and how many transformations you're doing. transducers win more with bigger colls and more transformations. the majority of code like this uses small colls and 1-2 transformations.</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:08:20.062200</ts>
    <user>Jasmine</user>
    <text>and in those cases, it literally doesn't matter</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:08:28.062400</ts>
    <user>Jasmine</user>
    <text>so write the version that's easier to read</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:09:16.062700</ts>
    <user>Jasmine</user>
    <text>replies in thread</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:14:25.065000</ts>
    <user>Roslyn</user>
    <text>but in example above, with a small coll and 1-2 transformations, transducers are almost 3 times faster, why it doesn't matter?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:15:03.065300</ts>
    <user>Marlyn</user>
    <text>micro benchmarks don't matter</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:15:15.065500</ts>
    <user>Marlyn</user>
    <text>try it with a bigger computation in the xform</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:16:46.065700</ts>
    <user>Roslyn</user>
    <text>well, it's a good point that real performance issues are not what you think they are, but isn't it a death by a thousand cuts if through all your application you add extra time here and there on every coll operation?</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:16:56.065900</ts>
    <user>Jasmine</user>
    <text>"3 times" sounds really different but we're talking nanoseconds</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:17:45.066200</ts>
    <user>Jasmine</user>
    <text>so you can pay that a million times before it's 1 second different</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:18:02.066400</ts>
    <user>Jasmine</user>
    <text>so really more like death by 100 million cuts to care</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:19:02.066600</ts>
    <user>Roslyn</user>
    <text>hmm you are right, that's true</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:22:16.066800</ts>
    <user>Jasmine</user>
    <text>take &lt;https://github.com/clojure/tools.deps.alpha/blob/master/src/main/clojure/clojure/tools/deps/alpha/reader.clj#L84&gt;</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:22:45.067100</ts>
    <user>Jasmine</user>
    <text>could easily be written as a transducer, but the typical size of "merge-deps" is 3 and I much prefer the way this reads</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:23:43.067300</ts>
    <user>Jasmine</user>
    <text>lazy seqs are not inherently bad, don't be afraid of them :)</text>
  </message>
  <message conversation_id="1705">
    <ts>2019-06-04T17:24:37.067500</ts>
    <user>Roslyn</user>
    <text>thank you for explanations!</text>
  </message>
  <message conversation_id="1707">
    <ts>2019-06-04T18:25:33.067700</ts>
    <user>Fernande</user>
    <text>thanks for this!  haven't heard "druthers" in ages :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T20:18:24.070500</ts>
    <user>Kayce</user>
    <text>is there a short syntax for selecting namespaced keys of off map? e.g.: `{:foo/one 1 :foo/two 2 :three 3}` I want to do `(select-keys m [:foo/one :foo/two])` but without having to repeat `:foo`</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T20:20:34.071100</ts>
    <user>Kayce</user>
    <text>or even better, select all keys that start with `:foo/` without even listing them one by one</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T20:21:42.071700</ts>
    <user>Milford</user>
    <text>&lt;@Kayce&gt; Not exactly what you are asking, but in the context of destructuring:
```
user=&amp;gt; (def m {:foo/one 1 :foo/two 2 :three 3})
#'user/m
user=&amp;gt; (let [{:foo/keys [one two]} m] [one two])
[1 2]
```</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T20:24:50.072500</ts>
    <user>Kayce</user>
    <text>I know you can do that</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T20:24:51.072600</ts>
    <user>Milford</user>
    <text>But, presumably you are looking for a shorter version of
```
(select-keys m (filter #(= "foo" (namespace %)) (keys m)))
```</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T20:25:47.073200</ts>
    <user>Kayce</user>
    <text>yeah, something like that, but I was hoping there’s some magical trick with `#:foo` maybe</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T20:27:47.073800</ts>
    <user>Elaine</user>
    <text>no magic, just functions :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T20:29:26.074600</ts>
    <user>Kayce</user>
    <text>I hate typing. I dunno how people even deal with semicolons and commas and all that crazy garbage in other languages</text>
  </message>
  <message conversation_id="1709">
    <ts>2019-06-04T21:55:40.000400</ts>
    <user>Latonya</user>
    <text>Type one namespaced keyword, then copy/paste for the others?</text>
  </message>
  <message conversation_id="1709">
    <ts>2019-06-04T22:01:11.001500</ts>
    <user>Dann</user>
    <text>I guess with data-readers you could define `#foo[:x :y :z]` to become `[:x/y :x/z]` or whatever</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T22:18:08.001700</ts>
    <user>Jasmine</user>
    <text>bleh</text>
  </message>
  <message conversation_id="1709">
    <ts>2019-06-04T22:19:32.002800</ts>
    <user>Jasmine</user>
    <text>we've talked about extending the namespaced map literal syntax to vectors `#:foo[:x :y :z]` but then the question is what about sets `#:foo#{:x :y}` ? gross.</text>
  </message>
  <message conversation_id="1710">
    <ts>2019-06-04T22:29:11.003700</ts>
    <user>Tamie</user>
    <text>deps.edn and private git repositories...  any advice?  getting: `com.jcraft.jsch.agentproxy.AgentProxyException: connector is not available:`</text>
  </message>
  <message conversation_id="1708">
    <ts>2019-06-04T22:36:19.004100</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/reference/deps_and_cli#_git_configuration&gt; might help</text>
  </message>
  <message conversation_id="1710">
    <ts>2019-06-04T22:36:27.004400</ts>
    <user>Jasmine</user>
    <text>platform?</text>
  </message>
  <message conversation_id="1710">
    <ts>2019-06-04T22:42:57.004600</ts>
    <user>Tamie</user>
    <text>linux</text>
  </message>
  <message conversation_id="1710">
    <ts>2019-06-05T00:37:14.004800</ts>
    <user>Madeleine</user>
    <text>Hum, not the prettiest for sets, but it's not that bad either.</text>
  </message>
  <message conversation_id="1710">
    <ts>2019-06-05T00:40:54.005000</ts>
    <user>Madeleine</user>
    <text>Especially if you put a space in it `#:foo #{:x :y}`</text>
  </message>
  <message conversation_id="1711">
    <ts>2019-06-05T06:02:35.007800</ts>
    <user>Gemma</user>
    <text>Hello, how can I stream System.out.println() to the Clojure REPL? I am using a java class compiled with leiningen, and I want to see its log when calling it in the REPL.</text>
  </message>
  <message conversation_id="1712">
    <ts>2019-06-05T06:29:10.008200</ts>
    <user>Roslyn</user>
    <text>```
(System/setOut (java.io.PrintStream. (org.apache.commons.io.output.WriterOutputStream. *out*) true))

(.println System/out "hi")
```</text>
  </message>
  <message conversation_id="1712">
    <ts>2019-06-05T08:04:00.008300</ts>
    <user>Karren</user>
    <text>&lt;@Roslyn&gt; btw. I've run the same experiment you did (3x each measurement) and got much smaller difference: ~570 ns for transducers and ~720ns for lazy seqs
```
Just another point how misleading microbenchmarks results may be.</text>
  </message>
  <message conversation_id="1713">
    <ts>2019-06-05T09:43:42.009700</ts>
    <user>Maximina</user>
    <text>Is everyone using `Integrant` together with `Duct` or are you also running it standalone?</text>
  </message>
  <message conversation_id="1714">
    <ts>2019-06-05T10:12:47.010400</ts>
    <user>Raina</user>
    <text>If I have clj and cljc file for same namespace, in what order are they compiled? Same for cljc/cljs.</text>
  </message>
  <message conversation_id="1714">
    <ts>2019-06-05T10:13:25.010800</ts>
    <user>Jasmine</user>
    <text>platform specific is always preferred</text>
  </message>
  <message conversation_id="1714">
    <ts>2019-06-05T10:13:44.011200</ts>
    <user>Jasmine</user>
    <text>so for clojure usage, I don't think you would get cljc compiled/loaded at all</text>
  </message>
  <message conversation_id="1714">
    <ts>2019-06-05T10:14:49.012400</ts>
    <user>Jasmine</user>
    <text>cljs is more complicated as prob different stories for macro and non-macro</text>
  </message>
  <message conversation_id="1714">
    <ts>2019-06-05T10:15:06.012700</ts>
    <user>Raina</user>
    <text>ah, so it only compiles one</text>
  </message>
  <message conversation_id="1714">
    <ts>2019-06-05T10:15:31.013300</ts>
    <user>Jasmine</user>
    <text>yeah - they are alternate versions of the same namespace</text>
  </message>
  <message conversation_id="1714">
    <ts>2019-06-05T10:15:57.013900</ts>
    <user>Jasmine</user>
    <text>in clojure, it will look for a .class first (if newer than clj or cljc), then .clj, then .cljc</text>
  </message>
  <message conversation_id="1714">
    <ts>2019-06-05T10:16:16.014100</ts>
    <user>Raina</user>
    <text>thank you for that info</text>
  </message>
  <message conversation_id="1714">
    <ts>2019-06-05T10:19:48.014400</ts>
    <user>Jasmine</user>
    <text>&lt;https://clojure.org/reference/libs#order&gt; - doc ref</text>
  </message>
  <message conversation_id="1715">
    <ts>2019-06-05T11:21:26.014500</ts>
    <user>Sixta</user>
    <text>I'm using it without</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:09:13.016400</ts>
    <user>Gemma</user>
    <text>hello guys, I have a reservation system which works with `agent`, so people can't reserve at the same time. But sometimes it stops working, it gives me no exception, and it doesn't restart. how is this possible?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:11:25.017500</ts>
    <user>Rosaline</user>
    <text>what evidence do you have that it stops working?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:13:21.019200</ts>
    <user>Jasmine</user>
    <text>agents can fail and won't restart</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:13:25.019400</ts>
    <user>Gemma</user>
    <text>well, on my client-side, when people are reserving the server responds that the agent needs restart, like I wouldn't have setup the error handler.</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:13:34.019600</ts>
    <user>Jasmine</user>
    <text>there are lots of options for how errors and restarts are handled</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:14:05.021100</ts>
    <user>Rosaline</user>
    <text>but presumably you have a whole stack of code between the client and the agent, how do you know the failure isn't in there somewhere?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:14:31.021500</ts>
    <user>Gemma</user>
    <text>so, the error-handler! doesn't handle everything? &lt;@Jasmine&gt;</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:14:59.022600</ts>
    <user>Jasmine</user>
    <text>I don't have any of it in my head atm, I just know there's lot of stuff there that I use so infrequently that I have to re-read the source</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:15:14.023000</ts>
    <user>Gemma</user>
    <text>&lt;@Rosaline&gt; because the error is specific to the agent, and because I log the errors and the restarts, and sometimes restarts doesnt happen, only the error</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:16:17.024700</ts>
    <user>Jasmine</user>
    <text>and honestly, approx 0% of users use this stuff so it wouldn't surprise me if there were unsurfaced bugs</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:17:06.025600</ts>
    <user>Rosaline</user>
    <text>I thought you said you don't get an error?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:17:20.026200</ts>
    <user>Rosaline</user>
    <text>what is the error that is specific to the agent?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:17:21.026300</ts>
    <user>Jasmine</user>
    <text>how are you configuring the agent wrt error-handler and error-mode?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:18:50.028200</ts>
    <user>Gemma</user>
    <text>&lt;@Rosaline&gt;, I log in the database for certain functions. like restarting the agent. And when agent restarts I put the error in my logs. In the case when restarting doesn't happen, my error is logged, but is an empty string</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:19:54.029100</ts>
    <user>Gemma</user>
    <text>&lt;@Jasmine&gt;, well it is in my snippet, I set-error-handler! after defining it</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:20:10.029500</ts>
    <user>Jasmine</user>
    <text>the default error-mode of an agent is :fail, not :continue (unless there's an error handler)</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:20:22.030000</ts>
    <user>Jasmine</user>
    <text>not sure how that changes if you set the error-handler after the fact</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:20:49.030400</ts>
    <user>Rosaline</user>
    <text>so it sounds like you do get an error</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:21:37.031400</ts>
    <user>Rosaline</user>
    <text>it is hard to say since you deleted the logging bits from your example</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:21:59.032100</ts>
    <user>Gemma</user>
    <text>I put it back, i didnt want chaos</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:22:01.032300</ts>
    <user>Rosaline</user>
    <text>but it sounds like you are getting an error (the error handler is running) and something is going wrong in your error handler</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:23:03.032700</ts>
    <user>Gemma</user>
    <text>that's the code without modification</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:23:03.033000</ts>
    <user>Jasmine</user>
    <text>exceptions thrown in the error handler itself are ignored and lost</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:23:25.033700</ts>
    <user>Rosaline</user>
    <text>oh</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:23:33.034100</ts>
    <user>Rosaline</user>
    <text>yeah, you are running the error handler in a future</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:23:39.034500</ts>
    <user>Rosaline</user>
    <text>so they are racing to handle the error</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:23:45.034800</ts>
    <user>Jasmine</user>
    <text>you've introduced a race here by restarting in the future - restarts are ignored if the agent is not in a failed state</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:23:57.035200</ts>
    <user>Rosaline</user>
    <text>so the error is already cleared by the time you try to get it with agent-error</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:24:24.035800</ts>
    <user>Jasmine</user>
    <text>I would have to study all that code more closely to really think about the concurrency aspects of this</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:24:34.036000</ts>
    <user>Gemma</user>
    <text>so, I take out future and it should be fine?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:24:58.037000</ts>
    <user>Rosaline</user>
    <text>it may or may not be fine, depending, but it will take care of the empty string thing</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:25:00.037300</ts>
    <user>Jasmine</user>
    <text>it would take me a lot more time to answer that question, and I don't have it atm</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:25:10.037400</ts>
    <user>Gemma</user>
    <text>I never did concurrency before, this is my first approach on this topic.</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:25:36.038000</ts>
    <user>Gemma</user>
    <text>But it will restart then, that's what matters, I guess.</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:25:45.038500</ts>
    <user>Jasmine</user>
    <text>why not just use error-mode :continue?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:26:01.039100</ts>
    <user>Jasmine</user>
    <text>then the agent will automatically restart?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:26:24.039700</ts>
    <user>Rosaline</user>
    <text>in general (depending on the database) you will be much better off using your database features to keep things consistent in the face of multiple writers</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:26:35.040100</ts>
    <user>Jasmine</user>
    <text>`(set-error-mode! reservation-queue :continue)`</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:26:53.041000</ts>
    <user>Rosaline</user>
    <text>presumably at some point you want this running on multiple machines, at which point the serialization you get from agents doesn't exist</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:27:16.041600</ts>
    <user>Gemma</user>
    <text>&lt;@Jasmine&gt;didn't know such thing existed, thank you very much</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:27:44.042600</ts>
    <user>Jasmine</user>
    <text>if you read the docstring for `agent` and some of the other functions around it, I think that might help</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:28:50.043600</ts>
    <user>Gemma</user>
    <text>&lt;@Rosaline&gt; No, this project will stay with 22 shops, so I guess I won't need nothing more sophisticated. But I am trying to learn more about the topic, I also enjoy it more than the frontend. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T12:30:09.044700</ts>
    <user>Gemma</user>
    <text>&lt;@Jasmine&gt; Thank you, duly noted. If it weren't for a stackoverflow topic, I wouldn't even used future, so yes, next time I start with the docstring.</text>
  </message>
  <message conversation_id="1717">
    <ts>2019-06-05T12:50:04.044900</ts>
    <user>Madelene</user>
    <text>both with duct and standalone here</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:01:13.046100</ts>
    <user>Somer</user>
    <text>Is there a way to have `(edn/read-string "{:foo 1}")` read `1` as an `Integer`?</text>
  </message>
  <message conversation_id="1716">
    <ts>2019-06-05T14:01:25.046300</ts>
    <user>Jasmine</user>
    <text>No</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:02:36.046900</ts>
    <user>Somer</user>
    <text>Maybe a custom data reader?</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:03:46.047800</ts>
    <user>Jasmine</user>
    <text>The string above will not trigger any custom data readers</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:04:04.048500</ts>
    <user>Latonya</user>
    <text>If I understand correctly, a custom data reader could cause a string like `{:foo #my-tag 1 }` to read `#my-tag 1` as an `Integer`, but that is a different string.</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:04:17.049000</ts>
    <user>Somer</user>
    <text>Yeah but could easily be written as `(edn/read-string "{:foo #int 1}")`</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:04:28.049300</ts>
    <user>Jasmine</user>
    <text>Even that would read 1 as a Long first</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:04:48.050100</ts>
    <user>Jasmine</user>
    <text>And your data reader could convert it to whatever</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:04:52.050300</ts>
    <user>Somer</user>
    <text>That's fine. I just want the output to be an int.</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:06:14.050800</ts>
    <user>Latonya</user>
    <text>Warning: most kinds of Clojure arithmetic done on an Integer will not return an Integer.</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:07:20.052100</ts>
    <user>Somer</user>
    <text>That's ok. Our app has config files in EDN. Some of those config maps need to be passed via a `Properties` map to a Java library. Java libraries typically have methods declared that take an `int` and not ` long`.</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:10:21.052500</ts>
    <user>Dann</user>
    <text>if you use Clojure to call those methods, it usually does the right thing</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:10:47.053200</ts>
    <user>Dann</user>
    <text>isn't Properties always string-&amp;gt;string?</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:11:10.054100</ts>
    <user>Somer</user>
    <text>Hmm, lemme see. I definitely get an exception due to a Long being passed instead of an int.</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:11:29.054800</ts>
    <user>Jasmine</user>
    <text>Properties extends Hashtable so you can abuse it by using the parent class methods to put other stuff in it</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:11:45.055700</ts>
    <user>Somer</user>
    <text>I do this `(doto (Properties.) (.putAll kafka-config))` and pass it to a Java method.</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:11:52.055900</ts>
    <user>Jasmine</user>
    <text>It is one of the worst APIs in Java</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:11:54.056100</ts>
    <user>Dann</user>
    <text>right, but it's not going to be via Properties... at least not via standard methods &lt;https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#getProperty(java.lang.String)&gt;</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:12:05.056400</ts>
    <user>Dann</user>
    <text>&lt;@Somer&gt; all the kafka configs are strings</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:12:12.056800</ts>
    <user>Dann</user>
    <text>I know that one specifically</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:12:56.058000</ts>
    <user>Dann</user>
    <text>I'm not doubting something wants an int and gets a long, but it's not kafka via properties</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:13:04.058300</ts>
    <user>Somer</user>
    <text>I passed `{"&lt;http://request.timeout.ms|request.timeout.ms&gt;" 20000}` as part of the kafka config and it threw the cannot pass a Long exception. This fixed it `{"&lt;http://request.timeout.ms|request.timeout.ms&gt;" (int 20000)}`</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:13:24.058700</ts>
    <user>Dann</user>
    <text>`{"&lt;http://request.timeout.ms|request.timeout.ms&gt;" "20000"}` is canonical</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:13:27.059000</ts>
    <user>Dann</user>
    <text>int happens to work</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:13:37.059400</ts>
    <user>Somer</user>
    <text>Oh cool. I'll do that, much cleaner.</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:14:28.060200</ts>
    <user>Dann</user>
    <text>&lt;@Somer&gt; usually I have a function that turns a clojure hash-map into string/string pairs then puts it into a Properties map</text>
  </message>
  <message conversation_id="1718">
    <ts>2019-06-05T14:16:08.061200</ts>
    <user>Somer</user>
    <text>Yeah, should probably add helper function for that, especially now that I know it's a nasty api.</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:21:57.062600</ts>
    <user>Cristi</user>
    <text>hi,  is it possible to require two different versions of a library and use it at the same time?</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:22:44.062900</ts>
    <user>Dann</user>
    <text>not in any simple way, no</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:25:06.063200</ts>
    <user>Cristi</user>
    <text>&lt;@Dann&gt; what would be the trick then?</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:25:48.063500</ts>
    <user>Dann</user>
    <text>isolated classloaders iirc</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:26:24.064000</ts>
    <user>Cristi</user>
    <text>thanks! I will search about it</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:26:54.064500</ts>
    <user>Dann</user>
    <text>everything I've tried or heard about it makes it seem frustrating</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:28:23.066500</ts>
    <user>Shonda</user>
    <text>A classloader hierarchy along the lines of the one OSGi uses, where peer classloaders do not delegate to their parents when looking for a loaded class. Been a long time since I did this, so the details are very fuzzy.</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:28:24.066600</ts>
    <user>Dann</user>
    <text>and making it work with Clojure iirc requires a pretty intimate understanding of how clojure extends the runtime classloader - my knowledge of this stuff is not very deep, maybe someone else can offer more detail</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:29:02.067400</ts>
    <user>Dann</user>
    <text>I know there was at least one fork of clojure for the express purpose of working with isolated classloaders</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:29:03.067500</ts>
    <user>Shonda</user>
    <text>That allowed OSGi services to use different versions of classes IIRC</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:29:18.068000</ts>
    <user>Dann</user>
    <text>right - the fork I mentioned was for usage with OSGi</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:29:28.068300</ts>
    <user>Dann</user>
    <text>because clojure as is wasn't compatible</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:29:31.068400</ts>
    <user>Shonda</user>
    <text>but mixing that with Clojure? No idea how :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:30:47.069300</ts>
    <user>Dann</user>
    <text>I think it's less about not delegating to parents, and more about creating two (or more) inheritance trees</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:39:09.074100</ts>
    <user>Shonda</user>
    <text>Delegation might be the wrong word. I remember that it allowed a "child" classloader, instantiated for a service, to access classes "sideways" from other peers, without first looking in the parent. Or something like that :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:39:48.074800</ts>
    <user>Shonda</user>
    <text>That allowed for an additional security layer, whether a class was exposed outside its service, etc</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:40:07.075200</ts>
    <user>Shonda</user>
    <text>but this is younger me from ~10 years ago!</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:44:20.075500</ts>
    <user>Dann</user>
    <text>oh, that's more than I know about it</text>
  </message>
  <message conversation_id="1719">
    <ts>2019-06-05T16:56:09.076200</ts>
    <user>Shonda</user>
    <text>It was strange stuff in a way, I ported 2 implementations to a "java on the chip" box my company at the time made.</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:20:21.077300</ts>
    <user>Jasmine</user>
    <text>you can achieve this isolation in Java by using a post delegation classloader. however, clojure's dynamic classloader explicitly shares a class cache with all other dynamic classloaders</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:25:34.080300</ts>
    <user>Cristi</user>
    <text>thanks guys, quite interesting, I also heard that it is possible to have clojure repl running along with a pure java application running under Tomcat and invoke commands from the repl, so , in theory we could  write java code, compile it and call from clojure repl without restarting the embeded tomcat server, am I correct?</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:29:11.081700</ts>
    <user>Jasmine</user>
    <text>not exactly - depends what you're doing</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:29:36.082600</ts>
    <user>Jasmine</user>
    <text>that's not really a clojure question</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:30:13.083600</ts>
    <user>Jasmine</user>
    <text>depends if you're making new classes (then you need a classloader that knows how to load them) or redefining (there are paths  to this in the jvm but it's not trivial to do in general)</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:30:44.084200</ts>
    <user>Jasmine</user>
    <text>in general, I'd say you should not do any of that. there are probably better ways to accomplish whatever  goals you have</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:30:54.084400</ts>
    <user>Cristi</user>
    <text>thanks Alex!</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:31:32.085700</ts>
    <user>Jasmine</user>
    <text>like, don't write code, just make new instances using existing classes. and make more flexible frameworks if you need more dynamicity (clojure is great for that via its var system)</text>
  </message>
  <message conversation_id="1721">
    <ts>2019-06-05T17:33:12.088600</ts>
    <user>Leda</user>
    <text>Hey guys, there is any Microservices example in Clojure? But I want something full fledged and mostly ready to production. I want to see some real project of a medium size or bigger. Not really interested in small examples, but I guess I won’t find this... </text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:33:55.090300</ts>
    <user>Leda</user>
    <text>Small projects are fine to understand stuff, but it really doesn’t teach anything about how a ready to production code is working and should be </text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:34:52.091400</ts>
    <user>Cristi</user>
    <text>the idea is, I'm currently working with an old java framework that requires too much time to build, and also, its too coupled so , you never knows how it will behave xD , so I was looking for a solution for faster feedback</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:35:46.091900</ts>
    <user>Cristi</user>
    <text>I guess that the only option for that is jRebel or hotSwap agent</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:36:29.092700</ts>
    <user>Cristi</user>
    <text>but anyway, I'm learning clojure now, to leave this crazy java world :stuck_out_tongue:</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:36:37.092900</ts>
    <user>Dann</user>
    <text>&lt;@Cristi&gt; why not make a small set of stubs that call into clojure from the framemwork, then redefine the clojure stuff as needed while developing?</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:37:12.093700</ts>
    <user>Dann</user>
    <text>the stub should only need to change if you have a major architectural design, and the clojure stuff it calls is freely redefinable without a restart</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:37:29.094000</ts>
    <user>Cristi</user>
    <text>uhmm interesting</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:38:29.094400</ts>
    <user>Dann</user>
    <text>I've used this pattern for jsvc for example &lt;https://github.com/noisesmith/clj-jsvc-adapter&gt;</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:40:33.095200</ts>
    <user>Cristi</user>
    <text>thanks &lt;@Dann&gt; I will have a look at it!</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:43:55.095900</ts>
    <user>Dann</user>
    <text>the code is very small - it just makes a tiny implementation of every method needed, that uses the clojure API to look up a var with a "magic" name and call it &lt;https://github.com/noisesmith/clj-jsvc-adapter/blob/master/src/java/org/noisesmith/Cljsvc.java&gt;</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:44:32.096600</ts>
    <user>Dann</user>
    <text>it expects an ns with `start`, `init` etc. as vars, then loads the ns and attempts to call them</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:45:00.096800</ts>
    <user>Cristi</user>
    <text>yeah, its quite intuitive</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:48:53.097700</ts>
    <user>Dann</user>
    <text>so my hunch is you can do the same with your old java framework - give it methods (probably easier to just do in java), and just make sure everything those methods do can be freely redefined in a repl</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:49:04.098000</ts>
    <user>Dann</user>
    <text>then no more restarting the framework for code changes</text>
  </message>
  <message conversation_id="1720">
    <ts>2019-06-05T17:49:20.098100</ts>
    <user>Latonya</user>
    <text>This small project was announced just recently, using Seesaw and Clojure: &lt;https://www.reddit.com/r/Clojure/comments/bx698b/i_made_a_small_epub_reader_in_clojure&gt;</text>
  </message>
  <message conversation_id="1722">
    <ts>2019-06-05T20:12:02.104200</ts>
    <user>Talisha</user>
    <text>Does anyone know of a best practice for taking a non-namespaced map (example: `(def x {:a 1, :b 2, :nested {:h 3 :f 4}})` and producing the `namespaced keyword` version given a spec:
example:
```
(s/def ::result (s/keys :req [:thing/a :thing/b :thing/nested]))
(s/def :thing/nested (s/keys :req [:other/f :other/g]))
```
and produces given `x` and the spec `::result` =&amp;gt; `{:thing/a 1 :thing/b 2 :nested {:other/h 3 :other/f 4}}`</text>
  </message>
  <message conversation_id="1722">
    <ts>2019-06-05T20:13:07.104900</ts>
    <user>Talisha</user>
    <text>Or does a project already do this? For example, I would think the ring swagger coercion would do something like this.</text>
  </message>
  <message conversation_id="1722">
    <ts>2019-06-05T20:15:41.105500</ts>
    <user>Talisha</user>
    <text>Maybe I am being silly and `(s/keys :req-un [:thing/a])` is the right choice</text>
  </message>
  <message conversation_id="1723">
    <ts>2019-06-05T21:08:52.106000</ts>
    <user>Jasmine</user>
    <text>I would do the last - spec the data you have</text>
  </message>
  <message conversation_id="1724">
    <ts>2019-06-06T07:31:30.108100</ts>
    <user>Merna</user>
    <text>&lt;@Phebe&gt; hey if someone wanted to implement the kind of clojure highlighting that you describe in your recent talk, but in emacs, is there anywhere they could steal bits of implementation from...?</text>
  </message>
  <message conversation_id="1724">
    <ts>2019-06-06T07:32:32.109000</ts>
    <user>Merna</user>
    <text>I really like the idea of less noisy, more minimal but meaningful highlighting. At the moment I even don't use any highlighting at all, for performance when files have large maps :smile:</text>
  </message>
  <message conversation_id="1725">
    <ts>2019-06-06T08:07:23.109700</ts>
    <user>Gemma</user>
    <text>Hello guys! What is the easiest way of calling clojure functions from an already compiled java class?</text>
  </message>
  <message conversation_id="1726">
    <ts>2019-06-06T08:34:43.112400</ts>
    <user>Isreal</user>
    <text>I watched the talk too and was curious to try out the tonsky color scheme! All I found was this &lt;https://github.com/uzhne/alabaster-emacs&gt; but did not try it out yet.</text>
  </message>
  <message conversation_id="1727">
    <ts>2019-06-06T09:55:17.114200</ts>
    <user>Leatha</user>
    <text>hi guys
what is your opinion on partial functions?

Do you use them often?</text>
  </message>
  <message conversation_id="1727">
    <ts>2019-06-06T09:56:14.114700</ts>
    <user>Andrea</user>
    <text>I tend to just use `#()` or something like &lt;https://github.com/we-shop/arrows&gt;</text>
  </message>
  <message conversation_id="1727">
    <ts>2019-06-06T10:07:51.117300</ts>
    <user>Leatha</user>
    <text>Maybe i should've asked how do you deal with partial fns

let say i have defined partial that i will use later on in run time
how do i find out information about that partial function `#function[clojure.core/partial/fn--5561]` when it like this? Is there anyway to 'expand' it ?

Is it bad practice to have a lot of partial fns all over the place that are defined during startup but used during run time?</text>
  </message>
  <message conversation_id="1727">
    <ts>2019-06-06T10:11:42.117600</ts>
    <user>Jasmine</user>
    <text>there is no way to expand it, it is opaque to users</text>
  </message>
  <message conversation_id="1727">
    <ts>2019-06-06T10:12:08.118000</ts>
    <user>Jasmine</user>
    <text>usually I prefer passing explicit environment over passing partials that close over it</text>
  </message>
  <message conversation_id="1727">
    <ts>2019-06-06T10:12:14.118200</ts>
    <user>Jasmine</user>
    <text>as then it's visible</text>
  </message>
  <message conversation_id="1728">
    <ts>2019-06-06T11:20:24.119500</ts>
    <user>Gregoria</user>
    <text>Is there way with spec to validate the content of a string? I.e., can I use spec to ensure that a string is made of two parts separated by a ‘:’ (e.g. “procotol:domain”)?</text>
  </message>
  <message conversation_id="1727">
    <ts>2019-06-06T11:22:04.120000</ts>
    <user>Jasmine</user>
    <text>there's an example of this in the spec guide via regex for email &lt;https://clojure.org/guides/spec&gt;</text>
  </message>
  <message conversation_id="1728">
    <ts>2019-06-06T11:23:46.120200</ts>
    <user>Gregoria</user>
    <text>Right. Thank you!</text>
  </message>
  <message conversation_id="1729">
    <ts>2019-06-06T12:49:52.121700</ts>
    <user>Dann</user>
    <text>I can think of a lot of common instances (eg. `(Thread. #(foo))` - but really the answer depends on what the existing Java Class does and how it goes about finding something to invoke and invoking it.</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:17:51.122600</ts>
    <user>Leda</user>
    <text>Does the usage of `future` has any implications/gotcha's when running the program within a JAR ?</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:18:33.123100</ts>
    <user>Leda</user>
    <text>It seems that it's not being called when running as a JAR</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:24:04.124000</ts>
    <user>Dann</user>
    <text>whether your code is in a jar or on disk should not effect how it executes, aside from usage of `File` APIs that don't work for resources inside jars</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:24:20.124400</ts>
    <user>Dann</user>
    <text>how are you starting the future, and what's your evidence it doesn't run?</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:27:14.125500</ts>
    <user>Leda</user>
    <text>yeah i'm having a problem with Files inside the resources too, and i'm trying to figure out how to create folders/files outside of the project folder/jar</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:27:43.126300</ts>
    <user>Leda</user>
    <text>my evidence is just a simple `println` inside the future, when running on disk it prints on console, and when running as a JAR it doesn't</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:28:01.126600</ts>
    <user>Becki</user>
    <text>could this be the process exiting before the future is run?</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:28:15.127000</ts>
    <user>Dann</user>
    <text>there are no Files inside resources, use &lt;http://clojure.java.io/resource|clojure.java.io/resource&gt; instead of file</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:28:51.127700</ts>
    <user>Dann</user>
    <text>&lt;@Leda&gt; note that when an exception is thrown inside a future, it's reserved and doesn't do anything until the future is dereffed</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:29:35.128700</ts>
    <user>Dann</user>
    <text>likely the code inside the future is broken when in a jar (perhaps trying to use a file, which isn't valid for things inside jars), and the exception never gets thrown because you don't access the return value of the future</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:30:25.129500</ts>
    <user>Celestine</user>
    <text>If you're using `timbre` already for logging, it has `logged-future` which is a replacement for `future` that logs any failures -- very handy!</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:30:50.129900</ts>
    <user>Dann</user>
    <text>you can also use try/catch inside future for use cases where you intentionally never deref</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:31:03.130300</ts>
    <user>Dann</user>
    <text>(try/catch plus log or print that is)</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:38:53.131700</ts>
    <user>Georgina</user>
    <text>Is there a ballpark memory consumption for a pretty trivial clojure “microservice” that has:
- a few routes
- very moderate traffic
- returns some json :smile:</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:39:18.132400</ts>
    <user>Dann</user>
    <text>I'd use visualvm and see how much of the heap your program uses</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:39:36.133200</ts>
    <user>Dann</user>
    <text>the java vm checks how much memory it's allowed to use and just grabs it whether it needs it or not</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:39:45.133600</ts>
    <user>Dann</user>
    <text>but visualvm shows how much is actually being used</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:40:18.134300</ts>
    <user>Georgina</user>
    <text>Yes I’m aware, I’m thinking how much is expected for something pretty simple to run. We have java services running with -Xmx=128mb</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:40:29.134600</ts>
    <user>Georgina</user>
    <text>Will it be equal or more?</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:40:31.134700</ts>
    <user>Dann</user>
    <text>that's definitely too low for clojure</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:40:43.135300</ts>
    <user>Clarine</user>
    <text>I guess you can also make and endpoint and expose ` (/ (.freeMemory (Runtime/getRuntime)) (* 1024.0 1024))`?</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:40:53.135900</ts>
    <user>Clarine</user>
    <text>or usedMemory or whatnot</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:40:55.136100</ts>
    <user>Dann</user>
    <text>use visualvm because libraries can really change the baseline, I'd expect 500megs at least, in the low gigs is normal</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:41:13.136800</ts>
    <user>Georgina</user>
    <text>&lt;@Clarine&gt; yeah, the problem is it’s very hard to monitor the jvm like that</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:41:19.137100</ts>
    <user>Georgina</user>
    <text>The gc will take whatever you give it</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:41:33.137700</ts>
    <user>Dann</user>
    <text>&lt;@Clarine&gt; I prefer visualvm because the actual numbers are constantly oscillating in a sawtooth pattern, but it's easy to see the peaks in the graph</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:41:38.138100</ts>
    <user>Clarine</user>
    <text>ah</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:41:53.138700</ts>
    <user>Dann</user>
    <text>(I guess with some stats code you could capture peak / mean values but they are easy to eyeball)</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:42:06.139100</ts>
    <user>Georgina</user>
    <text>I think a proper test would involve performance testing the service and lowering the memory allowed for the JVM?</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:42:16.139600</ts>
    <user>Georgina</user>
    <text>and seeing when stuff stops working</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:43:17.141500</ts>
    <user>Dann</user>
    <text>since the tool differentiates used and allocated, you can get pretty close without lowering the numbers (and also when you  lower the allocation numbers below a certain point you sacrifice performance since the GC is doing more work)</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:43:18.141600</ts>
    <user>Georgina</user>
    <text>I’ve got some pretty zealous colleagues when it comes to RAM memory usage, and I kind of can see their point since our software runs on prem at the customers data centers</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:43:30.141900</ts>
    <user>Dann</user>
    <text>they won't like clojure</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:43:45.142200</ts>
    <user>Georgina</user>
    <text>Hehe I’m getting that feeling :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:44:20.143400</ts>
    <user>Dann</user>
    <text>there are many places where clojure explicitly decides to use more heap space (for performance, for simplicity / consistency...)</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:44:53.144500</ts>
    <user>Leda</user>
    <text>&lt;@Dann&gt; the problem was indeed the future throwing an exception. It happens that i'm trying to execute a shell command inside a folder that is inside the JAR. and this seems to be impossible</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:45:07.144700</ts>
    <user>Dann</user>
    <text>there is no folder inside a jar</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:45:12.144900</ts>
    <user>Dann</user>
    <text>there's a resource path</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:45:24.145200</ts>
    <user>Dann</user>
    <text>if the shell needs to use your resources, you need to expand the jar</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:45:55.146000</ts>
    <user>Dann</user>
    <text>(or a system level tool that knows how to mount a zip file as a file system, but that would be OS specific)</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:47:18.147500</ts>
    <user>Leda</user>
    <text>i don't necessarily need to access the files within the jar, i could first create them outside of it, but i'm having problems accessing anything outside the scope of the project, it doesn't accept to create a folder with the absolute path like: /home/user/folder</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:47:51.148000</ts>
    <user>Dann</user>
    <text>for programmatically expanded things I'd opt for /tmp</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:48:04.148400</ts>
    <user>Dann</user>
    <text>or some other file system designed for ephemeral resources created by a program</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:48:17.148700</ts>
    <user>Leda</user>
    <text>i was planning on using docker volumes</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:48:27.149100</ts>
    <user>Leda</user>
    <text>because i'm using docker to get prod ready</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:48:35.149300</ts>
    <user>Dann</user>
    <text>OK, there's a /tmp inside the docker image</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:48:54.149700</ts>
    <user>Karren</user>
    <text>Exactly, it's also not that useful to use visualvm for the same reason.</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:49:14.150400</ts>
    <user>Dann</user>
    <text>and more importantly, it's mounted to a real file system that you can alter at runtime with a program in that image</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:49:31.150800</ts>
    <user>Leda</user>
    <text>alright, i'll try to write the folder/files to a /tmp</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:49:31.150900</ts>
    <user>Dann</user>
    <text>(real as far as anything in your image is concerned at least)</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:49:43.151100</ts>
    <user>Karren</user>
    <text>I'm successfully running a small Clojure app with -Xmx256m but the only way to check is to run bunch of different settings and workloads and see how it works.</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:50:32.152300</ts>
    <user>Dann</user>
    <text>&lt;@Leda&gt; a more specific gotcha is if you don't drop permissions, root's home dir isn't /home/root, it's /root</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:50:40.152500</ts>
    <user>Dann</user>
    <text>but /tmp is more reliable anyway</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:51:18.152800</ts>
    <user>Leda</user>
    <text>this `(.mkdir (java.io.File. folder-path))`  should work with a folder-path like this: `/tmp` ?</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:51:32.153100</ts>
    <user>Karren</user>
    <text>Different GCs may give you different results especially in low-memory settings. I've heard that Shenandoah may be pretty good in such situations.</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:51:40.153600</ts>
    <user>Dann</user>
    <text>well, if folder-path is nested, don't use mkdir - there's one for nested dirs but it's different</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:51:41.153700</ts>
    <user>Leda</user>
    <text>ops, `/tmp/my-folder`</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:51:45.153800</ts>
    <user>Georgina</user>
    <text>Interesting!</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:52:00.154200</ts>
    <user>Georgina</user>
    <text>I think I could probably get away with 512mb but not much more</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:52:04.154500</ts>
    <user>Dann</user>
    <text>but sure, with a single level, mkdir should work</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:52:14.154600</ts>
    <user>Karren</user>
    <text>beware that JVM memory consumption isn't just heap though</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:52:30.155000</ts>
    <user>Georgina</user>
    <text>Atleast not for services that are also trivial to solve in plain java or kotlin.</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:52:32.155300</ts>
    <user>Dann</user>
    <text>&lt;https://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs()&gt; creates all parents as needed</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:52:43.155500</ts>
    <user>Dann</user>
    <text>just an extra s in your code!</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:53:38.155600</ts>
    <user>Georgina</user>
    <text>Yeah</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:55:19.156000</ts>
    <user>Leda</user>
    <text>thanks for sharing this</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:55:27.156300</ts>
    <user>Leda</user>
    <text>but it really is a single level nesting</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:55:50.156800</ts>
    <user>Leda</user>
    <text>it's just a folder that i transform into a zip file later on, in the same function</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:57:22.157100</ts>
    <user>Georgina</user>
    <text>The downside of a really high level language I guess. :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:57:46.157300</ts>
    <user>Georgina</user>
    <text>Kind of conflicts with my current desire to write a bunch of small focused services.</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:57:55.157500</ts>
    <user>Celestine</user>
    <text>FWIW, most of the processes on our QA servers run with 256m heaps just fine. Even in production with heavy traffic, most of our processes run with 1g heaps. Only a few have larger heaps (and that's just to avoid GC bottlenecks if there's a really big spike in traffic).</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:58:32.157700</ts>
    <user>Celestine</user>
    <text>Prior to Clojure, we used a web stack that really needed 10-15g to run smoothly so Clojure seems very lightweight to us :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:59:21.157900</ts>
    <user>Georgina</user>
    <text>Hehe I guess we all have different contexts - I’ve written the last few services in Go which have been very easy on the RAM</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T13:59:49.158100</ts>
    <user>Georgina</user>
    <text>And the CSP implementation actually make it sort of workable with concurrency</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T14:00:59.158300</ts>
    <user>Georgina</user>
    <text>Kind of feels like brutalist programming tho compared to clojure :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T14:02:28.158800</ts>
    <user>Leda</user>
    <text>thanks &lt;@Dann&gt; it worked on the JAR now, and i'm using the /tmp/ folder</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T14:02:36.158900</ts>
    <user>Celestine</user>
    <text>Yeah, non-JVM systems seem to use tiny amounts of memory by comparison. I know lots of places that run JVM processes with heaps in the tens of GB :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T14:04:04.160000</ts>
    <user>Leda</user>
    <text>now my Ring middleware only serve files inside the resource folder, so i need to point this files from /tmp/ and make them available :joy:</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T14:09:37.160400</ts>
    <user>Dann</user>
    <text>&lt;@Leda&gt; just use `wrap-resource` instead of `wrap-file`</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T14:10:12.160700</ts>
    <user>Leda</user>
    <text>i just saw it on the documentation hehe</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T14:10:23.161100</ts>
    <user>Leda</user>
    <text>i'll use both, since i need static files on the resources folder</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T14:10:44.161500</ts>
    <user>Dann</user>
    <text>wrap-resource works on files</text>
  </message>
  <message conversation_id="1730">
    <ts>2019-06-06T14:10:57.161900</ts>
    <user>Dann</user>
    <text>(as long as the directory is on classpath, but that's easy to arrange)</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:35:06.163900</ts>
    <user>Mariela</user>
    <text>given a  symbol `'a.b.c`, how can I ask Clojure "from which file/files you would you fetch this ns?"

would help me debug a possible classpath issue</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:38:51.164200</ts>
    <user>Rosaline</user>
    <text>you can't</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:39:42.164600</ts>
    <user>Mariela</user>
    <text>to be clear, I can just `ps aux | grep classpath` and see the process' classpath, but I want to see the exact thing Clojure would do</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:40:30.165300</ts>
    <user>Marlyn</user>
    <text>either clojure will load it from `a/b/c.clj` or if AOT'ed from `a/b/c__init.class`</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:40:37.165500</ts>
    <user>Marlyn</user>
    <text>so run this:</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:41:24.166300</ts>
    <user>Marlyn</user>
    <text>`(require '[&lt;http://clojure.java.io|clojure.java.io&gt; :as io]) (io/resource "a/b/c.clj") (io/resource "a/b/c__init.class")`</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:41:31.166700</ts>
    <user>Dann</user>
    <text>*rarely* you should also check foo.cljc</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:41:47.167100</ts>
    <user>Rosaline</user>
    <text>and you might need to do the underscores for dashes thing</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:42:00.167400</ts>
    <user>Jasmine</user>
    <text>there is a munge function for that</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:42:26.167800</ts>
    <user>Dann</user>
    <text>it would be convenient if there was a function that did the exact lookup and showed the resource it found</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:42:43.168000</ts>
    <user>Rosaline</user>
    <text>or if verbose loading included it</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:42:53.168200</ts>
    <user>Marlyn</user>
    <text>^ that could be nice</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:46:55.170300</ts>
    <user>Mariela</user>
    <text>```
dev=&amp;gt; (&lt;http://clojure.java.io/resource|clojure.java.io/resource&gt; "clojure/core/specs/alpha.clj")
#object[java.net.URL 0x675c1f6b "jar:file:/Users/vemv/.m2/repository/clojure-future-spec/clojure-future-spec/1.9.0-beta4/clojure-future-spec-1.9.0-beta4.jar!/clojure/core/specs/alpha.clj"]
```

that was it! very likely I debugged the source of my issue (this library was overwriting the latest-and-greatest `clojure.core.specs.alpha`)

thanks &lt;@Marlyn&gt;</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T14:50:45.170600</ts>
    <user>Marlyn</user>
    <text>np &lt;@Mariela&gt; classpath conflicts are turrible</text>
  </message>
  <message conversation_id="1732">
    <ts>2019-06-06T14:59:14.170700</ts>
    <user>Isa</user>
    <text>Do you know why Clojure in google trends going down since 2017? it is like 40% less.</text>
  </message>
  <message conversation_id="1731">
    <ts>2019-06-06T15:04:04.171400</ts>
    <user>Leda</user>
    <text>it seems that on 2017 or so, there was a giant hype about Functional programming</text>
  </message>
  <message conversation_id="1732">
    <ts>2019-06-06T15:04:31.172000</ts>
    <user>Leda</user>
    <text>now it's becoming something that all major languages are implementing in some way or another</text>
  </message>
  <message conversation_id="1732">
    <ts>2019-06-06T15:05:56.172500</ts>
    <user>Leda</user>
    <text>but that's just a guess</text>
  </message>
  <message conversation_id="1732">
    <ts>2019-06-06T15:06:48.172900</ts>
    <user>Isa</user>
    <text>I see how other languages grow, but Clojure going down. Just it worry me a little.</text>
  </message>
  <message conversation_id="1732">
    <ts>2019-06-06T15:06:59.173200</ts>
    <user>Isa</user>
    <text>Well, probably more, than that :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1732">
    <ts>2019-06-06T15:08:28.174100</ts>
    <user>Leda</user>
    <text>it seems that google trends do really show  a trend on functional programming from 2016 to the present</text>
  </message>
  <message conversation_id="1732">
    <ts>2019-06-06T15:09:07.174900</ts>
    <user>Leda</user>
    <text>interesting that china has a lead on this trend, but probably because there is a billion of chinese people</text>
  </message>
  <message conversation_id="1732">
    <ts>2019-06-06T15:09:23.175200</ts>
    <user>Isa</user>
    <text>yes, I am surprised too</text>
  </message>
  <message conversation_id="1732">
    <ts>2019-06-06T15:23:56.176100</ts>
    <user>Jasmine</user>
    <text>fortunately, I do not program with Google, so all my Clojure programs still work great</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:26:02.183200</ts>
    <user>Isa</user>
    <text>What do you do on solutions like kubernetes where you create many services to reduce memory consumption in Clojure?</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:26:18.183400</ts>
    <user>Mariela</user>
    <text>...the issue above left me quite frustrated (~90m wasted) so probably I will implement a linter based on this snippet:

```
(defn resources
  ([n]
   (resources n (.getContextClassLoader (Thread/currentThread))))
  
  ([n ^ClassLoader loader]
   (.getResources loader n)))

(-&amp;gt;&amp;gt; "clojure/core/specs/alpha.clj"
     resources
     enumeration-seq
     (map str)
     (clojure.pprint/pprint))

;; the above results in:
'("jar:file:/Users/vemv/.m2/repository/clojure-future-spec/clojure-future-spec/1.9.0-beta4/clojure-future-spec-1.9.0-beta4.jar!/clojure/core/specs/alpha.clj"
  "jar:file:/Users/vemv/.m2/repository/org/clojure/core.specs.alpha/0.2.44/core.specs.alpha-0.2.44.jar!/clojure/core/specs/alpha.clj")
```

• list every ns declared/required in your project, fetch their `resources`
• if for any given ns there is more than one entry, issue a warning</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:33:31.183900</ts>
    <user>Mariela</user>
    <text>Have you already tried trimming the dependencies on a per-service basis?

e.g. all services use the same deps b/c you have some internal framework, but maybe each service actually needs a fraction of that</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:34:13.184100</ts>
    <user>Isa</user>
    <text>no, it is new topic for me</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:34:32.184300</ts>
    <user>Isa</user>
    <text>But I am not sure I would like to risk to do it and want to maintenance it :wink:</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:35:25.184500</ts>
    <user>Isa</user>
    <text>Probably will be easier paying for RAM heh :wink:</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:35:25.184700</ts>
    <user>Mariela</user>
    <text>just to be clear I'm talking about plain project.clj / deps.edn dependencies. No much surgery needed

Are you using a large web framework?</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:35:54.185000</ts>
    <user>Isa</user>
    <text>I don’t use frameworks at all. I prefer to use small libraries instead.</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:36:17.185200</ts>
    <user>Isa</user>
    <text>So for example I have service only to login user as auth-provider</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:36:35.185400</ts>
    <user>Isa</user>
    <text>but while it is Clojure it will consume so much RAM for such simple thing</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:37:09.185600</ts>
    <user>Mariela</user>
    <text>&amp;gt; I don’t use frameworks at all. I prefer to use small libraries instead.

then it might be worth a shot. `lein deps :tree` might reveal where the bloat comes from

(if you are complaining about baseline :clj: RAM consumption, then I have no idea)</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:37:18.185800</ts>
    <user>Isa</user>
    <text>Probably Clojure is not a good choice for such services, but I don’t feel confident to write it in for example golang</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:37:43.186000</ts>
    <user>Isa</user>
    <text>yes, it is a little about baseline :wink:</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:38:32.186200</ts>
    <user>Isa</user>
    <text>but not only, just I would like to listen somebody experienced in this topic</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:38:32.186400</ts>
    <user>Mariela</user>
    <text>perhaps there is some useful insight in the `Microservices with Clojure` book. Haven't got my hands to it yet</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:41:58.186800</ts>
    <user>Isa</user>
    <text>But yeah… Probably the true is we should use another languages for small services or pay more for RAM :slightly_smiling_face:</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:42:03.187000</ts>
    <user>Isa</user>
    <text>there will be no magic</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:42:35.187200</ts>
    <user>Mariela</user>
    <text>worst-case scenario you can resort to cljs / node.js :stuck_out_tongue_winking_eye:</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:43:11.187500</ts>
    <user>Isa</user>
    <text>Paying for RAM is not so bad :stuck_out_tongue: :wink:</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:44:02.187800</ts>
    <user>Isa</user>
    <text>I am thinking about it, because I am doing my own hobby project, which will became something serious maybe. So I will pay for everything from my own pocket.</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:44:42.188000</ts>
    <user>Isa</user>
    <text>Then you start to count this “small” bills and it matter heh</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:48:35.189400</ts>
    <user>Isa</user>
    <text>I am going sleep. Goodnight.</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:49:52.190900</ts>
    <user>Clarine</user>
    <text>I tried to find where `RELEASE` and `LATEST` are documented but then I read they are deprecated in maven 3?
How does this relate exactly to clojure deps and lein, since they use the maven stuff under the hood?
```
clj -Sdeps '{:deps {org.clojure/clojure {:mvn/version "LATEST"}}}' -e '(clojure-version)'
```</text>
  </message>
  <message conversation_id="1734">
    <ts>2019-06-06T16:53:52.191300</ts>
    <user>Jasmine</user>
    <text>they still work</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:54:20.191600</ts>
    <user>Jasmine</user>
    <text>but I consider them to be unsupported from a clj / tools.deps pov</text>
  </message>
  <message conversation_id="1734">
    <ts>2019-06-06T16:54:38.191900</ts>
    <user>Jasmine</user>
    <text>because they are not fixed versions</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T16:56:10.192700</ts>
    <user>Clarine</user>
    <text>yeah, I usually only use it for one-off things in the command line when I don’t feel like looking up a version number. I didn’t even know `LATEST` existed until today</text>
  </message>
  <message conversation_id="1734">
    <ts>2019-06-06T17:14:47.193800</ts>
    <user>Celestine</user>
    <text>`clj-new` produces deps like that so that I don't have to keep updating `clj-new`'s templates when new versions of libraries drop. I figured folks would change the deps to specific versions if they wanted.</text>
  </message>
  <message conversation_id="1734">
    <ts>2019-06-06T17:15:42.194900</ts>
    <user>Celestine</user>
    <text>At work, we have some dev-only tooling that uses `RELEASE` so we always pick up the newest versions. If anything breaks in dev, we can easily pin a tool back to a working version.</text>
  </message>
  <message conversation_id="1733">
    <ts>2019-06-06T17:15:53.195200</ts>
    <user>Celestine</user>
    <text>(I don't use `LATEST` for anything tho')</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T17:25:55.196700</ts>
    <user>Danita</user>
    <text>Hi, what would you say is the essential Clojure testing stack? spec, test.check, clojure.test - anything else?</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T17:41:14.197700</ts>
    <user>Lesa</user>
    <text>There's a lot to factor into that - what are you testing? where? (repl, cli, ci?)</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T17:42:14.198400</ts>
    <user>Lesa</user>
    <text>We currently use all of the above + `test.chuck` and `eftest`</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T17:47:06.200200</ts>
    <user>Mariela</user>
    <text>etaoin if developing web apps
aero or such for having clean per-env config
component/integrant for having clean per-env systems
expound

more exotic: circleci.test, kaocha</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T17:47:57.201300</ts>
    <user>Danita</user>
    <text>&lt;@Lesa&gt;  Im talking about CI for medium-to-large commercial projects.</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T17:48:08.201600</ts>
    <user>Danita</user>
    <text>Thanks for the info.</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T17:59:14.203700</ts>
    <user>Celestine</user>
    <text>&lt;@Danita&gt; We have about 80k lines of Clojure at work. About 20k of that is test code. We use `clojure.test` and Cognitect's `test-runner` (since we're all `clj`/`deps.edn`-based). We use `clojure.spec` but mostly in production code for data validation, although we do use some instrumentation in dev/test, and we do some generative testing with it (so we use `test.check` under the hood as well).</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:00:49.204800</ts>
    <user>Celestine</user>
    <text>We also use &lt;https://github.com/clojure-expectations/clojure-test&gt; (I prefer the `expect` style syntax) -- we used to use the core Expectations library but it wasn't compatible with `clojure.test`-based tooling.</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:02:14.205800</ts>
    <user>Danita</user>
    <text>Thanks, that's very helpful. I know what to research.</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:03:40.208600</ts>
    <user>Celestine</user>
    <text>We used to have Clojure-based Selenium/WebDriver tests -- and we used `clj-webdriver` for that but we've killed off those web apps and that library is pretty much unmaintained now. I'd probably look at etaoin if I needed that these days. We do have some `HtmlUnit`-based tests, just using `clojure.test` for assertions and plain Java interop.</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:04:19.209400</ts>
    <user>Celestine</user>
    <text>And, like &lt;@Lesa&gt;, we use `test.chuck` for some stuff above and beyond `test.check` (mostly for string regex generators).</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:05:36.211100</ts>
    <user>Danita</user>
    <text>Noted. I'm checking, because I'm preparing a pitch for the company. The big focus is on testing. Right now a lot of code is in Python which, as far as property-based testing is concerned, only has `hypothesis`.</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:06:15.212000</ts>
    <user>Danita</user>
    <text>Clojure seems to be much more powerful in this area.</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:18:06.212800</ts>
    <user>Dann</user>
    <text>also, for circleci specifically, there's a circleci test namespace that runs clojure.test tests but has some extra ci-friendly features</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:18:17.213200</ts>
    <user>Dann</user>
    <text>circle uses clojure internally and supports it well</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:36:41.213600</ts>
    <user>Danita</user>
    <text>What about Midje? Is it recommended?</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T18:48:45.214000</ts>
    <user>Marlyn</user>
    <text>Not recommended &lt;@Danita&gt; </text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T20:09:27.215200</ts>
    <user>Celestine</user>
    <text>Agreed re: Midje. Definitely not recommended by quite a few folks &lt;@Danita&gt;</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T20:15:09.216000</ts>
    <user>Oleta</user>
    <text>&lt;@Danita&gt; FWIW, if you end up using spec for generative testing, expound can help format the results: &lt;https://github.com/bhb/expound#printing-results-for-check&gt;</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T20:16:01.216800</ts>
    <user>Oleta</user>
    <text>Orchestra is also useful if you plan to instrument functions during tests</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T21:43:26.218800</ts>
    <user>Elaine</user>
    <text>I use midje like this `(deftest foo (fact (+ 1 2) =&amp;gt; 3))` and it's fine. &lt;#C0744GXCJ|cursive&gt; interation and `clj -A:test:test-runner` via `cognitect-labs/test-runner` works. Also I have the power of `contains/just`</text>
  </message>
  <message conversation_id="1735">
    <ts>2019-06-06T23:10:32.220700</ts>
    <user>Celestine</user>
    <text>&lt;@Elaine&gt; I've never found Midje's syntax readable, but it's good to know it can be used like that with `deftest`. With `expectations.clojure.test` that was my goal, so you can write `(deftest foo (expect 3 (+ 1 2)))` -- and `expect` lets you use specs, predicates, and you can "expect more" with destructuring etc.</text>
  </message>
</slack>
